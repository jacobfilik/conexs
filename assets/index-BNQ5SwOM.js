var Qv=Object.defineProperty;var e1=(nt,tt,rt)=>tt in nt?Qv(nt,tt,{enumerable:!0,configurable:!0,writable:!0,value:rt}):nt[tt]=rt;var q0=(nt,tt,rt)=>e1(nt,typeof tt!="symbol"?tt+"":tt,rt);function _mergeNamespaces(nt,tt){for(var rt=0;rt<tt.length;rt++){const st=tt[rt];if(typeof st!="string"&&!Array.isArray(st)){for(const at in st)if(at!=="default"&&!(at in nt)){const lt=Object.getOwnPropertyDescriptor(st,at);lt&&Object.defineProperty(nt,at,lt.get?lt:{enumerable:!0,get:()=>st[at]})}}}return Object.freeze(Object.defineProperty(nt,Symbol.toStringTag,{value:"Module"}))}(function(){const tt=document.createElement("link").relList;if(tt&&tt.supports&&tt.supports("modulepreload"))return;for(const at of document.querySelectorAll('link[rel="modulepreload"]'))st(at);new MutationObserver(at=>{for(const lt of at)if(lt.type==="childList")for(const dt of lt.addedNodes)dt.tagName==="LINK"&&dt.rel==="modulepreload"&&st(dt)}).observe(document,{childList:!0,subtree:!0});function rt(at){const lt={};return at.integrity&&(lt.integrity=at.integrity),at.referrerPolicy&&(lt.referrerPolicy=at.referrerPolicy),at.crossOrigin==="use-credentials"?lt.credentials="include":at.crossOrigin==="anonymous"?lt.credentials="omit":lt.credentials="same-origin",lt}function st(at){if(at.ep)return;at.ep=!0;const lt=rt(at);fetch(at.href,lt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(nt){return nt&&nt.__esModule&&Object.prototype.hasOwnProperty.call(nt,"default")?nt.default:nt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$5=Symbol.for("react.element"),n$6=Symbol.for("react.portal"),p$7=Symbol.for("react.fragment"),q$7=Symbol.for("react.strict_mode"),r$5=Symbol.for("react.profiler"),t$5=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$4(nt){return nt===null||typeof nt!="object"?null:(nt=z$3&&nt[z$3]||nt["@@iterator"],typeof nt=="function"?nt:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$3={};function E$3(nt,tt,rt){this.props=nt,this.context=tt,this.refs=D$3,this.updater=rt||B$3}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(nt,tt){if(typeof nt!="object"&&typeof nt!="function"&&nt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,nt,tt,"setState")};E$3.prototype.forceUpdate=function(nt){this.updater.enqueueForceUpdate(this,nt,"forceUpdate")};function F$2(){}F$2.prototype=E$3.prototype;function G$2(nt,tt,rt){this.props=nt,this.context=tt,this.refs=D$3,this.updater=rt||B$3}var H$2=G$2.prototype=new F$2;H$2.constructor=G$2;C$3(H$2,E$3.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$3={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(nt,tt,rt){var st,at={},lt=null,dt=null;if(tt!=null)for(st in tt.ref!==void 0&&(dt=tt.ref),tt.key!==void 0&&(lt=""+tt.key),tt)J$1.call(tt,st)&&!L$2.hasOwnProperty(st)&&(at[st]=tt[st]);var yt=arguments.length-2;if(yt===1)at.children=rt;else if(1<yt){for(var vt=Array(yt),_t=0;_t<yt;_t++)vt[_t]=arguments[_t+2];at.children=vt}if(nt&&nt.defaultProps)for(st in yt=nt.defaultProps,yt)at[st]===void 0&&(at[st]=yt[st]);return{$$typeof:l$5,type:nt,key:lt,ref:dt,props:at,_owner:K$3.current}}function N$2(nt,tt){return{$$typeof:l$5,type:nt.type,key:tt,ref:nt.ref,props:nt.props,_owner:nt._owner}}function O$2(nt){return typeof nt=="object"&&nt!==null&&nt.$$typeof===l$5}function escape$1(nt){var tt={"=":"=0",":":"=2"};return"$"+nt.replace(/[=:]/g,function(rt){return tt[rt]})}var P$2=/\/+/g;function Q$3(nt,tt){return typeof nt=="object"&&nt!==null&&nt.key!=null?escape$1(""+nt.key):tt.toString(36)}function R$2(nt,tt,rt,st,at){var lt=typeof nt;(lt==="undefined"||lt==="boolean")&&(nt=null);var dt=!1;if(nt===null)dt=!0;else switch(lt){case"string":case"number":dt=!0;break;case"object":switch(nt.$$typeof){case l$5:case n$6:dt=!0}}if(dt)return dt=nt,at=at(dt),nt=st===""?"."+Q$3(dt,0):st,I$2(at)?(rt="",nt!=null&&(rt=nt.replace(P$2,"$&/")+"/"),R$2(at,tt,rt,"",function(_t){return _t})):at!=null&&(O$2(at)&&(at=N$2(at,rt+(!at.key||dt&&dt.key===at.key?"":(""+at.key).replace(P$2,"$&/")+"/")+nt)),tt.push(at)),1;if(dt=0,st=st===""?".":st+":",I$2(nt))for(var yt=0;yt<nt.length;yt++){lt=nt[yt];var vt=st+Q$3(lt,yt);dt+=R$2(lt,tt,rt,vt,at)}else if(vt=A$4(nt),typeof vt=="function")for(nt=vt.call(nt),yt=0;!(lt=nt.next()).done;)lt=lt.value,vt=st+Q$3(lt,yt++),dt+=R$2(lt,tt,rt,vt,at);else if(lt==="object")throw tt=String(nt),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(nt).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.");return dt}function S$2(nt,tt,rt){if(nt==null)return nt;var st=[],at=0;return R$2(nt,st,"","",function(lt){return tt.call(rt,lt,at++)}),st}function T$3(nt){if(nt._status===-1){var tt=nt._result;tt=tt(),tt.then(function(rt){(nt._status===0||nt._status===-1)&&(nt._status=1,nt._result=rt)},function(rt){(nt._status===0||nt._status===-1)&&(nt._status=2,nt._result=rt)}),nt._status===-1&&(nt._status=0,nt._result=tt)}if(nt._status===1)return nt._result.default;throw nt._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$3};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(nt,tt,rt){S$2(nt,function(){tt.apply(this,arguments)},rt)},count:function(nt){var tt=0;return S$2(nt,function(){tt++}),tt},toArray:function(nt){return S$2(nt,function(tt){return tt})||[]},only:function(nt){if(!O$2(nt))throw Error("React.Children.only expected to receive a single React element child.");return nt}};react_production_min.Component=E$3;react_production_min.Fragment=p$7;react_production_min.Profiler=r$5;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$7;react_production_min.Suspense=w$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$2;react_production_min.cloneElement=function(nt,tt,rt){if(nt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+nt+".");var st=C$3({},nt.props),at=nt.key,lt=nt.ref,dt=nt._owner;if(tt!=null){if(tt.ref!==void 0&&(lt=tt.ref,dt=K$3.current),tt.key!==void 0&&(at=""+tt.key),nt.type&&nt.type.defaultProps)var yt=nt.type.defaultProps;for(vt in tt)J$1.call(tt,vt)&&!L$2.hasOwnProperty(vt)&&(st[vt]=tt[vt]===void 0&&yt!==void 0?yt[vt]:tt[vt])}var vt=arguments.length-2;if(vt===1)st.children=rt;else if(1<vt){yt=Array(vt);for(var _t=0;_t<vt;_t++)yt[_t]=arguments[_t+2];st.children=yt}return{$$typeof:l$5,type:nt.type,key:at,ref:lt,props:st,_owner:dt}};react_production_min.createContext=function(nt){return nt={$$typeof:u$4,_currentValue:nt,_currentValue2:nt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},nt.Provider={$$typeof:t$5,_context:nt},nt.Consumer=nt};react_production_min.createElement=M$2;react_production_min.createFactory=function(nt){var tt=M$2.bind(null,nt);return tt.type=nt,tt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(nt){return{$$typeof:v$5,render:nt}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(nt){return{$$typeof:y$2,_payload:{_status:-1,_result:nt},_init:T$3}};react_production_min.memo=function(nt,tt){return{$$typeof:x$2,type:nt,compare:tt===void 0?null:tt}};react_production_min.startTransition=function(nt){var tt=V$2.transition;V$2.transition={};try{nt()}finally{V$2.transition=tt}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(nt,tt){return U$2.current.useCallback(nt,tt)};react_production_min.useContext=function(nt){return U$2.current.useContext(nt)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(nt){return U$2.current.useDeferredValue(nt)};react_production_min.useEffect=function(nt,tt){return U$2.current.useEffect(nt,tt)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(nt,tt,rt){return U$2.current.useImperativeHandle(nt,tt,rt)};react_production_min.useInsertionEffect=function(nt,tt){return U$2.current.useInsertionEffect(nt,tt)};react_production_min.useLayoutEffect=function(nt,tt){return U$2.current.useLayoutEffect(nt,tt)};react_production_min.useMemo=function(nt,tt){return U$2.current.useMemo(nt,tt)};react_production_min.useReducer=function(nt,tt,rt){return U$2.current.useReducer(nt,tt,rt)};react_production_min.useRef=function(nt){return U$2.current.useRef(nt)};react_production_min.useState=function(nt){return U$2.current.useState(nt)};react_production_min.useSyncExternalStore=function(nt,tt,rt){return U$2.current.useSyncExternalStore(nt,tt,rt)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const ReactExports=getDefaultExportFromCjs(reactExports),React=_mergeNamespaces({__proto__:null,default:ReactExports},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$4=Symbol.for("react.element"),l$4=Symbol.for("react.fragment"),m$5=Object.prototype.hasOwnProperty,n$5=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$6={key:!0,ref:!0,__self:!0,__source:!0};function q$6(nt,tt,rt){var st,at={},lt=null,dt=null;rt!==void 0&&(lt=""+rt),tt.key!==void 0&&(lt=""+tt.key),tt.ref!==void 0&&(dt=tt.ref);for(st in tt)m$5.call(tt,st)&&!p$6.hasOwnProperty(st)&&(at[st]=tt[st]);if(nt&&nt.defaultProps)for(st in tt=nt.defaultProps,tt)at[st]===void 0&&(at[st]=tt[st]);return{$$typeof:k$4,type:nt,key:lt,ref:dt,props:at,_owner:n$5.current}}reactJsxRuntime_production_min.Fragment=l$4;reactJsxRuntime_production_min.jsx=q$6;reactJsxRuntime_production_min.jsxs=q$6;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(nt){function tt(un,Tn){var Pn=un.length;un.push(Tn);e:for(;0<Pn;){var dn=Pn-1>>>1,Un=un[dn];if(0<at(Un,Tn))un[dn]=Tn,un[Pn]=Un,Pn=dn;else break e}}function rt(un){return un.length===0?null:un[0]}function st(un){if(un.length===0)return null;var Tn=un[0],Pn=un.pop();if(Pn!==Tn){un[0]=Pn;e:for(var dn=0,Un=un.length,qn=Un>>>1;dn<qn;){var In=2*(dn+1)-1,Wn=un[In],ar=In+1,fr=un[ar];if(0>at(Wn,Pn))ar<Un&&0>at(fr,Wn)?(un[dn]=fr,un[ar]=Pn,dn=ar):(un[dn]=Wn,un[In]=Pn,dn=In);else if(ar<Un&&0>at(fr,Pn))un[dn]=fr,un[ar]=Pn,dn=ar;else break e}}return Tn}function at(un,Tn){var Pn=un.sortIndex-Tn.sortIndex;return Pn!==0?Pn:un.id-Tn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var lt=performance;nt.unstable_now=function(){return lt.now()}}else{var dt=Date,yt=dt.now();nt.unstable_now=function(){return dt.now()-yt}}var vt=[],_t=[],bt=1,Mt=null,Ct=3,Tt=!1,$t=!1,Rt=!1,Et=typeof setTimeout=="function"?setTimeout:null,wt=typeof clearTimeout=="function"?clearTimeout:null,Pt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ft(un){for(var Tn=rt(_t);Tn!==null;){if(Tn.callback===null)st(_t);else if(Tn.startTime<=un)st(_t),Tn.sortIndex=Tn.expirationTime,tt(vt,Tn);else break;Tn=rt(_t)}}function Nt(un){if(Rt=!1,Ft(un),!$t)if(rt(vt)!==null)$t=!0,Cn(Ot);else{var Tn=rt(_t);Tn!==null&&Mn(Nt,Tn.startTime-un)}}function Ot(un,Tn){$t=!1,Rt&&(Rt=!1,wt(Zt),Zt=-1),Tt=!0;var Pn=Ct;try{for(Ft(Tn),Mt=rt(vt);Mt!==null&&(!(Mt.expirationTime>Tn)||un&&!nn());){var dn=Mt.callback;if(typeof dn=="function"){Mt.callback=null,Ct=Mt.priorityLevel;var Un=dn(Mt.expirationTime<=Tn);Tn=nt.unstable_now(),typeof Un=="function"?Mt.callback=Un:Mt===rt(vt)&&st(vt),Ft(Tn)}else st(vt);Mt=rt(vt)}if(Mt!==null)var qn=!0;else{var In=rt(_t);In!==null&&Mn(Nt,In.startTime-Tn),qn=!1}return qn}finally{Mt=null,Ct=Pn,Tt=!1}}var Bt=!1,Xt=null,Zt=-1,rn=5,Gt=-1;function nn(){return!(nt.unstable_now()-Gt<rn)}function cn(){if(Xt!==null){var un=nt.unstable_now();Gt=un;var Tn=!0;try{Tn=Xt(!0,un)}finally{Tn?an():(Bt=!1,Xt=null)}}else Bt=!1}var an;if(typeof Pt=="function")an=function(){Pt(cn)};else if(typeof MessageChannel<"u"){var mn=new MessageChannel,En=mn.port2;mn.port1.onmessage=cn,an=function(){En.postMessage(null)}}else an=function(){Et(cn,0)};function Cn(un){Xt=un,Bt||(Bt=!0,an())}function Mn(un,Tn){Zt=Et(function(){un(nt.unstable_now())},Tn)}nt.unstable_IdlePriority=5,nt.unstable_ImmediatePriority=1,nt.unstable_LowPriority=4,nt.unstable_NormalPriority=3,nt.unstable_Profiling=null,nt.unstable_UserBlockingPriority=2,nt.unstable_cancelCallback=function(un){un.callback=null},nt.unstable_continueExecution=function(){$t||Tt||($t=!0,Cn(Ot))},nt.unstable_forceFrameRate=function(un){0>un||125<un?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rn=0<un?Math.floor(1e3/un):5},nt.unstable_getCurrentPriorityLevel=function(){return Ct},nt.unstable_getFirstCallbackNode=function(){return rt(vt)},nt.unstable_next=function(un){switch(Ct){case 1:case 2:case 3:var Tn=3;break;default:Tn=Ct}var Pn=Ct;Ct=Tn;try{return un()}finally{Ct=Pn}},nt.unstable_pauseExecution=function(){},nt.unstable_requestPaint=function(){},nt.unstable_runWithPriority=function(un,Tn){switch(un){case 1:case 2:case 3:case 4:case 5:break;default:un=3}var Pn=Ct;Ct=un;try{return Tn()}finally{Ct=Pn}},nt.unstable_scheduleCallback=function(un,Tn,Pn){var dn=nt.unstable_now();switch(typeof Pn=="object"&&Pn!==null?(Pn=Pn.delay,Pn=typeof Pn=="number"&&0<Pn?dn+Pn:dn):Pn=dn,un){case 1:var Un=-1;break;case 2:Un=250;break;case 5:Un=1073741823;break;case 4:Un=1e4;break;default:Un=5e3}return Un=Pn+Un,un={id:bt++,callback:Tn,priorityLevel:un,startTime:Pn,expirationTime:Un,sortIndex:-1},Pn>dn?(un.sortIndex=Pn,tt(_t,un),rt(vt)===null&&un===rt(_t)&&(Rt?(wt(Zt),Zt=-1):Rt=!0,Mn(Nt,Pn-dn))):(un.sortIndex=Un,tt(vt,un),$t||Tt||($t=!0,Cn(Ot))),un},nt.unstable_shouldYield=nn,nt.unstable_wrapCallback=function(un){var Tn=Ct;return function(){var Pn=Ct;Ct=Tn;try{return un.apply(this,arguments)}finally{Ct=Pn}}}})(scheduler_production_min$1);scheduler$1.exports=scheduler_production_min$1;var schedulerExports$1=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports$1;function p$5(nt){for(var tt="https://reactjs.org/docs/error-decoder.html?invariant="+nt,rt=1;rt<arguments.length;rt++)tt+="&args[]="+encodeURIComponent(arguments[rt]);return"Minified React error #"+nt+"; visit "+tt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(nt,tt){ha$1(nt,tt),ha$1(nt+"Capture",tt)}function ha$1(nt,tt){for(ea$1[nt]=tt,nt=0;nt<tt.length;nt++)da$1.add(tt[nt])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(nt){return ja.call(ma$1,nt)?!0:ja.call(la$1,nt)?!1:ka.test(nt)?ma$1[nt]=!0:(la$1[nt]=!0,!1)}function pa$1(nt,tt,rt,st){if(rt!==null&&rt.type===0)return!1;switch(typeof tt){case"function":case"symbol":return!0;case"boolean":return st?!1:rt!==null?!rt.acceptsBooleans:(nt=nt.toLowerCase().slice(0,5),nt!=="data-"&&nt!=="aria-");default:return!1}}function qa$1(nt,tt,rt,st){if(tt===null||typeof tt>"u"||pa$1(nt,tt,rt,st))return!0;if(st)return!1;if(rt!==null)switch(rt.type){case 3:return!tt;case 4:return tt===!1;case 5:return isNaN(tt);case 6:return isNaN(tt)||1>tt}return!1}function v$4(nt,tt,rt,st,at,lt,dt){this.acceptsBooleans=tt===2||tt===3||tt===4,this.attributeName=st,this.attributeNamespace=at,this.mustUseProperty=rt,this.propertyName=nt,this.type=tt,this.sanitizeURL=lt,this.removeEmptyString=dt}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(nt){z$2[nt]=new v$4(nt,0,!1,nt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(nt){var tt=nt[0];z$2[tt]=new v$4(tt,1,!1,nt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(nt){z$2[nt]=new v$4(nt,2,!1,nt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(nt){z$2[nt]=new v$4(nt,2,!1,nt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(nt){z$2[nt]=new v$4(nt,3,!1,nt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(nt){z$2[nt]=new v$4(nt,3,!0,nt,null,!1,!1)});["capture","download"].forEach(function(nt){z$2[nt]=new v$4(nt,4,!1,nt,null,!1,!1)});["cols","rows","size","span"].forEach(function(nt){z$2[nt]=new v$4(nt,6,!1,nt,null,!1,!1)});["rowSpan","start"].forEach(function(nt){z$2[nt]=new v$4(nt,5,!1,nt.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(nt){return nt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(nt){var tt=nt.replace(ra$1,sa$1);z$2[tt]=new v$4(tt,1,!1,nt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(nt){var tt=nt.replace(ra$1,sa$1);z$2[tt]=new v$4(tt,1,!1,nt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(nt){var tt=nt.replace(ra$1,sa$1);z$2[tt]=new v$4(tt,1,!1,nt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(nt){z$2[nt]=new v$4(nt,1,!1,nt.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(nt){z$2[nt]=new v$4(nt,1,!1,nt.toLowerCase(),null,!0,!0)});function ta$1(nt,tt,rt,st){var at=z$2.hasOwnProperty(tt)?z$2[tt]:null;(at!==null?at.type!==0:st||!(2<tt.length)||tt[0]!=="o"&&tt[0]!=="O"||tt[1]!=="n"&&tt[1]!=="N")&&(qa$1(tt,rt,at,st)&&(rt=null),st||at===null?oa$1(tt)&&(rt===null?nt.removeAttribute(tt):nt.setAttribute(tt,""+rt)):at.mustUseProperty?nt[at.propertyName]=rt===null?at.type===3?!1:"":rt:(tt=at.attributeName,st=at.attributeNamespace,rt===null?nt.removeAttribute(tt):(at=at.type,rt=at===3||at===4&&rt===!0?"":""+rt,st?nt.setAttributeNS(st,tt,rt):nt.setAttribute(tt,rt))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(nt){return nt===null||typeof nt!="object"?null:(nt=Ja$1&&nt[Ja$1]||nt["@@iterator"],typeof nt=="function"?nt:null)}var A$3=Object.assign,La;function Ma$1(nt){if(La===void 0)try{throw Error()}catch(rt){var tt=rt.stack.trim().match(/\n( *(at )?)/);La=tt&&tt[1]||""}return`
`+La+nt}var Na=!1;function Oa(nt,tt){if(!nt||Na)return"";Na=!0;var rt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(tt)if(tt=function(){throw Error()},Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(_t){var st=_t}Reflect.construct(nt,[],tt)}else{try{tt.call()}catch(_t){st=_t}nt.call(tt.prototype)}else{try{throw Error()}catch(_t){st=_t}nt()}}catch(_t){if(_t&&st&&typeof _t.stack=="string"){for(var at=_t.stack.split(`
`),lt=st.stack.split(`
`),dt=at.length-1,yt=lt.length-1;1<=dt&&0<=yt&&at[dt]!==lt[yt];)yt--;for(;1<=dt&&0<=yt;dt--,yt--)if(at[dt]!==lt[yt]){if(dt!==1||yt!==1)do if(dt--,yt--,0>yt||at[dt]!==lt[yt]){var vt=`
`+at[dt].replace(" at new "," at ");return nt.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",nt.displayName)),vt}while(1<=dt&&0<=yt);break}}}finally{Na=!1,Error.prepareStackTrace=rt}return(nt=nt?nt.displayName||nt.name:"")?Ma$1(nt):""}function Pa(nt){switch(nt.tag){case 5:return Ma$1(nt.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return nt=Oa(nt.type,!1),nt;case 11:return nt=Oa(nt.type.render,!1),nt;case 1:return nt=Oa(nt.type,!0),nt;default:return""}}function Qa$1(nt){if(nt==null)return null;if(typeof nt=="function")return nt.displayName||nt.name||null;if(typeof nt=="string")return nt;switch(nt){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof nt=="object")switch(nt.$$typeof){case Ca$1:return(nt.displayName||"Context")+".Consumer";case Ba:return(nt._context.displayName||"Context")+".Provider";case Da:var tt=nt.render;return nt=nt.displayName,nt||(nt=tt.displayName||tt.name||"",nt=nt!==""?"ForwardRef("+nt+")":"ForwardRef"),nt;case Ga:return tt=nt.displayName||null,tt!==null?tt:Qa$1(nt.type)||"Memo";case Ha:tt=nt._payload,nt=nt._init;try{return Qa$1(nt(tt))}catch{}}return null}function Ra(nt){var tt=nt.type;switch(nt.tag){case 24:return"Cache";case 9:return(tt.displayName||"Context")+".Consumer";case 10:return(tt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return nt=tt.render,nt=nt.displayName||nt.name||"",tt.displayName||(nt!==""?"ForwardRef("+nt+")":"ForwardRef");case 7:return"Fragment";case 5:return tt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(tt);case 8:return tt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof tt=="function")return tt.displayName||tt.name||null;if(typeof tt=="string")return tt}return null}function Sa$1(nt){switch(typeof nt){case"boolean":case"number":case"string":case"undefined":return nt;case"object":return nt;default:return""}}function Ta(nt){var tt=nt.type;return(nt=nt.nodeName)&&nt.toLowerCase()==="input"&&(tt==="checkbox"||tt==="radio")}function Ua(nt){var tt=Ta(nt)?"checked":"value",rt=Object.getOwnPropertyDescriptor(nt.constructor.prototype,tt),st=""+nt[tt];if(!nt.hasOwnProperty(tt)&&typeof rt<"u"&&typeof rt.get=="function"&&typeof rt.set=="function"){var at=rt.get,lt=rt.set;return Object.defineProperty(nt,tt,{configurable:!0,get:function(){return at.call(this)},set:function(dt){st=""+dt,lt.call(this,dt)}}),Object.defineProperty(nt,tt,{enumerable:rt.enumerable}),{getValue:function(){return st},setValue:function(dt){st=""+dt},stopTracking:function(){nt._valueTracker=null,delete nt[tt]}}}}function Va(nt){nt._valueTracker||(nt._valueTracker=Ua(nt))}function Wa(nt){if(!nt)return!1;var tt=nt._valueTracker;if(!tt)return!0;var rt=tt.getValue(),st="";return nt&&(st=Ta(nt)?nt.checked?"true":"false":nt.value),nt=st,nt!==rt?(tt.setValue(nt),!0):!1}function Xa(nt){if(nt=nt||(typeof document<"u"?document:void 0),typeof nt>"u")return null;try{return nt.activeElement||nt.body}catch{return nt.body}}function Ya(nt,tt){var rt=tt.checked;return A$3({},tt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rt??nt._wrapperState.initialChecked})}function Za(nt,tt){var rt=tt.defaultValue==null?"":tt.defaultValue,st=tt.checked!=null?tt.checked:tt.defaultChecked;rt=Sa$1(tt.value!=null?tt.value:rt),nt._wrapperState={initialChecked:st,initialValue:rt,controlled:tt.type==="checkbox"||tt.type==="radio"?tt.checked!=null:tt.value!=null}}function ab(nt,tt){tt=tt.checked,tt!=null&&ta$1(nt,"checked",tt,!1)}function bb(nt,tt){ab(nt,tt);var rt=Sa$1(tt.value),st=tt.type;if(rt!=null)st==="number"?(rt===0&&nt.value===""||nt.value!=rt)&&(nt.value=""+rt):nt.value!==""+rt&&(nt.value=""+rt);else if(st==="submit"||st==="reset"){nt.removeAttribute("value");return}tt.hasOwnProperty("value")?cb(nt,tt.type,rt):tt.hasOwnProperty("defaultValue")&&cb(nt,tt.type,Sa$1(tt.defaultValue)),tt.checked==null&&tt.defaultChecked!=null&&(nt.defaultChecked=!!tt.defaultChecked)}function db(nt,tt,rt){if(tt.hasOwnProperty("value")||tt.hasOwnProperty("defaultValue")){var st=tt.type;if(!(st!=="submit"&&st!=="reset"||tt.value!==void 0&&tt.value!==null))return;tt=""+nt._wrapperState.initialValue,rt||tt===nt.value||(nt.value=tt),nt.defaultValue=tt}rt=nt.name,rt!==""&&(nt.name=""),nt.defaultChecked=!!nt._wrapperState.initialChecked,rt!==""&&(nt.name=rt)}function cb(nt,tt,rt){(tt!=="number"||Xa(nt.ownerDocument)!==nt)&&(rt==null?nt.defaultValue=""+nt._wrapperState.initialValue:nt.defaultValue!==""+rt&&(nt.defaultValue=""+rt))}var eb=Array.isArray;function fb(nt,tt,rt,st){if(nt=nt.options,tt){tt={};for(var at=0;at<rt.length;at++)tt["$"+rt[at]]=!0;for(rt=0;rt<nt.length;rt++)at=tt.hasOwnProperty("$"+nt[rt].value),nt[rt].selected!==at&&(nt[rt].selected=at),at&&st&&(nt[rt].defaultSelected=!0)}else{for(rt=""+Sa$1(rt),tt=null,at=0;at<nt.length;at++){if(nt[at].value===rt){nt[at].selected=!0,st&&(nt[at].defaultSelected=!0);return}tt!==null||nt[at].disabled||(tt=nt[at])}tt!==null&&(tt.selected=!0)}}function gb(nt,tt){if(tt.dangerouslySetInnerHTML!=null)throw Error(p$5(91));return A$3({},tt,{value:void 0,defaultValue:void 0,children:""+nt._wrapperState.initialValue})}function hb(nt,tt){var rt=tt.value;if(rt==null){if(rt=tt.children,tt=tt.defaultValue,rt!=null){if(tt!=null)throw Error(p$5(92));if(eb(rt)){if(1<rt.length)throw Error(p$5(93));rt=rt[0]}tt=rt}tt==null&&(tt=""),rt=tt}nt._wrapperState={initialValue:Sa$1(rt)}}function ib(nt,tt){var rt=Sa$1(tt.value),st=Sa$1(tt.defaultValue);rt!=null&&(rt=""+rt,rt!==nt.value&&(nt.value=rt),tt.defaultValue==null&&nt.defaultValue!==rt&&(nt.defaultValue=rt)),st!=null&&(nt.defaultValue=""+st)}function jb(nt){var tt=nt.textContent;tt===nt._wrapperState.initialValue&&tt!==""&&tt!==null&&(nt.value=tt)}function kb(nt){switch(nt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(nt,tt){return nt==null||nt==="http://www.w3.org/1999/xhtml"?kb(tt):nt==="http://www.w3.org/2000/svg"&&tt==="foreignObject"?"http://www.w3.org/1999/xhtml":nt}var mb,nb=function(nt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(tt,rt,st,at){MSApp.execUnsafeLocalFunction(function(){return nt(tt,rt,st,at)})}:nt}(function(nt,tt){if(nt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in nt)nt.innerHTML=tt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+tt.valueOf().toString()+"</svg>",tt=mb.firstChild;nt.firstChild;)nt.removeChild(nt.firstChild);for(;tt.firstChild;)nt.appendChild(tt.firstChild)}});function ob(nt,tt){if(tt){var rt=nt.firstChild;if(rt&&rt===nt.lastChild&&rt.nodeType===3){rt.nodeValue=tt;return}}nt.textContent=tt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(nt){qb.forEach(function(tt){tt=tt+nt.charAt(0).toUpperCase()+nt.substring(1),pb[tt]=pb[nt]})});function rb(nt,tt,rt){return tt==null||typeof tt=="boolean"||tt===""?"":rt||typeof tt!="number"||tt===0||pb.hasOwnProperty(nt)&&pb[nt]?(""+tt).trim():tt+"px"}function sb(nt,tt){nt=nt.style;for(var rt in tt)if(tt.hasOwnProperty(rt)){var st=rt.indexOf("--")===0,at=rb(rt,tt[rt],st);rt==="float"&&(rt="cssFloat"),st?nt.setProperty(rt,at):nt[rt]=at}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(nt,tt){if(tt){if(tb[nt]&&(tt.children!=null||tt.dangerouslySetInnerHTML!=null))throw Error(p$5(137,nt));if(tt.dangerouslySetInnerHTML!=null){if(tt.children!=null)throw Error(p$5(60));if(typeof tt.dangerouslySetInnerHTML!="object"||!("__html"in tt.dangerouslySetInnerHTML))throw Error(p$5(61))}if(tt.style!=null&&typeof tt.style!="object")throw Error(p$5(62))}}function vb(nt,tt){if(nt.indexOf("-")===-1)return typeof tt.is=="string";switch(nt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(nt){return nt=nt.target||nt.srcElement||window,nt.correspondingUseElement&&(nt=nt.correspondingUseElement),nt.nodeType===3?nt.parentNode:nt}var yb=null,zb=null,Ab=null;function Bb(nt){if(nt=Cb(nt)){if(typeof yb!="function")throw Error(p$5(280));var tt=nt.stateNode;tt&&(tt=Db(tt),yb(nt.stateNode,nt.type,tt))}}function Eb(nt){zb?Ab?Ab.push(nt):Ab=[nt]:zb=nt}function Fb(){if(zb){var nt=zb,tt=Ab;if(Ab=zb=null,Bb(nt),tt)for(nt=0;nt<tt.length;nt++)Bb(tt[nt])}}function Gb(nt,tt){return nt(tt)}function Hb(){}var Ib=!1;function Jb(nt,tt,rt){if(Ib)return nt(tt,rt);Ib=!0;try{return Gb(nt,tt,rt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(nt,tt){var rt=nt.stateNode;if(rt===null)return null;var st=Db(rt);if(st===null)return null;rt=st[tt];e:switch(tt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(st=!st.disabled)||(nt=nt.type,st=!(nt==="button"||nt==="input"||nt==="select"||nt==="textarea")),nt=!st;break e;default:nt=!1}if(nt)return null;if(rt&&typeof rt!="function")throw Error(p$5(231,tt,typeof rt));return rt}var Lb=!1;if(ia$1)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(nt,tt,rt,st,at,lt,dt,yt,vt){var _t=Array.prototype.slice.call(arguments,3);try{tt.apply(rt,_t)}catch(bt){this.onError(bt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(nt){Ob=!0,Pb=nt}};function Tb(nt,tt,rt,st,at,lt,dt,yt,vt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(nt,tt,rt,st,at,lt,dt,yt,vt){if(Tb.apply(this,arguments),Ob){if(Ob){var _t=Pb;Ob=!1,Pb=null}else throw Error(p$5(198));Qb||(Qb=!0,Rb=_t)}}function Vb(nt){var tt=nt,rt=nt;if(nt.alternate)for(;tt.return;)tt=tt.return;else{nt=tt;do tt=nt,tt.flags&4098&&(rt=tt.return),nt=tt.return;while(nt)}return tt.tag===3?rt:null}function Wb(nt){if(nt.tag===13){var tt=nt.memoizedState;if(tt===null&&(nt=nt.alternate,nt!==null&&(tt=nt.memoizedState)),tt!==null)return tt.dehydrated}return null}function Xb(nt){if(Vb(nt)!==nt)throw Error(p$5(188))}function Yb(nt){var tt=nt.alternate;if(!tt){if(tt=Vb(nt),tt===null)throw Error(p$5(188));return tt!==nt?null:nt}for(var rt=nt,st=tt;;){var at=rt.return;if(at===null)break;var lt=at.alternate;if(lt===null){if(st=at.return,st!==null){rt=st;continue}break}if(at.child===lt.child){for(lt=at.child;lt;){if(lt===rt)return Xb(at),nt;if(lt===st)return Xb(at),tt;lt=lt.sibling}throw Error(p$5(188))}if(rt.return!==st.return)rt=at,st=lt;else{for(var dt=!1,yt=at.child;yt;){if(yt===rt){dt=!0,rt=at,st=lt;break}if(yt===st){dt=!0,st=at,rt=lt;break}yt=yt.sibling}if(!dt){for(yt=lt.child;yt;){if(yt===rt){dt=!0,rt=lt,st=at;break}if(yt===st){dt=!0,st=lt,rt=at;break}yt=yt.sibling}if(!dt)throw Error(p$5(189))}}if(rt.alternate!==st)throw Error(p$5(190))}if(rt.tag!==3)throw Error(p$5(188));return rt.stateNode.current===rt?nt:tt}function Zb(nt){return nt=Yb(nt),nt!==null?$b(nt):null}function $b(nt){if(nt.tag===5||nt.tag===6)return nt;for(nt=nt.child;nt!==null;){var tt=$b(nt);if(tt!==null)return tt;nt=nt.sibling}return null}var ac=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec=ca$1.unstable_getCurrentPriorityLevel,fc=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic=ca$1.unstable_LowPriority,jc=ca$1.unstable_IdlePriority,kc$1=null,lc=null;function mc(nt){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc$1,nt,void 0,(nt.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc=Math.log,qc=Math.LN2;function nc$1(nt){return nt>>>=0,nt===0?32:31-(pc(nt)/qc|0)|0}var rc$1=64,sc=4194304;function tc(nt){switch(nt&-nt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return nt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return nt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return nt}}function uc(nt,tt){var rt=nt.pendingLanes;if(rt===0)return 0;var st=0,at=nt.suspendedLanes,lt=nt.pingedLanes,dt=rt&268435455;if(dt!==0){var yt=dt&~at;yt!==0?st=tc(yt):(lt&=dt,lt!==0&&(st=tc(lt)))}else dt=rt&~at,dt!==0?st=tc(dt):lt!==0&&(st=tc(lt));if(st===0)return 0;if(tt!==0&&tt!==st&&!(tt&at)&&(at=st&-st,lt=tt&-tt,at>=lt||at===16&&(lt&4194240)!==0))return tt;if(st&4&&(st|=rt&16),tt=nt.entangledLanes,tt!==0)for(nt=nt.entanglements,tt&=st;0<tt;)rt=31-oc$1(tt),at=1<<rt,st|=nt[rt],tt&=~at;return st}function vc$1(nt,tt){switch(nt){case 1:case 2:case 4:return tt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return tt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(nt,tt){for(var rt=nt.suspendedLanes,st=nt.pingedLanes,at=nt.expirationTimes,lt=nt.pendingLanes;0<lt;){var dt=31-oc$1(lt),yt=1<<dt,vt=at[dt];vt===-1?(!(yt&rt)||yt&st)&&(at[dt]=vc$1(yt,tt)):vt<=tt&&(nt.expiredLanes|=yt),lt&=~yt}}function xc(nt){return nt=nt.pendingLanes&-1073741825,nt!==0?nt:nt&1073741824?1073741824:0}function yc(){var nt=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),nt}function zc$1(nt){for(var tt=[],rt=0;31>rt;rt++)tt.push(nt);return tt}function Ac$1(nt,tt,rt){nt.pendingLanes|=tt,tt!==536870912&&(nt.suspendedLanes=0,nt.pingedLanes=0),nt=nt.eventTimes,tt=31-oc$1(tt),nt[tt]=rt}function Bc$1(nt,tt){var rt=nt.pendingLanes&~tt;nt.pendingLanes=tt,nt.suspendedLanes=0,nt.pingedLanes=0,nt.expiredLanes&=tt,nt.mutableReadLanes&=tt,nt.entangledLanes&=tt,tt=nt.entanglements;var st=nt.eventTimes;for(nt=nt.expirationTimes;0<rt;){var at=31-oc$1(rt),lt=1<<at;tt[at]=0,st[at]=-1,nt[at]=-1,rt&=~lt}}function Cc(nt,tt){var rt=nt.entangledLanes|=tt;for(nt=nt.entanglements;rt;){var st=31-oc$1(rt),at=1<<st;at&tt|nt[st]&tt&&(nt[st]|=tt),rt&=~at}}var C$2=0;function Dc$1(nt){return nt&=-nt,1<nt?4<nt?nt&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc,Ic$1,Jc=!1,Kc=[],Lc$1=null,Mc=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(nt,tt){switch(nt){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(tt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(tt.pointerId)}}function Tc$1(nt,tt,rt,st,at,lt){return nt===null||nt.nativeEvent!==lt?(nt={blockedOn:tt,domEventName:rt,eventSystemFlags:st,nativeEvent:lt,targetContainers:[at]},tt!==null&&(tt=Cb(tt),tt!==null&&Fc$1(tt)),nt):(nt.eventSystemFlags|=st,tt=nt.targetContainers,at!==null&&tt.indexOf(at)===-1&&tt.push(at),nt)}function Uc(nt,tt,rt,st,at){switch(tt){case"focusin":return Lc$1=Tc$1(Lc$1,nt,tt,rt,st,at),!0;case"dragenter":return Mc=Tc$1(Mc,nt,tt,rt,st,at),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,nt,tt,rt,st,at),!0;case"pointerover":var lt=at.pointerId;return Oc$1.set(lt,Tc$1(Oc$1.get(lt)||null,nt,tt,rt,st,at)),!0;case"gotpointercapture":return lt=at.pointerId,Pc$1.set(lt,Tc$1(Pc$1.get(lt)||null,nt,tt,rt,st,at)),!0}return!1}function Vc$1(nt){var tt=Wc(nt.target);if(tt!==null){var rt=Vb(tt);if(rt!==null){if(tt=rt.tag,tt===13){if(tt=Wb(rt),tt!==null){nt.blockedOn=tt,Ic$1(nt.priority,function(){Gc$1(rt)});return}}else if(tt===3&&rt.stateNode.current.memoizedState.isDehydrated){nt.blockedOn=rt.tag===3?rt.stateNode.containerInfo:null;return}}}nt.blockedOn=null}function Xc(nt){if(nt.blockedOn!==null)return!1;for(var tt=nt.targetContainers;0<tt.length;){var rt=Yc$1(nt.domEventName,nt.eventSystemFlags,tt[0],nt.nativeEvent);if(rt===null){rt=nt.nativeEvent;var st=new rt.constructor(rt.type,rt);wb=st,rt.target.dispatchEvent(st),wb=null}else return tt=Cb(rt),tt!==null&&Fc$1(tt),nt.blockedOn=rt,!1;tt.shift()}return!0}function Zc$1(nt,tt,rt){Xc(nt)&&rt.delete(tt)}function $c$1(){Jc=!1,Lc$1!==null&&Xc(Lc$1)&&(Lc$1=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc$1!==null&&Xc(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(nt,tt){nt.blockedOn===tt&&(nt.blockedOn=null,Jc||(Jc=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd(nt){function tt(at){return ad$1(at,nt)}if(0<Kc.length){ad$1(Kc[0],nt);for(var rt=1;rt<Kc.length;rt++){var st=Kc[rt];st.blockedOn===nt&&(st.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,nt),Mc!==null&&ad$1(Mc,nt),Nc$1!==null&&ad$1(Nc$1,nt),Oc$1.forEach(tt),Pc$1.forEach(tt),rt=0;rt<Qc.length;rt++)st=Qc[rt],st.blockedOn===nt&&(st.blockedOn=null);for(;0<Qc.length&&(rt=Qc[0],rt.blockedOn===null);)Vc$1(rt),rt.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(nt,tt,rt,st){var at=C$2,lt=cd.transition;cd.transition=null;try{C$2=1,fd(nt,tt,rt,st)}finally{C$2=at,cd.transition=lt}}function gd(nt,tt,rt,st){var at=C$2,lt=cd.transition;cd.transition=null;try{C$2=4,fd(nt,tt,rt,st)}finally{C$2=at,cd.transition=lt}}function fd(nt,tt,rt,st){if(dd){var at=Yc$1(nt,tt,rt,st);if(at===null)hd(nt,tt,st,id$1,rt),Sc(nt,st);else if(Uc(at,nt,tt,rt,st))st.stopPropagation();else if(Sc(nt,st),tt&4&&-1<Rc$1.indexOf(nt)){for(;at!==null;){var lt=Cb(at);if(lt!==null&&Ec$1(lt),lt=Yc$1(nt,tt,rt,st),lt===null&&hd(nt,tt,st,id$1,rt),lt===at)break;at=lt}at!==null&&st.stopPropagation()}else hd(nt,tt,st,null,rt)}}var id$1=null;function Yc$1(nt,tt,rt,st){if(id$1=null,nt=xb(st),nt=Wc(nt),nt!==null)if(tt=Vb(nt),tt===null)nt=null;else if(rt=tt.tag,rt===13){if(nt=Wb(tt),nt!==null)return nt;nt=null}else if(rt===3){if(tt.stateNode.current.memoizedState.isDehydrated)return tt.tag===3?tt.stateNode.containerInfo:null;nt=null}else tt!==nt&&(nt=null);return id$1=nt,null}function jd(nt){switch(nt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc$1:return 4;case hc$1:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var nt,tt=ld,rt=tt.length,st,at="value"in kd?kd.value:kd.textContent,lt=at.length;for(nt=0;nt<rt&&tt[nt]===at[nt];nt++);var dt=rt-nt;for(st=1;st<=dt&&tt[rt-st]===at[lt-st];st++);return md=at.slice(nt,1<st?1-st:void 0)}function od(nt){var tt=nt.keyCode;return"charCode"in nt?(nt=nt.charCode,nt===0&&tt===13&&(nt=13)):nt=tt,nt===10&&(nt=13),32<=nt||nt===13?nt:0}function pd(){return!0}function qd(){return!1}function rd(nt){function tt(rt,st,at,lt,dt){this._reactName=rt,this._targetInst=at,this.type=st,this.nativeEvent=lt,this.target=dt,this.currentTarget=null;for(var yt in nt)nt.hasOwnProperty(yt)&&(rt=nt[yt],this[yt]=rt?rt(lt):lt[yt]);return this.isDefaultPrevented=(lt.defaultPrevented!=null?lt.defaultPrevented:lt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(tt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rt=this.nativeEvent;rt&&(rt.preventDefault?rt.preventDefault():typeof rt.returnValue!="unknown"&&(rt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var rt=this.nativeEvent;rt&&(rt.stopPropagation?rt.stopPropagation():typeof rt.cancelBubble!="unknown"&&(rt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),tt}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(nt){return nt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd$1),ud=A$3({},sd$1,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(nt){return nt.relatedTarget===void 0?nt.fromElement===nt.srcElement?nt.toElement:nt.fromElement:nt.relatedTarget},movementX:function(nt){return"movementX"in nt?nt.movementX:(nt!==yd&&(yd&&nt.type==="mousemove"?(wd=nt.screenX-yd.screenX,xd=nt.screenY-yd.screenY):xd=wd=0,yd=nt),wd)},movementY:function(nt){return"movementY"in nt?nt.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed$1=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed$1),Gd=A$3({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd$1,{clipboardData:function(nt){return"clipboardData"in nt?nt.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd$1,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(nt){var tt=this.nativeEvent;return tt.getModifierState?tt.getModifierState(nt):(nt=Od[nt])?!!tt[nt]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(nt){if(nt.key){var tt=Md[nt.key]||nt.key;if(tt!=="Unidentified")return tt}return nt.type==="keypress"?(nt=od(nt),nt===13?"Enter":String.fromCharCode(nt)):nt.type==="keydown"||nt.type==="keyup"?Nd[nt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(nt){return nt.type==="keypress"?od(nt):0},keyCode:function(nt){return nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0},which:function(nt){return nt.type==="keypress"?od(nt):nt.type==="keydown"||nt.type==="keyup"?nt.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(nt){return"deltaX"in nt?nt.deltaX:"wheelDeltaX"in nt?-nt.wheelDeltaX:0},deltaY:function(nt){return"deltaY"in nt?nt.deltaY:"wheelDeltaY"in nt?-nt.wheelDeltaY:"wheelDelta"in nt?-nt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$1,de$1=ia$1&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$2=" ",fe$2=!1;function ge$2(nt,tt){switch(nt){case"keyup":return $d.indexOf(tt.keyCode)!==-1;case"keydown":return tt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(nt){return nt=nt.detail,typeof nt=="object"&&"data"in nt?nt.data:null}var ie$2=!1;function je$2(nt,tt){switch(nt){case"compositionend":return he$1(tt);case"keypress":return tt.which!==32?null:(fe$2=!0,ee$2);case"textInput":return nt=tt.data,nt===ee$2&&fe$2?null:nt;default:return null}}function ke$2(nt,tt){if(ie$2)return nt==="compositionend"||!ae$1&&ge$2(nt,tt)?(nt=nd(),md=ld=kd=null,ie$2=!1,nt):null;switch(nt){case"paste":return null;case"keypress":if(!(tt.ctrlKey||tt.altKey||tt.metaKey)||tt.ctrlKey&&tt.altKey){if(tt.char&&1<tt.char.length)return tt.char;if(tt.which)return String.fromCharCode(tt.which)}return null;case"compositionend":return de$1&&tt.locale!=="ko"?null:tt.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(nt){var tt=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return tt==="input"?!!le$1[nt.type]:tt==="textarea"}function ne$1(nt,tt,rt,st){Eb(st),tt=oe$2(tt,"onChange"),0<tt.length&&(rt=new td("onChange","change",null,rt,st),nt.push({event:rt,listeners:tt}))}var pe$2=null,qe$1=null;function re$2(nt){se$1(nt,0)}function te$2(nt){var tt=ue$1(nt);if(Wa(tt))return nt}function ve$1(nt,tt){if(nt==="change")return tt}var we$1=!1;if(ia$1){var xe$1;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$2&&(pe$2.detachEvent("onpropertychange",Be$2),qe$1=pe$2=null)}function Be$2(nt){if(nt.propertyName==="value"&&te$2(qe$1)){var tt=[];ne$1(tt,qe$1,nt,xb(nt)),Jb(re$2,tt)}}function Ce$2(nt,tt,rt){nt==="focusin"?(Ae$2(),pe$2=tt,qe$1=rt,pe$2.attachEvent("onpropertychange",Be$2)):nt==="focusout"&&Ae$2()}function De$2(nt){if(nt==="selectionchange"||nt==="keyup"||nt==="keydown")return te$2(qe$1)}function Ee$1(nt,tt){if(nt==="click")return te$2(tt)}function Fe$2(nt,tt){if(nt==="input"||nt==="change")return te$2(tt)}function Ge$1(nt,tt){return nt===tt&&(nt!==0||1/nt===1/tt)||nt!==nt&&tt!==tt}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(nt,tt){if(He$2(nt,tt))return!0;if(typeof nt!="object"||nt===null||typeof tt!="object"||tt===null)return!1;var rt=Object.keys(nt),st=Object.keys(tt);if(rt.length!==st.length)return!1;for(st=0;st<rt.length;st++){var at=rt[st];if(!ja.call(tt,at)||!He$2(nt[at],tt[at]))return!1}return!0}function Je(nt){for(;nt&&nt.firstChild;)nt=nt.firstChild;return nt}function Ke(nt,tt){var rt=Je(nt);nt=0;for(var st;rt;){if(rt.nodeType===3){if(st=nt+rt.textContent.length,nt<=tt&&st>=tt)return{node:rt,offset:tt-nt};nt=st}e:{for(;rt;){if(rt.nextSibling){rt=rt.nextSibling;break e}rt=rt.parentNode}rt=void 0}rt=Je(rt)}}function Le$2(nt,tt){return nt&&tt?nt===tt?!0:nt&&nt.nodeType===3?!1:tt&&tt.nodeType===3?Le$2(nt,tt.parentNode):"contains"in nt?nt.contains(tt):nt.compareDocumentPosition?!!(nt.compareDocumentPosition(tt)&16):!1:!1}function Me$2(){for(var nt=window,tt=Xa();tt instanceof nt.HTMLIFrameElement;){try{var rt=typeof tt.contentWindow.location.href=="string"}catch{rt=!1}if(rt)nt=tt.contentWindow;else break;tt=Xa(nt.document)}return tt}function Ne$2(nt){var tt=nt&&nt.nodeName&&nt.nodeName.toLowerCase();return tt&&(tt==="input"&&(nt.type==="text"||nt.type==="search"||nt.type==="tel"||nt.type==="url"||nt.type==="password")||tt==="textarea"||nt.contentEditable==="true")}function Oe$1(nt){var tt=Me$2(),rt=nt.focusedElem,st=nt.selectionRange;if(tt!==rt&&rt&&rt.ownerDocument&&Le$2(rt.ownerDocument.documentElement,rt)){if(st!==null&&Ne$2(rt)){if(tt=st.start,nt=st.end,nt===void 0&&(nt=tt),"selectionStart"in rt)rt.selectionStart=tt,rt.selectionEnd=Math.min(nt,rt.value.length);else if(nt=(tt=rt.ownerDocument||document)&&tt.defaultView||window,nt.getSelection){nt=nt.getSelection();var at=rt.textContent.length,lt=Math.min(st.start,at);st=st.end===void 0?lt:Math.min(st.end,at),!nt.extend&&lt>st&&(at=st,st=lt,lt=at),at=Ke(rt,lt);var dt=Ke(rt,st);at&&dt&&(nt.rangeCount!==1||nt.anchorNode!==at.node||nt.anchorOffset!==at.offset||nt.focusNode!==dt.node||nt.focusOffset!==dt.offset)&&(tt=tt.createRange(),tt.setStart(at.node,at.offset),nt.removeAllRanges(),lt>st?(nt.addRange(tt),nt.extend(dt.node,dt.offset)):(tt.setEnd(dt.node,dt.offset),nt.addRange(tt)))}}for(tt=[],nt=rt;nt=nt.parentNode;)nt.nodeType===1&&tt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<tt.length;rt++)nt=tt[rt],nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}var Pe$2=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$2=null,Se$1=null,Te$2=!1;function Ue$2(nt,tt,rt){var st=rt.window===rt?rt.document:rt.nodeType===9?rt:rt.ownerDocument;Te$2||Qe==null||Qe!==Xa(st)||(st=Qe,"selectionStart"in st&&Ne$2(st)?st={start:st.selectionStart,end:st.selectionEnd}:(st=(st.ownerDocument&&st.ownerDocument.defaultView||window).getSelection(),st={anchorNode:st.anchorNode,anchorOffset:st.anchorOffset,focusNode:st.focusNode,focusOffset:st.focusOffset}),Se$1&&Ie$2(Se$1,st)||(Se$1=st,st=oe$2(Re$2,"onSelect"),0<st.length&&(tt=new td("onSelect","select",null,tt,rt),nt.push({event:tt,listeners:st}),tt.target=Qe)))}function Ve(nt,tt){var rt={};return rt[nt.toLowerCase()]=tt.toLowerCase(),rt["Webkit"+nt]="webkit"+tt,rt["Moz"+nt]="moz"+tt,rt}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia$1&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(nt){if(Xe[nt])return Xe[nt];if(!We$1[nt])return nt;var tt=We$1[nt],rt;for(rt in tt)if(tt.hasOwnProperty(rt)&&rt in Ye)return Xe[nt]=tt[rt];return nt}var $e$2=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(nt,tt){df.set(nt,tt),fa$1(tt,[nt])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$2,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(nt,tt,rt){var st=nt.type||"unknown-event";nt.currentTarget=rt,Ub(st,tt,void 0,nt),nt.currentTarget=null}function se$1(nt,tt){tt=(tt&4)!==0;for(var rt=0;rt<nt.length;rt++){var st=nt[rt],at=st.event;st=st.listeners;e:{var lt=void 0;if(tt)for(var dt=st.length-1;0<=dt;dt--){var yt=st[dt],vt=yt.instance,_t=yt.currentTarget;if(yt=yt.listener,vt!==lt&&at.isPropagationStopped())break e;nf(at,yt,_t),lt=vt}else for(dt=0;dt<st.length;dt++){if(yt=st[dt],vt=yt.instance,_t=yt.currentTarget,yt=yt.listener,vt!==lt&&at.isPropagationStopped())break e;nf(at,yt,_t),lt=vt}}}if(Qb)throw nt=Rb,Qb=!1,Rb=null,nt}function D$2(nt,tt){var rt=tt[of];rt===void 0&&(rt=tt[of]=new Set);var st=nt+"__bubble";rt.has(st)||(pf(tt,nt,2,!1),rt.add(st))}function qf(nt,tt,rt){var st=0;tt&&(st|=4),pf(rt,nt,st,tt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(nt){if(!nt[rf]){nt[rf]=!0,da$1.forEach(function(rt){rt!=="selectionchange"&&(mf.has(rt)||qf(rt,!1,nt),qf(rt,!0,nt))});var tt=nt.nodeType===9?nt:nt.ownerDocument;tt===null||tt[rf]||(tt[rf]=!0,qf("selectionchange",!1,tt))}}function pf(nt,tt,rt,st){switch(jd(tt)){case 1:var at=ed;break;case 4:at=gd;break;default:at=fd}rt=at.bind(null,tt,rt,nt),at=void 0,!Lb||tt!=="touchstart"&&tt!=="touchmove"&&tt!=="wheel"||(at=!0),st?at!==void 0?nt.addEventListener(tt,rt,{capture:!0,passive:at}):nt.addEventListener(tt,rt,!0):at!==void 0?nt.addEventListener(tt,rt,{passive:at}):nt.addEventListener(tt,rt,!1)}function hd(nt,tt,rt,st,at){var lt=st;if(!(tt&1)&&!(tt&2)&&st!==null)e:for(;;){if(st===null)return;var dt=st.tag;if(dt===3||dt===4){var yt=st.stateNode.containerInfo;if(yt===at||yt.nodeType===8&&yt.parentNode===at)break;if(dt===4)for(dt=st.return;dt!==null;){var vt=dt.tag;if((vt===3||vt===4)&&(vt=dt.stateNode.containerInfo,vt===at||vt.nodeType===8&&vt.parentNode===at))return;dt=dt.return}for(;yt!==null;){if(dt=Wc(yt),dt===null)return;if(vt=dt.tag,vt===5||vt===6){st=lt=dt;continue e}yt=yt.parentNode}}st=st.return}Jb(function(){var _t=lt,bt=xb(rt),Mt=[];e:{var Ct=df.get(nt);if(Ct!==void 0){var Tt=td,$t=nt;switch(nt){case"keypress":if(od(rt)===0)break e;case"keydown":case"keyup":Tt=Rd;break;case"focusin":$t="focus",Tt=Fd;break;case"focusout":$t="blur",Tt=Fd;break;case"beforeblur":case"afterblur":Tt=Fd;break;case"click":if(rt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=Vd;break;case $e$2:case af:case bf:Tt=Hd;break;case cf:Tt=Xd;break;case"scroll":Tt=vd;break;case"wheel":Tt=Zd;break;case"copy":case"cut":case"paste":Tt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=Td}var Rt=(tt&4)!==0,Et=!Rt&&nt==="scroll",wt=Rt?Ct!==null?Ct+"Capture":null:Ct;Rt=[];for(var Pt=_t,Ft;Pt!==null;){Ft=Pt;var Nt=Ft.stateNode;if(Ft.tag===5&&Nt!==null&&(Ft=Nt,wt!==null&&(Nt=Kb(Pt,wt),Nt!=null&&Rt.push(tf(Pt,Nt,Ft)))),Et)break;Pt=Pt.return}0<Rt.length&&(Ct=new Tt(Ct,$t,null,rt,bt),Mt.push({event:Ct,listeners:Rt}))}}if(!(tt&7)){e:{if(Ct=nt==="mouseover"||nt==="pointerover",Tt=nt==="mouseout"||nt==="pointerout",Ct&&rt!==wb&&($t=rt.relatedTarget||rt.fromElement)&&(Wc($t)||$t[uf]))break e;if((Tt||Ct)&&(Ct=bt.window===bt?bt:(Ct=bt.ownerDocument)?Ct.defaultView||Ct.parentWindow:window,Tt?($t=rt.relatedTarget||rt.toElement,Tt=_t,$t=$t?Wc($t):null,$t!==null&&(Et=Vb($t),$t!==Et||$t.tag!==5&&$t.tag!==6)&&($t=null)):(Tt=null,$t=_t),Tt!==$t)){if(Rt=Bd,Nt="onMouseLeave",wt="onMouseEnter",Pt="mouse",(nt==="pointerout"||nt==="pointerover")&&(Rt=Td,Nt="onPointerLeave",wt="onPointerEnter",Pt="pointer"),Et=Tt==null?Ct:ue$1(Tt),Ft=$t==null?Ct:ue$1($t),Ct=new Rt(Nt,Pt+"leave",Tt,rt,bt),Ct.target=Et,Ct.relatedTarget=Ft,Nt=null,Wc(bt)===_t&&(Rt=new Rt(wt,Pt+"enter",$t,rt,bt),Rt.target=Ft,Rt.relatedTarget=Et,Nt=Rt),Et=Nt,Tt&&$t)t:{for(Rt=Tt,wt=$t,Pt=0,Ft=Rt;Ft;Ft=vf(Ft))Pt++;for(Ft=0,Nt=wt;Nt;Nt=vf(Nt))Ft++;for(;0<Pt-Ft;)Rt=vf(Rt),Pt--;for(;0<Ft-Pt;)wt=vf(wt),Ft--;for(;Pt--;){if(Rt===wt||wt!==null&&Rt===wt.alternate)break t;Rt=vf(Rt),wt=vf(wt)}Rt=null}else Rt=null;Tt!==null&&wf(Mt,Ct,Tt,Rt,!1),$t!==null&&Et!==null&&wf(Mt,Et,$t,Rt,!0)}}e:{if(Ct=_t?ue$1(_t):window,Tt=Ct.nodeName&&Ct.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&Ct.type==="file")var Ot=ve$1;else if(me$2(Ct))if(we$1)Ot=Fe$2;else{Ot=De$2;var Bt=Ce$2}else(Tt=Ct.nodeName)&&Tt.toLowerCase()==="input"&&(Ct.type==="checkbox"||Ct.type==="radio")&&(Ot=Ee$1);if(Ot&&(Ot=Ot(nt,_t))){ne$1(Mt,Ot,rt,bt);break e}Bt&&Bt(nt,Ct,_t),nt==="focusout"&&(Bt=Ct._wrapperState)&&Bt.controlled&&Ct.type==="number"&&cb(Ct,"number",Ct.value)}switch(Bt=_t?ue$1(_t):window,nt){case"focusin":(me$2(Bt)||Bt.contentEditable==="true")&&(Qe=Bt,Re$2=_t,Se$1=null);break;case"focusout":Se$1=Re$2=Qe=null;break;case"mousedown":Te$2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$2=!1,Ue$2(Mt,rt,bt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$2(Mt,rt,bt)}var Xt;if(ae$1)e:{switch(nt){case"compositionstart":var Zt="onCompositionStart";break e;case"compositionend":Zt="onCompositionEnd";break e;case"compositionupdate":Zt="onCompositionUpdate";break e}Zt=void 0}else ie$2?ge$2(nt,rt)&&(Zt="onCompositionEnd"):nt==="keydown"&&rt.keyCode===229&&(Zt="onCompositionStart");Zt&&(de$1&&rt.locale!=="ko"&&(ie$2||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&ie$2&&(Xt=nd()):(kd=bt,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),Bt=oe$2(_t,Zt),0<Bt.length&&(Zt=new Ld(Zt,nt,null,rt,bt),Mt.push({event:Zt,listeners:Bt}),Xt?Zt.data=Xt:(Xt=he$1(rt),Xt!==null&&(Zt.data=Xt)))),(Xt=ce$1?je$2(nt,rt):ke$2(nt,rt))&&(_t=oe$2(_t,"onBeforeInput"),0<_t.length&&(bt=new Ld("onBeforeInput","beforeinput",null,rt,bt),Mt.push({event:bt,listeners:_t}),bt.data=Xt))}se$1(Mt,tt)})}function tf(nt,tt,rt){return{instance:nt,listener:tt,currentTarget:rt}}function oe$2(nt,tt){for(var rt=tt+"Capture",st=[];nt!==null;){var at=nt,lt=at.stateNode;at.tag===5&&lt!==null&&(at=lt,lt=Kb(nt,rt),lt!=null&&st.unshift(tf(nt,lt,at)),lt=Kb(nt,tt),lt!=null&&st.push(tf(nt,lt,at))),nt=nt.return}return st}function vf(nt){if(nt===null)return null;do nt=nt.return;while(nt&&nt.tag!==5);return nt||null}function wf(nt,tt,rt,st,at){for(var lt=tt._reactName,dt=[];rt!==null&&rt!==st;){var yt=rt,vt=yt.alternate,_t=yt.stateNode;if(vt!==null&&vt===st)break;yt.tag===5&&_t!==null&&(yt=_t,at?(vt=Kb(rt,lt),vt!=null&&dt.unshift(tf(rt,vt,yt))):at||(vt=Kb(rt,lt),vt!=null&&dt.push(tf(rt,vt,yt)))),rt=rt.return}dt.length!==0&&nt.push({event:tt,listeners:dt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(nt){return(typeof nt=="string"?nt:""+nt).replace(xf,`
`).replace(yf,"")}function Af(nt,tt,rt){if(tt=zf(tt),zf(nt)!==tt&&rt)throw Error(p$5(425))}function Bf(){}var Cf=null,Df=null;function Ef(nt,tt){return nt==="textarea"||nt==="noscript"||typeof tt.children=="string"||typeof tt.children=="number"||typeof tt.dangerouslySetInnerHTML=="object"&&tt.dangerouslySetInnerHTML!==null&&tt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(nt){return Hf.resolve(null).then(nt).catch(If)}:Ff;function If(nt){setTimeout(function(){throw nt})}function Kf(nt,tt){var rt=tt,st=0;do{var at=rt.nextSibling;if(nt.removeChild(rt),at&&at.nodeType===8)if(rt=at.data,rt==="/$"){if(st===0){nt.removeChild(at),bd(tt);return}st--}else rt!=="$"&&rt!=="$?"&&rt!=="$!"||st++;rt=at}while(rt);bd(tt)}function Lf(nt){for(;nt!=null;nt=nt.nextSibling){var tt=nt.nodeType;if(tt===1||tt===3)break;if(tt===8){if(tt=nt.data,tt==="$"||tt==="$!"||tt==="$?")break;if(tt==="/$")return null}}return nt}function Mf(nt){nt=nt.previousSibling;for(var tt=0;nt;){if(nt.nodeType===8){var rt=nt.data;if(rt==="$"||rt==="$!"||rt==="$?"){if(tt===0)return nt;tt--}else rt==="/$"&&tt++}nt=nt.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(nt){var tt=nt[Of];if(tt)return tt;for(var rt=nt.parentNode;rt;){if(tt=rt[uf]||rt[Of]){if(rt=tt.alternate,tt.child!==null||rt!==null&&rt.child!==null)for(nt=Mf(nt);nt!==null;){if(rt=nt[Of])return rt;nt=Mf(nt)}return tt}nt=rt,rt=nt.parentNode}return null}function Cb(nt){return nt=nt[Of]||nt[uf],!nt||nt.tag!==5&&nt.tag!==6&&nt.tag!==13&&nt.tag!==3?null:nt}function ue$1(nt){if(nt.tag===5||nt.tag===6)return nt.stateNode;throw Error(p$5(33))}function Db(nt){return nt[Pf]||null}var Sf=[],Tf=-1;function Uf(nt){return{current:nt}}function E$2(nt){0>Tf||(nt.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(nt,tt){Tf++,Sf[Tf]=nt.current,nt.current=tt}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(nt,tt){var rt=nt.type.contextTypes;if(!rt)return Vf;var st=nt.stateNode;if(st&&st.__reactInternalMemoizedUnmaskedChildContext===tt)return st.__reactInternalMemoizedMaskedChildContext;var at={},lt;for(lt in rt)at[lt]=tt[lt];return st&&(nt=nt.stateNode,nt.__reactInternalMemoizedUnmaskedChildContext=tt,nt.__reactInternalMemoizedMaskedChildContext=at),at}function Zf(nt){return nt=nt.childContextTypes,nt!=null}function $f(){E$2(Wf),E$2(H$1)}function ag(nt,tt,rt){if(H$1.current!==Vf)throw Error(p$5(168));G$1(H$1,tt),G$1(Wf,rt)}function bg(nt,tt,rt){var st=nt.stateNode;if(tt=tt.childContextTypes,typeof st.getChildContext!="function")return rt;st=st.getChildContext();for(var at in st)if(!(at in tt))throw Error(p$5(108,Ra(nt)||"Unknown",at));return A$3({},rt,st)}function cg(nt){return nt=(nt=nt.stateNode)&&nt.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,nt),G$1(Wf,Wf.current),!0}function dg(nt,tt,rt){var st=nt.stateNode;if(!st)throw Error(p$5(169));rt?(nt=bg(nt,tt,Xf),st.__reactInternalMemoizedMergedChildContext=nt,E$2(Wf),E$2(H$1),G$1(H$1,nt)):E$2(Wf),G$1(Wf,rt)}var eg=null,fg=!1,gg=!1;function hg(nt){eg===null?eg=[nt]:eg.push(nt)}function ig(nt){fg=!0,hg(nt)}function jg(){if(!gg&&eg!==null){gg=!0;var nt=0,tt=C$2;try{var rt=eg;for(C$2=1;nt<rt.length;nt++){var st=rt[nt];do st=st(!0);while(st!==null)}eg=null,fg=!1}catch(at){throw eg!==null&&(eg=eg.slice(nt+1)),ac(fc,jg),at}finally{C$2=tt,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(nt,tt){kg[lg++]=ng,kg[lg++]=mg,mg=nt,ng=tt}function ug(nt,tt,rt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=nt;var st=rg;nt=sg;var at=32-oc$1(st)-1;st&=~(1<<at),rt+=1;var lt=32-oc$1(tt)+at;if(30<lt){var dt=at-at%5;lt=(st&(1<<dt)-1).toString(32),st>>=dt,at-=dt,rg=1<<32-oc$1(tt)+at|rt<<at|st,sg=lt+nt}else rg=1<<lt|rt<<at|st,sg=nt}function vg(nt){nt.return!==null&&(tg(nt,1),ug(nt,1,0))}function wg(nt){for(;nt===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;nt===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(nt,tt){var rt=Bg(5,null,null,0);rt.elementType="DELETED",rt.stateNode=tt,rt.return=nt,tt=nt.deletions,tt===null?(nt.deletions=[rt],nt.flags|=16):tt.push(rt)}function Cg(nt,tt){switch(nt.tag){case 5:var rt=nt.type;return tt=tt.nodeType!==1||rt.toLowerCase()!==tt.nodeName.toLowerCase()?null:tt,tt!==null?(nt.stateNode=tt,xg=nt,yg=Lf(tt.firstChild),!0):!1;case 6:return tt=nt.pendingProps===""||tt.nodeType!==3?null:tt,tt!==null?(nt.stateNode=tt,xg=nt,yg=null,!0):!1;case 13:return tt=tt.nodeType!==8?null:tt,tt!==null?(rt=qg!==null?{id:rg,overflow:sg}:null,nt.memoizedState={dehydrated:tt,treeContext:rt,retryLane:1073741824},rt=Bg(18,null,null,0),rt.stateNode=tt,rt.return=nt,nt.child=rt,xg=nt,yg=null,!0):!1;default:return!1}}function Dg(nt){return(nt.mode&1)!==0&&(nt.flags&128)===0}function Eg(nt){if(I$1){var tt=yg;if(tt){var rt=tt;if(!Cg(nt,tt)){if(Dg(nt))throw Error(p$5(418));tt=Lf(rt.nextSibling);var st=xg;tt&&Cg(nt,tt)?Ag(st,rt):(nt.flags=nt.flags&-4097|2,I$1=!1,xg=nt)}}else{if(Dg(nt))throw Error(p$5(418));nt.flags=nt.flags&-4097|2,I$1=!1,xg=nt}}}function Fg(nt){for(nt=nt.return;nt!==null&&nt.tag!==5&&nt.tag!==3&&nt.tag!==13;)nt=nt.return;xg=nt}function Gg(nt){if(nt!==xg)return!1;if(!I$1)return Fg(nt),I$1=!0,!1;var tt;if((tt=nt.tag!==3)&&!(tt=nt.tag!==5)&&(tt=nt.type,tt=tt!=="head"&&tt!=="body"&&!Ef(nt.type,nt.memoizedProps)),tt&&(tt=yg)){if(Dg(nt))throw Hg(),Error(p$5(418));for(;tt;)Ag(nt,tt),tt=Lf(tt.nextSibling)}if(Fg(nt),nt.tag===13){if(nt=nt.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p$5(317));e:{for(nt=nt.nextSibling,tt=0;nt;){if(nt.nodeType===8){var rt=nt.data;if(rt==="/$"){if(tt===0){yg=Lf(nt.nextSibling);break e}tt--}else rt!=="$"&&rt!=="$!"&&rt!=="$?"||tt++}nt=nt.nextSibling}yg=null}}else yg=xg?Lf(nt.stateNode.nextSibling):null;return!0}function Hg(){for(var nt=yg;nt;)nt=Lf(nt.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(nt){zg===null?zg=[nt]:zg.push(nt)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(nt,tt,rt){if(nt=rt.ref,nt!==null&&typeof nt!="function"&&typeof nt!="object"){if(rt._owner){if(rt=rt._owner,rt){if(rt.tag!==1)throw Error(p$5(309));var st=rt.stateNode}if(!st)throw Error(p$5(147,nt));var at=st,lt=""+nt;return tt!==null&&tt.ref!==null&&typeof tt.ref=="function"&&tt.ref._stringRef===lt?tt.ref:(tt=function(dt){var yt=at.refs;dt===null?delete yt[lt]:yt[lt]=dt},tt._stringRef=lt,tt)}if(typeof nt!="string")throw Error(p$5(284));if(!rt._owner)throw Error(p$5(290,nt))}return nt}function Mg(nt,tt){throw nt=Object.prototype.toString.call(tt),Error(p$5(31,nt==="[object Object]"?"object with keys {"+Object.keys(tt).join(", ")+"}":nt))}function Ng(nt){var tt=nt._init;return tt(nt._payload)}function Og(nt){function tt(wt,Pt){if(nt){var Ft=wt.deletions;Ft===null?(wt.deletions=[Pt],wt.flags|=16):Ft.push(Pt)}}function rt(wt,Pt){if(!nt)return null;for(;Pt!==null;)tt(wt,Pt),Pt=Pt.sibling;return null}function st(wt,Pt){for(wt=new Map;Pt!==null;)Pt.key!==null?wt.set(Pt.key,Pt):wt.set(Pt.index,Pt),Pt=Pt.sibling;return wt}function at(wt,Pt){return wt=Pg(wt,Pt),wt.index=0,wt.sibling=null,wt}function lt(wt,Pt,Ft){return wt.index=Ft,nt?(Ft=wt.alternate,Ft!==null?(Ft=Ft.index,Ft<Pt?(wt.flags|=2,Pt):Ft):(wt.flags|=2,Pt)):(wt.flags|=1048576,Pt)}function dt(wt){return nt&&wt.alternate===null&&(wt.flags|=2),wt}function yt(wt,Pt,Ft,Nt){return Pt===null||Pt.tag!==6?(Pt=Qg(Ft,wt.mode,Nt),Pt.return=wt,Pt):(Pt=at(Pt,Ft),Pt.return=wt,Pt)}function vt(wt,Pt,Ft,Nt){var Ot=Ft.type;return Ot===ya$1?bt(wt,Pt,Ft.props.children,Nt,Ft.key):Pt!==null&&(Pt.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===Ha&&Ng(Ot)===Pt.type)?(Nt=at(Pt,Ft.props),Nt.ref=Lg(wt,Pt,Ft),Nt.return=wt,Nt):(Nt=Rg(Ft.type,Ft.key,Ft.props,null,wt.mode,Nt),Nt.ref=Lg(wt,Pt,Ft),Nt.return=wt,Nt)}function _t(wt,Pt,Ft,Nt){return Pt===null||Pt.tag!==4||Pt.stateNode.containerInfo!==Ft.containerInfo||Pt.stateNode.implementation!==Ft.implementation?(Pt=Sg(Ft,wt.mode,Nt),Pt.return=wt,Pt):(Pt=at(Pt,Ft.children||[]),Pt.return=wt,Pt)}function bt(wt,Pt,Ft,Nt,Ot){return Pt===null||Pt.tag!==7?(Pt=Tg(Ft,wt.mode,Nt,Ot),Pt.return=wt,Pt):(Pt=at(Pt,Ft),Pt.return=wt,Pt)}function Mt(wt,Pt,Ft){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number")return Pt=Qg(""+Pt,wt.mode,Ft),Pt.return=wt,Pt;if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case va$1:return Ft=Rg(Pt.type,Pt.key,Pt.props,null,wt.mode,Ft),Ft.ref=Lg(wt,null,Pt),Ft.return=wt,Ft;case wa$1:return Pt=Sg(Pt,wt.mode,Ft),Pt.return=wt,Pt;case Ha:var Nt=Pt._init;return Mt(wt,Nt(Pt._payload),Ft)}if(eb(Pt)||Ka$1(Pt))return Pt=Tg(Pt,wt.mode,Ft,null),Pt.return=wt,Pt;Mg(wt,Pt)}return null}function Ct(wt,Pt,Ft,Nt){var Ot=Pt!==null?Pt.key:null;if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number")return Ot!==null?null:yt(wt,Pt,""+Ft,Nt);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case va$1:return Ft.key===Ot?vt(wt,Pt,Ft,Nt):null;case wa$1:return Ft.key===Ot?_t(wt,Pt,Ft,Nt):null;case Ha:return Ot=Ft._init,Ct(wt,Pt,Ot(Ft._payload),Nt)}if(eb(Ft)||Ka$1(Ft))return Ot!==null?null:bt(wt,Pt,Ft,Nt,null);Mg(wt,Ft)}return null}function Tt(wt,Pt,Ft,Nt,Ot){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return wt=wt.get(Ft)||null,yt(Pt,wt,""+Nt,Ot);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case va$1:return wt=wt.get(Nt.key===null?Ft:Nt.key)||null,vt(Pt,wt,Nt,Ot);case wa$1:return wt=wt.get(Nt.key===null?Ft:Nt.key)||null,_t(Pt,wt,Nt,Ot);case Ha:var Bt=Nt._init;return Tt(wt,Pt,Ft,Bt(Nt._payload),Ot)}if(eb(Nt)||Ka$1(Nt))return wt=wt.get(Ft)||null,bt(Pt,wt,Nt,Ot,null);Mg(Pt,Nt)}return null}function $t(wt,Pt,Ft,Nt){for(var Ot=null,Bt=null,Xt=Pt,Zt=Pt=0,rn=null;Xt!==null&&Zt<Ft.length;Zt++){Xt.index>Zt?(rn=Xt,Xt=null):rn=Xt.sibling;var Gt=Ct(wt,Xt,Ft[Zt],Nt);if(Gt===null){Xt===null&&(Xt=rn);break}nt&&Xt&&Gt.alternate===null&&tt(wt,Xt),Pt=lt(Gt,Pt,Zt),Bt===null?Ot=Gt:Bt.sibling=Gt,Bt=Gt,Xt=rn}if(Zt===Ft.length)return rt(wt,Xt),I$1&&tg(wt,Zt),Ot;if(Xt===null){for(;Zt<Ft.length;Zt++)Xt=Mt(wt,Ft[Zt],Nt),Xt!==null&&(Pt=lt(Xt,Pt,Zt),Bt===null?Ot=Xt:Bt.sibling=Xt,Bt=Xt);return I$1&&tg(wt,Zt),Ot}for(Xt=st(wt,Xt);Zt<Ft.length;Zt++)rn=Tt(Xt,wt,Zt,Ft[Zt],Nt),rn!==null&&(nt&&rn.alternate!==null&&Xt.delete(rn.key===null?Zt:rn.key),Pt=lt(rn,Pt,Zt),Bt===null?Ot=rn:Bt.sibling=rn,Bt=rn);return nt&&Xt.forEach(function(nn){return tt(wt,nn)}),I$1&&tg(wt,Zt),Ot}function Rt(wt,Pt,Ft,Nt){var Ot=Ka$1(Ft);if(typeof Ot!="function")throw Error(p$5(150));if(Ft=Ot.call(Ft),Ft==null)throw Error(p$5(151));for(var Bt=Ot=null,Xt=Pt,Zt=Pt=0,rn=null,Gt=Ft.next();Xt!==null&&!Gt.done;Zt++,Gt=Ft.next()){Xt.index>Zt?(rn=Xt,Xt=null):rn=Xt.sibling;var nn=Ct(wt,Xt,Gt.value,Nt);if(nn===null){Xt===null&&(Xt=rn);break}nt&&Xt&&nn.alternate===null&&tt(wt,Xt),Pt=lt(nn,Pt,Zt),Bt===null?Ot=nn:Bt.sibling=nn,Bt=nn,Xt=rn}if(Gt.done)return rt(wt,Xt),I$1&&tg(wt,Zt),Ot;if(Xt===null){for(;!Gt.done;Zt++,Gt=Ft.next())Gt=Mt(wt,Gt.value,Nt),Gt!==null&&(Pt=lt(Gt,Pt,Zt),Bt===null?Ot=Gt:Bt.sibling=Gt,Bt=Gt);return I$1&&tg(wt,Zt),Ot}for(Xt=st(wt,Xt);!Gt.done;Zt++,Gt=Ft.next())Gt=Tt(Xt,wt,Zt,Gt.value,Nt),Gt!==null&&(nt&&Gt.alternate!==null&&Xt.delete(Gt.key===null?Zt:Gt.key),Pt=lt(Gt,Pt,Zt),Bt===null?Ot=Gt:Bt.sibling=Gt,Bt=Gt);return nt&&Xt.forEach(function(cn){return tt(wt,cn)}),I$1&&tg(wt,Zt),Ot}function Et(wt,Pt,Ft,Nt){if(typeof Ft=="object"&&Ft!==null&&Ft.type===ya$1&&Ft.key===null&&(Ft=Ft.props.children),typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case va$1:e:{for(var Ot=Ft.key,Bt=Pt;Bt!==null;){if(Bt.key===Ot){if(Ot=Ft.type,Ot===ya$1){if(Bt.tag===7){rt(wt,Bt.sibling),Pt=at(Bt,Ft.props.children),Pt.return=wt,wt=Pt;break e}}else if(Bt.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===Ha&&Ng(Ot)===Bt.type){rt(wt,Bt.sibling),Pt=at(Bt,Ft.props),Pt.ref=Lg(wt,Bt,Ft),Pt.return=wt,wt=Pt;break e}rt(wt,Bt);break}else tt(wt,Bt);Bt=Bt.sibling}Ft.type===ya$1?(Pt=Tg(Ft.props.children,wt.mode,Nt,Ft.key),Pt.return=wt,wt=Pt):(Nt=Rg(Ft.type,Ft.key,Ft.props,null,wt.mode,Nt),Nt.ref=Lg(wt,Pt,Ft),Nt.return=wt,wt=Nt)}return dt(wt);case wa$1:e:{for(Bt=Ft.key;Pt!==null;){if(Pt.key===Bt)if(Pt.tag===4&&Pt.stateNode.containerInfo===Ft.containerInfo&&Pt.stateNode.implementation===Ft.implementation){rt(wt,Pt.sibling),Pt=at(Pt,Ft.children||[]),Pt.return=wt,wt=Pt;break e}else{rt(wt,Pt);break}else tt(wt,Pt);Pt=Pt.sibling}Pt=Sg(Ft,wt.mode,Nt),Pt.return=wt,wt=Pt}return dt(wt);case Ha:return Bt=Ft._init,Et(wt,Pt,Bt(Ft._payload),Nt)}if(eb(Ft))return $t(wt,Pt,Ft,Nt);if(Ka$1(Ft))return Rt(wt,Pt,Ft,Nt);Mg(wt,Ft)}return typeof Ft=="string"&&Ft!==""||typeof Ft=="number"?(Ft=""+Ft,Pt!==null&&Pt.tag===6?(rt(wt,Pt.sibling),Pt=at(Pt,Ft),Pt.return=wt,wt=Pt):(rt(wt,Pt),Pt=Qg(Ft,wt.mode,Nt),Pt.return=wt,wt=Pt),dt(wt)):rt(wt,Pt)}return Et}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(nt){var tt=Wg.current;E$2(Wg),nt._currentValue=tt}function bh(nt,tt,rt){for(;nt!==null;){var st=nt.alternate;if((nt.childLanes&tt)!==tt?(nt.childLanes|=tt,st!==null&&(st.childLanes|=tt)):st!==null&&(st.childLanes&tt)!==tt&&(st.childLanes|=tt),nt===rt)break;nt=nt.return}}function ch(nt,tt){Xg=nt,Zg=Yg=null,nt=nt.dependencies,nt!==null&&nt.firstContext!==null&&(nt.lanes&tt&&(dh=!0),nt.firstContext=null)}function eh(nt){var tt=nt._currentValue;if(Zg!==nt)if(nt={context:nt,memoizedValue:tt,next:null},Yg===null){if(Xg===null)throw Error(p$5(308));Yg=nt,Xg.dependencies={lanes:0,firstContext:nt}}else Yg=Yg.next=nt;return tt}var fh=null;function gh(nt){fh===null?fh=[nt]:fh.push(nt)}function hh(nt,tt,rt,st){var at=tt.interleaved;return at===null?(rt.next=rt,gh(tt)):(rt.next=at.next,at.next=rt),tt.interleaved=rt,ih(nt,st)}function ih(nt,tt){nt.lanes|=tt;var rt=nt.alternate;for(rt!==null&&(rt.lanes|=tt),rt=nt,nt=nt.return;nt!==null;)nt.childLanes|=tt,rt=nt.alternate,rt!==null&&(rt.childLanes|=tt),rt=nt,nt=nt.return;return rt.tag===3?rt.stateNode:null}var jh=!1;function kh(nt){nt.updateQueue={baseState:nt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(nt,tt){nt=nt.updateQueue,tt.updateQueue===nt&&(tt.updateQueue={baseState:nt.baseState,firstBaseUpdate:nt.firstBaseUpdate,lastBaseUpdate:nt.lastBaseUpdate,shared:nt.shared,effects:nt.effects})}function mh(nt,tt){return{eventTime:nt,lane:tt,tag:0,payload:null,callback:null,next:null}}function nh(nt,tt,rt){var st=nt.updateQueue;if(st===null)return null;if(st=st.shared,K$2&2){var at=st.pending;return at===null?tt.next=tt:(tt.next=at.next,at.next=tt),st.pending=tt,ih(nt,rt)}return at=st.interleaved,at===null?(tt.next=tt,gh(st)):(tt.next=at.next,at.next=tt),st.interleaved=tt,ih(nt,rt)}function oh(nt,tt,rt){if(tt=tt.updateQueue,tt!==null&&(tt=tt.shared,(rt&4194240)!==0)){var st=tt.lanes;st&=nt.pendingLanes,rt|=st,tt.lanes=rt,Cc(nt,rt)}}function ph(nt,tt){var rt=nt.updateQueue,st=nt.alternate;if(st!==null&&(st=st.updateQueue,rt===st)){var at=null,lt=null;if(rt=rt.firstBaseUpdate,rt!==null){do{var dt={eventTime:rt.eventTime,lane:rt.lane,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null};lt===null?at=lt=dt:lt=lt.next=dt,rt=rt.next}while(rt!==null);lt===null?at=lt=tt:lt=lt.next=tt}else at=lt=tt;rt={baseState:st.baseState,firstBaseUpdate:at,lastBaseUpdate:lt,shared:st.shared,effects:st.effects},nt.updateQueue=rt;return}nt=rt.lastBaseUpdate,nt===null?rt.firstBaseUpdate=tt:nt.next=tt,rt.lastBaseUpdate=tt}function qh(nt,tt,rt,st){var at=nt.updateQueue;jh=!1;var lt=at.firstBaseUpdate,dt=at.lastBaseUpdate,yt=at.shared.pending;if(yt!==null){at.shared.pending=null;var vt=yt,_t=vt.next;vt.next=null,dt===null?lt=_t:dt.next=_t,dt=vt;var bt=nt.alternate;bt!==null&&(bt=bt.updateQueue,yt=bt.lastBaseUpdate,yt!==dt&&(yt===null?bt.firstBaseUpdate=_t:yt.next=_t,bt.lastBaseUpdate=vt))}if(lt!==null){var Mt=at.baseState;dt=0,bt=_t=vt=null,yt=lt;do{var Ct=yt.lane,Tt=yt.eventTime;if((st&Ct)===Ct){bt!==null&&(bt=bt.next={eventTime:Tt,lane:0,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null});e:{var $t=nt,Rt=yt;switch(Ct=tt,Tt=rt,Rt.tag){case 1:if($t=Rt.payload,typeof $t=="function"){Mt=$t.call(Tt,Mt,Ct);break e}Mt=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=Rt.payload,Ct=typeof $t=="function"?$t.call(Tt,Mt,Ct):$t,Ct==null)break e;Mt=A$3({},Mt,Ct);break e;case 2:jh=!0}}yt.callback!==null&&yt.lane!==0&&(nt.flags|=64,Ct=at.effects,Ct===null?at.effects=[yt]:Ct.push(yt))}else Tt={eventTime:Tt,lane:Ct,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null},bt===null?(_t=bt=Tt,vt=Mt):bt=bt.next=Tt,dt|=Ct;if(yt=yt.next,yt===null){if(yt=at.shared.pending,yt===null)break;Ct=yt,yt=Ct.next,Ct.next=null,at.lastBaseUpdate=Ct,at.shared.pending=null}}while(!0);if(bt===null&&(vt=Mt),at.baseState=vt,at.firstBaseUpdate=_t,at.lastBaseUpdate=bt,tt=at.shared.interleaved,tt!==null){at=tt;do dt|=at.lane,at=at.next;while(at!==tt)}else lt===null&&(at.shared.lanes=0);rh|=dt,nt.lanes=dt,nt.memoizedState=Mt}}function sh(nt,tt,rt){if(nt=tt.effects,tt.effects=null,nt!==null)for(tt=0;tt<nt.length;tt++){var st=nt[tt],at=st.callback;if(at!==null){if(st.callback=null,st=rt,typeof at!="function")throw Error(p$5(191,at));at.call(st)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(nt){if(nt===th)throw Error(p$5(174));return nt}function yh(nt,tt){switch(G$1(wh,tt),G$1(vh,nt),G$1(uh,th),nt=tt.nodeType,nt){case 9:case 11:tt=(tt=tt.documentElement)?tt.namespaceURI:lb(null,"");break;default:nt=nt===8?tt.parentNode:tt,tt=nt.namespaceURI||null,nt=nt.tagName,tt=lb(tt,nt)}E$2(uh),G$1(uh,tt)}function zh(){E$2(uh),E$2(vh),E$2(wh)}function Ah(nt){xh(wh.current);var tt=xh(uh.current),rt=lb(tt,nt.type);tt!==rt&&(G$1(vh,nt),G$1(uh,rt))}function Bh(nt){vh.current===nt&&(E$2(uh),E$2(vh))}var L$1=Uf(0);function Ch(nt){for(var tt=nt;tt!==null;){if(tt.tag===13){var rt=tt.memoizedState;if(rt!==null&&(rt=rt.dehydrated,rt===null||rt.data==="$?"||rt.data==="$!"))return tt}else if(tt.tag===19&&tt.memoizedProps.revealOrder!==void 0){if(tt.flags&128)return tt}else if(tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===nt)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===nt)return null;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}return null}var Dh=[];function Eh(){for(var nt=0;nt<Dh.length;nt++)Dh[nt]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua$1.ReactCurrentDispatcher,Gh=ua$1.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$5(321))}function Mh(nt,tt){if(tt===null)return!1;for(var rt=0;rt<tt.length&&rt<nt.length;rt++)if(!He$2(nt[rt],tt[rt]))return!1;return!0}function Nh(nt,tt,rt,st,at,lt){if(Hh=lt,M$1=tt,tt.memoizedState=null,tt.updateQueue=null,tt.lanes=0,Fh.current=nt===null||nt.memoizedState===null?Oh:Ph,nt=rt(st,at),Jh){lt=0;do{if(Jh=!1,Kh=0,25<=lt)throw Error(p$5(301));lt+=1,O$1=N$1=null,tt.updateQueue=null,Fh.current=Qh,nt=rt(st,at)}while(Jh)}if(Fh.current=Rh,tt=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,tt)throw Error(p$5(300));return nt}function Sh(){var nt=Kh!==0;return Kh=0,nt}function Th(){var nt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=nt:O$1=O$1.next=nt,O$1}function Uh(){if(N$1===null){var nt=M$1.alternate;nt=nt!==null?nt.memoizedState:null}else nt=N$1.next;var tt=O$1===null?M$1.memoizedState:O$1.next;if(tt!==null)O$1=tt,N$1=nt;else{if(nt===null)throw Error(p$5(310));N$1=nt,nt={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=nt:O$1=O$1.next=nt}return O$1}function Vh(nt,tt){return typeof tt=="function"?tt(nt):tt}function Wh(nt){var tt=Uh(),rt=tt.queue;if(rt===null)throw Error(p$5(311));rt.lastRenderedReducer=nt;var st=N$1,at=st.baseQueue,lt=rt.pending;if(lt!==null){if(at!==null){var dt=at.next;at.next=lt.next,lt.next=dt}st.baseQueue=at=lt,rt.pending=null}if(at!==null){lt=at.next,st=st.baseState;var yt=dt=null,vt=null,_t=lt;do{var bt=_t.lane;if((Hh&bt)===bt)vt!==null&&(vt=vt.next={lane:0,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),st=_t.hasEagerState?_t.eagerState:nt(st,_t.action);else{var Mt={lane:bt,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null};vt===null?(yt=vt=Mt,dt=st):vt=vt.next=Mt,M$1.lanes|=bt,rh|=bt}_t=_t.next}while(_t!==null&&_t!==lt);vt===null?dt=st:vt.next=yt,He$2(st,tt.memoizedState)||(dh=!0),tt.memoizedState=st,tt.baseState=dt,tt.baseQueue=vt,rt.lastRenderedState=st}if(nt=rt.interleaved,nt!==null){at=nt;do lt=at.lane,M$1.lanes|=lt,rh|=lt,at=at.next;while(at!==nt)}else at===null&&(rt.lanes=0);return[tt.memoizedState,rt.dispatch]}function Xh(nt){var tt=Uh(),rt=tt.queue;if(rt===null)throw Error(p$5(311));rt.lastRenderedReducer=nt;var st=rt.dispatch,at=rt.pending,lt=tt.memoizedState;if(at!==null){rt.pending=null;var dt=at=at.next;do lt=nt(lt,dt.action),dt=dt.next;while(dt!==at);He$2(lt,tt.memoizedState)||(dh=!0),tt.memoizedState=lt,tt.baseQueue===null&&(tt.baseState=lt),rt.lastRenderedState=lt}return[lt,st]}function Yh(){}function Zh(nt,tt){var rt=M$1,st=Uh(),at=tt(),lt=!He$2(st.memoizedState,at);if(lt&&(st.memoizedState=at,dh=!0),st=st.queue,$h(ai$1.bind(null,rt,st,nt),[nt]),st.getSnapshot!==tt||lt||O$1!==null&&O$1.memoizedState.tag&1){if(rt.flags|=2048,bi$1(9,ci$1.bind(null,rt,st,at,tt),void 0,null),Q$2===null)throw Error(p$5(349));Hh&30||di$1(rt,tt,at)}return at}function di$1(nt,tt,rt){nt.flags|=16384,nt={getSnapshot:tt,value:rt},tt=M$1.updateQueue,tt===null?(tt={lastEffect:null,stores:null},M$1.updateQueue=tt,tt.stores=[nt]):(rt=tt.stores,rt===null?tt.stores=[nt]:rt.push(nt))}function ci$1(nt,tt,rt,st){tt.value=rt,tt.getSnapshot=st,ei$1(tt)&&fi$1(nt)}function ai$1(nt,tt,rt){return rt(function(){ei$1(tt)&&fi$1(nt)})}function ei$1(nt){var tt=nt.getSnapshot;nt=nt.value;try{var rt=tt();return!He$2(nt,rt)}catch{return!0}}function fi$1(nt){var tt=ih(nt,1);tt!==null&&gi$1(tt,nt,1,-1)}function hi$1(nt){var tt=Th();return typeof nt=="function"&&(nt=nt()),tt.memoizedState=tt.baseState=nt,nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:nt},tt.queue=nt,nt=nt.dispatch=ii$1.bind(null,M$1,nt),[tt.memoizedState,nt]}function bi$1(nt,tt,rt,st){return nt={tag:nt,create:tt,destroy:rt,deps:st,next:null},tt=M$1.updateQueue,tt===null?(tt={lastEffect:null,stores:null},M$1.updateQueue=tt,tt.lastEffect=nt.next=nt):(rt=tt.lastEffect,rt===null?tt.lastEffect=nt.next=nt:(st=rt.next,rt.next=nt,nt.next=st,tt.lastEffect=nt)),nt}function ji(){return Uh().memoizedState}function ki$1(nt,tt,rt,st){var at=Th();M$1.flags|=nt,at.memoizedState=bi$1(1|tt,rt,void 0,st===void 0?null:st)}function li$1(nt,tt,rt,st){var at=Uh();st=st===void 0?null:st;var lt=void 0;if(N$1!==null){var dt=N$1.memoizedState;if(lt=dt.destroy,st!==null&&Mh(st,dt.deps)){at.memoizedState=bi$1(tt,rt,lt,st);return}}M$1.flags|=nt,at.memoizedState=bi$1(1|tt,rt,lt,st)}function mi$1(nt,tt){return ki$1(8390656,8,nt,tt)}function $h(nt,tt){return li$1(2048,8,nt,tt)}function ni$1(nt,tt){return li$1(4,2,nt,tt)}function oi$1(nt,tt){return li$1(4,4,nt,tt)}function pi$1(nt,tt){if(typeof tt=="function")return nt=nt(),tt(nt),function(){tt(null)};if(tt!=null)return nt=nt(),tt.current=nt,function(){tt.current=null}}function qi(nt,tt,rt){return rt=rt!=null?rt.concat([nt]):null,li$1(4,4,pi$1.bind(null,tt,nt),rt)}function ri$1(){}function si$1(nt,tt){var rt=Uh();tt=tt===void 0?null:tt;var st=rt.memoizedState;return st!==null&&tt!==null&&Mh(tt,st[1])?st[0]:(rt.memoizedState=[nt,tt],nt)}function ti$1(nt,tt){var rt=Uh();tt=tt===void 0?null:tt;var st=rt.memoizedState;return st!==null&&tt!==null&&Mh(tt,st[1])?st[0]:(nt=nt(),rt.memoizedState=[nt,tt],nt)}function ui$1(nt,tt,rt){return Hh&21?(He$2(rt,tt)||(rt=yc(),M$1.lanes|=rt,rh|=rt,nt.baseState=!0),tt):(nt.baseState&&(nt.baseState=!1,dh=!0),nt.memoizedState=rt)}function vi$1(nt,tt){var rt=C$2;C$2=rt!==0&&4>rt?rt:4,nt(!0);var st=Gh.transition;Gh.transition={};try{nt(!1),tt()}finally{C$2=rt,Gh.transition=st}}function wi$1(){return Uh().memoizedState}function xi$1(nt,tt,rt){var st=yi$1(nt);if(rt={lane:st,action:rt,hasEagerState:!1,eagerState:null,next:null},zi(nt))Ai$1(tt,rt);else if(rt=hh(nt,tt,rt,st),rt!==null){var at=R$1();gi$1(rt,nt,st,at),Bi$1(rt,tt,st)}}function ii$1(nt,tt,rt){var st=yi$1(nt),at={lane:st,action:rt,hasEagerState:!1,eagerState:null,next:null};if(zi(nt))Ai$1(tt,at);else{var lt=nt.alternate;if(nt.lanes===0&&(lt===null||lt.lanes===0)&&(lt=tt.lastRenderedReducer,lt!==null))try{var dt=tt.lastRenderedState,yt=lt(dt,rt);if(at.hasEagerState=!0,at.eagerState=yt,He$2(yt,dt)){var vt=tt.interleaved;vt===null?(at.next=at,gh(tt)):(at.next=vt.next,vt.next=at),tt.interleaved=at;return}}catch{}finally{}rt=hh(nt,tt,at,st),rt!==null&&(at=R$1(),gi$1(rt,nt,st,at),Bi$1(rt,tt,st))}}function zi(nt){var tt=nt.alternate;return nt===M$1||tt!==null&&tt===M$1}function Ai$1(nt,tt){Jh=Ih=!0;var rt=nt.pending;rt===null?tt.next=tt:(tt.next=rt.next,rt.next=tt),nt.pending=tt}function Bi$1(nt,tt,rt){if(rt&4194240){var st=tt.lanes;st&=nt.pendingLanes,rt|=st,tt.lanes=rt,Cc(nt,rt)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(nt,tt){return Th().memoizedState=[nt,tt===void 0?null:tt],nt},useContext:eh,useEffect:mi$1,useImperativeHandle:function(nt,tt,rt){return rt=rt!=null?rt.concat([nt]):null,ki$1(4194308,4,pi$1.bind(null,tt,nt),rt)},useLayoutEffect:function(nt,tt){return ki$1(4194308,4,nt,tt)},useInsertionEffect:function(nt,tt){return ki$1(4,2,nt,tt)},useMemo:function(nt,tt){var rt=Th();return tt=tt===void 0?null:tt,nt=nt(),rt.memoizedState=[nt,tt],nt},useReducer:function(nt,tt,rt){var st=Th();return tt=rt!==void 0?rt(tt):tt,st.memoizedState=st.baseState=tt,nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nt,lastRenderedState:tt},st.queue=nt,nt=nt.dispatch=xi$1.bind(null,M$1,nt),[st.memoizedState,nt]},useRef:function(nt){var tt=Th();return nt={current:nt},tt.memoizedState=nt},useState:hi$1,useDebugValue:ri$1,useDeferredValue:function(nt){return Th().memoizedState=nt},useTransition:function(){var nt=hi$1(!1),tt=nt[0];return nt=vi$1.bind(null,nt[1]),Th().memoizedState=nt,[tt,nt]},useMutableSource:function(){},useSyncExternalStore:function(nt,tt,rt){var st=M$1,at=Th();if(I$1){if(rt===void 0)throw Error(p$5(407));rt=rt()}else{if(rt=tt(),Q$2===null)throw Error(p$5(349));Hh&30||di$1(st,tt,rt)}at.memoizedState=rt;var lt={value:rt,getSnapshot:tt};return at.queue=lt,mi$1(ai$1.bind(null,st,lt,nt),[nt]),st.flags|=2048,bi$1(9,ci$1.bind(null,st,lt,rt,tt),void 0,null),rt},useId:function(){var nt=Th(),tt=Q$2.identifierPrefix;if(I$1){var rt=sg,st=rg;rt=(st&~(1<<32-oc$1(st)-1)).toString(32)+rt,tt=":"+tt+"R"+rt,rt=Kh++,0<rt&&(tt+="H"+rt.toString(32)),tt+=":"}else rt=Lh++,tt=":"+tt+"r"+rt.toString(32)+":";return nt.memoizedState=tt},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si$1,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri$1,useDeferredValue:function(nt){var tt=Uh();return ui$1(tt,N$1.memoizedState,nt)},useTransition:function(){var nt=Wh(Vh)[0],tt=Uh().memoizedState;return[nt,tt]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi$1,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si$1,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni$1,useLayoutEffect:oi$1,useMemo:ti$1,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri$1,useDeferredValue:function(nt){var tt=Uh();return N$1===null?tt.memoizedState=nt:ui$1(tt,N$1.memoizedState,nt)},useTransition:function(){var nt=Xh(Vh)[0],tt=Uh().memoizedState;return[nt,tt]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi$1,unstable_isNewReconciler:!1};function Ci$1(nt,tt){if(nt&&nt.defaultProps){tt=A$3({},tt),nt=nt.defaultProps;for(var rt in nt)tt[rt]===void 0&&(tt[rt]=nt[rt]);return tt}return tt}function Di$1(nt,tt,rt,st){tt=nt.memoizedState,rt=rt(st,tt),rt=rt==null?tt:A$3({},tt,rt),nt.memoizedState=rt,nt.lanes===0&&(nt.updateQueue.baseState=rt)}var Ei$1={isMounted:function(nt){return(nt=nt._reactInternals)?Vb(nt)===nt:!1},enqueueSetState:function(nt,tt,rt){nt=nt._reactInternals;var st=R$1(),at=yi$1(nt),lt=mh(st,at);lt.payload=tt,rt!=null&&(lt.callback=rt),tt=nh(nt,lt,at),tt!==null&&(gi$1(tt,nt,at,st),oh(tt,nt,at))},enqueueReplaceState:function(nt,tt,rt){nt=nt._reactInternals;var st=R$1(),at=yi$1(nt),lt=mh(st,at);lt.tag=1,lt.payload=tt,rt!=null&&(lt.callback=rt),tt=nh(nt,lt,at),tt!==null&&(gi$1(tt,nt,at,st),oh(tt,nt,at))},enqueueForceUpdate:function(nt,tt){nt=nt._reactInternals;var rt=R$1(),st=yi$1(nt),at=mh(rt,st);at.tag=2,tt!=null&&(at.callback=tt),tt=nh(nt,at,st),tt!==null&&(gi$1(tt,nt,st,rt),oh(tt,nt,st))}};function Fi$1(nt,tt,rt,st,at,lt,dt){return nt=nt.stateNode,typeof nt.shouldComponentUpdate=="function"?nt.shouldComponentUpdate(st,lt,dt):tt.prototype&&tt.prototype.isPureReactComponent?!Ie$2(rt,st)||!Ie$2(at,lt):!0}function Gi$1(nt,tt,rt){var st=!1,at=Vf,lt=tt.contextType;return typeof lt=="object"&&lt!==null?lt=eh(lt):(at=Zf(tt)?Xf:H$1.current,st=tt.contextTypes,lt=(st=st!=null)?Yf(nt,at):Vf),tt=new tt(rt,lt),nt.memoizedState=tt.state!==null&&tt.state!==void 0?tt.state:null,tt.updater=Ei$1,nt.stateNode=tt,tt._reactInternals=nt,st&&(nt=nt.stateNode,nt.__reactInternalMemoizedUnmaskedChildContext=at,nt.__reactInternalMemoizedMaskedChildContext=lt),tt}function Hi(nt,tt,rt,st){nt=tt.state,typeof tt.componentWillReceiveProps=="function"&&tt.componentWillReceiveProps(rt,st),typeof tt.UNSAFE_componentWillReceiveProps=="function"&&tt.UNSAFE_componentWillReceiveProps(rt,st),tt.state!==nt&&Ei$1.enqueueReplaceState(tt,tt.state,null)}function Ii$1(nt,tt,rt,st){var at=nt.stateNode;at.props=rt,at.state=nt.memoizedState,at.refs={},kh(nt);var lt=tt.contextType;typeof lt=="object"&&lt!==null?at.context=eh(lt):(lt=Zf(tt)?Xf:H$1.current,at.context=Yf(nt,lt)),at.state=nt.memoizedState,lt=tt.getDerivedStateFromProps,typeof lt=="function"&&(Di$1(nt,tt,lt,rt),at.state=nt.memoizedState),typeof tt.getDerivedStateFromProps=="function"||typeof at.getSnapshotBeforeUpdate=="function"||typeof at.UNSAFE_componentWillMount!="function"&&typeof at.componentWillMount!="function"||(tt=at.state,typeof at.componentWillMount=="function"&&at.componentWillMount(),typeof at.UNSAFE_componentWillMount=="function"&&at.UNSAFE_componentWillMount(),tt!==at.state&&Ei$1.enqueueReplaceState(at,at.state,null),qh(nt,rt,at,st),at.state=nt.memoizedState),typeof at.componentDidMount=="function"&&(nt.flags|=4194308)}function Ji(nt,tt){try{var rt="",st=tt;do rt+=Pa(st),st=st.return;while(st);var at=rt}catch(lt){at=`
Error generating stack: `+lt.message+`
`+lt.stack}return{value:nt,source:tt,stack:at,digest:null}}function Ki(nt,tt,rt){return{value:nt,source:null,stack:rt??null,digest:tt??null}}function Li$1(nt,tt){try{console.error(tt.value)}catch(rt){setTimeout(function(){throw rt})}}var Mi$1=typeof WeakMap=="function"?WeakMap:Map;function Ni$1(nt,tt,rt){rt=mh(-1,rt),rt.tag=3,rt.payload={element:null};var st=tt.value;return rt.callback=function(){Oi$1||(Oi$1=!0,Pi$1=st),Li$1(nt,tt)},rt}function Qi(nt,tt,rt){rt=mh(-1,rt),rt.tag=3;var st=nt.type.getDerivedStateFromError;if(typeof st=="function"){var at=tt.value;rt.payload=function(){return st(at)},rt.callback=function(){Li$1(nt,tt)}}var lt=nt.stateNode;return lt!==null&&typeof lt.componentDidCatch=="function"&&(rt.callback=function(){Li$1(nt,tt),typeof st!="function"&&(Ri$1===null?Ri$1=new Set([this]):Ri$1.add(this));var dt=tt.stack;this.componentDidCatch(tt.value,{componentStack:dt!==null?dt:""})}),rt}function Si$1(nt,tt,rt){var st=nt.pingCache;if(st===null){st=nt.pingCache=new Mi$1;var at=new Set;st.set(tt,at)}else at=st.get(tt),at===void 0&&(at=new Set,st.set(tt,at));at.has(rt)||(at.add(rt),nt=Ti$1.bind(null,nt,tt,rt),tt.then(nt,nt))}function Ui(nt){do{var tt;if((tt=nt.tag===13)&&(tt=nt.memoizedState,tt=tt!==null?tt.dehydrated!==null:!0),tt)return nt;nt=nt.return}while(nt!==null);return null}function Vi(nt,tt,rt,st,at){return nt.mode&1?(nt.flags|=65536,nt.lanes=at,nt):(nt===tt?nt.flags|=65536:(nt.flags|=128,rt.flags|=131072,rt.flags&=-52805,rt.tag===1&&(rt.alternate===null?rt.tag=17:(tt=mh(-1,1),tt.tag=2,nh(rt,tt,1))),rt.lanes|=1),nt)}var Wi=ua$1.ReactCurrentOwner,dh=!1;function Xi(nt,tt,rt,st){tt.child=nt===null?Vg(tt,null,rt,st):Ug(tt,nt.child,rt,st)}function Yi(nt,tt,rt,st,at){rt=rt.render;var lt=tt.ref;return ch(tt,at),st=Nh(nt,tt,rt,st,lt,at),rt=Sh(),nt!==null&&!dh?(tt.updateQueue=nt.updateQueue,tt.flags&=-2053,nt.lanes&=~at,Zi(nt,tt,at)):(I$1&&rt&&vg(tt),tt.flags|=1,Xi(nt,tt,st,at),tt.child)}function $i$1(nt,tt,rt,st,at){if(nt===null){var lt=rt.type;return typeof lt=="function"&&!aj(lt)&&lt.defaultProps===void 0&&rt.compare===null&&rt.defaultProps===void 0?(tt.tag=15,tt.type=lt,bj(nt,tt,lt,st,at)):(nt=Rg(rt.type,null,st,tt,tt.mode,at),nt.ref=tt.ref,nt.return=tt,tt.child=nt)}if(lt=nt.child,!(nt.lanes&at)){var dt=lt.memoizedProps;if(rt=rt.compare,rt=rt!==null?rt:Ie$2,rt(dt,st)&&nt.ref===tt.ref)return Zi(nt,tt,at)}return tt.flags|=1,nt=Pg(lt,st),nt.ref=tt.ref,nt.return=tt,tt.child=nt}function bj(nt,tt,rt,st,at){if(nt!==null){var lt=nt.memoizedProps;if(Ie$2(lt,st)&&nt.ref===tt.ref)if(dh=!1,tt.pendingProps=st=lt,(nt.lanes&at)!==0)nt.flags&131072&&(dh=!0);else return tt.lanes=nt.lanes,Zi(nt,tt,at)}return cj(nt,tt,rt,st,at)}function dj(nt,tt,rt){var st=tt.pendingProps,at=st.children,lt=nt!==null?nt.memoizedState:null;if(st.mode==="hidden")if(!(tt.mode&1))tt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=rt;else{if(!(rt&1073741824))return nt=lt!==null?lt.baseLanes|rt:rt,tt.lanes=tt.childLanes=1073741824,tt.memoizedState={baseLanes:nt,cachePool:null,transitions:null},tt.updateQueue=null,G$1(ej,fj),fj|=nt,null;tt.memoizedState={baseLanes:0,cachePool:null,transitions:null},st=lt!==null?lt.baseLanes:rt,G$1(ej,fj),fj|=st}else lt!==null?(st=lt.baseLanes|rt,tt.memoizedState=null):st=rt,G$1(ej,fj),fj|=st;return Xi(nt,tt,at,rt),tt.child}function gj(nt,tt){var rt=tt.ref;(nt===null&&rt!==null||nt!==null&&nt.ref!==rt)&&(tt.flags|=512,tt.flags|=2097152)}function cj(nt,tt,rt,st,at){var lt=Zf(rt)?Xf:H$1.current;return lt=Yf(tt,lt),ch(tt,at),rt=Nh(nt,tt,rt,st,lt,at),st=Sh(),nt!==null&&!dh?(tt.updateQueue=nt.updateQueue,tt.flags&=-2053,nt.lanes&=~at,Zi(nt,tt,at)):(I$1&&st&&vg(tt),tt.flags|=1,Xi(nt,tt,rt,at),tt.child)}function hj(nt,tt,rt,st,at){if(Zf(rt)){var lt=!0;cg(tt)}else lt=!1;if(ch(tt,at),tt.stateNode===null)ij(nt,tt),Gi$1(tt,rt,st),Ii$1(tt,rt,st,at),st=!0;else if(nt===null){var dt=tt.stateNode,yt=tt.memoizedProps;dt.props=yt;var vt=dt.context,_t=rt.contextType;typeof _t=="object"&&_t!==null?_t=eh(_t):(_t=Zf(rt)?Xf:H$1.current,_t=Yf(tt,_t));var bt=rt.getDerivedStateFromProps,Mt=typeof bt=="function"||typeof dt.getSnapshotBeforeUpdate=="function";Mt||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(yt!==st||vt!==_t)&&Hi(tt,dt,st,_t),jh=!1;var Ct=tt.memoizedState;dt.state=Ct,qh(tt,st,dt,at),vt=tt.memoizedState,yt!==st||Ct!==vt||Wf.current||jh?(typeof bt=="function"&&(Di$1(tt,rt,bt,st),vt=tt.memoizedState),(yt=jh||Fi$1(tt,rt,yt,st,Ct,vt,_t))?(Mt||typeof dt.UNSAFE_componentWillMount!="function"&&typeof dt.componentWillMount!="function"||(typeof dt.componentWillMount=="function"&&dt.componentWillMount(),typeof dt.UNSAFE_componentWillMount=="function"&&dt.UNSAFE_componentWillMount()),typeof dt.componentDidMount=="function"&&(tt.flags|=4194308)):(typeof dt.componentDidMount=="function"&&(tt.flags|=4194308),tt.memoizedProps=st,tt.memoizedState=vt),dt.props=st,dt.state=vt,dt.context=_t,st=yt):(typeof dt.componentDidMount=="function"&&(tt.flags|=4194308),st=!1)}else{dt=tt.stateNode,lh(nt,tt),yt=tt.memoizedProps,_t=tt.type===tt.elementType?yt:Ci$1(tt.type,yt),dt.props=_t,Mt=tt.pendingProps,Ct=dt.context,vt=rt.contextType,typeof vt=="object"&&vt!==null?vt=eh(vt):(vt=Zf(rt)?Xf:H$1.current,vt=Yf(tt,vt));var Tt=rt.getDerivedStateFromProps;(bt=typeof Tt=="function"||typeof dt.getSnapshotBeforeUpdate=="function")||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(yt!==Mt||Ct!==vt)&&Hi(tt,dt,st,vt),jh=!1,Ct=tt.memoizedState,dt.state=Ct,qh(tt,st,dt,at);var $t=tt.memoizedState;yt!==Mt||Ct!==$t||Wf.current||jh?(typeof Tt=="function"&&(Di$1(tt,rt,Tt,st),$t=tt.memoizedState),(_t=jh||Fi$1(tt,rt,_t,st,Ct,$t,vt)||!1)?(bt||typeof dt.UNSAFE_componentWillUpdate!="function"&&typeof dt.componentWillUpdate!="function"||(typeof dt.componentWillUpdate=="function"&&dt.componentWillUpdate(st,$t,vt),typeof dt.UNSAFE_componentWillUpdate=="function"&&dt.UNSAFE_componentWillUpdate(st,$t,vt)),typeof dt.componentDidUpdate=="function"&&(tt.flags|=4),typeof dt.getSnapshotBeforeUpdate=="function"&&(tt.flags|=1024)):(typeof dt.componentDidUpdate!="function"||yt===nt.memoizedProps&&Ct===nt.memoizedState||(tt.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||yt===nt.memoizedProps&&Ct===nt.memoizedState||(tt.flags|=1024),tt.memoizedProps=st,tt.memoizedState=$t),dt.props=st,dt.state=$t,dt.context=vt,st=_t):(typeof dt.componentDidUpdate!="function"||yt===nt.memoizedProps&&Ct===nt.memoizedState||(tt.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||yt===nt.memoizedProps&&Ct===nt.memoizedState||(tt.flags|=1024),st=!1)}return jj(nt,tt,rt,st,lt,at)}function jj(nt,tt,rt,st,at,lt){gj(nt,tt);var dt=(tt.flags&128)!==0;if(!st&&!dt)return at&&dg(tt,rt,!1),Zi(nt,tt,lt);st=tt.stateNode,Wi.current=tt;var yt=dt&&typeof rt.getDerivedStateFromError!="function"?null:st.render();return tt.flags|=1,nt!==null&&dt?(tt.child=Ug(tt,nt.child,null,lt),tt.child=Ug(tt,null,yt,lt)):Xi(nt,tt,yt,lt),tt.memoizedState=st.state,at&&dg(tt,rt,!0),tt.child}function kj(nt){var tt=nt.stateNode;tt.pendingContext?ag(nt,tt.pendingContext,tt.pendingContext!==tt.context):tt.context&&ag(nt,tt.context,!1),yh(nt,tt.containerInfo)}function lj(nt,tt,rt,st,at){return Ig(),Jg(at),tt.flags|=256,Xi(nt,tt,rt,st),tt.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(nt){return{baseLanes:nt,cachePool:null,transitions:null}}function oj(nt,tt,rt){var st=tt.pendingProps,at=L$1.current,lt=!1,dt=(tt.flags&128)!==0,yt;if((yt=dt)||(yt=nt!==null&&nt.memoizedState===null?!1:(at&2)!==0),yt?(lt=!0,tt.flags&=-129):(nt===null||nt.memoizedState!==null)&&(at|=1),G$1(L$1,at&1),nt===null)return Eg(tt),nt=tt.memoizedState,nt!==null&&(nt=nt.dehydrated,nt!==null)?(tt.mode&1?nt.data==="$!"?tt.lanes=8:tt.lanes=1073741824:tt.lanes=1,null):(dt=st.children,nt=st.fallback,lt?(st=tt.mode,lt=tt.child,dt={mode:"hidden",children:dt},!(st&1)&&lt!==null?(lt.childLanes=0,lt.pendingProps=dt):lt=pj(dt,st,0,null),nt=Tg(nt,st,rt,null),lt.return=tt,nt.return=tt,lt.sibling=nt,tt.child=lt,tt.child.memoizedState=nj(rt),tt.memoizedState=mj,nt):qj(tt,dt));if(at=nt.memoizedState,at!==null&&(yt=at.dehydrated,yt!==null))return rj(nt,tt,dt,st,yt,at,rt);if(lt){lt=st.fallback,dt=tt.mode,at=nt.child,yt=at.sibling;var vt={mode:"hidden",children:st.children};return!(dt&1)&&tt.child!==at?(st=tt.child,st.childLanes=0,st.pendingProps=vt,tt.deletions=null):(st=Pg(at,vt),st.subtreeFlags=at.subtreeFlags&14680064),yt!==null?lt=Pg(yt,lt):(lt=Tg(lt,dt,rt,null),lt.flags|=2),lt.return=tt,st.return=tt,st.sibling=lt,tt.child=st,st=lt,lt=tt.child,dt=nt.child.memoizedState,dt=dt===null?nj(rt):{baseLanes:dt.baseLanes|rt,cachePool:null,transitions:dt.transitions},lt.memoizedState=dt,lt.childLanes=nt.childLanes&~rt,tt.memoizedState=mj,st}return lt=nt.child,nt=lt.sibling,st=Pg(lt,{mode:"visible",children:st.children}),!(tt.mode&1)&&(st.lanes=rt),st.return=tt,st.sibling=null,nt!==null&&(rt=tt.deletions,rt===null?(tt.deletions=[nt],tt.flags|=16):rt.push(nt)),tt.child=st,tt.memoizedState=null,st}function qj(nt,tt){return tt=pj({mode:"visible",children:tt},nt.mode,0,null),tt.return=nt,nt.child=tt}function sj(nt,tt,rt,st){return st!==null&&Jg(st),Ug(tt,nt.child,null,rt),nt=qj(tt,tt.pendingProps.children),nt.flags|=2,tt.memoizedState=null,nt}function rj(nt,tt,rt,st,at,lt,dt){if(rt)return tt.flags&256?(tt.flags&=-257,st=Ki(Error(p$5(422))),sj(nt,tt,dt,st)):tt.memoizedState!==null?(tt.child=nt.child,tt.flags|=128,null):(lt=st.fallback,at=tt.mode,st=pj({mode:"visible",children:st.children},at,0,null),lt=Tg(lt,at,dt,null),lt.flags|=2,st.return=tt,lt.return=tt,st.sibling=lt,tt.child=st,tt.mode&1&&Ug(tt,nt.child,null,dt),tt.child.memoizedState=nj(dt),tt.memoizedState=mj,lt);if(!(tt.mode&1))return sj(nt,tt,dt,null);if(at.data==="$!"){if(st=at.nextSibling&&at.nextSibling.dataset,st)var yt=st.dgst;return st=yt,lt=Error(p$5(419)),st=Ki(lt,st,void 0),sj(nt,tt,dt,st)}if(yt=(dt&nt.childLanes)!==0,dh||yt){if(st=Q$2,st!==null){switch(dt&-dt){case 4:at=2;break;case 16:at=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:at=32;break;case 536870912:at=268435456;break;default:at=0}at=at&(st.suspendedLanes|dt)?0:at,at!==0&&at!==lt.retryLane&&(lt.retryLane=at,ih(nt,at),gi$1(st,nt,at,-1))}return tj(),st=Ki(Error(p$5(421))),sj(nt,tt,dt,st)}return at.data==="$?"?(tt.flags|=128,tt.child=nt.child,tt=uj.bind(null,nt),at._reactRetry=tt,null):(nt=lt.treeContext,yg=Lf(at.nextSibling),xg=tt,I$1=!0,zg=null,nt!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=nt.id,sg=nt.overflow,qg=tt),tt=qj(tt,st.children),tt.flags|=4096,tt)}function vj(nt,tt,rt){nt.lanes|=tt;var st=nt.alternate;st!==null&&(st.lanes|=tt),bh(nt.return,tt,rt)}function wj(nt,tt,rt,st,at){var lt=nt.memoizedState;lt===null?nt.memoizedState={isBackwards:tt,rendering:null,renderingStartTime:0,last:st,tail:rt,tailMode:at}:(lt.isBackwards=tt,lt.rendering=null,lt.renderingStartTime=0,lt.last=st,lt.tail=rt,lt.tailMode=at)}function xj(nt,tt,rt){var st=tt.pendingProps,at=st.revealOrder,lt=st.tail;if(Xi(nt,tt,st.children,rt),st=L$1.current,st&2)st=st&1|2,tt.flags|=128;else{if(nt!==null&&nt.flags&128)e:for(nt=tt.child;nt!==null;){if(nt.tag===13)nt.memoizedState!==null&&vj(nt,rt,tt);else if(nt.tag===19)vj(nt,rt,tt);else if(nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===tt)break e;for(;nt.sibling===null;){if(nt.return===null||nt.return===tt)break e;nt=nt.return}nt.sibling.return=nt.return,nt=nt.sibling}st&=1}if(G$1(L$1,st),!(tt.mode&1))tt.memoizedState=null;else switch(at){case"forwards":for(rt=tt.child,at=null;rt!==null;)nt=rt.alternate,nt!==null&&Ch(nt)===null&&(at=rt),rt=rt.sibling;rt=at,rt===null?(at=tt.child,tt.child=null):(at=rt.sibling,rt.sibling=null),wj(tt,!1,at,rt,lt);break;case"backwards":for(rt=null,at=tt.child,tt.child=null;at!==null;){if(nt=at.alternate,nt!==null&&Ch(nt)===null){tt.child=at;break}nt=at.sibling,at.sibling=rt,rt=at,at=nt}wj(tt,!0,rt,null,lt);break;case"together":wj(tt,!1,null,null,void 0);break;default:tt.memoizedState=null}return tt.child}function ij(nt,tt){!(tt.mode&1)&&nt!==null&&(nt.alternate=null,tt.alternate=null,tt.flags|=2)}function Zi(nt,tt,rt){if(nt!==null&&(tt.dependencies=nt.dependencies),rh|=tt.lanes,!(rt&tt.childLanes))return null;if(nt!==null&&tt.child!==nt.child)throw Error(p$5(153));if(tt.child!==null){for(nt=tt.child,rt=Pg(nt,nt.pendingProps),tt.child=rt,rt.return=tt;nt.sibling!==null;)nt=nt.sibling,rt=rt.sibling=Pg(nt,nt.pendingProps),rt.return=tt;rt.sibling=null}return tt.child}function yj(nt,tt,rt){switch(tt.tag){case 3:kj(tt),Ig();break;case 5:Ah(tt);break;case 1:Zf(tt.type)&&cg(tt);break;case 4:yh(tt,tt.stateNode.containerInfo);break;case 10:var st=tt.type._context,at=tt.memoizedProps.value;G$1(Wg,st._currentValue),st._currentValue=at;break;case 13:if(st=tt.memoizedState,st!==null)return st.dehydrated!==null?(G$1(L$1,L$1.current&1),tt.flags|=128,null):rt&tt.child.childLanes?oj(nt,tt,rt):(G$1(L$1,L$1.current&1),nt=Zi(nt,tt,rt),nt!==null?nt.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(st=(rt&tt.childLanes)!==0,nt.flags&128){if(st)return xj(nt,tt,rt);tt.flags|=128}if(at=tt.memoizedState,at!==null&&(at.rendering=null,at.tail=null,at.lastEffect=null),G$1(L$1,L$1.current),st)break;return null;case 22:case 23:return tt.lanes=0,dj(nt,tt,rt)}return Zi(nt,tt,rt)}var zj,Aj,Bj,Cj;zj=function(nt,tt){for(var rt=tt.child;rt!==null;){if(rt.tag===5||rt.tag===6)nt.appendChild(rt.stateNode);else if(rt.tag!==4&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===tt)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===tt)return;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}};Aj=function(){};Bj=function(nt,tt,rt,st){var at=nt.memoizedProps;if(at!==st){nt=tt.stateNode,xh(uh.current);var lt=null;switch(rt){case"input":at=Ya(nt,at),st=Ya(nt,st),lt=[];break;case"select":at=A$3({},at,{value:void 0}),st=A$3({},st,{value:void 0}),lt=[];break;case"textarea":at=gb(nt,at),st=gb(nt,st),lt=[];break;default:typeof at.onClick!="function"&&typeof st.onClick=="function"&&(nt.onclick=Bf)}ub(rt,st);var dt;rt=null;for(_t in at)if(!st.hasOwnProperty(_t)&&at.hasOwnProperty(_t)&&at[_t]!=null)if(_t==="style"){var yt=at[_t];for(dt in yt)yt.hasOwnProperty(dt)&&(rt||(rt={}),rt[dt]="")}else _t!=="dangerouslySetInnerHTML"&&_t!=="children"&&_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&_t!=="autoFocus"&&(ea$1.hasOwnProperty(_t)?lt||(lt=[]):(lt=lt||[]).push(_t,null));for(_t in st){var vt=st[_t];if(yt=at!=null?at[_t]:void 0,st.hasOwnProperty(_t)&&vt!==yt&&(vt!=null||yt!=null))if(_t==="style")if(yt){for(dt in yt)!yt.hasOwnProperty(dt)||vt&&vt.hasOwnProperty(dt)||(rt||(rt={}),rt[dt]="");for(dt in vt)vt.hasOwnProperty(dt)&&yt[dt]!==vt[dt]&&(rt||(rt={}),rt[dt]=vt[dt])}else rt||(lt||(lt=[]),lt.push(_t,rt)),rt=vt;else _t==="dangerouslySetInnerHTML"?(vt=vt?vt.__html:void 0,yt=yt?yt.__html:void 0,vt!=null&&yt!==vt&&(lt=lt||[]).push(_t,vt)):_t==="children"?typeof vt!="string"&&typeof vt!="number"||(lt=lt||[]).push(_t,""+vt):_t!=="suppressContentEditableWarning"&&_t!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(_t)?(vt!=null&&_t==="onScroll"&&D$2("scroll",nt),lt||yt===vt||(lt=[])):(lt=lt||[]).push(_t,vt))}rt&&(lt=lt||[]).push("style",rt);var _t=lt;(tt.updateQueue=_t)&&(tt.flags|=4)}};Cj=function(nt,tt,rt,st){rt!==st&&(tt.flags|=4)};function Dj(nt,tt){if(!I$1)switch(nt.tailMode){case"hidden":tt=nt.tail;for(var rt=null;tt!==null;)tt.alternate!==null&&(rt=tt),tt=tt.sibling;rt===null?nt.tail=null:rt.sibling=null;break;case"collapsed":rt=nt.tail;for(var st=null;rt!==null;)rt.alternate!==null&&(st=rt),rt=rt.sibling;st===null?tt||nt.tail===null?nt.tail=null:nt.tail.sibling=null:st.sibling=null}}function S$1(nt){var tt=nt.alternate!==null&&nt.alternate.child===nt.child,rt=0,st=0;if(tt)for(var at=nt.child;at!==null;)rt|=at.lanes|at.childLanes,st|=at.subtreeFlags&14680064,st|=at.flags&14680064,at.return=nt,at=at.sibling;else for(at=nt.child;at!==null;)rt|=at.lanes|at.childLanes,st|=at.subtreeFlags,st|=at.flags,at.return=nt,at=at.sibling;return nt.subtreeFlags|=st,nt.childLanes=rt,tt}function Ej(nt,tt,rt){var st=tt.pendingProps;switch(wg(tt),tt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(tt),null;case 1:return Zf(tt.type)&&$f(),S$1(tt),null;case 3:return st=tt.stateNode,zh(),E$2(Wf),E$2(H$1),Eh(),st.pendingContext&&(st.context=st.pendingContext,st.pendingContext=null),(nt===null||nt.child===null)&&(Gg(tt)?tt.flags|=4:nt===null||nt.memoizedState.isDehydrated&&!(tt.flags&256)||(tt.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(nt,tt),S$1(tt),null;case 5:Bh(tt);var at=xh(wh.current);if(rt=tt.type,nt!==null&&tt.stateNode!=null)Bj(nt,tt,rt,st,at),nt.ref!==tt.ref&&(tt.flags|=512,tt.flags|=2097152);else{if(!st){if(tt.stateNode===null)throw Error(p$5(166));return S$1(tt),null}if(nt=xh(uh.current),Gg(tt)){st=tt.stateNode,rt=tt.type;var lt=tt.memoizedProps;switch(st[Of]=tt,st[Pf]=lt,nt=(tt.mode&1)!==0,rt){case"dialog":D$2("cancel",st),D$2("close",st);break;case"iframe":case"object":case"embed":D$2("load",st);break;case"video":case"audio":for(at=0;at<lf.length;at++)D$2(lf[at],st);break;case"source":D$2("error",st);break;case"img":case"image":case"link":D$2("error",st),D$2("load",st);break;case"details":D$2("toggle",st);break;case"input":Za(st,lt),D$2("invalid",st);break;case"select":st._wrapperState={wasMultiple:!!lt.multiple},D$2("invalid",st);break;case"textarea":hb(st,lt),D$2("invalid",st)}ub(rt,lt),at=null;for(var dt in lt)if(lt.hasOwnProperty(dt)){var yt=lt[dt];dt==="children"?typeof yt=="string"?st.textContent!==yt&&(lt.suppressHydrationWarning!==!0&&Af(st.textContent,yt,nt),at=["children",yt]):typeof yt=="number"&&st.textContent!==""+yt&&(lt.suppressHydrationWarning!==!0&&Af(st.textContent,yt,nt),at=["children",""+yt]):ea$1.hasOwnProperty(dt)&&yt!=null&&dt==="onScroll"&&D$2("scroll",st)}switch(rt){case"input":Va(st),db(st,lt,!0);break;case"textarea":Va(st),jb(st);break;case"select":case"option":break;default:typeof lt.onClick=="function"&&(st.onclick=Bf)}st=at,tt.updateQueue=st,st!==null&&(tt.flags|=4)}else{dt=at.nodeType===9?at:at.ownerDocument,nt==="http://www.w3.org/1999/xhtml"&&(nt=kb(rt)),nt==="http://www.w3.org/1999/xhtml"?rt==="script"?(nt=dt.createElement("div"),nt.innerHTML="<script><\/script>",nt=nt.removeChild(nt.firstChild)):typeof st.is=="string"?nt=dt.createElement(rt,{is:st.is}):(nt=dt.createElement(rt),rt==="select"&&(dt=nt,st.multiple?dt.multiple=!0:st.size&&(dt.size=st.size))):nt=dt.createElementNS(nt,rt),nt[Of]=tt,nt[Pf]=st,zj(nt,tt,!1,!1),tt.stateNode=nt;e:{switch(dt=vb(rt,st),rt){case"dialog":D$2("cancel",nt),D$2("close",nt),at=st;break;case"iframe":case"object":case"embed":D$2("load",nt),at=st;break;case"video":case"audio":for(at=0;at<lf.length;at++)D$2(lf[at],nt);at=st;break;case"source":D$2("error",nt),at=st;break;case"img":case"image":case"link":D$2("error",nt),D$2("load",nt),at=st;break;case"details":D$2("toggle",nt),at=st;break;case"input":Za(nt,st),at=Ya(nt,st),D$2("invalid",nt);break;case"option":at=st;break;case"select":nt._wrapperState={wasMultiple:!!st.multiple},at=A$3({},st,{value:void 0}),D$2("invalid",nt);break;case"textarea":hb(nt,st),at=gb(nt,st),D$2("invalid",nt);break;default:at=st}ub(rt,at),yt=at;for(lt in yt)if(yt.hasOwnProperty(lt)){var vt=yt[lt];lt==="style"?sb(nt,vt):lt==="dangerouslySetInnerHTML"?(vt=vt?vt.__html:void 0,vt!=null&&nb(nt,vt)):lt==="children"?typeof vt=="string"?(rt!=="textarea"||vt!=="")&&ob(nt,vt):typeof vt=="number"&&ob(nt,""+vt):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(ea$1.hasOwnProperty(lt)?vt!=null&&lt==="onScroll"&&D$2("scroll",nt):vt!=null&&ta$1(nt,lt,vt,dt))}switch(rt){case"input":Va(nt),db(nt,st,!1);break;case"textarea":Va(nt),jb(nt);break;case"option":st.value!=null&&nt.setAttribute("value",""+Sa$1(st.value));break;case"select":nt.multiple=!!st.multiple,lt=st.value,lt!=null?fb(nt,!!st.multiple,lt,!1):st.defaultValue!=null&&fb(nt,!!st.multiple,st.defaultValue,!0);break;default:typeof at.onClick=="function"&&(nt.onclick=Bf)}switch(rt){case"button":case"input":case"select":case"textarea":st=!!st.autoFocus;break e;case"img":st=!0;break e;default:st=!1}}st&&(tt.flags|=4)}tt.ref!==null&&(tt.flags|=512,tt.flags|=2097152)}return S$1(tt),null;case 6:if(nt&&tt.stateNode!=null)Cj(nt,tt,nt.memoizedProps,st);else{if(typeof st!="string"&&tt.stateNode===null)throw Error(p$5(166));if(rt=xh(wh.current),xh(uh.current),Gg(tt)){if(st=tt.stateNode,rt=tt.memoizedProps,st[Of]=tt,(lt=st.nodeValue!==rt)&&(nt=xg,nt!==null))switch(nt.tag){case 3:Af(st.nodeValue,rt,(nt.mode&1)!==0);break;case 5:nt.memoizedProps.suppressHydrationWarning!==!0&&Af(st.nodeValue,rt,(nt.mode&1)!==0)}lt&&(tt.flags|=4)}else st=(rt.nodeType===9?rt:rt.ownerDocument).createTextNode(st),st[Of]=tt,tt.stateNode=st}return S$1(tt),null;case 13:if(E$2(L$1),st=tt.memoizedState,nt===null||nt.memoizedState!==null&&nt.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&tt.mode&1&&!(tt.flags&128))Hg(),Ig(),tt.flags|=98560,lt=!1;else if(lt=Gg(tt),st!==null&&st.dehydrated!==null){if(nt===null){if(!lt)throw Error(p$5(318));if(lt=tt.memoizedState,lt=lt!==null?lt.dehydrated:null,!lt)throw Error(p$5(317));lt[Of]=tt}else Ig(),!(tt.flags&128)&&(tt.memoizedState=null),tt.flags|=4;S$1(tt),lt=!1}else zg!==null&&(Fj(zg),zg=null),lt=!0;if(!lt)return tt.flags&65536?tt:null}return tt.flags&128?(tt.lanes=rt,tt):(st=st!==null,st!==(nt!==null&&nt.memoizedState!==null)&&st&&(tt.child.flags|=8192,tt.mode&1&&(nt===null||L$1.current&1?T$2===0&&(T$2=3):tj())),tt.updateQueue!==null&&(tt.flags|=4),S$1(tt),null);case 4:return zh(),Aj(nt,tt),nt===null&&sf(tt.stateNode.containerInfo),S$1(tt),null;case 10:return ah(tt.type._context),S$1(tt),null;case 17:return Zf(tt.type)&&$f(),S$1(tt),null;case 19:if(E$2(L$1),lt=tt.memoizedState,lt===null)return S$1(tt),null;if(st=(tt.flags&128)!==0,dt=lt.rendering,dt===null)if(st)Dj(lt,!1);else{if(T$2!==0||nt!==null&&nt.flags&128)for(nt=tt.child;nt!==null;){if(dt=Ch(nt),dt!==null){for(tt.flags|=128,Dj(lt,!1),st=dt.updateQueue,st!==null&&(tt.updateQueue=st,tt.flags|=4),tt.subtreeFlags=0,st=rt,rt=tt.child;rt!==null;)lt=rt,nt=st,lt.flags&=14680066,dt=lt.alternate,dt===null?(lt.childLanes=0,lt.lanes=nt,lt.child=null,lt.subtreeFlags=0,lt.memoizedProps=null,lt.memoizedState=null,lt.updateQueue=null,lt.dependencies=null,lt.stateNode=null):(lt.childLanes=dt.childLanes,lt.lanes=dt.lanes,lt.child=dt.child,lt.subtreeFlags=0,lt.deletions=null,lt.memoizedProps=dt.memoizedProps,lt.memoizedState=dt.memoizedState,lt.updateQueue=dt.updateQueue,lt.type=dt.type,nt=dt.dependencies,lt.dependencies=nt===null?null:{lanes:nt.lanes,firstContext:nt.firstContext}),rt=rt.sibling;return G$1(L$1,L$1.current&1|2),tt.child}nt=nt.sibling}lt.tail!==null&&B$2()>Gj&&(tt.flags|=128,st=!0,Dj(lt,!1),tt.lanes=4194304)}else{if(!st)if(nt=Ch(dt),nt!==null){if(tt.flags|=128,st=!0,rt=nt.updateQueue,rt!==null&&(tt.updateQueue=rt,tt.flags|=4),Dj(lt,!0),lt.tail===null&&lt.tailMode==="hidden"&&!dt.alternate&&!I$1)return S$1(tt),null}else 2*B$2()-lt.renderingStartTime>Gj&&rt!==1073741824&&(tt.flags|=128,st=!0,Dj(lt,!1),tt.lanes=4194304);lt.isBackwards?(dt.sibling=tt.child,tt.child=dt):(rt=lt.last,rt!==null?rt.sibling=dt:tt.child=dt,lt.last=dt)}return lt.tail!==null?(tt=lt.tail,lt.rendering=tt,lt.tail=tt.sibling,lt.renderingStartTime=B$2(),tt.sibling=null,rt=L$1.current,G$1(L$1,st?rt&1|2:rt&1),tt):(S$1(tt),null);case 22:case 23:return Hj(),st=tt.memoizedState!==null,nt!==null&&nt.memoizedState!==null!==st&&(tt.flags|=8192),st&&tt.mode&1?fj&1073741824&&(S$1(tt),tt.subtreeFlags&6&&(tt.flags|=8192)):S$1(tt),null;case 24:return null;case 25:return null}throw Error(p$5(156,tt.tag))}function Ij(nt,tt){switch(wg(tt),tt.tag){case 1:return Zf(tt.type)&&$f(),nt=tt.flags,nt&65536?(tt.flags=nt&-65537|128,tt):null;case 3:return zh(),E$2(Wf),E$2(H$1),Eh(),nt=tt.flags,nt&65536&&!(nt&128)?(tt.flags=nt&-65537|128,tt):null;case 5:return Bh(tt),null;case 13:if(E$2(L$1),nt=tt.memoizedState,nt!==null&&nt.dehydrated!==null){if(tt.alternate===null)throw Error(p$5(340));Ig()}return nt=tt.flags,nt&65536?(tt.flags=nt&-65537|128,tt):null;case 19:return E$2(L$1),null;case 4:return zh(),null;case 10:return ah(tt.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(nt,tt){var rt=nt.ref;if(rt!==null)if(typeof rt=="function")try{rt(null)}catch(st){W$1(nt,tt,st)}else rt.current=null}function Mj(nt,tt,rt){try{rt()}catch(st){W$1(nt,tt,st)}}var Nj=!1;function Oj(nt,tt){if(Cf=dd,nt=Me$2(),Ne$2(nt)){if("selectionStart"in nt)var rt={start:nt.selectionStart,end:nt.selectionEnd};else e:{rt=(rt=nt.ownerDocument)&&rt.defaultView||window;var st=rt.getSelection&&rt.getSelection();if(st&&st.rangeCount!==0){rt=st.anchorNode;var at=st.anchorOffset,lt=st.focusNode;st=st.focusOffset;try{rt.nodeType,lt.nodeType}catch{rt=null;break e}var dt=0,yt=-1,vt=-1,_t=0,bt=0,Mt=nt,Ct=null;t:for(;;){for(var Tt;Mt!==rt||at!==0&&Mt.nodeType!==3||(yt=dt+at),Mt!==lt||st!==0&&Mt.nodeType!==3||(vt=dt+st),Mt.nodeType===3&&(dt+=Mt.nodeValue.length),(Tt=Mt.firstChild)!==null;)Ct=Mt,Mt=Tt;for(;;){if(Mt===nt)break t;if(Ct===rt&&++_t===at&&(yt=dt),Ct===lt&&++bt===st&&(vt=dt),(Tt=Mt.nextSibling)!==null)break;Mt=Ct,Ct=Mt.parentNode}Mt=Tt}rt=yt===-1||vt===-1?null:{start:yt,end:vt}}else rt=null}rt=rt||{start:0,end:0}}else rt=null;for(Df={focusedElem:nt,selectionRange:rt},dd=!1,V$1=tt;V$1!==null;)if(tt=V$1,nt=tt.child,(tt.subtreeFlags&1028)!==0&&nt!==null)nt.return=tt,V$1=nt;else for(;V$1!==null;){tt=V$1;try{var $t=tt.alternate;if(tt.flags&1024)switch(tt.tag){case 0:case 11:case 15:break;case 1:if($t!==null){var Rt=$t.memoizedProps,Et=$t.memoizedState,wt=tt.stateNode,Pt=wt.getSnapshotBeforeUpdate(tt.elementType===tt.type?Rt:Ci$1(tt.type,Rt),Et);wt.__reactInternalSnapshotBeforeUpdate=Pt}break;case 3:var Ft=tt.stateNode.containerInfo;Ft.nodeType===1?Ft.textContent="":Ft.nodeType===9&&Ft.documentElement&&Ft.removeChild(Ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$5(163))}}catch(Nt){W$1(tt,tt.return,Nt)}if(nt=tt.sibling,nt!==null){nt.return=tt.return,V$1=nt;break}V$1=tt.return}return $t=Nj,Nj=!1,$t}function Pj(nt,tt,rt){var st=tt.updateQueue;if(st=st!==null?st.lastEffect:null,st!==null){var at=st=st.next;do{if((at.tag&nt)===nt){var lt=at.destroy;at.destroy=void 0,lt!==void 0&&Mj(tt,rt,lt)}at=at.next}while(at!==st)}}function Qj(nt,tt){if(tt=tt.updateQueue,tt=tt!==null?tt.lastEffect:null,tt!==null){var rt=tt=tt.next;do{if((rt.tag&nt)===nt){var st=rt.create;rt.destroy=st()}rt=rt.next}while(rt!==tt)}}function Rj(nt){var tt=nt.ref;if(tt!==null){var rt=nt.stateNode;switch(nt.tag){case 5:nt=rt;break;default:nt=rt}typeof tt=="function"?tt(nt):tt.current=nt}}function Sj(nt){var tt=nt.alternate;tt!==null&&(nt.alternate=null,Sj(tt)),nt.child=null,nt.deletions=null,nt.sibling=null,nt.tag===5&&(tt=nt.stateNode,tt!==null&&(delete tt[Of],delete tt[Pf],delete tt[of],delete tt[Qf],delete tt[Rf])),nt.stateNode=null,nt.return=null,nt.dependencies=null,nt.memoizedProps=null,nt.memoizedState=null,nt.pendingProps=null,nt.stateNode=null,nt.updateQueue=null}function Tj(nt){return nt.tag===5||nt.tag===3||nt.tag===4}function Uj(nt){e:for(;;){for(;nt.sibling===null;){if(nt.return===null||Tj(nt.return))return null;nt=nt.return}for(nt.sibling.return=nt.return,nt=nt.sibling;nt.tag!==5&&nt.tag!==6&&nt.tag!==18;){if(nt.flags&2||nt.child===null||nt.tag===4)continue e;nt.child.return=nt,nt=nt.child}if(!(nt.flags&2))return nt.stateNode}}function Vj(nt,tt,rt){var st=nt.tag;if(st===5||st===6)nt=nt.stateNode,tt?rt.nodeType===8?rt.parentNode.insertBefore(nt,tt):rt.insertBefore(nt,tt):(rt.nodeType===8?(tt=rt.parentNode,tt.insertBefore(nt,rt)):(tt=rt,tt.appendChild(nt)),rt=rt._reactRootContainer,rt!=null||tt.onclick!==null||(tt.onclick=Bf));else if(st!==4&&(nt=nt.child,nt!==null))for(Vj(nt,tt,rt),nt=nt.sibling;nt!==null;)Vj(nt,tt,rt),nt=nt.sibling}function Wj(nt,tt,rt){var st=nt.tag;if(st===5||st===6)nt=nt.stateNode,tt?rt.insertBefore(nt,tt):rt.appendChild(nt);else if(st!==4&&(nt=nt.child,nt!==null))for(Wj(nt,tt,rt),nt=nt.sibling;nt!==null;)Wj(nt,tt,rt),nt=nt.sibling}var X$1=null,Xj=!1;function Yj(nt,tt,rt){for(rt=rt.child;rt!==null;)Zj(nt,tt,rt),rt=rt.sibling}function Zj(nt,tt,rt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc$1,rt)}catch{}switch(rt.tag){case 5:U$1||Lj(rt,tt);case 6:var st=X$1,at=Xj;X$1=null,Yj(nt,tt,rt),X$1=st,Xj=at,X$1!==null&&(Xj?(nt=X$1,rt=rt.stateNode,nt.nodeType===8?nt.parentNode.removeChild(rt):nt.removeChild(rt)):X$1.removeChild(rt.stateNode));break;case 18:X$1!==null&&(Xj?(nt=X$1,rt=rt.stateNode,nt.nodeType===8?Kf(nt.parentNode,rt):nt.nodeType===1&&Kf(nt,rt),bd(nt)):Kf(X$1,rt.stateNode));break;case 4:st=X$1,at=Xj,X$1=rt.stateNode.containerInfo,Xj=!0,Yj(nt,tt,rt),X$1=st,Xj=at;break;case 0:case 11:case 14:case 15:if(!U$1&&(st=rt.updateQueue,st!==null&&(st=st.lastEffect,st!==null))){at=st=st.next;do{var lt=at,dt=lt.destroy;lt=lt.tag,dt!==void 0&&(lt&2||lt&4)&&Mj(rt,tt,dt),at=at.next}while(at!==st)}Yj(nt,tt,rt);break;case 1:if(!U$1&&(Lj(rt,tt),st=rt.stateNode,typeof st.componentWillUnmount=="function"))try{st.props=rt.memoizedProps,st.state=rt.memoizedState,st.componentWillUnmount()}catch(yt){W$1(rt,tt,yt)}Yj(nt,tt,rt);break;case 21:Yj(nt,tt,rt);break;case 22:rt.mode&1?(U$1=(st=U$1)||rt.memoizedState!==null,Yj(nt,tt,rt),U$1=st):Yj(nt,tt,rt);break;default:Yj(nt,tt,rt)}}function ak(nt){var tt=nt.updateQueue;if(tt!==null){nt.updateQueue=null;var rt=nt.stateNode;rt===null&&(rt=nt.stateNode=new Kj),tt.forEach(function(st){var at=bk.bind(null,nt,st);rt.has(st)||(rt.add(st),st.then(at,at))})}}function ck(nt,tt){var rt=tt.deletions;if(rt!==null)for(var st=0;st<rt.length;st++){var at=rt[st];try{var lt=nt,dt=tt,yt=dt;e:for(;yt!==null;){switch(yt.tag){case 5:X$1=yt.stateNode,Xj=!1;break e;case 3:X$1=yt.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=yt.stateNode.containerInfo,Xj=!0;break e}yt=yt.return}if(X$1===null)throw Error(p$5(160));Zj(lt,dt,at),X$1=null,Xj=!1;var vt=at.alternate;vt!==null&&(vt.return=null),at.return=null}catch(_t){W$1(at,tt,_t)}}if(tt.subtreeFlags&12854)for(tt=tt.child;tt!==null;)dk(tt,nt),tt=tt.sibling}function dk(nt,tt){var rt=nt.alternate,st=nt.flags;switch(nt.tag){case 0:case 11:case 14:case 15:if(ck(tt,nt),ek(nt),st&4){try{Pj(3,nt,nt.return),Qj(3,nt)}catch(Rt){W$1(nt,nt.return,Rt)}try{Pj(5,nt,nt.return)}catch(Rt){W$1(nt,nt.return,Rt)}}break;case 1:ck(tt,nt),ek(nt),st&512&&rt!==null&&Lj(rt,rt.return);break;case 5:if(ck(tt,nt),ek(nt),st&512&&rt!==null&&Lj(rt,rt.return),nt.flags&32){var at=nt.stateNode;try{ob(at,"")}catch(Rt){W$1(nt,nt.return,Rt)}}if(st&4&&(at=nt.stateNode,at!=null)){var lt=nt.memoizedProps,dt=rt!==null?rt.memoizedProps:lt,yt=nt.type,vt=nt.updateQueue;if(nt.updateQueue=null,vt!==null)try{yt==="input"&&lt.type==="radio"&&lt.name!=null&&ab(at,lt),vb(yt,dt);var _t=vb(yt,lt);for(dt=0;dt<vt.length;dt+=2){var bt=vt[dt],Mt=vt[dt+1];bt==="style"?sb(at,Mt):bt==="dangerouslySetInnerHTML"?nb(at,Mt):bt==="children"?ob(at,Mt):ta$1(at,bt,Mt,_t)}switch(yt){case"input":bb(at,lt);break;case"textarea":ib(at,lt);break;case"select":var Ct=at._wrapperState.wasMultiple;at._wrapperState.wasMultiple=!!lt.multiple;var Tt=lt.value;Tt!=null?fb(at,!!lt.multiple,Tt,!1):Ct!==!!lt.multiple&&(lt.defaultValue!=null?fb(at,!!lt.multiple,lt.defaultValue,!0):fb(at,!!lt.multiple,lt.multiple?[]:"",!1))}at[Pf]=lt}catch(Rt){W$1(nt,nt.return,Rt)}}break;case 6:if(ck(tt,nt),ek(nt),st&4){if(nt.stateNode===null)throw Error(p$5(162));at=nt.stateNode,lt=nt.memoizedProps;try{at.nodeValue=lt}catch(Rt){W$1(nt,nt.return,Rt)}}break;case 3:if(ck(tt,nt),ek(nt),st&4&&rt!==null&&rt.memoizedState.isDehydrated)try{bd(tt.containerInfo)}catch(Rt){W$1(nt,nt.return,Rt)}break;case 4:ck(tt,nt),ek(nt);break;case 13:ck(tt,nt),ek(nt),at=nt.child,at.flags&8192&&(lt=at.memoizedState!==null,at.stateNode.isHidden=lt,!lt||at.alternate!==null&&at.alternate.memoizedState!==null||(fk=B$2())),st&4&&ak(nt);break;case 22:if(bt=rt!==null&&rt.memoizedState!==null,nt.mode&1?(U$1=(_t=U$1)||bt,ck(tt,nt),U$1=_t):ck(tt,nt),ek(nt),st&8192){if(_t=nt.memoizedState!==null,(nt.stateNode.isHidden=_t)&&!bt&&nt.mode&1)for(V$1=nt,bt=nt.child;bt!==null;){for(Mt=V$1=bt;V$1!==null;){switch(Ct=V$1,Tt=Ct.child,Ct.tag){case 0:case 11:case 14:case 15:Pj(4,Ct,Ct.return);break;case 1:Lj(Ct,Ct.return);var $t=Ct.stateNode;if(typeof $t.componentWillUnmount=="function"){st=Ct,rt=Ct.return;try{tt=st,$t.props=tt.memoizedProps,$t.state=tt.memoizedState,$t.componentWillUnmount()}catch(Rt){W$1(st,rt,Rt)}}break;case 5:Lj(Ct,Ct.return);break;case 22:if(Ct.memoizedState!==null){gk(Mt);continue}}Tt!==null?(Tt.return=Ct,V$1=Tt):gk(Mt)}bt=bt.sibling}e:for(bt=null,Mt=nt;;){if(Mt.tag===5){if(bt===null){bt=Mt;try{at=Mt.stateNode,_t?(lt=at.style,typeof lt.setProperty=="function"?lt.setProperty("display","none","important"):lt.display="none"):(yt=Mt.stateNode,vt=Mt.memoizedProps.style,dt=vt!=null&&vt.hasOwnProperty("display")?vt.display:null,yt.style.display=rb("display",dt))}catch(Rt){W$1(nt,nt.return,Rt)}}}else if(Mt.tag===6){if(bt===null)try{Mt.stateNode.nodeValue=_t?"":Mt.memoizedProps}catch(Rt){W$1(nt,nt.return,Rt)}}else if((Mt.tag!==22&&Mt.tag!==23||Mt.memoizedState===null||Mt===nt)&&Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===nt)break e;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===nt)break e;bt===Mt&&(bt=null),Mt=Mt.return}bt===Mt&&(bt=null),Mt.sibling.return=Mt.return,Mt=Mt.sibling}}break;case 19:ck(tt,nt),ek(nt),st&4&&ak(nt);break;case 21:break;default:ck(tt,nt),ek(nt)}}function ek(nt){var tt=nt.flags;if(tt&2){try{e:{for(var rt=nt.return;rt!==null;){if(Tj(rt)){var st=rt;break e}rt=rt.return}throw Error(p$5(160))}switch(st.tag){case 5:var at=st.stateNode;st.flags&32&&(ob(at,""),st.flags&=-33);var lt=Uj(nt);Wj(nt,lt,at);break;case 3:case 4:var dt=st.stateNode.containerInfo,yt=Uj(nt);Vj(nt,yt,dt);break;default:throw Error(p$5(161))}}catch(vt){W$1(nt,nt.return,vt)}nt.flags&=-3}tt&4096&&(nt.flags&=-4097)}function hk(nt,tt,rt){V$1=nt,ik(nt)}function ik(nt,tt,rt){for(var st=(nt.mode&1)!==0;V$1!==null;){var at=V$1,lt=at.child;if(at.tag===22&&st){var dt=at.memoizedState!==null||Jj;if(!dt){var yt=at.alternate,vt=yt!==null&&yt.memoizedState!==null||U$1;yt=Jj;var _t=U$1;if(Jj=dt,(U$1=vt)&&!_t)for(V$1=at;V$1!==null;)dt=V$1,vt=dt.child,dt.tag===22&&dt.memoizedState!==null?jk(at):vt!==null?(vt.return=dt,V$1=vt):jk(at);for(;lt!==null;)V$1=lt,ik(lt),lt=lt.sibling;V$1=at,Jj=yt,U$1=_t}kk(nt)}else at.subtreeFlags&8772&&lt!==null?(lt.return=at,V$1=lt):kk(nt)}}function kk(nt){for(;V$1!==null;){var tt=V$1;if(tt.flags&8772){var rt=tt.alternate;try{if(tt.flags&8772)switch(tt.tag){case 0:case 11:case 15:U$1||Qj(5,tt);break;case 1:var st=tt.stateNode;if(tt.flags&4&&!U$1)if(rt===null)st.componentDidMount();else{var at=tt.elementType===tt.type?rt.memoizedProps:Ci$1(tt.type,rt.memoizedProps);st.componentDidUpdate(at,rt.memoizedState,st.__reactInternalSnapshotBeforeUpdate)}var lt=tt.updateQueue;lt!==null&&sh(tt,lt,st);break;case 3:var dt=tt.updateQueue;if(dt!==null){if(rt=null,tt.child!==null)switch(tt.child.tag){case 5:rt=tt.child.stateNode;break;case 1:rt=tt.child.stateNode}sh(tt,dt,rt)}break;case 5:var yt=tt.stateNode;if(rt===null&&tt.flags&4){rt=yt;var vt=tt.memoizedProps;switch(tt.type){case"button":case"input":case"select":case"textarea":vt.autoFocus&&rt.focus();break;case"img":vt.src&&(rt.src=vt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(tt.memoizedState===null){var _t=tt.alternate;if(_t!==null){var bt=_t.memoizedState;if(bt!==null){var Mt=bt.dehydrated;Mt!==null&&bd(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$5(163))}U$1||tt.flags&512&&Rj(tt)}catch(Ct){W$1(tt,tt.return,Ct)}}if(tt===nt){V$1=null;break}if(rt=tt.sibling,rt!==null){rt.return=tt.return,V$1=rt;break}V$1=tt.return}}function gk(nt){for(;V$1!==null;){var tt=V$1;if(tt===nt){V$1=null;break}var rt=tt.sibling;if(rt!==null){rt.return=tt.return,V$1=rt;break}V$1=tt.return}}function jk(nt){for(;V$1!==null;){var tt=V$1;try{switch(tt.tag){case 0:case 11:case 15:var rt=tt.return;try{Qj(4,tt)}catch(vt){W$1(tt,rt,vt)}break;case 1:var st=tt.stateNode;if(typeof st.componentDidMount=="function"){var at=tt.return;try{st.componentDidMount()}catch(vt){W$1(tt,at,vt)}}var lt=tt.return;try{Rj(tt)}catch(vt){W$1(tt,lt,vt)}break;case 5:var dt=tt.return;try{Rj(tt)}catch(vt){W$1(tt,dt,vt)}}}catch(vt){W$1(tt,tt.return,vt)}if(tt===nt){V$1=null;break}var yt=tt.sibling;if(yt!==null){yt.return=tt.return,V$1=yt;break}V$1=tt.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K$2=0,Q$2=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$2=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi$1=!1,Pi$1=null,Ri$1=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$2&6?B$2():Ak!==-1?Ak:Ak=B$2()}function yi$1(nt){return nt.mode&1?K$2&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(nt=C$2,nt!==0||(nt=window.event,nt=nt===void 0?16:jd(nt.type)),nt):1}function gi$1(nt,tt,rt,st){if(50<yk)throw yk=0,zk=null,Error(p$5(185));Ac$1(nt,rt,st),(!(K$2&2)||nt!==Q$2)&&(nt===Q$2&&(!(K$2&2)&&(qk|=rt),T$2===4&&Ck(nt,Z$1)),Dk(nt,st),rt===1&&K$2===0&&!(tt.mode&1)&&(Gj=B$2()+500,fg&&jg()))}function Dk(nt,tt){var rt=nt.callbackNode;wc(nt,tt);var st=uc(nt,nt===Q$2?Z$1:0);if(st===0)rt!==null&&bc$1(rt),nt.callbackNode=null,nt.callbackPriority=0;else if(tt=st&-st,nt.callbackPriority!==tt){if(rt!=null&&bc$1(rt),tt===1)nt.tag===0?ig(Ek.bind(null,nt)):hg(Ek.bind(null,nt)),Jf(function(){!(K$2&6)&&jg()}),rt=null;else{switch(Dc$1(st)){case 1:rt=fc;break;case 4:rt=gc$1;break;case 16:rt=hc$1;break;case 536870912:rt=jc;break;default:rt=hc$1}rt=Fk(rt,Gk.bind(null,nt))}nt.callbackPriority=tt,nt.callbackNode=rt}}function Gk(nt,tt){if(Ak=-1,Bk=0,K$2&6)throw Error(p$5(327));var rt=nt.callbackNode;if(Hk()&&nt.callbackNode!==rt)return null;var st=uc(nt,nt===Q$2?Z$1:0);if(st===0)return null;if(st&30||st&nt.expiredLanes||tt)tt=Ik(nt,st);else{tt=st;var at=K$2;K$2|=2;var lt=Jk();(Q$2!==nt||Z$1!==tt)&&(uk=null,Gj=B$2()+500,Kk(nt,tt));do try{Lk();break}catch(yt){Mk(nt,yt)}while(!0);$g(),mk.current=lt,K$2=at,Y$1!==null?tt=0:(Q$2=null,Z$1=0,tt=T$2)}if(tt!==0){if(tt===2&&(at=xc(nt),at!==0&&(st=at,tt=Nk(nt,at))),tt===1)throw rt=pk,Kk(nt,0),Ck(nt,st),Dk(nt,B$2()),rt;if(tt===6)Ck(nt,st);else{if(at=nt.current.alternate,!(st&30)&&!Ok(at)&&(tt=Ik(nt,st),tt===2&&(lt=xc(nt),lt!==0&&(st=lt,tt=Nk(nt,lt))),tt===1))throw rt=pk,Kk(nt,0),Ck(nt,st),Dk(nt,B$2()),rt;switch(nt.finishedWork=at,nt.finishedLanes=st,tt){case 0:case 1:throw Error(p$5(345));case 2:Pk(nt,tk,uk);break;case 3:if(Ck(nt,st),(st&130023424)===st&&(tt=fk+500-B$2(),10<tt)){if(uc(nt,0)!==0)break;if(at=nt.suspendedLanes,(at&st)!==st){R$1(),nt.pingedLanes|=nt.suspendedLanes&at;break}nt.timeoutHandle=Ff(Pk.bind(null,nt,tk,uk),tt);break}Pk(nt,tk,uk);break;case 4:if(Ck(nt,st),(st&4194240)===st)break;for(tt=nt.eventTimes,at=-1;0<st;){var dt=31-oc$1(st);lt=1<<dt,dt=tt[dt],dt>at&&(at=dt),st&=~lt}if(st=at,st=B$2()-st,st=(120>st?120:480>st?480:1080>st?1080:1920>st?1920:3e3>st?3e3:4320>st?4320:1960*lk(st/1960))-st,10<st){nt.timeoutHandle=Ff(Pk.bind(null,nt,tk,uk),st);break}Pk(nt,tk,uk);break;case 5:Pk(nt,tk,uk);break;default:throw Error(p$5(329))}}}return Dk(nt,B$2()),nt.callbackNode===rt?Gk.bind(null,nt):null}function Nk(nt,tt){var rt=sk;return nt.current.memoizedState.isDehydrated&&(Kk(nt,tt).flags|=256),nt=Ik(nt,tt),nt!==2&&(tt=tk,tk=rt,tt!==null&&Fj(tt)),nt}function Fj(nt){tk===null?tk=nt:tk.push.apply(tk,nt)}function Ok(nt){for(var tt=nt;;){if(tt.flags&16384){var rt=tt.updateQueue;if(rt!==null&&(rt=rt.stores,rt!==null))for(var st=0;st<rt.length;st++){var at=rt[st],lt=at.getSnapshot;at=at.value;try{if(!He$2(lt(),at))return!1}catch{return!1}}}if(rt=tt.child,tt.subtreeFlags&16384&&rt!==null)rt.return=tt,tt=rt;else{if(tt===nt)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===nt)return!0;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}}return!0}function Ck(nt,tt){for(tt&=~rk,tt&=~qk,nt.suspendedLanes|=tt,nt.pingedLanes&=~tt,nt=nt.expirationTimes;0<tt;){var rt=31-oc$1(tt),st=1<<rt;nt[rt]=-1,tt&=~st}}function Ek(nt){if(K$2&6)throw Error(p$5(327));Hk();var tt=uc(nt,0);if(!(tt&1))return Dk(nt,B$2()),null;var rt=Ik(nt,tt);if(nt.tag!==0&&rt===2){var st=xc(nt);st!==0&&(tt=st,rt=Nk(nt,st))}if(rt===1)throw rt=pk,Kk(nt,0),Ck(nt,tt),Dk(nt,B$2()),rt;if(rt===6)throw Error(p$5(345));return nt.finishedWork=nt.current.alternate,nt.finishedLanes=tt,Pk(nt,tk,uk),Dk(nt,B$2()),null}function Qk(nt,tt){var rt=K$2;K$2|=1;try{return nt(tt)}finally{K$2=rt,K$2===0&&(Gj=B$2()+500,fg&&jg())}}function Rk(nt){wk!==null&&wk.tag===0&&!(K$2&6)&&Hk();var tt=K$2;K$2|=1;var rt=ok.transition,st=C$2;try{if(ok.transition=null,C$2=1,nt)return nt()}finally{C$2=st,ok.transition=rt,K$2=tt,!(K$2&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(nt,tt){nt.finishedWork=null,nt.finishedLanes=0;var rt=nt.timeoutHandle;if(rt!==-1&&(nt.timeoutHandle=-1,Gf(rt)),Y$1!==null)for(rt=Y$1.return;rt!==null;){var st=rt;switch(wg(st),st.tag){case 1:st=st.type.childContextTypes,st!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$1),Eh();break;case 5:Bh(st);break;case 4:zh();break;case 13:E$2(L$1);break;case 19:E$2(L$1);break;case 10:ah(st.type._context);break;case 22:case 23:Hj()}rt=rt.return}if(Q$2=nt,Y$1=nt=Pg(nt.current,null),Z$1=fj=tt,T$2=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(tt=0;tt<fh.length;tt++)if(rt=fh[tt],st=rt.interleaved,st!==null){rt.interleaved=null;var at=st.next,lt=rt.pending;if(lt!==null){var dt=lt.next;lt.next=at,st.next=dt}rt.pending=st}fh=null}return nt}function Mk(nt,tt){do{var rt=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var st=M$1.memoizedState;st!==null;){var at=st.queue;at!==null&&(at.pending=null),st=st.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,rt===null||rt.return===null){T$2=1,pk=tt,Y$1=null;break}e:{var lt=nt,dt=rt.return,yt=rt,vt=tt;if(tt=Z$1,yt.flags|=32768,vt!==null&&typeof vt=="object"&&typeof vt.then=="function"){var _t=vt,bt=yt,Mt=bt.tag;if(!(bt.mode&1)&&(Mt===0||Mt===11||Mt===15)){var Ct=bt.alternate;Ct?(bt.updateQueue=Ct.updateQueue,bt.memoizedState=Ct.memoizedState,bt.lanes=Ct.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var Tt=Ui(dt);if(Tt!==null){Tt.flags&=-257,Vi(Tt,dt,yt,lt,tt),Tt.mode&1&&Si$1(lt,_t,tt),tt=Tt,vt=_t;var $t=tt.updateQueue;if($t===null){var Rt=new Set;Rt.add(vt),tt.updateQueue=Rt}else $t.add(vt);break e}else{if(!(tt&1)){Si$1(lt,_t,tt),tj();break e}vt=Error(p$5(426))}}else if(I$1&&yt.mode&1){var Et=Ui(dt);if(Et!==null){!(Et.flags&65536)&&(Et.flags|=256),Vi(Et,dt,yt,lt,tt),Jg(Ji(vt,yt));break e}}lt=vt=Ji(vt,yt),T$2!==4&&(T$2=2),sk===null?sk=[lt]:sk.push(lt),lt=dt;do{switch(lt.tag){case 3:lt.flags|=65536,tt&=-tt,lt.lanes|=tt;var wt=Ni$1(lt,vt,tt);ph(lt,wt);break e;case 1:yt=vt;var Pt=lt.type,Ft=lt.stateNode;if(!(lt.flags&128)&&(typeof Pt.getDerivedStateFromError=="function"||Ft!==null&&typeof Ft.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(Ft)))){lt.flags|=65536,tt&=-tt,lt.lanes|=tt;var Nt=Qi(lt,yt,tt);ph(lt,Nt);break e}}lt=lt.return}while(lt!==null)}Sk(rt)}catch(Ot){tt=Ot,Y$1===rt&&rt!==null&&(Y$1=rt=rt.return);continue}break}while(!0)}function Jk(){var nt=mk.current;return mk.current=Rh,nt===null?Rh:nt}function tj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),Q$2===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$2,Z$1)}function Ik(nt,tt){var rt=K$2;K$2|=2;var st=Jk();(Q$2!==nt||Z$1!==tt)&&(uk=null,Kk(nt,tt));do try{Tk();break}catch(at){Mk(nt,at)}while(!0);if($g(),K$2=rt,mk.current=st,Y$1!==null)throw Error(p$5(261));return Q$2=null,Z$1=0,T$2}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc$1();)Uk(Y$1)}function Uk(nt){var tt=Vk(nt.alternate,nt,fj);nt.memoizedProps=nt.pendingProps,tt===null?Sk(nt):Y$1=tt,nk.current=null}function Sk(nt){var tt=nt;do{var rt=tt.alternate;if(nt=tt.return,tt.flags&32768){if(rt=Ij(rt,tt),rt!==null){rt.flags&=32767,Y$1=rt;return}if(nt!==null)nt.flags|=32768,nt.subtreeFlags=0,nt.deletions=null;else{T$2=6,Y$1=null;return}}else if(rt=Ej(rt,tt,fj),rt!==null){Y$1=rt;return}if(tt=tt.sibling,tt!==null){Y$1=tt;return}Y$1=tt=nt}while(tt!==null);T$2===0&&(T$2=5)}function Pk(nt,tt,rt){var st=C$2,at=ok.transition;try{ok.transition=null,C$2=1,Wk(nt,tt,rt,st)}finally{ok.transition=at,C$2=st}return null}function Wk(nt,tt,rt,st){do Hk();while(wk!==null);if(K$2&6)throw Error(p$5(327));rt=nt.finishedWork;var at=nt.finishedLanes;if(rt===null)return null;if(nt.finishedWork=null,nt.finishedLanes=0,rt===nt.current)throw Error(p$5(177));nt.callbackNode=null,nt.callbackPriority=0;var lt=rt.lanes|rt.childLanes;if(Bc$1(nt,lt),nt===Q$2&&(Y$1=Q$2=null,Z$1=0),!(rt.subtreeFlags&2064)&&!(rt.flags&2064)||vk||(vk=!0,Fk(hc$1,function(){return Hk(),null})),lt=(rt.flags&15990)!==0,rt.subtreeFlags&15990||lt){lt=ok.transition,ok.transition=null;var dt=C$2;C$2=1;var yt=K$2;K$2|=4,nk.current=null,Oj(nt,rt),dk(rt,nt),Oe$1(Df),dd=!!Cf,Df=Cf=null,nt.current=rt,hk(rt),dc$1(),K$2=yt,C$2=dt,ok.transition=lt}else nt.current=rt;if(vk&&(vk=!1,wk=nt,xk=at),lt=nt.pendingLanes,lt===0&&(Ri$1=null),mc(rt.stateNode),Dk(nt,B$2()),tt!==null)for(st=nt.onRecoverableError,rt=0;rt<tt.length;rt++)at=tt[rt],st(at.value,{componentStack:at.stack,digest:at.digest});if(Oi$1)throw Oi$1=!1,nt=Pi$1,Pi$1=null,nt;return xk&1&&nt.tag!==0&&Hk(),lt=nt.pendingLanes,lt&1?nt===zk?yk++:(yk=0,zk=nt):yk=0,jg(),null}function Hk(){if(wk!==null){var nt=Dc$1(xk),tt=ok.transition,rt=C$2;try{if(ok.transition=null,C$2=16>nt?16:nt,wk===null)var st=!1;else{if(nt=wk,wk=null,xk=0,K$2&6)throw Error(p$5(331));var at=K$2;for(K$2|=4,V$1=nt.current;V$1!==null;){var lt=V$1,dt=lt.child;if(V$1.flags&16){var yt=lt.deletions;if(yt!==null){for(var vt=0;vt<yt.length;vt++){var _t=yt[vt];for(V$1=_t;V$1!==null;){var bt=V$1;switch(bt.tag){case 0:case 11:case 15:Pj(8,bt,lt)}var Mt=bt.child;if(Mt!==null)Mt.return=bt,V$1=Mt;else for(;V$1!==null;){bt=V$1;var Ct=bt.sibling,Tt=bt.return;if(Sj(bt),bt===_t){V$1=null;break}if(Ct!==null){Ct.return=Tt,V$1=Ct;break}V$1=Tt}}}var $t=lt.alternate;if($t!==null){var Rt=$t.child;if(Rt!==null){$t.child=null;do{var Et=Rt.sibling;Rt.sibling=null,Rt=Et}while(Rt!==null)}}V$1=lt}}if(lt.subtreeFlags&2064&&dt!==null)dt.return=lt,V$1=dt;else e:for(;V$1!==null;){if(lt=V$1,lt.flags&2048)switch(lt.tag){case 0:case 11:case 15:Pj(9,lt,lt.return)}var wt=lt.sibling;if(wt!==null){wt.return=lt.return,V$1=wt;break e}V$1=lt.return}}var Pt=nt.current;for(V$1=Pt;V$1!==null;){dt=V$1;var Ft=dt.child;if(dt.subtreeFlags&2064&&Ft!==null)Ft.return=dt,V$1=Ft;else e:for(dt=Pt;V$1!==null;){if(yt=V$1,yt.flags&2048)try{switch(yt.tag){case 0:case 11:case 15:Qj(9,yt)}}catch(Ot){W$1(yt,yt.return,Ot)}if(yt===dt){V$1=null;break e}var Nt=yt.sibling;if(Nt!==null){Nt.return=yt.return,V$1=Nt;break e}V$1=yt.return}}if(K$2=at,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc$1,nt)}catch{}st=!0}return st}finally{C$2=rt,ok.transition=tt}}return!1}function Xk(nt,tt,rt){tt=Ji(rt,tt),tt=Ni$1(nt,tt,1),nt=nh(nt,tt,1),tt=R$1(),nt!==null&&(Ac$1(nt,1,tt),Dk(nt,tt))}function W$1(nt,tt,rt){if(nt.tag===3)Xk(nt,nt,rt);else for(;tt!==null;){if(tt.tag===3){Xk(tt,nt,rt);break}else if(tt.tag===1){var st=tt.stateNode;if(typeof tt.type.getDerivedStateFromError=="function"||typeof st.componentDidCatch=="function"&&(Ri$1===null||!Ri$1.has(st))){nt=Ji(rt,nt),nt=Qi(tt,nt,1),tt=nh(tt,nt,1),nt=R$1(),tt!==null&&(Ac$1(tt,1,nt),Dk(tt,nt));break}}tt=tt.return}}function Ti$1(nt,tt,rt){var st=nt.pingCache;st!==null&&st.delete(tt),tt=R$1(),nt.pingedLanes|=nt.suspendedLanes&rt,Q$2===nt&&(Z$1&rt)===rt&&(T$2===4||T$2===3&&(Z$1&130023424)===Z$1&&500>B$2()-fk?Kk(nt,0):rk|=rt),Dk(nt,tt)}function Yk(nt,tt){tt===0&&(nt.mode&1?(tt=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):tt=1);var rt=R$1();nt=ih(nt,tt),nt!==null&&(Ac$1(nt,tt,rt),Dk(nt,rt))}function uj(nt){var tt=nt.memoizedState,rt=0;tt!==null&&(rt=tt.retryLane),Yk(nt,rt)}function bk(nt,tt){var rt=0;switch(nt.tag){case 13:var st=nt.stateNode,at=nt.memoizedState;at!==null&&(rt=at.retryLane);break;case 19:st=nt.stateNode;break;default:throw Error(p$5(314))}st!==null&&st.delete(tt),Yk(nt,rt)}var Vk;Vk=function(nt,tt,rt){if(nt!==null)if(nt.memoizedProps!==tt.pendingProps||Wf.current)dh=!0;else{if(!(nt.lanes&rt)&&!(tt.flags&128))return dh=!1,yj(nt,tt,rt);dh=!!(nt.flags&131072)}else dh=!1,I$1&&tt.flags&1048576&&ug(tt,ng,tt.index);switch(tt.lanes=0,tt.tag){case 2:var st=tt.type;ij(nt,tt),nt=tt.pendingProps;var at=Yf(tt,H$1.current);ch(tt,rt),at=Nh(null,tt,st,nt,at,rt);var lt=Sh();return tt.flags|=1,typeof at=="object"&&at!==null&&typeof at.render=="function"&&at.$$typeof===void 0?(tt.tag=1,tt.memoizedState=null,tt.updateQueue=null,Zf(st)?(lt=!0,cg(tt)):lt=!1,tt.memoizedState=at.state!==null&&at.state!==void 0?at.state:null,kh(tt),at.updater=Ei$1,tt.stateNode=at,at._reactInternals=tt,Ii$1(tt,st,nt,rt),tt=jj(null,tt,st,!0,lt,rt)):(tt.tag=0,I$1&&lt&&vg(tt),Xi(null,tt,at,rt),tt=tt.child),tt;case 16:st=tt.elementType;e:{switch(ij(nt,tt),nt=tt.pendingProps,at=st._init,st=at(st._payload),tt.type=st,at=tt.tag=Zk(st),nt=Ci$1(st,nt),at){case 0:tt=cj(null,tt,st,nt,rt);break e;case 1:tt=hj(null,tt,st,nt,rt);break e;case 11:tt=Yi(null,tt,st,nt,rt);break e;case 14:tt=$i$1(null,tt,st,Ci$1(st.type,nt),rt);break e}throw Error(p$5(306,st,""))}return tt;case 0:return st=tt.type,at=tt.pendingProps,at=tt.elementType===st?at:Ci$1(st,at),cj(nt,tt,st,at,rt);case 1:return st=tt.type,at=tt.pendingProps,at=tt.elementType===st?at:Ci$1(st,at),hj(nt,tt,st,at,rt);case 3:e:{if(kj(tt),nt===null)throw Error(p$5(387));st=tt.pendingProps,lt=tt.memoizedState,at=lt.element,lh(nt,tt),qh(tt,st,null,rt);var dt=tt.memoizedState;if(st=dt.element,lt.isDehydrated)if(lt={element:st,isDehydrated:!1,cache:dt.cache,pendingSuspenseBoundaries:dt.pendingSuspenseBoundaries,transitions:dt.transitions},tt.updateQueue.baseState=lt,tt.memoizedState=lt,tt.flags&256){at=Ji(Error(p$5(423)),tt),tt=lj(nt,tt,st,rt,at);break e}else if(st!==at){at=Ji(Error(p$5(424)),tt),tt=lj(nt,tt,st,rt,at);break e}else for(yg=Lf(tt.stateNode.containerInfo.firstChild),xg=tt,I$1=!0,zg=null,rt=Vg(tt,null,st,rt),tt.child=rt;rt;)rt.flags=rt.flags&-3|4096,rt=rt.sibling;else{if(Ig(),st===at){tt=Zi(nt,tt,rt);break e}Xi(nt,tt,st,rt)}tt=tt.child}return tt;case 5:return Ah(tt),nt===null&&Eg(tt),st=tt.type,at=tt.pendingProps,lt=nt!==null?nt.memoizedProps:null,dt=at.children,Ef(st,at)?dt=null:lt!==null&&Ef(st,lt)&&(tt.flags|=32),gj(nt,tt),Xi(nt,tt,dt,rt),tt.child;case 6:return nt===null&&Eg(tt),null;case 13:return oj(nt,tt,rt);case 4:return yh(tt,tt.stateNode.containerInfo),st=tt.pendingProps,nt===null?tt.child=Ug(tt,null,st,rt):Xi(nt,tt,st,rt),tt.child;case 11:return st=tt.type,at=tt.pendingProps,at=tt.elementType===st?at:Ci$1(st,at),Yi(nt,tt,st,at,rt);case 7:return Xi(nt,tt,tt.pendingProps,rt),tt.child;case 8:return Xi(nt,tt,tt.pendingProps.children,rt),tt.child;case 12:return Xi(nt,tt,tt.pendingProps.children,rt),tt.child;case 10:e:{if(st=tt.type._context,at=tt.pendingProps,lt=tt.memoizedProps,dt=at.value,G$1(Wg,st._currentValue),st._currentValue=dt,lt!==null)if(He$2(lt.value,dt)){if(lt.children===at.children&&!Wf.current){tt=Zi(nt,tt,rt);break e}}else for(lt=tt.child,lt!==null&&(lt.return=tt);lt!==null;){var yt=lt.dependencies;if(yt!==null){dt=lt.child;for(var vt=yt.firstContext;vt!==null;){if(vt.context===st){if(lt.tag===1){vt=mh(-1,rt&-rt),vt.tag=2;var _t=lt.updateQueue;if(_t!==null){_t=_t.shared;var bt=_t.pending;bt===null?vt.next=vt:(vt.next=bt.next,bt.next=vt),_t.pending=vt}}lt.lanes|=rt,vt=lt.alternate,vt!==null&&(vt.lanes|=rt),bh(lt.return,rt,tt),yt.lanes|=rt;break}vt=vt.next}}else if(lt.tag===10)dt=lt.type===tt.type?null:lt.child;else if(lt.tag===18){if(dt=lt.return,dt===null)throw Error(p$5(341));dt.lanes|=rt,yt=dt.alternate,yt!==null&&(yt.lanes|=rt),bh(dt,rt,tt),dt=lt.sibling}else dt=lt.child;if(dt!==null)dt.return=lt;else for(dt=lt;dt!==null;){if(dt===tt){dt=null;break}if(lt=dt.sibling,lt!==null){lt.return=dt.return,dt=lt;break}dt=dt.return}lt=dt}Xi(nt,tt,at.children,rt),tt=tt.child}return tt;case 9:return at=tt.type,st=tt.pendingProps.children,ch(tt,rt),at=eh(at),st=st(at),tt.flags|=1,Xi(nt,tt,st,rt),tt.child;case 14:return st=tt.type,at=Ci$1(st,tt.pendingProps),at=Ci$1(st.type,at),$i$1(nt,tt,st,at,rt);case 15:return bj(nt,tt,tt.type,tt.pendingProps,rt);case 17:return st=tt.type,at=tt.pendingProps,at=tt.elementType===st?at:Ci$1(st,at),ij(nt,tt),tt.tag=1,Zf(st)?(nt=!0,cg(tt)):nt=!1,ch(tt,rt),Gi$1(tt,st,at),Ii$1(tt,st,at,rt),jj(null,tt,st,!0,nt,rt);case 19:return xj(nt,tt,rt);case 22:return dj(nt,tt,rt)}throw Error(p$5(156,tt.tag))};function Fk(nt,tt){return ac(nt,tt)}function $k(nt,tt,rt,st){this.tag=nt,this.key=rt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=tt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=st,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(nt,tt,rt,st){return new $k(nt,tt,rt,st)}function aj(nt){return nt=nt.prototype,!(!nt||!nt.isReactComponent)}function Zk(nt){if(typeof nt=="function")return aj(nt)?1:0;if(nt!=null){if(nt=nt.$$typeof,nt===Da)return 11;if(nt===Ga)return 14}return 2}function Pg(nt,tt){var rt=nt.alternate;return rt===null?(rt=Bg(nt.tag,tt,nt.key,nt.mode),rt.elementType=nt.elementType,rt.type=nt.type,rt.stateNode=nt.stateNode,rt.alternate=nt,nt.alternate=rt):(rt.pendingProps=tt,rt.type=nt.type,rt.flags=0,rt.subtreeFlags=0,rt.deletions=null),rt.flags=nt.flags&14680064,rt.childLanes=nt.childLanes,rt.lanes=nt.lanes,rt.child=nt.child,rt.memoizedProps=nt.memoizedProps,rt.memoizedState=nt.memoizedState,rt.updateQueue=nt.updateQueue,tt=nt.dependencies,rt.dependencies=tt===null?null:{lanes:tt.lanes,firstContext:tt.firstContext},rt.sibling=nt.sibling,rt.index=nt.index,rt.ref=nt.ref,rt}function Rg(nt,tt,rt,st,at,lt){var dt=2;if(st=nt,typeof nt=="function")aj(nt)&&(dt=1);else if(typeof nt=="string")dt=5;else e:switch(nt){case ya$1:return Tg(rt.children,at,lt,tt);case za:dt=8,at|=8;break;case Aa:return nt=Bg(12,rt,tt,at|2),nt.elementType=Aa,nt.lanes=lt,nt;case Ea:return nt=Bg(13,rt,tt,at),nt.elementType=Ea,nt.lanes=lt,nt;case Fa:return nt=Bg(19,rt,tt,at),nt.elementType=Fa,nt.lanes=lt,nt;case Ia:return pj(rt,at,lt,tt);default:if(typeof nt=="object"&&nt!==null)switch(nt.$$typeof){case Ba:dt=10;break e;case Ca$1:dt=9;break e;case Da:dt=11;break e;case Ga:dt=14;break e;case Ha:dt=16,st=null;break e}throw Error(p$5(130,nt==null?nt:typeof nt,""))}return tt=Bg(dt,rt,tt,at),tt.elementType=nt,tt.type=st,tt.lanes=lt,tt}function Tg(nt,tt,rt,st){return nt=Bg(7,nt,st,tt),nt.lanes=rt,nt}function pj(nt,tt,rt,st){return nt=Bg(22,nt,st,tt),nt.elementType=Ia,nt.lanes=rt,nt.stateNode={isHidden:!1},nt}function Qg(nt,tt,rt){return nt=Bg(6,nt,null,tt),nt.lanes=rt,nt}function Sg(nt,tt,rt){return tt=Bg(4,nt.children!==null?nt.children:[],nt.key,tt),tt.lanes=rt,tt.stateNode={containerInfo:nt.containerInfo,pendingChildren:null,implementation:nt.implementation},tt}function al(nt,tt,rt,st,at){this.tag=tt,this.containerInfo=nt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=st,this.onRecoverableError=at,this.mutableSourceEagerHydrationData=null}function bl(nt,tt,rt,st,at,lt,dt,yt,vt){return nt=new al(nt,tt,rt,yt,vt),tt===1?(tt=1,lt===!0&&(tt|=8)):tt=0,lt=Bg(3,null,null,tt),nt.current=lt,lt.stateNode=nt,lt.memoizedState={element:st,isDehydrated:rt,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(lt),nt}function cl(nt,tt,rt){var st=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:st==null?null:""+st,children:nt,containerInfo:tt,implementation:rt}}function dl(nt){if(!nt)return Vf;nt=nt._reactInternals;e:{if(Vb(nt)!==nt||nt.tag!==1)throw Error(p$5(170));var tt=nt;do{switch(tt.tag){case 3:tt=tt.stateNode.context;break e;case 1:if(Zf(tt.type)){tt=tt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}tt=tt.return}while(tt!==null);throw Error(p$5(171))}if(nt.tag===1){var rt=nt.type;if(Zf(rt))return bg(nt,rt,tt)}return tt}function el(nt,tt,rt,st,at,lt,dt,yt,vt){return nt=bl(rt,st,!0,nt,at,lt,dt,yt,vt),nt.context=dl(null),rt=nt.current,st=R$1(),at=yi$1(rt),lt=mh(st,at),lt.callback=tt??null,nh(rt,lt,at),nt.current.lanes=at,Ac$1(nt,at,st),Dk(nt,st),nt}function fl(nt,tt,rt,st){var at=tt.current,lt=R$1(),dt=yi$1(at);return rt=dl(rt),tt.context===null?tt.context=rt:tt.pendingContext=rt,tt=mh(lt,dt),tt.payload={element:nt},st=st===void 0?null:st,st!==null&&(tt.callback=st),nt=nh(at,tt,dt),nt!==null&&(gi$1(nt,at,dt,lt),oh(nt,at,dt)),dt}function gl(nt){if(nt=nt.current,!nt.child)return null;switch(nt.child.tag){case 5:return nt.child.stateNode;default:return nt.child.stateNode}}function hl(nt,tt){if(nt=nt.memoizedState,nt!==null&&nt.dehydrated!==null){var rt=nt.retryLane;nt.retryLane=rt!==0&&rt<tt?rt:tt}}function il(nt,tt){hl(nt,tt),(nt=nt.alternate)&&hl(nt,tt)}var kl$1=typeof reportError=="function"?reportError:function(nt){console.error(nt)};function ll(nt){this._internalRoot=nt}ml.prototype.render=ll.prototype.render=function(nt){var tt=this._internalRoot;if(tt===null)throw Error(p$5(409));fl(nt,tt,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var nt=this._internalRoot;if(nt!==null){this._internalRoot=null;var tt=nt.containerInfo;Rk(function(){fl(null,nt,null,null)}),tt[uf]=null}};function ml(nt){this._internalRoot=nt}ml.prototype.unstable_scheduleHydration=function(nt){if(nt){var tt=Hc();nt={blockedOn:null,target:nt,priority:tt};for(var rt=0;rt<Qc.length&&tt!==0&&tt<Qc[rt].priority;rt++);Qc.splice(rt,0,nt),rt===0&&Vc$1(nt)}};function nl(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11)}function ol(nt){return!(!nt||nt.nodeType!==1&&nt.nodeType!==9&&nt.nodeType!==11&&(nt.nodeType!==8||nt.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(nt,tt,rt,st,at){if(at){if(typeof st=="function"){var lt=st;st=function(){var _t=gl(dt);lt.call(_t)}}var dt=el(tt,st,nt,0,null,!1,!1,"",pl);return nt._reactRootContainer=dt,nt[uf]=dt.current,sf(nt.nodeType===8?nt.parentNode:nt),Rk(),dt}for(;at=nt.lastChild;)nt.removeChild(at);if(typeof st=="function"){var yt=st;st=function(){var _t=gl(vt);yt.call(_t)}}var vt=bl(nt,0,!1,null,null,!1,!1,"",pl);return nt._reactRootContainer=vt,nt[uf]=vt.current,sf(nt.nodeType===8?nt.parentNode:nt),Rk(function(){fl(tt,vt,rt,st)}),vt}function rl(nt,tt,rt,st,at){var lt=rt._reactRootContainer;if(lt){var dt=lt;if(typeof at=="function"){var yt=at;at=function(){var vt=gl(dt);yt.call(vt)}}fl(tt,dt,nt,at)}else dt=ql(rt,tt,nt,at,st);return gl(dt)}Ec$1=function(nt){switch(nt.tag){case 3:var tt=nt.stateNode;if(tt.current.memoizedState.isDehydrated){var rt=tc(tt.pendingLanes);rt!==0&&(Cc(tt,rt|1),Dk(tt,B$2()),!(K$2&6)&&(Gj=B$2()+500,jg()))}break;case 13:Rk(function(){var st=ih(nt,1);if(st!==null){var at=R$1();gi$1(st,nt,1,at)}}),il(nt,1)}};Fc$1=function(nt){if(nt.tag===13){var tt=ih(nt,134217728);if(tt!==null){var rt=R$1();gi$1(tt,nt,134217728,rt)}il(nt,134217728)}};Gc$1=function(nt){if(nt.tag===13){var tt=yi$1(nt),rt=ih(nt,tt);if(rt!==null){var st=R$1();gi$1(rt,nt,tt,st)}il(nt,tt)}};Hc=function(){return C$2};Ic$1=function(nt,tt){var rt=C$2;try{return C$2=nt,tt()}finally{C$2=rt}};yb=function(nt,tt,rt){switch(tt){case"input":if(bb(nt,rt),tt=rt.name,rt.type==="radio"&&tt!=null){for(rt=nt;rt.parentNode;)rt=rt.parentNode;for(rt=rt.querySelectorAll("input[name="+JSON.stringify(""+tt)+'][type="radio"]'),tt=0;tt<rt.length;tt++){var st=rt[tt];if(st!==nt&&st.form===nt.form){var at=Db(st);if(!at)throw Error(p$5(90));Wa(st),bb(st,at)}}}break;case"textarea":ib(nt,rt);break;case"select":tt=rt.value,tt!=null&&fb(nt,!!rt.multiple,tt,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(nt){return nt=Zb(nt),nt===null?null:nt.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc$1=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(nt,tt){var rt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(tt))throw Error(p$5(200));return cl(nt,tt,null,rt)};reactDom_production_min.createRoot=function(nt,tt){if(!nl(nt))throw Error(p$5(299));var rt=!1,st="",at=kl$1;return tt!=null&&(tt.unstable_strictMode===!0&&(rt=!0),tt.identifierPrefix!==void 0&&(st=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(at=tt.onRecoverableError)),tt=bl(nt,1,!1,null,null,rt,!1,st,at),nt[uf]=tt.current,sf(nt.nodeType===8?nt.parentNode:nt),new ll(tt)};reactDom_production_min.findDOMNode=function(nt){if(nt==null)return null;if(nt.nodeType===1)return nt;var tt=nt._reactInternals;if(tt===void 0)throw typeof nt.render=="function"?Error(p$5(188)):(nt=Object.keys(nt).join(","),Error(p$5(268,nt)));return nt=Zb(tt),nt=nt===null?null:nt.stateNode,nt};reactDom_production_min.flushSync=function(nt){return Rk(nt)};reactDom_production_min.hydrate=function(nt,tt,rt){if(!ol(tt))throw Error(p$5(200));return rl(null,nt,tt,!0,rt)};reactDom_production_min.hydrateRoot=function(nt,tt,rt){if(!nl(nt))throw Error(p$5(405));var st=rt!=null&&rt.hydratedSources||null,at=!1,lt="",dt=kl$1;if(rt!=null&&(rt.unstable_strictMode===!0&&(at=!0),rt.identifierPrefix!==void 0&&(lt=rt.identifierPrefix),rt.onRecoverableError!==void 0&&(dt=rt.onRecoverableError)),tt=el(tt,null,nt,1,rt??null,at,!1,lt,dt),nt[uf]=tt.current,sf(nt),st)for(nt=0;nt<st.length;nt++)rt=st[nt],at=rt._getVersion,at=at(rt._source),tt.mutableSourceEagerHydrationData==null?tt.mutableSourceEagerHydrationData=[rt,at]:tt.mutableSourceEagerHydrationData.push(rt,at);return new ml(tt)};reactDom_production_min.render=function(nt,tt,rt){if(!ol(tt))throw Error(p$5(200));return rl(null,nt,tt,!1,rt)};reactDom_production_min.unmountComponentAtNode=function(nt){if(!ol(nt))throw Error(p$5(40));return nt._reactRootContainer?(Rk(function(){rl(null,null,nt,!1,function(){nt._reactRootContainer=null,nt[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(nt,tt,rt,st){if(!ol(rt))throw Error(p$5(200));if(nt==null||nt._reactInternals===void 0)throw Error(p$5(38));return rl(nt,tt,rt,!1,st)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(nt){console.error(nt)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot$1,m$4=reactDomExports;createRoot$1=m$4.createRoot,m$4.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$l.apply(this,arguments)}var Action;(function(nt){nt.Pop="POP",nt.Push="PUSH",nt.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(nt){nt===void 0&&(nt={});function tt(st,at){let{pathname:lt,search:dt,hash:yt}=st.location;return createLocation("",{pathname:lt,search:dt,hash:yt},at.state&&at.state.usr||null,at.state&&at.state.key||"default")}function rt(st,at){return typeof at=="string"?at:createPath(at)}return getUrlBasedHistory(tt,rt,null,nt)}function invariant(nt,tt){if(nt===!1||nt===null||typeof nt>"u")throw new Error(tt)}function warning(nt,tt){if(!nt){typeof console<"u"&&console.warn(tt);try{throw new Error(tt)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(nt,tt){return{usr:nt.state,key:nt.key,idx:tt}}function createLocation(nt,tt,rt,st){return rt===void 0&&(rt=null),_extends$l({pathname:typeof nt=="string"?nt:nt.pathname,search:"",hash:""},typeof tt=="string"?parsePath(tt):tt,{state:rt,key:tt&&tt.key||st||createKey()})}function createPath(nt){let{pathname:tt="/",search:rt="",hash:st=""}=nt;return rt&&rt!=="?"&&(tt+=rt.charAt(0)==="?"?rt:"?"+rt),st&&st!=="#"&&(tt+=st.charAt(0)==="#"?st:"#"+st),tt}function parsePath(nt){let tt={};if(nt){let rt=nt.indexOf("#");rt>=0&&(tt.hash=nt.substr(rt),nt=nt.substr(0,rt));let st=nt.indexOf("?");st>=0&&(tt.search=nt.substr(st),nt=nt.substr(0,st)),nt&&(tt.pathname=nt)}return tt}function getUrlBasedHistory(nt,tt,rt,st){st===void 0&&(st={});let{window:at=document.defaultView,v5Compat:lt=!1}=st,dt=at.history,yt=Action.Pop,vt=null,_t=bt();_t==null&&(_t=0,dt.replaceState(_extends$l({},dt.state,{idx:_t}),""));function bt(){return(dt.state||{idx:null}).idx}function Mt(){yt=Action.Pop;let Et=bt(),wt=Et==null?null:Et-_t;_t=Et,vt&&vt({action:yt,location:Rt.location,delta:wt})}function Ct(Et,wt){yt=Action.Push;let Pt=createLocation(Rt.location,Et,wt);_t=bt()+1;let Ft=getHistoryState(Pt,_t),Nt=Rt.createHref(Pt);try{dt.pushState(Ft,"",Nt)}catch(Ot){if(Ot instanceof DOMException&&Ot.name==="DataCloneError")throw Ot;at.location.assign(Nt)}lt&&vt&&vt({action:yt,location:Rt.location,delta:1})}function Tt(Et,wt){yt=Action.Replace;let Pt=createLocation(Rt.location,Et,wt);_t=bt();let Ft=getHistoryState(Pt,_t),Nt=Rt.createHref(Pt);dt.replaceState(Ft,"",Nt),lt&&vt&&vt({action:yt,location:Rt.location,delta:0})}function $t(Et){let wt=at.location.origin!=="null"?at.location.origin:at.location.href,Pt=typeof Et=="string"?Et:createPath(Et);return Pt=Pt.replace(/ $/,"%20"),invariant(wt,"No window.location.(origin|href) available to create URL for href: "+Pt),new URL(Pt,wt)}let Rt={get action(){return yt},get location(){return nt(at,dt)},listen(Et){if(vt)throw new Error("A history only accepts one active listener");return at.addEventListener(PopStateEventType,Mt),vt=Et,()=>{at.removeEventListener(PopStateEventType,Mt),vt=null}},createHref(Et){return tt(at,Et)},createURL:$t,encodeLocation(Et){let wt=$t(Et);return{pathname:wt.pathname,search:wt.search,hash:wt.hash}},push:Ct,replace:Tt,go(Et){return dt.go(Et)}};return Rt}var ResultType;(function(nt){nt.data="data",nt.deferred="deferred",nt.redirect="redirect",nt.error="error"})(ResultType||(ResultType={}));function matchRoutes(nt,tt,rt){return rt===void 0&&(rt="/"),matchRoutesImpl(nt,tt,rt)}function matchRoutesImpl(nt,tt,rt,st){let at=typeof tt=="string"?parsePath(tt):tt,lt=stripBasename(at.pathname||"/",rt);if(lt==null)return null;let dt=flattenRoutes(nt);rankRouteBranches(dt);let yt=null;for(let vt=0;yt==null&&vt<dt.length;++vt){let _t=decodePath(lt);yt=matchRouteBranch(dt[vt],_t)}return yt}function flattenRoutes(nt,tt,rt,st){tt===void 0&&(tt=[]),rt===void 0&&(rt=[]),st===void 0&&(st="");let at=(lt,dt,yt)=>{let vt={relativePath:yt===void 0?lt.path||"":yt,caseSensitive:lt.caseSensitive===!0,childrenIndex:dt,route:lt};vt.relativePath.startsWith("/")&&(invariant(vt.relativePath.startsWith(st),'Absolute route path "'+vt.relativePath+'" nested under path '+('"'+st+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),vt.relativePath=vt.relativePath.slice(st.length));let _t=joinPaths([st,vt.relativePath]),bt=rt.concat(vt);lt.children&&lt.children.length>0&&(invariant(lt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+_t+'".')),flattenRoutes(lt.children,tt,bt,_t)),!(lt.path==null&&!lt.index)&&tt.push({path:_t,score:computeScore(_t,lt.index),routesMeta:bt})};return nt.forEach((lt,dt)=>{var yt;if(lt.path===""||!((yt=lt.path)!=null&&yt.includes("?")))at(lt,dt);else for(let vt of explodeOptionalSegments(lt.path))at(lt,dt,vt)}),tt}function explodeOptionalSegments(nt){let tt=nt.split("/");if(tt.length===0)return[];let[rt,...st]=tt,at=rt.endsWith("?"),lt=rt.replace(/\?$/,"");if(st.length===0)return at?[lt,""]:[lt];let dt=explodeOptionalSegments(st.join("/")),yt=[];return yt.push(...dt.map(vt=>vt===""?lt:[lt,vt].join("/"))),at&&yt.push(...dt),yt.map(vt=>nt.startsWith("/")&&vt===""?"/":vt)}function rankRouteBranches(nt){nt.sort((tt,rt)=>tt.score!==rt.score?rt.score-tt.score:compareIndexes(tt.routesMeta.map(st=>st.childrenIndex),rt.routesMeta.map(st=>st.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=nt=>nt==="*";function computeScore(nt,tt){let rt=nt.split("/"),st=rt.length;return rt.some(isSplat)&&(st+=splatPenalty),tt&&(st+=indexRouteValue),rt.filter(at=>!isSplat(at)).reduce((at,lt)=>at+(paramRe.test(lt)?dynamicSegmentValue:lt===""?emptySegmentValue:staticSegmentValue),st)}function compareIndexes(nt,tt){return nt.length===tt.length&&nt.slice(0,-1).every((st,at)=>st===tt[at])?nt[nt.length-1]-tt[tt.length-1]:0}function matchRouteBranch(nt,tt,rt){let{routesMeta:st}=nt,at={},lt="/",dt=[];for(let yt=0;yt<st.length;++yt){let vt=st[yt],_t=yt===st.length-1,bt=lt==="/"?tt:tt.slice(lt.length)||"/",Mt=matchPath({path:vt.relativePath,caseSensitive:vt.caseSensitive,end:_t},bt),Ct=vt.route;if(!Mt)return null;Object.assign(at,Mt.params),dt.push({params:at,pathname:joinPaths([lt,Mt.pathname]),pathnameBase:normalizePathname(joinPaths([lt,Mt.pathnameBase])),route:Ct}),Mt.pathnameBase!=="/"&&(lt=joinPaths([lt,Mt.pathnameBase]))}return dt}function matchPath(nt,tt){typeof nt=="string"&&(nt={path:nt,caseSensitive:!1,end:!0});let[rt,st]=compilePath(nt.path,nt.caseSensitive,nt.end),at=tt.match(rt);if(!at)return null;let lt=at[0],dt=lt.replace(/(.)\/+$/,"$1"),yt=at.slice(1);return{params:st.reduce((_t,bt,Mt)=>{let{paramName:Ct,isOptional:Tt}=bt;if(Ct==="*"){let Rt=yt[Mt]||"";dt=lt.slice(0,lt.length-Rt.length).replace(/(.)\/+$/,"$1")}const $t=yt[Mt];return Tt&&!$t?_t[Ct]=void 0:_t[Ct]=($t||"").replace(/%2F/g,"/"),_t},{}),pathname:lt,pathnameBase:dt,pattern:nt}}function compilePath(nt,tt,rt){tt===void 0&&(tt=!1),rt===void 0&&(rt=!0),warning(nt==="*"||!nt.endsWith("*")||nt.endsWith("/*"),'Route path "'+nt+'" will be treated as if it were '+('"'+nt.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+nt.replace(/\*$/,"/*")+'".'));let st=[],at="^"+nt.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(dt,yt,vt)=>(st.push({paramName:yt,isOptional:vt!=null}),vt?"/?([^\\/]+)?":"/([^\\/]+)"));return nt.endsWith("*")?(st.push({paramName:"*"}),at+=nt==="*"||nt==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):rt?at+="\\/*$":nt!==""&&nt!=="/"&&(at+="(?:(?=\\/|$))"),[new RegExp(at,tt?void 0:"i"),st]}function decodePath(nt){try{return nt.split("/").map(tt=>decodeURIComponent(tt).replace(/\//g,"%2F")).join("/")}catch(tt){return warning(!1,'The URL path "'+nt+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+tt+").")),nt}}function stripBasename(nt,tt){if(tt==="/")return nt;if(!nt.toLowerCase().startsWith(tt.toLowerCase()))return null;let rt=tt.endsWith("/")?tt.length-1:tt.length,st=nt.charAt(rt);return st&&st!=="/"?null:nt.slice(rt)||"/"}function resolvePath(nt,tt){tt===void 0&&(tt="/");let{pathname:rt,search:st="",hash:at=""}=typeof nt=="string"?parsePath(nt):nt;return{pathname:rt?rt.startsWith("/")?rt:resolvePathname(rt,tt):tt,search:normalizeSearch(st),hash:normalizeHash(at)}}function resolvePathname(nt,tt){let rt=tt.replace(/\/+$/,"").split("/");return nt.split("/").forEach(at=>{at===".."?rt.length>1&&rt.pop():at!=="."&&rt.push(at)}),rt.length>1?rt.join("/"):"/"}function getInvalidPathError(nt,tt,rt,st){return"Cannot include a '"+nt+"' character in a manually specified "+("`to."+tt+"` field ["+JSON.stringify(st)+"].  Please separate it out to the ")+("`to."+rt+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(nt){return nt.filter((tt,rt)=>rt===0||tt.route.path&&tt.route.path.length>0)}function getResolveToMatches(nt,tt){let rt=getPathContributingMatches(nt);return tt?rt.map((st,at)=>at===rt.length-1?st.pathname:st.pathnameBase):rt.map(st=>st.pathnameBase)}function resolveTo(nt,tt,rt,st){st===void 0&&(st=!1);let at;typeof nt=="string"?at=parsePath(nt):(at=_extends$l({},nt),invariant(!at.pathname||!at.pathname.includes("?"),getInvalidPathError("?","pathname","search",at)),invariant(!at.pathname||!at.pathname.includes("#"),getInvalidPathError("#","pathname","hash",at)),invariant(!at.search||!at.search.includes("#"),getInvalidPathError("#","search","hash",at)));let lt=nt===""||at.pathname==="",dt=lt?"/":at.pathname,yt;if(dt==null)yt=rt;else{let Mt=tt.length-1;if(!st&&dt.startsWith("..")){let Ct=dt.split("/");for(;Ct[0]==="..";)Ct.shift(),Mt-=1;at.pathname=Ct.join("/")}yt=Mt>=0?tt[Mt]:"/"}let vt=resolvePath(at,yt),_t=dt&&dt!=="/"&&dt.endsWith("/"),bt=(lt||dt===".")&&rt.endsWith("/");return!vt.pathname.endsWith("/")&&(_t||bt)&&(vt.pathname+="/"),vt}const joinPaths=nt=>nt.join("/").replace(/\/\/+/g,"/"),normalizePathname=nt=>nt.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=nt=>!nt||nt==="?"?"":nt.startsWith("?")?nt:"?"+nt,normalizeHash=nt=>!nt||nt==="#"?"":nt.startsWith("#")?nt:"#"+nt;function isRouteErrorResponse(nt){return nt!=null&&typeof nt.status=="number"&&typeof nt.statusText=="string"&&typeof nt.internal=="boolean"&&"data"in nt}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$k.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(nt,tt){let{relative:rt}=tt===void 0?{}:tt;useInRouterContext()||invariant(!1);let{basename:st,navigator:at}=reactExports.useContext(NavigationContext),{hash:lt,pathname:dt,search:yt}=useResolvedPath(nt,{relative:rt}),vt=dt;return st!=="/"&&(vt=dt==="/"?st:joinPaths([st,dt])),at.createHref({pathname:vt,search:yt,hash:lt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(nt){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(nt)}function useNavigate(){let{isDataRoute:nt}=reactExports.useContext(RouteContext);return nt?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let nt=reactExports.useContext(DataRouterContext),{basename:tt,future:rt,navigator:st}=reactExports.useContext(NavigationContext),{matches:at}=reactExports.useContext(RouteContext),{pathname:lt}=useLocation(),dt=JSON.stringify(getResolveToMatches(at,rt.v7_relativeSplatPath)),yt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{yt.current=!0}),reactExports.useCallback(function(_t,bt){if(bt===void 0&&(bt={}),!yt.current)return;if(typeof _t=="number"){st.go(_t);return}let Mt=resolveTo(_t,JSON.parse(dt),lt,bt.relative==="path");nt==null&&tt!=="/"&&(Mt.pathname=Mt.pathname==="/"?tt:joinPaths([tt,Mt.pathname])),(bt.replace?st.replace:st.push)(Mt,bt.state,bt)},[tt,st,dt,lt,nt])}function useResolvedPath(nt,tt){let{relative:rt}=tt===void 0?{}:tt,{future:st}=reactExports.useContext(NavigationContext),{matches:at}=reactExports.useContext(RouteContext),{pathname:lt}=useLocation(),dt=JSON.stringify(getResolveToMatches(at,st.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(nt,JSON.parse(dt),lt,rt==="path"),[nt,dt,lt,rt])}function useRoutes(nt,tt){return useRoutesImpl(nt,tt)}function useRoutesImpl(nt,tt,rt,st){useInRouterContext()||invariant(!1);let{navigator:at}=reactExports.useContext(NavigationContext),{matches:lt}=reactExports.useContext(RouteContext),dt=lt[lt.length-1],yt=dt?dt.params:{};dt&&dt.pathname;let vt=dt?dt.pathnameBase:"/";dt&&dt.route;let _t=useLocation(),bt;if(tt){var Mt;let Et=typeof tt=="string"?parsePath(tt):tt;vt==="/"||(Mt=Et.pathname)!=null&&Mt.startsWith(vt)||invariant(!1),bt=Et}else bt=_t;let Ct=bt.pathname||"/",Tt=Ct;if(vt!=="/"){let Et=vt.replace(/^\//,"").split("/");Tt="/"+Ct.replace(/^\//,"").split("/").slice(Et.length).join("/")}let $t=matchRoutes(nt,{pathname:Tt}),Rt=_renderMatches($t&&$t.map(Et=>Object.assign({},Et,{params:Object.assign({},yt,Et.params),pathname:joinPaths([vt,at.encodeLocation?at.encodeLocation(Et.pathname).pathname:Et.pathname]),pathnameBase:Et.pathnameBase==="/"?vt:joinPaths([vt,at.encodeLocation?at.encodeLocation(Et.pathnameBase).pathname:Et.pathnameBase])})),lt,rt,st);return tt&&Rt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$k({pathname:"/",search:"",hash:"",state:null,key:"default"},bt),navigationType:Action.Pop}},Rt):Rt}function DefaultErrorComponent(){let nt=useRouteError(),tt=isRouteErrorResponse(nt)?nt.status+" "+nt.statusText:nt instanceof Error?nt.message:JSON.stringify(nt),rt=nt instanceof Error?nt.stack:null,at={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},tt),rt?reactExports.createElement("pre",{style:at},rt):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(tt){super(tt),this.state={location:tt.location,revalidation:tt.revalidation,error:tt.error}}static getDerivedStateFromError(tt){return{error:tt}}static getDerivedStateFromProps(tt,rt){return rt.location!==tt.location||rt.revalidation!=="idle"&&tt.revalidation==="idle"?{error:tt.error,location:tt.location,revalidation:tt.revalidation}:{error:tt.error!==void 0?tt.error:rt.error,location:rt.location,revalidation:tt.revalidation||rt.revalidation}}componentDidCatch(tt,rt){console.error("React Router caught the following error during render",tt,rt)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(nt){let{routeContext:tt,match:rt,children:st}=nt,at=reactExports.useContext(DataRouterContext);return at&&at.static&&at.staticContext&&(rt.route.errorElement||rt.route.ErrorBoundary)&&(at.staticContext._deepestRenderedBoundaryId=rt.route.id),reactExports.createElement(RouteContext.Provider,{value:tt},st)}function _renderMatches(nt,tt,rt,st){var at;if(tt===void 0&&(tt=[]),rt===void 0&&(rt=null),st===void 0&&(st=null),nt==null){var lt;if(!rt)return null;if(rt.errors)nt=rt.matches;else if((lt=st)!=null&&lt.v7_partialHydration&&tt.length===0&&!rt.initialized&&rt.matches.length>0)nt=rt.matches;else return null}let dt=nt,yt=(at=rt)==null?void 0:at.errors;if(yt!=null){let bt=dt.findIndex(Mt=>Mt.route.id&&(yt==null?void 0:yt[Mt.route.id])!==void 0);bt>=0||invariant(!1),dt=dt.slice(0,Math.min(dt.length,bt+1))}let vt=!1,_t=-1;if(rt&&st&&st.v7_partialHydration)for(let bt=0;bt<dt.length;bt++){let Mt=dt[bt];if((Mt.route.HydrateFallback||Mt.route.hydrateFallbackElement)&&(_t=bt),Mt.route.id){let{loaderData:Ct,errors:Tt}=rt,$t=Mt.route.loader&&Ct[Mt.route.id]===void 0&&(!Tt||Tt[Mt.route.id]===void 0);if(Mt.route.lazy||$t){vt=!0,_t>=0?dt=dt.slice(0,_t+1):dt=[dt[0]];break}}}return dt.reduceRight((bt,Mt,Ct)=>{let Tt,$t=!1,Rt=null,Et=null;rt&&(Tt=yt&&Mt.route.id?yt[Mt.route.id]:void 0,Rt=Mt.route.errorElement||defaultErrorElement,vt&&(_t<0&&Ct===0?($t=!0,Et=null):_t===Ct&&($t=!0,Et=Mt.route.hydrateFallbackElement||null)));let wt=tt.concat(dt.slice(0,Ct+1)),Pt=()=>{let Ft;return Tt?Ft=Rt:$t?Ft=Et:Mt.route.Component?Ft=reactExports.createElement(Mt.route.Component,null):Mt.route.element?Ft=Mt.route.element:Ft=bt,reactExports.createElement(RenderedRoute,{match:Mt,routeContext:{outlet:bt,matches:wt,isDataRoute:rt!=null},children:Ft})};return rt&&(Mt.route.ErrorBoundary||Mt.route.errorElement||Ct===0)?reactExports.createElement(RenderErrorBoundary,{location:rt.location,revalidation:rt.revalidation,component:Rt,error:Tt,children:Pt(),routeContext:{outlet:null,matches:wt,isDataRoute:!0}}):Pt()},null)}var DataRouterHook$1=function(nt){return nt.UseBlocker="useBlocker",nt.UseRevalidator="useRevalidator",nt.UseNavigateStable="useNavigate",nt}(DataRouterHook$1||{}),DataRouterStateHook$1=function(nt){return nt.UseBlocker="useBlocker",nt.UseLoaderData="useLoaderData",nt.UseActionData="useActionData",nt.UseRouteError="useRouteError",nt.UseNavigation="useNavigation",nt.UseRouteLoaderData="useRouteLoaderData",nt.UseMatches="useMatches",nt.UseRevalidator="useRevalidator",nt.UseNavigateStable="useNavigate",nt.UseRouteId="useRouteId",nt}(DataRouterStateHook$1||{});function useDataRouterContext$1(nt){let tt=reactExports.useContext(DataRouterContext);return tt||invariant(!1),tt}function useDataRouterState(nt){let tt=reactExports.useContext(DataRouterStateContext);return tt||invariant(!1),tt}function useRouteContext(nt){let tt=reactExports.useContext(RouteContext);return tt||invariant(!1),tt}function useCurrentRouteId(nt){let tt=useRouteContext(),rt=tt.matches[tt.matches.length-1];return rt.route.id||invariant(!1),rt.route.id}function useRouteError(){var nt;let tt=reactExports.useContext(RouteErrorContext),rt=useDataRouterState(DataRouterStateHook$1.UseRouteError),st=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return tt!==void 0?tt:(nt=rt.errors)==null?void 0:nt[st]}function useNavigateStable(){let{router:nt}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),tt=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),rt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{rt.current=!0}),reactExports.useCallback(function(at,lt){lt===void 0&&(lt={}),rt.current&&(typeof at=="number"?nt.navigate(at):nt.navigate(at,_extends$k({fromRouteId:tt},lt)))},[nt,tt])}const alreadyWarned={};function warnOnce$1(nt,tt){alreadyWarned[tt]||(alreadyWarned[tt]=!0,console.warn(tt))}const logDeprecation=(nt,tt,rt)=>warnOnce$1(nt," React Router Future Flag Warning: "+tt+". "+("You can use the `"+nt+"` future flag to opt-in early. ")+("For more information, see "+rt+"."));function logV6DeprecationWarnings(nt,tt){(nt==null?void 0:nt.v7_startTransition)===void 0&&logDeprecation("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(nt==null?void 0:nt.v7_relativeSplatPath)===void 0&&logDeprecation("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Route(nt){invariant(!1)}function Router(nt){let{basename:tt="/",children:rt=null,location:st,navigationType:at=Action.Pop,navigator:lt,static:dt=!1,future:yt}=nt;useInRouterContext()&&invariant(!1);let vt=tt.replace(/^\/*/,"/"),_t=reactExports.useMemo(()=>({basename:vt,navigator:lt,static:dt,future:_extends$k({v7_relativeSplatPath:!1},yt)}),[vt,yt,lt,dt]);typeof st=="string"&&(st=parsePath(st));let{pathname:bt="/",search:Mt="",hash:Ct="",state:Tt=null,key:$t="default"}=st,Rt=reactExports.useMemo(()=>{let Et=stripBasename(bt,vt);return Et==null?null:{location:{pathname:Et,search:Mt,hash:Ct,state:Tt,key:$t},navigationType:at}},[vt,bt,Mt,Ct,Tt,$t,at]);return Rt==null?null:reactExports.createElement(NavigationContext.Provider,{value:_t},reactExports.createElement(LocationContext.Provider,{children:rt,value:Rt}))}function Routes(nt){let{children:tt,location:rt}=nt;return useRoutes(createRoutesFromChildren(tt),rt)}new Promise(()=>{});function createRoutesFromChildren(nt,tt){tt===void 0&&(tt=[]);let rt=[];return reactExports.Children.forEach(nt,(st,at)=>{if(!reactExports.isValidElement(st))return;let lt=[...tt,at];if(st.type===reactExports.Fragment){rt.push.apply(rt,createRoutesFromChildren(st.props.children,lt));return}st.type!==Route&&invariant(!1),!st.props.index||!st.props.children||invariant(!1);let dt={id:st.props.id||lt.join("-"),caseSensitive:st.props.caseSensitive,element:st.props.element,Component:st.props.Component,index:st.props.index,path:st.props.path,loader:st.props.loader,action:st.props.action,errorElement:st.props.errorElement,ErrorBoundary:st.props.ErrorBoundary,hasErrorBoundary:st.props.ErrorBoundary!=null||st.props.errorElement!=null,shouldRevalidate:st.props.shouldRevalidate,handle:st.props.handle,lazy:st.props.lazy};st.props.children&&(dt.children=createRoutesFromChildren(st.props.children,lt)),rt.push(dt)}),rt}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$j.apply(this,arguments)}function _objectWithoutPropertiesLoose$g(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function isModifiedEvent(nt){return!!(nt.metaKey||nt.altKey||nt.ctrlKey||nt.shiftKey)}function shouldProcessLinkClick(nt,tt){return nt.button===0&&(!tt||tt==="_self")&&!isModifiedEvent(nt)}const _excluded$f=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION];function BrowserRouter(nt){let{basename:tt,children:rt,future:st,window:at}=nt,lt=reactExports.useRef();lt.current==null&&(lt.current=createBrowserHistory({window:at,v5Compat:!0}));let dt=lt.current,[yt,vt]=reactExports.useState({action:dt.action,location:dt.location}),{v7_startTransition:_t}=st||{},bt=reactExports.useCallback(Mt=>{_t&&startTransitionImpl?startTransitionImpl(()=>vt(Mt)):vt(Mt)},[vt,_t]);return reactExports.useLayoutEffect(()=>dt.listen(bt),[dt,bt]),reactExports.useEffect(()=>logV6DeprecationWarnings(st),[st]),reactExports.createElement(Router,{basename:tt,children:rt,location:yt.location,navigationType:yt.action,navigator:dt,future:st})}const isBrowser$3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(tt,rt){let{onClick:st,relative:at,reloadDocument:lt,replace:dt,state:yt,target:vt,to:_t,preventScrollReset:bt,viewTransition:Mt}=tt,Ct=_objectWithoutPropertiesLoose$g(tt,_excluded$f),{basename:Tt}=reactExports.useContext(NavigationContext),$t,Rt=!1;if(typeof _t=="string"&&ABSOLUTE_URL_REGEX.test(_t)&&($t=_t,isBrowser$3))try{let Ft=new URL(window.location.href),Nt=_t.startsWith("//")?new URL(Ft.protocol+_t):new URL(_t),Ot=stripBasename(Nt.pathname,Tt);Nt.origin===Ft.origin&&Ot!=null?_t=Ot+Nt.search+Nt.hash:Rt=!0}catch{}let Et=useHref(_t,{relative:at}),wt=useLinkClickHandler(_t,{replace:dt,state:yt,target:vt,preventScrollReset:bt,relative:at,viewTransition:Mt});function Pt(Ft){st&&st(Ft),Ft.defaultPrevented||wt(Ft)}return reactExports.createElement("a",_extends$j({},Ct,{href:$t||Et,onClick:Rt||lt?st:Pt,ref:rt,target:vt}))}),NavLink=reactExports.forwardRef(function(tt,rt){let{"aria-current":st="page",caseSensitive:at=!1,className:lt="",end:dt=!1,style:yt,to:vt,viewTransition:_t,children:bt}=tt,Mt=_objectWithoutPropertiesLoose$g(tt,_excluded2),Ct=useResolvedPath(vt,{relative:Mt.relative}),Tt=useLocation(),$t=reactExports.useContext(DataRouterStateContext),{navigator:Rt,basename:Et}=reactExports.useContext(NavigationContext),wt=$t!=null&&useViewTransitionState(Ct)&&_t===!0,Pt=Rt.encodeLocation?Rt.encodeLocation(Ct).pathname:Ct.pathname,Ft=Tt.pathname,Nt=$t&&$t.navigation&&$t.navigation.location?$t.navigation.location.pathname:null;at||(Ft=Ft.toLowerCase(),Nt=Nt?Nt.toLowerCase():null,Pt=Pt.toLowerCase()),Nt&&Et&&(Nt=stripBasename(Nt,Et)||Nt);const Ot=Pt!=="/"&&Pt.endsWith("/")?Pt.length-1:Pt.length;let Bt=Ft===Pt||!dt&&Ft.startsWith(Pt)&&Ft.charAt(Ot)==="/",Xt=Nt!=null&&(Nt===Pt||!dt&&Nt.startsWith(Pt)&&Nt.charAt(Pt.length)==="/"),Zt={isActive:Bt,isPending:Xt,isTransitioning:wt},rn=Bt?st:void 0,Gt;typeof lt=="function"?Gt=lt(Zt):Gt=[lt,Bt?"active":null,Xt?"pending":null,wt?"transitioning":null].filter(Boolean).join(" ");let nn=typeof yt=="function"?yt(Zt):yt;return reactExports.createElement(Link,_extends$j({},Mt,{"aria-current":rn,className:Gt,ref:rt,style:nn,to:vt,viewTransition:_t}),typeof bt=="function"?bt(Zt):bt)});var DataRouterHook;(function(nt){nt.UseScrollRestoration="useScrollRestoration",nt.UseSubmit="useSubmit",nt.UseSubmitFetcher="useSubmitFetcher",nt.UseFetcher="useFetcher",nt.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(nt){nt.UseFetcher="useFetcher",nt.UseFetchers="useFetchers",nt.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(nt){let tt=reactExports.useContext(DataRouterContext);return tt||invariant(!1),tt}function useLinkClickHandler(nt,tt){let{target:rt,replace:st,state:at,preventScrollReset:lt,relative:dt,viewTransition:yt}=tt===void 0?{}:tt,vt=useNavigate(),_t=useLocation(),bt=useResolvedPath(nt,{relative:dt});return reactExports.useCallback(Mt=>{if(shouldProcessLinkClick(Mt,rt)){Mt.preventDefault();let Ct=st!==void 0?st:createPath(_t)===createPath(bt);vt(nt,{replace:Ct,state:at,preventScrollReset:lt,relative:dt,viewTransition:yt})}},[_t,vt,bt,st,at,rt,nt,lt,dt,yt])}function useViewTransitionState(nt,tt){tt===void 0&&(tt={});let rt=reactExports.useContext(ViewTransitionContext);rt==null&&invariant(!1);let{basename:st}=useDataRouterContext(DataRouterHook.useViewTransitionState),at=useResolvedPath(nt,{relative:tt.relative});if(!rt.isTransitioning)return!1;let lt=stripBasename(rt.currentLocation.pathname,st)||rt.currentLocation.pathname,dt=stripBasename(rt.nextLocation.pathname,st)||rt.nextLocation.pathname;return matchPath(at.pathname,dt)!=null||matchPath(at.pathname,lt)!=null}const common$2={black:"#000",white:"#fff"},red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function formatMuiErrorMessage(nt,...tt){const rt=new URL(`https://mui.com/production-error/?code=${nt}`);return tt.forEach(st=>rt.searchParams.append("args[]",st)),`Minified MUI error #${nt}; visit ${rt} for the full message.`}const THEME_ID="$$material";function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)({}).hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$i.apply(null,arguments)}function sheetForTag(nt){if(nt.sheet)return nt.sheet;for(var tt=0;tt<document.styleSheets.length;tt++)if(document.styleSheets[tt].ownerNode===nt)return document.styleSheets[tt]}function createStyleElement(nt){var tt=document.createElement("style");return tt.setAttribute("data-emotion",nt.key),nt.nonce!==void 0&&tt.setAttribute("nonce",nt.nonce),tt.appendChild(document.createTextNode("")),tt.setAttribute("data-s",""),tt}var StyleSheet=function(){function nt(rt){var st=this;this._insertTag=function(at){var lt;st.tags.length===0?st.insertionPoint?lt=st.insertionPoint.nextSibling:st.prepend?lt=st.container.firstChild:lt=st.before:lt=st.tags[st.tags.length-1].nextSibling,st.container.insertBefore(at,lt),st.tags.push(at)},this.isSpeedy=rt.speedy===void 0?!0:rt.speedy,this.tags=[],this.ctr=0,this.nonce=rt.nonce,this.key=rt.key,this.container=rt.container,this.prepend=rt.prepend,this.insertionPoint=rt.insertionPoint,this.before=null}var tt=nt.prototype;return tt.hydrate=function(st){st.forEach(this._insertTag)},tt.insert=function(st){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var at=this.tags[this.tags.length-1];if(this.isSpeedy){var lt=sheetForTag(at);try{lt.insertRule(st,lt.cssRules.length)}catch{}}else at.appendChild(document.createTextNode(st));this.ctr++},tt.flush=function(){this.tags.forEach(function(st){var at;return(at=st.parentNode)==null?void 0:at.removeChild(st)}),this.tags=[],this.ctr=0},nt}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(nt,tt){return charat(nt,0)^45?(((tt<<2^charat(nt,0))<<2^charat(nt,1))<<2^charat(nt,2))<<2^charat(nt,3):0}function trim$1(nt){return nt.trim()}function match$1(nt,tt){return(nt=tt.exec(nt))?nt[0]:nt}function replace(nt,tt,rt){return nt.replace(tt,rt)}function indexof(nt,tt){return nt.indexOf(tt)}function charat(nt,tt){return nt.charCodeAt(tt)|0}function substr(nt,tt,rt){return nt.slice(tt,rt)}function strlen(nt){return nt.length}function sizeof(nt){return nt.length}function append(nt,tt){return tt.push(nt),nt}function combine(nt,tt){return nt.map(tt).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(nt,tt,rt,st,at,lt,dt){return{value:nt,root:tt,parent:rt,type:st,props:at,children:lt,line,column,length:dt,return:""}}function copy$1(nt,tt){return assign(node("",null,null,"",null,null,0),nt,{length:-nt.length},tt)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(nt,tt){return substr(characters,nt,tt)}function token(nt){switch(nt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(nt){return line=column=1,length=strlen(characters=nt),position=0,[]}function dealloc(nt){return characters="",nt}function delimit(nt){return trim$1(slice(position-1,delimiter(nt===91?nt+2:nt===40?nt+1:nt)))}function whitespace(nt){for(;(character=peek())&&character<33;)next();return token(nt)>2||token(character)>3?"":" "}function escaping(nt,tt){for(;--tt&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(nt,caret()+(tt<6&&peek()==32&&next()==32))}function delimiter(nt){for(;next();)switch(character){case nt:return position;case 34:case 39:nt!==34&&nt!==39&&delimiter(character);break;case 40:nt===41&&delimiter(nt);break;case 92:next();break}return position}function commenter(nt,tt){for(;next()&&nt+character!==57;)if(nt+character===84&&peek()===47)break;return"/*"+slice(tt,position-1)+"*"+from(nt===47?nt:next())}function identifier(nt){for(;!token(peek());)next();return slice(nt,position)}function compile$4(nt){return dealloc(parse$1("",null,null,null,[""],nt=alloc(nt),0,[0],nt))}function parse$1(nt,tt,rt,st,at,lt,dt,yt,vt){for(var _t=0,bt=0,Mt=dt,Ct=0,Tt=0,$t=0,Rt=1,Et=1,wt=1,Pt=0,Ft="",Nt=at,Ot=lt,Bt=st,Xt=Ft;Et;)switch($t=Pt,Pt=next()){case 40:if($t!=108&&charat(Xt,Mt-1)==58){indexof(Xt+=replace(delimit(Pt),"&","&\f"),"&\f")!=-1&&(wt=-1);break}case 34:case 39:case 91:Xt+=delimit(Pt);break;case 9:case 10:case 13:case 32:Xt+=whitespace($t);break;case 92:Xt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),tt,rt),vt);break;default:Xt+="/"}break;case 123*Rt:yt[_t++]=strlen(Xt)*wt;case 125*Rt:case 59:case 0:switch(Pt){case 0:case 125:Et=0;case 59+bt:wt==-1&&(Xt=replace(Xt,/\f/g,"")),Tt>0&&strlen(Xt)-Mt&&append(Tt>32?declaration(Xt+";",st,rt,Mt-1):declaration(replace(Xt," ","")+";",st,rt,Mt-2),vt);break;case 59:Xt+=";";default:if(append(Bt=ruleset(Xt,tt,rt,_t,bt,at,yt,Ft,Nt=[],Ot=[],Mt),lt),Pt===123)if(bt===0)parse$1(Xt,tt,Bt,Bt,Nt,lt,Mt,yt,Ot);else switch(Ct===99&&charat(Xt,3)===110?100:Ct){case 100:case 108:case 109:case 115:parse$1(nt,Bt,Bt,st&&append(ruleset(nt,Bt,Bt,0,0,at,yt,Ft,at,Nt=[],Mt),Ot),at,Ot,Mt,yt,st?Nt:Ot);break;default:parse$1(Xt,Bt,Bt,Bt,[""],Ot,0,yt,Ot)}}_t=bt=Tt=0,Rt=wt=1,Ft=Xt="",Mt=dt;break;case 58:Mt=1+strlen(Xt),Tt=$t;default:if(Rt<1){if(Pt==123)--Rt;else if(Pt==125&&Rt++==0&&prev()==125)continue}switch(Xt+=from(Pt),Pt*Rt){case 38:wt=bt>0?1:(Xt+="\f",-1);break;case 44:yt[_t++]=(strlen(Xt)-1)*wt,wt=1;break;case 64:peek()===45&&(Xt+=delimit(next())),Ct=peek(),bt=Mt=strlen(Ft=Xt+=identifier(caret())),Pt++;break;case 45:$t===45&&strlen(Xt)==2&&(Rt=0)}}return lt}function ruleset(nt,tt,rt,st,at,lt,dt,yt,vt,_t,bt){for(var Mt=at-1,Ct=at===0?lt:[""],Tt=sizeof(Ct),$t=0,Rt=0,Et=0;$t<st;++$t)for(var wt=0,Pt=substr(nt,Mt+1,Mt=abs(Rt=dt[$t])),Ft=nt;wt<Tt;++wt)(Ft=trim$1(Rt>0?Ct[wt]+" "+Pt:replace(Pt,/&\f/g,Ct[wt])))&&(vt[Et++]=Ft);return node(nt,tt,rt,at===0?RULESET:yt,vt,_t,bt)}function comment(nt,tt,rt){return node(nt,tt,rt,COMMENT,from(char()),substr(nt,2,-2),0)}function declaration(nt,tt,rt,st){return node(nt,tt,rt,DECLARATION,substr(nt,0,st),substr(nt,st+1,-1),st)}function serialize$1(nt,tt){for(var rt="",st=sizeof(nt),at=0;at<st;at++)rt+=tt(nt[at],at,nt,tt)||"";return rt}function stringify(nt,tt,rt,st){switch(nt.type){case LAYER:if(nt.children.length)break;case IMPORT:case DECLARATION:return nt.return=nt.return||nt.value;case COMMENT:return"";case KEYFRAMES:return nt.return=nt.value+"{"+serialize$1(nt.children,st)+"}";case RULESET:nt.value=nt.props.join(",")}return strlen(rt=serialize$1(nt.children,st))?nt.return=nt.value+"{"+rt+"}":""}function middleware(nt){var tt=sizeof(nt);return function(rt,st,at,lt){for(var dt="",yt=0;yt<tt;yt++)dt+=nt[yt](rt,st,at,lt)||"";return dt}}function rulesheet(nt){return function(tt){tt.root||(tt=tt.return)&&nt(tt)}}function memoize$4(nt){var tt=Object.create(null);return function(rt){return tt[rt]===void 0&&(tt[rt]=nt(rt)),tt[rt]}}var identifierWithPointTracking=function(tt,rt,st){for(var at=0,lt=0;at=lt,lt=peek(),at===38&&lt===12&&(rt[st]=1),!token(lt);)next();return slice(tt,position)},toRules=function(tt,rt){var st=-1,at=44;do switch(token(at)){case 0:at===38&&peek()===12&&(rt[st]=1),tt[st]+=identifierWithPointTracking(position-1,rt,st);break;case 2:tt[st]+=delimit(at);break;case 4:if(at===44){tt[++st]=peek()===58?"&\f":"",rt[st]=tt[st].length;break}default:tt[st]+=from(at)}while(at=next());return tt},getRules$1=function(tt,rt){return dealloc(toRules(alloc(tt),rt))},fixedElements=new WeakMap,compat=function(tt){if(!(tt.type!=="rule"||!tt.parent||tt.length<1)){for(var rt=tt.value,st=tt.parent,at=tt.column===st.column&&tt.line===st.line;st.type!=="rule";)if(st=st.parent,!st)return;if(!(tt.props.length===1&&rt.charCodeAt(0)!==58&&!fixedElements.get(st))&&!at){fixedElements.set(tt,!0);for(var lt=[],dt=getRules$1(rt,lt),yt=st.props,vt=0,_t=0;vt<dt.length;vt++)for(var bt=0;bt<yt.length;bt++,_t++)tt.props[_t]=lt[vt]?dt[vt].replace(/&\f/g,yt[bt]):yt[bt]+" "+dt[vt]}}},removeLabel=function(tt){if(tt.type==="decl"){var rt=tt.value;rt.charCodeAt(0)===108&&rt.charCodeAt(2)===98&&(tt.return="",tt.value="")}};function prefix(nt,tt){switch(hash$2(nt,tt)){case 5103:return WEBKIT+"print-"+nt+nt;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+nt+nt;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+nt+MOZ+nt+MS+nt+nt;case 6828:case 4268:return WEBKIT+nt+MS+nt+nt;case 6165:return WEBKIT+nt+MS+"flex-"+nt+nt;case 5187:return WEBKIT+nt+replace(nt,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+nt;case 5443:return WEBKIT+nt+MS+"flex-item-"+replace(nt,/flex-|-self/,"")+nt;case 4675:return WEBKIT+nt+MS+"flex-line-pack"+replace(nt,/align-content|flex-|-self/,"")+nt;case 5548:return WEBKIT+nt+MS+replace(nt,"shrink","negative")+nt;case 5292:return WEBKIT+nt+MS+replace(nt,"basis","preferred-size")+nt;case 6060:return WEBKIT+"box-"+replace(nt,"-grow","")+WEBKIT+nt+MS+replace(nt,"grow","positive")+nt;case 4554:return WEBKIT+replace(nt,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+nt;case 6187:return replace(replace(replace(nt,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),nt,"")+nt;case 5495:case 3959:return replace(nt,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(nt,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+nt+nt;case 4095:case 3583:case 4068:case 2532:return replace(nt,/(.+)-inline(.+)/,WEBKIT+"$1$2")+nt;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(nt)-1-tt>6)switch(charat(nt,tt+1)){case 109:if(charat(nt,tt+4)!==45)break;case 102:return replace(nt,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(nt,tt+3)==108?"$3":"$2-$3"))+nt;case 115:return~indexof(nt,"stretch")?prefix(replace(nt,"stretch","fill-available"),tt)+nt:nt}break;case 4949:if(charat(nt,tt+1)!==115)break;case 6444:switch(charat(nt,strlen(nt)-3-(~indexof(nt,"!important")&&10))){case 107:return replace(nt,":",":"+WEBKIT)+nt;case 101:return replace(nt,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(nt,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+nt}break;case 5936:switch(charat(nt,tt+11)){case 114:return WEBKIT+nt+MS+replace(nt,/[svh]\w+-[tblr]{2}/,"tb")+nt;case 108:return WEBKIT+nt+MS+replace(nt,/[svh]\w+-[tblr]{2}/,"tb-rl")+nt;case 45:return WEBKIT+nt+MS+replace(nt,/[svh]\w+-[tblr]{2}/,"lr")+nt}return WEBKIT+nt+MS+nt+nt}return nt}var prefixer=function(tt,rt,st,at){if(tt.length>-1&&!tt.return)switch(tt.type){case DECLARATION:tt.return=prefix(tt.value,tt.length);break;case KEYFRAMES:return serialize$1([copy$1(tt,{value:replace(tt.value,"@","@"+WEBKIT)})],at);case RULESET:if(tt.length)return combine(tt.props,function(lt){switch(match$1(lt,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy$1(tt,{props:[replace(lt,/:(read-\w+)/,":"+MOZ+"$1")]})],at);case"::placeholder":return serialize$1([copy$1(tt,{props:[replace(lt,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy$1(tt,{props:[replace(lt,/:(plac\w+)/,":"+MOZ+"$1")]}),copy$1(tt,{props:[replace(lt,/:(plac\w+)/,MS+"input-$1")]})],at)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(tt){var rt=tt.key;if(rt==="css"){var st=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(st,function(Rt){var Et=Rt.getAttribute("data-emotion");Et.indexOf(" ")!==-1&&(document.head.appendChild(Rt),Rt.setAttribute("data-s",""))})}var at=tt.stylisPlugins||defaultStylisPlugins,lt={},dt,yt=[];dt=tt.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+rt+' "]'),function(Rt){for(var Et=Rt.getAttribute("data-emotion").split(" "),wt=1;wt<Et.length;wt++)lt[Et[wt]]=!0;yt.push(Rt)});var vt,_t=[compat,removeLabel];{var bt,Mt=[stringify,rulesheet(function(Rt){bt.insert(Rt)})],Ct=middleware(_t.concat(at,Mt)),Tt=function(Et){return serialize$1(compile$4(Et),Ct)};vt=function(Et,wt,Pt,Ft){bt=Pt,Tt(Et?Et+"{"+wt.styles+"}":wt.styles),Ft&&($t.inserted[wt.name]=!0)}}var $t={key:rt,sheet:new StyleSheet({key:rt,container:dt,nonce:tt.nonce,speedy:tt.speedy,prepend:tt.prepend,insertionPoint:tt.insertionPoint}),nonce:tt.nonce,inserted:lt,registered:{},insert:vt};return $t.sheet.hydrate(yt),$t},reactIs$2={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=typeof Symbol=="function"&&Symbol.for,c$4=b$2?Symbol.for("react.element"):60103,d$2=b$2?Symbol.for("react.portal"):60106,e$2=b$2?Symbol.for("react.fragment"):60107,f$2=b$2?Symbol.for("react.strict_mode"):60108,g$2=b$2?Symbol.for("react.profiler"):60114,h$4=b$2?Symbol.for("react.provider"):60109,k$3=b$2?Symbol.for("react.context"):60110,l$3=b$2?Symbol.for("react.async_mode"):60111,m$3=b$2?Symbol.for("react.concurrent_mode"):60111,n$4=b$2?Symbol.for("react.forward_ref"):60112,p$4=b$2?Symbol.for("react.suspense"):60113,q$5=b$2?Symbol.for("react.suspense_list"):60120,r$4=b$2?Symbol.for("react.memo"):60115,t$4=b$2?Symbol.for("react.lazy"):60116,v$3=b$2?Symbol.for("react.block"):60121,w$2=b$2?Symbol.for("react.fundamental"):60117,x$1=b$2?Symbol.for("react.responder"):60118,y$1=b$2?Symbol.for("react.scope"):60119;function z$1(nt){if(typeof nt=="object"&&nt!==null){var tt=nt.$$typeof;switch(tt){case c$4:switch(nt=nt.type,nt){case l$3:case m$3:case e$2:case g$2:case f$2:case p$4:return nt;default:switch(nt=nt&&nt.$$typeof,nt){case k$3:case n$4:case t$4:case r$4:case h$4:return nt;default:return tt}}case d$2:return tt}}}function A$2(nt){return z$1(nt)===m$3}reactIs_production_min$1.AsyncMode=l$3;reactIs_production_min$1.ConcurrentMode=m$3;reactIs_production_min$1.ContextConsumer=k$3;reactIs_production_min$1.ContextProvider=h$4;reactIs_production_min$1.Element=c$4;reactIs_production_min$1.ForwardRef=n$4;reactIs_production_min$1.Fragment=e$2;reactIs_production_min$1.Lazy=t$4;reactIs_production_min$1.Memo=r$4;reactIs_production_min$1.Portal=d$2;reactIs_production_min$1.Profiler=g$2;reactIs_production_min$1.StrictMode=f$2;reactIs_production_min$1.Suspense=p$4;reactIs_production_min$1.isAsyncMode=function(nt){return A$2(nt)||z$1(nt)===l$3};reactIs_production_min$1.isConcurrentMode=A$2;reactIs_production_min$1.isContextConsumer=function(nt){return z$1(nt)===k$3};reactIs_production_min$1.isContextProvider=function(nt){return z$1(nt)===h$4};reactIs_production_min$1.isElement=function(nt){return typeof nt=="object"&&nt!==null&&nt.$$typeof===c$4};reactIs_production_min$1.isForwardRef=function(nt){return z$1(nt)===n$4};reactIs_production_min$1.isFragment=function(nt){return z$1(nt)===e$2};reactIs_production_min$1.isLazy=function(nt){return z$1(nt)===t$4};reactIs_production_min$1.isMemo=function(nt){return z$1(nt)===r$4};reactIs_production_min$1.isPortal=function(nt){return z$1(nt)===d$2};reactIs_production_min$1.isProfiler=function(nt){return z$1(nt)===g$2};reactIs_production_min$1.isStrictMode=function(nt){return z$1(nt)===f$2};reactIs_production_min$1.isSuspense=function(nt){return z$1(nt)===p$4};reactIs_production_min$1.isValidElementType=function(nt){return typeof nt=="string"||typeof nt=="function"||nt===e$2||nt===m$3||nt===g$2||nt===f$2||nt===p$4||nt===q$5||typeof nt=="object"&&nt!==null&&(nt.$$typeof===t$4||nt.$$typeof===r$4||nt.$$typeof===h$4||nt.$$typeof===k$3||nt.$$typeof===n$4||nt.$$typeof===w$2||nt.$$typeof===x$1||nt.$$typeof===y$1||nt.$$typeof===v$3)};reactIs_production_min$1.typeOf=z$1;reactIs$2.exports=reactIs_production_min$1;var reactIsExports$1=reactIs$2.exports,reactIs$1=reactIsExports$1,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs$1.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs$1.Memo]=MEMO_STATICS;var isBrowser$2=!0;function getRegisteredStyles(nt,tt,rt){var st="";return rt.split(" ").forEach(function(at){nt[at]!==void 0?tt.push(nt[at]+";"):at&&(st+=at+" ")}),st}var registerStyles=function(tt,rt,st){var at=tt.key+"-"+rt.name;(st===!1||isBrowser$2===!1)&&tt.registered[at]===void 0&&(tt.registered[at]=rt.styles)},insertStyles=function(tt,rt,st){registerStyles(tt,rt,st);var at=tt.key+"-"+rt.name;if(tt.inserted[rt.name]===void 0){var lt=rt;do tt.insert(rt===lt?"."+at:"",lt,tt.sheet,!0),lt=lt.next;while(lt!==void 0)}};function murmur2(nt){for(var tt=0,rt,st=0,at=nt.length;at>=4;++st,at-=4)rt=nt.charCodeAt(st)&255|(nt.charCodeAt(++st)&255)<<8|(nt.charCodeAt(++st)&255)<<16|(nt.charCodeAt(++st)&255)<<24,rt=(rt&65535)*1540483477+((rt>>>16)*59797<<16),rt^=rt>>>24,tt=(rt&65535)*1540483477+((rt>>>16)*59797<<16)^(tt&65535)*1540483477+((tt>>>16)*59797<<16);switch(at){case 3:tt^=(nt.charCodeAt(st+2)&255)<<16;case 2:tt^=(nt.charCodeAt(st+1)&255)<<8;case 1:tt^=nt.charCodeAt(st)&255,tt=(tt&65535)*1540483477+((tt>>>16)*59797<<16)}return tt^=tt>>>13,tt=(tt&65535)*1540483477+((tt>>>16)*59797<<16),((tt^tt>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(tt){return tt.charCodeAt(1)===45},isProcessableValue=function(tt){return tt!=null&&typeof tt!="boolean"},processStyleName=memoize$4(function(nt){return isCustomProperty(nt)?nt:nt.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(tt,rt){switch(tt){case"animation":case"animationName":if(typeof rt=="string")return rt.replace(animationRegex,function(st,at,lt){return cursor={name:at,styles:lt,next:cursor},at})}return unitlessKeys[tt]!==1&&!isCustomProperty(tt)&&typeof rt=="number"&&rt!==0?rt+"px":rt};function handleInterpolation(nt,tt,rt){if(rt==null)return"";var st=rt;if(st.__emotion_styles!==void 0)return st;switch(typeof rt){case"boolean":return"";case"object":{var at=rt;if(at.anim===1)return cursor={name:at.name,styles:at.styles,next:cursor},at.name;var lt=rt;if(lt.styles!==void 0){var dt=lt.next;if(dt!==void 0)for(;dt!==void 0;)cursor={name:dt.name,styles:dt.styles,next:cursor},dt=dt.next;var yt=lt.styles+";";return yt}return createStringFromObject(nt,tt,rt)}case"function":{if(nt!==void 0){var vt=cursor,_t=rt(nt);return cursor=vt,handleInterpolation(nt,tt,_t)}break}}var bt=rt;if(tt==null)return bt;var Mt=tt[bt];return Mt!==void 0?Mt:bt}function createStringFromObject(nt,tt,rt){var st="";if(Array.isArray(rt))for(var at=0;at<rt.length;at++)st+=handleInterpolation(nt,tt,rt[at])+";";else for(var lt in rt){var dt=rt[lt];if(typeof dt!="object"){var yt=dt;tt!=null&&tt[yt]!==void 0?st+=lt+"{"+tt[yt]+"}":isProcessableValue(yt)&&(st+=processStyleName(lt)+":"+processStyleValue(lt,yt)+";")}else if(Array.isArray(dt)&&typeof dt[0]=="string"&&(tt==null||tt[dt[0]]===void 0))for(var vt=0;vt<dt.length;vt++)isProcessableValue(dt[vt])&&(st+=processStyleName(lt)+":"+processStyleValue(lt,dt[vt])+";");else{var _t=handleInterpolation(nt,tt,dt);switch(lt){case"animation":case"animationName":{st+=processStyleName(lt)+":"+_t+";";break}default:st+=lt+"{"+_t+"}"}}}return st}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(nt,tt,rt){if(nt.length===1&&typeof nt[0]=="object"&&nt[0]!==null&&nt[0].styles!==void 0)return nt[0];var st=!0,at="";cursor=void 0;var lt=nt[0];if(lt==null||lt.raw===void 0)st=!1,at+=handleInterpolation(rt,tt,lt);else{var dt=lt;at+=dt[0]}for(var yt=1;yt<nt.length;yt++)if(at+=handleInterpolation(rt,tt,nt[yt]),st){var vt=lt;at+=vt[yt]}labelPattern.lastIndex=0;for(var _t="",bt;(bt=labelPattern.exec(at))!==null;)_t+="-"+bt[1];var Mt=murmur2(at)+_t;return{name:Mt,styles:at,next:cursor}}var syncFallback=function(tt){return tt()},useInsertionEffect=React.useInsertionEffect?React.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(tt){return reactExports.forwardRef(function(rt,st){var at=reactExports.useContext(EmotionCacheContext);return tt(rt,at,st)})},ThemeContext$1=reactExports.createContext({}),hasOwn={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(tt,rt){var st={};for(var at in rt)hasOwn.call(rt,at)&&(st[at]=rt[at]);return st[typePropName]=tt,st},Insertion$1=function(tt){var rt=tt.cache,st=tt.serialized,at=tt.isStringTag;return registerStyles(rt,st,at),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(rt,st,at)}),null},Emotion=withEmotionCache(function(nt,tt,rt){var st=nt.css;typeof st=="string"&&tt.registered[st]!==void 0&&(st=tt.registered[st]);var at=nt[typePropName],lt=[st],dt="";typeof nt.className=="string"?dt=getRegisteredStyles(tt.registered,lt,nt.className):nt.className!=null&&(dt=nt.className+" ");var yt=serializeStyles(lt,void 0,reactExports.useContext(ThemeContext$1));dt+=tt.key+"-"+yt.name;var vt={};for(var _t in nt)hasOwn.call(nt,_t)&&_t!=="css"&&_t!==typePropName&&(vt[_t]=nt[_t]);return vt.className=dt,rt&&(vt.ref=rt),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:tt,serialized:yt,isStringTag:typeof at=="string"}),reactExports.createElement(at,vt))}),Emotion$1=Emotion,jsx=function(tt,rt){var st=arguments;if(rt==null||!hasOwn.call(rt,"css"))return reactExports.createElement.apply(void 0,st);var at=st.length,lt=new Array(at);lt[0]=Emotion$1,lt[1]=createEmotionProps(tt,rt);for(var dt=2;dt<at;dt++)lt[dt]=st[dt];return reactExports.createElement.apply(null,lt)};(function(nt){var tt;tt||(tt=nt.JSX||(nt.JSX={}))})(jsx);var Global=withEmotionCache(function(nt,tt){var rt=nt.styles,st=serializeStyles([rt],void 0,reactExports.useContext(ThemeContext$1)),at=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var lt=tt.key+"-global",dt=new tt.sheet.constructor({key:lt,nonce:tt.sheet.nonce,container:tt.sheet.container,speedy:tt.sheet.isSpeedy}),yt=!1,vt=document.querySelector('style[data-emotion="'+lt+" "+st.name+'"]');return tt.sheet.tags.length&&(dt.before=tt.sheet.tags[0]),vt!==null&&(yt=!0,vt.setAttribute("data-emotion",lt),dt.hydrate([vt])),at.current=[dt,yt],function(){dt.flush()}},[tt]),useInsertionEffectWithLayoutFallback(function(){var lt=at.current,dt=lt[0],yt=lt[1];if(yt){lt[1]=!1;return}if(st.next!==void 0&&insertStyles(tt,st.next,!0),dt.tags.length){var vt=dt.tags[dt.tags.length-1].nextElementSibling;dt.before=vt,dt.flush()}tt.insert("",st,dt,!1)},[tt,st.name]),null});function css(){for(var nt=arguments.length,tt=new Array(nt),rt=0;rt<nt;rt++)tt[rt]=arguments[rt];return serializeStyles(tt)}function keyframes(){var nt=css.apply(void 0,arguments),tt="animation-"+nt.name;return{name:tt,styles:"@keyframes "+tt+"{"+nt.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$4(function(nt){return reactPropsRegex.test(nt)||nt.charCodeAt(0)===111&&nt.charCodeAt(1)===110&&nt.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(tt){return tt!=="theme"},getDefaultShouldForwardProp=function(tt){return typeof tt=="string"&&tt.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(tt,rt,st){var at;if(rt){var lt=rt.shouldForwardProp;at=tt.__emotion_forwardProp&&lt?function(dt){return tt.__emotion_forwardProp(dt)&&lt(dt)}:lt}return typeof at!="function"&&st&&(at=tt.__emotion_forwardProp),at},Insertion=function(tt){var rt=tt.cache,st=tt.serialized,at=tt.isStringTag;return registerStyles(rt,st,at),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(rt,st,at)}),null},createStyled$1=function nt(tt,rt){var st=tt.__emotion_real===tt,at=st&&tt.__emotion_base||tt,lt,dt;rt!==void 0&&(lt=rt.label,dt=rt.target);var yt=composeShouldForwardProps(tt,rt,st),vt=yt||getDefaultShouldForwardProp(at),_t=!vt("as");return function(){var bt=arguments,Mt=st&&tt.__emotion_styles!==void 0?tt.__emotion_styles.slice(0):[];if(lt!==void 0&&Mt.push("label:"+lt+";"),bt[0]==null||bt[0].raw===void 0)Mt.push.apply(Mt,bt);else{var Ct=bt[0];Mt.push(Ct[0]);for(var Tt=bt.length,$t=1;$t<Tt;$t++)Mt.push(bt[$t],Ct[$t])}var Rt=withEmotionCache(function(Et,wt,Pt){var Ft=_t&&Et.as||at,Nt="",Ot=[],Bt=Et;if(Et.theme==null){Bt={};for(var Xt in Et)Bt[Xt]=Et[Xt];Bt.theme=reactExports.useContext(ThemeContext$1)}typeof Et.className=="string"?Nt=getRegisteredStyles(wt.registered,Ot,Et.className):Et.className!=null&&(Nt=Et.className+" ");var Zt=serializeStyles(Mt.concat(Ot),wt.registered,Bt);Nt+=wt.key+"-"+Zt.name,dt!==void 0&&(Nt+=" "+dt);var rn=_t&&yt===void 0?getDefaultShouldForwardProp(Ft):vt,Gt={};for(var nn in Et)_t&&nn==="as"||rn(nn)&&(Gt[nn]=Et[nn]);return Gt.className=Nt,Pt&&(Gt.ref=Pt),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:wt,serialized:Zt,isStringTag:typeof Ft=="string"}),reactExports.createElement(Ft,Gt))});return Rt.displayName=lt!==void 0?lt:"Styled("+(typeof at=="string"?at:at.displayName||at.name||"Component")+")",Rt.defaultProps=tt.defaultProps,Rt.__emotion_real=Rt,Rt.__emotion_base=at,Rt.__emotion_styles=Mt,Rt.__emotion_forwardProp=yt,Object.defineProperty(Rt,"toString",{value:function(){return"."+dt}}),Rt.withComponent=function(Et,wt){var Pt=nt(Et,_extends$i({},rt,wt,{shouldForwardProp:composeShouldForwardProps(Rt,wt,!0)}));return Pt.apply(void 0,Mt)},Rt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind(null);tags.forEach(function(nt){newStyled[nt]=newStyled(nt)});var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function nt(st,at,lt,dt,yt,vt){if(vt!==ReactPropTypesSecret){var _t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _t.name="Invariant Violation",_t}}nt.isRequired=nt;function tt(){return nt}var rt={array:nt,bigint:nt,bool:nt,func:nt,number:nt,object:nt,string:nt,symbol:nt,any:nt,arrayOf:tt,element:nt,elementType:nt,instanceOf:tt,node:nt,objectOf:tt,oneOf:tt,oneOfType:tt,shape:tt,exact:tt,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return rt.PropTypes=rt,rt};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const _pt=getDefaultExportFromCjs(propTypesExports);function isEmpty$3(nt){return nt==null||Object.keys(nt).length===0}function GlobalStyles$3(nt){const{styles:tt,defaultTheme:rt={}}=nt,st=typeof tt=="function"?at=>tt(isEmpty$3(at)?rt:at):tt;return jsxRuntimeExports.jsx(Global,{styles:st})}/**
 * @mui/styled-engine v6.3.1
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function styled$2(nt,tt){return newStyled(nt,tt)}function internal_mutateStyles(nt,tt){Array.isArray(nt.__emotion_styles)&&(nt.__emotion_styles=tt(nt.__emotion_styles))}const wrapper=[];function internal_serializeStyles(nt){return wrapper[0]=nt,serializeStyles(wrapper)}function isPlainObject$8(nt){if(typeof nt!="object"||nt===null)return!1;const tt=Object.getPrototypeOf(nt);return(tt===null||tt===Object.prototype||Object.getPrototypeOf(tt)===null)&&!(Symbol.toStringTag in nt)&&!(Symbol.iterator in nt)}function deepClone(nt){if(reactExports.isValidElement(nt)||!isPlainObject$8(nt))return nt;const tt={};return Object.keys(nt).forEach(rt=>{tt[rt]=deepClone(nt[rt])}),tt}function deepmerge(nt,tt,rt={clone:!0}){const st=rt.clone?{...nt}:nt;return isPlainObject$8(nt)&&isPlainObject$8(tt)&&Object.keys(tt).forEach(at=>{reactExports.isValidElement(tt[at])?st[at]=tt[at]:isPlainObject$8(tt[at])&&Object.prototype.hasOwnProperty.call(nt,at)&&isPlainObject$8(nt[at])?st[at]=deepmerge(nt[at],tt[at],rt):rt.clone?st[at]=isPlainObject$8(tt[at])?deepClone(tt[at]):tt[at]:st[at]=tt[at]}),st}const sortBreakpointsValues=nt=>{const tt=Object.keys(nt).map(rt=>({key:rt,val:nt[rt]}))||[];return tt.sort((rt,st)=>rt.val-st.val),tt.reduce((rt,st)=>({...rt,[st.key]:st.val}),{})};function createBreakpoints(nt){const{values:tt={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:rt="px",step:st=5,...at}=nt,lt=sortBreakpointsValues(tt),dt=Object.keys(lt);function yt(Ct){return`@media (min-width:${typeof tt[Ct]=="number"?tt[Ct]:Ct}${rt})`}function vt(Ct){return`@media (max-width:${(typeof tt[Ct]=="number"?tt[Ct]:Ct)-st/100}${rt})`}function _t(Ct,Tt){const $t=dt.indexOf(Tt);return`@media (min-width:${typeof tt[Ct]=="number"?tt[Ct]:Ct}${rt}) and (max-width:${($t!==-1&&typeof tt[dt[$t]]=="number"?tt[dt[$t]]:Tt)-st/100}${rt})`}function bt(Ct){return dt.indexOf(Ct)+1<dt.length?_t(Ct,dt[dt.indexOf(Ct)+1]):yt(Ct)}function Mt(Ct){const Tt=dt.indexOf(Ct);return Tt===0?yt(dt[1]):Tt===dt.length-1?vt(dt[Tt]):_t(Ct,dt[dt.indexOf(Ct)+1]).replace("@media","@media not all and")}return{keys:dt,values:lt,up:yt,down:vt,between:_t,only:bt,not:Mt,unit:rt,...at}}function sortContainerQueries(nt,tt){if(!nt.containerQueries)return tt;const rt=Object.keys(tt).filter(st=>st.startsWith("@container")).sort((st,at)=>{var dt,yt;const lt=/min-width:\s*([0-9.]+)/;return+(((dt=st.match(lt))==null?void 0:dt[1])||0)-+(((yt=at.match(lt))==null?void 0:yt[1])||0)});return rt.length?rt.reduce((st,at)=>{const lt=tt[at];return delete st[at],st[at]=lt,st},{...tt}):tt}function isCqShorthand(nt,tt){return tt==="@"||tt.startsWith("@")&&(nt.some(rt=>tt.startsWith(`@${rt}`))||!!tt.match(/^@\d/))}function getContainerQuery(nt,tt){const rt=tt.match(/^@([^/]+)?\/?(.+)?$/);if(!rt)return null;const[,st,at]=rt,lt=Number.isNaN(+st)?st||0:+st;return nt.containerQueries(at).up(lt)}function cssContainerQueries(nt){const tt=(lt,dt)=>lt.replace("@media",dt?`@container ${dt}`:"@container");function rt(lt,dt){lt.up=(...yt)=>tt(nt.breakpoints.up(...yt),dt),lt.down=(...yt)=>tt(nt.breakpoints.down(...yt),dt),lt.between=(...yt)=>tt(nt.breakpoints.between(...yt),dt),lt.only=(...yt)=>tt(nt.breakpoints.only(...yt),dt),lt.not=(...yt)=>{const vt=tt(nt.breakpoints.not(...yt),dt);return vt.includes("not all and")?vt.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):vt}}const st={},at=lt=>(rt(st,lt),st);return rt(at),{...nt,containerQueries:at}}const shape={borderRadius:4};function merge$3(nt,tt){return tt?deepmerge(nt,tt,{clone:!1}):nt}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:nt=>`@media (min-width:${values$1[nt]}px)`},defaultContainerQueries={containerQueries:nt=>({up:tt=>{let rt=typeof tt=="number"?tt:values$1[tt]||tt;return typeof rt=="number"&&(rt=`${rt}px`),nt?`@container ${nt} (min-width:${rt})`:`@container (min-width:${rt})`}})};function handleBreakpoints(nt,tt,rt){const st=nt.theme||{};if(Array.isArray(tt)){const lt=st.breakpoints||defaultBreakpoints;return tt.reduce((dt,yt,vt)=>(dt[lt.up(lt.keys[vt])]=rt(tt[vt]),dt),{})}if(typeof tt=="object"){const lt=st.breakpoints||defaultBreakpoints;return Object.keys(tt).reduce((dt,yt)=>{if(isCqShorthand(lt.keys,yt)){const vt=getContainerQuery(st.containerQueries?st:defaultContainerQueries,yt);vt&&(dt[vt]=rt(tt[yt],yt))}else if(Object.keys(lt.values||values$1).includes(yt)){const vt=lt.up(yt);dt[vt]=rt(tt[yt],yt)}else{const vt=yt;dt[vt]=tt[vt]}return dt},{})}return rt(tt)}function createEmptyBreakpointObject(nt={}){var rt;return((rt=nt.keys)==null?void 0:rt.reduce((st,at)=>{const lt=nt.up(at);return st[lt]={},st},{}))||{}}function removeUnusedBreakpoints(nt,tt){return nt.reduce((rt,st)=>{const at=rt[st];return(!at||Object.keys(at).length===0)&&delete rt[st],rt},tt)}function mergeBreakpointsInOrder(nt,...tt){const rt=createEmptyBreakpointObject(nt),st=[rt,...tt].reduce((at,lt)=>deepmerge(at,lt),{});return removeUnusedBreakpoints(Object.keys(rt),st)}function computeBreakpointsBase(nt,tt){if(typeof nt!="object")return{};const rt={},st=Object.keys(tt);return Array.isArray(nt)?st.forEach((at,lt)=>{lt<nt.length&&(rt[at]=!0)}):st.forEach(at=>{nt[at]!=null&&(rt[at]=!0)}),rt}function resolveBreakpointValues({values:nt,breakpoints:tt,base:rt}){const st=rt||computeBreakpointsBase(nt,tt),at=Object.keys(st);if(at.length===0)return nt;let lt;return at.reduce((dt,yt,vt)=>(Array.isArray(nt)?(dt[yt]=nt[vt]!=null?nt[vt]:nt[lt],lt=vt):typeof nt=="object"?(dt[yt]=nt[yt]!=null?nt[yt]:nt[lt],lt=yt):dt[yt]=nt,dt),{})}function capitalize(nt){if(typeof nt!="string")throw new Error(formatMuiErrorMessage(7));return nt.charAt(0).toUpperCase()+nt.slice(1)}function getPath(nt,tt,rt=!0){if(!tt||typeof tt!="string")return null;if(nt&&nt.vars&&rt){const st=`vars.${tt}`.split(".").reduce((at,lt)=>at&&at[lt]?at[lt]:null,nt);if(st!=null)return st}return tt.split(".").reduce((st,at)=>st&&st[at]!=null?st[at]:null,nt)}function getStyleValue$1(nt,tt,rt,st=rt){let at;return typeof nt=="function"?at=nt(rt):Array.isArray(nt)?at=nt[rt]||st:at=getPath(nt,rt)||st,tt&&(at=tt(at,st,nt)),at}function style$2(nt){const{prop:tt,cssProperty:rt=nt.prop,themeKey:st,transform:at}=nt,lt=dt=>{if(dt[tt]==null)return null;const yt=dt[tt],vt=dt.theme,_t=getPath(vt,st)||{};return handleBreakpoints(dt,yt,Mt=>{let Ct=getStyleValue$1(_t,at,Mt);return Mt===Ct&&typeof Mt=="string"&&(Ct=getStyleValue$1(_t,at,`${tt}${Mt==="default"?"":capitalize(Mt)}`,Mt)),rt===!1?Ct:{[rt]:Ct}})};return lt.propTypes={},lt.filterProps=[tt],lt}function memoize$3(nt){const tt={};return rt=>(tt[rt]===void 0&&(tt[rt]=nt(rt)),tt[rt])}const properties$4={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize$3(nt=>{if(nt.length>2)if(aliases[nt])nt=aliases[nt];else return[nt];const[tt,rt]=nt.split(""),st=properties$4[tt],at=directions[rt]||"";return Array.isArray(at)?at.map(lt=>st+lt):[st+at]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(nt,tt,rt,st){const at=getPath(nt,tt,!0)??rt;return typeof at=="number"||typeof at=="string"?lt=>typeof lt=="string"?lt:typeof at=="string"?`calc(${lt} * ${at})`:at*lt:Array.isArray(at)?lt=>{if(typeof lt=="string")return lt;const dt=Math.abs(lt),yt=at[dt];return lt>=0?yt:typeof yt=="number"?-yt:`-${yt}`}:typeof at=="function"?at:()=>{}}function createUnarySpacing(nt){return createUnaryUnit(nt,"spacing",8)}function getValue$3(nt,tt){return typeof tt=="string"||tt==null?tt:nt(tt)}function getStyleFromPropValue(nt,tt){return rt=>nt.reduce((st,at)=>(st[at]=getValue$3(tt,rt),st),{})}function resolveCssProperty(nt,tt,rt,st){if(!tt.includes(rt))return null;const at=getCssProperties(rt),lt=getStyleFromPropValue(at,st),dt=nt[rt];return handleBreakpoints(nt,dt,lt)}function style$1(nt,tt){const rt=createUnarySpacing(nt.theme);return Object.keys(nt).map(st=>resolveCssProperty(nt,tt,st,rt)).reduce(merge$3,{})}function margin(nt){return style$1(nt,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(nt){return style$1(nt,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(nt=8,tt=createUnarySpacing({spacing:nt})){if(nt.mui)return nt;const rt=(...st)=>(st.length===0?[1]:st).map(lt=>{const dt=tt(lt);return typeof dt=="number"?`${dt}px`:dt}).join(" ");return rt.mui=!0,rt}function compose(...nt){const tt=nt.reduce((st,at)=>(at.filterProps.forEach(lt=>{st[lt]=at}),st),{}),rt=st=>Object.keys(st).reduce((at,lt)=>tt[lt]?merge$3(at,tt[lt](st)):at,{});return rt.propTypes={},rt.filterProps=nt.reduce((st,at)=>st.concat(at.filterProps),[]),rt}function borderTransform(nt){return typeof nt!="number"?nt:`${nt}px solid`}function createBorderStyle(nt,tt){return style$2({prop:nt,themeKey:"borders",transform:tt})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=nt=>{if(nt.borderRadius!==void 0&&nt.borderRadius!==null){const tt=createUnaryUnit(nt.theme,"shape.borderRadius",4),rt=st=>({borderRadius:getValue$3(tt,st)});return handleBreakpoints(nt,nt.borderRadius,rt)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=nt=>{if(nt.gap!==void 0&&nt.gap!==null){const tt=createUnaryUnit(nt.theme,"spacing",8),rt=st=>({gap:getValue$3(tt,st)});return handleBreakpoints(nt,nt.gap,rt)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=nt=>{if(nt.columnGap!==void 0&&nt.columnGap!==null){const tt=createUnaryUnit(nt.theme,"spacing",8),rt=st=>({columnGap:getValue$3(tt,st)});return handleBreakpoints(nt,nt.columnGap,rt)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=nt=>{if(nt.rowGap!==void 0&&nt.rowGap!==null){const tt=createUnaryUnit(nt.theme,"spacing",8),rt=st=>({rowGap:getValue$3(tt,st)});return handleBreakpoints(nt,nt.rowGap,rt)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(nt,tt){return tt==="grey"?tt:nt}const color$1=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$1,bgcolor,backgroundColor);function sizingTransform(nt){return nt<=1&&nt!==0?`${nt*100}%`:nt}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=nt=>{if(nt.maxWidth!==void 0&&nt.maxWidth!==null){const tt=rt=>{var at,lt,dt,yt,vt;const st=((dt=(lt=(at=nt.theme)==null?void 0:at.breakpoints)==null?void 0:lt.values)==null?void 0:dt[rt])||values$1[rt];return st?((vt=(yt=nt.theme)==null?void 0:yt.breakpoints)==null?void 0:vt.unit)!=="px"?{maxWidth:`${st}${nt.theme.breakpoints.unit}`}:{maxWidth:st}:{maxWidth:sizingTransform(rt)}};return handleBreakpoints(nt,nt.maxWidth,tt)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:nt=>({"@media print":{display:nt}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function objectsHaveSameKeys(...nt){const tt=nt.reduce((st,at)=>st.concat(Object.keys(at)),[]),rt=new Set(tt);return nt.every(st=>rt.size===Object.keys(st).length)}function callIfFn(nt,tt){return typeof nt=="function"?nt(tt):nt}function unstable_createStyleFunctionSx(){function nt(rt,st,at,lt){const dt={[rt]:st,theme:at},yt=lt[rt];if(!yt)return{[rt]:st};const{cssProperty:vt=rt,themeKey:_t,transform:bt,style:Mt}=yt;if(st==null)return null;if(_t==="typography"&&st==="inherit")return{[rt]:st};const Ct=getPath(at,_t)||{};return Mt?Mt(dt):handleBreakpoints(dt,st,$t=>{let Rt=getStyleValue$1(Ct,bt,$t);return $t===Rt&&typeof $t=="string"&&(Rt=getStyleValue$1(Ct,bt,`${rt}${$t==="default"?"":capitalize($t)}`,$t)),vt===!1?Rt:{[vt]:Rt}})}function tt(rt){const{sx:st,theme:at={}}=rt||{};if(!st)return null;const lt=at.unstable_sxConfig??defaultSxConfig;function dt(yt){let vt=yt;if(typeof yt=="function")vt=yt(at);else if(typeof yt!="object")return yt;if(!vt)return null;const _t=createEmptyBreakpointObject(at.breakpoints),bt=Object.keys(_t);let Mt=_t;return Object.keys(vt).forEach(Ct=>{const Tt=callIfFn(vt[Ct],at);if(Tt!=null)if(typeof Tt=="object")if(lt[Ct])Mt=merge$3(Mt,nt(Ct,Tt,at,lt));else{const $t=handleBreakpoints({theme:at},Tt,Rt=>({[Ct]:Rt}));objectsHaveSameKeys($t,Tt)?Mt[Ct]=tt({sx:Tt,theme:at}):Mt=merge$3(Mt,$t)}else Mt=merge$3(Mt,nt(Ct,Tt,at,lt))}),sortContainerQueries(at,removeUnusedBreakpoints(bt,Mt))}return Array.isArray(st)?st.map(dt):dt(st)}return tt}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];function applyStyles$2(nt,tt){var st;const rt=this;if(rt.vars){if(!((st=rt.colorSchemes)!=null&&st[nt])||typeof rt.getColorSchemeSelector!="function")return{};let at=rt.getColorSchemeSelector(nt);return at==="&"?tt:((at.includes("data-")||at.includes("."))&&(at=`*:where(${at.replace(/\s*&$/,"")}) &`),{[at]:tt})}return rt.palette.mode===nt?tt:{}}function createTheme$1(nt={},...tt){const{breakpoints:rt={},palette:st={},spacing:at,shape:lt={},...dt}=nt,yt=createBreakpoints(rt),vt=createSpacing(at);let _t=deepmerge({breakpoints:yt,direction:"ltr",components:{},palette:{mode:"light",...st},spacing:vt,shape:{...shape,...lt}},dt);return _t=cssContainerQueries(_t),_t.applyStyles=applyStyles$2,_t=tt.reduce((bt,Mt)=>deepmerge(bt,Mt),_t),_t.unstable_sxConfig={...defaultSxConfig,...dt==null?void 0:dt.unstable_sxConfig},_t.unstable_sx=function(Mt){return styleFunctionSx({sx:Mt,theme:this})},_t}function isObjectEmpty$1(nt){return Object.keys(nt).length===0}function useTheme$3(nt=null){const tt=reactExports.useContext(ThemeContext$1);return!tt||isObjectEmpty$1(tt)?nt:tt}const systemDefaultTheme$1=createTheme$1();function useTheme$2(nt=systemDefaultTheme$1){return useTheme$3(nt)}function GlobalStyles$2({styles:nt,themeId:tt,defaultTheme:rt={}}){const st=useTheme$2(rt),at=typeof nt=="function"?nt(tt&&st[tt]||st):nt;return jsxRuntimeExports.jsx(GlobalStyles$3,{styles:at})}const splitProps=nt=>{var st;const tt={systemProps:{},otherProps:{}},rt=((st=nt==null?void 0:nt.theme)==null?void 0:st.unstable_sxConfig)??defaultSxConfig;return Object.keys(nt).forEach(at=>{rt[at]?tt.systemProps[at]=nt[at]:tt.otherProps[at]=nt[at]}),tt};function extendSxProp$1(nt){const{sx:tt,...rt}=nt,{systemProps:st,otherProps:at}=splitProps(rt);let lt;return Array.isArray(tt)?lt=[st,...tt]:typeof tt=="function"?lt=(...dt)=>{const yt=tt(...dt);return isPlainObject$8(yt)?{...st,...yt}:st}:lt={...st,...tt},{...at,sx:lt}}const defaultGenerator=nt=>nt,createClassNameGenerator=()=>{let nt=defaultGenerator;return{configure(tt){nt=tt},generate(tt){return nt(tt)},reset(){nt=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function r$3(nt){var tt,rt,st="";if(typeof nt=="string"||typeof nt=="number")st+=nt;else if(typeof nt=="object")if(Array.isArray(nt)){var at=nt.length;for(tt=0;tt<at;tt++)nt[tt]&&(rt=r$3(nt[tt]))&&(st&&(st+=" "),st+=rt)}else for(rt in nt)nt[rt]&&(st&&(st+=" "),st+=rt);return st}function clsx(){for(var nt,tt,rt=0,st="",at=arguments.length;rt<at;rt++)(nt=arguments[rt])&&(tt=r$3(nt))&&(st&&(st+=" "),st+=tt);return st}function createBox(nt={}){const{themeId:tt,defaultTheme:rt,defaultClassName:st="MuiBox-root",generateClassName:at}=nt,lt=styled$2("div",{shouldForwardProp:yt=>yt!=="theme"&&yt!=="sx"&&yt!=="as"})(styleFunctionSx);return reactExports.forwardRef(function(vt,_t){const bt=useTheme$2(rt),{className:Mt,component:Ct="div",...Tt}=extendSxProp$1(vt);return jsxRuntimeExports.jsx(lt,{as:Ct,ref:_t,className:clsx(Mt,at?at(st):st),theme:tt&&bt[tt]||bt,...Tt})})}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(nt,tt,rt="Mui"){const st=globalStateClasses[tt];return st?`${rt}-${st}`:`${ClassNameGenerator.generate(nt)}-${tt}`}function generateUtilityClasses(nt,tt,rt="Mui"){const st={};return tt.forEach(at=>{st[at]=generateUtilityClass(nt,at,rt)}),st}function preprocessStyles(nt){const{variants:tt,...rt}=nt,st={variants:tt,style:internal_serializeStyles(rt),isProcessed:!0};return st.style===rt||tt&&tt.forEach(at=>{typeof at.style!="function"&&(at.style=internal_serializeStyles(at.style))}),st}const systemDefaultTheme=createTheme$1();function shouldForwardProp(nt){return nt!=="ownerState"&&nt!=="theme"&&nt!=="sx"&&nt!=="as"}function defaultOverridesResolver(nt){return nt?(tt,rt)=>rt[nt]:null}function attachTheme(nt,tt,rt){nt.theme=isObjectEmpty(nt.theme)?rt:nt.theme[tt]||nt.theme}function processStyle(nt,tt){const rt=typeof tt=="function"?tt(nt):tt;if(Array.isArray(rt))return rt.flatMap(st=>processStyle(nt,st));if(Array.isArray(rt==null?void 0:rt.variants)){let st;if(rt.isProcessed)st=rt.style;else{const{variants:at,...lt}=rt;st=lt}return processStyleVariants(nt,rt.variants,[st])}return rt!=null&&rt.isProcessed?rt.style:rt}function processStyleVariants(nt,tt,rt=[]){var at;let st;e:for(let lt=0;lt<tt.length;lt+=1){const dt=tt[lt];if(typeof dt.props=="function"){if(st??(st={...nt,...nt.ownerState,ownerState:nt.ownerState}),!dt.props(st))continue}else for(const yt in dt.props)if(nt[yt]!==dt.props[yt]&&((at=nt.ownerState)==null?void 0:at[yt])!==dt.props[yt])continue e;typeof dt.style=="function"?(st??(st={...nt,...nt.ownerState,ownerState:nt.ownerState}),rt.push(dt.style(st))):rt.push(dt.style)}return rt}function createStyled(nt={}){const{themeId:tt,defaultTheme:rt=systemDefaultTheme,rootShouldForwardProp:st=shouldForwardProp,slotShouldForwardProp:at=shouldForwardProp}=nt;function lt(yt){attachTheme(yt,tt,rt)}return(yt,vt={})=>{internal_mutateStyles(yt,Ot=>Ot.filter(Bt=>Bt!==styleFunctionSx));const{name:_t,slot:bt,skipVariantsResolver:Mt,skipSx:Ct,overridesResolver:Tt=defaultOverridesResolver(lowercaseFirstLetter(bt)),...$t}=vt,Rt=Mt!==void 0?Mt:bt&&bt!=="Root"&&bt!=="root"||!1,Et=Ct||!1;let wt=shouldForwardProp;bt==="Root"||bt==="root"?wt=st:bt?wt=at:isStringTag(yt)&&(wt=void 0);const Pt=styled$2(yt,{shouldForwardProp:wt,label:generateStyledLabel(),...$t}),Ft=Ot=>{if(typeof Ot=="function"&&Ot.__emotion_real!==Ot)return function(Xt){return processStyle(Xt,Ot)};if(isPlainObject$8(Ot)){const Bt=preprocessStyles(Ot);return Bt.variants?function(Zt){return processStyle(Zt,Bt)}:Bt.style}return Ot},Nt=(...Ot)=>{const Bt=[],Xt=Ot.map(Ft),Zt=[];if(Bt.push(lt),_t&&Tt&&Zt.push(function(cn){var Cn,Mn;const mn=(Mn=(Cn=cn.theme.components)==null?void 0:Cn[_t])==null?void 0:Mn.styleOverrides;if(!mn)return null;const En={};for(const un in mn)En[un]=processStyle(cn,mn[un]);return Tt(cn,En)}),_t&&!Rt&&Zt.push(function(cn){var En,Cn;const an=cn.theme,mn=(Cn=(En=an==null?void 0:an.components)==null?void 0:En[_t])==null?void 0:Cn.variants;return mn?processStyleVariants(cn,mn):null}),Et||Zt.push(styleFunctionSx),Array.isArray(Xt[0])){const nn=Xt.shift(),cn=new Array(Bt.length).fill(""),an=new Array(Zt.length).fill("");let mn;mn=[...cn,...nn,...an],mn.raw=[...cn,...nn.raw,...an],Bt.unshift(mn)}const rn=[...Bt,...Xt,...Zt],Gt=Pt(...rn);return yt.muiName&&(Gt.muiName=yt.muiName),Gt};return Pt.withConfig&&(Nt.withConfig=Pt.withConfig),Nt}}function generateStyledLabel(nt,tt){return void 0}function isObjectEmpty(nt){for(const tt in nt)return!1;return!0}function isStringTag(nt){return typeof nt=="string"&&nt.charCodeAt(0)>96}function lowercaseFirstLetter(nt){return nt&&nt.charAt(0).toLowerCase()+nt.slice(1)}const styled$1=createStyled();function resolveProps(nt,tt){const rt={...tt};for(const st in nt)if(Object.prototype.hasOwnProperty.call(nt,st)){const at=st;if(at==="components"||at==="slots")rt[at]={...nt[at],...rt[at]};else if(at==="componentsProps"||at==="slotProps"){const lt=nt[at],dt=tt[at];if(!dt)rt[at]=lt||{};else if(!lt)rt[at]=dt;else{rt[at]={...dt};for(const yt in lt)if(Object.prototype.hasOwnProperty.call(lt,yt)){const vt=yt;rt[at][vt]=resolveProps(lt[vt],dt[vt])}}}else rt[at]===void 0&&(rt[at]=nt[at])}return rt}function getThemeProps$1(nt){const{theme:tt,name:rt,props:st}=nt;return!tt||!tt.components||!tt.components[rt]||!tt.components[rt].defaultProps?st:resolveProps(tt.components[rt].defaultProps,st)}function useThemeProps({props:nt,name:tt,defaultTheme:rt,themeId:st}){let at=useTheme$2(rt);return st&&(at=at[st]||at),getThemeProps$1({theme:at,name:tt,props:nt})}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useMediaQueryOld(nt,tt,rt,st,at){const[lt,dt]=reactExports.useState(()=>at&&rt?rt(nt).matches:st?st(nt).matches:tt);return useEnhancedEffect(()=>{if(!rt)return;const yt=rt(nt),vt=()=>{dt(yt.matches)};return vt(),yt.addEventListener("change",vt),()=>{yt.removeEventListener("change",vt)}},[nt,rt]),lt}const safeReact$1={...React},maybeReactUseSyncExternalStore=safeReact$1.useSyncExternalStore;function useMediaQueryNew(nt,tt,rt,st,at){const lt=reactExports.useCallback(()=>tt,[tt]),dt=reactExports.useMemo(()=>{if(at&&rt)return()=>rt(nt).matches;if(st!==null){const{matches:bt}=st(nt);return()=>bt}return lt},[lt,nt,st,at,rt]),[yt,vt]=reactExports.useMemo(()=>{if(rt===null)return[lt,()=>()=>{}];const bt=rt(nt);return[()=>bt.matches,Mt=>(bt.addEventListener("change",Mt),()=>{bt.removeEventListener("change",Mt)})]},[lt,rt,nt]);return maybeReactUseSyncExternalStore(vt,yt,dt)}function unstable_createUseMediaQuery(nt={}){const{themeId:tt}=nt;return function(st,at={}){let lt=useTheme$3();lt&&tt&&(lt=lt[tt]||lt);const dt=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:yt=!1,matchMedia:vt=dt?window.matchMedia:null,ssrMatchMedia:_t=null,noSsr:bt=!1}=getThemeProps$1({name:"MuiUseMediaQuery",props:at,theme:lt});let Mt=typeof st=="function"?st(lt):st;return Mt=Mt.replace(/^@media( ?)/m,""),(maybeReactUseSyncExternalStore!==void 0?useMediaQueryNew:useMediaQueryOld)(Mt,yt,vt,_t,bt)}}function clamp$1(nt,tt=Number.MIN_SAFE_INTEGER,rt=Number.MAX_SAFE_INTEGER){return Math.max(tt,Math.min(nt,rt))}function clampWrapper(nt,tt=0,rt=1){return clamp$1(nt,tt,rt)}function hexToRgb(nt){nt=nt.slice(1);const tt=new RegExp(`.{1,${nt.length>=6?2:1}}`,"g");let rt=nt.match(tt);return rt&&rt[0].length===1&&(rt=rt.map(st=>st+st)),rt?`rgb${rt.length===4?"a":""}(${rt.map((st,at)=>at<3?parseInt(st,16):Math.round(parseInt(st,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(nt){if(nt.type)return nt;if(nt.charAt(0)==="#")return decomposeColor(hexToRgb(nt));const tt=nt.indexOf("("),rt=nt.substring(0,tt);if(!["rgb","rgba","hsl","hsla","color"].includes(rt))throw new Error(formatMuiErrorMessage(9,nt));let st=nt.substring(tt+1,nt.length-1),at;if(rt==="color"){if(st=st.split(" "),at=st.shift(),st.length===4&&st[3].charAt(0)==="/"&&(st[3]=st[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(at))throw new Error(formatMuiErrorMessage(10,at))}else st=st.split(",");return st=st.map(lt=>parseFloat(lt)),{type:rt,values:st,colorSpace:at}}const colorChannel=nt=>{const tt=decomposeColor(nt);return tt.values.slice(0,3).map((rt,st)=>tt.type.includes("hsl")&&st!==0?`${rt}%`:rt).join(" ")},private_safeColorChannel=(nt,tt)=>{try{return colorChannel(nt)}catch{return nt}};function recomposeColor(nt){const{type:tt,colorSpace:rt}=nt;let{values:st}=nt;return tt.includes("rgb")?st=st.map((at,lt)=>lt<3?parseInt(at,10):at):tt.includes("hsl")&&(st[1]=`${st[1]}%`,st[2]=`${st[2]}%`),tt.includes("color")?st=`${rt} ${st.join(" ")}`:st=`${st.join(", ")}`,`${tt}(${st})`}function hslToRgb(nt){nt=decomposeColor(nt);const{values:tt}=nt,rt=tt[0],st=tt[1]/100,at=tt[2]/100,lt=st*Math.min(at,1-at),dt=(_t,bt=(_t+rt/30)%12)=>at-lt*Math.max(Math.min(bt-3,9-bt,1),-1);let yt="rgb";const vt=[Math.round(dt(0)*255),Math.round(dt(8)*255),Math.round(dt(4)*255)];return nt.type==="hsla"&&(yt+="a",vt.push(tt[3])),recomposeColor({type:yt,values:vt})}function getLuminance(nt){nt=decomposeColor(nt);let tt=nt.type==="hsl"||nt.type==="hsla"?decomposeColor(hslToRgb(nt)).values:nt.values;return tt=tt.map(rt=>(nt.type!=="color"&&(rt/=255),rt<=.03928?rt/12.92:((rt+.055)/1.055)**2.4)),Number((.2126*tt[0]+.7152*tt[1]+.0722*tt[2]).toFixed(3))}function getContrastRatio(nt,tt){const rt=getLuminance(nt),st=getLuminance(tt);return(Math.max(rt,st)+.05)/(Math.min(rt,st)+.05)}function alpha(nt,tt){return nt=decomposeColor(nt),tt=clampWrapper(tt),(nt.type==="rgb"||nt.type==="hsl")&&(nt.type+="a"),nt.type==="color"?nt.values[3]=`/${tt}`:nt.values[3]=tt,recomposeColor(nt)}function private_safeAlpha(nt,tt,rt){try{return alpha(nt,tt)}catch{return nt}}function darken(nt,tt){if(nt=decomposeColor(nt),tt=clampWrapper(tt),nt.type.includes("hsl"))nt.values[2]*=1-tt;else if(nt.type.includes("rgb")||nt.type.includes("color"))for(let rt=0;rt<3;rt+=1)nt.values[rt]*=1-tt;return recomposeColor(nt)}function private_safeDarken(nt,tt,rt){try{return darken(nt,tt)}catch{return nt}}function lighten(nt,tt){if(nt=decomposeColor(nt),tt=clampWrapper(tt),nt.type.includes("hsl"))nt.values[2]+=(100-nt.values[2])*tt;else if(nt.type.includes("rgb"))for(let rt=0;rt<3;rt+=1)nt.values[rt]+=(255-nt.values[rt])*tt;else if(nt.type.includes("color"))for(let rt=0;rt<3;rt+=1)nt.values[rt]+=(1-nt.values[rt])*tt;return recomposeColor(nt)}function private_safeLighten(nt,tt,rt){try{return lighten(nt,tt)}catch{return nt}}function emphasize(nt,tt=.15){return getLuminance(nt)>.5?darken(nt,tt):lighten(nt,tt)}function private_safeEmphasize(nt,tt,rt){try{return emphasize(nt,tt)}catch{return nt}}function createChainedFunction(...nt){return nt.reduce((tt,rt)=>rt==null?tt:function(...at){tt.apply(this,at),rt.apply(this,at)},()=>{})}function debounce$2(nt,tt=166){let rt;function st(...at){const lt=()=>{nt.apply(this,at)};clearTimeout(rt),rt=setTimeout(lt,tt)}return st.clear=()=>{clearTimeout(rt)},st}function isMuiElement(nt,tt){var rt,st,at;return reactExports.isValidElement(nt)&&tt.indexOf(nt.type.muiName??((at=(st=(rt=nt.type)==null?void 0:rt._payload)==null?void 0:st.value)==null?void 0:at.muiName))!==-1}function ownerDocument(nt){return nt&&nt.ownerDocument||document}function ownerWindow(nt){return ownerDocument(nt).defaultView||window}function setRef(nt,tt){typeof nt=="function"?nt(tt):nt&&(nt.current=tt)}let globalId=0;function useGlobalId(nt){const[tt,rt]=reactExports.useState(nt),st=nt||tt;return reactExports.useEffect(()=>{tt==null&&(globalId+=1,rt(`mui-${globalId}`))},[tt]),st}const safeReact={...React},maybeReactUseId=safeReact.useId;function useId(nt){if(maybeReactUseId!==void 0){const tt=maybeReactUseId();return nt??tt}return useGlobalId(nt)}function useControlled({controlled:nt,default:tt,name:rt,state:st="value"}){const{current:at}=reactExports.useRef(nt!==void 0),[lt,dt]=reactExports.useState(tt),yt=at?nt:lt,vt=reactExports.useCallback(_t=>{at||dt(_t)},[]);return[yt,vt]}function useEventCallback(nt){const tt=reactExports.useRef(nt);return useEnhancedEffect(()=>{tt.current=nt}),reactExports.useRef((...rt)=>(0,tt.current)(...rt)).current}function useForkRef(...nt){return reactExports.useMemo(()=>nt.every(tt=>tt==null)?null:tt=>{nt.forEach(rt=>{setRef(rt,tt)})},nt)}const UNINITIALIZED={};function useLazyRef(nt,tt){const rt=reactExports.useRef(UNINITIALIZED);return rt.current===UNINITIALIZED&&(rt.current=nt(tt)),rt}const EMPTY=[];function useOnMount(nt){reactExports.useEffect(nt,EMPTY)}class Timeout{constructor(){q0(this,"currentId",null);q0(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});q0(this,"disposeEffect",()=>this.clear)}static create(){return new Timeout}start(tt,rt){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,rt()},tt)}}function useTimeout(){const nt=useLazyRef(Timeout.create).current;return useOnMount(nt.disposeEffect),nt}function isFocusVisible(nt){try{return nt.matches(":focus-visible")}catch{}return!1}function getScrollbarSize(nt=window){const tt=nt.document.documentElement.clientWidth;return nt.innerWidth-tt}function getValidReactChildren(nt){return reactExports.Children.toArray(nt).filter(tt=>reactExports.isValidElement(tt))}const visuallyHidden={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function composeClasses(nt,tt,rt=void 0){const st={};for(const at in nt){const lt=nt[at];let dt="",yt=!0;for(let vt=0;vt<lt.length;vt+=1){const _t=lt[vt];_t&&(dt+=(yt===!0?"":" ")+tt(_t),yt=!1,rt&&rt[_t]&&(dt+=" "+rt[_t]))}st[at]=dt}return st}function isHostComponent$1(nt){return typeof nt=="string"}function appendOwnerState(nt,tt,rt){return nt===void 0||isHostComponent$1(nt)?tt:{...tt,ownerState:{...tt.ownerState,...rt}}}function extractEventHandlers(nt,tt=[]){if(nt===void 0)return{};const rt={};return Object.keys(nt).filter(st=>st.match(/^on[A-Z]/)&&typeof nt[st]=="function"&&!tt.includes(st)).forEach(st=>{rt[st]=nt[st]}),rt}function omitEventHandlers(nt){if(nt===void 0)return{};const tt={};return Object.keys(nt).filter(rt=>!(rt.match(/^on[A-Z]/)&&typeof nt[rt]=="function")).forEach(rt=>{tt[rt]=nt[rt]}),tt}function mergeSlotProps(nt){const{getSlotProps:tt,additionalProps:rt,externalSlotProps:st,externalForwardedProps:at,className:lt}=nt;if(!tt){const Tt=clsx(rt==null?void 0:rt.className,lt,at==null?void 0:at.className,st==null?void 0:st.className),$t={...rt==null?void 0:rt.style,...at==null?void 0:at.style,...st==null?void 0:st.style},Rt={...rt,...at,...st};return Tt.length>0&&(Rt.className=Tt),Object.keys($t).length>0&&(Rt.style=$t),{props:Rt,internalRef:void 0}}const dt=extractEventHandlers({...at,...st}),yt=omitEventHandlers(st),vt=omitEventHandlers(at),_t=tt(dt),bt=clsx(_t==null?void 0:_t.className,rt==null?void 0:rt.className,lt,at==null?void 0:at.className,st==null?void 0:st.className),Mt={..._t==null?void 0:_t.style,...rt==null?void 0:rt.style,...at==null?void 0:at.style,...st==null?void 0:st.style},Ct={..._t,...rt,...vt,...yt};return bt.length>0&&(Ct.className=bt),Object.keys(Mt).length>0&&(Ct.style=Mt),{props:Ct,internalRef:_t.ref}}function resolveComponentProps(nt,tt,rt){return typeof nt=="function"?nt(tt,rt):nt}function useSlotProps(nt){var Mt;const{elementType:tt,externalSlotProps:rt,ownerState:st,skipResolvingSlotProps:at=!1,...lt}=nt,dt=at?{}:resolveComponentProps(rt,st),{props:yt,internalRef:vt}=mergeSlotProps({...lt,externalSlotProps:dt}),_t=useForkRef(vt,dt==null?void 0:dt.ref,(Mt=nt.additionalProps)==null?void 0:Mt.ref);return appendOwnerState(tt,{...yt,ref:_t},st)}function getReactElementRef(nt){var tt;return parseInt(reactExports.version,10)>=19?((tt=nt==null?void 0:nt.props)==null?void 0:tt.ref)||null:(nt==null?void 0:nt.ref)||null}const ThemeContext=reactExports.createContext(null);function useTheme$1(){return reactExports.useContext(ThemeContext)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(nt,tt){return typeof tt=="function"?tt(nt):{...nt,...tt}}function ThemeProvider$2(nt){const{children:tt,theme:rt}=nt,st=useTheme$1(),at=reactExports.useMemo(()=>{const lt=st===null?{...rt}:mergeOuterLocalTheme(st,rt);return lt!=null&&(lt[nested]=st!==null),lt},[rt,st]);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:at,children:tt})}const RtlContext=reactExports.createContext();function RtlProvider({value:nt,...tt}){return jsxRuntimeExports.jsx(RtlContext.Provider,{value:nt??!0,...tt})}const useRtl=()=>reactExports.useContext(RtlContext)??!1,PropsContext=reactExports.createContext(void 0);function DefaultPropsProvider({value:nt,children:tt}){return jsxRuntimeExports.jsx(PropsContext.Provider,{value:nt,children:tt})}function getThemeProps(nt){const{theme:tt,name:rt,props:st}=nt;if(!tt||!tt.components||!tt.components[rt])return st;const at=tt.components[rt];return at.defaultProps?resolveProps(at.defaultProps,st):!at.styleOverrides&&!at.variants?resolveProps(at,st):st}function useDefaultProps$1({props:nt,name:tt}){const rt=reactExports.useContext(PropsContext);return getThemeProps({props:nt,name:tt,theme:{components:rt}})}const EMPTY_THEME={};function useThemeScoping(nt,tt,rt,st=!1){return reactExports.useMemo(()=>{const at=nt&&tt[nt]||tt;if(typeof rt=="function"){const lt=rt(at),dt=nt?{...tt,[nt]:lt}:lt;return st?()=>dt:dt}return nt?{...tt,[nt]:rt}:{...tt,...rt}},[nt,tt,rt,st])}function ThemeProvider$1(nt){const{children:tt,theme:rt,themeId:st}=nt,at=useTheme$3(EMPTY_THEME),lt=useTheme$1()||EMPTY_THEME,dt=useThemeScoping(st,at,rt),yt=useThemeScoping(st,lt,rt,!0),vt=(st?dt[st]:dt).direction==="rtl";return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:yt,children:jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:dt,children:jsxRuntimeExports.jsx(RtlProvider,{value:vt,children:jsxRuntimeExports.jsx(DefaultPropsProvider,{value:st?dt[st].components:dt.components,children:tt})})})})}const arg={theme:void 0};function unstable_memoTheme(nt){let tt,rt;return function(at){let lt=tt;return(lt===void 0||at.theme!==rt)&&(arg.theme=at.theme,lt=preprocessStyles(nt(arg)),tt=lt,rt=at.theme),lt}}const DEFAULT_MODE_STORAGE_KEY="mode",DEFAULT_COLOR_SCHEME_STORAGE_KEY="color-scheme",DEFAULT_ATTRIBUTE="data-color-scheme";function InitColorSchemeScript(nt){const{defaultMode:tt="system",defaultLightColorScheme:rt="light",defaultDarkColorScheme:st="dark",modeStorageKey:at=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:lt=DEFAULT_COLOR_SCHEME_STORAGE_KEY,attribute:dt=DEFAULT_ATTRIBUTE,colorSchemeNode:yt="document.documentElement",nonce:vt}=nt;let _t="",bt=dt;if(dt==="class"&&(bt=".%s"),dt==="data"&&(bt="[data-%s]"),bt.startsWith(".")){const Ct=bt.substring(1);_t+=`${yt}.classList.remove('${Ct}'.replace('%s', light), '${Ct}'.replace('%s', dark));
      ${yt}.classList.add('${Ct}'.replace('%s', colorScheme));`}const Mt=bt.match(/\[([^\]]+)\]/);if(Mt){const[Ct,Tt]=Mt[1].split("=");Tt||(_t+=`${yt}.removeAttribute('${Ct}'.replace('%s', light));
      ${yt}.removeAttribute('${Ct}'.replace('%s', dark));`),_t+=`
      ${yt}.setAttribute('${Ct}'.replace('%s', colorScheme), ${Tt?`${Tt}.replace('%s', colorScheme)`:'""'});`}else _t+=`${yt}.setAttribute('${bt}', colorScheme);`;return jsxRuntimeExports.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?vt:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${at}') || '${tt}';
  const dark = localStorage.getItem('${lt}-dark') || '${st}';
  const light = localStorage.getItem('${lt}-light') || '${rt}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${_t}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function getSystemMode(nt){if(typeof window<"u"&&typeof window.matchMedia=="function"&&nt==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function processState(nt,tt){if(nt.mode==="light"||nt.mode==="system"&&nt.systemMode==="light")return tt("light");if(nt.mode==="dark"||nt.mode==="system"&&nt.systemMode==="dark")return tt("dark")}function getColorScheme(nt){return processState(nt,tt=>{if(tt==="light")return nt.lightColorScheme;if(tt==="dark")return nt.darkColorScheme})}function initializeValue(nt,tt){if(typeof window>"u")return;let rt;try{rt=localStorage.getItem(nt)||void 0,rt||localStorage.setItem(nt,tt)}catch{}return rt||tt}function useCurrentColorScheme(nt){const{defaultMode:tt="light",defaultLightColorScheme:rt,defaultDarkColorScheme:st,supportedColorSchemes:at=[],modeStorageKey:lt=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:dt=DEFAULT_COLOR_SCHEME_STORAGE_KEY,storageWindow:yt=typeof window>"u"?void 0:window,noSsr:vt=!1}=nt,_t=at.join(","),bt=at.length>1,[Mt,Ct]=reactExports.useState(()=>{const Nt=initializeValue(lt,tt),Ot=initializeValue(`${dt}-light`,rt),Bt=initializeValue(`${dt}-dark`,st);return{mode:Nt,systemMode:getSystemMode(Nt),lightColorScheme:Ot,darkColorScheme:Bt}}),[Tt,$t]=reactExports.useState(vt||!bt);reactExports.useEffect(()=>{$t(!0)},[]);const Rt=getColorScheme(Mt),Et=reactExports.useCallback(Nt=>{Ct(Ot=>{if(Nt===Ot.mode)return Ot;const Bt=Nt??tt;try{localStorage.setItem(lt,Bt)}catch{}return{...Ot,mode:Bt,systemMode:getSystemMode(Bt)}})},[lt,tt]),wt=reactExports.useCallback(Nt=>{Nt?typeof Nt=="string"?Nt&&!_t.includes(Nt)?console.error(`\`${Nt}\` does not exist in \`theme.colorSchemes\`.`):Ct(Ot=>{const Bt={...Ot};return processState(Ot,Xt=>{try{localStorage.setItem(`${dt}-${Xt}`,Nt)}catch{}Xt==="light"&&(Bt.lightColorScheme=Nt),Xt==="dark"&&(Bt.darkColorScheme=Nt)}),Bt}):Ct(Ot=>{const Bt={...Ot},Xt=Nt.light===null?rt:Nt.light,Zt=Nt.dark===null?st:Nt.dark;if(Xt)if(!_t.includes(Xt))console.error(`\`${Xt}\` does not exist in \`theme.colorSchemes\`.`);else{Bt.lightColorScheme=Xt;try{localStorage.setItem(`${dt}-light`,Xt)}catch{}}if(Zt)if(!_t.includes(Zt))console.error(`\`${Zt}\` does not exist in \`theme.colorSchemes\`.`);else{Bt.darkColorScheme=Zt;try{localStorage.setItem(`${dt}-dark`,Zt)}catch{}}return Bt}):Ct(Ot=>{try{localStorage.setItem(`${dt}-light`,rt),localStorage.setItem(`${dt}-dark`,st)}catch{}return{...Ot,lightColorScheme:rt,darkColorScheme:st}})},[_t,dt,rt,st]),Pt=reactExports.useCallback(Nt=>{Mt.mode==="system"&&Ct(Ot=>{const Bt=Nt!=null&&Nt.matches?"dark":"light";return Ot.systemMode===Bt?Ot:{...Ot,systemMode:Bt}})},[Mt.mode]),Ft=reactExports.useRef(Pt);return Ft.current=Pt,reactExports.useEffect(()=>{if(typeof window.matchMedia!="function"||!bt)return;const Nt=(...Bt)=>Ft.current(...Bt),Ot=window.matchMedia("(prefers-color-scheme: dark)");return Ot.addListener(Nt),Nt(Ot),()=>{Ot.removeListener(Nt)}},[bt]),reactExports.useEffect(()=>{if(yt&&bt){const Nt=Ot=>{const Bt=Ot.newValue;typeof Ot.key=="string"&&Ot.key.startsWith(dt)&&(!Bt||_t.match(Bt))&&(Ot.key.endsWith("light")&&wt({light:Bt}),Ot.key.endsWith("dark")&&wt({dark:Bt})),Ot.key===lt&&(!Bt||["light","dark","system"].includes(Bt))&&Et(Bt||tt)};return yt.addEventListener("storage",Nt),()=>{yt.removeEventListener("storage",Nt)}}},[wt,Et,lt,dt,_t,tt,yt,bt]),{...Mt,mode:Tt?Mt.mode:void 0,systemMode:Tt?Mt.systemMode:void 0,colorScheme:Tt?Rt:void 0,setMode:Et,setColorScheme:wt}}const DISABLE_CSS_TRANSITION="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function createCssVarsProvider(nt){const{themeId:tt,theme:rt={},modeStorageKey:st=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:at=DEFAULT_COLOR_SCHEME_STORAGE_KEY,disableTransitionOnChange:lt=!1,defaultColorScheme:dt,resolveTheme:yt}=nt,vt={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},_t=reactExports.createContext(void 0),bt=()=>reactExports.useContext(_t)||vt,Mt={},Ct={};function Tt(wt){var Ir,pr,Tr,Wr;const{children:Pt,theme:Ft,modeStorageKey:Nt=st,colorSchemeStorageKey:Ot=at,disableTransitionOnChange:Bt=lt,storageWindow:Xt=typeof window>"u"?void 0:window,documentNode:Zt=typeof document>"u"?void 0:document,colorSchemeNode:rn=typeof document>"u"?void 0:document.documentElement,disableNestedContext:Gt=!1,disableStyleSheetGeneration:nn=!1,defaultMode:cn="system",noSsr:an}=wt,mn=reactExports.useRef(!1),En=useTheme$1(),Cn=reactExports.useContext(_t),Mn=!!Cn&&!Gt,un=reactExports.useMemo(()=>Ft||(typeof rt=="function"?rt():rt),[Ft]),Tn=un[tt],Pn=Tn||un,{colorSchemes:dn=Mt,components:Un=Ct,cssVarPrefix:qn}=Pn,In=Object.keys(dn).filter(Kn=>!!dn[Kn]).join(","),Wn=reactExports.useMemo(()=>In.split(","),[In]),ar=typeof dt=="string"?dt:dt.light,fr=typeof dt=="string"?dt:dt.dark,mr=dn[ar]&&dn[fr]?cn:((pr=(Ir=dn[Pn.defaultColorScheme])==null?void 0:Ir.palette)==null?void 0:pr.mode)||((Tr=Pn.palette)==null?void 0:Tr.mode),{mode:vr,setMode:Ar,systemMode:$r,lightColorScheme:Mr,darkColorScheme:Jn,colorScheme:hr,setColorScheme:wr}=useCurrentColorScheme({supportedColorSchemes:Wn,defaultLightColorScheme:ar,defaultDarkColorScheme:fr,modeStorageKey:Nt,colorSchemeStorageKey:Ot,defaultMode:mr,storageWindow:Xt,noSsr:an});let Nr=vr,Fr=hr;Mn&&(Nr=Cn.mode,Fr=Cn.colorScheme);const Yr=reactExports.useMemo(()=>{var Sr;const Kn=Fr||Pn.defaultColorScheme,rr=((Sr=Pn.generateThemeVars)==null?void 0:Sr.call(Pn))||Pn.vars,ur={...Pn,components:Un,colorSchemes:dn,cssVarPrefix:qn,vars:rr};if(typeof ur.generateSpacing=="function"&&(ur.spacing=ur.generateSpacing()),Kn){const gr=dn[Kn];gr&&typeof gr=="object"&&Object.keys(gr).forEach(Gr=>{gr[Gr]&&typeof gr[Gr]=="object"?ur[Gr]={...ur[Gr],...gr[Gr]}:ur[Gr]=gr[Gr]})}return yt?yt(ur):ur},[Pn,Fr,Un,dn,qn]),cs=Pn.colorSchemeSelector;reactExports.useEffect(()=>{if(Fr&&rn&&cs&&cs!=="media"){const Kn=cs;let rr=cs;if(Kn==="class"&&(rr=".%s"),Kn==="data"&&(rr="[data-%s]"),Kn!=null&&Kn.startsWith("data-")&&!Kn.includes("%s")&&(rr=`[${Kn}="%s"]`),rr.startsWith("."))rn.classList.remove(...Wn.map(ur=>rr.substring(1).replace("%s",ur))),rn.classList.add(rr.substring(1).replace("%s",Fr));else{const ur=rr.replace("%s",Fr).match(/\[([^\]]+)\]/);if(ur){const[Sr,gr]=ur[1].split("=");gr||Wn.forEach(Gr=>{rn.removeAttribute(Sr.replace(Fr,Gr))}),rn.setAttribute(Sr,gr?gr.replace(/"|'/g,""):"")}else rn.setAttribute(rr,Fr)}}},[Fr,cs,rn,Wn]),reactExports.useEffect(()=>{let Kn;if(Bt&&mn.current&&Zt){const rr=Zt.createElement("style");rr.appendChild(Zt.createTextNode(DISABLE_CSS_TRANSITION)),Zt.head.appendChild(rr),window.getComputedStyle(Zt.body),Kn=setTimeout(()=>{Zt.head.removeChild(rr)},1)}return()=>{clearTimeout(Kn)}},[Fr,Bt,Zt]),reactExports.useEffect(()=>(mn.current=!0,()=>{mn.current=!1}),[]);const cr=reactExports.useMemo(()=>({allColorSchemes:Wn,colorScheme:Fr,darkColorScheme:Jn,lightColorScheme:Mr,mode:Nr,setColorScheme:wr,setMode:Ar,systemMode:$r}),[Wn,Fr,Jn,Mr,Nr,wr,Ar,$r,Yr.colorSchemeSelector]);let Qn=!0;(nn||Pn.cssVariables===!1||Mn&&(En==null?void 0:En.cssVarPrefix)===qn)&&(Qn=!1);const _r=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ThemeProvider$1,{themeId:Tn?tt:void 0,theme:Yr,children:Pt}),Qn&&jsxRuntimeExports.jsx(GlobalStyles$3,{styles:((Wr=Yr.generateStyleSheets)==null?void 0:Wr.call(Yr))||[]})]});return Mn?_r:jsxRuntimeExports.jsx(_t.Provider,{value:cr,children:_r})}const $t=typeof dt=="string"?dt:dt.light,Rt=typeof dt=="string"?dt:dt.dark;return{CssVarsProvider:Tt,useColorScheme:bt,getInitColorSchemeScript:wt=>InitColorSchemeScript({colorSchemeStorageKey:at,defaultLightColorScheme:$t,defaultDarkColorScheme:Rt,modeStorageKey:st,...wt})}}function createGetCssVar$1(nt=""){function tt(...st){if(!st.length)return"";const at=st[0];return typeof at=="string"&&!at.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${nt?`${nt}-`:""}${at}${tt(...st.slice(1))})`:`, ${at}`}return(st,...at)=>`var(--${nt?`${nt}-`:""}${st}${tt(...at)})`}const assignNestedKeys=(nt,tt,rt,st=[])=>{let at=nt;tt.forEach((lt,dt)=>{dt===tt.length-1?Array.isArray(at)?at[Number(lt)]=rt:at&&typeof at=="object"&&(at[lt]=rt):at&&typeof at=="object"&&(at[lt]||(at[lt]=st.includes(lt)?[]:{}),at=at[lt])})},walkObjectDeep=(nt,tt,rt)=>{function st(at,lt=[],dt=[]){Object.entries(at).forEach(([yt,vt])=>{(!rt||!rt([...lt,yt]))&&vt!=null&&(typeof vt=="object"&&Object.keys(vt).length>0?st(vt,[...lt,yt],Array.isArray(vt)?[...dt,yt]:dt):tt([...lt,yt],vt,dt))})}st(nt)},getCssValue=(nt,tt)=>typeof tt=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(st=>nt.includes(st))||nt[nt.length-1].toLowerCase().includes("opacity")?tt:`${tt}px`:tt;function cssVarsParser(nt,tt){const{prefix:rt,shouldSkipGeneratingVar:st}=tt||{},at={},lt={},dt={};return walkObjectDeep(nt,(yt,vt,_t)=>{if((typeof vt=="string"||typeof vt=="number")&&(!st||!st(yt,vt))){const bt=`--${rt?`${rt}-`:""}${yt.join("-")}`,Mt=getCssValue(yt,vt);Object.assign(at,{[bt]:Mt}),assignNestedKeys(lt,yt,`var(${bt})`,_t),assignNestedKeys(dt,yt,`var(${bt}, ${Mt})`,_t)}},yt=>yt[0]==="vars"),{css:at,vars:lt,varsWithDefaults:dt}}function prepareCssVars(nt,tt={}){const{getSelector:rt=Et,disableCssColorScheme:st,colorSchemeSelector:at}=tt,{colorSchemes:lt={},components:dt,defaultColorScheme:yt="light",...vt}=nt,{vars:_t,css:bt,varsWithDefaults:Mt}=cssVarsParser(vt,tt);let Ct=Mt;const Tt={},{[yt]:$t,...Rt}=lt;if(Object.entries(Rt||{}).forEach(([Ft,Nt])=>{const{vars:Ot,css:Bt,varsWithDefaults:Xt}=cssVarsParser(Nt,tt);Ct=deepmerge(Ct,Xt),Tt[Ft]={css:Bt,vars:Ot}}),$t){const{css:Ft,vars:Nt,varsWithDefaults:Ot}=cssVarsParser($t,tt);Ct=deepmerge(Ct,Ot),Tt[yt]={css:Ft,vars:Nt}}function Et(Ft,Nt){var Bt,Xt;let Ot=at;if(at==="class"&&(Ot=".%s"),at==="data"&&(Ot="[data-%s]"),at!=null&&at.startsWith("data-")&&!at.includes("%s")&&(Ot=`[${at}="%s"]`),Ft){if(Ot==="media")return nt.defaultColorScheme===Ft?":root":{[`@media (prefers-color-scheme: ${((Xt=(Bt=lt[Ft])==null?void 0:Bt.palette)==null?void 0:Xt.mode)||Ft})`]:{":root":Nt}};if(Ot)return nt.defaultColorScheme===Ft?`:root, ${Ot.replace("%s",String(Ft))}`:Ot.replace("%s",String(Ft))}return":root"}return{vars:Ct,generateThemeVars:()=>{let Ft={..._t};return Object.entries(Tt).forEach(([,{vars:Nt}])=>{Ft=deepmerge(Ft,Nt)}),Ft},generateStyleSheets:()=>{var Zt,rn;const Ft=[],Nt=nt.defaultColorScheme||"light";function Ot(Gt,nn){Object.keys(nn).length&&Ft.push(typeof Gt=="string"?{[Gt]:{...nn}}:Gt)}Ot(rt(void 0,{...bt}),bt);const{[Nt]:Bt,...Xt}=Tt;if(Bt){const{css:Gt}=Bt,nn=(rn=(Zt=lt[Nt])==null?void 0:Zt.palette)==null?void 0:rn.mode,cn=!st&&nn?{colorScheme:nn,...Gt}:{...Gt};Ot(rt(Nt,{...cn}),cn)}return Object.entries(Xt).forEach(([Gt,{css:nn}])=>{var mn,En;const cn=(En=(mn=lt[Gt])==null?void 0:mn.palette)==null?void 0:En.mode,an=!st&&cn?{colorScheme:cn,...nn}:{...nn};Ot(rt(Gt,{...an}),an)}),Ft}}}function createGetColorSchemeSelector(nt){return function(rt){return nt==="media"?`@media (prefers-color-scheme: ${rt})`:nt?nt.startsWith("data-")&&!nt.includes("%s")?`[${nt}="${rt}"] &`:nt==="class"?`.${rt} &`:nt==="data"?`[data-${rt}] &`:`${nt.replace("%s",rt)} &`:"&"}}const defaultTheme$4=createTheme$1(),defaultCreateStyledComponent$2=styled$1("div",{name:"MuiContainer",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[`maxWidth${capitalize(String(rt.maxWidth))}`],rt.fixed&&tt.fixed,rt.disableGutters&&tt.disableGutters]}}),useThemePropsDefault$2=nt=>useThemeProps({props:nt,name:"MuiContainer",defaultTheme:defaultTheme$4}),useUtilityClasses$M=(nt,tt)=>{const rt=vt=>generateUtilityClass(tt,vt),{classes:st,fixed:at,disableGutters:lt,maxWidth:dt}=nt,yt={root:["root",dt&&`maxWidth${capitalize(String(dt))}`,at&&"fixed",lt&&"disableGutters"]};return composeClasses(yt,rt,st)};function createContainer(nt={}){const{createStyledComponent:tt=defaultCreateStyledComponent$2,useThemeProps:rt=useThemePropsDefault$2,componentName:st="MuiContainer"}=nt,at=tt(({theme:dt,ownerState:yt})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!yt.disableGutters&&{paddingLeft:dt.spacing(2),paddingRight:dt.spacing(2),[dt.breakpoints.up("sm")]:{paddingLeft:dt.spacing(3),paddingRight:dt.spacing(3)}}}),({theme:dt,ownerState:yt})=>yt.fixed&&Object.keys(dt.breakpoints.values).reduce((vt,_t)=>{const bt=_t,Mt=dt.breakpoints.values[bt];return Mt!==0&&(vt[dt.breakpoints.up(bt)]={maxWidth:`${Mt}${dt.breakpoints.unit}`}),vt},{}),({theme:dt,ownerState:yt})=>({...yt.maxWidth==="xs"&&{[dt.breakpoints.up("xs")]:{maxWidth:Math.max(dt.breakpoints.values.xs,444)}},...yt.maxWidth&&yt.maxWidth!=="xs"&&{[dt.breakpoints.up(yt.maxWidth)]:{maxWidth:`${dt.breakpoints.values[yt.maxWidth]}${dt.breakpoints.unit}`}}}));return reactExports.forwardRef(function(yt,vt){const _t=rt(yt),{className:bt,component:Mt="div",disableGutters:Ct=!1,fixed:Tt=!1,maxWidth:$t="lg",classes:Rt,...Et}=_t,wt={..._t,component:Mt,disableGutters:Ct,fixed:Tt,maxWidth:$t},Pt=useUtilityClasses$M(wt,st);return jsxRuntimeExports.jsx(at,{as:Mt,ownerState:wt,className:clsx(Pt.root,bt),ref:vt,...Et})})}const filterBreakpointKeys=(nt,tt)=>nt.filter(rt=>tt.includes(rt)),traverseBreakpoints=(nt,tt,rt)=>{const st=nt.keys[0];Array.isArray(tt)?tt.forEach((at,lt)=>{rt((dt,yt)=>{lt<=nt.keys.length-1&&(lt===0?Object.assign(dt,yt):dt[nt.up(nt.keys[lt])]=yt)},at)}):tt&&typeof tt=="object"?(Object.keys(tt).length>nt.keys.length?nt.keys:filterBreakpointKeys(nt.keys,Object.keys(tt))).forEach(lt=>{if(nt.keys.includes(lt)){const dt=tt[lt];dt!==void 0&&rt((yt,vt)=>{st===lt?Object.assign(yt,vt):yt[nt.up(lt)]=vt},dt)}}):(typeof tt=="number"||typeof tt=="string")&&rt((at,lt)=>{Object.assign(at,lt)},tt)};function getSelfSpacingVar(nt){return`--Grid-${nt}Spacing`}function getParentSpacingVar(nt){return`--Grid-parent-${nt}Spacing`}const selfColumnsVar="--Grid-columns",parentColumnsVar="--Grid-parent-columns",generateGridSizeStyles=({theme:nt,ownerState:tt})=>{const rt={};return traverseBreakpoints(nt.breakpoints,tt.size,(st,at)=>{let lt={};at==="grow"&&(lt={flexBasis:0,flexGrow:1,maxWidth:"100%"}),at==="auto"&&(lt={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof at=="number"&&(lt={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${at} / var(${parentColumnsVar}) - (var(${parentColumnsVar}) - ${at}) * (var(${getParentSpacingVar("column")}) / var(${parentColumnsVar})))`}),st(rt,lt)}),rt},generateGridOffsetStyles=({theme:nt,ownerState:tt})=>{const rt={};return traverseBreakpoints(nt.breakpoints,tt.offset,(st,at)=>{let lt={};at==="auto"&&(lt={marginLeft:"auto"}),typeof at=="number"&&(lt={marginLeft:at===0?"0px":`calc(100% * ${at} / var(${parentColumnsVar}) + var(${getParentSpacingVar("column")}) * ${at} / var(${parentColumnsVar}))`}),st(rt,lt)}),rt},generateGridColumnsStyles=({theme:nt,ownerState:tt})=>{if(!tt.container)return{};const rt={[selfColumnsVar]:12};return traverseBreakpoints(nt.breakpoints,tt.columns,(st,at)=>{const lt=at??12;st(rt,{[selfColumnsVar]:lt,"> *":{[parentColumnsVar]:lt}})}),rt},generateGridRowSpacingStyles=({theme:nt,ownerState:tt})=>{if(!tt.container)return{};const rt={};return traverseBreakpoints(nt.breakpoints,tt.rowSpacing,(st,at)=>{var dt;const lt=typeof at=="string"?at:(dt=nt.spacing)==null?void 0:dt.call(nt,at);st(rt,{[getSelfSpacingVar("row")]:lt,"> *":{[getParentSpacingVar("row")]:lt}})}),rt},generateGridColumnSpacingStyles=({theme:nt,ownerState:tt})=>{if(!tt.container)return{};const rt={};return traverseBreakpoints(nt.breakpoints,tt.columnSpacing,(st,at)=>{var dt;const lt=typeof at=="string"?at:(dt=nt.spacing)==null?void 0:dt.call(nt,at);st(rt,{[getSelfSpacingVar("column")]:lt,"> *":{[getParentSpacingVar("column")]:lt}})}),rt},generateGridDirectionStyles=({theme:nt,ownerState:tt})=>{if(!tt.container)return{};const rt={};return traverseBreakpoints(nt.breakpoints,tt.direction,(st,at)=>{st(rt,{flexDirection:at})}),rt},generateGridStyles=({ownerState:nt})=>({minWidth:0,boxSizing:"border-box",...nt.container&&{display:"flex",flexWrap:"wrap",...nt.wrap&&nt.wrap!=="wrap"&&{flexWrap:nt.wrap},gap:`var(${getSelfSpacingVar("row")}) var(${getSelfSpacingVar("column")})`}}),generateSizeClassNames=nt=>{const tt=[];return Object.entries(nt).forEach(([rt,st])=>{st!==!1&&st!==void 0&&tt.push(`grid-${rt}-${String(st)}`)}),tt},generateSpacingClassNames=(nt,tt="xs")=>{function rt(st){return st===void 0?!1:typeof st=="string"&&!Number.isNaN(Number(st))||typeof st=="number"&&st>0}if(rt(nt))return[`spacing-${tt}-${String(nt)}`];if(typeof nt=="object"&&!Array.isArray(nt)){const st=[];return Object.entries(nt).forEach(([at,lt])=>{rt(lt)&&st.push(`spacing-${at}-${String(lt)}`)}),st}return[]},generateDirectionClasses=nt=>nt===void 0?[]:typeof nt=="object"?Object.entries(nt).map(([tt,rt])=>`direction-${tt}-${rt}`):[`direction-xs-${String(nt)}`],defaultTheme$3=createTheme$1(),defaultCreateStyledComponent$1=styled$1("div",{name:"MuiGrid",slot:"Root",overridesResolver:(nt,tt)=>tt.root});function useThemePropsDefault$1(nt){return useThemeProps({props:nt,name:"MuiGrid",defaultTheme:defaultTheme$3})}function createGrid(nt={}){const{createStyledComponent:tt=defaultCreateStyledComponent$1,useThemeProps:rt=useThemePropsDefault$1,useTheme:st=useTheme$2,componentName:at="MuiGrid"}=nt,lt=(_t,bt)=>{const{container:Mt,direction:Ct,spacing:Tt,wrap:$t,size:Rt}=_t,Et={root:["root",Mt&&"container",$t!=="wrap"&&`wrap-xs-${String($t)}`,...generateDirectionClasses(Ct),...generateSizeClassNames(Rt),...Mt?generateSpacingClassNames(Tt,bt.breakpoints.keys[0]):[]]};return composeClasses(Et,wt=>generateUtilityClass(at,wt),{})};function dt(_t,bt,Mt=()=>!0){const Ct={};return _t===null||(Array.isArray(_t)?_t.forEach((Tt,$t)=>{Tt!==null&&Mt(Tt)&&bt.keys[$t]&&(Ct[bt.keys[$t]]=Tt)}):typeof _t=="object"?Object.keys(_t).forEach(Tt=>{const $t=_t[Tt];$t!=null&&Mt($t)&&(Ct[Tt]=$t)}):Ct[bt.keys[0]]=_t),Ct}const yt=tt(generateGridColumnsStyles,generateGridColumnSpacingStyles,generateGridRowSpacingStyles,generateGridSizeStyles,generateGridDirectionStyles,generateGridStyles,generateGridOffsetStyles),vt=reactExports.forwardRef(function(bt,Mt){const Ct=st(),Tt=rt(bt),$t=extendSxProp$1(Tt),{className:Rt,children:Et,columns:wt=12,container:Pt=!1,component:Ft="div",direction:Nt="row",wrap:Ot="wrap",size:Bt={},offset:Xt={},spacing:Zt=0,rowSpacing:rn=Zt,columnSpacing:Gt=Zt,unstable_level:nn=0,...cn}=$t,an=dt(Bt,Ct.breakpoints,dn=>dn!==!1),mn=dt(Xt,Ct.breakpoints),En=bt.columns??(nn?void 0:wt),Cn=bt.spacing??(nn?void 0:Zt),Mn=bt.rowSpacing??bt.spacing??(nn?void 0:rn),un=bt.columnSpacing??bt.spacing??(nn?void 0:Gt),Tn={...$t,level:nn,columns:En,container:Pt,direction:Nt,wrap:Ot,spacing:Cn,rowSpacing:Mn,columnSpacing:un,size:an,offset:mn},Pn=lt(Tn,Ct);return jsxRuntimeExports.jsx(yt,{ref:Mt,as:Ft,ownerState:Tn,className:clsx(Pn.root,Rt),...cn,children:reactExports.Children.map(Et,dn=>{var Un;return reactExports.isValidElement(dn)&&isMuiElement(dn,["Grid"])&&Pt&&dn.props.container?reactExports.cloneElement(dn,{unstable_level:((Un=dn.props)==null?void 0:Un.unstable_level)??nn+1}):dn})})});return vt.muiName="Grid",vt}const defaultTheme$2=createTheme$1(),defaultCreateStyledComponent=styled$1("div",{name:"MuiStack",slot:"Root",overridesResolver:(nt,tt)=>tt.root});function useThemePropsDefault(nt){return useThemeProps({props:nt,name:"MuiStack",defaultTheme:defaultTheme$2})}function joinChildren(nt,tt){const rt=reactExports.Children.toArray(nt).filter(Boolean);return rt.reduce((st,at,lt)=>(st.push(at),lt<rt.length-1&&st.push(reactExports.cloneElement(tt,{key:`separator-${lt}`})),st),[])}const getSideFromDirection=nt=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[nt],style=({ownerState:nt,theme:tt})=>{let rt={display:"flex",flexDirection:"column",...handleBreakpoints({theme:tt},resolveBreakpointValues({values:nt.direction,breakpoints:tt.breakpoints.values}),st=>({flexDirection:st}))};if(nt.spacing){const st=createUnarySpacing(tt),at=Object.keys(tt.breakpoints.values).reduce((vt,_t)=>((typeof nt.spacing=="object"&&nt.spacing[_t]!=null||typeof nt.direction=="object"&&nt.direction[_t]!=null)&&(vt[_t]=!0),vt),{}),lt=resolveBreakpointValues({values:nt.direction,base:at}),dt=resolveBreakpointValues({values:nt.spacing,base:at});typeof lt=="object"&&Object.keys(lt).forEach((vt,_t,bt)=>{if(!lt[vt]){const Ct=_t>0?lt[bt[_t-1]]:"column";lt[vt]=Ct}}),rt=deepmerge(rt,handleBreakpoints({theme:tt},dt,(vt,_t)=>nt.useFlexGap?{gap:getValue$3(st,vt)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(_t?lt[_t]:nt.direction)}`]:getValue$3(st,vt)}}))}return rt=mergeBreakpointsInOrder(tt.breakpoints,rt),rt};function createStack(nt={}){const{createStyledComponent:tt=defaultCreateStyledComponent,useThemeProps:rt=useThemePropsDefault,componentName:st="MuiStack"}=nt,at=()=>composeClasses({root:["root"]},vt=>generateUtilityClass(st,vt),{}),lt=tt(style);return reactExports.forwardRef(function(vt,_t){const bt=rt(vt),Mt=extendSxProp$1(bt),{component:Ct="div",direction:Tt="column",spacing:$t=0,divider:Rt,children:Et,className:wt,useFlexGap:Pt=!1,...Ft}=Mt,Nt={direction:Tt,spacing:$t,useFlexGap:Pt},Ot=at();return jsxRuntimeExports.jsx(lt,{as:Ct,ownerState:Nt,ref:_t,className:clsx(Ot.root,wt),...Ft,children:Rt?joinChildren(Et,Rt):Et})})}function getLight(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$2.white,default:common$2.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const light=getLight();function getDark(){return{text:{primary:common$2.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$2.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const dark=getDark();function addLightOrDark(nt,tt,rt,st){const at=st.light||st,lt=st.dark||st*1.5;nt[tt]||(nt.hasOwnProperty(rt)?nt[tt]=nt[rt]:tt==="light"?nt.light=lighten(nt.main,at):tt==="dark"&&(nt.dark=darken(nt.main,lt)))}function getDefaultPrimary(nt="light"){return nt==="dark"?{main:blue[200],light:blue[50],dark:blue[400]}:{main:blue[700],light:blue[400],dark:blue[800]}}function getDefaultSecondary(nt="light"){return nt==="dark"?{main:purple[200],light:purple[50],dark:purple[400]}:{main:purple[500],light:purple[300],dark:purple[700]}}function getDefaultError(nt="light"){return nt==="dark"?{main:red[500],light:red[300],dark:red[700]}:{main:red[700],light:red[400],dark:red[800]}}function getDefaultInfo(nt="light"){return nt==="dark"?{main:lightBlue[400],light:lightBlue[300],dark:lightBlue[700]}:{main:lightBlue[700],light:lightBlue[500],dark:lightBlue[900]}}function getDefaultSuccess(nt="light"){return nt==="dark"?{main:green[400],light:green[300],dark:green[700]}:{main:green[800],light:green[500],dark:green[900]}}function getDefaultWarning(nt="light"){return nt==="dark"?{main:orange[400],light:orange[300],dark:orange[700]}:{main:"#ed6c02",light:orange[500],dark:orange[900]}}function createPalette(nt){const{mode:tt="light",contrastThreshold:rt=3,tonalOffset:st=.2,...at}=nt,lt=nt.primary||getDefaultPrimary(tt),dt=nt.secondary||getDefaultSecondary(tt),yt=nt.error||getDefaultError(tt),vt=nt.info||getDefaultInfo(tt),_t=nt.success||getDefaultSuccess(tt),bt=nt.warning||getDefaultWarning(tt);function Mt(Rt){return getContrastRatio(Rt,dark.text.primary)>=rt?dark.text.primary:light.text.primary}const Ct=({color:Rt,name:Et,mainShade:wt=500,lightShade:Pt=300,darkShade:Ft=700})=>{if(Rt={...Rt},!Rt.main&&Rt[wt]&&(Rt.main=Rt[wt]),!Rt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Et?` (${Et})`:"",wt));if(typeof Rt.main!="string")throw new Error(formatMuiErrorMessage(12,Et?` (${Et})`:"",JSON.stringify(Rt.main)));return addLightOrDark(Rt,"light",Pt,st),addLightOrDark(Rt,"dark",Ft,st),Rt.contrastText||(Rt.contrastText=Mt(Rt.main)),Rt};let Tt;return tt==="light"?Tt=getLight():tt==="dark"&&(Tt=getDark()),deepmerge({common:{...common$2},mode:tt,primary:Ct({color:lt,name:"primary"}),secondary:Ct({color:dt,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:Ct({color:yt,name:"error"}),warning:Ct({color:bt,name:"warning"}),info:Ct({color:vt,name:"info"}),success:Ct({color:_t,name:"success"}),grey,contrastThreshold:rt,getContrastText:Mt,augmentColor:Ct,tonalOffset:st,...Tt},at)}function prepareTypographyVars(nt){const tt={};return Object.entries(nt).forEach(st=>{const[at,lt]=st;typeof lt=="object"&&(tt[at]=`${lt.fontStyle?`${lt.fontStyle} `:""}${lt.fontVariant?`${lt.fontVariant} `:""}${lt.fontWeight?`${lt.fontWeight} `:""}${lt.fontStretch?`${lt.fontStretch} `:""}${lt.fontSize||""}${lt.lineHeight?`/${lt.lineHeight} `:""}${lt.fontFamily||""}`)}),tt}function createMixins(nt,tt){return{toolbar:{minHeight:56,[nt.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[nt.up("sm")]:{minHeight:64}},...tt}}function round$2(nt){return Math.round(nt*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(nt,tt){const{fontFamily:rt=defaultFontFamily,fontSize:st=14,fontWeightLight:at=300,fontWeightRegular:lt=400,fontWeightMedium:dt=500,fontWeightBold:yt=700,htmlFontSize:vt=16,allVariants:_t,pxToRem:bt,...Mt}=typeof tt=="function"?tt(nt):tt,Ct=st/14,Tt=bt||(Et=>`${Et/vt*Ct}rem`),$t=(Et,wt,Pt,Ft,Nt)=>({fontFamily:rt,fontWeight:Et,fontSize:Tt(wt),lineHeight:Pt,...rt===defaultFontFamily?{letterSpacing:`${round$2(Ft/wt)}em`}:{},...Nt,..._t}),Rt={h1:$t(at,96,1.167,-1.5),h2:$t(at,60,1.2,-.5),h3:$t(lt,48,1.167,0),h4:$t(lt,34,1.235,.25),h5:$t(lt,24,1.334,0),h6:$t(dt,20,1.6,.15),subtitle1:$t(lt,16,1.75,.15),subtitle2:$t(dt,14,1.57,.1),body1:$t(lt,16,1.5,.15),body2:$t(lt,14,1.43,.15),button:$t(dt,14,1.75,.4,caseAllCaps),caption:$t(lt,12,1.66,.4),overline:$t(lt,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge({htmlFontSize:vt,pxToRem:Tt,fontFamily:rt,fontSize:st,fontWeightLight:at,fontWeightRegular:lt,fontWeightMedium:dt,fontWeightBold:yt,...Rt},Mt,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...nt){return[`${nt[0]}px ${nt[1]}px ${nt[2]}px ${nt[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${nt[4]}px ${nt[5]}px ${nt[6]}px ${nt[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${nt[8]}px ${nt[9]}px ${nt[10]}px ${nt[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(nt){return`${Math.round(nt)}ms`}function getAutoHeightDuration(nt){if(!nt)return 0;const tt=nt/36;return Math.min(Math.round((4+15*tt**.25+tt/5)*10),3e3)}function createTransitions(nt){const tt={...easing,...nt.easing},rt={...duration,...nt.duration};return{getAutoHeightDuration,create:(at=["all"],lt={})=>{const{duration:dt=rt.standard,easing:yt=tt.easeInOut,delay:vt=0,..._t}=lt;return(Array.isArray(at)?at:[at]).map(bt=>`${bt} ${typeof dt=="string"?dt:formatMs(dt)} ${yt} ${typeof vt=="string"?vt:formatMs(vt)}`).join(",")},...nt,easing:tt,duration:rt}}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function isSerializable(nt){return isPlainObject$8(nt)||typeof nt>"u"||typeof nt=="string"||typeof nt=="boolean"||typeof nt=="number"||Array.isArray(nt)}function stringifyTheme(nt={}){const tt={...nt};function rt(st){const at=Object.entries(st);for(let lt=0;lt<at.length;lt++){const[dt,yt]=at[lt];!isSerializable(yt)||dt.startsWith("unstable_")?delete st[dt]:isPlainObject$8(yt)&&(st[dt]={...yt},rt(st[dt]))}}return rt(tt),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(tt,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function createThemeNoVars(nt={},...tt){const{breakpoints:rt,mixins:st={},spacing:at,palette:lt={},transitions:dt={},typography:yt={},shape:vt,..._t}=nt;if(nt.vars)throw new Error(formatMuiErrorMessage(20));const bt=createPalette(lt),Mt=createTheme$1(nt);let Ct=deepmerge(Mt,{mixins:createMixins(Mt.breakpoints,st),palette:bt,shadows:shadows.slice(),typography:createTypography(bt,yt),transitions:createTransitions(dt),zIndex:{...zIndex}});return Ct=deepmerge(Ct,_t),Ct=tt.reduce((Tt,$t)=>deepmerge(Tt,$t),Ct),Ct.unstable_sxConfig={...defaultSxConfig,..._t==null?void 0:_t.unstable_sxConfig},Ct.unstable_sx=function($t){return styleFunctionSx({sx:$t,theme:this})},Ct.toRuntimeSource=stringifyTheme,Ct}function getOverlayAlpha(nt){let tt;return nt<1?tt=5.11916*nt**2:tt=4.5*Math.log(nt+1)+2,Math.round(tt*10)/1e3}const defaultDarkOverlays=[...Array(25)].map((nt,tt)=>{if(tt===0)return"none";const rt=getOverlayAlpha(tt);return`linear-gradient(rgba(255 255 255 / ${rt}), rgba(255 255 255 / ${rt}))`});function getOpacity(nt){return{inputPlaceholder:nt==="dark"?.5:.42,inputUnderline:nt==="dark"?.7:.42,switchTrackDisabled:nt==="dark"?.2:.12,switchTrack:nt==="dark"?.3:.38}}function getOverlays(nt){return nt==="dark"?defaultDarkOverlays:[]}function createColorScheme(nt){const{palette:tt={mode:"light"},opacity:rt,overlays:st,...at}=nt,lt=createPalette(tt);return{palette:lt,opacity:{...getOpacity(lt.mode),...rt},overlays:st||getOverlays(lt.mode),...at}}function shouldSkipGeneratingVar(nt){var tt;return!!nt[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!nt[0].match(/sxConfig$/)||nt[0]==="palette"&&!!((tt=nt[1])!=null&&tt.match(/(mode|contrastThreshold|tonalOffset)/))}const excludeVariablesFromRoot=nt=>[...[...Array(25)].map((tt,rt)=>`--${nt?`${nt}-`:""}overlays-${rt}`),`--${nt?`${nt}-`:""}palette-AppBar-darkBg`,`--${nt?`${nt}-`:""}palette-AppBar-darkColor`],defaultGetSelector=nt=>(tt,rt)=>{const st=nt.rootSelector||":root",at=nt.colorSchemeSelector;let lt=at;if(at==="class"&&(lt=".%s"),at==="data"&&(lt="[data-%s]"),at!=null&&at.startsWith("data-")&&!at.includes("%s")&&(lt=`[${at}="%s"]`),nt.defaultColorScheme===tt){if(tt==="dark"){const dt={};return excludeVariablesFromRoot(nt.cssVarPrefix).forEach(yt=>{dt[yt]=rt[yt],delete rt[yt]}),lt==="media"?{[st]:rt,"@media (prefers-color-scheme: dark)":{[st]:dt}}:lt?{[lt.replace("%s",tt)]:dt,[`${st}, ${lt.replace("%s",tt)}`]:rt}:{[st]:{...rt,...dt}}}if(lt&&lt!=="media")return`${st}, ${lt.replace("%s",String(tt))}`}else if(tt){if(lt==="media")return{[`@media (prefers-color-scheme: ${String(tt)})`]:{[st]:rt}};if(lt)return lt.replace("%s",String(tt))}return st};function assignNode(nt,tt){tt.forEach(rt=>{nt[rt]||(nt[rt]={})})}function setColor(nt,tt,rt){!nt[tt]&&rt&&(nt[tt]=rt)}function toRgb(nt){return typeof nt!="string"||!nt.startsWith("hsl")?nt:hslToRgb(nt)}function setColorChannel(nt,tt){`${tt}Channel`in nt||(nt[`${tt}Channel`]=private_safeColorChannel(toRgb(nt[tt])))}function getSpacingVal(nt){return typeof nt=="number"?`${nt}px`:typeof nt=="string"||typeof nt=="function"||Array.isArray(nt)?nt:"8px"}const silent=nt=>{try{return nt()}catch{}},createGetCssVar=(nt="mui")=>createGetCssVar$1(nt);function attachColorScheme$1(nt,tt,rt,st){if(!tt)return;tt=tt===!0?{}:tt;const at=st==="dark"?"dark":"light";if(!rt){nt[st]=createColorScheme({...tt,palette:{mode:at,...tt==null?void 0:tt.palette}});return}const{palette:lt,...dt}=createThemeNoVars({...rt,palette:{mode:at,...tt==null?void 0:tt.palette}});return nt[st]={...tt,palette:lt,opacity:{...getOpacity(at),...tt==null?void 0:tt.opacity},overlays:(tt==null?void 0:tt.overlays)||getOverlays(at)},dt}function createThemeWithVars(nt={},...tt){const{colorSchemes:rt={light:!0},defaultColorScheme:st,disableCssColorScheme:at=!1,cssVarPrefix:lt="mui",shouldSkipGeneratingVar:dt=shouldSkipGeneratingVar,colorSchemeSelector:yt=rt.light&&rt.dark?"media":void 0,rootSelector:vt=":root",..._t}=nt,bt=Object.keys(rt)[0],Mt=st||(rt.light&&bt!=="light"?"light":bt),Ct=createGetCssVar(lt),{[Mt]:Tt,light:$t,dark:Rt,...Et}=rt,wt={...Et};let Pt=Tt;if((Mt==="dark"&&!("dark"in rt)||Mt==="light"&&!("light"in rt))&&(Pt=!0),!Pt)throw new Error(formatMuiErrorMessage(21,Mt));const Ft=attachColorScheme$1(wt,Pt,_t,Mt);$t&&!wt.light&&attachColorScheme$1(wt,$t,void 0,"light"),Rt&&!wt.dark&&attachColorScheme$1(wt,Rt,void 0,"dark");let Nt={defaultColorScheme:Mt,...Ft,cssVarPrefix:lt,colorSchemeSelector:yt,rootSelector:vt,getCssVar:Ct,colorSchemes:wt,font:{...prepareTypographyVars(Ft.typography),...Ft.font},spacing:getSpacingVal(_t.spacing)};Object.keys(Nt.colorSchemes).forEach(rn=>{const Gt=Nt.colorSchemes[rn].palette,nn=cn=>{const an=cn.split("-"),mn=an[1],En=an[2];return Ct(cn,Gt[mn][En])};if(Gt.mode==="light"&&(setColor(Gt.common,"background","#fff"),setColor(Gt.common,"onBackground","#000")),Gt.mode==="dark"&&(setColor(Gt.common,"background","#000"),setColor(Gt.common,"onBackground","#fff")),assignNode(Gt,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),Gt.mode==="light"){setColor(Gt.Alert,"errorColor",private_safeDarken(Gt.error.light,.6)),setColor(Gt.Alert,"infoColor",private_safeDarken(Gt.info.light,.6)),setColor(Gt.Alert,"successColor",private_safeDarken(Gt.success.light,.6)),setColor(Gt.Alert,"warningColor",private_safeDarken(Gt.warning.light,.6)),setColor(Gt.Alert,"errorFilledBg",nn("palette-error-main")),setColor(Gt.Alert,"infoFilledBg",nn("palette-info-main")),setColor(Gt.Alert,"successFilledBg",nn("palette-success-main")),setColor(Gt.Alert,"warningFilledBg",nn("palette-warning-main")),setColor(Gt.Alert,"errorFilledColor",silent(()=>Gt.getContrastText(Gt.error.main))),setColor(Gt.Alert,"infoFilledColor",silent(()=>Gt.getContrastText(Gt.info.main))),setColor(Gt.Alert,"successFilledColor",silent(()=>Gt.getContrastText(Gt.success.main))),setColor(Gt.Alert,"warningFilledColor",silent(()=>Gt.getContrastText(Gt.warning.main))),setColor(Gt.Alert,"errorStandardBg",private_safeLighten(Gt.error.light,.9)),setColor(Gt.Alert,"infoStandardBg",private_safeLighten(Gt.info.light,.9)),setColor(Gt.Alert,"successStandardBg",private_safeLighten(Gt.success.light,.9)),setColor(Gt.Alert,"warningStandardBg",private_safeLighten(Gt.warning.light,.9)),setColor(Gt.Alert,"errorIconColor",nn("palette-error-main")),setColor(Gt.Alert,"infoIconColor",nn("palette-info-main")),setColor(Gt.Alert,"successIconColor",nn("palette-success-main")),setColor(Gt.Alert,"warningIconColor",nn("palette-warning-main")),setColor(Gt.AppBar,"defaultBg",nn("palette-grey-100")),setColor(Gt.Avatar,"defaultBg",nn("palette-grey-400")),setColor(Gt.Button,"inheritContainedBg",nn("palette-grey-300")),setColor(Gt.Button,"inheritContainedHoverBg",nn("palette-grey-A100")),setColor(Gt.Chip,"defaultBorder",nn("palette-grey-400")),setColor(Gt.Chip,"defaultAvatarColor",nn("palette-grey-700")),setColor(Gt.Chip,"defaultIconColor",nn("palette-grey-700")),setColor(Gt.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),setColor(Gt.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),setColor(Gt.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),setColor(Gt.LinearProgress,"primaryBg",private_safeLighten(Gt.primary.main,.62)),setColor(Gt.LinearProgress,"secondaryBg",private_safeLighten(Gt.secondary.main,.62)),setColor(Gt.LinearProgress,"errorBg",private_safeLighten(Gt.error.main,.62)),setColor(Gt.LinearProgress,"infoBg",private_safeLighten(Gt.info.main,.62)),setColor(Gt.LinearProgress,"successBg",private_safeLighten(Gt.success.main,.62)),setColor(Gt.LinearProgress,"warningBg",private_safeLighten(Gt.warning.main,.62)),setColor(Gt.Skeleton,"bg",`rgba(${nn("palette-text-primaryChannel")} / 0.11)`),setColor(Gt.Slider,"primaryTrack",private_safeLighten(Gt.primary.main,.62)),setColor(Gt.Slider,"secondaryTrack",private_safeLighten(Gt.secondary.main,.62)),setColor(Gt.Slider,"errorTrack",private_safeLighten(Gt.error.main,.62)),setColor(Gt.Slider,"infoTrack",private_safeLighten(Gt.info.main,.62)),setColor(Gt.Slider,"successTrack",private_safeLighten(Gt.success.main,.62)),setColor(Gt.Slider,"warningTrack",private_safeLighten(Gt.warning.main,.62));const cn=private_safeEmphasize(Gt.background.default,.8);setColor(Gt.SnackbarContent,"bg",cn),setColor(Gt.SnackbarContent,"color",silent(()=>Gt.getContrastText(cn))),setColor(Gt.SpeedDialAction,"fabHoverBg",private_safeEmphasize(Gt.background.paper,.15)),setColor(Gt.StepConnector,"border",nn("palette-grey-400")),setColor(Gt.StepContent,"border",nn("palette-grey-400")),setColor(Gt.Switch,"defaultColor",nn("palette-common-white")),setColor(Gt.Switch,"defaultDisabledColor",nn("palette-grey-100")),setColor(Gt.Switch,"primaryDisabledColor",private_safeLighten(Gt.primary.main,.62)),setColor(Gt.Switch,"secondaryDisabledColor",private_safeLighten(Gt.secondary.main,.62)),setColor(Gt.Switch,"errorDisabledColor",private_safeLighten(Gt.error.main,.62)),setColor(Gt.Switch,"infoDisabledColor",private_safeLighten(Gt.info.main,.62)),setColor(Gt.Switch,"successDisabledColor",private_safeLighten(Gt.success.main,.62)),setColor(Gt.Switch,"warningDisabledColor",private_safeLighten(Gt.warning.main,.62)),setColor(Gt.TableCell,"border",private_safeLighten(private_safeAlpha(Gt.divider,1),.88)),setColor(Gt.Tooltip,"bg",private_safeAlpha(Gt.grey[700],.92))}if(Gt.mode==="dark"){setColor(Gt.Alert,"errorColor",private_safeLighten(Gt.error.light,.6)),setColor(Gt.Alert,"infoColor",private_safeLighten(Gt.info.light,.6)),setColor(Gt.Alert,"successColor",private_safeLighten(Gt.success.light,.6)),setColor(Gt.Alert,"warningColor",private_safeLighten(Gt.warning.light,.6)),setColor(Gt.Alert,"errorFilledBg",nn("palette-error-dark")),setColor(Gt.Alert,"infoFilledBg",nn("palette-info-dark")),setColor(Gt.Alert,"successFilledBg",nn("palette-success-dark")),setColor(Gt.Alert,"warningFilledBg",nn("palette-warning-dark")),setColor(Gt.Alert,"errorFilledColor",silent(()=>Gt.getContrastText(Gt.error.dark))),setColor(Gt.Alert,"infoFilledColor",silent(()=>Gt.getContrastText(Gt.info.dark))),setColor(Gt.Alert,"successFilledColor",silent(()=>Gt.getContrastText(Gt.success.dark))),setColor(Gt.Alert,"warningFilledColor",silent(()=>Gt.getContrastText(Gt.warning.dark))),setColor(Gt.Alert,"errorStandardBg",private_safeDarken(Gt.error.light,.9)),setColor(Gt.Alert,"infoStandardBg",private_safeDarken(Gt.info.light,.9)),setColor(Gt.Alert,"successStandardBg",private_safeDarken(Gt.success.light,.9)),setColor(Gt.Alert,"warningStandardBg",private_safeDarken(Gt.warning.light,.9)),setColor(Gt.Alert,"errorIconColor",nn("palette-error-main")),setColor(Gt.Alert,"infoIconColor",nn("palette-info-main")),setColor(Gt.Alert,"successIconColor",nn("palette-success-main")),setColor(Gt.Alert,"warningIconColor",nn("palette-warning-main")),setColor(Gt.AppBar,"defaultBg",nn("palette-grey-900")),setColor(Gt.AppBar,"darkBg",nn("palette-background-paper")),setColor(Gt.AppBar,"darkColor",nn("palette-text-primary")),setColor(Gt.Avatar,"defaultBg",nn("palette-grey-600")),setColor(Gt.Button,"inheritContainedBg",nn("palette-grey-800")),setColor(Gt.Button,"inheritContainedHoverBg",nn("palette-grey-700")),setColor(Gt.Chip,"defaultBorder",nn("palette-grey-700")),setColor(Gt.Chip,"defaultAvatarColor",nn("palette-grey-300")),setColor(Gt.Chip,"defaultIconColor",nn("palette-grey-300")),setColor(Gt.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),setColor(Gt.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),setColor(Gt.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),setColor(Gt.LinearProgress,"primaryBg",private_safeDarken(Gt.primary.main,.5)),setColor(Gt.LinearProgress,"secondaryBg",private_safeDarken(Gt.secondary.main,.5)),setColor(Gt.LinearProgress,"errorBg",private_safeDarken(Gt.error.main,.5)),setColor(Gt.LinearProgress,"infoBg",private_safeDarken(Gt.info.main,.5)),setColor(Gt.LinearProgress,"successBg",private_safeDarken(Gt.success.main,.5)),setColor(Gt.LinearProgress,"warningBg",private_safeDarken(Gt.warning.main,.5)),setColor(Gt.Skeleton,"bg",`rgba(${nn("palette-text-primaryChannel")} / 0.13)`),setColor(Gt.Slider,"primaryTrack",private_safeDarken(Gt.primary.main,.5)),setColor(Gt.Slider,"secondaryTrack",private_safeDarken(Gt.secondary.main,.5)),setColor(Gt.Slider,"errorTrack",private_safeDarken(Gt.error.main,.5)),setColor(Gt.Slider,"infoTrack",private_safeDarken(Gt.info.main,.5)),setColor(Gt.Slider,"successTrack",private_safeDarken(Gt.success.main,.5)),setColor(Gt.Slider,"warningTrack",private_safeDarken(Gt.warning.main,.5));const cn=private_safeEmphasize(Gt.background.default,.98);setColor(Gt.SnackbarContent,"bg",cn),setColor(Gt.SnackbarContent,"color",silent(()=>Gt.getContrastText(cn))),setColor(Gt.SpeedDialAction,"fabHoverBg",private_safeEmphasize(Gt.background.paper,.15)),setColor(Gt.StepConnector,"border",nn("palette-grey-600")),setColor(Gt.StepContent,"border",nn("palette-grey-600")),setColor(Gt.Switch,"defaultColor",nn("palette-grey-300")),setColor(Gt.Switch,"defaultDisabledColor",nn("palette-grey-600")),setColor(Gt.Switch,"primaryDisabledColor",private_safeDarken(Gt.primary.main,.55)),setColor(Gt.Switch,"secondaryDisabledColor",private_safeDarken(Gt.secondary.main,.55)),setColor(Gt.Switch,"errorDisabledColor",private_safeDarken(Gt.error.main,.55)),setColor(Gt.Switch,"infoDisabledColor",private_safeDarken(Gt.info.main,.55)),setColor(Gt.Switch,"successDisabledColor",private_safeDarken(Gt.success.main,.55)),setColor(Gt.Switch,"warningDisabledColor",private_safeDarken(Gt.warning.main,.55)),setColor(Gt.TableCell,"border",private_safeDarken(private_safeAlpha(Gt.divider,1),.68)),setColor(Gt.Tooltip,"bg",private_safeAlpha(Gt.grey[700],.92))}setColorChannel(Gt.background,"default"),setColorChannel(Gt.background,"paper"),setColorChannel(Gt.common,"background"),setColorChannel(Gt.common,"onBackground"),setColorChannel(Gt,"divider"),Object.keys(Gt).forEach(cn=>{const an=Gt[cn];cn!=="tonalOffset"&&an&&typeof an=="object"&&(an.main&&setColor(Gt[cn],"mainChannel",private_safeColorChannel(toRgb(an.main))),an.light&&setColor(Gt[cn],"lightChannel",private_safeColorChannel(toRgb(an.light))),an.dark&&setColor(Gt[cn],"darkChannel",private_safeColorChannel(toRgb(an.dark))),an.contrastText&&setColor(Gt[cn],"contrastTextChannel",private_safeColorChannel(toRgb(an.contrastText))),cn==="text"&&(setColorChannel(Gt[cn],"primary"),setColorChannel(Gt[cn],"secondary")),cn==="action"&&(an.active&&setColorChannel(Gt[cn],"active"),an.selected&&setColorChannel(Gt[cn],"selected")))})}),Nt=tt.reduce((rn,Gt)=>deepmerge(rn,Gt),Nt);const Ot={prefix:lt,disableCssColorScheme:at,shouldSkipGeneratingVar:dt,getSelector:defaultGetSelector(Nt)},{vars:Bt,generateThemeVars:Xt,generateStyleSheets:Zt}=prepareCssVars(Nt,Ot);return Nt.vars=Bt,Object.entries(Nt.colorSchemes[Nt.defaultColorScheme]).forEach(([rn,Gt])=>{Nt[rn]=Gt}),Nt.generateThemeVars=Xt,Nt.generateStyleSheets=Zt,Nt.generateSpacing=function(){return createSpacing(_t.spacing,createUnarySpacing(this))},Nt.getColorSchemeSelector=createGetColorSchemeSelector(yt),Nt.spacing=Nt.generateSpacing(),Nt.shouldSkipGeneratingVar=dt,Nt.unstable_sxConfig={...defaultSxConfig,..._t==null?void 0:_t.unstable_sxConfig},Nt.unstable_sx=function(Gt){return styleFunctionSx({sx:Gt,theme:this})},Nt.toRuntimeSource=stringifyTheme,Nt}function attachColorScheme(nt,tt,rt){nt.colorSchemes&&rt&&(nt.colorSchemes[tt]={...rt!==!0&&rt,palette:createPalette({...rt===!0?{}:rt.palette,mode:tt})})}function createTheme(nt={},...tt){const{palette:rt,cssVariables:st=!1,colorSchemes:at=rt?void 0:{light:!0},defaultColorScheme:lt=rt==null?void 0:rt.mode,...dt}=nt,yt=lt||"light",vt=at==null?void 0:at[yt],_t={...at,...rt?{[yt]:{...typeof vt!="boolean"&&vt,palette:rt}}:void 0};if(st===!1){if(!("colorSchemes"in nt))return createThemeNoVars(nt,...tt);let bt=rt;"palette"in nt||_t[yt]&&(_t[yt]!==!0?bt=_t[yt].palette:yt==="dark"&&(bt={mode:"dark"}));const Mt=createThemeNoVars({...nt,palette:bt},...tt);return Mt.defaultColorScheme=yt,Mt.colorSchemes=_t,Mt.palette.mode==="light"&&(Mt.colorSchemes.light={..._t.light!==!0&&_t.light,palette:Mt.palette},attachColorScheme(Mt,"dark",_t.dark)),Mt.palette.mode==="dark"&&(Mt.colorSchemes.dark={..._t.dark!==!0&&_t.dark,palette:Mt.palette},attachColorScheme(Mt,"light",_t.light)),Mt}return!rt&&!("light"in _t)&&yt==="light"&&(_t.light=!0),createThemeWithVars({...dt,colorSchemes:_t,defaultColorScheme:yt,...typeof st!="boolean"&&st},...tt)}const defaultTheme$1=createTheme();function useTheme(){const nt=useTheme$2(defaultTheme$1);return nt[THEME_ID]||nt}function slotShouldForwardProp(nt){return nt!=="ownerState"&&nt!=="theme"&&nt!=="sx"&&nt!=="as"}const rootShouldForwardProp=nt=>slotShouldForwardProp(nt)&&nt!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function ThemeProviderNoVars({theme:nt,...tt}){const rt=THEME_ID in nt?nt[THEME_ID]:void 0;return jsxRuntimeExports.jsx(ThemeProvider$1,{...tt,themeId:rt?THEME_ID:void 0,theme:rt||nt})}const defaultConfig={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:InternalCssVarsProvider,useColorScheme,getInitColorSchemeScript:deprecatedGetInitColorSchemeScript}=createCssVarsProvider({themeId:THEME_ID,theme:()=>createTheme({cssVariables:!0}),colorSchemeStorageKey:defaultConfig.colorSchemeStorageKey,modeStorageKey:defaultConfig.modeStorageKey,defaultColorScheme:{light:defaultConfig.defaultLightColorScheme,dark:defaultConfig.defaultDarkColorScheme},resolveTheme:nt=>{const tt={...nt,typography:createTypography(nt.palette,nt.typography)};return tt.unstable_sx=function(st){return styleFunctionSx({sx:st,theme:this})},tt}}),CssVarsProvider=InternalCssVarsProvider;function ThemeProvider({theme:nt,...tt}){return typeof nt=="function"?jsxRuntimeExports.jsx(ThemeProviderNoVars,{theme:nt,...tt}):"colorSchemes"in(THEME_ID in nt?nt[THEME_ID]:nt)?jsxRuntimeExports.jsx(CssVarsProvider,{theme:nt,...tt}):jsxRuntimeExports.jsx(ThemeProviderNoVars,{theme:nt,...tt})}function GlobalStyles$1(nt){return jsxRuntimeExports.jsx(GlobalStyles$2,{...nt,defaultTheme:defaultTheme$1,themeId:THEME_ID})}function globalCss(nt){return function(rt){return jsxRuntimeExports.jsx(GlobalStyles$1,{styles:typeof nt=="function"?st=>nt({theme:st,...rt}):nt})}}function internal_createExtendSxProp(){return extendSxProp$1}const memoTheme=unstable_memoTheme;function useDefaultProps(nt){return useDefaultProps$1(nt)}function getSvgIconUtilityClass(nt){return generateUtilityClass("MuiSvgIcon",nt)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const useUtilityClasses$L=nt=>{const{color:tt,fontSize:rt,classes:st}=nt,at={root:["root",tt!=="inherit"&&`color${capitalize(tt)}`,`fontSize${capitalize(rt)}`]};return composeClasses(at,getSvgIconUtilityClass,st)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.color!=="inherit"&&tt[`color${capitalize(rt.color)}`],tt[`fontSize${capitalize(rt.fontSize)}`]]}})(memoTheme(({theme:nt})=>{var tt,rt,st,at,lt,dt,yt,vt,_t,bt,Mt,Ct,Tt,$t;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(at=(tt=nt.transitions)==null?void 0:tt.create)==null?void 0:at.call(tt,"fill",{duration:(st=(rt=(nt.vars??nt).transitions)==null?void 0:rt.duration)==null?void 0:st.shorter}),variants:[{props:Rt=>!Rt.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((dt=(lt=nt.typography)==null?void 0:lt.pxToRem)==null?void 0:dt.call(lt,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((vt=(yt=nt.typography)==null?void 0:yt.pxToRem)==null?void 0:vt.call(yt,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((bt=(_t=nt.typography)==null?void 0:_t.pxToRem)==null?void 0:bt.call(_t,35))||"2.1875rem"}},...Object.entries((nt.vars??nt).palette).filter(([,Rt])=>Rt&&Rt.main).map(([Rt])=>{var Et,wt;return{props:{color:Rt},style:{color:(wt=(Et=(nt.vars??nt).palette)==null?void 0:Et[Rt])==null?void 0:wt.main}}}),{props:{color:"action"},style:{color:(Ct=(Mt=(nt.vars??nt).palette)==null?void 0:Mt.action)==null?void 0:Ct.active}},{props:{color:"disabled"},style:{color:($t=(Tt=(nt.vars??nt).palette)==null?void 0:Tt.action)==null?void 0:$t.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),SvgIcon=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiSvgIcon"}),{children:at,className:lt,color:dt="inherit",component:yt="svg",fontSize:vt="medium",htmlColor:_t,inheritViewBox:bt=!1,titleAccess:Mt,viewBox:Ct="0 0 24 24",...Tt}=st,$t=reactExports.isValidElement(at)&&at.type==="svg",Rt={...st,color:dt,component:yt,fontSize:vt,instanceFontSize:tt.fontSize,inheritViewBox:bt,viewBox:Ct,hasSvgAsChild:$t},Et={};bt||(Et.viewBox=Ct);const wt=useUtilityClasses$L(Rt);return jsxRuntimeExports.jsxs(SvgIconRoot,{as:yt,className:clsx(wt.root,lt),focusable:"false",color:_t,"aria-hidden":Mt?void 0:!0,role:Mt?"img":void 0,ref:rt,...Et,...Tt,...$t&&at.props,ownerState:Rt,children:[$t?at.props.children:at,Mt?jsxRuntimeExports.jsx("title",{children:Mt}):null]})});SvgIcon.muiName="SvgIcon";function createSvgIcon(nt,tt){function rt(st,at){return jsxRuntimeExports.jsx(SvgIcon,{"data-testid":`${tt}Icon`,ref:at,...st,children:nt})}return rt.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(rt))}function _objectWithoutPropertiesLoose$f(nt,tt){if(nt==null)return{};var rt={};for(var st in nt)if({}.hasOwnProperty.call(nt,st)){if(tt.includes(st))continue;rt[st]=nt[st]}return rt}function _setPrototypeOf$1(nt,tt){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,st){return rt.__proto__=st,rt},_setPrototypeOf$1(nt,tt)}function _inheritsLoose$1(nt,tt){nt.prototype=Object.create(tt.prototype),nt.prototype.constructor=nt,_setPrototypeOf$1(nt,tt)}const config={disabled:!1},TransitionGroupContext=ReactExports.createContext(null);var forceReflow=function(tt){return tt.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(nt){_inheritsLoose$1(tt,nt);function tt(st,at){var lt;lt=nt.call(this,st,at)||this;var dt=at,yt=dt&&!dt.isMounting?st.enter:st.appear,vt;return lt.appearStatus=null,st.in?yt?(vt=EXITED,lt.appearStatus=ENTERING):vt=ENTERED:st.unmountOnExit||st.mountOnEnter?vt=UNMOUNTED:vt=EXITED,lt.state={status:vt},lt.nextCallback=null,lt}tt.getDerivedStateFromProps=function(at,lt){var dt=at.in;return dt&&lt.status===UNMOUNTED?{status:EXITED}:null};var rt=tt.prototype;return rt.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},rt.componentDidUpdate=function(at){var lt=null;if(at!==this.props){var dt=this.state.status;this.props.in?dt!==ENTERING&&dt!==ENTERED&&(lt=ENTERING):(dt===ENTERING||dt===ENTERED)&&(lt=EXITING)}this.updateStatus(!1,lt)},rt.componentWillUnmount=function(){this.cancelNextCallback()},rt.getTimeouts=function(){var at=this.props.timeout,lt,dt,yt;return lt=dt=yt=at,at!=null&&typeof at!="number"&&(lt=at.exit,dt=at.enter,yt=at.appear!==void 0?at.appear:dt),{exit:lt,enter:dt,appear:yt}},rt.updateStatus=function(at,lt){if(at===void 0&&(at=!1),lt!==null)if(this.cancelNextCallback(),lt===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var dt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);dt&&forceReflow(dt)}this.performEnter(at)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},rt.performEnter=function(at){var lt=this,dt=this.props.enter,yt=this.context?this.context.isMounting:at,vt=this.props.nodeRef?[yt]:[ReactDOM.findDOMNode(this),yt],_t=vt[0],bt=vt[1],Mt=this.getTimeouts(),Ct=yt?Mt.appear:Mt.enter;if(!at&&!dt||config.disabled){this.safeSetState({status:ENTERED},function(){lt.props.onEntered(_t)});return}this.props.onEnter(_t,bt),this.safeSetState({status:ENTERING},function(){lt.props.onEntering(_t,bt),lt.onTransitionEnd(Ct,function(){lt.safeSetState({status:ENTERED},function(){lt.props.onEntered(_t,bt)})})})},rt.performExit=function(){var at=this,lt=this.props.exit,dt=this.getTimeouts(),yt=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!lt||config.disabled){this.safeSetState({status:EXITED},function(){at.props.onExited(yt)});return}this.props.onExit(yt),this.safeSetState({status:EXITING},function(){at.props.onExiting(yt),at.onTransitionEnd(dt.exit,function(){at.safeSetState({status:EXITED},function(){at.props.onExited(yt)})})})},rt.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},rt.safeSetState=function(at,lt){lt=this.setNextCallback(lt),this.setState(at,lt)},rt.setNextCallback=function(at){var lt=this,dt=!0;return this.nextCallback=function(yt){dt&&(dt=!1,lt.nextCallback=null,at(yt))},this.nextCallback.cancel=function(){dt=!1},this.nextCallback},rt.onTransitionEnd=function(at,lt){this.setNextCallback(lt);var dt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),yt=at==null&&!this.props.addEndListener;if(!dt||yt){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var vt=this.props.nodeRef?[this.nextCallback]:[dt,this.nextCallback],_t=vt[0],bt=vt[1];this.props.addEndListener(_t,bt)}at!=null&&setTimeout(this.nextCallback,at)},rt.render=function(){var at=this.state.status;if(at===UNMOUNTED)return null;var lt=this.props,dt=lt.children;lt.in,lt.mountOnEnter,lt.unmountOnExit,lt.appear,lt.enter,lt.exit,lt.timeout,lt.addEndListener,lt.onEnter,lt.onEntering,lt.onEntered,lt.onExit,lt.onExiting,lt.onExited,lt.nodeRef;var yt=_objectWithoutPropertiesLoose$f(lt,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ReactExports.createElement(TransitionGroupContext.Provider,{value:null},typeof dt=="function"?dt(at,yt):ReactExports.cloneElement(ReactExports.Children.only(dt),yt))},tt}(ReactExports.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$4(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$4,onEntering:noop$4,onEntered:noop$4,onExit:noop$4,onExiting:noop$4,onExited:noop$4};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function _assertThisInitialized$1(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function getChildMapping(nt,tt){var rt=function(lt){return tt&&reactExports.isValidElement(lt)?tt(lt):lt},st=Object.create(null);return nt&&reactExports.Children.map(nt,function(at){return at}).forEach(function(at){st[at.key]=rt(at)}),st}function mergeChildMappings(nt,tt){nt=nt||{},tt=tt||{};function rt(bt){return bt in tt?tt[bt]:nt[bt]}var st=Object.create(null),at=[];for(var lt in nt)lt in tt?at.length&&(st[lt]=at,at=[]):at.push(lt);var dt,yt={};for(var vt in tt){if(st[vt])for(dt=0;dt<st[vt].length;dt++){var _t=st[vt][dt];yt[st[vt][dt]]=rt(_t)}yt[vt]=rt(vt)}for(dt=0;dt<at.length;dt++)yt[at[dt]]=rt(at[dt]);return yt}function getProp(nt,tt,rt){return rt[tt]!=null?rt[tt]:nt.props[tt]}function getInitialChildMapping(nt,tt){return getChildMapping(nt.children,function(rt){return reactExports.cloneElement(rt,{onExited:tt.bind(null,rt),in:!0,appear:getProp(rt,"appear",nt),enter:getProp(rt,"enter",nt),exit:getProp(rt,"exit",nt)})})}function getNextChildMapping(nt,tt,rt){var st=getChildMapping(nt.children),at=mergeChildMappings(tt,st);return Object.keys(at).forEach(function(lt){var dt=at[lt];if(reactExports.isValidElement(dt)){var yt=lt in tt,vt=lt in st,_t=tt[lt],bt=reactExports.isValidElement(_t)&&!_t.props.in;vt&&(!yt||bt)?at[lt]=reactExports.cloneElement(dt,{onExited:rt.bind(null,dt),in:!0,exit:getProp(dt,"exit",nt),enter:getProp(dt,"enter",nt)}):!vt&&yt&&!bt?at[lt]=reactExports.cloneElement(dt,{in:!1}):vt&&yt&&reactExports.isValidElement(_t)&&(at[lt]=reactExports.cloneElement(dt,{onExited:rt.bind(null,dt),in:_t.props.in,exit:getProp(dt,"exit",nt),enter:getProp(dt,"enter",nt)}))}}),at}var values=Object.values||function(nt){return Object.keys(nt).map(function(tt){return nt[tt]})},defaultProps={component:"div",childFactory:function(tt){return tt}},TransitionGroup=function(nt){_inheritsLoose$1(tt,nt);function tt(st,at){var lt;lt=nt.call(this,st,at)||this;var dt=lt.handleExited.bind(_assertThisInitialized$1(lt));return lt.state={contextValue:{isMounting:!0},handleExited:dt,firstRender:!0},lt}var rt=tt.prototype;return rt.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},rt.componentWillUnmount=function(){this.mounted=!1},tt.getDerivedStateFromProps=function(at,lt){var dt=lt.children,yt=lt.handleExited,vt=lt.firstRender;return{children:vt?getInitialChildMapping(at,yt):getNextChildMapping(at,dt,yt),firstRender:!1}},rt.handleExited=function(at,lt){var dt=getChildMapping(this.props.children);at.key in dt||(at.props.onExited&&at.props.onExited(lt),this.mounted&&this.setState(function(yt){var vt=_extends$i({},yt.children);return delete vt[at.key],{children:vt}}))},rt.render=function(){var at=this.props,lt=at.component,dt=at.childFactory,yt=_objectWithoutPropertiesLoose$f(at,["component","childFactory"]),vt=this.state.contextValue,_t=values(this.state.children).map(dt);return delete yt.appear,delete yt.enter,delete yt.exit,lt===null?ReactExports.createElement(TransitionGroupContext.Provider,{value:vt},_t):ReactExports.createElement(TransitionGroupContext.Provider,{value:vt},ReactExports.createElement(lt,yt,_t))},tt}(ReactExports.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const reflow=nt=>nt.scrollTop;function getTransitionProps(nt,tt){const{timeout:rt,easing:st,style:at={}}=nt;return{duration:at.transitionDuration??(typeof rt=="number"?rt:rt[tt.mode]||0),easing:at.transitionTimingFunction??(typeof st=="object"?st[tt.mode]:st),delay:at.transitionDelay}}function getPaperUtilityClass(nt){return generateUtilityClass("MuiPaper",nt)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const useUtilityClasses$K=nt=>{const{square:tt,elevation:rt,variant:st,classes:at}=nt,lt={root:["root",st,!tt&&"rounded",st==="elevation"&&`elevation${rt}`]};return composeClasses(lt,getPaperUtilityClass,at)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[rt.variant],!rt.square&&tt.rounded,rt.variant==="elevation"&&tt[`elevation${rt.elevation}`]]}})(memoTheme(({theme:nt})=>({backgroundColor:(nt.vars||nt).palette.background.paper,color:(nt.vars||nt).palette.text.primary,transition:nt.transitions.create("box-shadow"),variants:[{props:({ownerState:tt})=>!tt.square,style:{borderRadius:nt.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(nt.vars||nt).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Paper=reactExports.forwardRef(function(tt,rt){var Tt;const st=useDefaultProps({props:tt,name:"MuiPaper"}),at=useTheme(),{className:lt,component:dt="div",elevation:yt=1,square:vt=!1,variant:_t="elevation",...bt}=st,Mt={...st,component:dt,elevation:yt,square:vt,variant:_t},Ct=useUtilityClasses$K(Mt);return jsxRuntimeExports.jsx(PaperRoot,{as:dt,ownerState:Mt,className:clsx(Ct.root,lt),ref:rt,...bt,style:{..._t==="elevation"&&{"--Paper-shadow":(at.vars||at).shadows[yt],...at.vars&&{"--Paper-overlay":(Tt=at.vars.overlays)==null?void 0:Tt[yt]},...!at.vars&&at.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${alpha("#fff",getOverlayAlpha(yt))}, ${alpha("#fff",getOverlayAlpha(yt))})`}},...bt.style}})});function useSlot(nt,tt){const{className:rt,elementType:st,ownerState:at,externalForwardedProps:lt,internalForwardedProps:dt,...yt}=tt,{component:vt,slots:_t={[nt]:void 0},slotProps:bt={[nt]:void 0},...Mt}=lt,Ct=_t[nt]||st,Tt=resolveComponentProps(bt[nt],at),{props:{component:$t,...Rt},internalRef:Et}=mergeSlotProps({className:rt,...yt,externalForwardedProps:nt==="root"?Mt:void 0,externalSlotProps:Tt}),wt=useForkRef(Et,Tt==null?void 0:Tt.ref,tt.ref),Pt=nt==="root"?$t||vt:$t,Ft=appendOwnerState(Ct,{...nt==="root"&&!vt&&!_t[nt]&&dt,...nt!=="root"&&!_t[nt]&&dt,...Rt,...Pt&&{as:Pt},ref:wt},at);return[Ct,Ft]}class LazyRipple{constructor(){q0(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new LazyRipple}static use(){const tt=useLazyRef(LazyRipple.create).current,[rt,st]=reactExports.useState(!1);return tt.shouldMount=rt,tt.setShouldMount=st,reactExports.useEffect(tt.mountEffect,[rt]),tt}mount(){return this.mounted||(this.mounted=createControlledPromise(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...tt){this.mount().then(()=>{var rt;return(rt=this.ref.current)==null?void 0:rt.start(...tt)})}stop(...tt){this.mount().then(()=>{var rt;return(rt=this.ref.current)==null?void 0:rt.stop(...tt)})}pulsate(...tt){this.mount().then(()=>{var rt;return(rt=this.ref.current)==null?void 0:rt.pulsate(...tt)})}}function useLazyRipple(){return LazyRipple.use()}function createControlledPromise(){let nt,tt;const rt=new Promise((st,at)=>{nt=st,tt=at});return rt.resolve=nt,rt.reject=tt,rt}function Ripple(nt){const{className:tt,classes:rt,pulsate:st=!1,rippleX:at,rippleY:lt,rippleSize:dt,in:yt,onExited:vt,timeout:_t}=nt,[bt,Mt]=reactExports.useState(!1),Ct=clsx(tt,rt.ripple,rt.rippleVisible,st&&rt.ripplePulsate),Tt={width:dt,height:dt,top:-(dt/2)+lt,left:-(dt/2)+at},$t=clsx(rt.child,bt&&rt.childLeaving,st&&rt.childPulsate);return!yt&&!bt&&Mt(!0),reactExports.useEffect(()=>{if(!yt&&vt!=null){const Rt=setTimeout(vt,_t);return()=>{clearTimeout(Rt)}}},[vt,yt,_t]),jsxRuntimeExports.jsx("span",{className:Ct,style:Tt,children:jsxRuntimeExports.jsx("span",{className:$t})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,exitKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pulsateKeyframe=keyframes`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${touchRippleClasses.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${enterKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:nt})=>nt.transitions.easing.easeInOut};
  }

  &.${touchRippleClasses.ripplePulsate} {
    animation-duration: ${({theme:nt})=>nt.transitions.duration.shorter}ms;
  }

  & .${touchRippleClasses.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${touchRippleClasses.childLeaving} {
    opacity: 0;
    animation-name: ${exitKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:nt})=>nt.transitions.easing.easeInOut};
  }

  & .${touchRippleClasses.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pulsateKeyframe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:nt})=>nt.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TouchRipple=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiTouchRipple"}),{center:at=!1,classes:lt={},className:dt,...yt}=st,[vt,_t]=reactExports.useState([]),bt=reactExports.useRef(0),Mt=reactExports.useRef(null);reactExports.useEffect(()=>{Mt.current&&(Mt.current(),Mt.current=null)},[vt]);const Ct=reactExports.useRef(!1),Tt=useTimeout(),$t=reactExports.useRef(null),Rt=reactExports.useRef(null),Et=reactExports.useCallback(Nt=>{const{pulsate:Ot,rippleX:Bt,rippleY:Xt,rippleSize:Zt,cb:rn}=Nt;_t(Gt=>[...Gt,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(lt.ripple,touchRippleClasses.ripple),rippleVisible:clsx(lt.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(lt.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(lt.child,touchRippleClasses.child),childLeaving:clsx(lt.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(lt.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:Ot,rippleX:Bt,rippleY:Xt,rippleSize:Zt},bt.current)]),bt.current+=1,Mt.current=rn},[lt]),wt=reactExports.useCallback((Nt={},Ot={},Bt=()=>{})=>{const{pulsate:Xt=!1,center:Zt=at||Ot.pulsate,fakeElement:rn=!1}=Ot;if((Nt==null?void 0:Nt.type)==="mousedown"&&Ct.current){Ct.current=!1;return}(Nt==null?void 0:Nt.type)==="touchstart"&&(Ct.current=!0);const Gt=rn?null:Rt.current,nn=Gt?Gt.getBoundingClientRect():{width:0,height:0,left:0,top:0};let cn,an,mn;if(Zt||Nt===void 0||Nt.clientX===0&&Nt.clientY===0||!Nt.clientX&&!Nt.touches)cn=Math.round(nn.width/2),an=Math.round(nn.height/2);else{const{clientX:En,clientY:Cn}=Nt.touches&&Nt.touches.length>0?Nt.touches[0]:Nt;cn=Math.round(En-nn.left),an=Math.round(Cn-nn.top)}if(Zt)mn=Math.sqrt((2*nn.width**2+nn.height**2)/3),mn%2===0&&(mn+=1);else{const En=Math.max(Math.abs((Gt?Gt.clientWidth:0)-cn),cn)*2+2,Cn=Math.max(Math.abs((Gt?Gt.clientHeight:0)-an),an)*2+2;mn=Math.sqrt(En**2+Cn**2)}Nt!=null&&Nt.touches?$t.current===null&&($t.current=()=>{Et({pulsate:Xt,rippleX:cn,rippleY:an,rippleSize:mn,cb:Bt})},Tt.start(DELAY_RIPPLE,()=>{$t.current&&($t.current(),$t.current=null)})):Et({pulsate:Xt,rippleX:cn,rippleY:an,rippleSize:mn,cb:Bt})},[at,Et,Tt]),Pt=reactExports.useCallback(()=>{wt({},{pulsate:!0})},[wt]),Ft=reactExports.useCallback((Nt,Ot)=>{if(Tt.clear(),(Nt==null?void 0:Nt.type)==="touchend"&&$t.current){$t.current(),$t.current=null,Tt.start(0,()=>{Ft(Nt,Ot)});return}$t.current=null,_t(Bt=>Bt.length>0?Bt.slice(1):Bt),Mt.current=Ot},[Tt]);return reactExports.useImperativeHandle(rt,()=>({pulsate:Pt,start:wt,stop:Ft}),[Pt,wt,Ft]),jsxRuntimeExports.jsx(TouchRippleRoot,{className:clsx(touchRippleClasses.root,lt.root,dt),ref:Rt,...yt,children:jsxRuntimeExports.jsx(TransitionGroup,{component:null,exit:!0,children:vt})})});function getButtonBaseUtilityClass(nt){return generateUtilityClass("MuiButtonBase",nt)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),useUtilityClasses$J=nt=>{const{disabled:tt,focusVisible:rt,focusVisibleClassName:st,classes:at}=nt,dt=composeClasses({root:["root",tt&&"disabled",rt&&"focusVisible"]},getButtonBaseUtilityClass,at);return rt&&st&&(dt.root+=` ${st}`),dt},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(nt,tt)=>tt.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiButtonBase"}),{action:at,centerRipple:lt=!1,children:dt,className:yt,component:vt="button",disabled:_t=!1,disableRipple:bt=!1,disableTouchRipple:Mt=!1,focusRipple:Ct=!1,focusVisibleClassName:Tt,LinkComponent:$t="a",onBlur:Rt,onClick:Et,onContextMenu:wt,onDragLeave:Pt,onFocus:Ft,onFocusVisible:Nt,onKeyDown:Ot,onKeyUp:Bt,onMouseDown:Xt,onMouseLeave:Zt,onMouseUp:rn,onTouchEnd:Gt,onTouchMove:nn,onTouchStart:cn,tabIndex:an=0,TouchRippleProps:mn,touchRippleRef:En,type:Cn,...Mn}=st,un=reactExports.useRef(null),Tn=useLazyRipple(),Pn=useForkRef(Tn.ref,En),[dn,Un]=reactExports.useState(!1);_t&&dn&&Un(!1),reactExports.useImperativeHandle(at,()=>({focusVisible:()=>{Un(!0),un.current.focus()}}),[]);const qn=Tn.shouldMount&&!bt&&!_t;reactExports.useEffect(()=>{dn&&Ct&&!bt&&Tn.pulsate()},[bt,Ct,dn,Tn]);const In=useRippleHandler(Tn,"start",Xt,Mt),Wn=useRippleHandler(Tn,"stop",wt,Mt),ar=useRippleHandler(Tn,"stop",Pt,Mt),fr=useRippleHandler(Tn,"stop",rn,Mt),mr=useRippleHandler(Tn,"stop",_r=>{dn&&_r.preventDefault(),Zt&&Zt(_r)},Mt),vr=useRippleHandler(Tn,"start",cn,Mt),Ar=useRippleHandler(Tn,"stop",Gt,Mt),$r=useRippleHandler(Tn,"stop",nn,Mt),Mr=useRippleHandler(Tn,"stop",_r=>{isFocusVisible(_r.target)||Un(!1),Rt&&Rt(_r)},!1),Jn=useEventCallback(_r=>{un.current||(un.current=_r.currentTarget),isFocusVisible(_r.target)&&(Un(!0),Nt&&Nt(_r)),Ft&&Ft(_r)}),hr=()=>{const _r=un.current;return vt&&vt!=="button"&&!(_r.tagName==="A"&&_r.href)},wr=useEventCallback(_r=>{Ct&&!_r.repeat&&dn&&_r.key===" "&&Tn.stop(_r,()=>{Tn.start(_r)}),_r.target===_r.currentTarget&&hr()&&_r.key===" "&&_r.preventDefault(),Ot&&Ot(_r),_r.target===_r.currentTarget&&hr()&&_r.key==="Enter"&&!_t&&(_r.preventDefault(),Et&&Et(_r))}),Nr=useEventCallback(_r=>{Ct&&_r.key===" "&&dn&&!_r.defaultPrevented&&Tn.stop(_r,()=>{Tn.pulsate(_r)}),Bt&&Bt(_r),Et&&_r.target===_r.currentTarget&&hr()&&_r.key===" "&&!_r.defaultPrevented&&Et(_r)});let Fr=vt;Fr==="button"&&(Mn.href||Mn.to)&&(Fr=$t);const Yr={};Fr==="button"?(Yr.type=Cn===void 0?"button":Cn,Yr.disabled=_t):(!Mn.href&&!Mn.to&&(Yr.role="button"),_t&&(Yr["aria-disabled"]=_t));const cs=useForkRef(rt,un),cr={...st,centerRipple:lt,component:vt,disabled:_t,disableRipple:bt,disableTouchRipple:Mt,focusRipple:Ct,tabIndex:an,focusVisible:dn},Qn=useUtilityClasses$J(cr);return jsxRuntimeExports.jsxs(ButtonBaseRoot,{as:Fr,className:clsx(Qn.root,yt),ownerState:cr,onBlur:Mr,onClick:Et,onContextMenu:Wn,onFocus:Jn,onKeyDown:wr,onKeyUp:Nr,onMouseDown:In,onMouseLeave:mr,onMouseUp:fr,onDragLeave:ar,onTouchEnd:Ar,onTouchMove:$r,onTouchStart:vr,ref:cs,tabIndex:_t?-1:an,type:Cn,...Yr,...Mn,children:[dt,qn?jsxRuntimeExports.jsx(TouchRipple,{ref:Pn,center:lt,...mn}):null]})});function useRippleHandler(nt,tt,rt,st=!1){return useEventCallback(at=>(rt&&rt(at),st||nt[tt](at),!0))}function hasCorrectMainProperty(nt){return typeof nt.main=="string"}function checkSimplePaletteColorValues(nt,tt=[]){if(!hasCorrectMainProperty(nt))return!1;for(const rt of tt)if(!nt.hasOwnProperty(rt)||typeof nt[rt]!="string")return!1;return!0}function createSimplePaletteValueFilter(nt=[]){return([,tt])=>tt&&checkSimplePaletteColorValues(tt,nt)}function getAlertUtilityClass(nt){return generateUtilityClass("MuiAlert",nt)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function getIconButtonUtilityClass(nt){return generateUtilityClass("MuiIconButton",nt)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),useUtilityClasses$I=nt=>{const{classes:tt,disabled:rt,color:st,edge:at,size:lt}=nt,dt={root:["root",rt&&"disabled",st!=="default"&&`color${capitalize(st)}`,at&&`edge${capitalize(at)}`,`size${capitalize(lt)}`]};return composeClasses(dt,getIconButtonUtilityClass,tt)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.color!=="default"&&tt[`color${capitalize(rt.color)}`],rt.edge&&tt[`edge${capitalize(rt.edge)}`],tt[`size${capitalize(rt.size)}`]]}})(memoTheme(({theme:nt})=>({textAlign:"center",flex:"0 0 auto",fontSize:nt.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(nt.vars||nt).palette.action.active,transition:nt.transitions.create("background-color",{duration:nt.transitions.duration.shortest}),variants:[{props:tt=>!tt.disableRipple,style:{"--IconButton-hoverBg":nt.vars?`rgba(${nt.vars.palette.action.activeChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette.action.active,nt.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),memoTheme(({theme:nt})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt},style:{color:(nt.vars||nt).palette[tt].main}})),...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt},style:{"--IconButton-hoverBg":nt.vars?`rgba(${(nt.vars||nt).palette[tt].mainChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha((nt.vars||nt).palette[tt].main,nt.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:nt.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:nt.typography.pxToRem(28)}}],[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(nt.vars||nt).palette.action.disabled}}))),IconButton$1=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiIconButton"}),{edge:at=!1,children:lt,className:dt,color:yt="default",disabled:vt=!1,disableFocusRipple:_t=!1,size:bt="medium",...Mt}=st,Ct={...st,edge:at,color:yt,disabled:vt,disableFocusRipple:_t,size:bt},Tt=useUtilityClasses$I(Ct);return jsxRuntimeExports.jsx(IconButtonRoot,{className:clsx(Tt.root,dt),centerRipple:!0,focusRipple:!_t,disabled:vt,ref:rt,...Mt,ownerState:Ct,children:lt})}),SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),useUtilityClasses$H=nt=>{const{variant:tt,color:rt,severity:st,classes:at}=nt,lt={root:["root",`color${capitalize(rt||st)}`,`${tt}${capitalize(rt||st)}`,`${tt}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(lt,getAlertUtilityClass,at)},AlertRoot=styled(Paper,{name:"MuiAlert",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[rt.variant],tt[`${rt.variant}${capitalize(rt.color||rt.severity)}`]]}})(memoTheme(({theme:nt})=>{const tt=nt.palette.mode==="light"?darken:lighten,rt=nt.palette.mode==="light"?lighten:darken;return{...nt.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(nt.palette).filter(createSimplePaletteValueFilter(["light"])).map(([st])=>({props:{colorSeverity:st,variant:"standard"},style:{color:nt.vars?nt.vars.palette.Alert[`${st}Color`]:tt(nt.palette[st].light,.6),backgroundColor:nt.vars?nt.vars.palette.Alert[`${st}StandardBg`]:rt(nt.palette[st].light,.9),[`& .${alertClasses.icon}`]:nt.vars?{color:nt.vars.palette.Alert[`${st}IconColor`]}:{color:nt.palette[st].main}}})),...Object.entries(nt.palette).filter(createSimplePaletteValueFilter(["light"])).map(([st])=>({props:{colorSeverity:st,variant:"outlined"},style:{color:nt.vars?nt.vars.palette.Alert[`${st}Color`]:tt(nt.palette[st].light,.6),border:`1px solid ${(nt.vars||nt).palette[st].light}`,[`& .${alertClasses.icon}`]:nt.vars?{color:nt.vars.palette.Alert[`${st}IconColor`]}:{color:nt.palette[st].main}}})),...Object.entries(nt.palette).filter(createSimplePaletteValueFilter(["dark"])).map(([st])=>({props:{colorSeverity:st,variant:"filled"},style:{fontWeight:nt.typography.fontWeightMedium,...nt.vars?{color:nt.vars.palette.Alert[`${st}FilledColor`],backgroundColor:nt.vars.palette.Alert[`${st}FilledBg`]}:{backgroundColor:nt.palette.mode==="dark"?nt.palette[st].dark:nt.palette[st].main,color:nt.palette.getContrastText(nt.palette[st].main)}}}))]}})),AlertIcon=styled("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(nt,tt)=>tt.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled("div",{name:"MuiAlert",slot:"Message",overridesResolver:(nt,tt)=>tt.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled("div",{name:"MuiAlert",slot:"Action",overridesResolver:(nt,tt)=>tt.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiAlert"}),{action:at,children:lt,className:dt,closeText:yt="Close",color:vt,components:_t={},componentsProps:bt={},icon:Mt,iconMapping:Ct=defaultIconMapping,onClose:Tt,role:$t="alert",severity:Rt="success",slotProps:Et={},slots:wt={},variant:Pt="standard",...Ft}=st,Nt={...st,color:vt,severity:Rt,variant:Pt,colorSeverity:vt||Rt},Ot=useUtilityClasses$H(Nt),Bt={slots:{closeButton:_t.CloseButton,closeIcon:_t.CloseIcon,...wt},slotProps:{...bt,...Et}},[Xt,Zt]=useSlot("closeButton",{elementType:IconButton$1,externalForwardedProps:Bt,ownerState:Nt}),[rn,Gt]=useSlot("closeIcon",{elementType:ClearIcon,externalForwardedProps:Bt,ownerState:Nt});return jsxRuntimeExports.jsxs(AlertRoot,{role:$t,elevation:0,ownerState:Nt,className:clsx(Ot.root,dt),ref:rt,...Ft,children:[Mt!==!1?jsxRuntimeExports.jsx(AlertIcon,{ownerState:Nt,className:Ot.icon,children:Mt||Ct[Rt]||defaultIconMapping[Rt]}):null,jsxRuntimeExports.jsx(AlertMessage,{ownerState:Nt,className:Ot.message,children:lt}),at!=null?jsxRuntimeExports.jsx(AlertAction,{ownerState:Nt,className:Ot.action,children:at}):null,at==null&&Tt?jsxRuntimeExports.jsx(AlertAction,{ownerState:Nt,className:Ot.action,children:jsxRuntimeExports.jsx(Xt,{size:"small","aria-label":yt,title:yt,color:"inherit",onClick:Tt,...Zt,children:jsxRuntimeExports.jsx(rn,{fontSize:"small",...Gt})})}):null]})});function getTypographyUtilityClass(nt){return generateUtilityClass("MuiTypography",nt)}const typographyClasses=generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),v6Colors={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},extendSxProp=internal_createExtendSxProp(),useUtilityClasses$G=nt=>{const{align:tt,gutterBottom:rt,noWrap:st,paragraph:at,variant:lt,classes:dt}=nt,yt={root:["root",lt,nt.align!=="inherit"&&`align${capitalize(tt)}`,rt&&"gutterBottom",st&&"noWrap",at&&"paragraph"]};return composeClasses(yt,getTypographyUtilityClass,dt)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.variant&&tt[rt.variant],rt.align!=="inherit"&&tt[`align${capitalize(rt.align)}`],rt.noWrap&&tt.noWrap,rt.gutterBottom&&tt.gutterBottom,rt.paragraph&&tt.paragraph]}})(memoTheme(({theme:nt})=>{var tt;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(nt.typography).filter(([rt,st])=>rt!=="inherit"&&st&&typeof st=="object").map(([rt,st])=>({props:{variant:rt},style:st})),...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([rt])=>({props:{color:rt},style:{color:(nt.vars||nt).palette[rt].main}})),...Object.entries(((tt=nt.palette)==null?void 0:tt.text)||{}).filter(([,rt])=>typeof rt=="string").map(([rt])=>({props:{color:`text${capitalize(rt)}`},style:{color:(nt.vars||nt).palette.text[rt]}})),{props:({ownerState:rt})=>rt.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:rt})=>rt.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:rt})=>rt.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:rt})=>rt.paragraph,style:{marginBottom:16}}]}})),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Typography=reactExports.forwardRef(function(tt,rt){const{color:st,...at}=useDefaultProps({props:tt,name:"MuiTypography"}),lt=!v6Colors[st],dt=extendSxProp({...at,...lt&&{color:st}}),{align:yt="inherit",className:vt,component:_t,gutterBottom:bt=!1,noWrap:Mt=!1,paragraph:Ct=!1,variant:Tt="body1",variantMapping:$t=defaultVariantMapping,...Rt}=dt,Et={...dt,align:yt,color:st,className:vt,component:_t,gutterBottom:bt,noWrap:Mt,paragraph:Ct,variant:Tt,variantMapping:$t},wt=_t||(Ct?"p":$t[Tt]||defaultVariantMapping[Tt])||"span",Pt=useUtilityClasses$G(Et);return jsxRuntimeExports.jsx(TypographyRoot,{as:wt,ref:rt,className:clsx(Pt.root,vt),...Rt,ownerState:Et,style:{...yt!=="inherit"&&{"--Typography-textAlign":yt},...Rt.style}})});function getAppBarUtilityClass(nt){return generateUtilityClass("MuiAppBar",nt)}generateUtilityClasses("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const useUtilityClasses$F=nt=>{const{color:tt,position:rt,classes:st}=nt,at={root:["root",`color${capitalize(tt)}`,`position${capitalize(rt)}`]};return composeClasses(at,getAppBarUtilityClass,st)},joinVars=(nt,tt)=>nt?`${nt==null?void 0:nt.replace(")","")}, ${tt})`:tt,AppBarRoot=styled(Paper,{name:"MuiAppBar",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[`position${capitalize(rt.position)}`],tt[`color${capitalize(rt.color)}`]]}})(memoTheme(({theme:nt})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(nt.vars||nt).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(nt.vars||nt).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(nt.vars||nt).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":nt.vars?nt.vars.palette.AppBar.defaultBg:nt.palette.grey[100],"--AppBar-color":nt.vars?nt.vars.palette.text.primary:nt.palette.getContrastText(nt.palette.grey[100]),...nt.applyStyles("dark",{"--AppBar-background":nt.vars?nt.vars.palette.AppBar.defaultBg:nt.palette.grey[900],"--AppBar-color":nt.vars?nt.vars.palette.text.primary:nt.palette.getContrastText(nt.palette.grey[900])})}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter(["contrastText"])).map(([tt])=>({props:{color:tt},style:{"--AppBar-background":(nt.vars??nt).palette[tt].main,"--AppBar-color":(nt.vars??nt).palette[tt].contrastText}})),{props:tt=>tt.enableColorOnDark===!0&&!["inherit","transparent"].includes(tt.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:tt=>tt.enableColorOnDark===!1&&!["inherit","transparent"].includes(tt.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...nt.applyStyles("dark",{backgroundColor:nt.vars?joinVars(nt.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:nt.vars?joinVars(nt.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...nt.applyStyles("dark",{backgroundImage:"none"})}}]}))),AppBar=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiAppBar"}),{className:at,color:lt="primary",enableColorOnDark:dt=!1,position:yt="fixed",...vt}=st,_t={...st,color:lt,position:yt,enableColorOnDark:dt},bt=useUtilityClasses$F(_t);return jsxRuntimeExports.jsx(AppBarRoot,{square:!0,component:"header",ownerState:_t,elevation:4,className:clsx(bt.root,at,yt==="fixed"&&"mui-fixed"),ref:rt,...vt})});var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(nt,tt){return nt.concat([tt+"-"+start,tt+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(nt,tt){return nt.concat([tt,tt+"-"+start,tt+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(nt){return nt?(nt.nodeName||"").toLowerCase():null}function getWindow(nt){if(nt==null)return window;if(nt.toString()!=="[object Window]"){var tt=nt.ownerDocument;return tt&&tt.defaultView||window}return nt}function isElement(nt){var tt=getWindow(nt).Element;return nt instanceof tt||nt instanceof Element}function isHTMLElement$1(nt){var tt=getWindow(nt).HTMLElement;return nt instanceof tt||nt instanceof HTMLElement}function isShadowRoot(nt){if(typeof ShadowRoot>"u")return!1;var tt=getWindow(nt).ShadowRoot;return nt instanceof tt||nt instanceof ShadowRoot}function applyStyles(nt){var tt=nt.state;Object.keys(tt.elements).forEach(function(rt){var st=tt.styles[rt]||{},at=tt.attributes[rt]||{},lt=tt.elements[rt];!isHTMLElement$1(lt)||!getNodeName(lt)||(Object.assign(lt.style,st),Object.keys(at).forEach(function(dt){var yt=at[dt];yt===!1?lt.removeAttribute(dt):lt.setAttribute(dt,yt===!0?"":yt)}))})}function effect$2(nt){var tt=nt.state,rt={popper:{position:tt.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(tt.elements.popper.style,rt.popper),tt.styles=rt,tt.elements.arrow&&Object.assign(tt.elements.arrow.style,rt.arrow),function(){Object.keys(tt.elements).forEach(function(st){var at=tt.elements[st],lt=tt.attributes[st]||{},dt=Object.keys(tt.styles.hasOwnProperty(st)?tt.styles[st]:rt[st]),yt=dt.reduce(function(vt,_t){return vt[_t]="",vt},{});!isHTMLElement$1(at)||!getNodeName(at)||(Object.assign(at.style,yt),Object.keys(lt).forEach(function(vt){at.removeAttribute(vt)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(nt){return nt.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getUAString(){var nt=navigator.userAgentData;return nt!=null&&nt.brands&&Array.isArray(nt.brands)?nt.brands.map(function(tt){return tt.brand+"/"+tt.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(nt,tt,rt){tt===void 0&&(tt=!1),rt===void 0&&(rt=!1);var st=nt.getBoundingClientRect(),at=1,lt=1;tt&&isHTMLElement$1(nt)&&(at=nt.offsetWidth>0&&round$1(st.width)/nt.offsetWidth||1,lt=nt.offsetHeight>0&&round$1(st.height)/nt.offsetHeight||1);var dt=isElement(nt)?getWindow(nt):window,yt=dt.visualViewport,vt=!isLayoutViewport()&&rt,_t=(st.left+(vt&&yt?yt.offsetLeft:0))/at,bt=(st.top+(vt&&yt?yt.offsetTop:0))/lt,Mt=st.width/at,Ct=st.height/lt;return{width:Mt,height:Ct,top:bt,right:_t+Mt,bottom:bt+Ct,left:_t,x:_t,y:bt}}function getLayoutRect(nt){var tt=getBoundingClientRect(nt),rt=nt.offsetWidth,st=nt.offsetHeight;return Math.abs(tt.width-rt)<=1&&(rt=tt.width),Math.abs(tt.height-st)<=1&&(st=tt.height),{x:nt.offsetLeft,y:nt.offsetTop,width:rt,height:st}}function contains$2(nt,tt){var rt=tt.getRootNode&&tt.getRootNode();if(nt.contains(tt))return!0;if(rt&&isShadowRoot(rt)){var st=tt;do{if(st&&nt.isSameNode(st))return!0;st=st.parentNode||st.host}while(st)}return!1}function getComputedStyle$1(nt){return getWindow(nt).getComputedStyle(nt)}function isTableElement(nt){return["table","td","th"].indexOf(getNodeName(nt))>=0}function getDocumentElement(nt){return((isElement(nt)?nt.ownerDocument:nt.document)||window.document).documentElement}function getParentNode(nt){return getNodeName(nt)==="html"?nt:nt.assignedSlot||nt.parentNode||(isShadowRoot(nt)?nt.host:null)||getDocumentElement(nt)}function getTrueOffsetParent(nt){return!isHTMLElement$1(nt)||getComputedStyle$1(nt).position==="fixed"?null:nt.offsetParent}function getContainingBlock(nt){var tt=/firefox/i.test(getUAString()),rt=/Trident/i.test(getUAString());if(rt&&isHTMLElement$1(nt)){var st=getComputedStyle$1(nt);if(st.position==="fixed")return null}var at=getParentNode(nt);for(isShadowRoot(at)&&(at=at.host);isHTMLElement$1(at)&&["html","body"].indexOf(getNodeName(at))<0;){var lt=getComputedStyle$1(at);if(lt.transform!=="none"||lt.perspective!=="none"||lt.contain==="paint"||["transform","perspective"].indexOf(lt.willChange)!==-1||tt&&lt.willChange==="filter"||tt&&lt.filter&&lt.filter!=="none")return at;at=at.parentNode}return null}function getOffsetParent(nt){for(var tt=getWindow(nt),rt=getTrueOffsetParent(nt);rt&&isTableElement(rt)&&getComputedStyle$1(rt).position==="static";)rt=getTrueOffsetParent(rt);return rt&&(getNodeName(rt)==="html"||getNodeName(rt)==="body"&&getComputedStyle$1(rt).position==="static")?tt:rt||getContainingBlock(nt)||tt}function getMainAxisFromPlacement(nt){return["top","bottom"].indexOf(nt)>=0?"x":"y"}function within(nt,tt,rt){return max(nt,min(tt,rt))}function withinMaxClamp(nt,tt,rt){var st=within(nt,tt,rt);return st>rt?rt:st}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(nt){return Object.assign({},getFreshSideObject(),nt)}function expandToHashMap(nt,tt){return tt.reduce(function(rt,st){return rt[st]=nt,rt},{})}var toPaddingObject=function(tt,rt){return tt=typeof tt=="function"?tt(Object.assign({},rt.rects,{placement:rt.placement})):tt,mergePaddingObject(typeof tt!="number"?tt:expandToHashMap(tt,basePlacements))};function arrow(nt){var tt,rt=nt.state,st=nt.name,at=nt.options,lt=rt.elements.arrow,dt=rt.modifiersData.popperOffsets,yt=getBasePlacement(rt.placement),vt=getMainAxisFromPlacement(yt),_t=[left,right].indexOf(yt)>=0,bt=_t?"height":"width";if(!(!lt||!dt)){var Mt=toPaddingObject(at.padding,rt),Ct=getLayoutRect(lt),Tt=vt==="y"?top:left,$t=vt==="y"?bottom:right,Rt=rt.rects.reference[bt]+rt.rects.reference[vt]-dt[vt]-rt.rects.popper[bt],Et=dt[vt]-rt.rects.reference[vt],wt=getOffsetParent(lt),Pt=wt?vt==="y"?wt.clientHeight||0:wt.clientWidth||0:0,Ft=Rt/2-Et/2,Nt=Mt[Tt],Ot=Pt-Ct[bt]-Mt[$t],Bt=Pt/2-Ct[bt]/2+Ft,Xt=within(Nt,Bt,Ot),Zt=vt;rt.modifiersData[st]=(tt={},tt[Zt]=Xt,tt.centerOffset=Xt-Bt,tt)}}function effect$1(nt){var tt=nt.state,rt=nt.options,st=rt.element,at=st===void 0?"[data-popper-arrow]":st;at!=null&&(typeof at=="string"&&(at=tt.elements.popper.querySelector(at),!at)||contains$2(tt.elements.popper,at)&&(tt.elements.arrow=at))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(nt){return nt.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(nt,tt){var rt=nt.x,st=nt.y,at=tt.devicePixelRatio||1;return{x:round$1(rt*at)/at||0,y:round$1(st*at)/at||0}}function mapToStyles(nt){var tt,rt=nt.popper,st=nt.popperRect,at=nt.placement,lt=nt.variation,dt=nt.offsets,yt=nt.position,vt=nt.gpuAcceleration,_t=nt.adaptive,bt=nt.roundOffsets,Mt=nt.isFixed,Ct=dt.x,Tt=Ct===void 0?0:Ct,$t=dt.y,Rt=$t===void 0?0:$t,Et=typeof bt=="function"?bt({x:Tt,y:Rt}):{x:Tt,y:Rt};Tt=Et.x,Rt=Et.y;var wt=dt.hasOwnProperty("x"),Pt=dt.hasOwnProperty("y"),Ft=left,Nt=top,Ot=window;if(_t){var Bt=getOffsetParent(rt),Xt="clientHeight",Zt="clientWidth";if(Bt===getWindow(rt)&&(Bt=getDocumentElement(rt),getComputedStyle$1(Bt).position!=="static"&&yt==="absolute"&&(Xt="scrollHeight",Zt="scrollWidth")),Bt=Bt,at===top||(at===left||at===right)&&lt===end){Nt=bottom;var rn=Mt&&Bt===Ot&&Ot.visualViewport?Ot.visualViewport.height:Bt[Xt];Rt-=rn-st.height,Rt*=vt?1:-1}if(at===left||(at===top||at===bottom)&&lt===end){Ft=right;var Gt=Mt&&Bt===Ot&&Ot.visualViewport?Ot.visualViewport.width:Bt[Zt];Tt-=Gt-st.width,Tt*=vt?1:-1}}var nn=Object.assign({position:yt},_t&&unsetSides),cn=bt===!0?roundOffsetsByDPR({x:Tt,y:Rt},getWindow(rt)):{x:Tt,y:Rt};if(Tt=cn.x,Rt=cn.y,vt){var an;return Object.assign({},nn,(an={},an[Nt]=Pt?"0":"",an[Ft]=wt?"0":"",an.transform=(Ot.devicePixelRatio||1)<=1?"translate("+Tt+"px, "+Rt+"px)":"translate3d("+Tt+"px, "+Rt+"px, 0)",an))}return Object.assign({},nn,(tt={},tt[Nt]=Pt?Rt+"px":"",tt[Ft]=wt?Tt+"px":"",tt.transform="",tt))}function computeStyles(nt){var tt=nt.state,rt=nt.options,st=rt.gpuAcceleration,at=st===void 0?!0:st,lt=rt.adaptive,dt=lt===void 0?!0:lt,yt=rt.roundOffsets,vt=yt===void 0?!0:yt,_t={placement:getBasePlacement(tt.placement),variation:getVariation(tt.placement),popper:tt.elements.popper,popperRect:tt.rects.popper,gpuAcceleration:at,isFixed:tt.options.strategy==="fixed"};tt.modifiersData.popperOffsets!=null&&(tt.styles.popper=Object.assign({},tt.styles.popper,mapToStyles(Object.assign({},_t,{offsets:tt.modifiersData.popperOffsets,position:tt.options.strategy,adaptive:dt,roundOffsets:vt})))),tt.modifiersData.arrow!=null&&(tt.styles.arrow=Object.assign({},tt.styles.arrow,mapToStyles(Object.assign({},_t,{offsets:tt.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:vt})))),tt.attributes.popper=Object.assign({},tt.attributes.popper,{"data-popper-placement":tt.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(nt){var tt=nt.state,rt=nt.instance,st=nt.options,at=st.scroll,lt=at===void 0?!0:at,dt=st.resize,yt=dt===void 0?!0:dt,vt=getWindow(tt.elements.popper),_t=[].concat(tt.scrollParents.reference,tt.scrollParents.popper);return lt&&_t.forEach(function(bt){bt.addEventListener("scroll",rt.update,passive)}),yt&&vt.addEventListener("resize",rt.update,passive),function(){lt&&_t.forEach(function(bt){bt.removeEventListener("scroll",rt.update,passive)}),yt&&vt.removeEventListener("resize",rt.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(nt){return nt.replace(/left|right|bottom|top/g,function(tt){return hash$1[tt]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(nt){return nt.replace(/start|end/g,function(tt){return hash[tt]})}function getWindowScroll(nt){var tt=getWindow(nt),rt=tt.pageXOffset,st=tt.pageYOffset;return{scrollLeft:rt,scrollTop:st}}function getWindowScrollBarX(nt){return getBoundingClientRect(getDocumentElement(nt)).left+getWindowScroll(nt).scrollLeft}function getViewportRect(nt,tt){var rt=getWindow(nt),st=getDocumentElement(nt),at=rt.visualViewport,lt=st.clientWidth,dt=st.clientHeight,yt=0,vt=0;if(at){lt=at.width,dt=at.height;var _t=isLayoutViewport();(_t||!_t&&tt==="fixed")&&(yt=at.offsetLeft,vt=at.offsetTop)}return{width:lt,height:dt,x:yt+getWindowScrollBarX(nt),y:vt}}function getDocumentRect(nt){var tt,rt=getDocumentElement(nt),st=getWindowScroll(nt),at=(tt=nt.ownerDocument)==null?void 0:tt.body,lt=max(rt.scrollWidth,rt.clientWidth,at?at.scrollWidth:0,at?at.clientWidth:0),dt=max(rt.scrollHeight,rt.clientHeight,at?at.scrollHeight:0,at?at.clientHeight:0),yt=-st.scrollLeft+getWindowScrollBarX(nt),vt=-st.scrollTop;return getComputedStyle$1(at||rt).direction==="rtl"&&(yt+=max(rt.clientWidth,at?at.clientWidth:0)-lt),{width:lt,height:dt,x:yt,y:vt}}function isScrollParent(nt){var tt=getComputedStyle$1(nt),rt=tt.overflow,st=tt.overflowX,at=tt.overflowY;return/auto|scroll|overlay|hidden/.test(rt+at+st)}function getScrollParent(nt){return["html","body","#document"].indexOf(getNodeName(nt))>=0?nt.ownerDocument.body:isHTMLElement$1(nt)&&isScrollParent(nt)?nt:getScrollParent(getParentNode(nt))}function listScrollParents(nt,tt){var rt;tt===void 0&&(tt=[]);var st=getScrollParent(nt),at=st===((rt=nt.ownerDocument)==null?void 0:rt.body),lt=getWindow(st),dt=at?[lt].concat(lt.visualViewport||[],isScrollParent(st)?st:[]):st,yt=tt.concat(dt);return at?yt:yt.concat(listScrollParents(getParentNode(dt)))}function rectToClientRect(nt){return Object.assign({},nt,{left:nt.x,top:nt.y,right:nt.x+nt.width,bottom:nt.y+nt.height})}function getInnerBoundingClientRect(nt,tt){var rt=getBoundingClientRect(nt,!1,tt==="fixed");return rt.top=rt.top+nt.clientTop,rt.left=rt.left+nt.clientLeft,rt.bottom=rt.top+nt.clientHeight,rt.right=rt.left+nt.clientWidth,rt.width=nt.clientWidth,rt.height=nt.clientHeight,rt.x=rt.left,rt.y=rt.top,rt}function getClientRectFromMixedType(nt,tt,rt){return tt===viewport?rectToClientRect(getViewportRect(nt,rt)):isElement(tt)?getInnerBoundingClientRect(tt,rt):rectToClientRect(getDocumentRect(getDocumentElement(nt)))}function getClippingParents(nt){var tt=listScrollParents(getParentNode(nt)),rt=["absolute","fixed"].indexOf(getComputedStyle$1(nt).position)>=0,st=rt&&isHTMLElement$1(nt)?getOffsetParent(nt):nt;return isElement(st)?tt.filter(function(at){return isElement(at)&&contains$2(at,st)&&getNodeName(at)!=="body"}):[]}function getClippingRect(nt,tt,rt,st){var at=tt==="clippingParents"?getClippingParents(nt):[].concat(tt),lt=[].concat(at,[rt]),dt=lt[0],yt=lt.reduce(function(vt,_t){var bt=getClientRectFromMixedType(nt,_t,st);return vt.top=max(bt.top,vt.top),vt.right=min(bt.right,vt.right),vt.bottom=min(bt.bottom,vt.bottom),vt.left=max(bt.left,vt.left),vt},getClientRectFromMixedType(nt,dt,st));return yt.width=yt.right-yt.left,yt.height=yt.bottom-yt.top,yt.x=yt.left,yt.y=yt.top,yt}function computeOffsets(nt){var tt=nt.reference,rt=nt.element,st=nt.placement,at=st?getBasePlacement(st):null,lt=st?getVariation(st):null,dt=tt.x+tt.width/2-rt.width/2,yt=tt.y+tt.height/2-rt.height/2,vt;switch(at){case top:vt={x:dt,y:tt.y-rt.height};break;case bottom:vt={x:dt,y:tt.y+tt.height};break;case right:vt={x:tt.x+tt.width,y:yt};break;case left:vt={x:tt.x-rt.width,y:yt};break;default:vt={x:tt.x,y:tt.y}}var _t=at?getMainAxisFromPlacement(at):null;if(_t!=null){var bt=_t==="y"?"height":"width";switch(lt){case start:vt[_t]=vt[_t]-(tt[bt]/2-rt[bt]/2);break;case end:vt[_t]=vt[_t]+(tt[bt]/2-rt[bt]/2);break}}return vt}function detectOverflow(nt,tt){tt===void 0&&(tt={});var rt=tt,st=rt.placement,at=st===void 0?nt.placement:st,lt=rt.strategy,dt=lt===void 0?nt.strategy:lt,yt=rt.boundary,vt=yt===void 0?clippingParents:yt,_t=rt.rootBoundary,bt=_t===void 0?viewport:_t,Mt=rt.elementContext,Ct=Mt===void 0?popper:Mt,Tt=rt.altBoundary,$t=Tt===void 0?!1:Tt,Rt=rt.padding,Et=Rt===void 0?0:Rt,wt=mergePaddingObject(typeof Et!="number"?Et:expandToHashMap(Et,basePlacements)),Pt=Ct===popper?reference:popper,Ft=nt.rects.popper,Nt=nt.elements[$t?Pt:Ct],Ot=getClippingRect(isElement(Nt)?Nt:Nt.contextElement||getDocumentElement(nt.elements.popper),vt,bt,dt),Bt=getBoundingClientRect(nt.elements.reference),Xt=computeOffsets({reference:Bt,element:Ft,strategy:"absolute",placement:at}),Zt=rectToClientRect(Object.assign({},Ft,Xt)),rn=Ct===popper?Zt:Bt,Gt={top:Ot.top-rn.top+wt.top,bottom:rn.bottom-Ot.bottom+wt.bottom,left:Ot.left-rn.left+wt.left,right:rn.right-Ot.right+wt.right},nn=nt.modifiersData.offset;if(Ct===popper&&nn){var cn=nn[at];Object.keys(Gt).forEach(function(an){var mn=[right,bottom].indexOf(an)>=0?1:-1,En=[top,bottom].indexOf(an)>=0?"y":"x";Gt[an]+=cn[En]*mn})}return Gt}function computeAutoPlacement(nt,tt){tt===void 0&&(tt={});var rt=tt,st=rt.placement,at=rt.boundary,lt=rt.rootBoundary,dt=rt.padding,yt=rt.flipVariations,vt=rt.allowedAutoPlacements,_t=vt===void 0?placements:vt,bt=getVariation(st),Mt=bt?yt?variationPlacements:variationPlacements.filter(function($t){return getVariation($t)===bt}):basePlacements,Ct=Mt.filter(function($t){return _t.indexOf($t)>=0});Ct.length===0&&(Ct=Mt);var Tt=Ct.reduce(function($t,Rt){return $t[Rt]=detectOverflow(nt,{placement:Rt,boundary:at,rootBoundary:lt,padding:dt})[getBasePlacement(Rt)],$t},{});return Object.keys(Tt).sort(function($t,Rt){return Tt[$t]-Tt[Rt]})}function getExpandedFallbackPlacements(nt){if(getBasePlacement(nt)===auto)return[];var tt=getOppositePlacement(nt);return[getOppositeVariationPlacement(nt),tt,getOppositeVariationPlacement(tt)]}function flip(nt){var tt=nt.state,rt=nt.options,st=nt.name;if(!tt.modifiersData[st]._skip){for(var at=rt.mainAxis,lt=at===void 0?!0:at,dt=rt.altAxis,yt=dt===void 0?!0:dt,vt=rt.fallbackPlacements,_t=rt.padding,bt=rt.boundary,Mt=rt.rootBoundary,Ct=rt.altBoundary,Tt=rt.flipVariations,$t=Tt===void 0?!0:Tt,Rt=rt.allowedAutoPlacements,Et=tt.options.placement,wt=getBasePlacement(Et),Pt=wt===Et,Ft=vt||(Pt||!$t?[getOppositePlacement(Et)]:getExpandedFallbackPlacements(Et)),Nt=[Et].concat(Ft).reduce(function(In,Wn){return In.concat(getBasePlacement(Wn)===auto?computeAutoPlacement(tt,{placement:Wn,boundary:bt,rootBoundary:Mt,padding:_t,flipVariations:$t,allowedAutoPlacements:Rt}):Wn)},[]),Ot=tt.rects.reference,Bt=tt.rects.popper,Xt=new Map,Zt=!0,rn=Nt[0],Gt=0;Gt<Nt.length;Gt++){var nn=Nt[Gt],cn=getBasePlacement(nn),an=getVariation(nn)===start,mn=[top,bottom].indexOf(cn)>=0,En=mn?"width":"height",Cn=detectOverflow(tt,{placement:nn,boundary:bt,rootBoundary:Mt,altBoundary:Ct,padding:_t}),Mn=mn?an?right:left:an?bottom:top;Ot[En]>Bt[En]&&(Mn=getOppositePlacement(Mn));var un=getOppositePlacement(Mn),Tn=[];if(lt&&Tn.push(Cn[cn]<=0),yt&&Tn.push(Cn[Mn]<=0,Cn[un]<=0),Tn.every(function(In){return In})){rn=nn,Zt=!1;break}Xt.set(nn,Tn)}if(Zt)for(var Pn=$t?3:1,dn=function(Wn){var ar=Nt.find(function(fr){var mr=Xt.get(fr);if(mr)return mr.slice(0,Wn).every(function(vr){return vr})});if(ar)return rn=ar,"break"},Un=Pn;Un>0;Un--){var qn=dn(Un);if(qn==="break")break}tt.placement!==rn&&(tt.modifiersData[st]._skip=!0,tt.placement=rn,tt.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(nt,tt,rt){return rt===void 0&&(rt={x:0,y:0}),{top:nt.top-tt.height-rt.y,right:nt.right-tt.width+rt.x,bottom:nt.bottom-tt.height+rt.y,left:nt.left-tt.width-rt.x}}function isAnySideFullyClipped(nt){return[top,right,bottom,left].some(function(tt){return nt[tt]>=0})}function hide(nt){var tt=nt.state,rt=nt.name,st=tt.rects.reference,at=tt.rects.popper,lt=tt.modifiersData.preventOverflow,dt=detectOverflow(tt,{elementContext:"reference"}),yt=detectOverflow(tt,{altBoundary:!0}),vt=getSideOffsets(dt,st),_t=getSideOffsets(yt,at,lt),bt=isAnySideFullyClipped(vt),Mt=isAnySideFullyClipped(_t);tt.modifiersData[rt]={referenceClippingOffsets:vt,popperEscapeOffsets:_t,isReferenceHidden:bt,hasPopperEscaped:Mt},tt.attributes.popper=Object.assign({},tt.attributes.popper,{"data-popper-reference-hidden":bt,"data-popper-escaped":Mt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(nt,tt,rt){var st=getBasePlacement(nt),at=[left,top].indexOf(st)>=0?-1:1,lt=typeof rt=="function"?rt(Object.assign({},tt,{placement:nt})):rt,dt=lt[0],yt=lt[1];return dt=dt||0,yt=(yt||0)*at,[left,right].indexOf(st)>=0?{x:yt,y:dt}:{x:dt,y:yt}}function offset(nt){var tt=nt.state,rt=nt.options,st=nt.name,at=rt.offset,lt=at===void 0?[0,0]:at,dt=placements.reduce(function(bt,Mt){return bt[Mt]=distanceAndSkiddingToXY(Mt,tt.rects,lt),bt},{}),yt=dt[tt.placement],vt=yt.x,_t=yt.y;tt.modifiersData.popperOffsets!=null&&(tt.modifiersData.popperOffsets.x+=vt,tt.modifiersData.popperOffsets.y+=_t),tt.modifiersData[st]=dt}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(nt){var tt=nt.state,rt=nt.name;tt.modifiersData[rt]=computeOffsets({reference:tt.rects.reference,element:tt.rects.popper,strategy:"absolute",placement:tt.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(nt){return nt==="x"?"y":"x"}function preventOverflow(nt){var tt=nt.state,rt=nt.options,st=nt.name,at=rt.mainAxis,lt=at===void 0?!0:at,dt=rt.altAxis,yt=dt===void 0?!1:dt,vt=rt.boundary,_t=rt.rootBoundary,bt=rt.altBoundary,Mt=rt.padding,Ct=rt.tether,Tt=Ct===void 0?!0:Ct,$t=rt.tetherOffset,Rt=$t===void 0?0:$t,Et=detectOverflow(tt,{boundary:vt,rootBoundary:_t,padding:Mt,altBoundary:bt}),wt=getBasePlacement(tt.placement),Pt=getVariation(tt.placement),Ft=!Pt,Nt=getMainAxisFromPlacement(wt),Ot=getAltAxis(Nt),Bt=tt.modifiersData.popperOffsets,Xt=tt.rects.reference,Zt=tt.rects.popper,rn=typeof Rt=="function"?Rt(Object.assign({},tt.rects,{placement:tt.placement})):Rt,Gt=typeof rn=="number"?{mainAxis:rn,altAxis:rn}:Object.assign({mainAxis:0,altAxis:0},rn),nn=tt.modifiersData.offset?tt.modifiersData.offset[tt.placement]:null,cn={x:0,y:0};if(Bt){if(lt){var an,mn=Nt==="y"?top:left,En=Nt==="y"?bottom:right,Cn=Nt==="y"?"height":"width",Mn=Bt[Nt],un=Mn+Et[mn],Tn=Mn-Et[En],Pn=Tt?-Zt[Cn]/2:0,dn=Pt===start?Xt[Cn]:Zt[Cn],Un=Pt===start?-Zt[Cn]:-Xt[Cn],qn=tt.elements.arrow,In=Tt&&qn?getLayoutRect(qn):{width:0,height:0},Wn=tt.modifiersData["arrow#persistent"]?tt.modifiersData["arrow#persistent"].padding:getFreshSideObject(),ar=Wn[mn],fr=Wn[En],mr=within(0,Xt[Cn],In[Cn]),vr=Ft?Xt[Cn]/2-Pn-mr-ar-Gt.mainAxis:dn-mr-ar-Gt.mainAxis,Ar=Ft?-Xt[Cn]/2+Pn+mr+fr+Gt.mainAxis:Un+mr+fr+Gt.mainAxis,$r=tt.elements.arrow&&getOffsetParent(tt.elements.arrow),Mr=$r?Nt==="y"?$r.clientTop||0:$r.clientLeft||0:0,Jn=(an=nn==null?void 0:nn[Nt])!=null?an:0,hr=Mn+vr-Jn-Mr,wr=Mn+Ar-Jn,Nr=within(Tt?min(un,hr):un,Mn,Tt?max(Tn,wr):Tn);Bt[Nt]=Nr,cn[Nt]=Nr-Mn}if(yt){var Fr,Yr=Nt==="x"?top:left,cs=Nt==="x"?bottom:right,cr=Bt[Ot],Qn=Ot==="y"?"height":"width",_r=cr+Et[Yr],Ir=cr-Et[cs],pr=[top,left].indexOf(wt)!==-1,Tr=(Fr=nn==null?void 0:nn[Ot])!=null?Fr:0,Wr=pr?_r:cr-Xt[Qn]-Zt[Qn]-Tr+Gt.altAxis,Kn=pr?cr+Xt[Qn]+Zt[Qn]-Tr-Gt.altAxis:Ir,rr=Tt&&pr?withinMaxClamp(Wr,cr,Kn):within(Tt?Wr:_r,cr,Tt?Kn:Ir);Bt[Ot]=rr,cn[Ot]=rr-cr}tt.modifiersData[st]=cn}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(nt){return{scrollLeft:nt.scrollLeft,scrollTop:nt.scrollTop}}function getNodeScroll(nt){return nt===getWindow(nt)||!isHTMLElement$1(nt)?getWindowScroll(nt):getHTMLElementScroll(nt)}function isElementScaled(nt){var tt=nt.getBoundingClientRect(),rt=round$1(tt.width)/nt.offsetWidth||1,st=round$1(tt.height)/nt.offsetHeight||1;return rt!==1||st!==1}function getCompositeRect(nt,tt,rt){rt===void 0&&(rt=!1);var st=isHTMLElement$1(tt),at=isHTMLElement$1(tt)&&isElementScaled(tt),lt=getDocumentElement(tt),dt=getBoundingClientRect(nt,at,rt),yt={scrollLeft:0,scrollTop:0},vt={x:0,y:0};return(st||!st&&!rt)&&((getNodeName(tt)!=="body"||isScrollParent(lt))&&(yt=getNodeScroll(tt)),isHTMLElement$1(tt)?(vt=getBoundingClientRect(tt,!0),vt.x+=tt.clientLeft,vt.y+=tt.clientTop):lt&&(vt.x=getWindowScrollBarX(lt))),{x:dt.left+yt.scrollLeft-vt.x,y:dt.top+yt.scrollTop-vt.y,width:dt.width,height:dt.height}}function order(nt){var tt=new Map,rt=new Set,st=[];nt.forEach(function(lt){tt.set(lt.name,lt)});function at(lt){rt.add(lt.name);var dt=[].concat(lt.requires||[],lt.requiresIfExists||[]);dt.forEach(function(yt){if(!rt.has(yt)){var vt=tt.get(yt);vt&&at(vt)}}),st.push(lt)}return nt.forEach(function(lt){rt.has(lt.name)||at(lt)}),st}function orderModifiers(nt){var tt=order(nt);return modifierPhases.reduce(function(rt,st){return rt.concat(tt.filter(function(at){return at.phase===st}))},[])}function debounce$1(nt){var tt;return function(){return tt||(tt=new Promise(function(rt){Promise.resolve().then(function(){tt=void 0,rt(nt())})})),tt}}function mergeByName(nt){var tt=nt.reduce(function(rt,st){var at=rt[st.name];return rt[st.name]=at?Object.assign({},at,st,{options:Object.assign({},at.options,st.options),data:Object.assign({},at.data,st.data)}):st,rt},{});return Object.keys(tt).map(function(rt){return tt[rt]})}var DEFAULT_OPTIONS$1={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var nt=arguments.length,tt=new Array(nt),rt=0;rt<nt;rt++)tt[rt]=arguments[rt];return!tt.some(function(st){return!(st&&typeof st.getBoundingClientRect=="function")})}function popperGenerator(nt){nt===void 0&&(nt={});var tt=nt,rt=tt.defaultModifiers,st=rt===void 0?[]:rt,at=tt.defaultOptions,lt=at===void 0?DEFAULT_OPTIONS$1:at;return function(yt,vt,_t){_t===void 0&&(_t=lt);var bt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS$1,lt),modifiersData:{},elements:{reference:yt,popper:vt},attributes:{},styles:{}},Mt=[],Ct=!1,Tt={state:bt,setOptions:function(wt){var Pt=typeof wt=="function"?wt(bt.options):wt;Rt(),bt.options=Object.assign({},lt,bt.options,Pt),bt.scrollParents={reference:isElement(yt)?listScrollParents(yt):yt.contextElement?listScrollParents(yt.contextElement):[],popper:listScrollParents(vt)};var Ft=orderModifiers(mergeByName([].concat(st,bt.options.modifiers)));return bt.orderedModifiers=Ft.filter(function(Nt){return Nt.enabled}),$t(),Tt.update()},forceUpdate:function(){if(!Ct){var wt=bt.elements,Pt=wt.reference,Ft=wt.popper;if(areValidElements(Pt,Ft)){bt.rects={reference:getCompositeRect(Pt,getOffsetParent(Ft),bt.options.strategy==="fixed"),popper:getLayoutRect(Ft)},bt.reset=!1,bt.placement=bt.options.placement,bt.orderedModifiers.forEach(function(Gt){return bt.modifiersData[Gt.name]=Object.assign({},Gt.data)});for(var Nt=0;Nt<bt.orderedModifiers.length;Nt++){if(bt.reset===!0){bt.reset=!1,Nt=-1;continue}var Ot=bt.orderedModifiers[Nt],Bt=Ot.fn,Xt=Ot.options,Zt=Xt===void 0?{}:Xt,rn=Ot.name;typeof Bt=="function"&&(bt=Bt({state:bt,options:Zt,name:rn,instance:Tt})||bt)}}}},update:debounce$1(function(){return new Promise(function(Et){Tt.forceUpdate(),Et(bt)})}),destroy:function(){Rt(),Ct=!0}};if(!areValidElements(yt,vt))return Tt;Tt.setOptions(_t).then(function(Et){!Ct&&_t.onFirstUpdate&&_t.onFirstUpdate(Et)});function $t(){bt.orderedModifiers.forEach(function(Et){var wt=Et.name,Pt=Et.options,Ft=Pt===void 0?{}:Pt,Nt=Et.effect;if(typeof Nt=="function"){var Ot=Nt({state:bt,name:wt,instance:Tt,options:Ft}),Bt=function(){};Mt.push(Ot||Bt)}})}function Rt(){Mt.forEach(function(Et){return Et()}),Mt=[]}return Tt}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function getContainer$1(nt){return typeof nt=="function"?nt():nt}const Portal=reactExports.forwardRef(function(tt,rt){const{children:st,container:at,disablePortal:lt=!1}=tt,[dt,yt]=reactExports.useState(null),vt=useForkRef(reactExports.isValidElement(st)?getReactElementRef(st):null,rt);if(useEnhancedEffect(()=>{lt||yt(getContainer$1(at)||document.body)},[at,lt]),useEnhancedEffect(()=>{if(dt&&!lt)return setRef(rt,dt),()=>{setRef(rt,null)}},[rt,dt,lt]),lt){if(reactExports.isValidElement(st)){const _t={ref:vt};return reactExports.cloneElement(st,_t)}return st}return dt&&reactDomExports.createPortal(st,dt)});function getPopperUtilityClass(nt){return generateUtilityClass("MuiPopper",nt)}generateUtilityClasses("MuiPopper",["root"]);function flipPlacement(nt,tt){if(tt==="ltr")return nt;switch(nt){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return nt}}function resolveAnchorEl$1(nt){return typeof nt=="function"?nt():nt}function isHTMLElement(nt){return nt.nodeType!==void 0}const useUtilityClasses$E=nt=>{const{classes:tt}=nt;return composeClasses({root:["root"]},getPopperUtilityClass,tt)},defaultPopperOptions={},PopperTooltip=reactExports.forwardRef(function(tt,rt){const{anchorEl:st,children:at,direction:lt,disablePortal:dt,modifiers:yt,open:vt,placement:_t,popperOptions:bt,popperRef:Mt,slotProps:Ct={},slots:Tt={},TransitionProps:$t,ownerState:Rt,...Et}=tt,wt=reactExports.useRef(null),Pt=useForkRef(wt,rt),Ft=reactExports.useRef(null),Nt=useForkRef(Ft,Mt),Ot=reactExports.useRef(Nt);useEnhancedEffect(()=>{Ot.current=Nt},[Nt]),reactExports.useImperativeHandle(Mt,()=>Ft.current,[]);const Bt=flipPlacement(_t,lt),[Xt,Zt]=reactExports.useState(Bt),[rn,Gt]=reactExports.useState(resolveAnchorEl$1(st));reactExports.useEffect(()=>{Ft.current&&Ft.current.forceUpdate()}),reactExports.useEffect(()=>{st&&Gt(resolveAnchorEl$1(st))},[st]),useEnhancedEffect(()=>{if(!rn||!vt)return;const En=un=>{Zt(un.placement)};let Cn=[{name:"preventOverflow",options:{altBoundary:dt}},{name:"flip",options:{altBoundary:dt}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:un})=>{En(un)}}];yt!=null&&(Cn=Cn.concat(yt)),bt&&bt.modifiers!=null&&(Cn=Cn.concat(bt.modifiers));const Mn=createPopper(rn,wt.current,{placement:Bt,...bt,modifiers:Cn});return Ot.current(Mn),()=>{Mn.destroy(),Ot.current(null)}},[rn,dt,yt,vt,bt,Bt]);const nn={placement:Xt};$t!==null&&(nn.TransitionProps=$t);const cn=useUtilityClasses$E(tt),an=Tt.root??"div",mn=useSlotProps({elementType:an,externalSlotProps:Ct.root,externalForwardedProps:Et,additionalProps:{role:"tooltip",ref:Pt},ownerState:tt,className:cn.root});return jsxRuntimeExports.jsx(an,{...mn,children:typeof at=="function"?at(nn):at})}),Popper$1=reactExports.forwardRef(function(tt,rt){const{anchorEl:st,children:at,container:lt,direction:dt="ltr",disablePortal:yt=!1,keepMounted:vt=!1,modifiers:_t,open:bt,placement:Mt="bottom",popperOptions:Ct=defaultPopperOptions,popperRef:Tt,style:$t,transition:Rt=!1,slotProps:Et={},slots:wt={},...Pt}=tt,[Ft,Nt]=reactExports.useState(!0),Ot=()=>{Nt(!1)},Bt=()=>{Nt(!0)};if(!vt&&!bt&&(!Rt||Ft))return null;let Xt;if(lt)Xt=lt;else if(st){const Gt=resolveAnchorEl$1(st);Xt=Gt&&isHTMLElement(Gt)?ownerDocument(Gt).body:ownerDocument(null).body}const Zt=!bt&&vt&&(!Rt||Ft)?"none":void 0,rn=Rt?{in:bt,onEnter:Ot,onExited:Bt}:void 0;return jsxRuntimeExports.jsx(Portal,{disablePortal:yt,container:Xt,children:jsxRuntimeExports.jsx(PopperTooltip,{anchorEl:st,direction:dt,disablePortal:yt,modifiers:_t,ref:rt,open:Rt?!Ft:bt,placement:Mt,popperOptions:Ct,popperRef:Tt,slotProps:Et,slots:wt,...Pt,style:{position:"fixed",top:0,left:0,display:Zt,...$t},TransitionProps:rn,children:at})})}),PopperRoot=styled(Popper$1,{name:"MuiPopper",slot:"Root",overridesResolver:(nt,tt)=>tt.root})({}),Popper=reactExports.forwardRef(function(tt,rt){const st=useRtl(),at=useDefaultProps({props:tt,name:"MuiPopper"}),{anchorEl:lt,component:dt,components:yt,componentsProps:vt,container:_t,disablePortal:bt,keepMounted:Mt,modifiers:Ct,open:Tt,placement:$t,popperOptions:Rt,popperRef:Et,transition:wt,slots:Pt,slotProps:Ft,...Nt}=at,Ot=(Pt==null?void 0:Pt.root)??(yt==null?void 0:yt.Root),Bt={anchorEl:lt,container:_t,disablePortal:bt,keepMounted:Mt,modifiers:Ct,open:Tt,placement:$t,popperOptions:Rt,popperRef:Et,transition:wt,...Nt};return jsxRuntimeExports.jsx(PopperRoot,{as:dt,direction:st?"rtl":"ltr",slots:{root:Ot},slotProps:Ft??vt,...Bt,ref:rt})});function getStyleValue(nt){return parseInt(nt,10)||0}const styles$4={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isEmpty$2(nt){return nt==null||Object.keys(nt).length===0||nt.outerHeightStyle===0&&!nt.overflowing}const TextareaAutosize=reactExports.forwardRef(function(tt,rt){const{onChange:st,maxRows:at,minRows:lt=1,style:dt,value:yt,...vt}=tt,{current:_t}=reactExports.useRef(yt!=null),bt=reactExports.useRef(null),Mt=useForkRef(rt,bt),Ct=reactExports.useRef(null),Tt=reactExports.useRef(null),$t=reactExports.useCallback(()=>{const wt=bt.current,Ft=ownerWindow(wt).getComputedStyle(wt);if(Ft.width==="0px")return{outerHeightStyle:0,overflowing:!1};const Nt=Tt.current;Nt.style.width=Ft.width,Nt.value=wt.value||tt.placeholder||"x",Nt.value.slice(-1)===`
`&&(Nt.value+=" ");const Ot=Ft.boxSizing,Bt=getStyleValue(Ft.paddingBottom)+getStyleValue(Ft.paddingTop),Xt=getStyleValue(Ft.borderBottomWidth)+getStyleValue(Ft.borderTopWidth),Zt=Nt.scrollHeight;Nt.value="x";const rn=Nt.scrollHeight;let Gt=Zt;lt&&(Gt=Math.max(Number(lt)*rn,Gt)),at&&(Gt=Math.min(Number(at)*rn,Gt)),Gt=Math.max(Gt,rn);const nn=Gt+(Ot==="border-box"?Bt+Xt:0),cn=Math.abs(Gt-Zt)<=1;return{outerHeightStyle:nn,overflowing:cn}},[at,lt,tt.placeholder]),Rt=reactExports.useCallback(()=>{const wt=$t();if(isEmpty$2(wt))return;const Pt=wt.outerHeightStyle,Ft=bt.current;Ct.current!==Pt&&(Ct.current=Pt,Ft.style.height=`${Pt}px`),Ft.style.overflow=wt.overflowing?"hidden":""},[$t]);useEnhancedEffect(()=>{const wt=()=>{Rt()};let Pt;const Ft=debounce$2(wt),Nt=bt.current,Ot=ownerWindow(Nt);Ot.addEventListener("resize",Ft);let Bt;return typeof ResizeObserver<"u"&&(Bt=new ResizeObserver(wt),Bt.observe(Nt)),()=>{Ft.clear(),cancelAnimationFrame(Pt),Ot.removeEventListener("resize",Ft),Bt&&Bt.disconnect()}},[$t,Rt]),useEnhancedEffect(()=>{Rt()});const Et=wt=>{_t||Rt(),st&&st(wt)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:yt,onChange:Et,ref:Mt,rows:lt,style:dt,...vt}),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:tt.className,readOnly:!0,ref:Tt,tabIndex:-1,style:{...styles$4.shadow,...dt,paddingTop:0,paddingBottom:0}})]})});function isHostComponent(nt){return typeof nt=="string"}function formControlState({props:nt,states:tt,muiFormControl:rt}){return tt.reduce((st,at)=>(st[at]=nt[at],rt&&typeof nt[at]>"u"&&(st[at]=rt[at]),st),{})}const FormControlContext=reactExports.createContext(void 0);function useFormControl(){return reactExports.useContext(FormControlContext)}function hasValue(nt){return nt!=null&&!(Array.isArray(nt)&&nt.length===0)}function isFilled(nt,tt=!1){return nt&&(hasValue(nt.value)&&nt.value!==""||tt&&hasValue(nt.defaultValue)&&nt.defaultValue!=="")}function isAdornedStart(nt){return nt.startAdornment}function getInputBaseUtilityClass(nt){return generateUtilityClass("MuiInputBase",nt)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _InputGlobalStyles;const rootOverridesResolver=(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.formControl&&tt.formControl,rt.startAdornment&&tt.adornedStart,rt.endAdornment&&tt.adornedEnd,rt.error&&tt.error,rt.size==="small"&&tt.sizeSmall,rt.multiline&&tt.multiline,rt.color&&tt[`color${capitalize(rt.color)}`],rt.fullWidth&&tt.fullWidth,rt.hiddenLabel&&tt.hiddenLabel]},inputOverridesResolver=(nt,tt)=>{const{ownerState:rt}=nt;return[tt.input,rt.size==="small"&&tt.inputSizeSmall,rt.multiline&&tt.inputMultiline,rt.type==="search"&&tt.inputTypeSearch,rt.startAdornment&&tt.inputAdornedStart,rt.endAdornment&&tt.inputAdornedEnd,rt.hiddenLabel&&tt.inputHiddenLabel]},useUtilityClasses$D=nt=>{const{classes:tt,color:rt,disabled:st,error:at,endAdornment:lt,focused:dt,formControl:yt,fullWidth:vt,hiddenLabel:_t,multiline:bt,readOnly:Mt,size:Ct,startAdornment:Tt,type:$t}=nt,Rt={root:["root",`color${capitalize(rt)}`,st&&"disabled",at&&"error",vt&&"fullWidth",dt&&"focused",yt&&"formControl",Ct&&Ct!=="medium"&&`size${capitalize(Ct)}`,bt&&"multiline",Tt&&"adornedStart",lt&&"adornedEnd",_t&&"hiddenLabel",Mt&&"readOnly"],input:["input",st&&"disabled",$t==="search"&&"inputTypeSearch",bt&&"inputMultiline",Ct==="small"&&"inputSizeSmall",_t&&"inputHiddenLabel",Tt&&"inputAdornedStart",lt&&"inputAdornedEnd",Mt&&"readOnly"]};return composeClasses(Rt,getInputBaseUtilityClass,tt)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:nt})=>({...nt.typography.body1,color:(nt.vars||nt).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses.disabled}`]:{color:(nt.vars||nt).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:tt})=>tt.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:tt,size:rt})=>tt.multiline&&rt==="small",style:{paddingTop:1}},{props:({ownerState:tt})=>tt.fullWidth,style:{width:"100%"}}]}))),InputBaseInput=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:nt})=>{const tt=nt.palette.mode==="light",rt={color:"currentColor",...nt.vars?{opacity:nt.vars.opacity.inputPlaceholder}:{opacity:tt?.42:.5},transition:nt.transitions.create("opacity",{duration:nt.transitions.duration.shorter})},st={opacity:"0 !important"},at=nt.vars?{opacity:nt.vars.opacity.inputPlaceholder}:{opacity:tt?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":rt,"&::-moz-placeholder":rt,"&::-ms-input-placeholder":rt,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses.formControl} &`]:{"&::-webkit-input-placeholder":st,"&::-moz-placeholder":st,"&::-ms-input-placeholder":st,"&:focus::-webkit-input-placeholder":at,"&:focus::-moz-placeholder":at,"&:focus::-ms-input-placeholder":at},[`&.${inputBaseClasses.disabled}`]:{opacity:1,WebkitTextFillColor:(nt.vars||nt).palette.text.disabled},variants:[{props:({ownerState:lt})=>!lt.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:lt})=>lt.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),InputGlobalStyles=globalCss({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),InputBase=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiInputBase"}),{"aria-describedby":at,autoComplete:lt,autoFocus:dt,className:yt,color:vt,components:_t={},componentsProps:bt={},defaultValue:Mt,disabled:Ct,disableInjectingGlobalStyles:Tt,endAdornment:$t,error:Rt,fullWidth:Et=!1,id:wt,inputComponent:Pt="input",inputProps:Ft={},inputRef:Nt,margin:Ot,maxRows:Bt,minRows:Xt,multiline:Zt=!1,name:rn,onBlur:Gt,onChange:nn,onClick:cn,onFocus:an,onKeyDown:mn,onKeyUp:En,placeholder:Cn,readOnly:Mn,renderSuffix:un,rows:Tn,size:Pn,slotProps:dn={},slots:Un={},startAdornment:qn,type:In="text",value:Wn,...ar}=st,fr=Ft.value!=null?Ft.value:Wn,{current:mr}=reactExports.useRef(fr!=null),vr=reactExports.useRef(),Ar=reactExports.useCallback(gr=>{},[]),$r=useForkRef(vr,Nt,Ft.ref,Ar),[Mr,Jn]=reactExports.useState(!1),hr=useFormControl(),wr=formControlState({props:st,muiFormControl:hr,states:["color","disabled","error","hiddenLabel","size","required","filled"]});wr.focused=hr?hr.focused:Mr,reactExports.useEffect(()=>{!hr&&Ct&&Mr&&(Jn(!1),Gt&&Gt())},[hr,Ct,Mr,Gt]);const Nr=hr&&hr.onFilled,Fr=hr&&hr.onEmpty,Yr=reactExports.useCallback(gr=>{isFilled(gr)?Nr&&Nr():Fr&&Fr()},[Nr,Fr]);useEnhancedEffect(()=>{mr&&Yr({value:fr})},[fr,Yr,mr]);const cs=gr=>{an&&an(gr),Ft.onFocus&&Ft.onFocus(gr),hr&&hr.onFocus?hr.onFocus(gr):Jn(!0)},cr=gr=>{Gt&&Gt(gr),Ft.onBlur&&Ft.onBlur(gr),hr&&hr.onBlur?hr.onBlur(gr):Jn(!1)},Qn=(gr,...Gr)=>{if(!mr){const jr=gr.target||vr.current;if(jr==null)throw new Error(formatMuiErrorMessage(1));Yr({value:jr.value})}Ft.onChange&&Ft.onChange(gr,...Gr),nn&&nn(gr,...Gr)};reactExports.useEffect(()=>{Yr(vr.current)},[]);const _r=gr=>{vr.current&&gr.currentTarget===gr.target&&vr.current.focus(),cn&&cn(gr)};let Ir=Pt,pr=Ft;Zt&&Ir==="input"&&(Tn?pr={type:void 0,minRows:Tn,maxRows:Tn,...pr}:pr={type:void 0,maxRows:Bt,minRows:Xt,...pr},Ir=TextareaAutosize);const Tr=gr=>{Yr(gr.animationName==="mui-auto-fill-cancel"?vr.current:{value:"x"})};reactExports.useEffect(()=>{hr&&hr.setAdornedStart(!!qn)},[hr,qn]);const Wr={...st,color:wr.color||"primary",disabled:wr.disabled,endAdornment:$t,error:wr.error,focused:wr.focused,formControl:hr,fullWidth:Et,hiddenLabel:wr.hiddenLabel,multiline:Zt,size:wr.size,startAdornment:qn,type:In},Kn=useUtilityClasses$D(Wr),rr=Un.root||_t.Root||InputBaseRoot,ur=dn.root||bt.root||{},Sr=Un.input||_t.Input||InputBaseInput;return pr={...pr,...dn.input??bt.input},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!Tt&&typeof InputGlobalStyles=="function"&&(_InputGlobalStyles||(_InputGlobalStyles=jsxRuntimeExports.jsx(InputGlobalStyles,{}))),jsxRuntimeExports.jsxs(rr,{...ur,ref:rt,onClick:_r,...ar,...!isHostComponent(rr)&&{ownerState:{...Wr,...ur.ownerState}},className:clsx(Kn.root,ur.className,yt,Mn&&"MuiInputBase-readOnly"),children:[qn,jsxRuntimeExports.jsx(FormControlContext.Provider,{value:null,children:jsxRuntimeExports.jsx(Sr,{"aria-invalid":wr.error,"aria-describedby":at,autoComplete:lt,autoFocus:dt,defaultValue:Mt,disabled:wr.disabled,id:wt,onAnimationStart:Tr,name:rn,placeholder:Cn,readOnly:Mn,required:wr.required,rows:Tn,value:fr,onKeyDown:mn,onKeyUp:En,type:In,...pr,...!isHostComponent(Sr)&&{as:Ir,ownerState:{...Wr,...pr.ownerState}},ref:$r,className:clsx(Kn.input,pr.className,Mn&&"MuiInputBase-readOnly"),onBlur:cr,onChange:Qn,onFocus:cs})}),$t,un?un({...wr,startAdornment:qn}):null]})]})});function getInputUtilityClass(nt){return generateUtilityClass("MuiInput",nt)}const inputClasses={...inputBaseClasses,...generateUtilityClasses("MuiInput",["root","underline","input"])};function getOutlinedInputUtilityClass(nt){return generateUtilityClass("MuiOutlinedInput",nt)}const outlinedInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])};function getFilledInputUtilityClass(nt){return generateUtilityClass("MuiFilledInput",nt)}const filledInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),styles$3={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(tt,rt){const st=useTheme(),at={enter:st.transitions.duration.enteringScreen,exit:st.transitions.duration.leavingScreen},{addEndListener:lt,appear:dt=!0,children:yt,easing:vt,in:_t,onEnter:bt,onEntered:Mt,onEntering:Ct,onExit:Tt,onExited:$t,onExiting:Rt,style:Et,timeout:wt=at,TransitionComponent:Pt=Transition,...Ft}=tt,Nt=reactExports.useRef(null),Ot=useForkRef(Nt,getReactElementRef(yt),rt),Bt=mn=>En=>{if(mn){const Cn=Nt.current;En===void 0?mn(Cn):mn(Cn,En)}},Xt=Bt(Ct),Zt=Bt((mn,En)=>{reflow(mn);const Cn=getTransitionProps({style:Et,timeout:wt,easing:vt},{mode:"enter"});mn.style.webkitTransition=st.transitions.create("opacity",Cn),mn.style.transition=st.transitions.create("opacity",Cn),bt&&bt(mn,En)}),rn=Bt(Mt),Gt=Bt(Rt),nn=Bt(mn=>{const En=getTransitionProps({style:Et,timeout:wt,easing:vt},{mode:"exit"});mn.style.webkitTransition=st.transitions.create("opacity",En),mn.style.transition=st.transitions.create("opacity",En),Tt&&Tt(mn)}),cn=Bt($t),an=mn=>{lt&&lt(Nt.current,mn)};return jsxRuntimeExports.jsx(Pt,{appear:dt,in:_t,nodeRef:Nt,onEnter:Zt,onEntered:rn,onEntering:Xt,onExit:nn,onExited:cn,onExiting:Gt,addEndListener:an,timeout:wt,...Ft,children:(mn,{ownerState:En,...Cn})=>reactExports.cloneElement(yt,{style:{opacity:0,visibility:mn==="exited"&&!_t?"hidden":void 0,...styles$3[mn],...Et,...yt.props.style},ref:Ot,...Cn})})});function getBackdropUtilityClass(nt){return generateUtilityClass("MuiBackdrop",nt)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const useUtilityClasses$C=nt=>{const{classes:tt,invisible:rt}=nt;return composeClasses({root:["root",rt&&"invisible"]},getBackdropUtilityClass,tt)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.invisible&&tt.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Backdrop=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiBackdrop"}),{children:at,className:lt,component:dt="div",invisible:yt=!1,open:vt,components:_t={},componentsProps:bt={},slotProps:Mt={},slots:Ct={},TransitionComponent:Tt,transitionDuration:$t,...Rt}=st,Et={...st,component:dt,invisible:yt},wt=useUtilityClasses$C(Et),Pt={transition:Tt,root:_t.Root,...Ct},Ft={...bt,...Mt},Nt={slots:Pt,slotProps:Ft},[Ot,Bt]=useSlot("root",{elementType:BackdropRoot,externalForwardedProps:Nt,className:clsx(wt.root,lt),ownerState:Et}),[Xt,Zt]=useSlot("transition",{elementType:Fade,externalForwardedProps:Nt,ownerState:Et});return jsxRuntimeExports.jsx(Xt,{in:vt,timeout:$t,...Rt,...Zt,children:jsxRuntimeExports.jsx(Ot,{"aria-hidden":!0,...Bt,classes:wt,ref:rt,children:at})})}),boxClasses=generateUtilityClasses("MuiBox",["root"]),defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:boxClasses.root,generateClassName:ClassNameGenerator.generate});function getButtonUtilityClass(nt){return generateUtilityClass("MuiButton",nt)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),ButtonGroupContext=reactExports.createContext({}),ButtonGroupButtonContext=reactExports.createContext(void 0),useUtilityClasses$B=nt=>{const{color:tt,disableElevation:rt,fullWidth:st,size:at,variant:lt,classes:dt}=nt,yt={root:["root",lt,`${lt}${capitalize(tt)}`,`size${capitalize(at)}`,`${lt}Size${capitalize(at)}`,`color${capitalize(tt)}`,rt&&"disableElevation",st&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${capitalize(at)}`],endIcon:["icon","endIcon",`iconSize${capitalize(at)}`]},vt=composeClasses(yt,getButtonUtilityClass,dt);return{...dt,...vt}},commonIconStyles=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ButtonRoot=styled(ButtonBase,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiButton",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[rt.variant],tt[`${rt.variant}${capitalize(rt.color)}`],tt[`size${capitalize(rt.size)}`],tt[`${rt.variant}Size${capitalize(rt.size)}`],rt.color==="inherit"&&tt.colorInherit,rt.disableElevation&&tt.disableElevation,rt.fullWidth&&tt.fullWidth]}})(memoTheme(({theme:nt})=>{const tt=nt.palette.mode==="light"?nt.palette.grey[300]:nt.palette.grey[800],rt=nt.palette.mode==="light"?nt.palette.grey.A100:nt.palette.grey[700];return{...nt.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(nt.vars||nt).shape.borderRadius,transition:nt.transitions.create(["background-color","box-shadow","border-color","color"],{duration:nt.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${buttonClasses.disabled}`]:{color:(nt.vars||nt).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(nt.vars||nt).shadows[2],"&:hover":{boxShadow:(nt.vars||nt).shadows[4],"@media (hover: none)":{boxShadow:(nt.vars||nt).shadows[2]}},"&:active":{boxShadow:(nt.vars||nt).shadows[8]},[`&.${buttonClasses.focusVisible}`]:{boxShadow:(nt.vars||nt).shadows[6]},[`&.${buttonClasses.disabled}`]:{color:(nt.vars||nt).palette.action.disabled,boxShadow:(nt.vars||nt).shadows[0],backgroundColor:(nt.vars||nt).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${buttonClasses.disabled}`]:{border:`1px solid ${(nt.vars||nt).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([st])=>({props:{color:st},style:{"--variant-textColor":(nt.vars||nt).palette[st].main,"--variant-outlinedColor":(nt.vars||nt).palette[st].main,"--variant-outlinedBorder":nt.vars?`rgba(${nt.vars.palette[st].mainChannel} / 0.5)`:alpha(nt.palette[st].main,.5),"--variant-containedColor":(nt.vars||nt).palette[st].contrastText,"--variant-containedBg":(nt.vars||nt).palette[st].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(nt.vars||nt).palette[st].dark,"--variant-textBg":nt.vars?`rgba(${nt.vars.palette[st].mainChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette[st].main,nt.palette.action.hoverOpacity),"--variant-outlinedBorder":(nt.vars||nt).palette[st].main,"--variant-outlinedBg":nt.vars?`rgba(${nt.vars.palette[st].mainChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette[st].main,nt.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":nt.vars?nt.vars.palette.Button.inheritContainedBg:tt,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":nt.vars?nt.vars.palette.Button.inheritContainedHoverBg:rt,"--variant-textBg":nt.vars?`rgba(${nt.vars.palette.text.primaryChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette.text.primary,nt.palette.action.hoverOpacity),"--variant-outlinedBg":nt.vars?`rgba(${nt.vars.palette.text.primaryChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette.text.primary,nt.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:nt.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:nt.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:nt.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:nt.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:nt.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:nt.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),ButtonStartIcon=styled("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.startIcon,tt[`iconSize${capitalize(rt.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...commonIconStyles]}),ButtonEndIcon=styled("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.endIcon,tt[`iconSize${capitalize(rt.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...commonIconStyles]}),Button=reactExports.forwardRef(function(tt,rt){const st=reactExports.useContext(ButtonGroupContext),at=reactExports.useContext(ButtonGroupButtonContext),lt=resolveProps(st,tt),dt=useDefaultProps({props:lt,name:"MuiButton"}),{children:yt,color:vt="primary",component:_t="button",className:bt,disabled:Mt=!1,disableElevation:Ct=!1,disableFocusRipple:Tt=!1,endIcon:$t,focusVisibleClassName:Rt,fullWidth:Et=!1,size:wt="medium",startIcon:Pt,type:Ft,variant:Nt="text",...Ot}=dt,Bt={...dt,color:vt,component:_t,disabled:Mt,disableElevation:Ct,disableFocusRipple:Tt,fullWidth:Et,size:wt,type:Ft,variant:Nt},Xt=useUtilityClasses$B(Bt),Zt=Pt&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:Xt.startIcon,ownerState:Bt,children:Pt}),rn=$t&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:Xt.endIcon,ownerState:Bt,children:$t}),Gt=at||"";return jsxRuntimeExports.jsxs(ButtonRoot,{ownerState:Bt,className:clsx(st.className,Xt.root,bt,Gt),component:_t,disabled:Mt,focusRipple:!Tt,focusVisibleClassName:clsx(Xt.focusVisible,Rt),ref:rt,type:Ft,...Ot,classes:Xt,children:[Zt,yt,rn]})});function getSwitchBaseUtilityClass(nt){return generateUtilityClass("PrivateSwitchBase",nt)}generateUtilityClasses("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const useUtilityClasses$A=nt=>{const{classes:tt,checked:rt,disabled:st,edge:at}=nt,lt={root:["root",rt&&"checked",st&&"disabled",at&&`edge${capitalize(at)}`],input:["input"]};return composeClasses(lt,getSwitchBaseUtilityClass,tt)},SwitchBaseRoot=styled(ButtonBase)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:nt,ownerState:tt})=>nt==="start"&&tt.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:nt,ownerState:tt})=>nt==="end"&&tt.size!=="small",style:{marginRight:-12}}]}),SwitchBaseInput=styled("input",{shouldForwardProp:rootShouldForwardProp})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),SwitchBase=reactExports.forwardRef(function(tt,rt){const{autoFocus:st,checked:at,checkedIcon:lt,className:dt,defaultChecked:yt,disabled:vt,disableFocusRipple:_t=!1,edge:bt=!1,icon:Mt,id:Ct,inputProps:Tt,inputRef:$t,name:Rt,onBlur:Et,onChange:wt,onFocus:Pt,readOnly:Ft,required:Nt=!1,tabIndex:Ot,type:Bt,value:Xt,...Zt}=tt,[rn,Gt]=useControlled({controlled:at,default:!!yt,name:"SwitchBase",state:"checked"}),nn=useFormControl(),cn=Tn=>{Pt&&Pt(Tn),nn&&nn.onFocus&&nn.onFocus(Tn)},an=Tn=>{Et&&Et(Tn),nn&&nn.onBlur&&nn.onBlur(Tn)},mn=Tn=>{if(Tn.nativeEvent.defaultPrevented)return;const Pn=Tn.target.checked;Gt(Pn),wt&&wt(Tn,Pn)};let En=vt;nn&&typeof En>"u"&&(En=nn.disabled);const Cn=Bt==="checkbox"||Bt==="radio",Mn={...tt,checked:rn,disabled:En,disableFocusRipple:_t,edge:bt},un=useUtilityClasses$A(Mn);return jsxRuntimeExports.jsxs(SwitchBaseRoot,{component:"span",className:clsx(un.root,dt),centerRipple:!0,focusRipple:!_t,disabled:En,tabIndex:null,role:void 0,onFocus:cn,onBlur:an,ownerState:Mn,ref:rt,...Zt,children:[jsxRuntimeExports.jsx(SwitchBaseInput,{autoFocus:st,checked:at,defaultChecked:yt,className:un.input,disabled:En,id:Cn?Ct:void 0,name:Rt,onChange:mn,readOnly:Ft,ref:$t,required:Nt,ownerState:Mn,tabIndex:Ot,type:Bt,...Bt==="checkbox"&&Xt===void 0?{}:{value:Xt},...Tt}),rn?lt:Mt]})}),CheckBoxOutlineBlankIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),CheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),IndeterminateCheckBoxIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function getCheckboxUtilityClass(nt){return generateUtilityClass("MuiCheckbox",nt)}const checkboxClasses=generateUtilityClasses("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),useUtilityClasses$z=nt=>{const{classes:tt,indeterminate:rt,color:st,size:at}=nt,lt={root:["root",rt&&"indeterminate",`color${capitalize(st)}`,`size${capitalize(at)}`]},dt=composeClasses(lt,getCheckboxUtilityClass,tt);return{...tt,...dt}},CheckboxRoot=styled(SwitchBase,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.indeterminate&&tt.indeterminate,tt[`size${capitalize(rt.size)}`],rt.color!=="default"&&tt[`color${capitalize(rt.color)}`]]}})(memoTheme(({theme:nt})=>({color:(nt.vars||nt).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:nt.vars?`rgba(${nt.vars.palette.action.activeChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette.action.active,nt.palette.action.hoverOpacity)}}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt,disableRipple:!1},style:{"&:hover":{backgroundColor:nt.vars?`rgba(${nt.vars.palette[tt].mainChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette[tt].main,nt.palette.action.hoverOpacity)}}})),...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt},style:{[`&.${checkboxClasses.checked}, &.${checkboxClasses.indeterminate}`]:{color:(nt.vars||nt).palette[tt].main},[`&.${checkboxClasses.disabled}`]:{color:(nt.vars||nt).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),defaultCheckedIcon$1=jsxRuntimeExports.jsx(CheckBoxIcon,{}),defaultIcon$1=jsxRuntimeExports.jsx(CheckBoxOutlineBlankIcon,{}),defaultIndeterminateIcon=jsxRuntimeExports.jsx(IndeterminateCheckBoxIcon,{}),Checkbox=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiCheckbox"}),{checkedIcon:at=defaultCheckedIcon$1,color:lt="primary",icon:dt=defaultIcon$1,indeterminate:yt=!1,indeterminateIcon:vt=defaultIndeterminateIcon,inputProps:_t,size:bt="medium",disableRipple:Mt=!1,className:Ct,...Tt}=st,$t=yt?vt:dt,Rt=yt?vt:at,Et={...st,disableRipple:Mt,color:lt,indeterminate:yt,size:bt},wt=useUtilityClasses$z(Et);return jsxRuntimeExports.jsx(CheckboxRoot,{type:"checkbox",inputProps:{"data-indeterminate":yt,..._t},icon:reactExports.cloneElement($t,{fontSize:$t.props.fontSize??bt}),checkedIcon:reactExports.cloneElement(Rt,{fontSize:Rt.props.fontSize??bt}),ownerState:Et,ref:rt,className:clsx(wt.root,Ct),disableRipple:Mt,...Tt,classes:wt})}),Container=createContainer({createStyledComponent:styled("div",{name:"MuiContainer",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[`maxWidth${capitalize(String(rt.maxWidth))}`],rt.fixed&&tt.fixed,rt.disableGutters&&tt.disableGutters]}}),useThemeProps:nt=>useDefaultProps({props:nt,name:"MuiContainer"})}),isDynamicSupport=typeof globalCss({})=="function",html=(nt,tt)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...tt&&!nt.vars&&{colorScheme:nt.palette.mode}}),body=nt=>({color:(nt.vars||nt).palette.text.primary,...nt.typography.body1,backgroundColor:(nt.vars||nt).palette.background.default,"@media print":{backgroundColor:(nt.vars||nt).palette.common.white}}),styles$2=(nt,tt=!1)=>{var lt,dt;const rt={};tt&&nt.colorSchemes&&typeof nt.getColorSchemeSelector=="function"&&Object.entries(nt.colorSchemes).forEach(([yt,vt])=>{var bt,Mt;const _t=nt.getColorSchemeSelector(yt);_t.startsWith("@")?rt[_t]={":root":{colorScheme:(bt=vt.palette)==null?void 0:bt.mode}}:rt[_t.replace(/\s*&/,"")]={colorScheme:(Mt=vt.palette)==null?void 0:Mt.mode}});let st={html:html(nt,tt),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:nt.typography.fontWeightBold},body:{margin:0,...body(nt),"&::backdrop":{backgroundColor:(nt.vars||nt).palette.background.default}},...rt};const at=(dt=(lt=nt.components)==null?void 0:lt.MuiCssBaseline)==null?void 0:dt.styleOverrides;return at&&(st=[st,at]),st},SELECTOR="mui-ecs",staticStyles=nt=>{const tt=styles$2(nt,!1),rt=Array.isArray(tt)?tt[0]:tt;return!nt.vars&&rt&&(rt.html[`:root:has(${SELECTOR})`]={colorScheme:nt.palette.mode}),nt.colorSchemes&&Object.entries(nt.colorSchemes).forEach(([st,at])=>{var dt,yt;const lt=nt.getColorSchemeSelector(st);lt.startsWith("@")?rt[lt]={[`:root:not(:has(.${SELECTOR}))`]:{colorScheme:(dt=at.palette)==null?void 0:dt.mode}}:rt[lt.replace(/\s*&/,"")]={[`&:not(:has(.${SELECTOR}))`]:{colorScheme:(yt=at.palette)==null?void 0:yt.mode}}}),tt},GlobalStyles=globalCss(isDynamicSupport?({theme:nt,enableColorScheme:tt})=>styles$2(nt,tt):({theme:nt})=>staticStyles(nt));function CssBaseline(nt){const tt=useDefaultProps({props:nt,name:"MuiCssBaseline"}),{children:rt,enableColorScheme:st=!1}=tt;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[isDynamicSupport&&jsxRuntimeExports.jsx(GlobalStyles,{enableColorScheme:st}),!isDynamicSupport&&!st&&jsxRuntimeExports.jsx("span",{className:SELECTOR,style:{display:"none"}}),rt]})}function isOverflowing(nt){const tt=ownerDocument(nt);return tt.body===nt?ownerWindow(nt).innerWidth>tt.documentElement.clientWidth:nt.scrollHeight>nt.clientHeight}function ariaHidden(nt,tt){tt?nt.setAttribute("aria-hidden","true"):nt.removeAttribute("aria-hidden")}function getPaddingRight(nt){return parseInt(ownerWindow(nt).getComputedStyle(nt).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(nt){const rt=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(nt.tagName),st=nt.tagName==="INPUT"&&nt.getAttribute("type")==="hidden";return rt||st}function ariaHiddenSiblings(nt,tt,rt,st,at){const lt=[tt,rt,...st];[].forEach.call(nt.children,dt=>{const yt=!lt.includes(dt),vt=!isAriaHiddenForbiddenOnElement(dt);yt&&vt&&ariaHidden(dt,at)})}function findIndexOf(nt,tt){let rt=-1;return nt.some((st,at)=>tt(st)?(rt=at,!0):!1),rt}function handleContainer(nt,tt){const rt=[],st=nt.container;if(!tt.disableScrollLock){if(isOverflowing(st)){const dt=getScrollbarSize(ownerWindow(st));rt.push({value:st.style.paddingRight,property:"padding-right",el:st}),st.style.paddingRight=`${getPaddingRight(st)+dt}px`;const yt=ownerDocument(st).querySelectorAll(".mui-fixed");[].forEach.call(yt,vt=>{rt.push({value:vt.style.paddingRight,property:"padding-right",el:vt}),vt.style.paddingRight=`${getPaddingRight(vt)+dt}px`})}let lt;if(st.parentNode instanceof DocumentFragment)lt=ownerDocument(st).body;else{const dt=st.parentElement,yt=ownerWindow(st);lt=(dt==null?void 0:dt.nodeName)==="HTML"&&yt.getComputedStyle(dt).overflowY==="scroll"?dt:st}rt.push({value:lt.style.overflow,property:"overflow",el:lt},{value:lt.style.overflowX,property:"overflow-x",el:lt},{value:lt.style.overflowY,property:"overflow-y",el:lt}),lt.style.overflow="hidden"}return()=>{rt.forEach(({value:lt,el:dt,property:yt})=>{lt?dt.style.setProperty(yt,lt):dt.style.removeProperty(yt)})}}function getHiddenSiblings(nt){const tt=[];return[].forEach.call(nt.children,rt=>{rt.getAttribute("aria-hidden")==="true"&&tt.push(rt)}),tt}class ModalManager{constructor(){this.modals=[],this.containers=[]}add(tt,rt){let st=this.modals.indexOf(tt);if(st!==-1)return st;st=this.modals.length,this.modals.push(tt),tt.modalRef&&ariaHidden(tt.modalRef,!1);const at=getHiddenSiblings(rt);ariaHiddenSiblings(rt,tt.mount,tt.modalRef,at,!0);const lt=findIndexOf(this.containers,dt=>dt.container===rt);return lt!==-1?(this.containers[lt].modals.push(tt),st):(this.containers.push({modals:[tt],container:rt,restore:null,hiddenSiblings:at}),st)}mount(tt,rt){const st=findIndexOf(this.containers,lt=>lt.modals.includes(tt)),at=this.containers[st];at.restore||(at.restore=handleContainer(at,rt))}remove(tt,rt=!0){const st=this.modals.indexOf(tt);if(st===-1)return st;const at=findIndexOf(this.containers,dt=>dt.modals.includes(tt)),lt=this.containers[at];if(lt.modals.splice(lt.modals.indexOf(tt),1),this.modals.splice(st,1),lt.modals.length===0)lt.restore&&lt.restore(),tt.modalRef&&ariaHidden(tt.modalRef,rt),ariaHiddenSiblings(lt.container,tt.mount,tt.modalRef,lt.hiddenSiblings,!1),this.containers.splice(at,1);else{const dt=lt.modals[lt.modals.length-1];dt.modalRef&&ariaHidden(dt.modalRef,!1)}return st}isTopModal(tt){return this.modals.length>0&&this.modals[this.modals.length-1]===tt}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(nt){const tt=parseInt(nt.getAttribute("tabindex")||"",10);return Number.isNaN(tt)?nt.contentEditable==="true"||(nt.nodeName==="AUDIO"||nt.nodeName==="VIDEO"||nt.nodeName==="DETAILS")&&nt.getAttribute("tabindex")===null?0:nt.tabIndex:tt}function isNonTabbableRadio(nt){if(nt.tagName!=="INPUT"||nt.type!=="radio"||!nt.name)return!1;const tt=st=>nt.ownerDocument.querySelector(`input[type="radio"]${st}`);let rt=tt(`[name="${nt.name}"]:checked`);return rt||(rt=tt(`[name="${nt.name}"]`)),rt!==nt}function isNodeMatchingSelectorFocusable(nt){return!(nt.disabled||nt.tagName==="INPUT"&&nt.type==="hidden"||isNonTabbableRadio(nt))}function defaultGetTabbable(nt){const tt=[],rt=[];return Array.from(nt.querySelectorAll(candidatesSelector)).forEach((st,at)=>{const lt=getTabIndex(st);lt===-1||!isNodeMatchingSelectorFocusable(st)||(lt===0?tt.push(st):rt.push({documentOrder:at,tabIndex:lt,node:st}))}),rt.sort((st,at)=>st.tabIndex===at.tabIndex?st.documentOrder-at.documentOrder:st.tabIndex-at.tabIndex).map(st=>st.node).concat(tt)}function defaultIsEnabled(){return!0}function FocusTrap(nt){const{children:tt,disableAutoFocus:rt=!1,disableEnforceFocus:st=!1,disableRestoreFocus:at=!1,getTabbable:lt=defaultGetTabbable,isEnabled:dt=defaultIsEnabled,open:yt}=nt,vt=reactExports.useRef(!1),_t=reactExports.useRef(null),bt=reactExports.useRef(null),Mt=reactExports.useRef(null),Ct=reactExports.useRef(null),Tt=reactExports.useRef(!1),$t=reactExports.useRef(null),Rt=useForkRef(getReactElementRef(tt),$t),Et=reactExports.useRef(null);reactExports.useEffect(()=>{!yt||!$t.current||(Tt.current=!rt)},[rt,yt]),reactExports.useEffect(()=>{if(!yt||!$t.current)return;const Ft=ownerDocument($t.current);return $t.current.contains(Ft.activeElement)||($t.current.hasAttribute("tabIndex")||$t.current.setAttribute("tabIndex","-1"),Tt.current&&$t.current.focus()),()=>{at||(Mt.current&&Mt.current.focus&&(vt.current=!0,Mt.current.focus()),Mt.current=null)}},[yt]),reactExports.useEffect(()=>{if(!yt||!$t.current)return;const Ft=ownerDocument($t.current),Nt=Xt=>{Et.current=Xt,!(st||!dt()||Xt.key!=="Tab")&&Ft.activeElement===$t.current&&Xt.shiftKey&&(vt.current=!0,bt.current&&bt.current.focus())},Ot=()=>{var rn,Gt;const Xt=$t.current;if(Xt===null)return;if(!Ft.hasFocus()||!dt()||vt.current){vt.current=!1;return}if(Xt.contains(Ft.activeElement)||st&&Ft.activeElement!==_t.current&&Ft.activeElement!==bt.current)return;if(Ft.activeElement!==Ct.current)Ct.current=null;else if(Ct.current!==null)return;if(!Tt.current)return;let Zt=[];if((Ft.activeElement===_t.current||Ft.activeElement===bt.current)&&(Zt=lt($t.current)),Zt.length>0){const nn=!!((rn=Et.current)!=null&&rn.shiftKey&&((Gt=Et.current)==null?void 0:Gt.key)==="Tab"),cn=Zt[0],an=Zt[Zt.length-1];typeof cn!="string"&&typeof an!="string"&&(nn?an.focus():cn.focus())}else Xt.focus()};Ft.addEventListener("focusin",Ot),Ft.addEventListener("keydown",Nt,!0);const Bt=setInterval(()=>{Ft.activeElement&&Ft.activeElement.tagName==="BODY"&&Ot()},50);return()=>{clearInterval(Bt),Ft.removeEventListener("focusin",Ot),Ft.removeEventListener("keydown",Nt,!0)}},[rt,st,at,dt,yt,lt]);const wt=Ft=>{Mt.current===null&&(Mt.current=Ft.relatedTarget),Tt.current=!0,Ct.current=Ft.target;const Nt=tt.props.onFocus;Nt&&Nt(Ft)},Pt=Ft=>{Mt.current===null&&(Mt.current=Ft.relatedTarget),Tt.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:yt?0:-1,onFocus:Pt,ref:_t,"data-testid":"sentinelStart"}),reactExports.cloneElement(tt,{ref:Rt,onFocus:wt}),jsxRuntimeExports.jsx("div",{tabIndex:yt?0:-1,onFocus:Pt,ref:bt,"data-testid":"sentinelEnd"})]})}function getContainer(nt){return typeof nt=="function"?nt():nt}function getHasTransition(nt){return nt?nt.props.hasOwnProperty("in"):!1}const noop$3=()=>{},manager=new ModalManager;function useModal(nt){const{container:tt,disableEscapeKeyDown:rt=!1,disableScrollLock:st=!1,closeAfterTransition:at=!1,onTransitionEnter:lt,onTransitionExited:dt,children:yt,onClose:vt,open:_t,rootRef:bt}=nt,Mt=reactExports.useRef({}),Ct=reactExports.useRef(null),Tt=reactExports.useRef(null),$t=useForkRef(Tt,bt),[Rt,Et]=reactExports.useState(!_t),wt=getHasTransition(yt);let Pt=!0;(nt["aria-hidden"]==="false"||nt["aria-hidden"]===!1)&&(Pt=!1);const Ft=()=>ownerDocument(Ct.current),Nt=()=>(Mt.current.modalRef=Tt.current,Mt.current.mount=Ct.current,Mt.current),Ot=()=>{manager.mount(Nt(),{disableScrollLock:st}),Tt.current&&(Tt.current.scrollTop=0)},Bt=useEventCallback(()=>{const En=getContainer(tt)||Ft().body;manager.add(Nt(),En),Tt.current&&Ot()}),Xt=()=>manager.isTopModal(Nt()),Zt=useEventCallback(En=>{Ct.current=En,En&&(_t&&Xt()?Ot():Tt.current&&ariaHidden(Tt.current,Pt))}),rn=reactExports.useCallback(()=>{manager.remove(Nt(),Pt)},[Pt]);reactExports.useEffect(()=>()=>{rn()},[rn]),reactExports.useEffect(()=>{_t?Bt():(!wt||!at)&&rn()},[_t,rn,wt,at,Bt]);const Gt=En=>Cn=>{var Mn;(Mn=En.onKeyDown)==null||Mn.call(En,Cn),!(Cn.key!=="Escape"||Cn.which===229||!Xt())&&(rt||(Cn.stopPropagation(),vt&&vt(Cn,"escapeKeyDown")))},nn=En=>Cn=>{var Mn;(Mn=En.onClick)==null||Mn.call(En,Cn),Cn.target===Cn.currentTarget&&vt&&vt(Cn,"backdropClick")};return{getRootProps:(En={})=>{const Cn=extractEventHandlers(nt);delete Cn.onTransitionEnter,delete Cn.onTransitionExited;const Mn={...Cn,...En};return{role:"presentation",...Mn,onKeyDown:Gt(Mn),ref:$t}},getBackdropProps:(En={})=>{const Cn=En;return{"aria-hidden":!0,...Cn,onClick:nn(Cn),open:_t}},getTransitionProps:()=>{const En=()=>{Et(!1),lt&&lt()},Cn=()=>{Et(!0),dt&&dt(),at&&rn()};return{onEnter:createChainedFunction(En,(yt==null?void 0:yt.props.onEnter)??noop$3),onExited:createChainedFunction(Cn,(yt==null?void 0:yt.props.onExited)??noop$3)}},rootRef:$t,portalRef:Zt,isTopModal:Xt,exited:Rt,hasTransition:wt}}function getModalUtilityClass(nt){return generateUtilityClass("MuiModal",nt)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const useUtilityClasses$y=nt=>{const{open:tt,exited:rt,classes:st}=nt;return composeClasses({root:["root",!tt&&rt&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,st)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,!rt.open&&rt.exited&&tt.hidden]}})(memoTheme(({theme:nt})=>({position:"fixed",zIndex:(nt.vars||nt).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:tt})=>!tt.open&&tt.exited,style:{visibility:"hidden"}}]}))),ModalBackdrop=styled(Backdrop,{name:"MuiModal",slot:"Backdrop",overridesResolver:(nt,tt)=>tt.backdrop})({zIndex:-1}),Modal=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({name:"MuiModal",props:tt}),{BackdropComponent:at=ModalBackdrop,BackdropProps:lt,classes:dt,className:yt,closeAfterTransition:vt=!1,children:_t,container:bt,component:Mt,components:Ct={},componentsProps:Tt={},disableAutoFocus:$t=!1,disableEnforceFocus:Rt=!1,disableEscapeKeyDown:Et=!1,disablePortal:wt=!1,disableRestoreFocus:Pt=!1,disableScrollLock:Ft=!1,hideBackdrop:Nt=!1,keepMounted:Ot=!1,onBackdropClick:Bt,onClose:Xt,onTransitionEnter:Zt,onTransitionExited:rn,open:Gt,slotProps:nn={},slots:cn={},theme:an,...mn}=st,En={...st,closeAfterTransition:vt,disableAutoFocus:$t,disableEnforceFocus:Rt,disableEscapeKeyDown:Et,disablePortal:wt,disableRestoreFocus:Pt,disableScrollLock:Ft,hideBackdrop:Nt,keepMounted:Ot},{getRootProps:Cn,getBackdropProps:Mn,getTransitionProps:un,portalRef:Tn,isTopModal:Pn,exited:dn,hasTransition:Un}=useModal({...En,rootRef:rt}),qn={...En,exited:dn},In=useUtilityClasses$y(qn),Wn={};if(_t.props.tabIndex===void 0&&(Wn.tabIndex="-1"),Un){const{onEnter:Mr,onExited:Jn}=un();Wn.onEnter=Mr,Wn.onExited=Jn}const ar={...mn,slots:{root:Ct.Root,backdrop:Ct.Backdrop,...cn},slotProps:{...Tt,...nn}},[fr,mr]=useSlot("root",{elementType:ModalRoot,externalForwardedProps:ar,getSlotProps:Cn,additionalProps:{ref:rt,as:Mt},ownerState:qn,className:clsx(yt,In==null?void 0:In.root,!qn.open&&qn.exited&&(In==null?void 0:In.hidden))}),[vr,Ar]=useSlot("backdrop",{elementType:at,externalForwardedProps:ar,additionalProps:lt,getSlotProps:Mr=>Mn({...Mr,onClick:Jn=>{Bt&&Bt(Jn),Mr!=null&&Mr.onClick&&Mr.onClick(Jn)}}),className:clsx(lt==null?void 0:lt.className,In==null?void 0:In.backdrop),ownerState:qn}),$r=useForkRef(lt==null?void 0:lt.ref,Ar.ref);return!Ot&&!Gt&&(!Un||dn)?null:jsxRuntimeExports.jsx(Portal,{ref:Tn,container:bt,disablePortal:wt,children:jsxRuntimeExports.jsxs(fr,{...mr,children:[!Nt&&at?jsxRuntimeExports.jsx(vr,{...Ar,ref:$r}):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:Rt,disableAutoFocus:$t,disableRestoreFocus:Pt,isEnabled:Pn,open:Gt,children:reactExports.cloneElement(_t,Wn)})]})})});function getDividerUtilityClass(nt){return generateUtilityClass("MuiDivider",nt)}const dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),useUtilityClasses$x=nt=>{const{absolute:tt,children:rt,classes:st,flexItem:at,light:lt,orientation:dt,textAlign:yt,variant:vt}=nt;return composeClasses({root:["root",tt&&"absolute",vt,lt&&"light",dt==="vertical"&&"vertical",at&&"flexItem",rt&&"withChildren",rt&&dt==="vertical"&&"withChildrenVertical",yt==="right"&&dt!=="vertical"&&"textAlignRight",yt==="left"&&dt!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",dt==="vertical"&&"wrapperVertical"]},getDividerUtilityClass,st)},DividerRoot=styled("div",{name:"MuiDivider",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.absolute&&tt.absolute,tt[rt.variant],rt.light&&tt.light,rt.orientation==="vertical"&&tt.vertical,rt.flexItem&&tt.flexItem,rt.children&&tt.withChildren,rt.children&&rt.orientation==="vertical"&&tt.withChildrenVertical,rt.textAlign==="right"&&rt.orientation!=="vertical"&&tt.textAlignRight,rt.textAlign==="left"&&rt.orientation!=="vertical"&&tt.textAlignLeft]}})(memoTheme(({theme:nt})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(nt.vars||nt).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:nt.vars?`rgba(${nt.vars.palette.dividerChannel} / 0.08)`:alpha(nt.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:nt.spacing(2),marginRight:nt.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:nt.spacing(1),marginBottom:nt.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:tt})=>!!tt.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:tt})=>tt.children&&tt.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(nt.vars||nt).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:tt})=>tt.orientation==="vertical"&&tt.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(nt.vars||nt).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:tt})=>tt.textAlign==="right"&&tt.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:tt})=>tt.textAlign==="left"&&tt.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),DividerWrapper=styled("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.wrapper,rt.orientation==="vertical"&&tt.wrapperVertical]}})(memoTheme(({theme:nt})=>({display:"inline-block",paddingLeft:`calc(${nt.spacing(1)} * 1.2)`,paddingRight:`calc(${nt.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${nt.spacing(1)} * 1.2)`,paddingBottom:`calc(${nt.spacing(1)} * 1.2)`}}]}))),Divider=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiDivider"}),{absolute:at=!1,children:lt,className:dt,orientation:yt="horizontal",component:vt=lt||yt==="vertical"?"div":"hr",flexItem:_t=!1,light:bt=!1,role:Mt=vt!=="hr"?"separator":void 0,textAlign:Ct="center",variant:Tt="fullWidth",...$t}=st,Rt={...st,absolute:at,component:vt,flexItem:_t,light:bt,orientation:yt,role:Mt,textAlign:Ct,variant:Tt},Et=useUtilityClasses$x(Rt);return jsxRuntimeExports.jsx(DividerRoot,{as:vt,className:clsx(Et.root,dt),role:Mt,ref:rt,ownerState:Rt,"aria-orientation":Mt==="separator"&&(vt!=="hr"||yt==="vertical")?yt:void 0,...$t,children:lt?jsxRuntimeExports.jsx(DividerWrapper,{className:Et.wrapper,ownerState:Rt,children:lt}):null})});Divider&&(Divider.muiSkipListHighlight=!0);const useUtilityClasses$w=nt=>{const{classes:tt,disableUnderline:rt,startAdornment:st,endAdornment:at,size:lt,hiddenLabel:dt,multiline:yt}=nt,vt={root:["root",!rt&&"underline",st&&"adornedStart",at&&"adornedEnd",lt==="small"&&`size${capitalize(lt)}`,dt&&"hiddenLabel",yt&&"multiline"],input:["input"]},_t=composeClasses(vt,getFilledInputUtilityClass,tt);return{...tt,..._t}},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[...rootOverridesResolver(nt,tt),!rt.disableUnderline&&tt.underline]}})(memoTheme(({theme:nt})=>{const tt=nt.palette.mode==="light",rt=tt?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",st=tt?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",at=tt?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",lt=tt?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:nt.vars?nt.vars.palette.FilledInput.bg:st,borderTopLeftRadius:(nt.vars||nt).shape.borderRadius,borderTopRightRadius:(nt.vars||nt).shape.borderRadius,transition:nt.transitions.create("background-color",{duration:nt.transitions.duration.shorter,easing:nt.transitions.easing.easeOut}),"&:hover":{backgroundColor:nt.vars?nt.vars.palette.FilledInput.hoverBg:at,"@media (hover: none)":{backgroundColor:nt.vars?nt.vars.palette.FilledInput.bg:st}},[`&.${filledInputClasses.focused}`]:{backgroundColor:nt.vars?nt.vars.palette.FilledInput.bg:st},[`&.${filledInputClasses.disabled}`]:{backgroundColor:nt.vars?nt.vars.palette.FilledInput.disabledBg:lt},variants:[{props:({ownerState:dt})=>!dt.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:nt.transitions.create("transform",{duration:nt.transitions.duration.shorter,easing:nt.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(nt.vars||nt).palette.error.main}},"&::before":{borderBottom:`1px solid ${nt.vars?`rgba(${nt.vars.palette.common.onBackgroundChannel} / ${nt.vars.opacity.inputUnderline})`:rt}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:nt.transitions.create("border-bottom-color",{duration:nt.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses.disabled}, .${filledInputClasses.error}):before`]:{borderBottom:`1px solid ${(nt.vars||nt).palette.text.primary}`},[`&.${filledInputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([dt])=>{var yt;return{props:{disableUnderline:!1,color:dt},style:{"&::after":{borderBottom:`2px solid ${(yt=(nt.vars||nt).palette[dt])==null?void 0:yt.main}`}}}}),{props:({ownerState:dt})=>dt.startAdornment,style:{paddingLeft:12}},{props:({ownerState:dt})=>dt.endAdornment,style:{paddingRight:12}},{props:({ownerState:dt})=>dt.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:dt,size:yt})=>dt.multiline&&yt==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:dt})=>dt.multiline&&dt.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:dt})=>dt.multiline&&dt.hiddenLabel&&dt.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),FilledInputInput=styled(InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:nt})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!nt.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:nt.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:nt.palette.mode==="light"?null:"#fff",caretColor:nt.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...nt.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[nt.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:tt})=>tt.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:tt})=>tt.startAdornment,style:{paddingLeft:0}},{props:({ownerState:tt})=>tt.endAdornment,style:{paddingRight:0}},{props:({ownerState:tt})=>tt.hiddenLabel&&tt.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:tt})=>tt.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),FilledInput=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiFilledInput"}),{disableUnderline:at=!1,components:lt={},componentsProps:dt,fullWidth:yt=!1,hiddenLabel:vt,inputComponent:_t="input",multiline:bt=!1,slotProps:Mt,slots:Ct={},type:Tt="text",...$t}=st,Rt={...st,disableUnderline:at,fullWidth:yt,inputComponent:_t,multiline:bt,type:Tt},Et=useUtilityClasses$w(st),wt={root:{ownerState:Rt},input:{ownerState:Rt}},Pt=Mt??dt?deepmerge(wt,Mt??dt):wt,Ft=Ct.root??lt.Root??FilledInputRoot,Nt=Ct.input??lt.Input??FilledInputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:Ft,input:Nt},slotProps:Pt,fullWidth:yt,inputComponent:_t,multiline:bt,ref:rt,type:Tt,...$t,classes:Et})});FilledInput.muiName="Input";function getFormControlUtilityClasses(nt){return generateUtilityClass("MuiFormControl",nt)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const useUtilityClasses$v=nt=>{const{classes:tt,margin:rt,fullWidth:st}=nt,at={root:["root",rt!=="none"&&`margin${capitalize(rt)}`,st&&"fullWidth"]};return composeClasses(at,getFormControlUtilityClasses,tt)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[`margin${capitalize(rt.margin)}`],rt.fullWidth&&tt.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),FormControl=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiFormControl"}),{children:at,className:lt,color:dt="primary",component:yt="div",disabled:vt=!1,error:_t=!1,focused:bt,fullWidth:Mt=!1,hiddenLabel:Ct=!1,margin:Tt="none",required:$t=!1,size:Rt="medium",variant:Et="outlined",...wt}=st,Pt={...st,color:dt,component:yt,disabled:vt,error:_t,fullWidth:Mt,hiddenLabel:Ct,margin:Tt,required:$t,size:Rt,variant:Et},Ft=useUtilityClasses$v(Pt),[Nt,Ot]=reactExports.useState(()=>{let an=!1;return at&&reactExports.Children.forEach(at,mn=>{if(!isMuiElement(mn,["Input","Select"]))return;const En=isMuiElement(mn,["Select"])?mn.props.input:mn;En&&isAdornedStart(En.props)&&(an=!0)}),an}),[Bt,Xt]=reactExports.useState(()=>{let an=!1;return at&&reactExports.Children.forEach(at,mn=>{isMuiElement(mn,["Input","Select"])&&(isFilled(mn.props,!0)||isFilled(mn.props.inputProps,!0))&&(an=!0)}),an}),[Zt,rn]=reactExports.useState(!1);vt&&Zt&&rn(!1);const Gt=bt!==void 0&&!vt?bt:Zt;let nn;reactExports.useRef(!1);const cn=reactExports.useMemo(()=>({adornedStart:Nt,setAdornedStart:Ot,color:dt,disabled:vt,error:_t,filled:Bt,focused:Gt,fullWidth:Mt,hiddenLabel:Ct,size:Rt,onBlur:()=>{rn(!1)},onEmpty:()=>{Xt(!1)},onFilled:()=>{Xt(!0)},onFocus:()=>{rn(!0)},registerEffect:nn,required:$t,variant:Et}),[Nt,dt,vt,_t,Bt,Gt,Mt,Ct,nn,$t,Rt,Et]);return jsxRuntimeExports.jsx(FormControlContext.Provider,{value:cn,children:jsxRuntimeExports.jsx(FormControlRoot,{as:yt,ownerState:Pt,className:clsx(Ft.root,lt),ref:rt,...wt,children:at})})});function getFormControlLabelUtilityClasses(nt){return generateUtilityClass("MuiFormControlLabel",nt)}const formControlLabelClasses=generateUtilityClasses("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),useUtilityClasses$u=nt=>{const{classes:tt,disabled:rt,labelPlacement:st,error:at,required:lt}=nt,dt={root:["root",rt&&"disabled",`labelPlacement${capitalize(st)}`,at&&"error",lt&&"required"],label:["label",rt&&"disabled"],asterisk:["asterisk",at&&"error"]};return composeClasses(dt,getFormControlLabelUtilityClasses,tt)},FormControlLabelRoot=styled("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[{[`& .${formControlLabelClasses.label}`]:tt.label},tt.root,tt[`labelPlacement${capitalize(rt.labelPlacement)}`]]}})(memoTheme(({theme:nt})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${formControlLabelClasses.disabled}`]:{cursor:"default"},[`& .${formControlLabelClasses.label}`]:{[`&.${formControlLabelClasses.disabled}`]:{color:(nt.vars||nt).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:tt})=>tt==="start"||tt==="top"||tt==="bottom",style:{marginLeft:16}}]}))),AsteriskComponent$1=styled("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(nt,tt)=>tt.asterisk})(memoTheme(({theme:nt})=>({[`&.${formControlLabelClasses.error}`]:{color:(nt.vars||nt).palette.error.main}}))),FormControlLabel=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiFormControlLabel"}),{checked:at,className:lt,componentsProps:dt={},control:yt,disabled:vt,disableTypography:_t,inputRef:bt,label:Mt,labelPlacement:Ct="end",name:Tt,onChange:$t,required:Rt,slots:Et={},slotProps:wt={},value:Pt,...Ft}=st,Nt=useFormControl(),Ot=vt??yt.props.disabled??(Nt==null?void 0:Nt.disabled),Bt=Rt??yt.props.required,Xt={disabled:Ot,required:Bt};["checked","name","onChange","value","inputRef"].forEach(En=>{typeof yt.props[En]>"u"&&typeof st[En]<"u"&&(Xt[En]=st[En])});const Zt=formControlState({props:st,muiFormControl:Nt,states:["error"]}),rn={...st,disabled:Ot,labelPlacement:Ct,required:Bt,error:Zt.error},Gt=useUtilityClasses$u(rn),nn={slots:Et,slotProps:{...dt,...wt}},[cn,an]=useSlot("typography",{elementType:Typography,externalForwardedProps:nn,ownerState:rn});let mn=Mt;return mn!=null&&mn.type!==Typography&&!_t&&(mn=jsxRuntimeExports.jsx(cn,{component:"span",...an,className:clsx(Gt.label,an==null?void 0:an.className),children:mn})),jsxRuntimeExports.jsxs(FormControlLabelRoot,{className:clsx(Gt.root,lt),ownerState:rn,ref:rt,...Ft,children:[reactExports.cloneElement(yt,Xt),Bt?jsxRuntimeExports.jsxs("div",{children:[mn,jsxRuntimeExports.jsxs(AsteriskComponent$1,{ownerState:rn,"aria-hidden":!0,className:Gt.asterisk,children:["","*"]})]}):mn]})});function getFormGroupUtilityClass(nt){return generateUtilityClass("MuiFormGroup",nt)}generateUtilityClasses("MuiFormGroup",["root","row","error"]);const useUtilityClasses$t=nt=>{const{classes:tt,row:rt,error:st}=nt;return composeClasses({root:["root",rt&&"row",st&&"error"]},getFormGroupUtilityClass,tt)},FormGroupRoot=styled("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.row&&tt.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),FormGroup=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiFormGroup"}),{className:at,row:lt=!1,...dt}=st,yt=useFormControl(),vt=formControlState({props:st,muiFormControl:yt,states:["error"]}),_t={...st,row:lt,error:vt.error},bt=useUtilityClasses$t(_t);return jsxRuntimeExports.jsx(FormGroupRoot,{className:clsx(bt.root,at),ownerState:_t,ref:rt,...dt})});function getFormHelperTextUtilityClasses(nt){return generateUtilityClass("MuiFormHelperText",nt)}const formHelperTextClasses=generateUtilityClasses("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var _span$2;const useUtilityClasses$s=nt=>{const{classes:tt,contained:rt,size:st,disabled:at,error:lt,filled:dt,focused:yt,required:vt}=nt,_t={root:["root",at&&"disabled",lt&&"error",st&&`size${capitalize(st)}`,rt&&"contained",yt&&"focused",dt&&"filled",vt&&"required"]};return composeClasses(_t,getFormHelperTextUtilityClasses,tt)},FormHelperTextRoot=styled("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.size&&tt[`size${capitalize(rt.size)}`],rt.contained&&tt.contained,rt.filled&&tt.filled]}})(memoTheme(({theme:nt})=>({color:(nt.vars||nt).palette.text.secondary,...nt.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${formHelperTextClasses.disabled}`]:{color:(nt.vars||nt).palette.text.disabled},[`&.${formHelperTextClasses.error}`]:{color:(nt.vars||nt).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:tt})=>tt.contained,style:{marginLeft:14,marginRight:14}}]}))),FormHelperText=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiFormHelperText"}),{children:at,className:lt,component:dt="p",disabled:yt,error:vt,filled:_t,focused:bt,margin:Mt,required:Ct,variant:Tt,...$t}=st,Rt=useFormControl(),Et=formControlState({props:st,muiFormControl:Rt,states:["variant","size","disabled","error","filled","focused","required"]}),wt={...st,component:dt,contained:Et.variant==="filled"||Et.variant==="outlined",variant:Et.variant,size:Et.size,disabled:Et.disabled,error:Et.error,filled:Et.filled,focused:Et.focused,required:Et.required};delete wt.ownerState;const Pt=useUtilityClasses$s(wt);return jsxRuntimeExports.jsx(FormHelperTextRoot,{as:dt,className:clsx(Pt.root,lt),ref:rt,...$t,ownerState:wt,children:at===" "?_span$2||(_span$2=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):at})});function getFormLabelUtilityClasses(nt){return generateUtilityClass("MuiFormLabel",nt)}const formLabelClasses=generateUtilityClasses("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),useUtilityClasses$r=nt=>{const{classes:tt,color:rt,focused:st,disabled:at,error:lt,filled:dt,required:yt}=nt,vt={root:["root",`color${capitalize(rt)}`,at&&"disabled",lt&&"error",dt&&"filled",st&&"focused",yt&&"required"],asterisk:["asterisk",lt&&"error"]};return composeClasses(vt,getFormLabelUtilityClasses,tt)},FormLabelRoot=styled("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.color==="secondary"&&tt.colorSecondary,rt.filled&&tt.filled]}})(memoTheme(({theme:nt})=>({color:(nt.vars||nt).palette.text.secondary,...nt.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt},style:{[`&.${formLabelClasses.focused}`]:{color:(nt.vars||nt).palette[tt].main}}})),{props:{},style:{[`&.${formLabelClasses.disabled}`]:{color:(nt.vars||nt).palette.text.disabled},[`&.${formLabelClasses.error}`]:{color:(nt.vars||nt).palette.error.main}}}]}))),AsteriskComponent=styled("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(nt,tt)=>tt.asterisk})(memoTheme(({theme:nt})=>({[`&.${formLabelClasses.error}`]:{color:(nt.vars||nt).palette.error.main}}))),FormLabel=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiFormLabel"}),{children:at,className:lt,color:dt,component:yt="label",disabled:vt,error:_t,filled:bt,focused:Mt,required:Ct,...Tt}=st,$t=useFormControl(),Rt=formControlState({props:st,muiFormControl:$t,states:["color","required","focused","disabled","error","filled"]}),Et={...st,color:Rt.color||"primary",component:yt,disabled:Rt.disabled,error:Rt.error,filled:Rt.filled,focused:Rt.focused,required:Rt.required},wt=useUtilityClasses$r(Et);return jsxRuntimeExports.jsxs(FormLabelRoot,{as:yt,ownerState:Et,className:clsx(wt.root,lt),ref:rt,...Tt,children:[at,Rt.required&&jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:Et,"aria-hidden":!0,className:wt.asterisk,children:["","*"]})]})}),GridContext=reactExports.createContext();function getGridUtilityClass(nt){return generateUtilityClass("MuiGrid",nt)}const SPACINGS=[0,1,2,3,4,5,6,7,8,9,10],DIRECTIONS=["column-reverse","column","row-reverse","row"],WRAPS=["nowrap","wrap-reverse","wrap"],GRID_SIZES=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],gridClasses=generateUtilityClasses("MuiGrid",["root","container","item","zeroMinWidth",...SPACINGS.map(nt=>`spacing-xs-${nt}`),...DIRECTIONS.map(nt=>`direction-xs-${nt}`),...WRAPS.map(nt=>`wrap-xs-${nt}`),...GRID_SIZES.map(nt=>`grid-xs-${nt}`),...GRID_SIZES.map(nt=>`grid-sm-${nt}`),...GRID_SIZES.map(nt=>`grid-md-${nt}`),...GRID_SIZES.map(nt=>`grid-lg-${nt}`),...GRID_SIZES.map(nt=>`grid-xl-${nt}`)]);function generateGrid({theme:nt,ownerState:tt}){let rt;return nt.breakpoints.keys.reduce((st,at)=>{let lt={};if(tt[at]&&(rt=tt[at]),!rt)return st;if(rt===!0)lt={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(rt==="auto")lt={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const dt=resolveBreakpointValues({values:tt.columns,breakpoints:nt.breakpoints.values}),yt=typeof dt=="object"?dt[at]:dt;if(yt==null)return st;const vt=`${Math.round(rt/yt*1e8)/1e6}%`;let _t={};if(tt.container&&tt.item&&tt.columnSpacing!==0){const bt=nt.spacing(tt.columnSpacing);if(bt!=="0px"){const Mt=`calc(${vt} + ${bt})`;_t={flexBasis:Mt,maxWidth:Mt}}}lt={flexBasis:vt,flexGrow:0,maxWidth:vt,..._t}}return nt.breakpoints.values[at]===0?Object.assign(st,lt):st[nt.breakpoints.up(at)]=lt,st},{})}function generateDirection({theme:nt,ownerState:tt}){const rt=resolveBreakpointValues({values:tt.direction,breakpoints:nt.breakpoints.values});return handleBreakpoints({theme:nt},rt,st=>{const at={flexDirection:st};return st.startsWith("column")&&(at[`& > .${gridClasses.item}`]={maxWidth:"none"}),at})}function extractZeroValueBreakpointKeys({breakpoints:nt,values:tt}){let rt="";Object.keys(tt).forEach(at=>{rt===""&&tt[at]!==0&&(rt=at)});const st=Object.keys(nt).sort((at,lt)=>nt[at]-nt[lt]);return st.slice(0,st.indexOf(rt))}function generateRowGap({theme:nt,ownerState:tt}){const{container:rt,rowSpacing:st}=tt;let at={};if(rt&&st!==0){const lt=resolveBreakpointValues({values:st,breakpoints:nt.breakpoints.values});let dt;typeof lt=="object"&&(dt=extractZeroValueBreakpointKeys({breakpoints:nt.breakpoints.values,values:lt})),at=handleBreakpoints({theme:nt},lt,(yt,vt)=>{const _t=nt.spacing(yt);return _t!=="0px"?{marginTop:`calc(-1 * ${_t})`,[`& > .${gridClasses.item}`]:{paddingTop:_t}}:dt!=null&&dt.includes(vt)?{}:{marginTop:0,[`& > .${gridClasses.item}`]:{paddingTop:0}}})}return at}function generateColumnGap({theme:nt,ownerState:tt}){const{container:rt,columnSpacing:st}=tt;let at={};if(rt&&st!==0){const lt=resolveBreakpointValues({values:st,breakpoints:nt.breakpoints.values});let dt;typeof lt=="object"&&(dt=extractZeroValueBreakpointKeys({breakpoints:nt.breakpoints.values,values:lt})),at=handleBreakpoints({theme:nt},lt,(yt,vt)=>{const _t=nt.spacing(yt);if(_t!=="0px"){const bt=`calc(-1 * ${_t})`;return{width:`calc(100% + ${_t})`,marginLeft:bt,[`& > .${gridClasses.item}`]:{paddingLeft:_t}}}return dt!=null&&dt.includes(vt)?{}:{width:"100%",marginLeft:0,[`& > .${gridClasses.item}`]:{paddingLeft:0}}})}return at}function resolveSpacingStyles(nt,tt,rt={}){if(!nt||nt<=0)return[];if(typeof nt=="string"&&!Number.isNaN(Number(nt))||typeof nt=="number")return[rt[`spacing-xs-${String(nt)}`]];const st=[];return tt.forEach(at=>{const lt=nt[at];Number(lt)>0&&st.push(rt[`spacing-${at}-${String(lt)}`])}),st}const GridRoot=styled("div",{name:"MuiGrid",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt,{container:st,direction:at,item:lt,spacing:dt,wrap:yt,zeroMinWidth:vt,breakpoints:_t}=rt;let bt=[];st&&(bt=resolveSpacingStyles(dt,_t,tt));const Mt=[];return _t.forEach(Ct=>{const Tt=rt[Ct];Tt&&Mt.push(tt[`grid-${Ct}-${String(Tt)}`])}),[tt.root,st&&tt.container,lt&&tt.item,vt&&tt.zeroMinWidth,...bt,at!=="row"&&tt[`direction-xs-${String(at)}`],yt!=="wrap"&&tt[`wrap-xs-${String(yt)}`],...Mt]}})(({ownerState:nt})=>({boxSizing:"border-box",...nt.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...nt.item&&{margin:0},...nt.zeroMinWidth&&{minWidth:0},...nt.wrap!=="wrap"&&{flexWrap:nt.wrap}}),generateDirection,generateRowGap,generateColumnGap,generateGrid);function resolveSpacingClasses(nt,tt){if(!nt||nt<=0)return[];if(typeof nt=="string"&&!Number.isNaN(Number(nt))||typeof nt=="number")return[`spacing-xs-${String(nt)}`];const rt=[];return tt.forEach(st=>{const at=nt[st];if(Number(at)>0){const lt=`spacing-${st}-${String(at)}`;rt.push(lt)}}),rt}const useUtilityClasses$q=nt=>{const{classes:tt,container:rt,direction:st,item:at,spacing:lt,wrap:dt,zeroMinWidth:yt,breakpoints:vt}=nt;let _t=[];rt&&(_t=resolveSpacingClasses(lt,vt));const bt=[];vt.forEach(Ct=>{const Tt=nt[Ct];Tt&&bt.push(`grid-${Ct}-${String(Tt)}`)});const Mt={root:["root",rt&&"container",at&&"item",yt&&"zeroMinWidth",..._t,st!=="row"&&`direction-xs-${String(st)}`,dt!=="wrap"&&`wrap-xs-${String(dt)}`,...bt]};return composeClasses(Mt,getGridUtilityClass,tt)},Grid=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiGrid"}),{breakpoints:at}=useTheme(),lt=extendSxProp$1(st),{className:dt,columns:yt,columnSpacing:vt,component:_t="div",container:bt=!1,direction:Mt="row",item:Ct=!1,rowSpacing:Tt,spacing:$t=0,wrap:Rt="wrap",zeroMinWidth:Et=!1,...wt}=lt,Pt=Tt||$t,Ft=vt||$t,Nt=reactExports.useContext(GridContext),Ot=bt?yt||12:Nt,Bt={},Xt={...wt};at.keys.forEach(Gt=>{wt[Gt]!=null&&(Bt[Gt]=wt[Gt],delete Xt[Gt])});const Zt={...lt,columns:Ot,container:bt,direction:Mt,item:Ct,rowSpacing:Pt,columnSpacing:Ft,wrap:Rt,zeroMinWidth:Et,spacing:$t,...Bt,breakpoints:at.keys},rn=useUtilityClasses$q(Zt);return jsxRuntimeExports.jsx(GridContext.Provider,{value:Ot,children:jsxRuntimeExports.jsx(GridRoot,{ownerState:Zt,className:clsx(rn.root,dt),as:_t,ref:rt,...Xt})})}),Grid2=createGrid({createStyledComponent:styled("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.container&&tt.container]}}),componentName:"MuiGrid2",useThemeProps:nt=>useDefaultProps({props:nt,name:"MuiGrid2"}),useTheme});function getScale(nt){return`scale(${nt}, ${nt**2})`}const styles$1={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(tt,rt){const{addEndListener:st,appear:at=!0,children:lt,easing:dt,in:yt,onEnter:vt,onEntered:_t,onEntering:bt,onExit:Mt,onExited:Ct,onExiting:Tt,style:$t,timeout:Rt="auto",TransitionComponent:Et=Transition,...wt}=tt,Pt=useTimeout(),Ft=reactExports.useRef(),Nt=useTheme(),Ot=reactExports.useRef(null),Bt=useForkRef(Ot,getReactElementRef(lt),rt),Xt=En=>Cn=>{if(En){const Mn=Ot.current;Cn===void 0?En(Mn):En(Mn,Cn)}},Zt=Xt(bt),rn=Xt((En,Cn)=>{reflow(En);const{duration:Mn,delay:un,easing:Tn}=getTransitionProps({style:$t,timeout:Rt,easing:dt},{mode:"enter"});let Pn;Rt==="auto"?(Pn=Nt.transitions.getAutoHeightDuration(En.clientHeight),Ft.current=Pn):Pn=Mn,En.style.transition=[Nt.transitions.create("opacity",{duration:Pn,delay:un}),Nt.transitions.create("transform",{duration:isWebKit154?Pn:Pn*.666,delay:un,easing:Tn})].join(","),vt&&vt(En,Cn)}),Gt=Xt(_t),nn=Xt(Tt),cn=Xt(En=>{const{duration:Cn,delay:Mn,easing:un}=getTransitionProps({style:$t,timeout:Rt,easing:dt},{mode:"exit"});let Tn;Rt==="auto"?(Tn=Nt.transitions.getAutoHeightDuration(En.clientHeight),Ft.current=Tn):Tn=Cn,En.style.transition=[Nt.transitions.create("opacity",{duration:Tn,delay:Mn}),Nt.transitions.create("transform",{duration:isWebKit154?Tn:Tn*.666,delay:isWebKit154?Mn:Mn||Tn*.333,easing:un})].join(","),En.style.opacity=0,En.style.transform=getScale(.75),Mt&&Mt(En)}),an=Xt(Ct),mn=En=>{Rt==="auto"&&Pt.start(Ft.current||0,En),st&&st(Ot.current,En)};return jsxRuntimeExports.jsx(Et,{appear:at,in:yt,nodeRef:Ot,onEnter:rn,onEntered:Gt,onEntering:Zt,onExit:cn,onExited:an,onExiting:nn,addEndListener:mn,timeout:Rt==="auto"?null:Rt,...wt,children:(En,{ownerState:Cn,...Mn})=>reactExports.cloneElement(lt,{style:{opacity:0,transform:getScale(.75),visibility:En==="exited"&&!yt?"hidden":void 0,...styles$1[En],...$t,...lt.props.style},ref:Bt,...Mn})})});Grow&&(Grow.muiSupportAuto=!0);const useMediaQuery=unstable_createUseMediaQuery({themeId:THEME_ID}),useUtilityClasses$p=nt=>{const{classes:tt,disableUnderline:rt}=nt,at=composeClasses({root:["root",!rt&&"underline"],input:["input"]},getInputUtilityClass,tt);return{...tt,...at}},InputRoot=styled(InputBaseRoot,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiInput",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[...rootOverridesResolver(nt,tt),!rt.disableUnderline&&tt.underline]}})(memoTheme(({theme:nt})=>{let rt=nt.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return nt.vars&&(rt=`rgba(${nt.vars.palette.common.onBackgroundChannel} / ${nt.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:st})=>st.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:st})=>!st.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:nt.transitions.create("transform",{duration:nt.transitions.duration.shorter,easing:nt.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(nt.vars||nt).palette.error.main}},"&::before":{borderBottom:`1px solid ${rt}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:nt.transitions.create("border-bottom-color",{duration:nt.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses.disabled}, .${inputClasses.error}):before`]:{borderBottom:`2px solid ${(nt.vars||nt).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${rt}`}},[`&.${inputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([st])=>({props:{color:st,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(nt.vars||nt).palette[st].main}`}}}))]}})),InputInput=styled(InputBaseInput,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiInput"}),{disableUnderline:at=!1,components:lt={},componentsProps:dt,fullWidth:yt=!1,inputComponent:vt="input",multiline:_t=!1,slotProps:bt,slots:Mt={},type:Ct="text",...Tt}=st,$t=useUtilityClasses$p(st),Et={root:{ownerState:{disableUnderline:at}}},wt=bt??dt?deepmerge(bt??dt,Et):Et,Pt=Mt.root??lt.Root??InputRoot,Ft=Mt.input??lt.Input??InputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:Pt,input:Ft},slotProps:wt,fullWidth:yt,inputComponent:vt,multiline:_t,ref:rt,type:Ct,...Tt,classes:$t})});Input.muiName="Input";function getInputLabelUtilityClasses(nt){return generateUtilityClass("MuiInputLabel",nt)}generateUtilityClasses("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const useUtilityClasses$o=nt=>{const{classes:tt,formControl:rt,size:st,shrink:at,disableAnimation:lt,variant:dt,required:yt}=nt,vt={root:["root",rt&&"formControl",!lt&&"animated",at&&"shrink",st&&st!=="normal"&&`size${capitalize(st)}`,dt],asterisk:[yt&&"asterisk"]},_t=composeClasses(vt,getInputLabelUtilityClasses,tt);return{...tt,..._t}},InputLabelRoot=styled(FormLabel,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[{[`& .${formLabelClasses.asterisk}`]:tt.asterisk},tt.root,rt.formControl&&tt.formControl,rt.size==="small"&&tt.sizeSmall,rt.shrink&&tt.shrink,!rt.disableAnimation&&tt.animated,rt.focused&&tt.focused,tt[rt.variant]]}})(memoTheme(({theme:nt})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:tt})=>tt.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:tt})=>tt.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:tt})=>!tt.disableAnimation,style:{transition:nt.transitions.create(["color","transform","max-width"],{duration:nt.transitions.duration.shorter,easing:nt.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:tt,ownerState:rt})=>tt==="filled"&&rt.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:tt,ownerState:rt,size:st})=>tt==="filled"&&rt.shrink&&st==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:tt,ownerState:rt})=>tt==="outlined"&&rt.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),InputLabel=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({name:"MuiInputLabel",props:tt}),{disableAnimation:at=!1,margin:lt,shrink:dt,variant:yt,className:vt,..._t}=st,bt=useFormControl();let Mt=dt;typeof Mt>"u"&&bt&&(Mt=bt.filled||bt.focused||bt.adornedStart);const Ct=formControlState({props:st,muiFormControl:bt,states:["size","variant","required","focused"]}),Tt={...st,disableAnimation:at,formControl:bt,shrink:Mt,size:Ct.size,variant:Ct.variant,required:Ct.required,focused:Ct.focused},$t=useUtilityClasses$o(Tt);return jsxRuntimeExports.jsx(InputLabelRoot,{"data-shrink":Mt,ref:rt,className:clsx($t.root,vt),..._t,ownerState:Tt,classes:$t})}),ListContext=reactExports.createContext({});function getListUtilityClass(nt){return generateUtilityClass("MuiList",nt)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const useUtilityClasses$n=nt=>{const{classes:tt,disablePadding:rt,dense:st,subheader:at}=nt;return composeClasses({root:["root",!rt&&"padding",st&&"dense",at&&"subheader"]},getListUtilityClass,tt)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,!rt.disablePadding&&tt.padding,rt.dense&&tt.dense,rt.subheader&&tt.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:nt})=>!nt.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:nt})=>nt.subheader,style:{paddingTop:0}}]}),List=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiList"}),{children:at,className:lt,component:dt="ul",dense:yt=!1,disablePadding:vt=!1,subheader:_t,...bt}=st,Mt=reactExports.useMemo(()=>({dense:yt}),[yt]),Ct={...st,component:dt,dense:yt,disablePadding:vt},Tt=useUtilityClasses$n(Ct);return jsxRuntimeExports.jsx(ListContext.Provider,{value:Mt,children:jsxRuntimeExports.jsxs(ListRoot,{as:dt,className:clsx(Tt.root,lt),ref:rt,ownerState:Ct,...bt,children:[_t,at]})})});function getListItemUtilityClass(nt){return generateUtilityClass("MuiListItem",nt)}generateUtilityClasses("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function getListItemButtonUtilityClass(nt){return generateUtilityClass("MuiListItemButton",nt)}const listItemButtonClasses=generateUtilityClasses("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),overridesResolver$2=(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.dense&&tt.dense,rt.alignItems==="flex-start"&&tt.alignItemsFlexStart,rt.divider&&tt.divider,!rt.disableGutters&&tt.gutters]},useUtilityClasses$m=nt=>{const{alignItems:tt,classes:rt,dense:st,disabled:at,disableGutters:lt,divider:dt,selected:yt}=nt,_t=composeClasses({root:["root",st&&"dense",!lt&&"gutters",dt&&"divider",at&&"disabled",tt==="flex-start"&&"alignItemsFlexStart",yt&&"selected"]},getListItemButtonUtilityClass,rt);return{...rt,..._t}},ListItemButtonRoot=styled(ButtonBase,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:overridesResolver$2})(memoTheme(({theme:nt})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:nt.transitions.create("background-color",{duration:nt.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(nt.vars||nt).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${listItemButtonClasses.selected}`]:{backgroundColor:nt.vars?`rgba(${nt.vars.palette.primary.mainChannel} / ${nt.vars.palette.action.selectedOpacity})`:alpha(nt.palette.primary.main,nt.palette.action.selectedOpacity),[`&.${listItemButtonClasses.focusVisible}`]:{backgroundColor:nt.vars?`rgba(${nt.vars.palette.primary.mainChannel} / calc(${nt.vars.palette.action.selectedOpacity} + ${nt.vars.palette.action.focusOpacity}))`:alpha(nt.palette.primary.main,nt.palette.action.selectedOpacity+nt.palette.action.focusOpacity)}},[`&.${listItemButtonClasses.selected}:hover`]:{backgroundColor:nt.vars?`rgba(${nt.vars.palette.primary.mainChannel} / calc(${nt.vars.palette.action.selectedOpacity} + ${nt.vars.palette.action.hoverOpacity}))`:alpha(nt.palette.primary.main,nt.palette.action.selectedOpacity+nt.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:nt.vars?`rgba(${nt.vars.palette.primary.mainChannel} / ${nt.vars.palette.action.selectedOpacity})`:alpha(nt.palette.primary.main,nt.palette.action.selectedOpacity)}},[`&.${listItemButtonClasses.focusVisible}`]:{backgroundColor:(nt.vars||nt).palette.action.focus},[`&.${listItemButtonClasses.disabled}`]:{opacity:(nt.vars||nt).palette.action.disabledOpacity},variants:[{props:({ownerState:tt})=>tt.divider,style:{borderBottom:`1px solid ${(nt.vars||nt).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:tt})=>!tt.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:tt})=>tt.dense,style:{paddingTop:4,paddingBottom:4}}]}))),ListItemButton=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiListItemButton"}),{alignItems:at="center",autoFocus:lt=!1,component:dt="div",children:yt,dense:vt=!1,disableGutters:_t=!1,divider:bt=!1,focusVisibleClassName:Mt,selected:Ct=!1,className:Tt,...$t}=st,Rt=reactExports.useContext(ListContext),Et=reactExports.useMemo(()=>({dense:vt||Rt.dense||!1,alignItems:at,disableGutters:_t}),[at,Rt.dense,vt,_t]),wt=reactExports.useRef(null);useEnhancedEffect(()=>{lt&&wt.current&&wt.current.focus()},[lt]);const Pt={...st,alignItems:at,dense:Et.dense,disableGutters:_t,divider:bt,selected:Ct},Ft=useUtilityClasses$m(Pt),Nt=useForkRef(wt,rt);return jsxRuntimeExports.jsx(ListContext.Provider,{value:Et,children:jsxRuntimeExports.jsx(ListItemButtonRoot,{ref:Nt,href:$t.href||$t.to,component:($t.href||$t.to)&&dt==="div"?"button":dt,focusVisibleClassName:clsx(Ft.focusVisible,Mt),ownerState:Pt,className:clsx(Ft.root,Tt),...$t,classes:Ft,children:yt})})});function getListItemSecondaryActionClassesUtilityClass(nt){return generateUtilityClass("MuiListItemSecondaryAction",nt)}generateUtilityClasses("MuiListItemSecondaryAction",["root","disableGutters"]);const useUtilityClasses$l=nt=>{const{disableGutters:tt,classes:rt}=nt;return composeClasses({root:["root",tt&&"disableGutters"]},getListItemSecondaryActionClassesUtilityClass,rt)},ListItemSecondaryActionRoot=styled("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.disableGutters&&tt.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:nt})=>nt.disableGutters,style:{right:0}}]}),ListItemSecondaryAction=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiListItemSecondaryAction"}),{className:at,...lt}=st,dt=reactExports.useContext(ListContext),yt={...st,disableGutters:dt.disableGutters},vt=useUtilityClasses$l(yt);return jsxRuntimeExports.jsx(ListItemSecondaryActionRoot,{className:clsx(vt.root,at),ownerState:yt,ref:rt,...lt})});ListItemSecondaryAction.muiName="ListItemSecondaryAction";const overridesResolver$1=(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.dense&&tt.dense,rt.alignItems==="flex-start"&&tt.alignItemsFlexStart,rt.divider&&tt.divider,!rt.disableGutters&&tt.gutters,!rt.disablePadding&&tt.padding,rt.hasSecondaryAction&&tt.secondaryAction]},useUtilityClasses$k=nt=>{const{alignItems:tt,classes:rt,dense:st,disableGutters:at,disablePadding:lt,divider:dt,hasSecondaryAction:yt}=nt;return composeClasses({root:["root",st&&"dense",!at&&"gutters",!lt&&"padding",dt&&"divider",tt==="flex-start"&&"alignItemsFlexStart",yt&&"secondaryAction"],container:["container"]},getListItemUtilityClass,rt)},ListItemRoot=styled("div",{name:"MuiListItem",slot:"Root",overridesResolver:overridesResolver$1})(memoTheme(({theme:nt})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:tt})=>!tt.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:tt})=>!tt.disablePadding&&tt.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:tt})=>!tt.disablePadding&&!tt.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:tt})=>!tt.disablePadding&&!!tt.secondaryAction,style:{paddingRight:48}},{props:({ownerState:tt})=>!!tt.secondaryAction,style:{[`& > .${listItemButtonClasses.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:tt})=>tt.divider,style:{borderBottom:`1px solid ${(nt.vars||nt).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:tt})=>tt.button,style:{transition:nt.transitions.create("background-color",{duration:nt.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(nt.vars||nt).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:tt})=>tt.hasSecondaryAction,style:{paddingRight:48}}]}))),ListItemContainer=styled("li",{name:"MuiListItem",slot:"Container",overridesResolver:(nt,tt)=>tt.container})({position:"relative"}),ListItem=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiListItem"}),{alignItems:at="center",children:lt,className:dt,component:yt,components:vt={},componentsProps:_t={},ContainerComponent:bt="li",ContainerProps:{className:Mt,...Ct}={},dense:Tt=!1,disableGutters:$t=!1,disablePadding:Rt=!1,divider:Et=!1,secondaryAction:wt,slotProps:Pt={},slots:Ft={},...Nt}=st,Ot=reactExports.useContext(ListContext),Bt=reactExports.useMemo(()=>({dense:Tt||Ot.dense||!1,alignItems:at,disableGutters:$t}),[at,Ot.dense,Tt,$t]),Xt=reactExports.useRef(null),Zt=reactExports.Children.toArray(lt),rn=Zt.length&&isMuiElement(Zt[Zt.length-1],["ListItemSecondaryAction"]),Gt={...st,alignItems:at,dense:Bt.dense,disableGutters:$t,disablePadding:Rt,divider:Et,hasSecondaryAction:rn},nn=useUtilityClasses$k(Gt),cn=useForkRef(Xt,rt),an=Ft.root||vt.Root||ListItemRoot,mn=Pt.root||_t.root||{},En={className:clsx(nn.root,mn.className,dt),...Nt};let Cn=yt||"li";return rn?(Cn=!En.component&&!yt?"div":Cn,bt==="li"&&(Cn==="li"?Cn="div":En.component==="li"&&(En.component="div")),jsxRuntimeExports.jsx(ListContext.Provider,{value:Bt,children:jsxRuntimeExports.jsxs(ListItemContainer,{as:bt,className:clsx(nn.container,Mt),ref:cn,ownerState:Gt,...Ct,children:[jsxRuntimeExports.jsx(an,{...mn,...!isHostComponent(an)&&{as:Cn,ownerState:{...Gt,...mn.ownerState}},...En,children:Zt}),Zt.pop()]})})):jsxRuntimeExports.jsx(ListContext.Provider,{value:Bt,children:jsxRuntimeExports.jsxs(an,{...mn,as:Cn,ref:cn,...!isHostComponent(an)&&{ownerState:{...Gt,...mn.ownerState}},...En,children:[Zt,wt&&jsxRuntimeExports.jsx(ListItemSecondaryAction,{children:wt})]})})});function getListItemIconUtilityClass(nt){return generateUtilityClass("MuiListItemIcon",nt)}const listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),useUtilityClasses$j=nt=>{const{alignItems:tt,classes:rt}=nt;return composeClasses({root:["root",tt==="flex-start"&&"alignItemsFlexStart"]},getListItemIconUtilityClass,rt)},ListItemIconRoot=styled("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.alignItems==="flex-start"&&tt.alignItemsFlexStart]}})(memoTheme(({theme:nt})=>({minWidth:56,color:(nt.vars||nt).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),ListItemIcon=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiListItemIcon"}),{className:at,...lt}=st,dt=reactExports.useContext(ListContext),yt={...st,alignItems:dt.alignItems},vt=useUtilityClasses$j(yt);return jsxRuntimeExports.jsx(ListItemIconRoot,{className:clsx(vt.root,at),ownerState:yt,ref:rt,...lt})});function getListItemTextUtilityClass(nt){return generateUtilityClass("MuiListItemText",nt)}const listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),useUtilityClasses$i=nt=>{const{classes:tt,inset:rt,primary:st,secondary:at,dense:lt}=nt;return composeClasses({root:["root",rt&&"inset",lt&&"dense",st&&at&&"multiline"],primary:["primary"],secondary:["secondary"]},getListItemTextUtilityClass,tt)},ListItemTextRoot=styled("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[{[`& .${listItemTextClasses.primary}`]:tt.primary},{[`& .${listItemTextClasses.secondary}`]:tt.secondary},tt.root,rt.inset&&tt.inset,rt.primary&&rt.secondary&&tt.multiline,rt.dense&&tt.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${typographyClasses.root}:where(& .${listItemTextClasses.primary})`]:{display:"block"},[`.${typographyClasses.root}:where(& .${listItemTextClasses.secondary})`]:{display:"block"},variants:[{props:({ownerState:nt})=>nt.primary&&nt.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:nt})=>nt.inset,style:{paddingLeft:56}}]}),ListItemText=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiListItemText"}),{children:at,className:lt,disableTypography:dt=!1,inset:yt=!1,primary:vt,primaryTypographyProps:_t,secondary:bt,secondaryTypographyProps:Mt,slots:Ct={},slotProps:Tt={},...$t}=st,{dense:Rt}=reactExports.useContext(ListContext);let Et=vt??at,wt=bt;const Pt={...st,disableTypography:dt,inset:yt,primary:!!Et,secondary:!!wt,dense:Rt},Ft=useUtilityClasses$i(Pt),Nt={slots:Ct,slotProps:{primary:_t,secondary:Mt,...Tt}},[Ot,Bt]=useSlot("primary",{className:Ft.primary,elementType:Typography,externalForwardedProps:Nt,ownerState:Pt}),[Xt,Zt]=useSlot("secondary",{className:Ft.secondary,elementType:Typography,externalForwardedProps:Nt,ownerState:Pt});return Et!=null&&Et.type!==Typography&&!dt&&(Et=jsxRuntimeExports.jsx(Ot,{variant:Rt?"body2":"body1",component:Bt!=null&&Bt.variant?void 0:"span",...Bt,children:Et})),wt!=null&&wt.type!==Typography&&!dt&&(wt=jsxRuntimeExports.jsx(Xt,{variant:"body2",color:"textSecondary",...Zt,children:wt})),jsxRuntimeExports.jsxs(ListItemTextRoot,{className:clsx(Ft.root,lt),ownerState:Pt,ref:rt,...$t,children:[Et,wt]})});function nextItem$1(nt,tt,rt){return nt===tt?nt.firstChild:tt&&tt.nextElementSibling?tt.nextElementSibling:rt?null:nt.firstChild}function previousItem$1(nt,tt,rt){return nt===tt?rt?nt.firstChild:nt.lastChild:tt&&tt.previousElementSibling?tt.previousElementSibling:rt?null:nt.lastChild}function textCriteriaMatches(nt,tt){if(tt===void 0)return!0;let rt=nt.innerText;return rt===void 0&&(rt=nt.textContent),rt=rt.trim().toLowerCase(),rt.length===0?!1:tt.repeating?rt[0]===tt.keys[0]:rt.startsWith(tt.keys.join(""))}function moveFocus$1(nt,tt,rt,st,at,lt){let dt=!1,yt=at(nt,tt,tt?rt:!1);for(;yt;){if(yt===nt.firstChild){if(dt)return!1;dt=!0}const vt=st?!1:yt.disabled||yt.getAttribute("aria-disabled")==="true";if(!yt.hasAttribute("tabindex")||!textCriteriaMatches(yt,lt)||vt)yt=at(nt,yt,rt);else return yt.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(tt,rt){const{actions:st,autoFocus:at=!1,autoFocusItem:lt=!1,children:dt,className:yt,disabledItemsFocusable:vt=!1,disableListWrap:_t=!1,onKeyDown:bt,variant:Mt="selectedMenu",...Ct}=tt,Tt=reactExports.useRef(null),$t=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{at&&Tt.current.focus()},[at]),reactExports.useImperativeHandle(st,()=>({adjustStyleForScrollbar:(Ft,{direction:Nt})=>{const Ot=!Tt.current.style.width;if(Ft.clientHeight<Tt.current.clientHeight&&Ot){const Bt=`${getScrollbarSize(ownerWindow(Ft))}px`;Tt.current.style[Nt==="rtl"?"paddingLeft":"paddingRight"]=Bt,Tt.current.style.width=`calc(100% + ${Bt})`}return Tt.current}}),[]);const Rt=Ft=>{const Nt=Tt.current,Ot=Ft.key;if(Ft.ctrlKey||Ft.metaKey||Ft.altKey){bt&&bt(Ft);return}const Xt=ownerDocument(Nt).activeElement;if(Ot==="ArrowDown")Ft.preventDefault(),moveFocus$1(Nt,Xt,_t,vt,nextItem$1);else if(Ot==="ArrowUp")Ft.preventDefault(),moveFocus$1(Nt,Xt,_t,vt,previousItem$1);else if(Ot==="Home")Ft.preventDefault(),moveFocus$1(Nt,null,_t,vt,nextItem$1);else if(Ot==="End")Ft.preventDefault(),moveFocus$1(Nt,null,_t,vt,previousItem$1);else if(Ot.length===1){const Zt=$t.current,rn=Ot.toLowerCase(),Gt=performance.now();Zt.keys.length>0&&(Gt-Zt.lastTime>500?(Zt.keys=[],Zt.repeating=!0,Zt.previousKeyMatched=!0):Zt.repeating&&rn!==Zt.keys[0]&&(Zt.repeating=!1)),Zt.lastTime=Gt,Zt.keys.push(rn);const nn=Xt&&!Zt.repeating&&textCriteriaMatches(Xt,Zt);Zt.previousKeyMatched&&(nn||moveFocus$1(Nt,Xt,!1,vt,nextItem$1,Zt))?Ft.preventDefault():Zt.previousKeyMatched=!1}bt&&bt(Ft)},Et=useForkRef(Tt,rt);let wt=-1;reactExports.Children.forEach(dt,(Ft,Nt)=>{if(!reactExports.isValidElement(Ft)){wt===Nt&&(wt+=1,wt>=dt.length&&(wt=-1));return}Ft.props.disabled||(Mt==="selectedMenu"&&Ft.props.selected||wt===-1)&&(wt=Nt),wt===Nt&&(Ft.props.disabled||Ft.props.muiSkipListHighlight||Ft.type.muiSkipListHighlight)&&(wt+=1,wt>=dt.length&&(wt=-1))});const Pt=reactExports.Children.map(dt,(Ft,Nt)=>{if(Nt===wt){const Ot={};return lt&&(Ot.autoFocus=!0),Ft.props.tabIndex===void 0&&Mt==="selectedMenu"&&(Ot.tabIndex=0),reactExports.cloneElement(Ft,Ot)}return Ft});return jsxRuntimeExports.jsx(List,{role:"menu",ref:Et,className:yt,onKeyDown:Rt,tabIndex:at?0:-1,...Ct,children:Pt})});function getPopoverUtilityClass(nt){return generateUtilityClass("MuiPopover",nt)}generateUtilityClasses("MuiPopover",["root","paper"]);function getOffsetTop(nt,tt){let rt=0;return typeof tt=="number"?rt=tt:tt==="center"?rt=nt.height/2:tt==="bottom"&&(rt=nt.height),rt}function getOffsetLeft(nt,tt){let rt=0;return typeof tt=="number"?rt=tt:tt==="center"?rt=nt.width/2:tt==="right"&&(rt=nt.width),rt}function getTransformOriginValue(nt){return[nt.horizontal,nt.vertical].map(tt=>typeof tt=="number"?`${tt}px`:tt).join(" ")}function resolveAnchorEl(nt){return typeof nt=="function"?nt():nt}const useUtilityClasses$h=nt=>{const{classes:tt}=nt;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,tt)},PopoverRoot=styled(Modal,{name:"MuiPopover",slot:"Root",overridesResolver:(nt,tt)=>tt.root})({}),PopoverPaper=styled(Paper,{name:"MuiPopover",slot:"Paper",overridesResolver:(nt,tt)=>tt.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiPopover"}),{action:at,anchorEl:lt,anchorOrigin:dt={vertical:"top",horizontal:"left"},anchorPosition:yt,anchorReference:vt="anchorEl",children:_t,className:bt,container:Mt,elevation:Ct=8,marginThreshold:Tt=16,open:$t,PaperProps:Rt={},slots:Et={},slotProps:wt={},transformOrigin:Pt={vertical:"top",horizontal:"left"},TransitionComponent:Ft=Grow,transitionDuration:Nt="auto",TransitionProps:{onEntering:Ot,...Bt}={},disableScrollLock:Xt=!1,...Zt}=st,rn=(wt==null?void 0:wt.paper)??Rt,Gt=reactExports.useRef(),nn={...st,anchorOrigin:dt,anchorReference:vt,elevation:Ct,marginThreshold:Tt,externalPaperSlotProps:rn,transformOrigin:Pt,TransitionComponent:Ft,transitionDuration:Nt,TransitionProps:Bt},cn=useUtilityClasses$h(nn),an=reactExports.useCallback(()=>{if(vt==="anchorPosition")return yt;const Ar=resolveAnchorEl(lt),Mr=(Ar&&Ar.nodeType===1?Ar:ownerDocument(Gt.current).body).getBoundingClientRect();return{top:Mr.top+getOffsetTop(Mr,dt.vertical),left:Mr.left+getOffsetLeft(Mr,dt.horizontal)}},[lt,dt.horizontal,dt.vertical,yt,vt]),mn=reactExports.useCallback(Ar=>({vertical:getOffsetTop(Ar,Pt.vertical),horizontal:getOffsetLeft(Ar,Pt.horizontal)}),[Pt.horizontal,Pt.vertical]),En=reactExports.useCallback(Ar=>{const $r={width:Ar.offsetWidth,height:Ar.offsetHeight},Mr=mn($r);if(vt==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(Mr)};const Jn=an();let hr=Jn.top-Mr.vertical,wr=Jn.left-Mr.horizontal;const Nr=hr+$r.height,Fr=wr+$r.width,Yr=ownerWindow(resolveAnchorEl(lt)),cs=Yr.innerHeight-Tt,cr=Yr.innerWidth-Tt;if(Tt!==null&&hr<Tt){const Qn=hr-Tt;hr-=Qn,Mr.vertical+=Qn}else if(Tt!==null&&Nr>cs){const Qn=Nr-cs;hr-=Qn,Mr.vertical+=Qn}if(Tt!==null&&wr<Tt){const Qn=wr-Tt;wr-=Qn,Mr.horizontal+=Qn}else if(Fr>cr){const Qn=Fr-cr;wr-=Qn,Mr.horizontal+=Qn}return{top:`${Math.round(hr)}px`,left:`${Math.round(wr)}px`,transformOrigin:getTransformOriginValue(Mr)}},[lt,vt,an,mn,Tt]),[Cn,Mn]=reactExports.useState($t),un=reactExports.useCallback(()=>{const Ar=Gt.current;if(!Ar)return;const $r=En(Ar);$r.top!==null&&Ar.style.setProperty("top",$r.top),$r.left!==null&&(Ar.style.left=$r.left),Ar.style.transformOrigin=$r.transformOrigin,Mn(!0)},[En]);reactExports.useEffect(()=>(Xt&&window.addEventListener("scroll",un),()=>window.removeEventListener("scroll",un)),[lt,Xt,un]);const Tn=(Ar,$r)=>{Ot&&Ot(Ar,$r),un()},Pn=()=>{Mn(!1)};reactExports.useEffect(()=>{$t&&un()}),reactExports.useImperativeHandle(at,()=>$t?{updatePosition:()=>{un()}}:null,[$t,un]),reactExports.useEffect(()=>{if(!$t)return;const Ar=debounce$2(()=>{un()}),$r=ownerWindow(lt);return $r.addEventListener("resize",Ar),()=>{Ar.clear(),$r.removeEventListener("resize",Ar)}},[lt,$t,un]);let dn=Nt;Nt==="auto"&&!Ft.muiSupportAuto&&(dn=void 0);const Un=Mt||(lt?ownerDocument(resolveAnchorEl(lt)).body:void 0),qn={slots:Et,slotProps:{...wt,paper:rn}},[In,Wn]=useSlot("paper",{elementType:PopoverPaper,externalForwardedProps:qn,additionalProps:{elevation:Ct,className:clsx(cn.paper,rn==null?void 0:rn.className),style:Cn?rn.style:{...rn.style,opacity:0}},ownerState:nn}),[ar,{slotProps:fr,...mr}]=useSlot("root",{elementType:PopoverRoot,externalForwardedProps:qn,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:Un,open:$t},ownerState:nn,className:clsx(cn.root,bt)}),vr=useForkRef(Gt,Wn.ref);return jsxRuntimeExports.jsx(ar,{...mr,...!isHostComponent(ar)&&{slotProps:fr,disableScrollLock:Xt},...Zt,ref:rt,children:jsxRuntimeExports.jsx(Ft,{appear:!0,in:$t,onEntering:Tn,onExited:Pn,timeout:dn,...Bt,children:jsxRuntimeExports.jsx(In,{...Wn,ref:vr,children:_t})})})});function getMenuUtilityClass(nt){return generateUtilityClass("MuiMenu",nt)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$g=nt=>{const{classes:tt}=nt;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,tt)},MenuRoot=styled(Popover,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(nt,tt)=>tt.root})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper",overridesResolver:(nt,tt)=>tt.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList,{name:"MuiMenu",slot:"List",overridesResolver:(nt,tt)=>tt.list})({outline:0}),Menu=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiMenu"}),{autoFocus:at=!0,children:lt,className:dt,disableAutoFocusItem:yt=!1,MenuListProps:vt={},onClose:_t,open:bt,PaperProps:Mt={},PopoverClasses:Ct,transitionDuration:Tt="auto",TransitionProps:{onEntering:$t,...Rt}={},variant:Et="selectedMenu",slots:wt={},slotProps:Pt={},...Ft}=st,Nt=useRtl(),Ot={...st,autoFocus:at,disableAutoFocusItem:yt,MenuListProps:vt,onEntering:$t,PaperProps:Mt,transitionDuration:Tt,TransitionProps:Rt,variant:Et},Bt=useUtilityClasses$g(Ot),Xt=at&&!yt&&bt,Zt=reactExports.useRef(null),rn=(Cn,Mn)=>{Zt.current&&Zt.current.adjustStyleForScrollbar(Cn,{direction:Nt?"rtl":"ltr"}),$t&&$t(Cn,Mn)},Gt=Cn=>{Cn.key==="Tab"&&(Cn.preventDefault(),_t&&_t(Cn,"tabKeyDown"))};let nn=-1;reactExports.Children.map(lt,(Cn,Mn)=>{reactExports.isValidElement(Cn)&&(Cn.props.disabled||(Et==="selectedMenu"&&Cn.props.selected||nn===-1)&&(nn=Mn))});const cn=wt.paper??MenuPaper,an=Pt.paper??Mt,mn=useSlotProps({elementType:wt.root,externalSlotProps:Pt.root,ownerState:Ot,className:[Bt.root,dt]}),En=useSlotProps({elementType:cn,externalSlotProps:an,ownerState:Ot,className:Bt.paper});return jsxRuntimeExports.jsx(MenuRoot,{onClose:_t,anchorOrigin:{vertical:"bottom",horizontal:Nt?"right":"left"},transformOrigin:Nt?RTL_ORIGIN:LTR_ORIGIN,slots:{paper:cn,root:wt.root},slotProps:{root:mn,paper:En},open:bt,ref:rt,transitionDuration:Tt,TransitionProps:{onEntering:rn,...Rt},ownerState:Ot,...Ft,classes:Ct,children:jsxRuntimeExports.jsx(MenuMenuList,{onKeyDown:Gt,actions:Zt,autoFocus:at&&(nn===-1||yt),autoFocusItem:Xt,variant:Et,...vt,className:clsx(Bt.list,vt.className),children:lt})})});function getMenuItemUtilityClass(nt){return generateUtilityClass("MuiMenuItem",nt)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),overridesResolver=(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.dense&&tt.dense,rt.divider&&tt.divider,!rt.disableGutters&&tt.gutters]},useUtilityClasses$f=nt=>{const{disabled:tt,dense:rt,divider:st,disableGutters:at,selected:lt,classes:dt}=nt,vt=composeClasses({root:["root",rt&&"dense",tt&&"disabled",!at&&"gutters",st&&"divider",lt&&"selected"]},getMenuItemUtilityClass,dt);return{...dt,...vt}},MenuItemRoot=styled(ButtonBase,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(memoTheme(({theme:nt})=>({...nt.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(nt.vars||nt).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses.selected}`]:{backgroundColor:nt.vars?`rgba(${nt.vars.palette.primary.mainChannel} / ${nt.vars.palette.action.selectedOpacity})`:alpha(nt.palette.primary.main,nt.palette.action.selectedOpacity),[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:nt.vars?`rgba(${nt.vars.palette.primary.mainChannel} / calc(${nt.vars.palette.action.selectedOpacity} + ${nt.vars.palette.action.focusOpacity}))`:alpha(nt.palette.primary.main,nt.palette.action.selectedOpacity+nt.palette.action.focusOpacity)}},[`&.${menuItemClasses.selected}:hover`]:{backgroundColor:nt.vars?`rgba(${nt.vars.palette.primary.mainChannel} / calc(${nt.vars.palette.action.selectedOpacity} + ${nt.vars.palette.action.hoverOpacity}))`:alpha(nt.palette.primary.main,nt.palette.action.selectedOpacity+nt.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:nt.vars?`rgba(${nt.vars.palette.primary.mainChannel} / ${nt.vars.palette.action.selectedOpacity})`:alpha(nt.palette.primary.main,nt.palette.action.selectedOpacity)}},[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:(nt.vars||nt).palette.action.focus},[`&.${menuItemClasses.disabled}`]:{opacity:(nt.vars||nt).palette.action.disabledOpacity},[`& + .${dividerClasses.root}`]:{marginTop:nt.spacing(1),marginBottom:nt.spacing(1)},[`& + .${dividerClasses.inset}`]:{marginLeft:52},[`& .${listItemTextClasses.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:tt})=>!tt.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:tt})=>tt.divider,style:{borderBottom:`1px solid ${(nt.vars||nt).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:tt})=>!tt.dense,style:{[nt.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:tt})=>tt.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...nt.typography.body2,[`& .${listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),MenuItem=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiMenuItem"}),{autoFocus:at=!1,component:lt="li",dense:dt=!1,divider:yt=!1,disableGutters:vt=!1,focusVisibleClassName:_t,role:bt="menuitem",tabIndex:Mt,className:Ct,...Tt}=st,$t=reactExports.useContext(ListContext),Rt=reactExports.useMemo(()=>({dense:dt||$t.dense||!1,disableGutters:vt}),[$t.dense,dt,vt]),Et=reactExports.useRef(null);useEnhancedEffect(()=>{at&&Et.current&&Et.current.focus()},[at]);const wt={...st,dense:Rt.dense,divider:yt,disableGutters:vt},Pt=useUtilityClasses$f(st),Ft=useForkRef(Et,rt);let Nt;return st.disabled||(Nt=Mt!==void 0?Mt:-1),jsxRuntimeExports.jsx(ListContext.Provider,{value:Rt,children:jsxRuntimeExports.jsx(MenuItemRoot,{ref:Ft,role:bt,tabIndex:Nt,component:lt,focusVisibleClassName:clsx(Pt.focusVisible,_t),className:clsx(Pt.root,Ct),...Tt,ownerState:wt,classes:Pt})})});function getNativeSelectUtilityClasses(nt){return generateUtilityClass("MuiNativeSelect",nt)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),useUtilityClasses$e=nt=>{const{classes:tt,variant:rt,disabled:st,multiple:at,open:lt,error:dt}=nt,yt={select:["select",rt,st&&"disabled",at&&"multiple",dt&&"error"],icon:["icon",`icon${capitalize(rt)}`,lt&&"iconOpen",st&&"disabled"]};return composeClasses(yt,getNativeSelectUtilityClasses,tt)},StyledSelectSelect=styled("select")(({theme:nt})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${nativeSelectClasses.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(nt.vars||nt).palette.background.paper},variants:[{props:({ownerState:tt})=>tt.variant!=="filled"&&tt.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(nt.vars||nt).shape.borderRadius,"&:focus":{borderRadius:(nt.vars||nt).shape.borderRadius},"&&&":{paddingRight:32}}}]})),NativeSelectSelect=styled(StyledSelectSelect,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.select,tt[rt.variant],rt.error&&tt.error,{[`&.${nativeSelectClasses.multiple}`]:tt.multiple}]}})({}),StyledSelectIcon=styled("svg")(({theme:nt})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(nt.vars||nt).palette.action.active,[`&.${nativeSelectClasses.disabled}`]:{color:(nt.vars||nt).palette.action.disabled},variants:[{props:({ownerState:tt})=>tt.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),NativeSelectIcon=styled(StyledSelectIcon,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.icon,rt.variant&&tt[`icon${capitalize(rt.variant)}`],rt.open&&tt.iconOpen]}})({}),NativeSelectInput=reactExports.forwardRef(function(tt,rt){const{className:st,disabled:at,error:lt,IconComponent:dt,inputRef:yt,variant:vt="standard",..._t}=tt,bt={...tt,disabled:at,variant:vt,error:lt},Mt=useUtilityClasses$e(bt);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,{ownerState:bt,className:clsx(Mt.select,st),disabled:at,ref:yt||rt,..._t}),tt.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:dt,ownerState:bt,className:Mt.icon})]})});var _span$1;const NotchedOutlineRoot$1=styled("fieldset",{shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{shouldForwardProp:rootShouldForwardProp})(memoTheme(({theme:nt})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:tt})=>!tt.withLabel,style:{padding:0,lineHeight:"11px",transition:nt.transitions.create("width",{duration:150,easing:nt.transitions.easing.easeOut})}},{props:({ownerState:tt})=>tt.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:nt.transitions.create("max-width",{duration:50,easing:nt.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:tt})=>tt.withLabel&&tt.notched,style:{maxWidth:"100%",transition:nt.transitions.create("max-width",{duration:100,easing:nt.transitions.easing.easeOut,delay:50})}}]})));function NotchedOutline(nt){const{children:tt,classes:rt,className:st,label:at,notched:lt,...dt}=nt,yt=at!=null&&at!=="",vt={...nt,notched:lt,withLabel:yt};return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,{"aria-hidden":!0,className:st,ownerState:vt,...dt,children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:vt,children:yt?jsxRuntimeExports.jsx("span",{children:at}):_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const useUtilityClasses$d=nt=>{const{classes:tt}=nt,st=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,tt);return{...tt,...st}},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:nt})=>{const tt=nt.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(nt.vars||nt).shape.borderRadius,[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:(nt.vars||nt).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:nt.vars?`rgba(${nt.vars.palette.common.onBackgroundChannel} / 0.23)`:tt}},[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([rt])=>({props:{color:rt},style:{[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(nt.vars||nt).palette[rt].main}}})),{props:{},style:{[`&.${outlinedInputClasses.error} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(nt.vars||nt).palette.error.main},[`&.${outlinedInputClasses.disabled} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(nt.vars||nt).palette.action.disabled}}},{props:({ownerState:rt})=>rt.startAdornment,style:{paddingLeft:14}},{props:({ownerState:rt})=>rt.endAdornment,style:{paddingRight:14}},{props:({ownerState:rt})=>rt.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:rt,size:st})=>rt.multiline&&st==="small",style:{padding:"8.5px 14px"}}]}})),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(nt,tt)=>tt.notchedOutline})(memoTheme(({theme:nt})=>{const tt=nt.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:nt.vars?`rgba(${nt.vars.palette.common.onBackgroundChannel} / 0.23)`:tt}})),OutlinedInputInput=styled(InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:nt})=>({padding:"16.5px 14px",...!nt.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:nt.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:nt.palette.mode==="light"?null:"#fff",caretColor:nt.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...nt.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[nt.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:tt})=>tt.multiline,style:{padding:0}},{props:({ownerState:tt})=>tt.startAdornment,style:{paddingLeft:0}},{props:({ownerState:tt})=>tt.endAdornment,style:{paddingRight:0}}]}))),OutlinedInput=reactExports.forwardRef(function(tt,rt){var st;const at=useDefaultProps({props:tt,name:"MuiOutlinedInput"}),{components:lt={},fullWidth:dt=!1,inputComponent:yt="input",label:vt,multiline:_t=!1,notched:bt,slots:Mt={},type:Ct="text",...Tt}=at,$t=useUtilityClasses$d(at),Rt=useFormControl(),Et=formControlState({props:at,muiFormControl:Rt,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),wt={...at,color:Et.color||"primary",disabled:Et.disabled,error:Et.error,focused:Et.focused,formControl:Rt,fullWidth:dt,hiddenLabel:Et.hiddenLabel,multiline:_t,size:Et.size,type:Ct},Pt=Mt.root??lt.Root??OutlinedInputRoot,Ft=Mt.input??lt.Input??OutlinedInputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:Pt,input:Ft},renderSuffix:Nt=>jsxRuntimeExports.jsx(NotchedOutlineRoot,{ownerState:wt,className:$t.notchedOutline,label:vt!=null&&vt!==""&&Et.required?st||(st=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[vt,"","*"]})):vt,notched:typeof bt<"u"?bt:!!(Nt.startAdornment||Nt.filled||Nt.focused)}),fullWidth:dt,inputComponent:yt,multiline:_t,ref:rt,type:Ct,...Tt,classes:{...$t,notchedOutline:null}})});OutlinedInput.muiName="Input";const RadioButtonUncheckedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),RadioButtonCheckedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),RadioButtonIconRoot=styled("span",{shouldForwardProp:rootShouldForwardProp})({position:"relative",display:"flex"}),RadioButtonIconBackground=styled(RadioButtonUncheckedIcon)({transform:"scale(1)"}),RadioButtonIconDot=styled(RadioButtonCheckedIcon)(memoTheme(({theme:nt})=>({left:0,position:"absolute",transform:"scale(0)",transition:nt.transitions.create("transform",{easing:nt.transitions.easing.easeIn,duration:nt.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:nt.transitions.create("transform",{easing:nt.transitions.easing.easeOut,duration:nt.transitions.duration.shortest})}}]})));function RadioButtonIcon(nt){const{checked:tt=!1,classes:rt={},fontSize:st}=nt,at={...nt,checked:tt};return jsxRuntimeExports.jsxs(RadioButtonIconRoot,{className:rt.root,ownerState:at,children:[jsxRuntimeExports.jsx(RadioButtonIconBackground,{fontSize:st,className:rt.background,ownerState:at}),jsxRuntimeExports.jsx(RadioButtonIconDot,{fontSize:st,className:rt.dot,ownerState:at})]})}const RadioGroupContext=reactExports.createContext(void 0);function useRadioGroup(){return reactExports.useContext(RadioGroupContext)}function getRadioUtilityClass(nt){return generateUtilityClass("MuiRadio",nt)}const radioClasses=generateUtilityClasses("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),useUtilityClasses$c=nt=>{const{classes:tt,color:rt,size:st}=nt,at={root:["root",`color${capitalize(rt)}`,st!=="medium"&&`size${capitalize(st)}`]};return{...tt,...composeClasses(at,getRadioUtilityClass,tt)}},RadioRoot=styled(SwitchBase,{shouldForwardProp:nt=>rootShouldForwardProp(nt)||nt==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.size!=="medium"&&tt[`size${capitalize(rt.size)}`],tt[`color${capitalize(rt.color)}`]]}})(memoTheme(({theme:nt})=>({color:(nt.vars||nt).palette.text.secondary,[`&.${radioClasses.disabled}`]:{color:(nt.vars||nt).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:nt.vars?`rgba(${nt.vars.palette.action.activeChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette.action.active,nt.palette.action.hoverOpacity)}}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:nt.vars?`rgba(${nt.vars.palette[tt].mainChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette[tt].main,nt.palette.action.hoverOpacity)}}})),...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt,disabled:!1},style:{[`&.${radioClasses.checked}`]:{color:(nt.vars||nt).palette[tt].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function areEqualValues$1(nt,tt){return typeof tt=="object"&&tt!==null?nt===tt:String(nt)===String(tt)}const defaultCheckedIcon=jsxRuntimeExports.jsx(RadioButtonIcon,{checked:!0}),defaultIcon=jsxRuntimeExports.jsx(RadioButtonIcon,{}),Radio=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiRadio"}),{checked:at,checkedIcon:lt=defaultCheckedIcon,color:dt="primary",icon:yt=defaultIcon,name:vt,onChange:_t,size:bt="medium",className:Mt,disabled:Ct,disableRipple:Tt=!1,...$t}=st,Rt=useFormControl();let Et=Ct;Rt&&typeof Et>"u"&&(Et=Rt.disabled),Et??(Et=!1);const wt={...st,disabled:Et,disableRipple:Tt,color:dt,size:bt},Pt=useUtilityClasses$c(wt),Ft=useRadioGroup();let Nt=at;const Ot=createChainedFunction(_t,Ft&&Ft.onChange);let Bt=vt;return Ft&&(typeof Nt>"u"&&(Nt=areEqualValues$1(Ft.value,st.value)),typeof Bt>"u"&&(Bt=Ft.name)),jsxRuntimeExports.jsx(RadioRoot,{type:"radio",icon:reactExports.cloneElement(yt,{fontSize:defaultIcon.props.fontSize??bt}),checkedIcon:reactExports.cloneElement(lt,{fontSize:defaultCheckedIcon.props.fontSize??bt}),disabled:Et,ownerState:wt,classes:Pt,name:Bt,checked:Nt,onChange:Ot,ref:rt,className:clsx(Pt.root,Mt),...$t})});function getRadioGroupUtilityClass(nt){return generateUtilityClass("MuiRadioGroup",nt)}generateUtilityClasses("MuiRadioGroup",["root","row","error"]);const useUtilityClasses$b=nt=>{const{classes:tt,row:rt,error:st}=nt;return composeClasses({root:["root",rt&&"row",st&&"error"]},getRadioGroupUtilityClass,tt)},RadioGroup=reactExports.forwardRef(function(tt,rt){const{actions:st,children:at,className:lt,defaultValue:dt,name:yt,onChange:vt,value:_t,...bt}=tt,Mt=reactExports.useRef(null),Ct=useUtilityClasses$b(tt),[Tt,$t]=useControlled({controlled:_t,default:dt,name:"RadioGroup"});reactExports.useImperativeHandle(st,()=>({focus:()=>{let Pt=Mt.current.querySelector("input:not(:disabled):checked");Pt||(Pt=Mt.current.querySelector("input:not(:disabled)")),Pt&&Pt.focus()}}),[]);const Rt=useForkRef(rt,Mt),Et=useId(yt),wt=reactExports.useMemo(()=>({name:Et,onChange(Pt){$t(Pt.target.value),vt&&vt(Pt,Pt.target.value)},value:Tt}),[Et,vt,$t,Tt]);return jsxRuntimeExports.jsx(RadioGroupContext.Provider,{value:wt,children:jsxRuntimeExports.jsx(FormGroup,{role:"radiogroup",ref:Rt,className:clsx(Ct.root,lt),...bt,children:at})})});function getSelectUtilityClasses(nt){return generateUtilityClass("MuiSelect",nt)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const SelectSelect=styled(StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[{[`&.${selectClasses.select}`]:tt.select},{[`&.${selectClasses.select}`]:tt[rt.variant]},{[`&.${selectClasses.error}`]:tt.error},{[`&.${selectClasses.multiple}`]:tt.multiple}]}})({[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled(StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.icon,rt.variant&&tt[`icon${capitalize(rt.variant)}`],rt.open&&tt.iconOpen]}})({}),SelectNativeInput=styled("input",{shouldForwardProp:nt=>slotShouldForwardProp(nt)&&nt!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(nt,tt)=>tt.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(nt,tt){return typeof tt=="object"&&tt!==null?nt===tt:String(nt)===String(tt)}function isEmpty$1(nt){return nt==null||typeof nt=="string"&&!nt.trim()}const useUtilityClasses$a=nt=>{const{classes:tt,variant:rt,disabled:st,multiple:at,open:lt,error:dt}=nt,yt={select:["select",rt,st&&"disabled",at&&"multiple",dt&&"error"],icon:["icon",`icon${capitalize(rt)}`,lt&&"iconOpen",st&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(yt,getSelectUtilityClasses,tt)},SelectInput=reactExports.forwardRef(function(tt,rt){var er;const{"aria-describedby":st,"aria-label":at,autoFocus:lt,autoWidth:dt,children:yt,className:vt,defaultOpen:_t,defaultValue:bt,disabled:Mt,displayEmpty:Ct,error:Tt=!1,IconComponent:$t,inputRef:Rt,labelId:Et,MenuProps:wt={},multiple:Pt,name:Ft,onBlur:Nt,onChange:Ot,onClose:Bt,onFocus:Xt,onOpen:Zt,open:rn,readOnly:Gt,renderValue:nn,required:cn,SelectDisplayProps:an={},tabIndex:mn,type:En,value:Cn,variant:Mn="standard",...un}=tt,[Tn,Pn]=useControlled({controlled:Cn,default:bt,name:"Select"}),[dn,Un]=useControlled({controlled:rn,default:_t,name:"Select"}),qn=reactExports.useRef(null),In=reactExports.useRef(null),[Wn,ar]=reactExports.useState(null),{current:fr}=reactExports.useRef(rn!=null),[mr,vr]=reactExports.useState(),Ar=useForkRef(rt,Rt),$r=reactExports.useCallback(yr=>{In.current=yr,yr&&ar(yr)},[]),Mr=Wn==null?void 0:Wn.parentNode;reactExports.useImperativeHandle(Ar,()=>({focus:()=>{In.current.focus()},node:qn.current,value:Tn}),[Tn]),reactExports.useEffect(()=>{_t&&dn&&Wn&&!fr&&(vr(dt?null:Mr.clientWidth),In.current.focus())},[Wn,dt]),reactExports.useEffect(()=>{lt&&In.current.focus()},[lt]),reactExports.useEffect(()=>{if(!Et)return;const yr=ownerDocument(In.current).getElementById(Et);if(yr){const Er=()=>{getSelection().isCollapsed&&In.current.focus()};return yr.addEventListener("click",Er),()=>{yr.removeEventListener("click",Er)}}},[Et]);const Jn=(yr,Er)=>{yr?Zt&&Zt(Er):Bt&&Bt(Er),fr||(vr(dt?null:Mr.clientWidth),Un(yr))},hr=yr=>{yr.button===0&&(yr.preventDefault(),In.current.focus(),Jn(!0,yr))},wr=yr=>{Jn(!1,yr)},Nr=reactExports.Children.toArray(yt),Fr=yr=>{const Er=Nr.find(Hr=>Hr.props.value===yr.target.value);Er!==void 0&&(Pn(Er.props.value),Ot&&Ot(yr,Er))},Yr=yr=>Er=>{let Hr;if(Er.currentTarget.hasAttribute("tabindex")){if(Pt){Hr=Array.isArray(Tn)?Tn.slice():[];const lr=Tn.indexOf(yr.props.value);lr===-1?Hr.push(yr.props.value):Hr.splice(lr,1)}else Hr=yr.props.value;if(yr.props.onClick&&yr.props.onClick(Er),Tn!==Hr&&(Pn(Hr),Ot)){const lr=Er.nativeEvent||Er,Br=new lr.constructor(lr.type,lr);Object.defineProperty(Br,"target",{writable:!0,value:{value:Hr,name:Ft}}),Ot(Br,yr)}Pt||Jn(!1,Er)}},cs=yr=>{Gt||[" ","ArrowUp","ArrowDown","Enter"].includes(yr.key)&&(yr.preventDefault(),Jn(!0,yr))},cr=Wn!==null&&dn,Qn=yr=>{!cr&&Nt&&(Object.defineProperty(yr,"target",{writable:!0,value:{value:Tn,name:Ft}}),Nt(yr))};delete un["aria-invalid"];let _r,Ir;const pr=[];let Tr=!1;(isFilled({value:Tn})||Ct)&&(nn?_r=nn(Tn):Tr=!0);const Wr=Nr.map(yr=>{if(!reactExports.isValidElement(yr))return null;let Er;if(Pt){if(!Array.isArray(Tn))throw new Error(formatMuiErrorMessage(2));Er=Tn.some(Hr=>areEqualValues(Hr,yr.props.value)),Er&&Tr&&pr.push(yr.props.children)}else Er=areEqualValues(Tn,yr.props.value),Er&&Tr&&(Ir=yr.props.children);return reactExports.cloneElement(yr,{"aria-selected":Er?"true":"false",onClick:Yr(yr),onKeyUp:Hr=>{Hr.key===" "&&Hr.preventDefault(),yr.props.onKeyUp&&yr.props.onKeyUp(Hr)},role:"option",selected:Er,value:void 0,"data-value":yr.props.value})});Tr&&(Pt?pr.length===0?_r=null:_r=pr.reduce((yr,Er,Hr)=>(yr.push(Er),Hr<pr.length-1&&yr.push(", "),yr),[]):_r=Ir);let Kn=mr;!dt&&fr&&Wn&&(Kn=Mr.clientWidth);let rr;typeof mn<"u"?rr=mn:rr=Mt?null:0;const ur=an.id||(Ft?`mui-component-select-${Ft}`:void 0),Sr={...tt,variant:Mn,value:Tn,open:cr,error:Tt},gr=useUtilityClasses$a(Sr),Gr={...wt.PaperProps,...(er=wt.slotProps)==null?void 0:er.paper},jr=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,{as:"div",ref:$r,tabIndex:rr,role:"combobox","aria-controls":jr,"aria-disabled":Mt?"true":void 0,"aria-expanded":cr?"true":"false","aria-haspopup":"listbox","aria-label":at,"aria-labelledby":[Et,ur].filter(Boolean).join(" ")||void 0,"aria-describedby":st,"aria-required":cn?"true":void 0,"aria-invalid":Tt?"true":void 0,onKeyDown:cs,onMouseDown:Mt||Gt?null:hr,onBlur:Qn,onFocus:Xt,...an,ownerState:Sr,className:clsx(an.className,gr.select,vt),id:ur,children:isEmpty$1(_r)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):_r}),jsxRuntimeExports.jsx(SelectNativeInput,{"aria-invalid":Tt,value:Array.isArray(Tn)?Tn.join(","):Tn,name:Ft,ref:qn,"aria-hidden":!0,onChange:Fr,tabIndex:-1,disabled:Mt,className:gr.nativeInput,autoFocus:lt,required:cn,...un,ownerState:Sr}),jsxRuntimeExports.jsx(SelectIcon,{as:$t,className:gr.icon,ownerState:Sr}),jsxRuntimeExports.jsx(Menu,{id:`menu-${Ft||""}`,anchorEl:Mr,open:cr,onClose:wr,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...wt,MenuListProps:{"aria-labelledby":Et,role:"listbox","aria-multiselectable":Pt?"true":void 0,disableListWrap:!0,id:jr,...wt.MenuListProps},slotProps:{...wt.slotProps,paper:{...Gr,style:{minWidth:Kn,...Gr!=null?Gr.style:null}}},children:Wr})]})}),useUtilityClasses$9=nt=>{const{classes:tt}=nt;return tt},styledRootConfig={name:"MuiSelect",overridesResolver:(nt,tt)=>tt.root,shouldForwardProp:nt=>rootShouldForwardProp(nt)&&nt!=="variant",slot:"Root"},StyledInput=styled(Input,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput,styledRootConfig)(""),StyledFilledInput=styled(FilledInput,styledRootConfig)(""),Select=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({name:"MuiSelect",props:tt}),{autoWidth:at=!1,children:lt,classes:dt={},className:yt,defaultOpen:vt=!1,displayEmpty:_t=!1,IconComponent:bt=ArrowDropDownIcon,id:Mt,input:Ct,inputProps:Tt,label:$t,labelId:Rt,MenuProps:Et,multiple:wt=!1,native:Pt=!1,onClose:Ft,onOpen:Nt,open:Ot,renderValue:Bt,SelectDisplayProps:Xt,variant:Zt="outlined",...rn}=st,Gt=Pt?NativeSelectInput:SelectInput,nn=useFormControl(),cn=formControlState({props:st,muiFormControl:nn,states:["variant","error"]}),an=cn.variant||Zt,mn={...st,variant:an,classes:dt},En=useUtilityClasses$9(mn),{root:Cn,...Mn}=En,un=Ct||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:mn}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:$t,ownerState:mn}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:mn})}[an],Tn=useForkRef(rt,getReactElementRef(un));return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(un,{inputComponent:Gt,inputProps:{children:lt,error:cn.error,IconComponent:bt,variant:an,type:void 0,multiple:wt,...Pt?{id:Mt}:{autoWidth:at,defaultOpen:vt,displayEmpty:_t,labelId:Rt,MenuProps:Et,onClose:Ft,onOpen:Nt,open:Ot,renderValue:Bt,SelectDisplayProps:{id:Mt,...Xt}},...Tt,classes:Tt?deepmerge(Mn,Tt.classes):Mn,...Ct?Ct.props.inputProps:{}},...(wt&&Pt||_t)&&an==="outlined"?{notched:!0}:{},ref:Tn,className:clsx(un.props.className,yt,En.root),...!Ct&&{variant:an},...rn})})});Select.muiName="Select";function areArraysEqual(nt,tt,rt=(st,at)=>st===at){return nt.length===tt.length&&nt.every((st,at)=>rt(st,tt[at]))}const INTENTIONAL_DRAG_COUNT_THRESHOLD=2;function getNewValue(nt,tt,rt,st,at){return rt===1?Math.min(nt+tt,at):Math.max(nt-tt,st)}function asc(nt,tt){return nt-tt}function findClosest(nt,tt){const{index:rt}=nt.reduce((st,at,lt)=>{const dt=Math.abs(tt-at);return st===null||dt<st.distance||dt===st.distance?{distance:dt,index:lt}:st},null)??{};return rt}function trackFinger(nt,tt){if(tt.current!==void 0&&nt.changedTouches){const rt=nt;for(let st=0;st<rt.changedTouches.length;st+=1){const at=rt.changedTouches[st];if(at.identifier===tt.current)return{x:at.clientX,y:at.clientY}}return!1}return{x:nt.clientX,y:nt.clientY}}function valueToPercent(nt,tt,rt){return(nt-tt)*100/(rt-tt)}function percentToValue(nt,tt,rt){return(rt-tt)*nt+tt}function getDecimalPrecision(nt){if(Math.abs(nt)<1){const rt=nt.toExponential().split("e-"),st=rt[0].split(".")[1];return(st?st.length:0)+parseInt(rt[1],10)}const tt=nt.toString().split(".")[1];return tt?tt.length:0}function roundValueToStep(nt,tt,rt){const st=Math.round((nt-rt)/tt)*tt+rt;return Number(st.toFixed(getDecimalPrecision(tt)))}function setValueIndex({values:nt,newValue:tt,index:rt}){const st=nt.slice();return st[rt]=tt,st.sort(asc)}function focusThumb({sliderRef:nt,activeIndex:tt,setActive:rt}){var at,lt,dt;const st=ownerDocument(nt.current);(!((at=nt.current)!=null&&at.contains(st.activeElement))||Number((lt=st==null?void 0:st.activeElement)==null?void 0:lt.getAttribute("data-index"))!==tt)&&((dt=nt.current)==null||dt.querySelector(`[type="range"][data-index="${tt}"]`).focus()),rt&&rt(tt)}function areValuesEqual(nt,tt){return typeof nt=="number"&&typeof tt=="number"?nt===tt:typeof nt=="object"&&typeof tt=="object"?areArraysEqual(nt,tt):!1}const axisProps={horizontal:{offset:nt=>({left:`${nt}%`}),leap:nt=>({width:`${nt}%`})},"horizontal-reverse":{offset:nt=>({right:`${nt}%`}),leap:nt=>({width:`${nt}%`})},vertical:{offset:nt=>({bottom:`${nt}%`}),leap:nt=>({height:`${nt}%`})}},Identity$1=nt=>nt;let cachedSupportsTouchActionNone;function doesSupportTouchActionNone(){return cachedSupportsTouchActionNone===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?cachedSupportsTouchActionNone=CSS.supports("touch-action","none"):cachedSupportsTouchActionNone=!0),cachedSupportsTouchActionNone}function useSlider(nt){const{"aria-labelledby":tt,defaultValue:rt,disabled:st=!1,disableSwap:at=!1,isRtl:lt=!1,marks:dt=!1,max:yt=100,min:vt=0,name:_t,onChange:bt,onChangeCommitted:Mt,orientation:Ct="horizontal",rootRef:Tt,scale:$t=Identity$1,step:Rt=1,shiftStep:Et=10,tabIndex:wt,value:Pt}=nt,Ft=reactExports.useRef(void 0),[Nt,Ot]=reactExports.useState(-1),[Bt,Xt]=reactExports.useState(-1),[Zt,rn]=reactExports.useState(!1),Gt=reactExports.useRef(0),[nn,cn]=useControlled({controlled:Pt,default:rt??vt,name:"Slider"}),an=bt&&((pr,Tr,Wr)=>{const Kn=pr.nativeEvent||pr,rr=new Kn.constructor(Kn.type,Kn);Object.defineProperty(rr,"target",{writable:!0,value:{value:Tr,name:_t}}),bt(rr,Tr,Wr)}),mn=Array.isArray(nn);let En=mn?nn.slice().sort(asc):[nn];En=En.map(pr=>pr==null?vt:clamp$1(pr,vt,yt));const Cn=dt===!0&&Rt!==null?[...Array(Math.floor((yt-vt)/Rt)+1)].map((pr,Tr)=>({value:vt+Rt*Tr})):dt||[],Mn=Cn.map(pr=>pr.value),[un,Tn]=reactExports.useState(-1),Pn=reactExports.useRef(null),dn=useForkRef(Tt,Pn),Un=pr=>Tr=>{var Kn;const Wr=Number(Tr.currentTarget.getAttribute("data-index"));isFocusVisible(Tr.target)&&Tn(Wr),Xt(Wr),(Kn=pr==null?void 0:pr.onFocus)==null||Kn.call(pr,Tr)},qn=pr=>Tr=>{var Wr;isFocusVisible(Tr.target)||Tn(-1),Xt(-1),(Wr=pr==null?void 0:pr.onBlur)==null||Wr.call(pr,Tr)},In=(pr,Tr)=>{const Wr=Number(pr.currentTarget.getAttribute("data-index")),Kn=En[Wr],rr=Mn.indexOf(Kn);let ur=Tr;if(Cn&&Rt==null){const Sr=Mn[Mn.length-1];ur>Sr?ur=Sr:ur<Mn[0]?ur=Mn[0]:ur=ur<Kn?Mn[rr-1]:Mn[rr+1]}if(ur=clamp$1(ur,vt,yt),mn){at&&(ur=clamp$1(ur,En[Wr-1]||-1/0,En[Wr+1]||1/0));const Sr=ur;ur=setValueIndex({values:En,newValue:ur,index:Wr});let gr=Wr;at||(gr=ur.indexOf(Sr)),focusThumb({sliderRef:Pn,activeIndex:gr})}cn(ur),Tn(Wr),an&&!areValuesEqual(ur,nn)&&an(pr,ur,Wr),Mt&&Mt(pr,ur)},Wn=pr=>Tr=>{var Wr;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(Tr.key)){Tr.preventDefault();const Kn=Number(Tr.currentTarget.getAttribute("data-index")),rr=En[Kn];let ur=null;if(Rt!=null){const Sr=Tr.shiftKey?Et:Rt;switch(Tr.key){case"ArrowUp":ur=getNewValue(rr,Sr,1,vt,yt);break;case"ArrowRight":ur=getNewValue(rr,Sr,lt?-1:1,vt,yt);break;case"ArrowDown":ur=getNewValue(rr,Sr,-1,vt,yt);break;case"ArrowLeft":ur=getNewValue(rr,Sr,lt?1:-1,vt,yt);break;case"PageUp":ur=getNewValue(rr,Et,1,vt,yt);break;case"PageDown":ur=getNewValue(rr,Et,-1,vt,yt);break;case"Home":ur=vt;break;case"End":ur=yt;break}}else if(Cn){const Sr=Mn[Mn.length-1],gr=Mn.indexOf(rr),Gr=[lt?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],jr=[lt?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Gr.includes(Tr.key)?gr===0?ur=Mn[0]:ur=Mn[gr-1]:jr.includes(Tr.key)&&(gr===Mn.length-1?ur=Sr:ur=Mn[gr+1])}ur!=null&&In(Tr,ur)}(Wr=pr==null?void 0:pr.onKeyDown)==null||Wr.call(pr,Tr)};useEnhancedEffect(()=>{var pr;st&&Pn.current.contains(document.activeElement)&&((pr=document.activeElement)==null||pr.blur())},[st]),st&&Nt!==-1&&Ot(-1),st&&un!==-1&&Tn(-1);const ar=pr=>Tr=>{var Wr;(Wr=pr.onChange)==null||Wr.call(pr,Tr),In(Tr,Tr.target.valueAsNumber)},fr=reactExports.useRef(void 0);let mr=Ct;lt&&Ct==="horizontal"&&(mr+="-reverse");const vr=({finger:pr,move:Tr=!1})=>{const{current:Wr}=Pn,{width:Kn,height:rr,bottom:ur,left:Sr}=Wr.getBoundingClientRect();let gr;mr.startsWith("vertical")?gr=(ur-pr.y)/rr:gr=(pr.x-Sr)/Kn,mr.includes("-reverse")&&(gr=1-gr);let Gr;if(Gr=percentToValue(gr,vt,yt),Rt)Gr=roundValueToStep(Gr,Rt,vt);else{const er=findClosest(Mn,Gr);Gr=Mn[er]}Gr=clamp$1(Gr,vt,yt);let jr=0;if(mn){Tr?jr=fr.current:jr=findClosest(En,Gr),at&&(Gr=clamp$1(Gr,En[jr-1]||-1/0,En[jr+1]||1/0));const er=Gr;Gr=setValueIndex({values:En,newValue:Gr,index:jr}),at&&Tr||(jr=Gr.indexOf(er),fr.current=jr)}return{newValue:Gr,activeIndex:jr}},Ar=useEventCallback(pr=>{const Tr=trackFinger(pr,Ft);if(!Tr)return;if(Gt.current+=1,pr.type==="mousemove"&&pr.buttons===0){$r(pr);return}const{newValue:Wr,activeIndex:Kn}=vr({finger:Tr,move:!0});focusThumb({sliderRef:Pn,activeIndex:Kn,setActive:Ot}),cn(Wr),!Zt&&Gt.current>INTENTIONAL_DRAG_COUNT_THRESHOLD&&rn(!0),an&&!areValuesEqual(Wr,nn)&&an(pr,Wr,Kn)}),$r=useEventCallback(pr=>{const Tr=trackFinger(pr,Ft);if(rn(!1),!Tr)return;const{newValue:Wr}=vr({finger:Tr,move:!0});Ot(-1),pr.type==="touchend"&&Xt(-1),Mt&&Mt(pr,Wr),Ft.current=void 0,Jn()}),Mr=useEventCallback(pr=>{if(st)return;doesSupportTouchActionNone()||pr.preventDefault();const Tr=pr.changedTouches[0];Tr!=null&&(Ft.current=Tr.identifier);const Wr=trackFinger(pr,Ft);if(Wr!==!1){const{newValue:rr,activeIndex:ur}=vr({finger:Wr});focusThumb({sliderRef:Pn,activeIndex:ur,setActive:Ot}),cn(rr),an&&!areValuesEqual(rr,nn)&&an(pr,rr,ur)}Gt.current=0;const Kn=ownerDocument(Pn.current);Kn.addEventListener("touchmove",Ar,{passive:!0}),Kn.addEventListener("touchend",$r,{passive:!0})}),Jn=reactExports.useCallback(()=>{const pr=ownerDocument(Pn.current);pr.removeEventListener("mousemove",Ar),pr.removeEventListener("mouseup",$r),pr.removeEventListener("touchmove",Ar),pr.removeEventListener("touchend",$r)},[$r,Ar]);reactExports.useEffect(()=>{const{current:pr}=Pn;return pr.addEventListener("touchstart",Mr,{passive:doesSupportTouchActionNone()}),()=>{pr.removeEventListener("touchstart",Mr),Jn()}},[Jn,Mr]),reactExports.useEffect(()=>{st&&Jn()},[st,Jn]);const hr=pr=>Tr=>{var rr;if((rr=pr.onMouseDown)==null||rr.call(pr,Tr),st||Tr.defaultPrevented||Tr.button!==0)return;Tr.preventDefault();const Wr=trackFinger(Tr,Ft);if(Wr!==!1){const{newValue:ur,activeIndex:Sr}=vr({finger:Wr});focusThumb({sliderRef:Pn,activeIndex:Sr,setActive:Ot}),cn(ur),an&&!areValuesEqual(ur,nn)&&an(Tr,ur,Sr)}Gt.current=0;const Kn=ownerDocument(Pn.current);Kn.addEventListener("mousemove",Ar,{passive:!0}),Kn.addEventListener("mouseup",$r)},wr=valueToPercent(mn?En[0]:vt,vt,yt),Nr=valueToPercent(En[En.length-1],vt,yt)-wr,Fr=(pr={})=>{const Tr=extractEventHandlers(pr),Wr={onMouseDown:hr(Tr||{})},Kn={...Tr,...Wr};return{...pr,ref:dn,...Kn}},Yr=pr=>Tr=>{var Kn;(Kn=pr.onMouseOver)==null||Kn.call(pr,Tr);const Wr=Number(Tr.currentTarget.getAttribute("data-index"));Xt(Wr)},cs=pr=>Tr=>{var Wr;(Wr=pr.onMouseLeave)==null||Wr.call(pr,Tr),Xt(-1)},cr=(pr={})=>{const Tr=extractEventHandlers(pr),Wr={onMouseOver:Yr(Tr||{}),onMouseLeave:cs(Tr||{})};return{...pr,...Tr,...Wr}},Qn=pr=>({pointerEvents:Nt!==-1&&Nt!==pr?"none":void 0});let _r;return Ct==="vertical"&&(_r=lt?"vertical-rl":"vertical-lr"),{active:Nt,axis:mr,axisProps,dragging:Zt,focusedThumbIndex:un,getHiddenInputProps:(pr={})=>{const Tr=extractEventHandlers(pr),Wr={onChange:ar(Tr||{}),onFocus:Un(Tr||{}),onBlur:qn(Tr||{}),onKeyDown:Wn(Tr||{})},Kn={...Tr,...Wr};return{tabIndex:wt,"aria-labelledby":tt,"aria-orientation":Ct,"aria-valuemax":$t(yt),"aria-valuemin":$t(vt),name:_t,type:"range",min:nt.min,max:nt.max,step:nt.step===null&&nt.marks?"any":nt.step??void 0,disabled:st,...pr,...Kn,style:{...visuallyHidden,direction:lt?"rtl":"ltr",width:"100%",height:"100%",writingMode:_r}}},getRootProps:Fr,getThumbProps:cr,marks:Cn,open:Bt,range:mn,rootRef:dn,trackLeap:Nr,trackOffset:wr,values:En,getThumbStyle:Qn}}const shouldSpreadAdditionalProps=nt=>!nt||!isHostComponent(nt);function getSliderUtilityClass(nt){return generateUtilityClass("MuiSlider",nt)}const sliderClasses=generateUtilityClasses("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),useValueLabelClasses=nt=>{const{open:tt}=nt;return{offset:clsx(tt&&sliderClasses.valueLabelOpen),circle:sliderClasses.valueLabelCircle,label:sliderClasses.valueLabelLabel}};function SliderValueLabel$1(nt){const{children:tt,className:rt,value:st}=nt,at=useValueLabelClasses(nt);return tt?reactExports.cloneElement(tt,{className:clsx(tt.props.className)},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[tt.props.children,jsxRuntimeExports.jsx("span",{className:clsx(at.offset,rt),"aria-hidden":!0,children:jsxRuntimeExports.jsx("span",{className:at.circle,children:jsxRuntimeExports.jsx("span",{className:at.label,children:st})})})]})):null}function Identity(nt){return nt}const SliderRoot=styled("span",{name:"MuiSlider",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[`color${capitalize(rt.color)}`],rt.size!=="medium"&&tt[`size${capitalize(rt.size)}`],rt.marked&&tt.marked,rt.orientation==="vertical"&&tt.vertical,rt.track==="inverted"&&tt.trackInverted,rt.track===!1&&tt.trackFalse]}})(memoTheme(({theme:nt})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${sliderClasses.disabled}`]:{pointerEvents:"none",cursor:"default",color:(nt.vars||nt).palette.grey[400]},[`&.${sliderClasses.dragging}`]:{[`& .${sliderClasses.thumb}, & .${sliderClasses.track}`]:{transition:"none"}},variants:[...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt},style:{color:(nt.vars||nt).palette[tt].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),SliderRail=styled("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(nt,tt)=>tt.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),SliderTrack=styled("span",{name:"MuiSlider",slot:"Track",overridesResolver:(nt,tt)=>tt.track})(memoTheme(({theme:nt})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:nt.transitions.create(["left","width","bottom","height"],{duration:nt.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt,track:"inverted"},style:{...nt.vars?{backgroundColor:nt.vars.palette.Slider[`${tt}Track`],borderColor:nt.vars.palette.Slider[`${tt}Track`]}:{backgroundColor:lighten(nt.palette[tt].main,.62),borderColor:lighten(nt.palette[tt].main,.62),...nt.applyStyles("dark",{backgroundColor:darken(nt.palette[tt].main,.5)}),...nt.applyStyles("dark",{borderColor:darken(nt.palette[tt].main,.5)})}}}))]}))),SliderThumb=styled("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.thumb,tt[`thumbColor${capitalize(rt.color)}`],rt.size!=="medium"&&tt[`thumbSize${capitalize(rt.size)}`]]}})(memoTheme(({theme:nt})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:nt.transitions.create(["box-shadow","left","bottom"],{duration:nt.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(nt.vars||nt).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${sliderClasses.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt},style:{[`&:hover, &.${sliderClasses.focusVisible}`]:{...nt.vars?{boxShadow:`0px 0px 0px 8px rgba(${nt.vars.palette[tt].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${alpha(nt.palette[tt].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${sliderClasses.active}`]:{...nt.vars?{boxShadow:`0px 0px 0px 14px rgba(${nt.vars.palette[tt].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${alpha(nt.palette[tt].main,.16)}`}}}}))]}))),SliderValueLabel=styled(SliderValueLabel$1,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(nt,tt)=>tt.valueLabel})(memoTheme(({theme:nt})=>({zIndex:1,whiteSpace:"nowrap",...nt.typography.body2,fontWeight:500,transition:nt.transitions.create(["transform"],{duration:nt.transitions.duration.shortest}),position:"absolute",backgroundColor:(nt.vars||nt).palette.grey[600],borderRadius:2,color:(nt.vars||nt).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${sliderClasses.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${sliderClasses.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:nt.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),SliderMark=styled("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:nt=>slotShouldForwardProp(nt)&&nt!=="markActive",overridesResolver:(nt,tt)=>{const{markActive:rt}=nt;return[tt.mark,rt&&tt.markActive]}})(memoTheme(({theme:nt})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(nt.vars||nt).palette.background.paper,opacity:.8}}]}))),SliderMarkLabel=styled("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:nt=>slotShouldForwardProp(nt)&&nt!=="markLabelActive",overridesResolver:(nt,tt)=>tt.markLabel})(memoTheme(({theme:nt})=>({...nt.typography.body2,color:(nt.vars||nt).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(nt.vars||nt).palette.text.primary}}]}))),useUtilityClasses$8=nt=>{const{disabled:tt,dragging:rt,marked:st,orientation:at,track:lt,classes:dt,color:yt,size:vt}=nt,_t={root:["root",tt&&"disabled",rt&&"dragging",st&&"marked",at==="vertical"&&"vertical",lt==="inverted"&&"trackInverted",lt===!1&&"trackFalse",yt&&`color${capitalize(yt)}`,vt&&`size${capitalize(vt)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",tt&&"disabled",vt&&`thumbSize${capitalize(vt)}`,yt&&`thumbColor${capitalize(yt)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return composeClasses(_t,getSliderUtilityClass,dt)},Forward=({children:nt})=>nt,Slider=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiSlider"}),at=useRtl(),{"aria-label":lt,"aria-valuetext":dt,"aria-labelledby":yt,component:vt="span",components:_t={},componentsProps:bt={},color:Mt="primary",classes:Ct,className:Tt,disableSwap:$t=!1,disabled:Rt=!1,getAriaLabel:Et,getAriaValueText:wt,marks:Pt=!1,max:Ft=100,min:Nt=0,name:Ot,onChange:Bt,onChangeCommitted:Xt,orientation:Zt="horizontal",shiftStep:rn=10,size:Gt="medium",step:nn=1,scale:cn=Identity,slotProps:an,slots:mn,tabIndex:En,track:Cn="normal",value:Mn,valueLabelDisplay:un="off",valueLabelFormat:Tn=Identity,...Pn}=st,dn={...st,isRtl:at,max:Ft,min:Nt,classes:Ct,disabled:Rt,disableSwap:$t,orientation:Zt,marks:Pt,color:Mt,size:Gt,step:nn,shiftStep:rn,scale:cn,track:Cn,valueLabelDisplay:un,valueLabelFormat:Tn},{axisProps:Un,getRootProps:qn,getHiddenInputProps:In,getThumbProps:Wn,open:ar,active:fr,axis:mr,focusedThumbIndex:vr,range:Ar,dragging:$r,marks:Mr,values:Jn,trackOffset:hr,trackLeap:wr,getThumbStyle:Nr}=useSlider({...dn,rootRef:rt});dn.marked=Mr.length>0&&Mr.some(Cs=>Cs.label),dn.dragging=$r,dn.focusedThumbIndex=vr;const Fr=useUtilityClasses$8(dn),Yr=(mn==null?void 0:mn.root)??_t.Root??SliderRoot,cs=(mn==null?void 0:mn.rail)??_t.Rail??SliderRail,cr=(mn==null?void 0:mn.track)??_t.Track??SliderTrack,Qn=(mn==null?void 0:mn.thumb)??_t.Thumb??SliderThumb,_r=(mn==null?void 0:mn.valueLabel)??_t.ValueLabel??SliderValueLabel,Ir=(mn==null?void 0:mn.mark)??_t.Mark??SliderMark,pr=(mn==null?void 0:mn.markLabel)??_t.MarkLabel??SliderMarkLabel,Tr=(mn==null?void 0:mn.input)??_t.Input??"input",Wr=(an==null?void 0:an.root)??bt.root,Kn=(an==null?void 0:an.rail)??bt.rail,rr=(an==null?void 0:an.track)??bt.track,ur=(an==null?void 0:an.thumb)??bt.thumb,Sr=(an==null?void 0:an.valueLabel)??bt.valueLabel,gr=(an==null?void 0:an.mark)??bt.mark,Gr=(an==null?void 0:an.markLabel)??bt.markLabel,jr=(an==null?void 0:an.input)??bt.input,er=useSlotProps({elementType:Yr,getSlotProps:qn,externalSlotProps:Wr,externalForwardedProps:Pn,additionalProps:{...shouldSpreadAdditionalProps(Yr)&&{as:vt}},ownerState:{...dn,...Wr==null?void 0:Wr.ownerState},className:[Fr.root,Tt]}),yr=useSlotProps({elementType:cs,externalSlotProps:Kn,ownerState:dn,className:Fr.rail}),Er=useSlotProps({elementType:cr,externalSlotProps:rr,additionalProps:{style:{...Un[mr].offset(hr),...Un[mr].leap(wr)}},ownerState:{...dn,...rr==null?void 0:rr.ownerState},className:Fr.track}),Hr=useSlotProps({elementType:Qn,getSlotProps:Wn,externalSlotProps:ur,ownerState:{...dn,...ur==null?void 0:ur.ownerState},className:Fr.thumb}),lr=useSlotProps({elementType:_r,externalSlotProps:Sr,ownerState:{...dn,...Sr==null?void 0:Sr.ownerState},className:Fr.valueLabel}),Br=useSlotProps({elementType:Ir,externalSlotProps:gr,ownerState:dn,className:Fr.mark}),Hn=useSlotProps({elementType:pr,externalSlotProps:Gr,ownerState:dn,className:Fr.markLabel}),kr=useSlotProps({elementType:Tr,getSlotProps:In,externalSlotProps:jr,ownerState:dn});return jsxRuntimeExports.jsxs(Yr,{...er,children:[jsxRuntimeExports.jsx(cs,{...yr}),jsxRuntimeExports.jsx(cr,{...Er}),Mr.filter(Cs=>Cs.value>=Nt&&Cs.value<=Ft).map((Cs,Fn)=>{const Ur=valueToPercent(Cs.value,Nt,Ft),Vr=Un[mr].offset(Ur);let dr;return Cn===!1?dr=Jn.includes(Cs.value):dr=Cn==="normal"&&(Ar?Cs.value>=Jn[0]&&Cs.value<=Jn[Jn.length-1]:Cs.value<=Jn[0])||Cn==="inverted"&&(Ar?Cs.value<=Jn[0]||Cs.value>=Jn[Jn.length-1]:Cs.value>=Jn[0]),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Ir,{"data-index":Fn,...Br,...!isHostComponent(Ir)&&{markActive:dr},style:{...Vr,...Br.style},className:clsx(Br.className,dr&&Fr.markActive)}),Cs.label!=null?jsxRuntimeExports.jsx(pr,{"aria-hidden":!0,"data-index":Fn,...Hn,...!isHostComponent(pr)&&{markLabelActive:dr},style:{...Vr,...Hn.style},className:clsx(Fr.markLabel,Hn.className,dr&&Fr.markLabelActive),children:Cs.label}):null]},Fn)}),Jn.map((Cs,Fn)=>{const Ur=valueToPercent(Cs,Nt,Ft),Vr=Un[mr].offset(Ur),dr=un==="off"?Forward:_r;return jsxRuntimeExports.jsx(dr,{...!isHostComponent(dr)&&{valueLabelFormat:Tn,valueLabelDisplay:un,value:typeof Tn=="function"?Tn(cn(Cs),Fn):Tn,index:Fn,open:ar===Fn||fr===Fn||un==="on",disabled:Rt},...lr,children:jsxRuntimeExports.jsx(Qn,{"data-index":Fn,...Hr,className:clsx(Fr.thumb,Hr.className,fr===Fn&&Fr.active,vr===Fn&&Fr.focusVisible),style:{...Vr,...Nr(Fn),...Hr.style},children:jsxRuntimeExports.jsx(Tr,{"data-index":Fn,"aria-label":Et?Et(Fn):lt,"aria-valuenow":cn(Cs),"aria-labelledby":yt,"aria-valuetext":wt?wt(cn(Cs),Fn):dt,value:Jn[Fn],...kr})})},Fn)})]})});function getTooltipUtilityClass(nt){return generateUtilityClass("MuiTooltip",nt)}const tooltipClasses=generateUtilityClasses("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function round(nt){return Math.round(nt*1e5)/1e5}const useUtilityClasses$7=nt=>{const{classes:tt,disableInteractive:rt,arrow:st,touch:at,placement:lt}=nt,dt={popper:["popper",!rt&&"popperInteractive",st&&"popperArrow"],tooltip:["tooltip",st&&"tooltipArrow",at&&"touch",`tooltipPlacement${capitalize(lt.split("-")[0])}`],arrow:["arrow"]};return composeClasses(dt,getTooltipUtilityClass,tt)},TooltipPopper=styled(Popper,{name:"MuiTooltip",slot:"Popper",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.popper,!rt.disableInteractive&&tt.popperInteractive,rt.arrow&&tt.popperArrow,!rt.open&&tt.popperClose]}})(memoTheme(({theme:nt})=>({zIndex:(nt.vars||nt).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:tt})=>!tt.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:tt})=>!tt,style:{pointerEvents:"none"}},{props:({ownerState:tt})=>tt.arrow,style:{[`&[data-popper-placement*="bottom"] .${tooltipClasses.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${tooltipClasses.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:tt})=>tt.arrow&&!tt.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:tt})=>tt.arrow&&!!tt.isRtl,style:{[`&[data-popper-placement*="right"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:tt})=>tt.arrow&&!tt.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:tt})=>tt.arrow&&!!tt.isRtl,style:{[`&[data-popper-placement*="left"] .${tooltipClasses.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),TooltipTooltip=styled("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.tooltip,rt.touch&&tt.touch,rt.arrow&&tt.tooltipArrow,tt[`tooltipPlacement${capitalize(rt.placement.split("-")[0])}`]]}})(memoTheme(({theme:nt})=>({backgroundColor:nt.vars?nt.vars.palette.Tooltip.bg:alpha(nt.palette.grey[700],.92),borderRadius:(nt.vars||nt).shape.borderRadius,color:(nt.vars||nt).palette.common.white,fontFamily:nt.typography.fontFamily,padding:"4px 8px",fontSize:nt.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:nt.typography.fontWeightMedium,[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:tt})=>tt.arrow,style:{position:"relative",margin:0}},{props:({ownerState:tt})=>tt.touch,style:{padding:"8px 16px",fontSize:nt.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:nt.typography.fontWeightRegular}},{props:({ownerState:tt})=>!tt.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:tt})=>!tt.isRtl&&tt.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:tt})=>!!tt.isRtl,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:tt})=>!!tt.isRtl&&tt.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${tooltipClasses.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:tt})=>tt.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:tt})=>tt.touch,style:{[`.${tooltipClasses.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),TooltipArrow=styled("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(nt,tt)=>tt.arrow})(memoTheme(({theme:nt})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:nt.vars?nt.vars.palette.Tooltip.bg:alpha(nt.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let hystersisOpen=!1;const hystersisTimer=new Timeout;let cursorPosition={x:0,y:0};function composeEventHandler(nt,tt){return(rt,...st)=>{tt&&tt(rt,...st),nt(rt,...st)}}const Tooltip$1=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiTooltip"}),{arrow:at=!1,children:lt,classes:dt,components:yt={},componentsProps:vt={},describeChild:_t=!1,disableFocusListener:bt=!1,disableHoverListener:Mt=!1,disableInteractive:Ct=!1,disableTouchListener:Tt=!1,enterDelay:$t=100,enterNextDelay:Rt=0,enterTouchDelay:Et=700,followCursor:wt=!1,id:Pt,leaveDelay:Ft=0,leaveTouchDelay:Nt=1500,onClose:Ot,onOpen:Bt,open:Xt,placement:Zt="bottom",PopperComponent:rn,PopperProps:Gt={},slotProps:nn={},slots:cn={},title:an,TransitionComponent:mn,TransitionProps:En,...Cn}=st,Mn=reactExports.isValidElement(lt)?lt:jsxRuntimeExports.jsx("span",{children:lt}),un=useTheme(),Tn=useRtl(),[Pn,dn]=reactExports.useState(),[Un,qn]=reactExports.useState(null),In=reactExports.useRef(!1),Wn=Ct||wt,ar=useTimeout(),fr=useTimeout(),mr=useTimeout(),vr=useTimeout(),[Ar,$r]=useControlled({controlled:Xt,default:!1,name:"Tooltip",state:"open"});let Mr=Ar;const Jn=useId(Pt),hr=reactExports.useRef(),wr=useEventCallback(()=>{hr.current!==void 0&&(document.body.style.WebkitUserSelect=hr.current,hr.current=void 0),vr.clear()});reactExports.useEffect(()=>wr,[wr]);const Nr=Cr=>{hystersisTimer.clear(),hystersisOpen=!0,$r(!0),Bt&&!Mr&&Bt(Cr)},Fr=useEventCallback(Cr=>{hystersisTimer.start(800+Ft,()=>{hystersisOpen=!1}),$r(!1),Ot&&Mr&&Ot(Cr),ar.start(un.transitions.duration.shortest,()=>{In.current=!1})}),Yr=Cr=>{In.current&&Cr.type!=="touchstart"||(Pn&&Pn.removeAttribute("title"),fr.clear(),mr.clear(),$t||hystersisOpen&&Rt?fr.start(hystersisOpen?Rt:$t,()=>{Nr(Cr)}):Nr(Cr))},cs=Cr=>{fr.clear(),mr.start(Ft,()=>{Fr(Cr)})},[,cr]=reactExports.useState(!1),Qn=Cr=>{isFocusVisible(Cr.target)||(cr(!1),cs(Cr))},_r=Cr=>{Pn||dn(Cr.currentTarget),isFocusVisible(Cr.target)&&(cr(!0),Yr(Cr))},Ir=Cr=>{In.current=!0;const hs=Mn.props;hs.onTouchStart&&hs.onTouchStart(Cr)},pr=Cr=>{Ir(Cr),mr.clear(),ar.clear(),wr(),hr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",vr.start(Et,()=>{document.body.style.WebkitUserSelect=hr.current,Yr(Cr)})},Tr=Cr=>{Mn.props.onTouchEnd&&Mn.props.onTouchEnd(Cr),wr(),mr.start(Nt,()=>{Fr(Cr)})};reactExports.useEffect(()=>{if(!Mr)return;function Cr(hs){hs.key==="Escape"&&Fr(hs)}return document.addEventListener("keydown",Cr),()=>{document.removeEventListener("keydown",Cr)}},[Fr,Mr]);const Wr=useForkRef(getReactElementRef(Mn),dn,rt);!an&&an!==0&&(Mr=!1);const Kn=reactExports.useRef(),rr=Cr=>{const hs=Mn.props;hs.onMouseMove&&hs.onMouseMove(Cr),cursorPosition={x:Cr.clientX,y:Cr.clientY},Kn.current&&Kn.current.update()},ur={},Sr=typeof an=="string";_t?(ur.title=!Mr&&Sr&&!Mt?an:null,ur["aria-describedby"]=Mr?Jn:null):(ur["aria-label"]=Sr?an:null,ur["aria-labelledby"]=Mr&&!Sr?Jn:null);const gr={...ur,...Cn,...Mn.props,className:clsx(Cn.className,Mn.props.className),onTouchStart:Ir,ref:Wr,...wt?{onMouseMove:rr}:{}},Gr={};Tt||(gr.onTouchStart=pr,gr.onTouchEnd=Tr),Mt||(gr.onMouseOver=composeEventHandler(Yr,gr.onMouseOver),gr.onMouseLeave=composeEventHandler(cs,gr.onMouseLeave),Wn||(Gr.onMouseOver=Yr,Gr.onMouseLeave=cs)),bt||(gr.onFocus=composeEventHandler(_r,gr.onFocus),gr.onBlur=composeEventHandler(Qn,gr.onBlur),Wn||(Gr.onFocus=_r,Gr.onBlur=Qn));const jr={...st,isRtl:Tn,arrow:at,disableInteractive:Wn,placement:Zt,PopperComponentProp:rn,touch:In.current},er=typeof nn.popper=="function"?nn.popper(jr):nn.popper,yr=reactExports.useMemo(()=>{var hs,ro;let Cr=[{name:"arrow",enabled:!!Un,options:{element:Un,padding:4}}];return(hs=Gt.popperOptions)!=null&&hs.modifiers&&(Cr=Cr.concat(Gt.popperOptions.modifiers)),(ro=er==null?void 0:er.popperOptions)!=null&&ro.modifiers&&(Cr=Cr.concat(er.popperOptions.modifiers)),{...Gt.popperOptions,...er==null?void 0:er.popperOptions,modifiers:Cr}},[Un,Gt.popperOptions,er==null?void 0:er.popperOptions]),Er=useUtilityClasses$7(jr),Hr=typeof nn.transition=="function"?nn.transition(jr):nn.transition,lr={slots:{popper:yt.Popper,transition:yt.Transition??mn,tooltip:yt.Tooltip,arrow:yt.Arrow,...cn},slotProps:{arrow:nn.arrow??vt.arrow,popper:{...Gt,...er??vt.popper},tooltip:nn.tooltip??vt.tooltip,transition:{...En,...Hr??vt.transition}}},[Br,Hn]=useSlot("popper",{elementType:TooltipPopper,externalForwardedProps:lr,ownerState:jr,className:clsx(Er.popper,Gt==null?void 0:Gt.className)}),[kr,Cs]=useSlot("transition",{elementType:Grow,externalForwardedProps:lr,ownerState:jr}),[Fn,Ur]=useSlot("tooltip",{elementType:TooltipTooltip,className:Er.tooltip,externalForwardedProps:lr,ownerState:jr}),[Vr,dr]=useSlot("arrow",{elementType:TooltipArrow,className:Er.arrow,externalForwardedProps:lr,ownerState:jr,ref:qn});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[reactExports.cloneElement(Mn,gr),jsxRuntimeExports.jsx(Br,{as:rn??Popper,placement:Zt,anchorEl:wt?{getBoundingClientRect:()=>({top:cursorPosition.y,left:cursorPosition.x,right:cursorPosition.x,bottom:cursorPosition.y,width:0,height:0})}:Pn,popperRef:Kn,open:Pn?Mr:!1,id:Jn,transition:!0,...Gr,...Hn,popperOptions:yr,children:({TransitionProps:Cr})=>jsxRuntimeExports.jsx(kr,{timeout:un.transitions.duration.shorter,...Cr,...Cs,children:jsxRuntimeExports.jsxs(Fn,{...Ur,children:[an,at?jsxRuntimeExports.jsx(Vr,{...dr}):null]})})})]})}),Stack$5=createStack({createStyledComponent:styled("div",{name:"MuiStack",slot:"Root",overridesResolver:(nt,tt)=>tt.root}),useThemeProps:nt=>useDefaultProps({props:nt,name:"MuiStack"})});function getTabUtilityClass(nt){return generateUtilityClass("MuiTab",nt)}const tabClasses=generateUtilityClasses("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),useUtilityClasses$6=nt=>{const{classes:tt,textColor:rt,fullWidth:st,wrapped:at,icon:lt,label:dt,selected:yt,disabled:vt}=nt,_t={root:["root",lt&&dt&&"labelIcon",`textColor${capitalize(rt)}`,st&&"fullWidth",at&&"wrapped",yt&&"selected",vt&&"disabled"],icon:["iconWrapper","icon"]};return composeClasses(_t,getTabUtilityClass,tt)},TabRoot=styled(ButtonBase,{name:"MuiTab",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.label&&rt.icon&&tt.labelIcon,tt[`textColor${capitalize(rt.textColor)}`],rt.fullWidth&&tt.fullWidth,rt.wrapped&&tt.wrapped,{[`& .${tabClasses.iconWrapper}`]:tt.iconWrapper},{[`& .${tabClasses.icon}`]:tt.icon}]}})(memoTheme(({theme:nt})=>({...nt.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:tt})=>tt.label&&(tt.iconPosition==="top"||tt.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:tt})=>tt.label&&tt.iconPosition!=="top"&&tt.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:tt})=>tt.icon&&tt.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:tt,iconPosition:rt})=>tt.icon&&tt.label&&rt==="top",style:{[`& > .${tabClasses.icon}`]:{marginBottom:6}}},{props:({ownerState:tt,iconPosition:rt})=>tt.icon&&tt.label&&rt==="bottom",style:{[`& > .${tabClasses.icon}`]:{marginTop:6}}},{props:({ownerState:tt,iconPosition:rt})=>tt.icon&&tt.label&&rt==="start",style:{[`& > .${tabClasses.icon}`]:{marginRight:nt.spacing(1)}}},{props:({ownerState:tt,iconPosition:rt})=>tt.icon&&tt.label&&rt==="end",style:{[`& > .${tabClasses.icon}`]:{marginLeft:nt.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${tabClasses.selected}`]:{opacity:1},[`&.${tabClasses.disabled}`]:{opacity:(nt.vars||nt).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(nt.vars||nt).palette.text.secondary,[`&.${tabClasses.selected}`]:{color:(nt.vars||nt).palette.primary.main},[`&.${tabClasses.disabled}`]:{color:(nt.vars||nt).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(nt.vars||nt).palette.text.secondary,[`&.${tabClasses.selected}`]:{color:(nt.vars||nt).palette.secondary.main},[`&.${tabClasses.disabled}`]:{color:(nt.vars||nt).palette.text.disabled}}},{props:({ownerState:tt})=>tt.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:tt})=>tt.wrapped,style:{fontSize:nt.typography.pxToRem(12)}}]}))),Tab=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiTab"}),{className:at,disabled:lt=!1,disableFocusRipple:dt=!1,fullWidth:yt,icon:vt,iconPosition:_t="top",indicator:bt,label:Mt,onChange:Ct,onClick:Tt,onFocus:$t,selected:Rt,selectionFollowsFocus:Et,textColor:wt="inherit",value:Pt,wrapped:Ft=!1,...Nt}=st,Ot={...st,disabled:lt,disableFocusRipple:dt,selected:Rt,icon:!!vt,iconPosition:_t,label:!!Mt,fullWidth:yt,textColor:wt,wrapped:Ft},Bt=useUtilityClasses$6(Ot),Xt=vt&&Mt&&reactExports.isValidElement(vt)?reactExports.cloneElement(vt,{className:clsx(Bt.icon,vt.props.className)}):vt,Zt=Gt=>{!Rt&&Ct&&Ct(Gt,Pt),Tt&&Tt(Gt)},rn=Gt=>{Et&&!Rt&&Ct&&Ct(Gt,Pt),$t&&$t(Gt)};return jsxRuntimeExports.jsxs(TabRoot,{focusRipple:!dt,className:clsx(Bt.root,at),ref:rt,role:"tab","aria-selected":Rt,disabled:lt,onClick:Zt,onFocus:rn,ownerState:Ot,tabIndex:Rt?0:-1,...Nt,children:[_t==="top"||_t==="start"?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[Xt,Mt]}):jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[Mt,Xt]}),bt]})});function getToolbarUtilityClass(nt){return generateUtilityClass("MuiToolbar",nt)}generateUtilityClasses("MuiToolbar",["root","gutters","regular","dense"]);const useUtilityClasses$5=nt=>{const{classes:tt,disableGutters:rt,variant:st}=nt;return composeClasses({root:["root",!rt&&"gutters",st]},getToolbarUtilityClass,tt)},ToolbarRoot=styled("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,!rt.disableGutters&&tt.gutters,tt[rt.variant]]}})(memoTheme(({theme:nt})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:tt})=>!tt.disableGutters,style:{paddingLeft:nt.spacing(2),paddingRight:nt.spacing(2),[nt.breakpoints.up("sm")]:{paddingLeft:nt.spacing(3),paddingRight:nt.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:nt.mixins.toolbar}]}))),Toolbar=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiToolbar"}),{className:at,component:lt="div",disableGutters:dt=!1,variant:yt="regular",...vt}=st,_t={...st,component:lt,disableGutters:dt,variant:yt},bt=useUtilityClasses$5(_t);return jsxRuntimeExports.jsx(ToolbarRoot,{as:lt,className:clsx(bt.root,at),ref:rt,ownerState:_t,...vt})}),KeyboardArrowLeft=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),KeyboardArrowRight=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function easeInOutSin(nt){return(1+Math.sin(Math.PI*nt-Math.PI/2))/2}function animate(nt,tt,rt,st={},at=()=>{}){const{ease:lt=easeInOutSin,duration:dt=300}=st;let yt=null;const vt=tt[nt];let _t=!1;const bt=()=>{_t=!0},Mt=Ct=>{if(_t){at(new Error("Animation cancelled"));return}yt===null&&(yt=Ct);const Tt=Math.min(1,(Ct-yt)/dt);if(tt[nt]=lt(Tt)*(rt-vt)+vt,Tt>=1){requestAnimationFrame(()=>{at(null)});return}requestAnimationFrame(Mt)};return vt===rt?(at(new Error("Element already at target position")),bt):(requestAnimationFrame(Mt),bt)}const styles={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function ScrollbarSize(nt){const{onChange:tt,...rt}=nt,st=reactExports.useRef(),at=reactExports.useRef(null),lt=()=>{st.current=at.current.offsetHeight-at.current.clientHeight};return useEnhancedEffect(()=>{const dt=debounce$2(()=>{const vt=st.current;lt(),vt!==st.current&&tt(st.current)}),yt=ownerWindow(at.current);return yt.addEventListener("resize",dt),()=>{dt.clear(),yt.removeEventListener("resize",dt)}},[tt]),reactExports.useEffect(()=>{lt(),tt(st.current)},[tt]),jsxRuntimeExports.jsx("div",{style:styles,...rt,ref:at})}function getTabScrollButtonUtilityClass(nt){return generateUtilityClass("MuiTabScrollButton",nt)}const tabScrollButtonClasses=generateUtilityClasses("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),useUtilityClasses$4=nt=>{const{classes:tt,orientation:rt,disabled:st}=nt;return composeClasses({root:["root",rt,st&&"disabled"]},getTabScrollButtonUtilityClass,tt)},TabScrollButtonRoot=styled(ButtonBase,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,rt.orientation&&tt[rt.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${tabScrollButtonClasses.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),TabScrollButton=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiTabScrollButton"}),{className:at,slots:lt={},slotProps:dt={},direction:yt,orientation:vt,disabled:_t,...bt}=st,Mt=useRtl(),Ct={isRtl:Mt,...st},Tt=useUtilityClasses$4(Ct),$t=lt.StartScrollButtonIcon??KeyboardArrowLeft,Rt=lt.EndScrollButtonIcon??KeyboardArrowRight,Et=useSlotProps({elementType:$t,externalSlotProps:dt.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:Ct}),wt=useSlotProps({elementType:Rt,externalSlotProps:dt.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:Ct});return jsxRuntimeExports.jsx(TabScrollButtonRoot,{component:"div",className:clsx(Tt.root,at),ref:rt,role:null,ownerState:Ct,tabIndex:null,...bt,style:{...bt.style,...vt==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${Mt?-90:90}deg)`}},children:yt==="left"?jsxRuntimeExports.jsx($t,{...Et}):jsxRuntimeExports.jsx(Rt,{...wt})})});function getTabsUtilityClass(nt){return generateUtilityClass("MuiTabs",nt)}const tabsClasses=generateUtilityClasses("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),nextItem=(nt,tt)=>nt===tt?nt.firstChild:tt&&tt.nextElementSibling?tt.nextElementSibling:nt.firstChild,previousItem=(nt,tt)=>nt===tt?nt.lastChild:tt&&tt.previousElementSibling?tt.previousElementSibling:nt.lastChild,moveFocus=(nt,tt,rt)=>{let st=!1,at=rt(nt,tt);for(;at;){if(at===nt.firstChild){if(st)return;st=!0}const lt=at.disabled||at.getAttribute("aria-disabled")==="true";if(!at.hasAttribute("tabindex")||lt)at=rt(nt,at);else{at.focus();return}}},useUtilityClasses$3=nt=>{const{vertical:tt,fixed:rt,hideScrollbar:st,scrollableX:at,scrollableY:lt,centered:dt,scrollButtonsHideMobile:yt,classes:vt}=nt;return composeClasses({root:["root",tt&&"vertical"],scroller:["scroller",rt&&"fixed",st&&"hideScrollbar",at&&"scrollableX",lt&&"scrollableY"],flexContainer:["flexContainer",tt&&"flexContainerVertical",dt&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",yt&&"scrollButtonsHideMobile"],scrollableX:[at&&"scrollableX"],hideScrollbar:[st&&"hideScrollbar"]},getTabsUtilityClass,vt)},TabsRoot=styled("div",{name:"MuiTabs",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[{[`& .${tabsClasses.scrollButtons}`]:tt.scrollButtons},{[`& .${tabsClasses.scrollButtons}`]:rt.scrollButtonsHideMobile&&tt.scrollButtonsHideMobile},tt.root,rt.vertical&&tt.vertical]}})(memoTheme(({theme:nt})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:tt})=>tt.vertical,style:{flexDirection:"column"}},{props:({ownerState:tt})=>tt.scrollButtonsHideMobile,style:{[`& .${tabsClasses.scrollButtons}`]:{[nt.breakpoints.down("sm")]:{display:"none"}}}}]}))),TabsScroller=styled("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.scroller,rt.fixed&&tt.fixed,rt.hideScrollbar&&tt.hideScrollbar,rt.scrollableX&&tt.scrollableX,rt.scrollableY&&tt.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:nt})=>nt.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:nt})=>nt.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:nt})=>nt.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:nt})=>nt.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),FlexContainer=styled("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.flexContainer,rt.vertical&&tt.flexContainerVertical,rt.centered&&tt.centered]}})({display:"flex",variants:[{props:({ownerState:nt})=>nt.vertical,style:{flexDirection:"column"}},{props:({ownerState:nt})=>nt.centered,style:{justifyContent:"center"}}]}),TabsIndicator=styled("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(nt,tt)=>tt.indicator})(memoTheme(({theme:nt})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:nt.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(nt.vars||nt).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(nt.vars||nt).palette.secondary.main}},{props:({ownerState:tt})=>tt.vertical,style:{height:"100%",width:2,right:0}}]}))),TabsScrollbarSize=styled(ScrollbarSize)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),defaultIndicatorStyle={},Tabs=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiTabs"}),at=useTheme(),lt=useRtl(),{"aria-label":dt,"aria-labelledby":yt,action:vt,centered:_t=!1,children:bt,className:Mt,component:Ct="div",allowScrollButtonsMobile:Tt=!1,indicatorColor:$t="primary",onChange:Rt,orientation:Et="horizontal",ScrollButtonComponent:wt=TabScrollButton,scrollButtons:Pt="auto",selectionFollowsFocus:Ft,slots:Nt={},slotProps:Ot={},TabIndicatorProps:Bt={},TabScrollButtonProps:Xt={},textColor:Zt="primary",value:rn,variant:Gt="standard",visibleScrollbar:nn=!1,...cn}=st,an=Gt==="scrollable",mn=Et==="vertical",En=mn?"scrollTop":"scrollLeft",Cn=mn?"top":"left",Mn=mn?"bottom":"right",un=mn?"clientHeight":"clientWidth",Tn=mn?"height":"width",Pn={...st,component:Ct,allowScrollButtonsMobile:Tt,indicatorColor:$t,orientation:Et,vertical:mn,scrollButtons:Pt,textColor:Zt,variant:Gt,visibleScrollbar:nn,fixed:!an,hideScrollbar:an&&!nn,scrollableX:an&&!mn,scrollableY:an&&mn,centered:_t&&!an,scrollButtonsHideMobile:!Tt},dn=useUtilityClasses$3(Pn),Un=useSlotProps({elementType:Nt.StartScrollButtonIcon,externalSlotProps:Ot.startScrollButtonIcon,ownerState:Pn}),qn=useSlotProps({elementType:Nt.EndScrollButtonIcon,externalSlotProps:Ot.endScrollButtonIcon,ownerState:Pn}),[In,Wn]=reactExports.useState(!1),[ar,fr]=reactExports.useState(defaultIndicatorStyle),[mr,vr]=reactExports.useState(!1),[Ar,$r]=reactExports.useState(!1),[Mr,Jn]=reactExports.useState(!1),[hr,wr]=reactExports.useState({overflow:"hidden",scrollbarWidth:0}),Nr=new Map,Fr=reactExports.useRef(null),Yr=reactExports.useRef(null),cs=()=>{const yr=Fr.current;let Er;if(yr){const lr=yr.getBoundingClientRect();Er={clientWidth:yr.clientWidth,scrollLeft:yr.scrollLeft,scrollTop:yr.scrollTop,scrollWidth:yr.scrollWidth,top:lr.top,bottom:lr.bottom,left:lr.left,right:lr.right}}let Hr;if(yr&&rn!==!1){const lr=Yr.current.children;if(lr.length>0){const Br=lr[Nr.get(rn)];Hr=Br?Br.getBoundingClientRect():null}}return{tabsMeta:Er,tabMeta:Hr}},cr=useEventCallback(()=>{const{tabsMeta:yr,tabMeta:Er}=cs();let Hr=0,lr;mn?(lr="top",Er&&yr&&(Hr=Er.top-yr.top+yr.scrollTop)):(lr=lt?"right":"left",Er&&yr&&(Hr=(lt?-1:1)*(Er[lr]-yr[lr]+yr.scrollLeft)));const Br={[lr]:Hr,[Tn]:Er?Er[Tn]:0};if(typeof ar[lr]!="number"||typeof ar[Tn]!="number")fr(Br);else{const Hn=Math.abs(ar[lr]-Br[lr]),kr=Math.abs(ar[Tn]-Br[Tn]);(Hn>=1||kr>=1)&&fr(Br)}}),Qn=(yr,{animation:Er=!0}={})=>{Er?animate(En,Fr.current,yr,{duration:at.transitions.duration.standard}):Fr.current[En]=yr},_r=yr=>{let Er=Fr.current[En];mn?Er+=yr:Er+=yr*(lt?-1:1),Qn(Er)},Ir=()=>{const yr=Fr.current[un];let Er=0;const Hr=Array.from(Yr.current.children);for(let lr=0;lr<Hr.length;lr+=1){const Br=Hr[lr];if(Er+Br[un]>yr){lr===0&&(Er=yr);break}Er+=Br[un]}return Er},pr=()=>{_r(-1*Ir())},Tr=()=>{_r(Ir())},Wr=reactExports.useCallback(yr=>{wr({overflow:null,scrollbarWidth:yr})},[]),Kn=()=>{const yr={};yr.scrollbarSizeListener=an?jsxRuntimeExports.jsx(TabsScrollbarSize,{onChange:Wr,className:clsx(dn.scrollableX,dn.hideScrollbar)}):null;const Hr=an&&(Pt==="auto"&&(mr||Ar)||Pt===!0);return yr.scrollButtonStart=Hr?jsxRuntimeExports.jsx(wt,{slots:{StartScrollButtonIcon:Nt.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Un},orientation:Et,direction:lt?"right":"left",onClick:pr,disabled:!mr,...Xt,className:clsx(dn.scrollButtons,Xt.className)}):null,yr.scrollButtonEnd=Hr?jsxRuntimeExports.jsx(wt,{slots:{EndScrollButtonIcon:Nt.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:qn},orientation:Et,direction:lt?"left":"right",onClick:Tr,disabled:!Ar,...Xt,className:clsx(dn.scrollButtons,Xt.className)}):null,yr},rr=useEventCallback(yr=>{const{tabsMeta:Er,tabMeta:Hr}=cs();if(!(!Hr||!Er)){if(Hr[Cn]<Er[Cn]){const lr=Er[En]+(Hr[Cn]-Er[Cn]);Qn(lr,{animation:yr})}else if(Hr[Mn]>Er[Mn]){const lr=Er[En]+(Hr[Mn]-Er[Mn]);Qn(lr,{animation:yr})}}}),ur=useEventCallback(()=>{an&&Pt!==!1&&Jn(!Mr)});reactExports.useEffect(()=>{const yr=debounce$2(()=>{Fr.current&&cr()});let Er;const Hr=Hn=>{Hn.forEach(kr=>{kr.removedNodes.forEach(Cs=>{Er==null||Er.unobserve(Cs)}),kr.addedNodes.forEach(Cs=>{Er==null||Er.observe(Cs)})}),yr(),ur()},lr=ownerWindow(Fr.current);lr.addEventListener("resize",yr);let Br;return typeof ResizeObserver<"u"&&(Er=new ResizeObserver(yr),Array.from(Yr.current.children).forEach(Hn=>{Er.observe(Hn)})),typeof MutationObserver<"u"&&(Br=new MutationObserver(Hr),Br.observe(Yr.current,{childList:!0})),()=>{yr.clear(),lr.removeEventListener("resize",yr),Br==null||Br.disconnect(),Er==null||Er.disconnect()}},[cr,ur]),reactExports.useEffect(()=>{const yr=Array.from(Yr.current.children),Er=yr.length;if(typeof IntersectionObserver<"u"&&Er>0&&an&&Pt!==!1){const Hr=yr[0],lr=yr[Er-1],Br={root:Fr.current,threshold:.99},Hn=Ur=>{vr(!Ur[0].isIntersecting)},kr=new IntersectionObserver(Hn,Br);kr.observe(Hr);const Cs=Ur=>{$r(!Ur[0].isIntersecting)},Fn=new IntersectionObserver(Cs,Br);return Fn.observe(lr),()=>{kr.disconnect(),Fn.disconnect()}}},[an,Pt,Mr,bt==null?void 0:bt.length]),reactExports.useEffect(()=>{Wn(!0)},[]),reactExports.useEffect(()=>{cr()}),reactExports.useEffect(()=>{rr(defaultIndicatorStyle!==ar)},[rr,ar]),reactExports.useImperativeHandle(vt,()=>({updateIndicator:cr,updateScrollButtons:ur}),[cr,ur]);const Sr=jsxRuntimeExports.jsx(TabsIndicator,{...Bt,className:clsx(dn.indicator,Bt.className),ownerState:Pn,style:{...ar,...Bt.style}});let gr=0;const Gr=reactExports.Children.map(bt,yr=>{if(!reactExports.isValidElement(yr))return null;const Er=yr.props.value===void 0?gr:yr.props.value;Nr.set(Er,gr);const Hr=Er===rn;return gr+=1,reactExports.cloneElement(yr,{fullWidth:Gt==="fullWidth",indicator:Hr&&!In&&Sr,selected:Hr,selectionFollowsFocus:Ft,onChange:Rt,textColor:Zt,value:Er,...gr===1&&rn===!1&&!yr.props.tabIndex?{tabIndex:0}:{}})}),jr=yr=>{const Er=Yr.current,Hr=ownerDocument(Er).activeElement;if(Hr.getAttribute("role")!=="tab")return;let Br=Et==="horizontal"?"ArrowLeft":"ArrowUp",Hn=Et==="horizontal"?"ArrowRight":"ArrowDown";switch(Et==="horizontal"&&lt&&(Br="ArrowRight",Hn="ArrowLeft"),yr.key){case Br:yr.preventDefault(),moveFocus(Er,Hr,previousItem);break;case Hn:yr.preventDefault(),moveFocus(Er,Hr,nextItem);break;case"Home":yr.preventDefault(),moveFocus(Er,null,nextItem);break;case"End":yr.preventDefault(),moveFocus(Er,null,previousItem);break}},er=Kn();return jsxRuntimeExports.jsxs(TabsRoot,{className:clsx(dn.root,Mt),ownerState:Pn,ref:rt,as:Ct,...cn,children:[er.scrollButtonStart,er.scrollbarSizeListener,jsxRuntimeExports.jsxs(TabsScroller,{className:dn.scroller,ownerState:Pn,style:{overflow:hr.overflow,[mn?`margin${lt?"Left":"Right"}`:"marginBottom"]:nn?void 0:-hr.scrollbarWidth},ref:Fr,children:[jsxRuntimeExports.jsx(FlexContainer,{"aria-label":dt,"aria-labelledby":yt,"aria-orientation":Et==="vertical"?"vertical":null,className:dn.flexContainer,ownerState:Pn,onKeyDown:jr,ref:Yr,role:"tablist",children:Gr}),In&&Sr]}),er.scrollButtonEnd]})});function getTextFieldUtilityClass(nt){return generateUtilityClass("MuiTextField",nt)}generateUtilityClasses("MuiTextField",["root"]);const variantComponent={standard:Input,filled:FilledInput,outlined:OutlinedInput},useUtilityClasses$2=nt=>{const{classes:tt}=nt;return composeClasses({root:["root"]},getTextFieldUtilityClass,tt)},TextFieldRoot=styled(FormControl,{name:"MuiTextField",slot:"Root",overridesResolver:(nt,tt)=>tt.root})({}),TextField=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiTextField"}),{autoComplete:at,autoFocus:lt=!1,children:dt,className:yt,color:vt="primary",defaultValue:_t,disabled:bt=!1,error:Mt=!1,FormHelperTextProps:Ct,fullWidth:Tt=!1,helperText:$t,id:Rt,InputLabelProps:Et,inputProps:wt,InputProps:Pt,inputRef:Ft,label:Nt,maxRows:Ot,minRows:Bt,multiline:Xt=!1,name:Zt,onBlur:rn,onChange:Gt,onFocus:nn,placeholder:cn,required:an=!1,rows:mn,select:En=!1,SelectProps:Cn,slots:Mn={},slotProps:un={},type:Tn,value:Pn,variant:dn="outlined",...Un}=st,qn={...st,autoFocus:lt,color:vt,disabled:bt,error:Mt,fullWidth:Tt,multiline:Xt,required:an,select:En,variant:dn},In=useUtilityClasses$2(qn),Wn=useId(Rt),ar=$t&&Wn?`${Wn}-helper-text`:void 0,fr=Nt&&Wn?`${Wn}-label`:void 0,mr=variantComponent[dn],vr={slots:Mn,slotProps:{input:Pt,inputLabel:Et,htmlInput:wt,formHelperText:Ct,select:Cn,...un}},Ar={},$r=vr.slotProps.inputLabel;dn==="outlined"&&($r&&typeof $r.shrink<"u"&&(Ar.notched=$r.shrink),Ar.label=Nt),En&&((!Cn||!Cn.native)&&(Ar.id=void 0),Ar["aria-describedby"]=void 0);const[Mr,Jn]=useSlot("input",{elementType:mr,externalForwardedProps:vr,additionalProps:Ar,ownerState:qn}),[hr,wr]=useSlot("inputLabel",{elementType:InputLabel,externalForwardedProps:vr,ownerState:qn}),[Nr,Fr]=useSlot("htmlInput",{elementType:"input",externalForwardedProps:vr,ownerState:qn}),[Yr,cs]=useSlot("formHelperText",{elementType:FormHelperText,externalForwardedProps:vr,ownerState:qn}),[cr,Qn]=useSlot("select",{elementType:Select,externalForwardedProps:vr,ownerState:qn}),_r=jsxRuntimeExports.jsx(Mr,{"aria-describedby":ar,autoComplete:at,autoFocus:lt,defaultValue:_t,fullWidth:Tt,multiline:Xt,name:Zt,rows:mn,maxRows:Ot,minRows:Bt,type:Tn,value:Pn,id:Wn,inputRef:Ft,onBlur:rn,onChange:Gt,onFocus:nn,placeholder:cn,inputProps:Fr,slots:{input:Mn.htmlInput?Nr:void 0},...Jn});return jsxRuntimeExports.jsxs(TextFieldRoot,{className:clsx(In.root,yt),disabled:bt,error:Mt,fullWidth:Tt,ref:rt,required:an,color:vt,variant:dn,ownerState:qn,...Un,children:[Nt!=null&&Nt!==""&&jsxRuntimeExports.jsx(hr,{htmlFor:Wn,id:fr,...wr,children:Nt}),En?jsxRuntimeExports.jsx(cr,{"aria-describedby":ar,id:Wn,labelId:fr,value:Pn,input:_r,...Qn,children:dt}):_r,$t&&jsxRuntimeExports.jsx(Yr,{id:ar,...cs,children:$t})]})});function getToggleButtonUtilityClass(nt){return generateUtilityClass("MuiToggleButton",nt)}const toggleButtonClasses=generateUtilityClasses("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),ToggleButtonGroupContext=reactExports.createContext({}),ToggleButtonGroupButtonContext=reactExports.createContext(void 0);function isValueSelected(nt,tt){return tt===void 0||nt===void 0?!1:Array.isArray(tt)?tt.includes(nt):nt===tt}const useUtilityClasses$1=nt=>{const{classes:tt,fullWidth:rt,selected:st,disabled:at,size:lt,color:dt}=nt,yt={root:["root",st&&"selected",at&&"disabled",rt&&"fullWidth",`size${capitalize(lt)}`,dt]};return composeClasses(yt,getToggleButtonUtilityClass,tt)},ToggleButtonRoot=styled(ButtonBase,{name:"MuiToggleButton",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[tt.root,tt[`size${capitalize(rt.size)}`]]}})(memoTheme(({theme:nt})=>({...nt.typography.button,borderRadius:(nt.vars||nt).shape.borderRadius,padding:11,border:`1px solid ${(nt.vars||nt).palette.divider}`,color:(nt.vars||nt).palette.action.active,[`&.${toggleButtonClasses.disabled}`]:{color:(nt.vars||nt).palette.action.disabled,border:`1px solid ${(nt.vars||nt).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:nt.vars?`rgba(${nt.vars.palette.text.primaryChannel} / ${nt.vars.palette.action.hoverOpacity})`:alpha(nt.palette.text.primary,nt.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${toggleButtonClasses.selected}`]:{color:(nt.vars||nt).palette.text.primary,backgroundColor:nt.vars?`rgba(${nt.vars.palette.text.primaryChannel} / ${nt.vars.palette.action.selectedOpacity})`:alpha(nt.palette.text.primary,nt.palette.action.selectedOpacity),"&:hover":{backgroundColor:nt.vars?`rgba(${nt.vars.palette.text.primaryChannel} / calc(${nt.vars.palette.action.selectedOpacity} + ${nt.vars.palette.action.hoverOpacity}))`:alpha(nt.palette.text.primary,nt.palette.action.selectedOpacity+nt.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:nt.vars?`rgba(${nt.vars.palette.text.primaryChannel} / ${nt.vars.palette.action.selectedOpacity})`:alpha(nt.palette.text.primary,nt.palette.action.selectedOpacity)}}}}},...Object.entries(nt.palette).filter(createSimplePaletteValueFilter()).map(([tt])=>({props:{color:tt},style:{[`&.${toggleButtonClasses.selected}`]:{color:(nt.vars||nt).palette[tt].main,backgroundColor:nt.vars?`rgba(${nt.vars.palette[tt].mainChannel} / ${nt.vars.palette.action.selectedOpacity})`:alpha(nt.palette[tt].main,nt.palette.action.selectedOpacity),"&:hover":{backgroundColor:nt.vars?`rgba(${nt.vars.palette[tt].mainChannel} / calc(${nt.vars.palette.action.selectedOpacity} + ${nt.vars.palette.action.hoverOpacity}))`:alpha(nt.palette[tt].main,nt.palette.action.selectedOpacity+nt.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:nt.vars?`rgba(${nt.vars.palette[tt].mainChannel} / ${nt.vars.palette.action.selectedOpacity})`:alpha(nt.palette[tt].main,nt.palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:nt.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:nt.typography.pxToRem(15)}}]}))),ToggleButton=reactExports.forwardRef(function(tt,rt){const{value:st,...at}=reactExports.useContext(ToggleButtonGroupContext),lt=reactExports.useContext(ToggleButtonGroupButtonContext),dt=resolveProps({...at,selected:isValueSelected(tt.value,st)},tt),yt=useDefaultProps({props:dt,name:"MuiToggleButton"}),{children:vt,className:_t,color:bt="standard",disabled:Mt=!1,disableFocusRipple:Ct=!1,fullWidth:Tt=!1,onChange:$t,onClick:Rt,selected:Et,size:wt="medium",value:Pt,...Ft}=yt,Nt={...yt,color:bt,disabled:Mt,disableFocusRipple:Ct,fullWidth:Tt,size:wt},Ot=useUtilityClasses$1(Nt),Bt=Zt=>{Rt&&(Rt(Zt,Pt),Zt.defaultPrevented)||$t&&$t(Zt,Pt)},Xt=lt||"";return jsxRuntimeExports.jsx(ToggleButtonRoot,{className:clsx(at.className,Ot.root,_t,Xt),disabled:Mt,focusRipple:!Ct,ref:rt,onClick:Bt,onChange:$t,value:Pt,ownerState:Nt,"aria-pressed":Et,...Ft,children:vt})});function getToggleButtonGroupUtilityClass(nt){return generateUtilityClass("MuiToggleButtonGroup",nt)}const toggleButtonGroupClasses=generateUtilityClasses("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),useUtilityClasses=nt=>{const{classes:tt,orientation:rt,fullWidth:st,disabled:at}=nt,lt={root:["root",rt,st&&"fullWidth"],grouped:["grouped",`grouped${capitalize(rt)}`,at&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return composeClasses(lt,getToggleButtonGroupUtilityClass,tt)},ToggleButtonGroupRoot=styled("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(nt,tt)=>{const{ownerState:rt}=nt;return[{[`& .${toggleButtonGroupClasses.grouped}`]:tt.grouped},{[`& .${toggleButtonGroupClasses.grouped}`]:tt[`grouped${capitalize(rt.orientation)}`]},{[`& .${toggleButtonGroupClasses.firstButton}`]:tt.firstButton},{[`& .${toggleButtonGroupClasses.lastButton}`]:tt.lastButton},{[`& .${toggleButtonGroupClasses.middleButton}`]:tt.middleButton},tt.root,rt.orientation==="vertical"&&tt.vertical,rt.fullWidth&&tt.fullWidth]}})(memoTheme(({theme:nt})=>({display:"inline-flex",borderRadius:(nt.vars||nt).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${toggleButtonGroupClasses.grouped}`]:{[`&.${toggleButtonGroupClasses.selected} + .${toggleButtonGroupClasses.grouped}.${toggleButtonGroupClasses.selected}`]:{borderTop:0,marginTop:0}},[`& .${toggleButtonGroupClasses.firstButton},& .${toggleButtonGroupClasses.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton},& .${toggleButtonGroupClasses.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton}.${toggleButtonClasses.disabled},& .${toggleButtonGroupClasses.middleButton}.${toggleButtonClasses.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${toggleButtonGroupClasses.grouped}`]:{[`&.${toggleButtonGroupClasses.selected} + .${toggleButtonGroupClasses.grouped}.${toggleButtonGroupClasses.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${toggleButtonGroupClasses.firstButton},& .${toggleButtonGroupClasses.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${toggleButtonGroupClasses.lastButton},& .${toggleButtonGroupClasses.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${toggleButtonGroupClasses.lastButton}.${toggleButtonClasses.disabled},& .${toggleButtonGroupClasses.middleButton}.${toggleButtonClasses.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),ToggleButtonGroup=reactExports.forwardRef(function(tt,rt){const st=useDefaultProps({props:tt,name:"MuiToggleButtonGroup"}),{children:at,className:lt,color:dt="standard",disabled:yt=!1,exclusive:vt=!1,fullWidth:_t=!1,onChange:bt,orientation:Mt="horizontal",size:Ct="medium",value:Tt,...$t}=st,Rt={...st,disabled:yt,fullWidth:_t,orientation:Mt,size:Ct},Et=useUtilityClasses(Rt),wt=reactExports.useCallback((Xt,Zt)=>{if(!bt)return;const rn=Tt&&Tt.indexOf(Zt);let Gt;Tt&&rn>=0?(Gt=Tt.slice(),Gt.splice(rn,1)):Gt=Tt?Tt.concat(Zt):[Zt],bt(Xt,Gt)},[bt,Tt]),Pt=reactExports.useCallback((Xt,Zt)=>{bt&&bt(Xt,Tt===Zt?null:Zt)},[bt,Tt]),Ft=reactExports.useMemo(()=>({className:Et.grouped,onChange:vt?Pt:wt,value:Tt,size:Ct,fullWidth:_t,color:dt,disabled:yt}),[Et.grouped,vt,Pt,wt,Tt,Ct,_t,dt,yt]),Nt=getValidReactChildren(at),Ot=Nt.length,Bt=Xt=>{const Zt=Xt===0,rn=Xt===Ot-1;return Zt&&rn?"":Zt?Et.firstButton:rn?Et.lastButton:Et.middleButton};return jsxRuntimeExports.jsx(ToggleButtonGroupRoot,{role:"group",className:clsx(Et.root,lt),ref:rt,ownerState:Rt,...$t,children:jsxRuntimeExports.jsx(ToggleButtonGroupContext.Provider,{value:Ft,children:Nt.map((Xt,Zt)=>jsxRuntimeExports.jsx(ToggleButtonGroupButtonContext.Provider,{value:Bt(Zt),children:Xt},Zt))})})});var DefaultContext$1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext$1=ReactExports.createContext&&ReactExports.createContext(DefaultContext$1),_excluded$e=["attr","size","title"];function _objectWithoutProperties$1(nt,tt){if(nt==null)return{};var rt=_objectWithoutPropertiesLoose$e(nt,tt),st,at;if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(nt);for(at=0;at<lt.length;at++)st=lt[at],!(tt.indexOf(st)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,st)&&(rt[st]=nt[st])}return rt}function _objectWithoutPropertiesLoose$e(nt,tt){if(nt==null)return{};var rt={};for(var st in nt)if(Object.prototype.hasOwnProperty.call(nt,st)){if(tt.indexOf(st)>=0)continue;rt[st]=nt[st]}return rt}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$h.apply(this,arguments)}function ownKeys$1(nt,tt){var rt=Object.keys(nt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(nt);tt&&(st=st.filter(function(at){return Object.getOwnPropertyDescriptor(nt,at).enumerable})),rt.push.apply(rt,st)}return rt}function _objectSpread$1(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt]!=null?arguments[tt]:{};tt%2?ownKeys$1(Object(rt),!0).forEach(function(st){_defineProperty$2(nt,st,rt[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(rt)):ownKeys$1(Object(rt)).forEach(function(st){Object.defineProperty(nt,st,Object.getOwnPropertyDescriptor(rt,st))})}return nt}function _defineProperty$2(nt,tt,rt){return tt=_toPropertyKey$1(tt),tt in nt?Object.defineProperty(nt,tt,{value:rt,enumerable:!0,configurable:!0,writable:!0}):nt[tt]=rt,nt}function _toPropertyKey$1(nt){var tt=_toPrimitive$1(nt,"string");return typeof tt=="symbol"?tt:tt+""}function _toPrimitive$1(nt,tt){if(typeof nt!="object"||!nt)return nt;var rt=nt[Symbol.toPrimitive];if(rt!==void 0){var st=rt.call(nt,tt||"default");if(typeof st!="object")return st;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(nt)}function Tree2Element$1(nt){return nt&&nt.map((tt,rt)=>ReactExports.createElement(tt.tag,_objectSpread$1({key:rt},tt.attr),Tree2Element$1(tt.child)))}function GenIcon$1(nt){return tt=>ReactExports.createElement(IconBase$1,_extends$h({attr:_objectSpread$1({},nt.attr)},tt),Tree2Element$1(nt.child))}function IconBase$1(nt){var tt=rt=>{var{attr:st,size:at,title:lt}=nt,dt=_objectWithoutProperties$1(nt,_excluded$e),yt=at||rt.size||"1em",vt;return rt.className&&(vt=rt.className),nt.className&&(vt=(vt?vt+" ":"")+nt.className),ReactExports.createElement("svg",_extends$h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},rt.attr,st,dt,{className:vt,style:_objectSpread$1(_objectSpread$1({color:nt.color||rt.color},rt.style),nt.style),height:yt,width:yt,xmlns:"http://www.w3.org/2000/svg"}),lt&&ReactExports.createElement("title",null,lt),nt.children)};return IconContext$1!==void 0?ReactExports.createElement(IconContext$1.Consumer,null,rt=>tt(rt)):tt(DefaultContext$1)}function MdDarkMode(nt){return GenIcon$1({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(nt)}function MdLightMode(nt){return GenIcon$1({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(nt)}function ConexsIcon(){return jsxRuntimeExports.jsx(SvgIcon,{fontSize:"large",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128mm",height:"128mm",stroke:"currentColor",strokeWidth:"6",fill:"currentColor",fillOpacity:0,viewBox:"0 0 128 128",version:"1.1",id:"svg8",children:jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("circle",{id:"path10",cx:"45",cy:"45",r:"40",strokeOpacity:.25}),jsxRuntimeExports.jsx("circle",{id:"path10",cx:"45",cy:"45",r:"30",strokeOpacity:.25}),jsxRuntimeExports.jsx("circle",{id:"path10",cx:"45",cy:"45",r:"20",strokeOpacity:.25}),jsxRuntimeExports.jsx("circle",{id:"path10",cx:"78",cy:"45",r:"40",strokeOpacity:.5}),jsxRuntimeExports.jsx("circle",{id:"path10",cx:"78",cy:"45",r:"30",strokeOpacity:.5}),jsxRuntimeExports.jsx("circle",{id:"path10",cx:"78",cy:"45",r:"20",strokeOpacity:.5}),jsxRuntimeExports.jsx("circle",{id:"path10",cx:"68",cy:"78",r:"40"}),jsxRuntimeExports.jsx("circle",{id:"path10",cx:"68",cy:"78",r:"30"}),jsxRuntimeExports.jsx("circle",{id:"path10",cx:"68",cy:"78",r:"20"})]})})})}function Header(nt){const tt={Home:"/",Orca:"/orca"};return jsxRuntimeExports.jsx(AppBar,{style:{position:"static"},children:jsxRuntimeExports.jsxs(Toolbar,{sx:{justifyContent:"space-between",alignItems:"center"},children:[jsxRuntimeExports.jsxs(Stack$5,{direction:"row",alignItems:"center",spacing:2,children:[jsxRuntimeExports.jsx(Box,{children:jsxRuntimeExports.jsx(ConexsIcon,{})}),jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"div",sx:{flexGrow:1},children:"CONEXS Prototypes"}),jsxRuntimeExports.jsx(List,{component:Stack$5,direction:"row",children:Object.entries(tt).map(([rt,st])=>jsxRuntimeExports.jsx(ListItem,{children:jsxRuntimeExports.jsx(ListItemButton,{component:NavLink,to:st,sx:{"&.active":{color:at=>at.palette.text.secondary}},children:jsxRuntimeExports.jsx(ListItemText,{primary:rt})})},rt))})]}),jsxRuntimeExports.jsx(Stack$5,{direction:"row",alignItems:"center",children:jsxRuntimeExports.jsx(Checkbox,{icon:jsxRuntimeExports.jsx(MdLightMode,{}),checkedIcon:jsxRuntimeExports.jsx(MdDarkMode,{}),checked:nt.colorMode==="dark",onChange:nt.toggleColorMode})})]})})}function WelcomePage(){return jsxRuntimeExports.jsx(Container,{maxWidth:"md",sx:{alignSelf:"center",p:"24px"},children:jsxRuntimeExports.jsx(Typography,{variant:"h4",padding:"24px",children:"Prototype web components for user-friendly XAS simulation!"})})}const CircleOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CircleOutlined"),HorizontalRuleOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M4 11h16v2H4z"}),"HorizontalRuleOutlined");function StyleToggle(nt){const tt=(rt,st)=>{st!==null&&nt.setStyle(st)};return jsxRuntimeExports.jsxs(ToggleButtonGroup,{value:nt.style,exclusive:!0,onChange:tt,"aria-label":"Style Choice",children:[jsxRuntimeExports.jsx(Tooltip$1,{title:"Stick Style",arrow:!0,children:jsxRuntimeExports.jsx(ToggleButton,{value:"Stick","aria-label":"Stick",children:jsxRuntimeExports.jsx(HorizontalRuleOutlinedIcon,{})})}),jsxRuntimeExports.jsx(Tooltip$1,{title:"Sphere Style",arrow:!0,children:jsxRuntimeExports.jsx(ToggleButton,{value:"Sphere","aria-label":"Sphere",children:jsxRuntimeExports.jsx(CircleOutlinedIcon,{})})})]})}var _3Dmol={exports:{}};/*!
 * 3dmol v2.4.2
 * JavaScript/TypeScript molecular visualization library
 * Author: David Koes and contributors
 */(function(module,exports){(function(tt,rt){module.exports=rt()})(commonjsGlobal,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{IOBuffer:()=>yt});var st=rt("./node_modules/iobuffer/lib-esm/text.browser.js");const at=1024*8,lt=(()=>{const vt=new Uint8Array(4),_t=new Uint32Array(vt.buffer);return!((_t[0]=1)&vt[0])})(),dt={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class yt{constructor(_t=at,bt={}){let Mt=!1;typeof _t=="number"?_t=new ArrayBuffer(_t):(Mt=!0,this.lastWrittenByte=_t.byteLength);const Ct=bt.offset?bt.offset>>>0:0,Tt=_t.byteLength-Ct;let $t=Ct;(ArrayBuffer.isView(_t)||_t instanceof yt)&&(_t.byteLength!==_t.buffer.byteLength&&($t=_t.byteOffset+Ct),_t=_t.buffer),Mt?this.lastWrittenByte=Tt:this.lastWrittenByte=0,this.buffer=_t,this.length=Tt,this.byteLength=Tt,this.byteOffset=$t,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,$t,Tt),this._mark=0,this._marks=[]}available(_t=1){return this.offset+_t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(_t=1){return this.offset+=_t,this}back(_t=1){return this.offset-=_t,this}seek(_t){return this.offset=_t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const _t=this._marks.pop();if(_t===void 0)throw new Error("Mark stack empty");return this.seek(_t),this}rewind(){return this.offset=0,this}ensureAvailable(_t=1){if(!this.available(_t)){const Mt=(this.offset+_t)*2,Ct=new Uint8Array(Mt);Ct.set(new Uint8Array(this.buffer)),this.buffer=Ct.buffer,this.length=this.byteLength=Mt,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(_t=1){return this.readArray(_t,"uint8")}readArray(_t,bt){const Mt=dt[bt].BYTES_PER_ELEMENT*_t,Ct=this.byteOffset+this.offset,Tt=this.buffer.slice(Ct,Ct+Mt);if(this.littleEndian===lt&&bt!=="uint8"&&bt!=="int8"){const Rt=new Uint8Array(this.buffer.slice(Ct,Ct+Mt));Rt.reverse();const Et=new dt[bt](Rt.buffer);return this.offset+=Mt,Et.reverse(),Et}const $t=new dt[bt](Tt);return this.offset+=Mt,$t}readInt16(){const _t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,_t}readUint16(){const _t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,_t}readInt32(){const _t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,_t}readUint32(){const _t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,_t}readFloat32(){const _t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_t}readFloat64(){const _t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_t}readBigInt64(){const _t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,_t}readBigUint64(){const _t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,_t}readChar(){return String.fromCharCode(this.readInt8())}readChars(_t=1){let bt="";for(let Mt=0;Mt<_t;Mt++)bt+=this.readChar();return bt}readUtf8(_t=1){return(0,st.decode)(this.readBytes(_t))}decodeText(_t=1,bt="utf-8"){return(0,st.decode)(this.readBytes(_t),bt)}writeBoolean(_t){return this.writeUint8(_t?255:0),this}writeInt8(_t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,_t),this._updateLastWrittenByte(),this}writeUint8(_t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,_t),this._updateLastWrittenByte(),this}writeByte(_t){return this.writeUint8(_t)}writeBytes(_t){this.ensureAvailable(_t.length);for(let bt=0;bt<_t.length;bt++)this._data.setUint8(this.offset++,_t[bt]);return this._updateLastWrittenByte(),this}writeInt16(_t){return this.ensureAvailable(2),this._data.setInt16(this.offset,_t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(_t){return this.ensureAvailable(2),this._data.setUint16(this.offset,_t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(_t){return this.ensureAvailable(4),this._data.setInt32(this.offset,_t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(_t){return this.ensureAvailable(4),this._data.setUint32(this.offset,_t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(_t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,_t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(_t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,_t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(_t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,_t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(_t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,_t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(_t){return this.writeUint8(_t.charCodeAt(0))}writeChars(_t){for(let bt=0;bt<_t.length;bt++)this.writeUint8(_t.charCodeAt(bt));return this}writeUtf8(_t){return this.writeBytes((0,st.encode)(_t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},"./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js":function(){(function(nt){if(nt.TextEncoder&&nt.TextDecoder)return!1;function tt(st="utf-8"){if(st!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${st}') is invalid.`)}Object.defineProperty(tt.prototype,"encoding",{value:"utf-8"}),tt.prototype.encode=function(st,at={stream:!1}){if(at.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let lt=0;const dt=st.length;let yt=0,vt=Math.max(32,dt+(dt>>1)+7),_t=new Uint8Array(vt>>3<<3);for(;lt<dt;){let bt=st.charCodeAt(lt++);if(bt>=55296&&bt<=56319){if(lt<dt){const Mt=st.charCodeAt(lt);(Mt&64512)===56320&&(++lt,bt=((bt&1023)<<10)+(Mt&1023)+65536)}if(bt>=55296&&bt<=56319)continue}if(yt+4>_t.length){vt+=8,vt*=1+lt/st.length*2,vt=vt>>3<<3;const Mt=new Uint8Array(vt);Mt.set(_t),_t=Mt}if(bt&4294967168)if(!(bt&4294965248))_t[yt++]=bt>>6&31|192;else if(!(bt&4294901760))_t[yt++]=bt>>12&15|224,_t[yt++]=bt>>6&63|128;else if(!(bt&4292870144))_t[yt++]=bt>>18&7|240,_t[yt++]=bt>>12&63|128,_t[yt++]=bt>>6&63|128;else continue;else{_t[yt++]=bt;continue}_t[yt++]=bt&63|128}return _t.slice(0,yt)};function rt(st="utf-8",at={fatal:!1}){if(st!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${st}') is invalid.`);if(at.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(rt.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(rt.prototype,"fatal",{value:!1}),Object.defineProperty(rt.prototype,"ignoreBOM",{value:!1}),rt.prototype.decode=function(st,at={stream:!1}){if(at.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const lt=new Uint8Array(st);let dt=0;const yt=lt.length,vt=[];for(;dt<yt;){const _t=lt[dt++];if(_t===0)break;if(!(_t&128))vt.push(_t);else if((_t&224)===192){const bt=lt[dt++]&63;vt.push((_t&31)<<6|bt)}else if((_t&240)===224){const bt=lt[dt++]&63,Mt=lt[dt++]&63;vt.push((_t&31)<<12|bt<<6|Mt)}else if((_t&248)===240){const bt=lt[dt++]&63,Mt=lt[dt++]&63,Ct=lt[dt++]&63;let Tt=(_t&7)<<18|bt<<12|Mt<<6|Ct;Tt>65535&&(Tt-=65536,vt.push(Tt>>>10&1023|55296),Tt=56320|Tt&1023),vt.push(Tt)}}return String.fromCharCode.apply(null,vt)},nt.TextEncoder=tt,nt.TextDecoder=rt})(typeof window<"u"?window:typeof self<"u"?self:this)},"./node_modules/iobuffer/lib-esm/text.browser.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{decode:()=>st,encode:()=>lt}),rt("./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js");function st(dt,yt="utf8"){return new TextDecoder(yt).decode(dt)}const at=new TextEncoder;function lt(dt){return at.encode(dt)}},"./node_modules/netcdfjs/lib-esm/data.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{nonRecord:()=>at,record:()=>lt});var st=rt("./node_modules/netcdfjs/lib-esm/types.js");function at(dt,yt){const vt=(0,st.str2num)(yt.type),_t=yt.size/(0,st.num2bytes)(vt),bt=new Array(_t);for(let Mt=0;Mt<_t;Mt++)bt[Mt]=(0,st.readType)(dt,vt,1);return bt}function lt(dt,yt,vt){const _t=(0,st.str2num)(yt.type),bt=yt.size?yt.size/(0,st.num2bytes)(_t):1,Mt=vt.length,Ct=new Array(Mt),Tt=vt.recordStep;if(Tt)for(let $t=0;$t<Mt;$t++){const Rt=dt.offset;Ct[$t]=(0,st.readType)(dt,_t,bt),dt.seek(Rt+Tt)}else throw new Error("recordDimension.recordStep is undefined");return Ct}},"./node_modules/netcdfjs/lib-esm/header.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{header:()=>bt});var st=rt("./node_modules/netcdfjs/lib-esm/types.js"),at=rt("./node_modules/netcdfjs/lib-esm/utils.js");const lt=0,dt=10,yt=11,vt=12,_t=0;function bt($t,Rt){const Et={version:Rt},wt={length:$t.readUint32()},Pt=Mt($t);Array.isArray(Pt)||(wt.id=Pt.recordId,wt.name=Pt.recordName,Et.dimensions=Pt.dimensions),Et.globalAttributes=Ct($t);const Ft=Tt($t,wt==null?void 0:wt.id,Rt);return Array.isArray(Ft)||(Et.variables=Ft.variables,wt.recordStep=Ft.recordStep),Et.recordDimension=wt,Et}function Mt($t){const Rt={};let Et,wt;const Pt=$t.readUint32();let Ft;if(Pt===lt)return(0,at.notNetcdf)($t.readUint32()!==lt,"wrong empty tag for list of dimensions"),[];{(0,at.notNetcdf)(Pt!==dt,"wrong tag for list of dimensions");const Nt=$t.readUint32();Ft=new Array(Nt);for(let Ot=0;Ot<Nt;Ot++){const Bt=(0,at.readName)($t),Xt=$t.readUint32();Xt===_t&&(Et=Ot,wt=Bt),Ft[Ot]={name:Bt,size:Xt}}}return Et!==void 0&&(Rt.recordId=Et),wt!==void 0&&(Rt.recordName=wt),Rt.dimensions=Ft,Rt}function Ct($t){const Rt=$t.readUint32();let Et;if(Rt===lt)return(0,at.notNetcdf)($t.readUint32()!==lt,"wrong empty tag for list of attributes"),[];{(0,at.notNetcdf)(Rt!==vt,"wrong tag for list of attributes");const wt=$t.readUint32();Et=new Array(wt);for(let Pt=0;Pt<wt;Pt++){const Ft=(0,at.readName)($t),Nt=$t.readUint32();(0,at.notNetcdf)(Nt<1||Nt>6,`non valid type ${Nt}`);const Ot=$t.readUint32(),Bt=(0,st.readType)($t,Nt,Ot);(0,at.padding)($t),Et[Pt]={name:Ft,type:(0,st.num2str)(Nt),value:Bt}}}return Et}function Tt($t,Rt,Et){const wt=$t.readUint32();let Pt=0,Ft;if(wt===lt)return(0,at.notNetcdf)($t.readUint32()!==lt,"wrong empty tag for list of variables"),[];{(0,at.notNetcdf)(wt!==yt,"wrong tag for list of variables");const Nt=$t.readUint32();Ft=new Array(Nt);for(let Ot=0;Ot<Nt;Ot++){const Bt=(0,at.readName)($t),Xt=$t.readUint32(),Zt=new Array(Xt);for(let mn=0;mn<Xt;mn++)Zt[mn]=$t.readUint32();const rn=Ct($t),Gt=$t.readUint32();(0,at.notNetcdf)(Gt<1&&Gt>6,`non valid type ${Gt}`);const nn=$t.readUint32();let cn=$t.readUint32();Et===2&&((0,at.notNetcdf)(cn>0,"offsets larger than 4GB not supported"),cn=$t.readUint32());let an=!1;typeof Rt<"u"&&Zt[0]===Rt&&(Pt+=nn,an=!0),Ft[Ot]={name:Bt,dimensions:Zt,attributes:rn,type:(0,st.num2str)(Gt),size:nn,offset:cn,record:an}}}return{variables:Ft,recordStep:Pt}}},"./node_modules/netcdfjs/lib-esm/index.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{NetCDFReader:()=>st.NetCDFReader});var st=rt("./node_modules/netcdfjs/lib-esm/parser.js")},"./node_modules/netcdfjs/lib-esm/parser.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{NetCDFReader:()=>vt});var st=rt("./node_modules/iobuffer/lib-esm/IOBuffer.js"),at=rt("./node_modules/netcdfjs/lib-esm/data.js"),lt=rt("./node_modules/netcdfjs/lib-esm/header.js"),dt=rt("./node_modules/netcdfjs/lib-esm/toString.js"),yt=rt("./node_modules/netcdfjs/lib-esm/utils.js");class vt{constructor(bt){this.toString=dt.toString;const Mt=new st.IOBuffer(bt);Mt.setBigEndian(),(0,yt.notNetcdf)(Mt.readChars(3)!=="CDF","should start with CDF");const Ct=Mt.readByte();(0,yt.notNetcdf)(Ct>2,"unknown version"),this.header=(0,lt.header)(Mt,Ct),this.buffer=Mt}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(bt){const Mt=this.globalAttributes.find(Ct=>Ct.name===bt);return Mt?Mt.value:null}getDataVariableAsString(bt){const Mt=this.getDataVariable(bt);return Mt?Mt.join(""):null}get variables(){return this.header.variables}getDataVariable(bt){let Mt;if(typeof bt=="string"?Mt=this.header.variables.find(Ct=>Ct.name===bt):Mt=bt,Mt===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(Mt.offset),Mt.record?(0,at.record)(this.buffer,Mt,this.header.recordDimension):(0,at.nonRecord)(this.buffer,Mt)}dataVariableExists(bt){return this.header.variables.find(Ct=>Ct.name===bt)!==void 0}attributeExists(bt){return this.globalAttributes.find(Ct=>Ct.name===bt)!==void 0}}},"./node_modules/netcdfjs/lib-esm/toString.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{toString:()=>st});function st(){const at=[];at.push("DIMENSIONS");for(const dt of this.dimensions)at.push(`  ${dt.name.padEnd(30)} = size: ${dt.size}`);at.push(""),at.push("GLOBAL ATTRIBUTES");for(const dt of this.globalAttributes)at.push(`  ${dt.name.padEnd(30)} = ${dt.value}`);const lt=JSON.parse(JSON.stringify(this.variables));at.push(""),at.push("VARIABLES:");for(const dt of lt){dt.value=this.getDataVariable(dt);let yt=JSON.stringify(dt.value);yt.length>50&&(yt=yt.substring(0,50)),isNaN(dt.value.length)||(yt+=` (length: ${dt.value.length})`),at.push(`  ${dt.name.padEnd(30)} = ${yt}`)}return at.join(`
`)}},"./node_modules/netcdfjs/lib-esm/types.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{num2bytes:()=>lt,num2str:()=>at,readType:()=>vt,str2num:()=>dt});const st={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function at(bt){switch(Number(bt)){case st.BYTE:return"byte";case st.CHAR:return"char";case st.SHORT:return"short";case st.INT:return"int";case st.FLOAT:return"float";case st.DOUBLE:return"double";default:return"undefined"}}function lt(bt){switch(Number(bt)){case st.BYTE:return 1;case st.CHAR:return 1;case st.SHORT:return 2;case st.INT:return 4;case st.FLOAT:return 4;case st.DOUBLE:return 8;default:return-1}}function dt(bt){switch(String(bt)){case"byte":return st.BYTE;case"char":return st.CHAR;case"short":return st.SHORT;case"int":return st.INT;case"float":return st.FLOAT;case"double":return st.DOUBLE;default:return-1}}function yt(bt,Mt){if(bt!==1){const Ct=new Array(bt);for(let Tt=0;Tt<bt;Tt++)Ct[Tt]=Mt();return Ct}else return Mt()}function vt(bt,Mt,Ct){switch(Mt){case st.BYTE:return Array.from(bt.readBytes(Ct));case st.CHAR:return _t(bt.readChars(Ct));case st.SHORT:return yt(Ct,bt.readInt16.bind(bt));case st.INT:return yt(Ct,bt.readInt32.bind(bt));case st.FLOAT:return yt(Ct,bt.readFloat32.bind(bt));case st.DOUBLE:return yt(Ct,bt.readFloat64.bind(bt));default:throw new Error(`non valid type ${Mt}`)}}function _t(bt){return bt.charCodeAt(bt.length-1)===0?bt.substring(0,bt.length-1):bt}},"./node_modules/netcdfjs/lib-esm/utils.js":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{notNetcdf:()=>st,padding:()=>at,readName:()=>lt});function st(dt,yt){if(dt)throw new TypeError(`Not a valid NetCDF v3.x file: ${yt}`)}function at(dt){dt.offset%4!==0&&dt.skip(4-dt.offset%4)}function lt(dt){const yt=dt.readUint32(),vt=dt.readChars(yt);return at(dt),vt}},"./src/WebGL/shaders/lib/basic/basic.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/basic/basic.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`},"./src/WebGL/shaders/lib/blur/blur.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`},"./src/WebGL/shaders/lib/blur/blur.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/instanced/instanced.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/instanced/instanced.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/lambert/lambert.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}`},"./src/WebGL/shaders/lib/lambert/lambert.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/outline/outline.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );    
}


`},"./src/WebGL/shaders/lib/outline/outline.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`},"./src/WebGL/shaders/lib/screen/screen.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `},"./src/WebGL/shaders/lib/screen/screen.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}

`},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );
}


`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform int fogType;
uniform vec3 fogColor;
uniform float fogDensity;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogType > 0) {

        float depth = gl_FragCoord.z / gl_FragCoord.w;
        float fogFactor = 0.0;

        if (fogType == 1) {
            fogFactor = smoothstep(fogNear, fogFar, depth);
        }

        else {
            const float LOG2 = 1.442695;
            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);
            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);
        }

        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`},"./src/WebGL/shaders/lib/ssao/ssao.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`},"./src/WebGL/shaders/lib/ssao/ssao.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`},"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`},"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`},"./src/WebGL/shaders/lib/volumetric/volumetric.frag":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `},"./src/WebGL/shaders/lib/volumetric/volumetric.vert":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{default:()=>st});const st=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`},"./src/GLDraw.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{CAP:()=>at,GLDraw:()=>lt});var st=rt("./src/WebGL/math/index.ts"),at;(function(dt){dt[dt.NONE=0]="NONE",dt[dt.FLAT=1]="FLAT",dt[dt.ROUND=2]="ROUND"})(at||(at={}));var lt;(function(dt){function yt(Rt,Et,wt){var Pt=Math.hypot(Rt,Et),Ft,Nt,Ot,Bt,Xt;Pt<1e-4?(Nt=0,Ot=1):(Nt=-Rt/Pt,Ot=Et/Pt),Et=-Nt*Rt+Ot*Et,Ft=Math.hypot(Et,wt),Ft<1e-4?(Bt=0,Xt=1):(Bt=wt/Ft,Xt=Et/Ft);var Zt=new Float32Array(9);return Zt[0]=Ot,Zt[1]=Nt,Zt[2]=0,Zt[3]=-Nt*Xt,Zt[4]=Ot*Xt,Zt[5]=Bt,Zt[6]=Nt*Bt,Zt[7]=-Ot*Bt,Zt[8]=Xt,Zt}class vt{constructor(){this.cache={};let Et=[],wt=4,Pt=Math.pow(2,wt),Ft=2,Nt=Math.pow(2,Ft),Ot=Pt/Nt,Bt;for(Et[0]=new st.Vector3(-1,0,0),Et[Ot]=new st.Vector3(0,0,1),Et[Ot*2]=new st.Vector3(1,0,0),Et[Ot*3]=new st.Vector3(0,0,-1),Ft=3;Ft<=wt;Ft++){for(Nt=Math.pow(2,Ft-1),Ot=Pt/Nt,Bt=0;Bt<Nt-1;Bt++)Et[Ot/2+Bt*Ot]=Et[Bt*Ot].clone().add(Et[(Bt+1)*Ot]).normalize();Bt=Nt-1,Et[Ot/2+Bt*Ot]=Et[Bt*Ot].clone().add(Et[0]).normalize()}this.basisVectors=Et}getVerticesForRadius(Et,wt,Pt){if(typeof this.cache<"u"&&this.cache[Et]!==void 0&&this.cache[Et][wt+Pt]!==void 0)return this.cache[Et][wt+Pt];for(var Ft=this.basisVectors.length,Nt=[],Ot=[],Bt,Xt=0;Xt<Ft;Xt++)Nt.push(this.basisVectors[Xt].clone().multiplyScalar(Et)),Nt.push(this.basisVectors[Xt].clone().multiplyScalar(Et)),Bt=this.basisVectors[Xt].clone().normalize(),Ot.push(Bt),Ot.push(Bt);var Zt=[],rn=10,Gt=Ft,nn=0,cn=Math.PI*2,an=0,mn=Math.PI,En,Cn,Mn=!1,un=!1;for(Cn=0;Cn<=rn;Cn++){Mn=Cn===0||Cn===rn,un=Cn===rn/2;var Tn=[],Pn=[];for(En=0;En<=Gt;En++){if(un){var dn=En<Gt?2*En:0;Pn.push(dn+1),Tn.push(dn);continue}var Un=En/Gt,qn=Cn/rn;if(!Mn||En===0)if(En<Gt){var In=new st.Vector3;In.x=-Et*Math.cos(nn+Un*cn)*Math.sin(an+qn*mn),wt==1?In.y=0:In.y=Et*Math.cos(an+qn*mn),In.z=Et*Math.sin(nn+Un*cn)*Math.sin(an+qn*mn),Math.abs(In.x)<1e-5&&(In.x=0),Math.abs(In.y)<1e-5&&(In.y=0),Math.abs(In.z)<1e-5&&(In.z=0),wt==at.FLAT?(Bt=new st.Vector3(0,Math.cos(an+qn*mn),0),Bt.normalize()):(Bt=new st.Vector3(In.x,In.y,In.z),Bt.normalize()),Nt.push(In),Ot.push(Bt),Tn.push(Nt.length-1)}else Tn.push(Nt.length-Gt);else Mn&&Tn.push(Nt.length-1)}un&&Zt.push(Pn),Zt.push(Tn)}var Wn={vertices:Nt,normals:Ot,verticesRows:Zt,w:Gt,h:rn};return Et in this.cache||(this.cache[Et]={}),this.cache[Et][wt+Pt]=Wn,Wn}}var _t=new vt;function bt(Rt,Et,wt,Pt,Ft,Nt=0,Ot=0){if(!Et||!wt)return;let Bt=function(hs){if(typeof hs=="string"){let ro=hs;return ro.toLowerCase()=="flat"?at.FLAT:ro.toLowerCase()=="round"?at.ROUND:at.NONE}else return hs};Nt=Bt(Nt),Ot=Bt(Ot);var Xt=Ot||Nt;Ft=Ft||{r:0,g:0,b:0};var Zt=yt(wt.x-Et.x,wt.y-Et.y,wt.z-Et.z),rn=_t.getVerticesForRadius(Pt,Ot,"to"),Gt=rn.w,nn=rn.h,cn=Xt?nn*Gt+2:2*Gt,an=Rt.updateGeoGroup(cn),mn=rn.vertices,En=rn.normals,Cn=rn.verticesRows,Mn=Cn[nn/2],un=Cn[nn/2+1],Tn=an.vertices,Pn,dn,Un,qn,In,Wn,ar=an.vertexArray,fr=an.normalArray,mr=an.colorArray,vr=an.faceArray;for(Un=0;Un<Gt;++Un){var Ar=2*Un;qn=Zt[0]*mn[Ar].x+Zt[3]*mn[Ar].y+Zt[6]*mn[Ar].z,In=Zt[1]*mn[Ar].x+Zt[4]*mn[Ar].y+Zt[7]*mn[Ar].z,Wn=Zt[5]*mn[Ar].y+Zt[8]*mn[Ar].z,Pn=3*(Tn+Ar),dn=an.faceidx,ar[Pn]=qn+Et.x,ar[Pn+1]=In+Et.y,ar[Pn+2]=Wn+Et.z,ar[Pn+3]=qn+wt.x,ar[Pn+4]=In+wt.y,ar[Pn+5]=Wn+wt.z,fr[Pn]=qn,fr[Pn+3]=qn,fr[Pn+1]=In,fr[Pn+4]=In,fr[Pn+2]=Wn,fr[Pn+5]=Wn,mr[Pn]=Ft.r,mr[Pn+3]=Ft.r,mr[Pn+1]=Ft.g,mr[Pn+4]=Ft.g,mr[Pn+2]=Ft.b,mr[Pn+5]=Ft.b,vr[dn]=un[Un]+Tn,vr[dn+1]=un[Un+1]+Tn,vr[dn+2]=Mn[Un]+Tn,vr[dn+3]=Mn[Un]+Tn,vr[dn+4]=un[Un+1]+Tn,vr[dn+5]=Mn[Un+1]+Tn,an.faceidx+=6}if(Xt){var $r=Ot?0:nn/2,Mr=Nt?nn+1:nn/2+1,Jn,hr,wr,Nr,Fr,Yr,cs,cr,Qn,_r,Ir,pr,Tr,Wr,Kn,rr,ur,Sr,gr,Gr,jr,er,yr,Er,Hr,lr,Br,Hn,kr,Cs,Fn,Ur;for(In=$r;In<Mr;In++)if(In!==nn/2){var Vr=In<=nn/2?wt:Et,dr=_t.getVerticesForRadius(Pt,Ot,"to"),Cr=_t.getVerticesForRadius(Pt,Nt,"from");for(Vr===wt?(mn=dr.vertices,En=dr.normals,Cn=dr.verticesRows):Vr==Et&&(mn=Cr.vertices,En=Cr.normals,Cn=Cr.verticesRows),qn=0;qn<Gt;qn++)dn=an.faceidx,Jn=Cn[In][qn+1],kr=(Jn+Tn)*3,hr=Cn[In][qn],Cs=(hr+Tn)*3,wr=Cn[In+1][qn],Fn=(wr+Tn)*3,Nr=Cn[In+1][qn+1],Ur=(Nr+Tn)*3,Fr=Zt[0]*mn[Jn].x+Zt[3]*mn[Jn].y+Zt[6]*mn[Jn].z,Yr=Zt[0]*mn[hr].x+Zt[3]*mn[hr].y+Zt[6]*mn[hr].z,cs=Zt[0]*mn[wr].x+Zt[3]*mn[wr].y+Zt[6]*mn[wr].z,cr=Zt[0]*mn[Nr].x+Zt[3]*mn[Nr].y+Zt[6]*mn[Nr].z,Qn=Zt[1]*mn[Jn].x+Zt[4]*mn[Jn].y+Zt[7]*mn[Jn].z,_r=Zt[1]*mn[hr].x+Zt[4]*mn[hr].y+Zt[7]*mn[hr].z,Ir=Zt[1]*mn[wr].x+Zt[4]*mn[wr].y+Zt[7]*mn[wr].z,pr=Zt[1]*mn[Nr].x+Zt[4]*mn[Nr].y+Zt[7]*mn[Nr].z,Tr=Zt[5]*mn[Jn].y+Zt[8]*mn[Jn].z,Wr=Zt[5]*mn[hr].y+Zt[8]*mn[hr].z,Kn=Zt[5]*mn[wr].y+Zt[8]*mn[wr].z,rr=Zt[5]*mn[Nr].y+Zt[8]*mn[Nr].z,ar[kr]=Fr+Vr.x,ar[Cs]=Yr+Vr.x,ar[Fn]=cs+Vr.x,ar[Ur]=cr+Vr.x,ar[kr+1]=Qn+Vr.y,ar[Cs+1]=_r+Vr.y,ar[Fn+1]=Ir+Vr.y,ar[Ur+1]=pr+Vr.y,ar[kr+2]=Tr+Vr.z,ar[Cs+2]=Wr+Vr.z,ar[Fn+2]=Kn+Vr.z,ar[Ur+2]=rr+Vr.z,mr[kr]=Ft.r,mr[Cs]=Ft.r,mr[Fn]=Ft.r,mr[Ur]=Ft.r,mr[kr+1]=Ft.g,mr[Cs+1]=Ft.g,mr[Fn+1]=Ft.g,mr[Ur+1]=Ft.g,mr[kr+2]=Ft.b,mr[Cs+2]=Ft.b,mr[Fn+2]=Ft.b,mr[Ur+2]=Ft.b,ur=Zt[0]*En[Jn].x+Zt[3]*En[Jn].y+Zt[6]*En[Jn].z,Sr=Zt[0]*En[hr].x+Zt[3]*En[hr].y+Zt[6]*En[hr].z,gr=Zt[0]*En[wr].x+Zt[3]*En[wr].y+Zt[6]*En[wr].z,Gr=Zt[0]*En[Nr].x+Zt[3]*En[Nr].y+Zt[6]*En[Nr].z,jr=Zt[1]*En[Jn].x+Zt[4]*En[Jn].y+Zt[7]*En[Jn].z,er=Zt[1]*En[hr].x+Zt[4]*En[hr].y+Zt[7]*En[hr].z,yr=Zt[1]*En[wr].x+Zt[4]*En[wr].y+Zt[7]*En[wr].z,Er=Zt[1]*En[Nr].x+Zt[4]*En[Nr].y+Zt[7]*En[Nr].z,Hr=Zt[5]*En[Jn].y+Zt[8]*En[Jn].z,lr=Zt[5]*En[hr].y+Zt[8]*En[hr].z,Br=Zt[5]*En[wr].y+Zt[8]*En[wr].z,Hn=Zt[5]*En[Nr].y+Zt[8]*En[Nr].z,In===0?(fr[kr]=ur,fr[Fn]=gr,fr[Ur]=Gr,fr[kr+1]=jr,fr[Fn+1]=yr,fr[Ur+1]=Er,fr[kr+2]=Hr,fr[Fn+2]=Br,fr[Ur+2]=Hn,vr[dn]=Jn+Tn,vr[dn+1]=wr+Tn,vr[dn+2]=Nr+Tn,an.faceidx+=3):In===Mr-1?(fr[kr]=ur,fr[Cs]=Sr,fr[Fn]=gr,fr[kr+1]=jr,fr[Cs+1]=er,fr[Fn+1]=yr,fr[kr+2]=Hr,fr[Cs+2]=lr,fr[Fn+2]=Br,vr[dn]=Jn+Tn,vr[dn+1]=hr+Tn,vr[dn+2]=wr+Tn,an.faceidx+=3):(fr[kr]=ur,fr[Cs]=Sr,fr[Ur]=Gr,fr[kr+1]=jr,fr[Cs+1]=er,fr[Ur+1]=Er,fr[kr+2]=Hr,fr[Cs+2]=lr,fr[Ur+2]=Hn,fr[Cs]=Sr,fr[Fn]=gr,fr[Ur]=Gr,fr[Cs+1]=er,fr[Fn+1]=yr,fr[Ur+1]=Er,fr[Cs+2]=lr,fr[Fn+2]=Br,fr[Ur+2]=Hn,vr[dn]=Jn+Tn,vr[dn+1]=hr+Tn,vr[dn+2]=Nr+Tn,vr[dn+3]=hr+Tn,vr[dn+4]=wr+Tn,vr[dn+5]=Nr+Tn,an.faceidx+=6)}}an.vertices+=cn}dt.drawCylinder=bt;function Mt(Rt,Et,wt,Pt,Ft){if(!Et||!wt)return;Ft=Ft||{r:0,g:0,b:0};let Nt=new st.Vector3(wt.x-Et.x,wt.y-Et.y,wt.z-Et.z);var Ot=yt(Nt.x,Nt.y,Nt.z);Nt=Nt.normalize();var Bt=_t.basisVectors.length,Xt=_t.basisVectors,Zt=Bt+2,rn=Rt.updateGeoGroup(Zt),Gt=rn.vertices,nn,cn,an,mn,En,Cn,Mn=rn.vertexArray,un=rn.normalArray,Tn=rn.colorArray,Pn=rn.faceArray;for(nn=Gt*3,Mn[nn]=Et.x,Mn[nn+1]=Et.y,Mn[nn+2]=Et.z,un[nn]=-Nt.x,un[nn+1]=-Nt.y,un[nn+2]=-Nt.z,Tn[nn]=Ft.r,Tn[nn+1]=Ft.g,Tn[nn+2]=Ft.b,Mn[nn+3]=wt.x,Mn[nn+4]=wt.y,Mn[nn+5]=wt.z,un[nn+3]=Nt.x,un[nn+4]=Nt.y,un[nn+5]=Nt.z,Tn[nn+3]=Ft.r,Tn[nn+4]=Ft.g,Tn[nn+5]=Ft.b,nn+=6,an=0;an<Bt;++an){var dn=Xt[an].clone();dn.multiplyScalar(Pt),mn=Ot[0]*dn.x+Ot[3]*dn.y+Ot[6]*dn.z,En=Ot[1]*dn.x+Ot[4]*dn.y+Ot[7]*dn.z,Cn=Ot[5]*dn.y+Ot[8]*dn.z,Mn[nn]=mn+Et.x,Mn[nn+1]=En+Et.y,Mn[nn+2]=Cn+Et.z,un[nn]=mn,un[nn+1]=En,un[nn+2]=Cn,Tn[nn]=Ft.r,Tn[nn+1]=Ft.g,Tn[nn+2]=Ft.b,nn+=3}for(rn.vertices+=Bt+2,cn=rn.faceidx,an=0;an<Bt;an++){var Un=Gt+2+an,qn=Gt+2+(an+1)%Bt;Pn[cn]=Un,Pn[cn+1]=qn,Pn[cn+2]=Gt,cn+=3,Pn[cn]=Un,Pn[cn+1]=qn,Pn[cn+2]=Gt+1,cn+=3}rn.faceidx+=6*Bt}dt.drawCone=Mt;class Ct{constructor(){this.cache=new Map}getVerticesForRadius(Et,wt){wt=wt||2,this.cache.has(wt)||this.cache.set(wt,new Map);let Pt=this.cache.get(wt);if(Pt.has(Et))return Pt.get(Et);var Ft={vertices:[],verticesRows:[],normals:[]},Nt=16*wt,Ot=10*wt;Et<1&&(Nt=10*wt,Ot=8*wt);var Bt=0,Xt=Math.PI*2,Zt=0,rn=Math.PI,Gt,nn;for(nn=0;nn<=Ot;nn++){let an=[];for(Gt=0;Gt<=Nt;Gt++){let mn=Gt/Nt,En=nn/Ot,Cn=-Et*Math.cos(Bt+mn*Xt)*Math.sin(Zt+En*rn),Mn=Et*Math.cos(Zt+En*rn),un=Et*Math.sin(Bt+mn*Xt)*Math.sin(Zt+En*rn);var cn=new st.Vector3(Cn,Mn,un);cn.normalize(),Ft.vertices.push({x:Cn,y:Mn,z:un}),Ft.normals.push(cn),an.push(Ft.vertices.length-1)}Ft.verticesRows.push(an)}return Pt.set(Et,Ft),Ft}}var Tt=new Ct;function $t(Rt,Et,wt,Pt,Ft){var Nt=Tt.getVerticesForRadius(wt,Ft),Ot=Nt.vertices,Bt=Nt.normals,Xt=Rt.updateGeoGroup(Ot.length),Zt=Xt.vertices,rn=Xt.vertexArray,Gt=Xt.colorArray,nn=Xt.faceArray,cn=Xt.lineArray,an=Xt.normalArray;for(let Cn=0,Mn=Ot.length;Cn<Mn;++Cn){let un=3*(Zt+Cn),Tn=Ot[Cn];rn[un]=Tn.x+Et.x,rn[un+1]=Tn.y+Et.y,rn[un+2]=Tn.z+Et.z,Gt[un]=Pt.r,Gt[un+1]=Pt.g,Gt[un+2]=Pt.b}Xt.vertices+=Ot.length;let mn=Nt.verticesRows,En=mn.length-1;for(let Cn=0;Cn<En;Cn++){let Mn=mn[Cn].length-1;for(let un=0;un<Mn;un++){let Tn=Xt.faceidx,Pn=Xt.lineidx,dn=mn[Cn][un+1]+Zt,Un=dn*3,qn=mn[Cn][un]+Zt,In=qn*3,Wn=mn[Cn+1][un]+Zt,ar=Wn*3,fr=mn[Cn+1][un+1]+Zt,mr=fr*3,vr=Bt[dn-Zt],Ar=Bt[qn-Zt],$r=Bt[Wn-Zt],Mr=Bt[fr-Zt];Math.abs(Ot[dn-Zt].y)===wt?(an[Un]=vr.x,an[ar]=$r.x,an[mr]=Mr.x,an[Un+1]=vr.y,an[ar+1]=$r.y,an[mr+1]=Mr.y,an[Un+2]=vr.z,an[ar+2]=$r.z,an[mr+2]=Mr.z,nn[Tn]=dn,nn[Tn+1]=Wn,nn[Tn+2]=fr,cn[Pn]=dn,cn[Pn+1]=Wn,cn[Pn+2]=dn,cn[Pn+3]=fr,cn[Pn+4]=Wn,cn[Pn+5]=fr,Xt.faceidx+=3,Xt.lineidx+=6):Math.abs(Ot[Wn-Zt].y)===wt?(an[Un]=vr.x,an[In]=Ar.x,an[ar]=$r.x,an[Un+1]=vr.y,an[In+1]=Ar.y,an[ar+1]=$r.y,an[Un+2]=vr.z,an[In+2]=Ar.z,an[ar+2]=$r.z,nn[Tn]=dn,nn[Tn+1]=qn,nn[Tn+2]=Wn,cn[Pn]=dn,cn[Pn+1]=qn,cn[Pn+2]=dn,cn[Pn+3]=Wn,cn[Pn+4]=qn,cn[Pn+5]=Wn,Xt.faceidx+=3,Xt.lineidx+=6):(an[Un]=vr.x,an[In]=Ar.x,an[mr]=Mr.x,an[Un+1]=vr.y,an[In+1]=Ar.y,an[mr+1]=Mr.y,an[Un+2]=vr.z,an[In+2]=Ar.z,an[mr+2]=Mr.z,an[In]=Ar.x,an[ar]=$r.x,an[mr]=Mr.x,an[In+1]=Ar.y,an[ar+1]=$r.y,an[mr+1]=Mr.y,an[In+2]=Ar.z,an[ar+2]=$r.z,an[mr+2]=Mr.z,nn[Tn]=dn,nn[Tn+1]=qn,nn[Tn+2]=fr,nn[Tn+3]=qn,nn[Tn+4]=Wn,nn[Tn+5]=fr,cn[Pn]=dn,cn[Pn+1]=qn,cn[Pn+2]=dn,cn[Pn+3]=fr,cn[Pn+4]=qn,cn[Pn+5]=Wn,cn[Pn+6]=Wn,cn[Pn+7]=fr,Xt.faceidx+=6,Xt.lineidx+=8)}}}dt.drawSphere=$t})(lt||(lt={}))},"./src/GLModel.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{GLModel:()=>$t});var st=rt("./src/WebGL/index.ts"),at=rt("./src/WebGL/shapes/index.ts"),lt=rt("./src/WebGL/math/index.ts"),dt=rt("./src/colors.ts"),yt=rt("./src/GLDraw.ts"),vt=rt("./src/glcartoon.ts"),_t=rt("./src/utilities.ts"),bt=rt("./src/Gradient.ts"),Mt=rt("./src/parsers/index.ts"),Ct=rt("./node_modules/netcdfjs/lib-esm/index.js"),Tt=rt("./src/parsers/utils/assignBonds.ts");class $t{static sameObj(Et,wt){return Et&&wt?JSON.stringify(Et)==JSON.stringify(wt):Et==wt}constructor(Et,wt){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new lt.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=dt.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=wt||{},this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:dt.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=Et}getRadiusFromStyle(Et,wt){var Pt=this.defaultSphereRadius;if(typeof wt.radius<"u")Pt=wt.radius;else if($t.vdwRadii[Et.elem])Pt=$t.vdwRadii[Et.elem];else if(Et.elem.length>1){let Ft=Et.elem;Ft=Ft[0].toUpperCase()+Ft[1].toLowerCase(),$t.vdwRadii[Ft]&&(Pt=$t.vdwRadii[Ft])}return typeof wt.scale<"u"&&(Pt*=wt.scale),Pt}drawAtomCross(Et,wt){if(Et.style.cross){var Pt=Et.style.cross;if(!Pt.hidden){var Ft=Pt.linewidth||$t.defaultlineWidth;wt[Ft]||(wt[Ft]=new st.Geometry);var Nt=wt[Ft].updateGeoGroup(6),Ot=this.getRadiusFromStyle(Et,Pt),Bt=[[Ot,0,0],[-Ot,0,0],[0,Ot,0],[0,-Ot,0],[0,0,Ot],[0,0,-Ot]],Xt=Et.clickable||Et.hoverable;Xt&&Et.intersectionShape===void 0&&(Et.intersectionShape={sphere:[],cylinder:[],line:[]});for(var Zt=(0,_t.getColorFromStyle)(Et,Pt),rn=Nt.vertexArray,Gt=Nt.colorArray,nn=0;nn<6;nn++){var cn=Nt.vertices*3;if(Nt.vertices++,rn[cn]=Et.x+Bt[nn][0],rn[cn+1]=Et.y+Bt[nn][1],rn[cn+2]=Et.z+Bt[nn][2],Gt[cn]=Zt.r,Gt[cn+1]=Zt.g,Gt[cn+2]=Zt.b,Xt){var an=new lt.Vector3(Bt[nn][0],Bt[nn][1],Bt[nn][2]);an.multiplyScalar(.1),an.set(an.x+Et.x,an.y+Et.y,an.z+Et.z),Et.intersectionShape.line.push(an)}}}}}getGoodCross(Et,wt,Pt,Ft){for(var Nt=null,Ot=-1,Bt=0,Xt=Et.bonds.length;Bt<Xt;Bt++)if(Et.bonds[Bt]!=wt.index){let rn=Et.bonds[Bt],Gt=this.atoms[rn],cn=new lt.Vector3(Gt.x,Gt.y,Gt.z).clone();cn.sub(Pt);let an=cn.clone();an.cross(Ft);var Zt=an.lengthSq();if(Zt>Ot&&(Ot=Zt,Nt=an,Ot>.1))return Nt}return Nt}getSideBondV(Et,wt,Pt){var Ft,Nt,Ot,Bt,Xt,Zt=new lt.Vector3(Et.x,Et.y,Et.z),rn=new lt.Vector3(wt.x,wt.y,wt.z),Gt=rn.clone(),nn=null;if(Gt.sub(Zt),Et.bonds.length===1)wt.bonds.length===1?(nn=Gt.clone(),Math.abs(nn.x)>1e-4?nn.y+=1:nn.x+=1):(Ft=(Pt+1)%wt.bonds.length,Nt=wt.bonds[Ft],Ot=this.atoms[Nt],Ot.index==Et.index&&(Ft=(Ft+1)%wt.bonds.length,Nt=wt.bonds[Ft],Ot=this.atoms[Nt]),Bt=new lt.Vector3(Ot.x,Ot.y,Ot.z),Xt=Bt.clone(),Xt.sub(Zt),nn=Xt.clone(),nn.cross(Gt));else if(nn=this.getGoodCross(Et,wt,Zt,Gt),nn.lengthSq()<.01){var cn=this.getGoodCross(wt,Et,Zt,Gt);cn!=null&&(nn=cn)}return nn.lengthSq()<.01&&(nn=Gt.clone(),Math.abs(nn.x)>1e-4?nn.y+=1:nn.x+=1),nn.cross(Gt),nn.normalize(),nn}addLine(Et,wt,Pt,Ft,Nt,Ot){Et[Pt]=Ft.x,Et[Pt+1]=Ft.y,Et[Pt+2]=Ft.z,wt[Pt]=Ot.r,wt[Pt+1]=Ot.g,wt[Pt+2]=Ot.b,Et[Pt+3]=Nt.x,Et[Pt+4]=Nt.y,Et[Pt+5]=Nt.z,wt[Pt+3]=Ot.r,wt[Pt+4]=Ot.g,wt[Pt+5]=Ot.b}drawBondLines(Et,wt,Pt){if(Et.style.line){var Ft=Et.style.line;if(!Ft.hidden){var Nt,Ot,Bt,Xt,Zt=Ft.linewidth||$t.defaultlineWidth;Pt[Zt]||(Pt[Zt]=new st.Geometry);for(var rn=Pt[Zt].updateGeoGroup(6*Et.bonds.length),Gt=rn.vertexArray,nn=rn.colorArray,cn=0;cn<Et.bonds.length;cn++){var an=Et.bonds[cn],mn=wt[an];if(mn.style.line&&!(Et.index>=mn.index)){var En=new lt.Vector3(Et.x,Et.y,Et.z),Cn=new lt.Vector3(mn.x,mn.y,mn.z),Mn=En.clone().add(Cn).multiplyScalar(.5),un=!1,Tn=Et.clickable||Et.hoverable,Pn=mn.clickable||mn.hoverable;(Tn||Pn)&&(Tn&&(Et.intersectionShape===void 0&&(Et.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Et.intersectionShape.line.push(En),Et.intersectionShape.line.push(Mn)),Pn&&(mn.intersectionShape===void 0&&(mn.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),mn.intersectionShape.line.push(Mn),mn.intersectionShape.line.push(Cn)));var dn=(0,_t.getColorFromStyle)(Et,Et.style.line),Un=(0,_t.getColorFromStyle)(mn,mn.style.line);if(Et.bondStyles&&Et.bondStyles[cn]){var qn=Et.bondStyles[cn];if(!qn.iswire)continue;qn.singleBond&&(un=!0),typeof qn.color1<"u"&&(dn=dt.CC.color(qn.color1)),typeof qn.color2<"u"&&(Un=dt.CC.color(qn.color2))}var In=rn.vertices*3,Wn,ar;if(Et.bondOrder[cn]>1&&Et.bondOrder[cn]<4&&!un){var fr=this.getSideBondV(Et,mn,cn),mr=Cn.clone();mr.sub(En),Et.bondOrder[cn]==2?(fr.multiplyScalar(.1),Nt=En.clone(),Nt.add(fr),Ot=En.clone(),Ot.sub(fr),Bt=Nt.clone(),Bt.add(mr),Xt=Ot.clone(),Xt.add(mr),dn==Un?(rn.vertices+=4,this.addLine(Gt,nn,In,Nt,Bt,dn),this.addLine(Gt,nn,In+6,Ot,Xt,dn)):(rn.vertices+=8,mr.multiplyScalar(.5),Wn=Nt.clone(),Wn.add(mr),ar=Ot.clone(),ar.add(mr),this.addLine(Gt,nn,In,Nt,Wn,dn),this.addLine(Gt,nn,In+6,Wn,Bt,Un),this.addLine(Gt,nn,In+12,Ot,ar,dn),this.addLine(Gt,nn,In+18,ar,Xt,Un))):Et.bondOrder[cn]==3&&(fr.multiplyScalar(.1),Nt=En.clone(),Nt.add(fr),Ot=En.clone(),Ot.sub(fr),Bt=Nt.clone(),Bt.add(mr),Xt=Ot.clone(),Xt.add(mr),dn==Un?(rn.vertices+=6,this.addLine(Gt,nn,In,En,Cn,dn),this.addLine(Gt,nn,In+6,Nt,Bt,dn),this.addLine(Gt,nn,In+12,Ot,Xt,dn)):(rn.vertices+=12,mr.multiplyScalar(.5),Wn=Nt.clone(),Wn.add(mr),ar=Ot.clone(),ar.add(mr),this.addLine(Gt,nn,In,En,Mn,dn),this.addLine(Gt,nn,In+6,Mn,Cn,Un),this.addLine(Gt,nn,In+12,Nt,Wn,dn),this.addLine(Gt,nn,In+18,Wn,Bt,Un),this.addLine(Gt,nn,In+24,Ot,ar,dn),this.addLine(Gt,nn,In+30,ar,Xt,Un)))}else dn==Un?(rn.vertices+=2,this.addLine(Gt,nn,In,En,Cn,dn)):(rn.vertices+=4,this.addLine(Gt,nn,In,En,Mn,dn),this.addLine(Gt,nn,In+6,Mn,Cn,Un))}}}}}drawAtomSphere(Et,wt){if(Et.style.sphere){var Pt=Et.style.sphere;if(!Pt.hidden){var Ft=(0,_t.getColorFromStyle)(Et,Pt),Nt=this.getRadiusFromStyle(Et,Pt);if((Et.clickable===!0||Et.hoverable)&&Et.intersectionShape!==void 0){var Ot=new lt.Vector3(Et.x,Et.y,Et.z);Et.intersectionShape.sphere.push(new at.Sphere(Ot,Nt))}yt.GLDraw.drawSphere(wt,Et,Nt,Ft)}}}drawAtomClickSphere(Et){if(Et.style.clicksphere){var wt=Et.style.clicksphere;if(!wt.hidden){var Pt=this.getRadiusFromStyle(Et,wt);if((Et.clickable===!0||Et.hoverable)&&Et.intersectionShape!==void 0){var Ft=new lt.Vector3(Et.x,Et.y,Et.z);Et.intersectionShape.sphere.push(new at.Sphere(Ft,Pt))}}}}drawAtomInstanced(Et,wt){if(Et.style.sphere){var Pt=Et.style.sphere;if(!Pt.hidden){var Ft=this.getRadiusFromStyle(Et,Pt),Nt=(0,_t.getColorFromStyle)(Et,Pt),Ot=wt.updateGeoGroup(1),Bt=Ot.vertices,Xt=Bt*3,Zt=Ot.vertexArray,rn=Ot.colorArray,Gt=Ot.radiusArray;if(Zt[Xt]=Et.x,Zt[Xt+1]=Et.y,Zt[Xt+2]=Et.z,rn[Xt]=Nt.r,rn[Xt+1]=Nt.g,rn[Xt+2]=Nt.b,Gt[Bt]=Ft,(Et.clickable===!0||Et.hoverable)&&Et.intersectionShape!==void 0){var nn=new lt.Vector3(Et.x,Et.y,Et.z);Et.intersectionShape.sphere.push(new at.Sphere(nn,Ft))}Ot.vertices+=1}}}drawSphereImposter(Et,wt,Pt,Ft){var Nt=Et.updateGeoGroup(4),Ot,Bt=Nt.vertices,Xt=Bt*3,Zt=Nt.vertexArray,rn=Nt.colorArray;for(Ot=0;Ot<4;Ot++)Zt[Xt+3*Ot]=wt.x,Zt[Xt+3*Ot+1]=wt.y,Zt[Xt+3*Ot+2]=wt.z;var Gt=Nt.normalArray;for(Ot=0;Ot<4;Ot++)rn[Xt+3*Ot]=Ft.r,rn[Xt+3*Ot+1]=Ft.g,rn[Xt+3*Ot+2]=Ft.b;Gt[Xt+0]=-Pt,Gt[Xt+1]=Pt,Gt[Xt+2]=0,Gt[Xt+3]=-Pt,Gt[Xt+4]=-Pt,Gt[Xt+5]=0,Gt[Xt+6]=Pt,Gt[Xt+7]=-Pt,Gt[Xt+8]=0,Gt[Xt+9]=Pt,Gt[Xt+10]=Pt,Gt[Xt+11]=0,Nt.vertices+=4;var nn=Nt.faceArray,cn=Nt.faceidx;nn[cn+0]=Bt,nn[cn+1]=Bt+1,nn[cn+2]=Bt+2,nn[cn+3]=Bt+2,nn[cn+4]=Bt+3,nn[cn+5]=Bt,Nt.faceidx+=6}drawAtomImposter(Et,wt){if(Et.style.sphere){var Pt=Et.style.sphere;if(!Pt.hidden){var Ft=this.getRadiusFromStyle(Et,Pt),Nt=(0,_t.getColorFromStyle)(Et,Pt);if((Et.clickable===!0||Et.hoverable)&&Et.intersectionShape!==void 0){var Ot=new lt.Vector3(Et.x,Et.y,Et.z);Et.intersectionShape.sphere.push(new at.Sphere(Ot,Ft))}this.drawSphereImposter(wt,Et,Ft,Nt)}}}calculateDashes(Et,wt,Pt,Ft,Nt){var Ot=Math.sqrt(Math.pow(Et.x-wt.x,2)+Math.pow(Et.y-wt.y,2)+Math.pow(Et.z-wt.z,2));Pt=Math.max(Pt,0),Nt=Math.max(Nt,0)+2*Pt,Ft=Math.max(Ft,.001),Ft+Nt>Ot&&(Ft=Ot,Nt=0);var Bt=Math.floor((Ot-Ft)/(Ft+Nt))+1,Xt=Bt*Ft;Nt=(Ot-Xt)/Bt;for(var Zt,rn=new lt.Vector3(Et.x,Et.y,Et.z),Gt=new lt.Vector3((wt.x-Et.x)/(Ot/Nt),(wt.y-Et.y)/(Ot/Nt),(wt.z-Et.z)/(Ot/Nt)),nn=new lt.Vector3((wt.x-Et.x)/(Ot/Ft),(wt.y-Et.y)/(Ot/Ft),(wt.z-Et.z)/(Ot/Ft)),cn=[],an=0;an<Bt;an++)Zt=new lt.Vector3(rn.x+nn.x,rn.y+nn.y,rn.z+nn.z),cn.push({from:rn,to:Zt}),rn=new lt.Vector3(Zt.x+Gt.x,Zt.y+Gt.y,Zt.z+Gt.z);return cn}static drawStickImposter(Et,wt,Pt,Ft,Nt,Ot=0,Bt=0){for(var Xt=Et.updateGeoGroup(4),Zt=Xt.vertices,rn=Zt*3,Gt=Xt.vertexArray,nn=Xt.colorArray,cn=Xt.radiusArray,an=Xt.normalArray,mn=Nt.r,En=Nt.g,Cn=Nt.b,Mn=function(Un){var qn=-Un;return qn==0&&(qn=-1e-4),qn},un=rn,Tn=0;Tn<4;Tn++)Gt[un]=wt.x,an[un]=Pt.x,nn[un]=mn,un++,Gt[un]=wt.y,an[un]=Pt.y,nn[un]=En,un++,Gt[un]=wt.z,an[un]=Pt.z,Tn<2?nn[un]=Cn:nn[un]=Mn(Cn),un++;Xt.vertices+=4,cn[Zt]=-Ft,cn[Zt+1]=Ft,cn[Zt+2]=-Ft,cn[Zt+3]=Ft;var Pn=Xt.faceArray,dn=Xt.faceidx;Pn[dn+0]=Zt,Pn[dn+1]=Zt+1,Pn[dn+2]=Zt+2,Pn[dn+3]=Zt+2,Pn[dn+4]=Zt+3,Pn[dn+5]=Zt,Xt.faceidx+=6}drawBondSticks(Et,wt,Pt){var Ft,Nt;if(Et.style.stick){var Ot=Et.style.stick;if(!Ot.hidden){var Bt=Ot.radius||this.defaultStickRadius,Xt=Ot.doubleBondScaling||.4,Zt=Ot.tripleBondScaling||.25,rn=((Ft=Ot.dashedBondConfig)===null||Ft===void 0?void 0:Ft.dashLength)||.1,Gt=((Nt=Ot.dashedBondConfig)===null||Nt===void 0?void 0:Nt.gapLength)||.25,nn=Bt,cn=Ot.singleBonds||!1,an=Ot.dashedBonds||!1,mn=0,En=0,Cn,Mn,un,Tn,Pn,dn,Un,qn,In,Wn,ar,fr=(0,_t.getColorFromStyle)(Et,Ot),mr,vr,Ar;!Et.capDrawn&&Et.bonds.length<4&&(mn=2);var $r=yr=>{var Er=Pt.imposter?$t.drawStickImposter:yt.GLDraw.drawCylinder;return!an&&yr>=1?Er:(Hr,lr,Br,Hn,kr,Cs=0,Fn=0,Ur=.1,Vr=.25)=>{var dr=this.calculateDashes(lr,Br,Hn,Ur,Vr);dr.forEach(Cr=>{Er(Hr,Cr.from,Cr.to,Hn,kr,Cs,Fn)})}};for(un=0;un<Et.bonds.length;un++){var Mr=$r(Et.bondOrder[un]),Jn=Et.bonds[un],hr=wt[Jn];if(mr=vr=Ar=null,Et.index<hr.index){var wr=hr.style;if(!wr.stick||wr.stick.hidden)continue;var Nr=(0,_t.getColorFromStyle)(hr,wr.stick);if(nn=Bt,Tn=cn,Et.bondStyles&&Et.bondStyles[un]){if(Pn=Et.bondStyles[un],Pn.iswire)continue;Pn.radius&&(nn=Pn.radius),Pn.singleBond&&(Tn=!0),typeof Pn.color1<"u"&&(fr=dt.CC.color(Pn.color1)),typeof Pn.color2<"u"&&(Nr=dt.CC.color(Pn.color2))}var Fr=new lt.Vector3(Et.x,Et.y,Et.z),Yr=new lt.Vector3(hr.x,hr.y,hr.z);if(Et.bondOrder[un]<=1||Tn||Et.bondOrder[un]>3){if(Et.bondOrder[un]<1&&(nn*=Et.bondOrder[un]),!hr.capDrawn&&hr.bonds.length<4&&(En=2),fr!=Nr?(mr=new lt.Vector3().addVectors(Fr,Yr).multiplyScalar(.5),Mr(Pt,Fr,mr,nn,fr,mn,0,rn,Gt),Mr(Pt,mr,Yr,nn,Nr,0,En,rn,Gt)):Mr(Pt,Fr,Yr,nn,fr,mn,En,rn,Gt),Cn=Et.clickable||Et.hoverable,Mn=hr.clickable||hr.hoverable,Cn||Mn){if(mr||(mr=new lt.Vector3().addVectors(Fr,Yr).multiplyScalar(.5)),Cn){var cs=new at.Cylinder(Fr,mr,nn),cr=new at.Sphere(Fr,nn);Et.intersectionShape.cylinder.push(cs),Et.intersectionShape.sphere.push(cr)}if(Mn){var Qn=new at.Cylinder(Yr,mr,nn),_r=new at.Sphere(Yr,nn);hr.intersectionShape.cylinder.push(Qn),hr.intersectionShape.sphere.push(_r)}}}else if(Et.bondOrder[un]>1){var Ir=0,pr=0;nn!=Bt&&(Ir=2,pr=2);var Tr=Yr.clone(),Wr=null;Tr.sub(Fr);var Kn,rr,ur,Sr,gr;Wr=this.getSideBondV(Et,hr,un),Et.bondOrder[un]==2?(Kn=nn*Xt,Wr.multiplyScalar(Kn*1.5),rr=Fr.clone(),rr.add(Wr),ur=Fr.clone(),ur.sub(Wr),Sr=rr.clone(),Sr.add(Tr),gr=ur.clone(),gr.add(Tr),fr!=Nr?(mr=new lt.Vector3().addVectors(rr,Sr).multiplyScalar(.5),vr=new lt.Vector3().addVectors(ur,gr).multiplyScalar(.5),Mr(Pt,rr,mr,Kn,fr,Ir,0),Mr(Pt,mr,Sr,Kn,Nr,0,pr),Mr(Pt,ur,vr,Kn,fr,Ir,0),Mr(Pt,vr,gr,Kn,Nr,0,pr)):(Mr(Pt,rr,Sr,Kn,fr,Ir,pr),Mr(Pt,ur,gr,Kn,fr,Ir,pr)),Cn=Et.clickable||Et.hoverable,Mn=hr.clickable||hr.hoverable,(Cn||Mn)&&(mr||(mr=new lt.Vector3().addVectors(rr,Sr).multiplyScalar(.5)),vr||(vr=new lt.Vector3().addVectors(ur,gr).multiplyScalar(.5)),Cn&&(dn=new at.Cylinder(rr,mr,Kn),Un=new at.Cylinder(ur,vr,Kn),Et.intersectionShape.cylinder.push(dn),Et.intersectionShape.cylinder.push(Un)),Mn&&(In=new at.Cylinder(Sr,mr,Kn),Wn=new at.Cylinder(gr,vr,Kn),hr.intersectionShape.cylinder.push(In),hr.intersectionShape.cylinder.push(Wn)))):Et.bondOrder[un]==3&&(Kn=nn*Zt,Wr.cross(Tr),Wr.normalize(),Wr.multiplyScalar(Kn*3),rr=Fr.clone(),rr.add(Wr),ur=Fr.clone(),ur.sub(Wr),Sr=rr.clone(),Sr.add(Tr),gr=ur.clone(),gr.add(Tr),fr!=Nr?(mr=new lt.Vector3().addVectors(rr,Sr).multiplyScalar(.5),vr=new lt.Vector3().addVectors(ur,gr).multiplyScalar(.5),Ar=new lt.Vector3().addVectors(Fr,Yr).multiplyScalar(.5),Mr(Pt,rr,mr,Kn,fr,Ir,0),Mr(Pt,mr,Sr,Kn,Nr,0,pr),Mr(Pt,Fr,Ar,Kn,fr,mn,0),Mr(Pt,Ar,Yr,Kn,Nr,0,En),Mr(Pt,ur,vr,Kn,fr,Ir,0),Mr(Pt,vr,gr,Kn,Nr,0,pr)):(Mr(Pt,rr,Sr,Kn,fr,Ir,pr),Mr(Pt,Fr,Yr,Kn,fr,mn,En),Mr(Pt,ur,gr,Kn,fr,Ir,pr)),Cn=Et.clickable||Et.hoverable,Mn=hr.clickable||hr.hoverable,(Cn||Mn)&&(mr||(mr=new lt.Vector3().addVectors(rr,Sr).multiplyScalar(.5)),vr||(vr=new lt.Vector3().addVectors(ur,gr).multiplyScalar(.5)),Ar||(Ar=new lt.Vector3().addVectors(Fr,Yr).multiplyScalar(.5)),Cn&&(dn=new at.Cylinder(rr.clone(),mr.clone(),Kn),Un=new at.Cylinder(ur.clone(),vr.clone(),Kn),qn=new at.Cylinder(Fr.clone(),Ar.clone(),Kn),Et.intersectionShape.cylinder.push(dn),Et.intersectionShape.cylinder.push(Un),Et.intersectionShape.cylinder.push(qn)),Mn&&(In=new at.Cylinder(Sr.clone(),mr.clone(),Kn),Wn=new at.Cylinder(gr.clone(),vr.clone(),Kn),ar=new at.Cylinder(Yr.clone(),Ar.clone(),Kn),hr.intersectionShape.cylinder.push(In),hr.intersectionShape.cylinder.push(Wn),hr.intersectionShape.cylinder.push(ar))))}}}var Gr=!1,jr=0,er=!1;for(un=0;un<Et.bonds.length;un++)Tn=cn,Et.bondStyles&&Et.bondStyles[un]&&(Pn=Et.bondStyles[un],Pn.singleBond&&(Tn=!0),Pn.radius&&Pn.radius!=Bt&&(er=!0)),(Tn||Et.bondOrder[un]==1)&&jr++;er?jr>0&&(Gr=!0):jr==0&&(Et.bonds.length>0||Ot.showNonBonded)&&(Gr=!0),Gr&&(nn=Bt,Pt.imposter?this.drawSphereImposter(Pt.sphereGeometry,Et,nn,fr):yt.GLDraw.drawSphere(Pt,Et,nn,fr))}}}createMolObj(Et,wt){wt=wt||{};var Pt=new st.Object3D,Ft=[],Nt={},Ot={},Bt=this.drawAtomSphere,Xt=null,Zt=null;wt.supportsImposters?(Bt=this.drawAtomImposter,Xt=new st.Geometry(!0),Xt.imposter=!0,Zt=new st.Geometry(!0,!0),Zt.imposter=!0,Zt.sphereGeometry=new st.Geometry(!0),Zt.sphereGeometry.imposter=!0,Zt.drawnCaps={}):wt.supportsAIA?(Bt=this.drawAtomInstanced,Xt=new st.Geometry(!1,!0,!0),Xt.instanced=!0,Zt=new st.Geometry(!0)):(Xt=new st.Geometry(!0),Zt=new st.Geometry(!0));var rn,Gt,nn,cn,an={},mn=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(rn=0,nn=Et.length;rn<nn;rn++){var En=Et[rn];if(En&&En.style){(En.clickable||En.hoverable)&&En.intersectionShape===void 0&&(En.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),cn={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(Gt in cn)En.style[Gt]?En.style[Gt].opacity?cn[Gt]=parseFloat(En.style[Gt].opacity):cn[Gt]=1:cn[Gt]=void 0,an[Gt]?cn[Gt]!=null&&an[Gt]!=cn[Gt]&&(console.log("Warning: "+Gt+" opacity is ambiguous"),an[Gt]=1):an[Gt]=cn[Gt];Bt.call(this,En,Xt),this.drawAtomClickSphere(En),this.drawAtomCross(En,Ot),this.drawBondLines(En,Et,Nt),this.drawBondSticks(En,Et,Zt),typeof En.style.cartoon<"u"&&!En.style.cartoon.hidden&&(En.style.cartoon.color==="spectrum"&&typeof En.resi=="number"&&!En.hetflag&&(En.resi<mn[0]&&(mn[0]=En.resi),En.resi>mn[1]&&(mn[1]=En.resi)),Ft.push(En))}}if(Ft.length>0&&(0,vt.drawCartoon)(Pt,Ft,mn,this.defaultCartoonQuality),Xt&&Xt.vertices>0){Xt.initTypedArrays();var Cn=null,Mn=null;Xt.imposter?Cn=new st.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):Xt.instanced?(Mn=new st.Geometry(!0),yt.GLDraw.drawSphere(Mn,{x:0,y:0,z:0},1,new dt.Color(.5,.5,.5)),Mn.initTypedArrays(),Cn=new st.InstancedMaterial({sphereMaterial:new st.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:Mn})):Cn=new st.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),an.sphere<1&&an.sphere>=0&&(Cn.transparent=!0,Cn.opacity=an.sphere),Mn=new st.Mesh(Xt,Cn),Pt.add(Mn)}if(Zt.vertices>0){var un=null,Tn=null,Pn=Zt.sphereGeometry;(!Pn||typeof Pn.vertices>"u"||Pn.vertices==0)&&(Pn=null),Zt.initTypedArrays(),Pn&&Pn.initTypedArrays();var dn={ambient:0,vertexColors:!0,reflectivity:0};Zt.imposter?(un=new st.StickImposterMaterial(dn),Tn=new st.SphereImposterMaterial(dn)):(un=new st.MeshLambertMaterial(dn),Tn=new st.MeshLambertMaterial(dn),un.wireframe&&(Zt.setUpWireframe(),Pn&&Pn.setUpWireframe())),an.stick<1&&an.stick>=0&&(un.transparent=!0,un.opacity=an.stick,Tn.transparent=!0,Tn.opacity=an.stick);var Un=new st.Mesh(Zt,un);if(Pt.add(Un),Pn){var qn=new st.Mesh(Pn,Tn);Pt.add(qn)}}var In;for(rn in Nt)if(Nt.hasOwnProperty(rn)){In=rn;var Wn=new st.LineBasicMaterial({linewidth:In,vertexColors:!0});an.line<1&&an.line>=0&&(Wn.transparent=!0,Wn.opacity=an.line),Nt[rn].initTypedArrays();var ar=new st.Line(Nt[rn],Wn,st.LineStyle.LinePieces);Pt.add(ar)}for(rn in Ot)if(Ot.hasOwnProperty(rn)){In=rn;var fr=new st.LineBasicMaterial({linewidth:In,vertexColors:!0});an.cross<1&&an.cross>=0&&(fr.transparent=!0,fr.opacity=an.cross),Ot[rn].initTypedArrays();var mr=new st.Line(Ot[rn],fr,st.LineStyle.LinePieces);Pt.add(mr)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var vr=new st.Object3D,Ar;for(Ar=0;Ar<this.modelData.symmetries.length;Ar++){var $r=new st.Object3D;$r=Pt.clone(),$r.matrix.copy(this.modelData.symmetries[Ar]),$r.matrixAutoUpdate=!1,vr.add($r)}return vr}return Pt}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(Et){this.atoms=Et.atoms,this.frames=Et.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const Et=this.modelData.cryst;this.modelData.cryst.matrix=(0,lt.conversionMatrix3)(Et.a,Et.b,Et.c,Et.alpha,Et.beta,Et.gamma)}return this.modelData.cryst}else return null}setCrystData(Et,wt,Pt,Ft,Nt,Ot){Et=Et||1,wt=wt||1,Pt=Pt||1,Ft=Ft||90,Nt=Nt||90,Ot=Ot||90;const Bt=(0,lt.conversionMatrix3)(Et,wt,Pt,Ft,Nt,Ot);this.modelData.cryst={a:Et,b:wt,c:Pt,alpha:Ft,beta:Nt,gamma:Ot,matrix:Bt}}setCrystMatrix(Et){Et=Et||new lt.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:Et}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(Et){typeof Et>"u"?this.modelData.symmetries=[this.idMatrix]:this.modelData.symmetries=Et}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(Et,wt,Pt,Ft){var Nt=wt-Et;return Nt<-Pt?wt+Ft:Nt>Pt?wt-Ft:wt}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var Et=this.box[0],wt=this.box[1],Pt=this.box[2],Ft=Et*.9,Nt=wt*.9,Ot=Pt*.9,Bt=0;Bt<this.atomdfs.length;Bt++)for(var Xt=this.atomdfs[Bt],Zt=1;Zt<Xt.length;Zt++){var rn=this.atoms[Xt[Zt][0]],Gt=this.atoms[Xt[Zt][1]];rn.x=this.adjustCoord(Gt.x,rn.x,Ft,Et),rn.y=this.adjustCoord(Gt.y,rn.y,Nt,wt),rn.z=this.adjustCoord(Gt.z,rn.z,Ot,Pt)}}setFrame(Et,wt){var Pt=this.getNumFrames();let Ft=this;return new Promise(function(Nt,Ot){if(Pt==0&&Nt(),(Et<0||Et>=Pt)&&(Et=Pt-1),Ft.frames.url!=null){var Bt=Ft.frames.url;(0,_t.getbin)(Bt+"/traj/frame/"+Et+"/"+Ft.frames.path,void 0,"POST",void 0).then(function(Xt){for(var Zt=new Float32Array(Xt,44),rn=0,Gt=0;Gt<Ft.atoms.length;Gt++)Ft.atoms[Gt].x=Zt[rn++],Ft.atoms[Gt].y=Zt[rn++],Ft.atoms[Gt].z=Zt[rn++];Ft.box&&Ft.atomdfs&&Ft.adjustCoordinatesToBox(),Nt()}).catch(Ot)}else Ft.atoms=Ft.frames[Et],Nt();Ft.molObj=null,Ft.modelDatas&&Et<Ft.modelDatas.length&&(Ft.modelData=Ft.modelDatas[Et],Ft.unitCellObjects&&wt&&(wt.removeUnitCell(Ft),wt.addUnitCell(Ft)))})}addFrame(Et){this.frames.push(Et)}vibrate(Et=10,wt=1,Pt=!1,Ft,Nt){var Ot=0,Bt=Et;Pt&&(Ot=-Et,Bt=Et),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),Ot<Bt&&(this.frames=[]),Pt&&(this.frames.origIndex=Et);for(var Xt=Ot;Xt<Bt;Xt++){var Zt=[],rn=this.frames.length;if(Xt==0&&!Nt){this.frames.push(this.atoms);continue}for(var Gt=0;Gt<this.atoms.length;Gt++){var nn=(0,_t.getAtomProperty)(this.atoms[Gt],"dx"),cn=(0,_t.getAtomProperty)(this.atoms[Gt],"dy"),an=(0,_t.getAtomProperty)(this.atoms[Gt],"dz"),mn=new lt.Vector3(nn,cn,an),En=new lt.Vector3(this.atoms[Gt].x,this.atoms[Gt].y,this.atoms[Gt].z),Cn=Xt*wt/Et;mn.multiplyScalar(Cn),En.add(mn);var Mn={};for(var un in this.atoms[Gt])Mn[un]=this.atoms[Gt][un];if(Mn.x=En.x,Mn.y=En.y,Mn.z=En.z,Zt.push(Mn),Ft&&Nt){var Tn=(0,_t.extend)({},Nt),Pn=new lt.Vector3(nn,cn,an);if(Pn.multiplyScalar(wt),Pn.add(En),Tn.start=En,Tn.end=Pn,Tn.frame=rn,!Tn.color){var dn=Mn.style.sphere;dn||(dn=Mn.style.stick),dn||(dn=Mn.style.line),Tn.color=(0,_t.getColorFromStyle)(Mn,dn)}Ft.addArrow(Tn)}}this.frames.push(Zt)}}setAtomDefaults(Et){for(let wt=0;wt<Et.length;wt++){let Pt=Et[wt];Pt&&(Pt.style=Pt.style||(0,_t.deepCopy)($t.defaultAtomStyle),Pt.color=Pt.color||this.ElementColors[Pt.elem]||this.defaultColor,Pt.model=this.id,(Pt.clickable||Pt.hoverable)&&(Pt.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(Et,wt,Pt={}){var Ft=$t.parseMolData(Et,wt,Pt);this.dontDuplicateAtoms=!Pt.duplicateAssemblyAtoms;var Nt=Ft.modelData;if(Nt&&(Array.isArray(Nt)?(this.modelData=Nt[0],Pt.frames&&(this.modelDatas=Nt)):this.modelData=Nt),Ft.box?this.box=Ft.box:this.box=null,this.frames.length==0){for(let Bt=0;Bt<Ft.length;Bt++)Ft[Bt].length!=0&&this.frames.push(Ft[Bt]);this.frames[0]&&(this.atoms=this.frames[0])}else if(Pt.frames)for(let Bt=0;Bt<Ft.length;Bt++)this.frames.push(Ft[Bt]);else for(var Ot=0;Ot<Ft.length;Ot++)this.addAtoms(Ft[Ot]);for(let Bt=0;Bt<this.frames.length;Bt++)this.setAtomDefaults(this.frames[Bt]);Pt.vibrate&&Pt.vibrate.frames&&Pt.vibrate.amplitude&&this.vibrate(Pt.vibrate.frames,Pt.vibrate.amplitude),Pt.style&&this.setStyle({},Pt.style)}setDontDuplicateAtoms(Et){this.dontDuplicateAtoms=Et}setModelData(Et){this.modelData=Et}propertyMatches(Et,wt){if(Et==wt)return!0;if(typeof wt=="string"&&typeof Et=="number"){var Pt=wt.match(/(-?\d+)\s*-\s*(-?\d+)/);if(Pt){var Ft=parseInt(Pt[1]),Nt=parseInt(Pt[2]);if(Pt&&Et>=Ft&&Et<=Nt)return!0}}return!1}static deepCopyAndCache(Et,wt){if(typeof Et!="object"||Et==null||Et.__cache_created)return Et;const Pt={};for(const Ft in Et){const Nt=Et[Ft];if(Array.isArray(Nt)){Pt[Ft]=[];for(let Ot=0;Ot<Nt.length;Ot++)Pt[Ft].push($t.deepCopyAndCache(Nt[Ot],wt))}else typeof Nt=="object"&&Ft!="properties"&&Ft!="model"?Pt[Ft]=$t.deepCopyAndCache(Nt,wt):Pt[Ft]=Nt;if(Ft=="and"||Ft=="or"){const Ot=[];for(const Bt of Pt[Ft]){const Xt=new Set;for(const Zt of wt.selectedAtoms(Bt))Xt.add(Zt.index);Ot.push(Xt)}if(Ft=="and"){const Bt=function(Zt,rn){const Gt=new Set;for(const nn of rn)Zt.has(nn)&&Gt.add(nn);return Gt};let Xt=new Set(Ot[0]);for(const Zt of Ot.splice(1))Xt=Bt(Xt,Zt);Pt[Ft].__cached_results=Xt}else if(Ft=="or"){const Bt=new Set;for(const Xt of Ot)for(const Zt of Xt)Bt.add(Zt);Pt[Ft].__cached_results=Bt}}}return Pt.__cache_created=!0,Pt}atomIsSelected(Et,wt){if(typeof wt>"u")return!0;var Pt=!!wt.invert,Ft=!0;for(var Nt in wt)if(Nt=="and"||Nt=="or"||Nt=="not"){if(Nt=="not"){if(this.atomIsSelected(Et,wt[Nt])){Ft=!1;break}}else if(wt[Nt].__cached_results===void 0&&(wt=$t.deepCopyAndCache(wt,this)),Ft=wt[Nt].__cached_results.has(Et.index),!Ft)break}else if(Nt==="predicate"){if(!wt.predicate(Et)){Ft=!1;break}}else if(Nt=="properties"&&Et[Nt]){for(var Ot in wt.properties)if(!Ot.startsWith("__cache")){if(typeof Et.properties[Ot]>"u"){Ft=!1;break}if(Et.properties[Ot]!=wt.properties[Ot]){Ft=!1;break}}}else if(wt.hasOwnProperty(Nt)&&!$t.ignoredKeys.has(Nt)&&!Nt.startsWith("__cache")){if(typeof Et[Nt]>"u"){Ft=!1;break}var Bt=!1;if(Nt==="bonds"){var Xt=wt[Nt];if(Xt!=Et.bonds.length){Ft=!1;break}}else if(Array.isArray(wt[Nt])){var Zt=wt[Nt],rn=Et[Nt];for(let Gt=0;Gt<Zt.length;Gt++)if(this.propertyMatches(rn,Zt[Gt])){Bt=!0;break}if(!Bt){Ft=!1;break}}else{let Gt=wt[Nt];if(!this.propertyMatches(Et[Nt],Gt)){Ft=!1;break}}}return Pt?!Ft:Ft}static squaredDistance(Et,wt){var Pt=wt.x-Et.x,Ft=wt.y-Et.y,Nt=wt.z-Et.z;return Pt*Pt+Ft*Ft+Nt*Nt}expandAtomList(Et,wt){if(wt<=0)return Et;for(var Pt=(0,_t.getExtent)(Et,void 0),Ft=[[],[],[]],Nt=0;Nt<3;Nt++)Ft[0][Nt]=Pt[0][Nt]-wt,Ft[1][Nt]=Pt[1][Nt]+wt,Ft[2][Nt]=Pt[2][Nt];var Ot=[];for(let rn=0;rn<this.atoms.length;rn++){var Bt=this.atoms[rn].x,Xt=this.atoms[rn].y,Zt=this.atoms[rn].z;Bt>=Ft[0][0]&&Bt<=Ft[1][0]&&Xt>=Ft[0][1]&&Xt<=Ft[1][1]&&Zt>=Ft[0][2]&&Zt<=Ft[1][2]&&(Bt>=Pt[0][0]&&Bt<=Pt[1][0]&&Xt>=Pt[0][1]&&Xt<=Pt[1][1]&&Zt>=Pt[0][2]&&Zt<=Pt[1][2]||Ot.push(this.atoms[rn]))}return Ot}static getFloat(Et){return typeof Et=="number"?Et:parseFloat(Et)}selectedAtoms(Et,wt){var Pt=[];Et=$t.deepCopyAndCache(Et||{},this),wt||(wt=this.atoms);for(var Ft=wt.length,Nt=0;Nt<Ft;Nt++){var Ot=wt[Nt];Ot&&this.atomIsSelected(Ot,Et)&&Pt.push(Ot)}if(Et.hasOwnProperty("expand")){const Mn=$t.getFloat(Et.expand);let un=this.expandAtomList(Pt,Mn),Tn=Pt.length;const Pn=Mn*Mn;for(let dn=0;dn<un.length;dn++)for(let Un=0;Un<Tn;Un++){var Bt=$t.squaredDistance(un[dn],Pt[Un]);Bt<Pn&&Bt>0&&Pt.push(un[dn])}}if(Et.hasOwnProperty("within")&&Et.within.hasOwnProperty("sel")&&Et.within.hasOwnProperty("distance")){var Xt=this.selectedAtoms(Et.within.sel,this.atoms),Zt={};const Mn=$t.getFloat(Et.within.distance),un=Mn*Mn;for(let Tn=0;Tn<Xt.length;Tn++)for(let Pn=0;Pn<Pt.length;Pn++){let dn=$t.squaredDistance(Xt[Tn],Pt[Pn]);dn<un&&dn>0&&(Zt[Pn]=1)}var rn=[];if(Et.within.invert)for(let Tn=0;Tn<Pt.length;Tn++)Zt[Tn]||rn.push(Pt[Tn]);else for(let Tn in Zt)rn.push(Pt[Tn]);Pt=rn}if(Et.hasOwnProperty("byres")){var Gt={},nn=[],cn=[];for(let Mn=0;Mn<Pt.length;Mn++){let un=Pt[Mn];var an=un.chain,mn=un.resi;if(Gt[an]===void 0&&(Gt[an]={}),un.hasOwnProperty("resi")&&Gt[an][mn]===void 0){for(Gt[an][mn]=!0,cn.push(un);cn.length>0;)if(un=cn.pop(),an=un.chain,mn=un.resi,nn[un.index]===void 0){nn[un.index]=!0;for(var En=0;En<un.bonds.length;En++){var Cn=this.atoms[un.bonds[En]];nn[Cn.index]===void 0&&Cn.hasOwnProperty("resi")&&Cn.chain==an&&Cn.resi==mn&&(cn.push(Cn),Pt.push(Cn))}}}}}return Pt}addAtoms(Et){this.molObj=null;var wt=this.atoms.length,Pt=[],Ft;for(Ft=0;Ft<Et.length;Ft++)typeof Et[Ft].index>"u"&&(Et[Ft].index=Ft),typeof Et[Ft].serial>"u"&&(Et[Ft].serial=Ft),Pt[Et[Ft].index]=wt+Ft;for(Ft=0;Ft<Et.length;Ft++){var Nt=Et[Ft],Ot=Pt[Nt.index],Bt=(0,_t.extend)({},Nt);Bt.index=Ot,Bt.bonds=[],Bt.bondOrder=[],Bt.model=this.id,Bt.style=Bt.style||(0,_t.deepCopy)($t.defaultAtomStyle),typeof Bt.color>"u"&&(Bt.color=this.ElementColors[Bt.elem]||this.defaultColor);for(var Xt=Nt.bonds?Nt.bonds.length:0,Zt=0;Zt<Xt;Zt++){var rn=Pt[Nt.bonds[Zt]];typeof rn<"u"&&(Bt.bonds.push(rn),Bt.bondOrder.push(Nt.bondOrder?Nt.bondOrder[Zt]:1))}this.atoms.push(Bt)}}assignBonds(){(0,Tt.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(Et){this.molObj=null;var wt=[],Pt;for(Pt=0;Pt<Et.length;Pt++)wt[Et[Pt].index]=!0;var Ft=[];for(Pt=0;Pt<this.atoms.length;Pt++){var Nt=this.atoms[Pt];wt[Nt.index]||Ft.push(Nt)}this.atoms=[],this.addAtoms(Ft)}setStyle(Et,wt,Pt){typeof wt>"u"&&typeof Pt>"u"&&(wt=Et,Et={}),Et=Et,typeof wt=="string"&&(wt=(0,_t.specStringToObject)(wt));var Ft=!1,Nt=this,Ot=function(Xt){var Zt=Nt.selectedAtoms(Et,Xt);for(let rn=0;rn<Xt.length;rn++)Xt[rn]&&(Xt[rn].capDrawn=!1);for(let rn=0;rn<Zt.length;rn++){Ft=!0,(Zt[rn].clickable||Zt[rn].hoverable)&&(Zt[rn].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Pt||(Zt[rn].style={});for(let Gt in wt)wt.hasOwnProperty(Gt)&&(Zt[rn].style[Gt]=Zt[rn].style[Gt]||{},Object.assign(Zt[rn].style[Gt],wt[Gt]))}};if(Et.frame!==void 0&&Et.frame<this.frames.length){let Xt=Et.frame;Xt<0&&(Xt=this.frames.length+Xt),Ot(this.frames[Xt])}else{Ot(this.atoms);for(var Bt=0;Bt<this.frames.length;Bt++)this.frames[Bt]!==this.atoms&&Ot(this.frames[Bt])}Ft&&(this.molObj=null)}setClickable(Et,wt,Pt){if(wt=!!wt,Pt=(0,_t.makeFunction)(Pt),Pt===null){console.log("Callback is not a function");return}var Ft=this.selectedAtoms(Et,this.atoms),Nt=Ft.length;for(let Ot=0;Ot<Nt;Ot++)Ft[Ot].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Ft[Ot].clickable=wt,Pt&&(Ft[Ot].callback=Pt);Nt>0&&(this.molObj=null)}setHoverable(Et,wt,Pt,Ft){if(wt=!!wt,Pt=(0,_t.makeFunction)(Pt),Ft=(0,_t.makeFunction)(Ft),Pt===null){console.log("Hover_callback is not a function");return}if(Ft===null){console.log("Unhover_callback is not a function");return}var Nt=this.selectedAtoms(Et,this.atoms),Ot=Nt.length;for(let Bt=0;Bt<Ot;Bt++)Nt[Bt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Nt[Bt].hoverable=wt,Pt&&(Nt[Bt].hover_callback=Pt),Ft&&(Nt[Bt].unhover_callback=Ft);Ot>0&&(this.molObj=null)}enableContextMenu(Et,wt){wt=!!wt;var Pt,Ft=this.selectedAtoms(Et,this.atoms),Nt=Ft.length;for(Pt=0;Pt<Nt;Pt++)Ft[Pt].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Ft[Pt].contextMenuEnabled=wt;Nt>0&&(this.molObj=null)}setColorByElement(Et,wt){if(!(this.molObj!==null&&$t.sameObj(wt,this.lastColors))){this.lastColors=wt;var Pt=this.selectedAtoms(Et,Pt);Pt.length>0&&(this.molObj=null);for(var Ft=0;Ft<Pt.length;Ft++){var Nt=Pt[Ft];typeof wt[Nt.elem]<"u"&&(Nt.color=wt[Nt.elem])}}}setColorByProperty(Et,wt,Pt,Ft){var Nt,Ot,Bt=this.selectedAtoms(Et,Bt);for(this.lastColors=null,Bt.length>0&&(this.molObj=null),typeof Pt=="string"&&typeof bt.Gradient.builtinGradients[Pt]<"u"&&(Pt=new bt.Gradient.builtinGradients[Pt]),Pt=Pt,Ft||(Ft=Pt.range()),Ft||(Ft=(0,_t.getPropertyRange)(Bt,wt)),Nt=0;Nt<Bt.length;Nt++){Ot=Bt[Nt];var Xt=(0,_t.getAtomProperty)(Ot,wt);Xt!=null&&(Ot.color=Pt.valueToHex(parseFloat(Ot.properties[wt]),Ft))}}setColorByFunction(Et,wt){var Pt=this.selectedAtoms(Et,Pt);if(typeof wt=="function"){this.lastColors=null,Pt.length>0&&(this.molObj=null);for(let Ft=0;Ft<Pt.length;Ft++){let Nt=Pt[Ft];Nt.color=wt(Nt)}}}toCDObject(Et=!1){var wt={a:[],b:[]};Et&&(wt.s=[]);for(let Ft=0;Ft<this.atoms.length;Ft++){let Nt={},Ot=this.atoms[Ft];if(Nt.x=Ot.x,Nt.y=Ot.y,Nt.z=Ot.z,Ot.elem!="C"&&(Nt.l=Ot.elem),Et){for(var Pt=0;Pt<wt.s.length&&JSON.stringify(Ot.style)!==JSON.stringify(wt.s[Pt]);)Pt++;Pt===wt.s.length&&wt.s.push(Ot.style),Pt!==0&&(Nt.s=Pt)}wt.a.push(Nt);for(let Bt=0;Bt<Ot.bonds.length;Bt++){let Xt=Ft,Zt=Ot.bonds[Bt];if(Xt>=Zt)continue;let rn={b:Xt,e:Zt},Gt=Ot.bondOrder[Bt];Gt!=1&&(rn.o=Gt),wt.b.push(rn)}}return wt}globj(Et,wt){(this.molObj===null||wt.regen)&&(this.molObj=this.createMolObj(this.atoms,wt),this.renderedMolObj&&(Et.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),Et.add(this.renderedMolObj))}exportVRML(){var Et=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return Et.vrml()}removegl(Et){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),Et.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(Et,wt,Pt,Ft){for(var Nt=this.selectedAtoms(wt,Nt),Ot=(0,_t.deepCopy)(Ft),Bt=0;Bt<Nt.length;Bt++){var Xt=Nt[Bt],Zt=null;typeof Xt[Et]<"u"?Zt=String(Xt[Et]):typeof Xt.properties[Et]<"u"&&(Zt=String(Xt.properties[Et])),Zt!=null&&(Ot.position=Xt,Pt.addLabel(Zt,Ot))}}addResLabels(Et,wt,Pt,Ft=!1){var Nt=[],Ot=function(Xt,Zt){for(var rn=Xt.selectedAtoms(Et,rn),Gt={},nn=0;nn<rn.length;nn++){var cn=rn[nn],an=cn.chain,mn=cn.resn,En=cn.resi,Cn=mn+""+En;Gt[an]||(Gt[an]={}),Gt[an][Cn]||(Gt[an][Cn]=[]),Gt[an][Cn].push(cn)}var Mn=(0,_t.deepCopy)(Pt);for(let Tn in Gt)if(Gt.hasOwnProperty(Tn)){var un=Gt[Tn];for(let Pn in un)if(un.hasOwnProperty(Pn)){let dn=un[Pn],Un=new lt.Vector3(0,0,0);for(let In=0;In<dn.length;In++){let Wn=dn[In];Un.x+=Wn.x,Un.y+=Wn.y,Un.z+=Wn.z}Un.divideScalar(dn.length),Mn.position=Un,Mn.frame=Zt;let qn=wt.addLabel(Pn,Mn,void 0,!0);Nt.push(qn)}}};if(Ft){var Bt=this.getNumFrames();let Xt=this.atoms;for(let Zt=0;Zt<Bt;Zt++)this.frames[Zt]&&(this.atoms=this.frames[Zt],Ot(this,Zt));this.atoms=Xt}else Ot(this);return Nt}setupDFS(){this.atomdfs=[];var Et=this,wt=new Int8Array(this.atoms.length);wt.fill(0);for(var Pt=function(Bt,Xt,Zt){Zt.push([Bt,Xt]);var rn=Et.atoms[Bt];wt[Bt]=1;for(var Gt=0;Gt<rn.bonds.length;Gt++){var nn=rn.bonds[Gt];Et.atoms[nn]&&!wt[nn]&&Pt(nn,Bt,Zt)}},Ft=0;Ft<this.atoms.length;Ft++){var Nt=this.atoms[Ft];if(Nt&&!wt[Ft]){var Ot=[];Pt(Ft,-1,Ot),this.atomdfs.push(Ot)}}}setCoordinatesFromURL(Et,wt){this.frames=[];var Pt=this;return this.box&&this.setupDFS(),Et.startsWith("http")||(Et="http://"+Et),(0,_t.get)(Et+"/traj/numframes/"+wt,function(Ft){if(!isNaN(parseInt(Ft)))return Pt.frames.push(Pt.atoms),Pt.frames.numFrames=Ft,Pt.frames.url=Et,Pt.frames.path=wt,Pt.setFrame(0)})}setCoordinates(Et,wt){if(wt=wt||"",!Et)return[];if(/\.gz$/.test(wt)){wt=wt.replace(/\.gz$/,"");try{Et=(0,_t.inflateString)(Et)}catch(Gt){console.log(Gt)}}var Pt={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(Pt.hasOwnProperty(wt)){this.frames=[];for(var Ft=this.atoms.length,Nt=$t.parseCrd(Et,wt),Ot=0;Ot<Nt.length;){for(var Bt=[],Xt=0;Xt<Ft;Xt++){var Zt={};for(var rn in this.atoms[Xt])Zt[rn]=this.atoms[Xt][rn];Bt[Xt]=Zt,Bt[Xt].x=Nt[Ot++],Bt[Xt].y=Nt[Ot++],Bt[Xt].z=Nt[Ot++]}this.frames.push(Bt)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(Et){}static parseCrd(Et,wt){var Pt=[],Ft=0;if(wt=="pdb")for(var Nt=Et.indexOf(`
ATOM`);Nt!=-1;){for(;Et.slice(Nt,Nt+5)==`
ATOM`||Et.slice(Nt,Nt+7)==`
HETATM`;)Pt[Ft++]=parseFloat(Et.slice(Nt+31,Nt+39)),Pt[Ft++]=parseFloat(Et.slice(Nt+39,Nt+47)),Pt[Ft++]=parseFloat(Et.slice(Nt+47,Nt+55)),Nt=Et.indexOf(`
`,Nt+54),Et.slice(Nt,Nt+4)==`
TER`&&(Nt=Et.indexOf(`
`,Nt+5));Nt=Et.indexOf(`
ATOM`,Nt)}else if(wt=="netcdf"){var Ot=new Ct.NetCDFReader(Et);Pt=[].concat.apply([],Ot.getDataVariable("coordinates"))}else{if(wt=="array"||Array.isArray(Et))return Et.flat(2);{let Bt=Et.indexOf(`
`);wt=="inpcrd"&&(Bt=Et.indexOf(`
`,Bt+1)),Et=Et.slice(Bt+1),Pt=Et.match(/\S+/g).map(parseFloat)}}return Pt}static parseMolData(Et,wt="",Pt){if(!Et)return[];if(/\.gz$/.test(wt)){wt=wt.replace(/\.gz$/,"");try{wt.match(/bcif/i)?Et=(0,_t.inflateString)(Et,!1):Et=(0,_t.inflateString)(Et)}catch(Ot){console.log(Ot)}}typeof Mt.Parsers[wt]>"u"&&(wt=wt.split(".").pop(),typeof Mt.Parsers[wt]>"u"&&(console.log("Unknown format: "+wt),Et instanceof Uint8Array?wt="bcif":Et.match(/^@<TRIPOS>MOLECULE/gm)?wt="mol2":Et.match(/^data_/gm)&&Et.match(/^loop_/gm)?wt="cif":Et.match(/^HETATM/gm)||Et.match(/^ATOM/gm)?wt="pdb":Et.match(/ITEM: TIMESTEP/gm)?wt="lammpstrj":Et.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?wt="sdf":Et.match(/^%VERSION\s+VERSION_STAMP/gm)?wt="prmtop":wt="xyz",console.log("Best guess: "+wt)));var Ft=Mt.Parsers[wt],Nt=Ft(Et,Pt);return Nt}}$t.defaultAtomStyle={line:{}},$t.defaultlineWidth=1,$t.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},$t.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])},"./src/GLShape.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{GLShape:()=>Ct,splitMesh:()=>Tt});var st=rt("./src/WebGL/index.ts"),at=rt("./src/WebGL/shapes/index.ts"),lt=rt("./src/WebGL/math/index.ts"),dt=rt("./src/colors.ts"),yt=rt("./src/ProteinSurface4.ts"),vt=rt("./src/VolumeData.ts"),_t=rt("./src/GLDraw.ts"),bt=rt("./src/glcartoon.ts"),Mt=rt("./src/utilities.ts");class Ct{static finalizeGeo(Rt){var Et=Rt.updateGeoGroup(0);Et.vertices>0&&Et.truncateArrayBuffers(!0,!0)}static updateColor(Rt,Et){Et=Et||dt.CC.color(Et),Rt.colorsNeedUpdate=!0;var wt,Pt,Ft;Et.constructor!==Array&&(wt=Et.r,Pt=Et.g,Ft=Et.b);for(let Nt in Rt.geometryGroups){let Ot=Rt.geometryGroups[Nt],Bt=Ot.colorArray;for(let Xt=0,Zt=Ot.vertices;Xt<Zt;++Xt){if(Et.constructor===Array){let rn=Et[Xt];wt=rn.r,Pt=rn.g,Ft=rn.b}Bt[Xt*3]=wt,Bt[Xt*3+1]=Pt,Bt[Xt*3+2]=Ft}}}static drawArrow(Rt,Et,wt){var Pt=wt.start,Ft=wt.end,Nt=wt.radius,Ot=wt.radiusRatio,Bt=wt.mid,Xt=wt.midpos;if(!(Pt&&Ft))return;var Zt=Et.updateGeoGroup(51),rn=new lt.Vector3(Ft.x,Ft.y,Ft.z).sub(Pt);if(Xt){let lr=rn.length();Xt>0?Bt=Xt/lr:Bt=(lr+Xt)/lr}rn.multiplyScalar(Bt);var Gt=new lt.Vector3(Pt.x,Pt.y,Pt.z).add(rn),nn=rn.clone().negate();let cn=new lt.Vector3(Pt.x,Pt.y,Pt.z);Rt.intersectionShape.cylinder.push(new at.Cylinder(cn,Gt.clone(),Nt)),Rt.intersectionShape.sphere.push(new at.Sphere(cn,Nt));var an=[];an[0]=rn.clone(),Math.abs(an[0].x)>1e-4?an[0].y+=1:an[0].x+=1,an[0].cross(rn),an[0].normalize(),an[4]=an[0].clone(),an[4].crossVectors(an[0],rn),an[4].normalize(),an[8]=an[0].clone().negate(),an[12]=an[4].clone().negate(),an[2]=an[0].clone().add(an[4]).normalize(),an[6]=an[4].clone().add(an[8]).normalize(),an[10]=an[8].clone().add(an[12]).normalize(),an[14]=an[12].clone().add(an[0]).normalize(),an[1]=an[0].clone().add(an[2]).normalize(),an[3]=an[2].clone().add(an[4]).normalize(),an[5]=an[4].clone().add(an[6]).normalize(),an[7]=an[6].clone().add(an[8]).normalize(),an[9]=an[8].clone().add(an[10]).normalize(),an[11]=an[10].clone().add(an[12]).normalize(),an[13]=an[12].clone().add(an[14]).normalize(),an[15]=an[14].clone().add(an[0]).normalize();var mn=Zt.vertices,En=Zt.vertexArray,Cn=Zt.faceArray,Mn=Zt.normalArray,un=Zt.lineArray,Tn,Pn,dn;for(Pn=0,dn=an.length;Pn<dn;++Pn){Tn=3*(mn+3*Pn);var Un=an[Pn].clone().multiplyScalar(Nt).add(Pt),qn=an[Pn].clone().multiplyScalar(Nt).add(Gt),In=an[Pn].clone().multiplyScalar(Nt*Ot).add(Gt);if(En[Tn]=Un.x,En[Tn+1]=Un.y,En[Tn+2]=Un.z,En[Tn+3]=qn.x,En[Tn+4]=qn.y,En[Tn+5]=qn.z,En[Tn+6]=In.x,En[Tn+7]=In.y,En[Tn+8]=In.z,Pn>0){var Wn=En[Tn-3],ar=En[Tn-2],fr=En[Tn-1],mr=new lt.Vector3(Wn,ar,fr),vr=new lt.Vector3(Ft.x,Ft.y,Ft.z),Ar=Gt.clone(),$r=new lt.Vector3(In.x,In.y,In.z);Rt.intersectionShape.triangle.push(new at.Triangle($r,vr,mr)),Rt.intersectionShape.triangle.push(new at.Triangle(mr.clone(),Ar,$r.clone()))}}Zt.vertices+=48,Tn=Zt.vertices*3,En[Tn]=Pt.x,En[Tn+1]=Pt.y,En[Tn+2]=Pt.z,En[Tn+3]=Gt.x,En[Tn+4]=Gt.y,En[Tn+5]=Gt.z,En[Tn+6]=Ft.x,En[Tn+7]=Ft.y,En[Tn+8]=Ft.z,Zt.vertices+=3;var Mr,Jn,hr,wr,Nr,Fr,Yr,cs,cr,Qn,_r,Ir,pr,Tr,Wr,Kn,rr,ur,Sr,gr=Zt.vertices-3,Gr=Zt.vertices-2,jr=Zt.vertices-1,er=gr*3,yr=Gr*3,Er=jr*3;for(Pn=0,dn=an.length-1;Pn<dn;++Pn){var Hr=mn+3*Pn;Tn=Hr*3,Jn=Zt.faceidx,hr=Zt.lineidx,wr=Hr,Qn=wr*3,Nr=Hr+1,_r=Nr*3,Fr=Hr+2,Ir=Fr*3,Yr=Hr+4,pr=Yr*3,cs=Hr+5,Tr=cs*3,cr=Hr+3,Wr=cr*3,Kn=rr=an[Pn],ur=Sr=an[Pn+1],Mn[Qn]=Kn.x,Mn[_r]=rr.x,Mn[Wr]=Sr.x,Mn[Qn+1]=Kn.y,Mn[_r+1]=rr.y,Mn[Wr+1]=Sr.y,Mn[Qn+2]=Kn.z,Mn[_r+2]=rr.z,Mn[Wr+2]=Sr.z,Mn[_r]=rr.x,Mn[pr]=ur.x,Mn[Wr]=Sr.x,Mn[_r+1]=rr.y,Mn[pr+1]=ur.y,Mn[Wr+1]=Sr.y,Mn[_r+2]=rr.z,Mn[pr+2]=ur.z,Mn[Wr+2]=Sr.z,Mn[Ir]=rr.x,Mn[Tr]=ur.x,Mn[Ir+1]=rr.y,Mn[Tr+1]=ur.y,Mn[Ir+2]=rr.z,Mn[Tr+2]=ur.z,Cn[Jn]=wr,Cn[Jn+1]=Nr,Cn[Jn+2]=cr,Cn[Jn+3]=Nr,Cn[Jn+4]=Yr,Cn[Jn+5]=cr,Cn[Jn+6]=wr,Cn[Jn+7]=cr,Cn[Jn+8]=gr,Cn[Jn+9]=Fr,Cn[Jn+10]=Gr,Cn[Jn+11]=cs,Cn[Jn+12]=Fr,Cn[Jn+13]=jr,Cn[Jn+14]=cs,un[hr]=wr,un[hr+1]=Nr,un[hr+2]=wr,un[hr+3]=cr,un[hr+4]=Yr,un[hr+5]=cr,un[hr+6]=wr,un[hr+7]=cr,un[hr+8]=Fr,un[hr+9]=Nr,un[hr+10]=Fr,un[hr+11]=cs,un[hr+12]=Yr,un[hr+13]=cs,un[hr+14]=Fr,un[hr+15]=jr,un[hr+16]=Fr,un[hr+17]=cs,un[hr+18]=jr,un[hr+19]=cs,Zt.faceidx+=15,Zt.lineidx+=20}Mr=[mn+45,mn+46,mn+1,mn,mn+47,mn+2],Jn=Zt.faceidx,hr=Zt.lineidx,wr=Mr[0],Qn=wr*3,Nr=Mr[1],_r=Nr*3,Fr=Mr[4],Ir=Fr*3,Yr=Mr[2],pr=Yr*3,cs=Mr[5],Tr=cs*3,cr=Mr[3],Wr=cr*3,Kn=rr=an[15],ur=Sr=an[0],Mn[Qn]=Kn.x,Mn[_r]=rr.x,Mn[Wr]=Sr.x,Mn[Qn+1]=Kn.y,Mn[_r+1]=rr.y,Mn[Wr+1]=Sr.y,Mn[Qn+2]=Kn.z,Mn[_r+2]=rr.z,Mn[Wr+2]=Sr.z,Mn[_r]=rr.x,Mn[pr]=ur.x,Mn[Wr]=Sr.x,Mn[_r+1]=rr.y,Mn[pr+1]=ur.y,Mn[Wr+1]=Sr.y,Mn[_r+2]=rr.z,Mn[pr+2]=ur.z,Mn[Wr+2]=Sr.z,Mn[Ir]=rr.x,Mn[Tr]=ur.x,Mn[Ir+1]=rr.y,Mn[Tr+1]=ur.y,Mn[Ir+2]=rr.z,Mn[Tr+2]=ur.z,rn.normalize(),nn.normalize(),Mn[er]=nn.x,Mn[yr]=Mn[Er]=rn.x,Mn[er+1]=nn.y,Mn[yr+1]=Mn[Er+1]=rn.y,Mn[er+2]=nn.z,Mn[yr+2]=Mn[Er+2]=rn.z,Cn[Jn]=wr,Cn[Jn+1]=Nr,Cn[Jn+2]=cr,Cn[Jn+3]=Nr,Cn[Jn+4]=Yr,Cn[Jn+5]=cr,Cn[Jn+6]=wr,Cn[Jn+7]=cr,Cn[Jn+8]=gr,Cn[Jn+9]=Fr,Cn[Jn+10]=Gr,Cn[Jn+11]=cs,Cn[Jn+12]=Fr,Cn[Jn+13]=jr,Cn[Jn+14]=cs,un[hr]=wr,un[hr+1]=Nr,un[hr+2]=wr,un[hr+3]=cr,un[hr+4]=Yr,un[hr+5]=cr,un[hr+6]=wr,un[hr+7]=cr,un[hr+8]=Fr,un[hr+9]=Nr,un[hr+10]=Fr,un[hr+11]=cs,un[hr+12]=Yr,un[hr+13]=cs,un[hr+14]=Fr,un[hr+15]=jr,un[hr+16]=Fr,un[hr+17]=cs,un[hr+18]=jr,un[hr+19]=cs,Zt.faceidx+=15,Zt.lineidx+=20}static updateBoundingFromPoints(Rt,Et,wt,Pt){Rt.center.set(0,0,0);let Ft=1/0,Nt=1/0,Ot=1/0,Bt=-1/0,Xt=-1/0,Zt=-1/0;Rt.box&&(Ft=Rt.box.min.x,Bt=Rt.box.max.x,Nt=Rt.box.min.y,Xt=Rt.box.max.y,Ot=Rt.box.min.z,Zt=Rt.box.max.z);for(let cn=0,an=Pt;cn<an;cn++){var rn=wt[cn*3],Gt=wt[cn*3+1],nn=wt[cn*3+2];rn<Ft&&(Ft=rn),Gt<Nt&&(Nt=Gt),nn<Ot&&(Ot=nn),rn>Bt&&(Bt=rn),Gt>Xt&&(Xt=Gt),nn>Zt&&(Zt=nn)}Rt.center.set((Bt+Ft)/2,(Xt+Nt)/2,(Zt+Ot)/2),Rt.radius=Rt.center.distanceTo({x:Bt,y:Xt,z:Zt}),Rt.box={min:{x:Ft,y:Nt,z:Ot},max:{x:Bt,y:Xt,z:Zt}}}static addCustomGeo(Rt,Et,wt,Pt,Ft){var Nt=Et.addGeoGroup(),Ot=wt.vertexArr,Bt=wt.normalArr,Xt=wt.faceArr;Nt.vertices=Ot.length,Nt.faceidx=Xt.length;var Zt,rn,Gt,nn,cn,an,mn,En,Cn,Mn=Nt.vertexArray,un=Nt.colorArray;for(Pt.constructor!==Array&&(En=Pt.r,Cn=Pt.g,nn=Pt.b),an=0,mn=Nt.vertices;an<mn;++an)Zt=an*3,rn=Ot[an],Mn[Zt]=rn.x,Mn[Zt+1]=rn.y,Mn[Zt+2]=rn.z,Pt.constructor===Array&&(cn=Pt[an],En=cn.r,Cn=cn.g,nn=cn.b),un[Zt]=En,un[Zt+1]=Cn,un[Zt+2]=nn;if(Ft)for(an=0,mn=Nt.faceidx/3;an<mn;++an){Zt=an*3,Gt=Xt[Zt],nn=Xt[Zt+1],cn=Xt[Zt+2];var Tn=new lt.Vector3,Pn=new lt.Vector3,dn=new lt.Vector3;Rt.intersectionShape.triangle.push(new at.Triangle(Tn.copy(Ot[Gt]),Pn.copy(Ot[nn]),dn.copy(Ot[cn])))}if(Ft){var Un=new lt.Vector3(0,0,0),qn=0;for(let ar=0;ar<Et.geometryGroups.length;ar++)Un.add(Et.geometryGroups[ar].getCentroid()),qn++;Un.divideScalar(qn),Ct.updateBoundingFromPoints(Rt.boundingSphere,{centroid:Un},Mn,Nt.vertices)}if(Nt.faceArray=new Uint16Array(Xt),Nt.truncateArrayBuffers(!0,!0),Bt.length<Nt.vertices)Nt.setNormals();else{var In=Nt.normalArray=new Float32Array(Nt.vertices*3),Wn;for(an=0,mn=Nt.vertices;an<mn;++an)Zt=an*3,Wn=Bt[an],In[Zt]=Wn.x,In[Zt+1]=Wn.y,In[Zt+2]=Wn.z}Nt.setLineIndices(),Nt.lineidx=Nt.lineArray.length}static updateFromStyle(Rt,Et){typeof Et.color<"u"?(Rt.color=Et.color||new dt.Color,Et.color instanceof dt.Color||(Rt.color=dt.CC.color(Et.color))):Rt.color=dt.CC.color(0),Rt.wireframe=!!Et.wireframe,Rt.opacity=Et.alpha?(0,lt.clamp)(Et.alpha,0,1):1,typeof Et.opacity<"u"&&(Rt.opacity=(0,lt.clamp)(Et.opacity,0,1)),Rt.side=Et.side!==void 0?Et.side:st.DoubleSide,Rt.linewidth=typeof Et.linewidth>"u"?1:Et.linewidth,Rt.clickable=!!Et.clickable,Rt.callback=(0,Mt.makeFunction)(Et.callback),Rt.hoverable=!!Et.hoverable,Rt.hover_callback=(0,Mt.makeFunction)(Et.hover_callback),Rt.unhover_callback=(0,Mt.makeFunction)(Et.unhover_callback),Rt.contextMenuEnabled=!!Et.contextMenuEnabled,Rt.hidden=Et.hidden,Rt.frame=Et.frame}constructor(Rt){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=st.DoubleSide,this.stylespec=Rt||{},this.boundingSphere=new at.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},Ct.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new st.Geometry(!0),this.linegeo=new st.Geometry(!0)}updateStyle(Rt){for(var Et in Rt)this.stylespec[Et]=Rt[Et];if(Ct.updateFromStyle(this,this.stylespec),Rt.voldata&&Rt.volscheme){(0,Mt.adjustVolumeStyle)(Rt);const wt=Rt.volscheme,Pt=Rt.voldata,Ft=dt.CC,Nt=wt.range()||[-1,1];this.geo.setColors(function(Ot,Bt,Xt){let Zt=Pt.getVal(Ot,Bt,Xt);return Ft.color(wt.valueToHex(Zt,Nt))}),delete this.color}}addCustom(Rt){Rt.vertexArr=Rt.vertexArr||[],Rt.faceArr=Rt.faceArr||[],Rt.normalArr=Rt.normalArr||[],Ct.drawCustom(this,this.geo,Rt)}addSphere(Rt){Rt.center||(Rt.center=new lt.Vector3(0,0,0)),Rt.radius=Rt.radius?(0,lt.clamp)(Rt.radius,0,1/0):1.5,Rt.color=dt.CC.color(Rt.color),this.intersectionShape.sphere.push(new at.Sphere(Rt.center,Rt.radius)),_t.GLDraw.drawSphere(this.geo,Rt.center,Rt.radius,Rt.color,Rt.quality),this.components.push({centroid:new lt.Vector3(Rt.center.x,Rt.center.y,Rt.center.z)});var Et=this.geo.updateGeoGroup(0);Ct.updateBoundingFromPoints(this.boundingSphere,this.components,Et.vertexArray,Et.vertices)}addBox(Rt){var Et=Rt.dimensions||{w:1,h:1,d:1},wt;typeof Et.w=="number"?wt={x:Et.w,y:0,z:0}:wt=Et.w;var Pt;typeof Et.h=="number"?Pt={x:0,y:Et.h,z:0}:Pt=Et.h;var Ft;typeof Et.d=="number"?Ft={x:0,y:0,z:Et.d}:Ft=Et.d;var Nt=Rt.corner;Nt==null&&(Rt.center!==void 0?Nt={x:Rt.center.x-.5*(wt.x+Pt.x+Ft.x),y:Rt.center.y-.5*(wt.y+Pt.y+Ft.y),z:Rt.center.z-.5*(wt.z+Pt.z+Ft.z)}:Nt={x:0,y:0,z:0});var Ot=[{x:Nt.x,y:Nt.y,z:Nt.z},{x:Nt.x+wt.x,y:Nt.y+wt.y,z:Nt.z+wt.z},{x:Nt.x+Pt.x,y:Nt.y+Pt.y,z:Nt.z+Pt.z},{x:Nt.x+wt.x+Pt.x,y:Nt.y+wt.y+Pt.y,z:Nt.z+wt.z+Pt.z},{x:Nt.x+Ft.x,y:Nt.y+Ft.y,z:Nt.z+Ft.z},{x:Nt.x+wt.x+Ft.x,y:Nt.y+wt.y+Ft.y,z:Nt.z+wt.z+Ft.z},{x:Nt.x+Pt.x+Ft.x,y:Nt.y+Pt.y+Ft.y,z:Nt.z+Pt.z+Ft.z},{x:Nt.x+wt.x+Pt.x+Ft.x,y:Nt.y+wt.y+Pt.y+Ft.y,z:Nt.z+wt.z+Pt.z+Ft.z}],Bt=[],Xt=[];Bt.splice(Bt.length,0,Ot[0],Ot[1],Ot[2],Ot[3]),Xt.splice(Xt.length,0,0,2,1,1,2,3);var Zt=4;Bt.splice(Bt.length,0,Ot[2],Ot[3],Ot[6],Ot[7]),Xt.splice(Xt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4,Bt.splice(Bt.length,0,Ot[4],Ot[5],Ot[0],Ot[1]),Xt.splice(Xt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4,Bt.splice(Bt.length,0,Ot[6],Ot[7],Ot[4],Ot[5]),Xt.splice(Xt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4,Bt.splice(Bt.length,0,Ot[3],Ot[1],Ot[7],Ot[5]),Xt.splice(Xt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4,Bt.splice(Bt.length,0,Ot[2],Ot[6],Ot[0],Ot[4]),Xt.splice(Xt.length,0,Zt+0,Zt+2,Zt+1,Zt+1,Zt+2,Zt+3),Zt+=4;var rn=(0,Mt.extend)({},Rt);rn.vertexArr=Bt,rn.faceArr=Xt,rn.normalArr=[],Ct.drawCustom(this,this.geo,rn);var Gt=new lt.Vector3;this.components.push({centroid:Gt.addVectors(Ot[0],Ot[7]).multiplyScalar(.5)});var nn=this.geo.updateGeoGroup(0);Ct.updateBoundingFromPoints(this.boundingSphere,this.components,nn.vertexArray,nn.vertices)}addCylinder(Rt){var Et,wt;Rt.start?Et=new lt.Vector3(Rt.start.x||0,Rt.start.y||0,Rt.start.z||0):Et=new lt.Vector3(0,0,0),Rt.end?(wt=new lt.Vector3(Rt.end.x,Rt.end.y||0,Rt.end.z||0),typeof wt.x>"u"&&(wt.x=3)):wt=new lt.Vector3(0,0,0);var Pt=Rt.radius||.1,Ft=dt.CC.color(Rt.color);this.intersectionShape.cylinder.push(new at.Cylinder(Et,wt,Pt)),_t.GLDraw.drawCylinder(this.geo,Et,wt,Pt,Ft,Rt.fromCap,Rt.toCap);var Nt=new lt.Vector3;this.components.push({centroid:Nt.addVectors(Et,wt).multiplyScalar(.5)});var Ot=this.geo.updateGeoGroup(0);Ct.updateBoundingFromPoints(this.boundingSphere,this.components,Ot.vertexArray,Ot.vertices)}addDashedCylinder(Rt){Rt.dashLength=Rt.dashLength||.25,Rt.gapLength=Rt.gapLength||.25;var Et;Rt.start?Et=new lt.Vector3(Rt.start.x||0,Rt.start.y||0,Rt.start.z||0):Et=new lt.Vector3(0,0,0);var wt;Rt.end?(wt=new lt.Vector3(Rt.end.x,Rt.end.y||0,Rt.end.z||0),typeof wt.x>"u"&&(wt.x=3)):wt=new lt.Vector3(3,0,0);for(var Pt=Rt.radius||.1,Ft=dt.CC.color(Rt.color),Nt=Math.sqrt(Math.pow(Et.x-wt.x,2)+Math.pow(Et.y-wt.y,2)+Math.pow(Et.z-wt.z,2)),Ot=Nt/(Rt.gapLength+Rt.dashLength),Bt=new lt.Vector3(Rt.start.x||0,Rt.start.y||0,Rt.start.z||0),Xt=new lt.Vector3(Rt.end.x,Rt.end.y||0,Rt.end.z||0),Zt=new lt.Vector3((wt.x-Et.x)/(Nt/Rt.gapLength),(wt.y-Et.y)/(Nt/Rt.gapLength),(wt.z-Et.z)/(Nt/Rt.gapLength)),rn=new lt.Vector3((wt.x-Et.x)/(Nt/Rt.dashLength),(wt.y-Et.y)/(Nt/Rt.dashLength),(wt.z-Et.z)/(Nt/Rt.dashLength)),Gt=0;Gt<Ot;Gt++)Xt=new lt.Vector3(Bt.x+rn.x,Bt.y+rn.y,Bt.z+rn.z),this.intersectionShape.cylinder.push(new at.Cylinder(Bt,Xt,Pt)),_t.GLDraw.drawCylinder(this.geo,Bt,Xt,Pt,Ft,Rt.fromCap,Rt.toCap),Bt=new lt.Vector3(Xt.x+Zt.x,Xt.y+Zt.y,Xt.z+Zt.z);var nn=new lt.Vector3;this.components.push({centroid:nn.addVectors(Et,wt).multiplyScalar(.5)});var cn=this.geo.updateGeoGroup(0);Ct.updateBoundingFromPoints(this.boundingSphere,this.components,cn.vertexArray,cn.vertices)}addCurve(Rt){Rt.points=Rt.points||[],Rt.smooth=Rt.smooth||10,typeof Rt.fromCap>"u"&&(Rt.fromCap=2),typeof Rt.toCap>"u"&&(Rt.toCap=2);var Et=(0,bt.subdivide_spline)(Rt.points,Rt.smooth);if(Et.length<3){console.log("Too few points in addCurve");return}var wt=Rt.radius||.1,Pt=dt.CC.color(Rt.color),Ft=0,Nt=Et.length-1,Ot=Et[0].distanceTo(Et[1]),Bt=Math.ceil(2*wt/Ot);if(Rt.toArrow){Nt-=Bt;let Gt={start:Et[Nt],end:Et[Et.length-1],radius:wt,color:Pt,mid:1e-4};this.addArrow(Gt)}if(Rt.fromArrow){Ft+=Bt;let Gt={start:Et[Ft],end:Et[0],radius:wt,color:Pt,mid:1e-4};this.addArrow(Gt)}for(var Xt=Math.ceil(Et.length/2),Zt={radius:wt,color:Pt,fromCap:2,toCap:2},rn=Ft;rn<Nt;rn++)Zt.start=Et[rn],Zt.end=Et[rn+1],Zt.fromCap=2,Zt.toCap=2,rn<Xt?(Zt.fromCap=2,Zt.toCap=0):rn>Xt?(Zt.fromCap=0,Zt.toCap=2):(Zt.fromCap=2,Zt.toCap=2),this.addCylinder(Zt)}addLine(Rt){var Et,wt;Rt.start?Et=new lt.Vector3(Rt.start.x||0,Rt.start.y||0,Rt.start.z||0):Et=new lt.Vector3(0,0,0),Rt.end?(wt=new lt.Vector3(Rt.end.x,Rt.end.y||0,Rt.end.z||0),typeof wt.x>"u"&&(wt.x=3)):wt=new lt.Vector3(3,0,0);var Pt=this.geo.updateGeoGroup(2),Ft=Pt.vertices,Nt=Ft*3,Ot=Pt.vertexArray;Ot[Nt]=Et.x,Ot[Nt+1]=Et.y,Ot[Nt+2]=Et.z,Ot[Nt+3]=wt.x,Ot[Nt+4]=wt.y,Ot[Nt+5]=wt.z,Pt.vertices+=2;var Bt=Pt.lineArray,Xt=Pt.lineidx;Bt[Xt]=Ft,Bt[Xt+1]=Ft+1,Pt.lineidx+=2;var Zt=new lt.Vector3;this.components.push({centroid:Zt.addVectors(Et,wt).multiplyScalar(.5)}),Pt=this.geo.updateGeoGroup(0),Ct.updateBoundingFromPoints(this.boundingSphere,this.components,Pt.vertexArray,Pt.vertices)}addArrow(Rt){if(Rt.start?Rt.start=new lt.Vector3(Rt.start.x||0,Rt.start.y||0,Rt.start.z||0):Rt.start=new lt.Vector3(0,0,0),Rt.dir instanceof lt.Vector3&&typeof Rt.length=="number"){var Et=Rt.dir.clone().multiplyScalar(Rt.length).add(Rt.start);Rt.end=Et}else Rt.end?(Rt.end=new lt.Vector3(Rt.end.x,Rt.end.y||0,Rt.end.z||0),typeof Rt.end.x>"u"&&(Rt.end.x=3)):Rt.end=new lt.Vector3(3,0,0);Rt.radius=Rt.radius||.1,Rt.radiusRatio=Rt.radiusRatio||1.618034,Rt.mid=0<Rt.mid&&Rt.mid<1?Rt.mid:.618034,Ct.drawArrow(this,this.geo,Rt);var wt=new lt.Vector3;this.components.push({centroid:wt.addVectors(Rt.start,Rt.end).multiplyScalar(.5)});var Pt=this.geo.updateGeoGroup(0);Ct.updateBoundingFromPoints(this.boundingSphere,this.components,Pt.vertexArray,Pt.vertices)}static distance_from(Rt,Et){return Math.sqrt(Math.pow(Rt.x-Et.x,2)+Math.pow(Rt.y-Et.y,2)+Math.pow(Rt.z-Et.z,2))}static inSelectedRegion(Rt,Et,wt){for(var Pt=0;Pt<Et.length;Pt++)if(Ct.distance_from(Et[Pt],Rt)<=wt)return!0;return!1}addIsosurface(Rt,Et,wt,Pt){var Ft=Et.isoval!==void 0&&typeof Et.isoval=="number"?Et.isoval:0,Nt=!!Et.voxel,Ot=Et.smoothness===void 0?1:Et.smoothness,Bt=Rt.size.x,Xt=Rt.size.y,Zt=Rt.size.z,rn=new Int16Array(Bt*Xt*Zt),Gt=Rt.data,nn,cn;for(nn=0,cn=rn.length;nn<cn;++nn)rn[nn]=-1;var an=new Uint8Array(Bt*Xt*Zt);for(nn=0,cn=Gt.length;nn<cn;++nn){var mn=Ft>=0?Gt[nn]-Ft:Ft-Gt[nn];mn>0&&(an[nn]|=Ct.ISDONE)}var En=[],Cn=[];yt.MarchingCube.march(an,En,Cn,{fulltable:!0,voxel:Nt,unitCube:Rt.unit,origin:Rt.origin,matrix:Rt.matrix,nX:Bt,nY:Xt,nZ:Zt}),!Nt&&Ot>0&&yt.MarchingCube.laplacianSmooth(Ot,En,Cn);var Mn=[],un=[],Tn=[];if(Et.selectedRegion&&Et.coords===void 0&&(Et.coords=Et.selectedRegion),Et.coords===void 0&&Et.selection!==void 0&&(Pt?Et.coords=Pt.selectedAtoms(Et.selection):console.log("addIsosurface needs viewer is selection provided.")),Et.coords!==void 0){var Pn=Et.coords[0].x,dn=Et.coords[0].y,Un=Et.coords[0].z,qn=Et.coords[0].x,In=Et.coords[0].y,Wn=Et.coords[0].z;for(let hr=0;hr<Et.coords.length;hr++)Et.coords[hr].x>Pn?Pn=Et.coords[hr].x:Et.coords[hr].x<qn&&(qn=Et.coords[hr].x),Et.coords[hr].y>dn?dn=Et.coords[hr].y:Et.coords[hr].y<In&&(In=Et.coords[hr].y),Et.coords[hr].z>Un?Un=Et.coords[hr].z:Et.coords[hr].z<Wn&&(Wn=Et.coords[hr].z);var ar=2;Et.radius!==void 0&&(ar=Et.radius),Et.selectedOffset!==void 0&&(ar=Et.selectedOffset),Et.seldist!==void 0&&(ar=Et.seldist),qn-=ar,Pn+=ar,In-=ar,dn+=ar,Wn-=ar,Un+=ar;for(let hr=0;hr<En.length;hr++)En[hr].x>qn&&En[hr].x<Pn&&En[hr].y>In&&En[hr].y<dn&&En[hr].z>Wn&&En[hr].z<Un&&Ct.inSelectedRegion(En[hr],Et.coords,ar)?(Mn.push(un.length),un.push(En[hr])):Mn.push(-1);for(let hr=0;hr+2<Cn.length;hr+=3)Mn[Cn[hr]]!==-1&&Mn[Cn[hr+1]]!==-1&&Mn[Cn[hr+2]]!==-1&&(Tn.push(Cn[hr]-(Cn[hr]-Mn[Cn[hr]])),Tn.push(Cn[hr+1]-(Cn[hr+1]-Mn[Cn[hr+1]])),Tn.push(Cn[hr+2]-(Cn[hr+2]-Mn[Cn[hr+2]])));En=un,Cn=Tn}Ct.drawCustom(this,this.geo,{vertexArr:En,faceArr:Cn,normalArr:[],clickable:Et.clickable,hoverable:Et.hoverable}),this.updateStyle(Et);var fr=new lt.Vector3(Rt.origin.x,Rt.origin.y,Rt.origin.z),mr=new lt.Vector3(Rt.size.x*Rt.unit.x,Rt.size.y*Rt.unit.y,Rt.size.z*Rt.unit.z),vr=new lt.Vector3(0,0,0),Ar=fr.clone(),$r=fr.clone().add(mr);for(let hr=0;hr<En.length;hr++)vr.add(En[hr]),Ar.max(En[hr]),$r.min(En[hr]);vr.divideScalar(En.length);var Mr=vr.distanceTo($r),Jn=vr.distanceTo(Ar);this.boundingSphere.center=vr,this.boundingSphere.radius=Math.max(Mr,Jn),typeof wt=="function"&&wt()}addVolumetricData(Rt,Et,wt){Rt=new vt.VolumeData(Rt,Et),this.addIsosurface(Rt,wt)}finalize(){return Ct.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(Rt){if(this.renderedShapeObj&&(Rt.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){Ct.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&Ct.updateColor(this.geo,this.color),this.shapeObj=new st.Object3D;var Et=null;this.side==st.DoubleSide?Et=new st.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:st.Coloring.VertexColors}):Et=new st.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:st.Coloring.VertexColors});var wt=new st.Mesh(this.geo,Et);if(this.shapeObj.add(wt),this.linegeo&&this.linegeo.vertices>0){var Pt=new st.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),Ft=new st.Line(this.linegeo,Pt,st.LineStyle.LinePieces);this.shapeObj.add(Ft)}this.renderedShapeObj=this.shapeObj.clone(),Rt.add(this.renderedShapeObj)}}removegl(Rt){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),Rt.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}Ct.ISDONE=2,Ct.drawCustom=function($t,Rt,Et){var wt=Et,Pt=wt.vertexArr,Ft=wt.faceArr;(Pt.length===0||Ft.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var Nt=Et.color;typeof Nt>"u"&&(Nt=$t.color),Nt=dt.CC.color(Nt);for(var Ot=Tt(wt),Bt=0,Xt=Ot.length;Bt<Xt;Bt++)Ct.addCustomGeo($t,Rt,Ot[Bt],Ot[Bt].colorArr?Ot[Bt].colorArr:Nt,Et.clickable)};function Tt($t){var Rt=64e3;if($t.vertexArr.length<Rt)return[$t];var Et=[{vertexArr:[],normalArr:[],faceArr:[]}];$t.colorArr&&(Et.colorArr=[]);var wt=[],Pt=[],Ft=0,Nt=$t.faceArr;for(let Bt=0,Xt=Nt.length;Bt<Xt;Bt+=3){let Zt=Et[Ft];for(let rn=0;rn<3;rn++){var Ot=Nt[Bt+rn];wt[Ot]!==Ft&&(wt[Ot]=Ft,Pt[Ot]=Zt.vertexArr.length,Zt.vertexArr.push($t.vertexArr[Ot]),$t.normalArr&&$t.normalArr[Ot]&&Zt.normalArr.push($t.normalArr[Ot]),$t.colorArr&&$t.colorArr[Ot]&&Zt.colorArr.push($t.colorArr[Ot])),Zt.faceArr.push(Pt[Ot])}Zt.vertexArr.length>=Rt&&(Et.push({vertexArr:[],normalArr:[],faceArr:[]}),$t.colorArr&&(Et.colorArr=[]),Ft++)}return Et}},"./src/GLViewer.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{CONTEXTS_PER_VIEWPORT:()=>Rt,GLViewer:()=>Et,createStereoViewer:()=>Ft,createViewer:()=>wt,createViewerGrid:()=>Pt});var st=rt("./src/WebGL/index.ts"),at=rt("./src/WebGL/math/index.ts"),lt=rt("./src/colors.ts"),dt=rt("./src/utilities.ts"),yt=rt("./src/Gradient.ts"),vt=rt("./src/GLModel.ts"),_t=rt("./src/Label.ts"),bt=rt("./src/GLShape.ts"),Mt=rt("./src/VolumeData.ts"),Ct=rt("./src/ProteinSurface4.ts"),Tt=rt("./src/VolumetricRender.ts"),$t=rt("./node_modules/upng-js/UPNG.js");const Rt=16;class Et{getWidth(){let Ot=this.container,Bt=Ot.offsetWidth;if(Bt==0&&Ot.style.display==="none"){let Xt=Ot.style.position,Zt=Ot.style.visibility;Ot.style.display="block",Ot.style.visibility="hidden",Ot.style.position="absolute",Bt=Ot.offsetWidth,Ot.style.display="none",Ot.style.visibility=Zt,Ot.style.position=Xt}return Bt}getHeight(){let Ot=this.container,Bt=Ot.offsetHeight;if(Bt==0&&Ot.style.display==="none"){let Xt=Ot.style.position,Zt=Ot.style.visibility;Ot.style.display="block",Ot.style.visibility="hidden",Ot.style.position="absolute",Bt=Ot.offsetHeight,Ot.style.display="none",Ot.style.visibility=Zt,Ot.style.position=Xt}return Bt}setupRenderer(){this.renderer=new st.Renderer({antialias:this.config.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:this.config.id,row:this.config.row,col:this.config.col,rows:this.config.rows,cols:this.config.cols,canvas:this.config.canvas,containerWidth:this.WIDTH,containerHeight:this.HEIGHT,ambientOcclusion:this.config.ambientOcclusion,outline:this.config.outline}),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new st.Scene,this.scene.fog=new st.Fog(this.bgColor,100,200),this.modelGroup=new st.Object3D,this.rotationGroup=new st.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new at.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var Ot=new st.Light(16777215);Ot.position=new at.Vector3(.2,.2,1).normalize(),Ot.intensity=1,this.scene.add(Ot)}_handleLostContext(Ot){const Bt=function(Xt){const Zt=Xt.getBoundingClientRect();return!(Zt.right<0||Zt.bottom<0||Zt.top>(window.innerHeight||document.documentElement.clientHeight)||Zt.left>(window.innerWidth||document.documentElement.clientWidth))};if(Bt(this.container)){let Xt=0;for(let Zt of document.getElementsByTagName("canvas"))if(Bt(Zt)&&Zt._3dmol_viewer!=null&&(Zt._3dmol_viewer.resize(),Xt+=1,Xt>=Rt))break}}initContainer(Ot){this.container=Ot,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var Ot=0;for(let Xt in this.surfaces)if(this.surfaces.hasOwnProperty(Xt)){var Bt=parseInt(Xt);isNaN(Bt)||Bt>Ot&&(Ot=Bt)}return Ot+1}setSlabAndFog(){let Ot=this.camera.position.z-this.rotationGroup.position.z;Ot<1&&(Ot=1),this.camera.near=Ot+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=Ot+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=Ot*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far,this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(Ot){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!Ot&&this.linkedViewers.length>0))for(var Bt=this._viewer.getView(),Xt=0;Xt<this.linkedViewers.length;Xt++){var Zt=this.linkedViewers[Xt];Zt.setView(Bt,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let Ot=0,Bt=this.models.length;Ot<Bt;Ot++){let Xt=this.models[Ot];if(Xt){let Zt=Xt.selectedAtoms({clickable:!0}),rn=Xt.selectedAtoms({hoverable:!0}),Gt=Xt.selectedAtoms({contextMenuEnabled:!0});for(let nn=0;nn<rn.length;nn++)this.hoverables.push(rn[nn]);for(let nn=0;nn<Zt.length;nn++)this.clickables.push(Zt[nn]);for(let nn=0;nn<Gt.length;nn++)this.contextMenuEnabledObjects.push(Gt[nn])}}for(let Ot=0,Bt=this.shapes.length;Ot<Bt;Ot++){let Xt=this.shapes[Ot];Xt&&Xt.clickable&&this.clickables.push(Xt),Xt&&Xt.hoverable&&this.hoverables.push(Xt),Xt&&Xt.contextMenuEnabled&&this.contextMenuEnabledObjects.push(Xt)}}handleClickSelection(Ot,Bt,Xt){let Zt=this.targetedObjects(Ot,Bt,this.clickables);if(Zt.length){var rn=Zt[0].clickable;rn.callback!==void 0&&(typeof rn.callback!="function"&&(rn.callback=(0,dt.makeFunction)(rn.callback)),typeof rn.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(rn)&&this.userContextMenuHandler||rn.callback(rn,this._viewer,Xt,this.container,Zt)))}}canvasOffset(){let Ot=this.glDOM,Bt=Ot.getBoundingClientRect(),Xt=Ot.ownerDocument,Zt=Xt.documentElement,rn=Xt.defaultView;return{top:Bt.top+rn.pageYOffset-Zt.clientTop,left:Bt.left+rn.pageXOffset-Zt.clientLeft}}setHover(Ot,Bt,Xt){this.current_hover!=Ot&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,dt.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,Bt,this.container,Xt)),this.current_hover=Ot,Ot&&Ot.hover_callback!==void 0&&(typeof Ot.hover_callback!="function"&&(Ot.hover_callback=(0,dt.makeFunction)(Ot.hover_callback)),typeof Ot.hover_callback=="function"&&Ot.hover_callback(Ot,this._viewer,Bt,this.container,Xt)))}handleHoverSelection(Ot,Bt,Xt){if(this.hoverables.length==0)return;let Zt=this.targetedObjects(Ot,Bt,this.hoverables);if(Zt.length){var rn=Zt[0].clickable;this.setHover(rn,Xt,Zt),this.current_hover=rn}else this.setHover(null)}handleHoverContinue(Ot,Bt){let Xt=this.targetedObjects(Ot,Bt,this.hoverables);(Xt.length==0||Xt[0]===void 0)&&this.setHover(null),Xt[0]!==void 0&&Xt[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(Ot,{allowTolerance:Bt=Ot.targetTouches,tolerance:Xt=5}={}){const Zt=this.getX(Ot),rn=this.getY(Ot);if(Bt){const Gt=Math.abs(Zt-this.mouseStartX),nn=Math.abs(rn-this.mouseStartY);return Gt<=Xt&&nn<=Xt}else return Zt===this.mouseStartX&&rn===this.mouseStartY}calcTouchDistance(Ot){var Bt=Ot.targetTouches[0].pageX-Ot.targetTouches[1].pageX,Xt=Ot.targetTouches[0].pageY-Ot.targetTouches[1].pageY;return Math.hypot(Bt,Xt)}getX(Ot){var Bt=Ot.pageX;return Bt==null&&(Bt=Ot.pageX),Ot.targetTouches&&Ot.targetTouches[0]?Bt=Ot.targetTouches[0].pageX:Ot.changedTouches&&Ot.changedTouches[0]&&(Bt=Ot.changedTouches[0].pageX),Bt}getY(Ot){var Bt=Ot.pageY;return Bt==null&&(Bt=Ot.pageY),Ot.targetTouches&&Ot.targetTouches[0]?Bt=Ot.targetTouches[0].pageY:Ot.changedTouches&&Ot.changedTouches[0]&&(Bt=Ot.changedTouches[0].pageY),Bt}isInViewer(Ot,Bt){if(this.viewers!=null){var Xt=this.WIDTH/this.cols,Zt=this.HEIGHT/this.rows,rn=this.canvasOffset(),Gt=Ot-rn.left,nn=Bt-rn.top,cn=this.rows-Math.floor(nn/Zt)-1,an=Math.floor(Gt/Xt);if(cn!=this.row||an!=this.col)return!1}return!0}adjustZoomToLimits(Ot){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let Bt=this.CAMERA_Z-this.config.lowerZoomLimit;Ot>Bt&&(Ot=Bt)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let Bt=this.CAMERA_Z-this.config.upperZoomLimit;Ot<Bt&&(Ot=Bt)}return Ot>this.CAMERA_Z-1&&(Ot=this.CAMERA_Z-1),Ot}static slerp(Ot,Bt,Xt){if(Xt==1)return Bt.clone();if(Xt==0)return Ot.clone();let Zt=Ot.x*Bt.x+Ot.y*Bt.y+Ot.z*Bt.z+Ot.w*Bt.w;if(Zt>.9995){let En=new at.Quaternion(Ot.x+Xt*(Bt.x-Ot.x),Ot.y+Xt*(Bt.y-Ot.y),Ot.z+Xt*(Bt.z-Ot.z),Ot.w+Xt*(Bt.w-Ot.w));return En.normalize(),En}Zt<0&&(Bt=Bt.clone().multiplyScalar(-1),Zt=-Zt),Zt>1?Zt=1:Zt<-1&&(Zt=-1);var rn=Math.acos(Zt),Gt=rn*Xt,nn=Bt.clone();nn.sub(Ot.clone().multiplyScalar(Zt)),nn.normalize();var cn=Math.cos(Gt),an=Math.sin(Gt),mn=new at.Quaternion(Ot.x*cn+nn.x*an,Ot.y*cn+nn.y*an,Ot.z*cn+nn.z*an,Ot.w*cn+nn.w*an);return mn.normalize(),mn}constructor(Ot,Bt={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.cq=new at.Quaternion(0,0,0,1),this.dq=new at.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=Bt,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=lt.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=lt.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=Ot,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new st.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new at.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new at.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new st.Raycaster(new at.Vector3(0,0,0),new at.Vector3(0,0,0)),this.projector=new st.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=lt.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let Xt=(Zt,rn)=>{Zt.forEach(Gt=>{Gt.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(Xt),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(Xt){console.log("error with glviewer callback: "+Xt)}}targetedObjects(Ot,Bt,Xt){var Zt={x:Ot,y:Bt,z:-1};return Array.isArray(Xt)||(Xt=this.selectedAtoms(Xt)),Xt.length==0?[]:(this.raycaster.setFromCamera(Zt,this.camera),this.raycaster.intersectObjects(this.modelGroup,Xt))}modelToScreen(Ot){let Bt=!1;Array.isArray(Ot)||(Ot=[Ot],Bt=!0);let Xt=this.renderer.getXRatio(),Zt=this.renderer.getYRatio(),rn=this.col,Gt=this.row,nn=rn*(this.WIDTH/Xt),cn=(Zt-Gt-1)*(this.HEIGHT/Zt),an=[],mn=this.canvasOffset();return Ot.forEach(En=>{let Cn=new at.Vector3(En.x,En.y,En.z);Cn.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(Cn,this.camera);let Mn=this.WIDTH/Xt*(Cn.x+1)/2+mn.left+nn,un=-(this.HEIGHT/Zt)*(Cn.y-1)/2+mn.top+cn;an.push({x:Mn,y:un})}),Bt&&(an=an[0]),an}screenOffsetToModel(Ot,Bt,Xt){var Zt=Ot/this.WIDTH,rn=Bt/this.HEIGHT,Gt=Xt===void 0?this.rotationGroup.position.z:Xt,nn=this.rotationGroup.quaternion,cn=new at.Vector3(0,0,Gt);return this.projector.projectVector(cn,this.camera),cn.x+=Zt*2,cn.y-=rn*2,this.projector.unprojectVector(cn,this.camera),cn.z=0,cn.applyQuaternion(nn),cn}screenToModelDistance(Ot,Bt){let Xt=this.canvasOffset(),Zt=new at.Vector3(Bt.x,Bt.y,Bt.z);Zt.applyMatrix4(this.modelGroup.matrixWorld);let rn=Zt.clone();this.projector.projectVector(Zt,this.camera);let Gt=new at.Vector3((Ot.x-Xt.left)*2/this.WIDTH-1,(Ot.y-Xt.top)*2/-this.HEIGHT+1,Zt.z);return this.projector.unprojectVector(Gt,this.camera),Gt.distanceTo(rn)}setViewChangeCallback(Ot){(typeof Ot=="function"||Ot==null)&&(this.viewChangeCallback=Ot)}setStateChangeCallback(Ot){(typeof Ot=="function"||Ot==null)&&(this.stateChangeCallback=Ot)}getConfig(){return this.config}setConfig(Ot){this.config=Ot,Ot.ambientOcclusion&&this.renderer.enableAmbientOcclusion(Ot.ambientOcclusion)}getInternalState(){var Ot={models:[],surfaces:[],shapes:[],labels:[]};for(let Bt=0;Bt<this.models.length;Bt++)this.models[Bt]&&(Ot.models[Bt]=this.models[Bt].getInternalState());return Ot}setInternalState(Ot){this.clear();var Bt=Ot.models;for(let Xt=0;Xt<Bt.length;Xt++)Bt[Xt]&&(this.models[Xt]=new vt.GLModel(Xt),this.models[Xt].setInternalState(Bt[Xt]));this.render()}setZoomLimits(Ot,Bt){typeof Ot<"u"&&(this.config.lowerZoomLimit=Ot),Bt&&(this.config.upperZoomLimit=Bt),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(Ot){Ot.fov!==void 0&&(this.fov=Ot.fov,this.camera.fov=this.fov),Ot.z!==void 0&&(this.CAMERA_Z=Ot.z,this.camera.z=this.CAMERA_Z),Ot.orthographic!==void 0&&(this.camera.ortho=Ot.orthographic),this.setSlabAndFog()}_handleMouseDown(Ot){if(Ot.preventDefault(),!this.scene)return;var Bt=this.getX(Ot),Xt=this.getY(Ot);if(Bt===void 0)return;this.isDragging=!0,this.mouseButton=Ot.which,this.mouseStartX=Bt,this.mouseStartY=Xt,this.touchHold=!0,this.touchDistanceStart=0,Ot.targetTouches&&Ot.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(Ot)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let Zt=this;Ot.targetTouches&&Ot.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(Zt.touchHold==!0){Zt.glDOM=Zt.renderer.domElement;const rn=Ot.targetTouches[0],Gt=new PointerEvent("contextmenu",Object.assign(Object.assign({},Ot),{pageX:rn.pageX,pageY:rn.pageY,screenX:rn.screenX,screenY:rn.screenY,clientX:rn.clientX,clientY:rn.clientY}));Zt.glDOM.dispatchEvent(Gt)}},this.longTouchDuration))}_handleMouseUp(Ot){if(this.touchHold=!1,this.isDragging&&this.scene){var Bt=this.getX(Ot),Xt=this.getY(Ot);if(this.closeEnoughForClick(Ot)&&this.isInViewer(Bt,Xt)){let Zt=this.mouseXY(Bt,Xt);this.handleClickSelection(Zt.x,Zt.y,Ot)}}this.isDragging=!1}_handleMouseScroll(Ot){if(Ot.preventDefault(),!!this.scene){var Bt=this.getX(Ot),Xt=this.getY(Ot);if(Bt!==void 0&&!(!this.control_all&&!this.isInViewer(Bt,Xt))){var Zt=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,rn=1;if(Ot.ctrlKey&&(rn=-1),Ot.detail)this.rotationGroup.position.z+=rn*Zt*Ot.detail/10;else if(Ot.wheelDelta){let Gt=Ot.wheelDelta*600/(Ot.wheelDelta+600);this.rotationGroup.position.z-=rn*Zt*Gt/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(Ot){let Bt=this;return Ot=Ot||1,new Promise(function(Xt){let Zt=0,rn=Bt.viewChangeCallback,Gt=[],nn=[],cn=Date.now();Bt.viewChangeCallback=function(){nn.push(Date.now()-cn),cn=Date.now(),Gt.push(new Promise(an=>{Bt.getCanvas().toBlob(function(mn){mn.arrayBuffer().then(an)},"image/png")})),Zt+=1,Zt==Ot&&(Bt.viewChangeCallback=rn,Promise.all(Gt).then(an=>{let mn=[];for(let Pn=0;Pn<an.length;Pn++){let dn=(0,$t.decode)(an[Pn]);mn.push((0,$t.toRGBA8)(dn)[0])}let En=Bt.getCanvas().width,Cn=Bt.getCanvas().height,Mn=(0,$t.encode)(mn,En,Cn,0,nn),un=new Blob([Mn],{type:"image/png"}),Tn=new FileReader;Tn.onload=function(Pn){Xt(Pn.target.result)},Tn.readAsDataURL(un)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(Ot){this.hoverDuration=Ot}mouseXY(Ot,Bt){let Xt=this.canvasOffset(),Zt=this.renderer.getXRatio(),rn=this.renderer.getYRatio(),Gt=this.col,nn=this.row,cn=Gt*(this.WIDTH/Zt),an=(rn-nn-1)*(this.HEIGHT/rn),mn=(Ot-Xt.left-cn)/(this.WIDTH/Zt)*2-1,En=-((Bt-Xt.top-an)/(this.HEIGHT/rn))*2+1;return{x:mn,y:En}}_handleMouseMove(Ot){clearTimeout(this.hoverTimeout),Ot.preventDefault();let Bt=this.getX(Ot),Xt=this.getY(Ot);if(Bt===void 0)return;let Zt=this.renderer.getXRatio(),rn=this.renderer.getYRatio(),Gt=this.mouseXY(Bt,Xt),nn=this;this.current_hover!==null&&this.handleHoverContinue(Gt.x,Gt.y);var cn=0;if(!(!this.control_all&&!this.isInViewer(Bt,Xt))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){nn.handleHoverSelection(Gt.x,Gt.y,Ot)},this.hoverDuration)),!!this.isDragging)){Ot.targetTouches&&(Ot.targetTouches.length>1||Ot.targetTouches.length===1&&!this.closeEnoughForClick(Ot))&&clearTimeout(this.longTouchTimeout);var an=(Bt-this.mouseStartX)/this.WIDTH,mn=(Xt-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&Ot.targetTouches&&Ot.targetTouches.length==2){var En=this.calcTouchDistance(Ot);cn=2,mn=(En-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else Ot.targetTouches&&Ot.targetTouches.length==3&&(cn=1);an*=Zt,mn*=rn;var Cn=Math.hypot(an,mn),Mn;if(cn==3||this.mouseButton==3&&Ot.ctrlKey)this.slabNear=this.cslabNear+an*100,this.slabFar=this.cslabFar-mn*100;else if(cn==2||this.mouseButton==3||Ot.shiftKey)Mn=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,Mn<80&&(Mn=80),this.rotationGroup.position.z=this.cz+mn*Mn,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(cn==1||this.mouseButton==2||Ot.ctrlKey){var un=this.screenOffsetToModel(Zt*(Bt-this.mouseStartX),rn*(Xt-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,un)}else if((cn===0||this.mouseButton==1)&&Cn!==0){var Tn=Math.sin(Cn*Math.PI)/Cn;this.dq.x=Math.cos(Cn*Math.PI),this.dq.y=0,this.dq.z=Tn*an,this.dq.w=-Tn*mn,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(Ot){if(Ot.preventDefault(),this.closeEnoughForClick(Ot)){var Zt=this.mouseStartX,rn=this.mouseStartY,Xt=this.canvasOffset();let Gt=this.mouseXY(Zt,rn),nn=Gt.x,cn=Gt.y,an=this.targetedObjects(nn,cn,this.contextMenuEnabledObjects);var Bt=null;an.length&&(Bt=an[0].clickable);var Xt=this.canvasOffset(),Zt=this.mouseStartX-Xt.left,rn=this.mouseStartY-Xt.top;this.userContextMenuHandler&&(this.userContextMenuHandler(Bt,Zt,rn,an,Ot),this.isDragging=!1)}}setContainer(Ot){let Bt=(0,dt.getElement)(Ot)||this.container;return this.initContainer(Bt),this}setBackgroundColor(Ot,Bt){(typeof Bt>"u"||Bt<0||Bt>1)&&(Bt=1);var Xt=lt.CC.color(Ot);return this.scene.fog.color=Xt,this.bgColor=Xt.getHex(),this.renderer.setClearColorHex(Xt.getHex(),Bt),this.show(),this}setProjection(Ot){this.camera.ortho=Ot==="orthographic",this.setSlabAndFog()}setViewStyle(Ot){if(Ot=Ot||{},Ot.style=Ot.style||"",Ot.style.includes("outline")?this.renderer.enableOutline(Ot):this.renderer.disableOutline(),Ot.style.includes("ambientOcclusion")){var Bt={};Ot.strength&&(Bt.strength=Ot.strength),Ot.radius&&(Bt.radius=Ot.radius),this.renderer.enableAmbientOcclusion(Bt)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(Ot){return this.WIDTH=Ot||this.WIDTH,this.updateSize(),this}setHeight(Ot){return this.HEIGHT=Ot||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let Ot=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let Bt=!1,Xt=this.container.querySelector("canvas");Xt&&Xt!=this.renderer.getCanvas()?this.config.canvas=Xt:(Xt.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,Bt=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),Ot=!0,Bt&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),Ot){let Bt=this.renderer.supportedExtensions();if(Bt.regen=!0,this.viewers)for(let Xt=0,Zt=this.viewers.length;Xt<Zt;Xt++)for(let rn=0,Gt=this.viewers[Xt].length;rn<Gt;rn++)this.viewers[Xt][rn].render(null,Bt);this._viewer.render(null,Bt)}else this.show();return this}getModel(Ot){return Ot===void 0?this.models.length==0?null:this.models[this.models.length-1]:Ot instanceof vt.GLModel?Ot:Ot in this.models?this.models[Ot]:this.models.length==0?null:this.models[this.models.length-1]}spin(Ot,Bt=1,Xt=!1){if(clearInterval(this.spinInterval),typeof Ot>"u"&&(Ot="y"),typeof Ot=="boolean")if(Ot)Ot="y";else return;Array.isArray(Ot)&&(Ot={x:Ot[0],y:Ot[1],z:Ot[2]});var Zt=this;this.spinInterval=setInterval(function(){!Zt.getCanvas().isConnected&&Zt.renderer.isLost()&&clearInterval(Zt.spinInterval),(!Xt||Zt.container.checkVisibility&&Zt.container.checkVisibility())&&Zt.rotate(1*Bt,Ot)},25)}animateMotion(Ot,Bt,Xt,Zt,rn,Gt){var nn=20,cn=Math.ceil(Ot/nn);cn<1&&(cn=1),this.incAnim();var an={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(Bt){let Cn=new Array(cn);for(let Pn=0;Pn<cn;Pn++){let dn=(Pn+1)/cn,Un={mpos:an.mpos,rz:an.rz,rot:an.rot};Un.mpos=Xt.clone().sub(an.mpos).multiplyScalar(dn).add(an.mpos),Un.rz=an.rz+dn*(Zt-an.rz),Un.rot=Et.slerp(an.rot,rn,dn),Un.cam=Gt.clone().sub(an.cam).multiplyScalar(dn).add(an.cam),Cn[Pn]=Un}let Mn=0,un=this,Tn=function(){var Pn=Cn[Mn];Mn+=1,un.modelGroup.position=Pn.mpos,un.rotationGroup.position.z=Pn.rz,un.rotationGroup.quaternion=Pn.rot,un.camera.lookAt(Pn.cam),Mn<Cn.length?setTimeout(Tn,nn):un.decAnim(),un.show()};setTimeout(Tn,nn)}else{var mn={};let Cn=1/cn;if(Xt&&(mn.mpos=Xt.clone().sub(an.mpos).multiplyScalar(Cn)),typeof Zt<"u"&&Zt!=null&&(mn.rz=Cn*(Zt-an.rz)),rn){var En=Et.slerp(an.rot,rn,Cn);mn.rot=an.rot.clone().inverse().multiply(En)}Gt&&(mn.cam=Gt.clone().sub(an.cam).multiplyScalar(Cn));let Mn=0,un=this,Tn=function(){Mn+=1,mn.mpos&&un.modelGroup.position.add(mn.mpos),mn.rz&&(un.rotationGroup.position.z+=mn.rz),mn.rot&&un.rotationGroup.quaternion.multiply(mn.rot),mn.cam&&(un.lookingAt.add(mn.cam),un.camera.lookAt(un.lookingAt)),Mn<cn?setTimeout(Tn,nn):un.decAnim(),un.show()};setTimeout(Tn,nn)}}rotate(Ot,Bt="y",Xt=0,Zt=!1){if(Bt=="x"?Bt={x:1,y:0,z:0}:Bt=="y"?Bt={x:0,y:1,z:0}:Bt=="z"&&(Bt={x:0,y:0,z:1}),Bt=="vx"?Bt={vx:1,vy:0,vz:0}:Bt=="vy"?Bt={vx:0,vy:1,vz:0}:Bt=="vz"&&(Bt={vx:0,vy:0,vz:1}),typeof Bt.vx<"u"){var rn=new at.Vector3(Bt.vx,Bt.vy,Bt.vz);rn.applyQuaternion(this.rotationGroup.quaternion),Bt={x:rn.x,y:rn.y,z:rn.z}}var Gt=function(mn){var En=Math.sin(mn/2),Cn=Math.cos(mn/2),Mn=0,un=0,Tn=0;return Mn=Bt.x*En,un=Bt.y*En,Tn=Bt.z*En,new at.Quaternion(Mn,un,Tn,Cn).normalize()},nn=Math.PI*Ot/180,cn=Gt(nn);if(Xt){var an=new at.Quaternion().copy(this.rotationGroup.quaternion).multiply(cn);this.animateMotion(Xt,Zt,this.modelGroup.position,this.rotationGroup.position.z,an,this.lookingAt)}else this.rotationGroup.quaternion.multiply(cn),this.show();return this}surfacesFinished(){for(var Ot in this.surfaces)if(!this.surfaces[Ot][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var Ot=this.modelGroup.position,Bt=this.rotationGroup.quaternion;return[Ot.x,Ot.y,Ot.z,this.rotationGroup.position.z,Bt.x,Bt.y,Bt.z,Bt.w]}setView(Ot,Bt){return Ot===void 0||!(Ot instanceof Array||Ot.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=Ot[0],this.modelGroup.position.y=Ot[1],this.modelGroup.position.z=Ot[2],this.rotationGroup.position.z=Ot[3],this.rotationGroup.quaternion.x=Ot[4],this.rotationGroup.quaternion.y=Ot[5],this.rotationGroup.quaternion.z=Ot[6],this.rotationGroup.quaternion.w=Ot[7],typeof Ot[8]<"u"&&(this.rotationGroup.position.x=Ot[8],this.rotationGroup.position.y=Ot[9]),this.show(Bt),this)}render(Ot,Bt){this.renderer.setViewport(),this.updateClickables();var Xt=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var Zt,rn;for(Bt||(Bt=this.renderer.supportedExtensions()),Zt=0;Zt<this.models.length;Zt++)this.models[Zt]&&this.models[Zt].globj(this.modelGroup,Bt);for(Zt=0;Zt<this.shapes.length;Zt++)this.shapes[Zt]&&(typeof this.shapes[Zt].frame>"u"||this.viewer_frame<0||this.shapes[Zt].frame<0||this.shapes[Zt].frame==this.viewer_frame?this.shapes[Zt].globj(this.modelGroup,Bt):this.shapes[Zt].removegl(this.modelGroup));for(Zt=0;Zt<this.labels.length;Zt++)Bt.regen&&(this.labels[Zt].dispose(),this.modelGroup.remove(this.labels[Zt].sprite),this.labels[Zt].setContext(),this.modelGroup.add(this.labels[Zt].sprite)),this.labels[Zt]&&typeof this.labels[Zt].frame<"u"&&this.labels[Zt].frame>=0&&(this.modelGroup.remove(this.labels[Zt].sprite),(this.viewer_frame<0||this.labels[Zt].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[Zt].sprite));for(Zt in this.surfaces)if(this.surfaces.hasOwnProperty(Zt)){var Gt=this.surfaces[Zt];for(rn=0;rn<Gt.length;rn++)if(Gt.hasOwnProperty(rn)){var nn=Gt[rn].geo;if(!Gt[rn].finished||Bt.regen){nn.verticesNeedUpdate=!0,nn.elementsNeedUpdate=!0,nn.normalsNeedUpdate=!0,nn.colorsNeedUpdate=!0,nn.buffersNeedUpdate=!0,Gt[rn].mat.needsUpdate=!0,Gt[rn].done&&(Gt[rn].finished=!0),Gt[rn].lastGL&&this.modelGroup.remove(Gt[rn].lastGL);var cn=null;if(Gt[rn].mat instanceof st.LineBasicMaterial?cn=new st.Line(nn,Gt[rn].mat):cn=new st.Mesh(nn,Gt[rn].mat),Gt[rn].mat.transparent&&Gt[rn].mat.opacity==0?cn.visible=!1:cn.visible=!0,Gt[rn].symmetries.length>1||Gt[rn].symmetries.length==1&&!Gt[rn].symmetries[rn].isIdentity()){var an,mn=new st.Object3D;for(an=0;an<Gt[rn].symmetries.length;an++){var En=cn.clone();En.matrix=Gt[rn].symmetries[an],En.matrixAutoUpdate=!1,mn.add(En)}Gt[rn].lastGL=mn,this.modelGroup.add(mn)}else Gt[rn].lastGL=cn,this.modelGroup.add(cn)}}}return this.setView(Xt),typeof Ot=="function"&&Ot(this),this}getModelList(Ot){let Bt=[];if(typeof Ot>"u"||typeof Ot.model>"u")for(let Zt=0;Zt<this.models.length;Zt++)this.models[Zt]&&Bt.push(this.models[Zt]);else{let Zt=Ot.model;Array.isArray(Zt)||(Zt=[Zt]);for(let rn=0;rn<Zt.length;rn++)if(typeof Zt[rn]=="number"){var Xt=Zt[rn];Xt<0&&(Xt+=this.models.length),Bt.push(this.models[Xt])}else Bt.push(Zt[rn])}return Bt}getAtomsFromSel(Ot){var Bt=[];typeof Ot>"u"&&(Ot={});var Xt=this.getModelList(Ot);for(let Zt=0;Zt<Xt.length;Zt++)Bt=Bt.concat(Xt[Zt].selectedAtoms(Ot));return Bt}atomIsSelected(Ot,Bt){typeof Bt>"u"&&(Bt={});for(var Xt=this.getModelList(Bt),Zt=0;Zt<Xt.length;Zt++)if(Xt[Zt].atomIsSelected(Ot,Bt))return!0;return!1}selectedAtoms(Ot){return this.getAtomsFromSel(Ot)}getUniqueValues(Ot,Bt){typeof Bt>"u"&&(Bt={});var Xt=this.getAtomsFromSel(Bt),Zt={};for(var rn in Xt)if(Xt[rn].hasOwnProperty(Ot)){var Gt=Xt[rn][Ot];Zt[Gt]=!0}return Object.keys(Zt)}pdbData(Ot){for(var Bt=this.getAtomsFromSel(Ot),Xt="",Zt=0,rn=Bt.length;Zt<rn;++Zt)Xt+=Bt[Zt].pdbline+`
`;return Xt}zoom(Ot=2,Bt=0,Xt=!1){var Zt=(this.CAMERA_Z-this.rotationGroup.position.z)/Ot,rn=this.CAMERA_Z-Zt;return Bt>0?this.animateMotion(Bt,Xt,this.modelGroup.position,this.adjustZoomToLimits(rn),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(rn),this.show()),this}translate(Ot,Bt,Xt=0,Zt=!1){var rn=Ot/this.WIDTH,Gt=Bt/this.HEIGHT,nn=new at.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(nn,this.camera),nn.x-=rn,nn.y-=Gt,this.projector.unprojectVector(nn,this.camera),nn.z=0;var cn=this.lookingAt.clone().add(nn);return Xt>0?this.animateMotion(Xt,Zt,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,cn):(this.lookingAt=cn,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(Ot,Bt,Xt=0,Zt=!1){var rn=this.screenOffsetToModel(Ot,Bt),Gt=this.modelGroup.position.clone().add(rn);return Xt>0?this.animateMotion(Xt,Zt,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Gt,this.show()),this}fitSlab(Ot){Ot=Ot||{};var Bt=this.getAtomsFromSel(Ot),Xt=(0,dt.getExtent)(Bt),Zt=Xt[1][0]-Xt[0][0],rn=Xt[1][1]-Xt[0][1],Gt=Xt[1][2]-Xt[0][2],nn=Math.hypot(Zt,rn,Gt);return nn<5&&(nn=5),this.slabNear=-nn/1.9,this.slabFar=nn/2,this}center(Ot={},Bt=0,Xt=!1){var Zt,rn,Gt=this.getAtomsFromSel(Ot),nn=(0,dt.getExtent)(Gt);(0,dt.isEmptyObject)(Ot)?(this.shapes.forEach(dn=>{if(dn&&dn.boundingSphere&&dn.boundingSphere.center){var Un=dn.boundingSphere.center,qn=dn.boundingSphere.radius;qn>0?(Gt.push(new at.Vector3(Un.x+qn,Un.y,Un.z)),Gt.push(new at.Vector3(Un.x-qn,Un.y,Un.z)),Gt.push(new at.Vector3(Un.x,Un.y+qn,Un.z)),Gt.push(new at.Vector3(Un.x,Un.y-qn,Un.z)),Gt.push(new at.Vector3(Un.x,Un.y,Un.z+qn)),Gt.push(new at.Vector3(Un.x,Un.y,Un.z-qn))):Gt.push(Un)}}),nn=(0,dt.getExtent)(Gt),Zt=Gt,rn=nn):(Zt=this.getAtomsFromSel({}),rn=(0,dt.getExtent)(Zt));var cn=new at.Vector3(nn[2][0],nn[2][1],nn[2][2]),an=rn[1][0]-rn[0][0],mn=rn[1][1]-rn[0][1],En=rn[1][2]-rn[0][2],Cn=Math.hypot(an,mn,En);Cn<5&&(Cn=5),this.slabNear=-Cn/1.9,this.slabFar=Cn/2,an=nn[1][0]-nn[0][0],mn=nn[1][1]-nn[0][1],En=nn[1][2]-nn[0][2],Cn=Math.hypot(an,mn,En),Cn<5&&(Cn=5);for(var Mn=25,un=0;un<Gt.length;un++)if(Gt[un]){var Tn=cn.distanceToSquared(Gt[un]);Tn>Mn&&(Mn=Tn)}Cn=Math.sqrt(Mn)*2;var Pn=cn.clone().multiplyScalar(-1);return Bt>0?this.animateMotion(Bt,Xt,Pn,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Pn,this.show()),this}zoomTo(Ot={},Bt=0,Xt=!1){let Zt=this.getAtomsFromSel(Ot),rn=(0,dt.getExtent)(Zt),Gt=rn;if((0,dt.isEmptyObject)(Ot)){let Un=Zt&&Zt.length;if(this.shapes.forEach(qn=>{if(qn&&qn.boundingSphere){if(qn.boundingSphere.box){let ar=qn.boundingSphere.box;Zt.push(new at.Vector3(ar.min.x,ar.min.y,ar.min.z)),Zt.push(new at.Vector3(ar.max.x,ar.max.y,ar.max.z))}else if(qn.boundingSphere.center){var In=qn.boundingSphere.center,Wn=qn.boundingSphere.radius;Wn>0?(Zt.push(new at.Vector3(In.x+Wn,In.y,In.z)),Zt.push(new at.Vector3(In.x-Wn,In.y,In.z)),Zt.push(new at.Vector3(In.x,In.y+Wn,In.z)),Zt.push(new at.Vector3(In.x,In.y-Wn,In.z)),Zt.push(new at.Vector3(In.x,In.y,In.z+Wn)),Zt.push(new at.Vector3(In.x,In.y,In.z-Wn))):Zt.push(In)}}}),Gt=(0,dt.getExtent)(Zt),!Un)for(let qn=0;qn<3;qn++)rn[2][qn]=(Gt[0][qn]+Gt[1][qn])/2}else{let Un=this.getAtomsFromSel({});Gt=(0,dt.getExtent)(Un)}var nn=new at.Vector3(rn[2][0],rn[2][1],rn[2][2]),cn=Gt[1][0]-Gt[0][0],an=Gt[1][1]-Gt[0][1],mn=Gt[1][2]-Gt[0][2],En=Math.hypot(cn,an,mn);En<5&&(En=5),this.slabNear=-En/1.9,this.slabFar=En/2,Object.keys(Ot).length===0&&(this.slabNear=Math.min(-En*2,-50),this.slabFar=Math.max(En*2,50));var Cn=this.config.minimumZoomToDistance||5;cn=rn[1][0]-rn[0][0],an=rn[1][1]-rn[0][1],mn=rn[1][2]-rn[0][2],En=Math.hypot(cn,an,mn),En<Cn&&(En=Cn);for(var Mn=Cn*Cn,un=0;un<Zt.length;un++)if(Zt[un]){var Tn=nn.distanceToSquared(Zt[un]);Tn>Mn&&(Mn=Tn)}En=Math.sqrt(Mn)*2;var Pn=nn.clone().multiplyScalar(-1),dn=-(En*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return dn=this.adjustZoomToLimits(dn),Bt>0?this.animateMotion(Bt,Xt,Pn,dn,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=Pn,this.rotationGroup.position.z=dn,this.show()),this}setSlab(Ot,Bt){this.slabNear=Ot,this.slabFar=Bt}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(Ot,Bt={},Xt,Zt=!1){if(Xt){var rn=(0,dt.getExtent)(this.getAtomsFromSel(Xt));Bt.position={x:rn[2][0],y:rn[2][1],z:rn[2][2]}}var Gt=new _t.Label(Ot,Bt);return Gt.setContext(),this.modelGroup.add(Gt.sprite),this.labels.push(Gt),Zt||this.show(),Gt}addResLabels(Ot,Bt,Xt=!1){let Zt=this.labels.length;return this.applyToModels("addResLabels",Ot,this,Bt,Xt),this.show(),this.labels.slice(Zt)}addPropertyLabels(Ot,Bt,Xt){return this.applyToModels("addPropertyLabels",Ot,Bt,this,Xt),this.show(),this}removeLabel(Ot){for(var Bt=0;Bt<this.labels.length;Bt++)if(this.labels[Bt]==Ot){this.labels.splice(Bt,1),Ot.dispose(),this.modelGroup.remove(Ot.sprite);break}return this.show(),this}removeAllLabels(){for(var Ot=0;Ot<this.labels.length;Ot++)this.labels[Ot]&&this.labels[Ot].sprite&&this.modelGroup.remove(this.labels[Ot].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var Ot=0;Ot<this.labels.length;Ot++)this.labels[Ot]&&this.labels[Ot].hide();return this.show(),this}showAllLabels(){for(var Ot=0;Ot<this.labels.length;Ot++)this.labels[Ot]&&this.labels[Ot].show();return this.show(),this}setLabelStyle(Ot,Bt){return this.modelGroup.remove(Ot.sprite),Ot.dispose(),Ot.stylespec=Bt,Ot.setContext(),this.modelGroup.add(Ot.sprite),this.show(),Ot}setLabelText(Ot,Bt){return this.modelGroup.remove(Ot.sprite),Ot.dispose(),Ot.text=Bt,Ot.setContext(),this.modelGroup.add(Ot.sprite),this.show(),Ot}addShape(Ot){Ot=Ot||{};var Bt=new bt.GLShape(Ot);return Bt.shapePosition=this.shapes.length,this.shapes.push(Bt),Bt}removeShape(Ot){if(!Ot)return this;for(Ot.removegl(this.modelGroup),delete this.shapes[Ot.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var Ot=0;Ot<this.shapes.length;Ot++){var Bt=this.shapes[Ot];Bt&&Bt.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(Ot){if(Ot.hasOwnProperty("x")&&Ot.hasOwnProperty("y")&&Ot.hasOwnProperty("z"))return Ot;var Bt=this.getAtomsFromSel(Ot);if(Bt.length==0)return{x:0,y:0,z:0};var Xt=(0,dt.getExtent)(Bt);return{x:Xt[0][0]+(Xt[1][0]-Xt[0][0])/2,y:Xt[0][1]+(Xt[1][1]-Xt[0][1])/2,z:Xt[0][2]+(Xt[1][2]-Xt[0][2])/2}}addSphere(Ot){Ot=Ot||{},Ot.center=this.getSelectionCenter(Ot.center);var Bt=new bt.GLShape(Ot);return Bt.shapePosition=this.shapes.length,Bt.addSphere(Ot),this.shapes.push(Bt),Bt.finalize(),Bt}addBox(Ot={}){Ot.corner!=null&&(Ot.corner=this.getSelectionCenter(Ot.corner)),Ot.center!=null&&(Ot.center=this.getSelectionCenter(Ot.center));var Bt=new bt.GLShape(Ot);return Bt.shapePosition=this.shapes.length,Bt.addBox(Ot),this.shapes.push(Bt),Bt.finalize(),Bt}addArrow(Ot={}){Ot.start=this.getSelectionCenter(Ot.start),Ot.end=this.getSelectionCenter(Ot.end);var Bt=new bt.GLShape(Ot);return Bt.shapePosition=this.shapes.length,Bt.addArrow(Ot),this.shapes.push(Bt),Bt.finalize(),Bt}addCylinder(Ot={}){Ot.start=this.getSelectionCenter(Ot.start),Ot.end=this.getSelectionCenter(Ot.end);var Bt=new bt.GLShape(Ot);return Bt.shapePosition=this.shapes.length,Ot.dashed?Bt.addDashedCylinder(Ot):Bt.addCylinder(Ot),this.shapes.push(Bt),Bt.finalize(),Bt}addCurve(Ot={}){var Bt=new bt.GLShape(Ot);return Bt.shapePosition=this.shapes.length,Bt.addCurve(Ot),this.shapes.push(Bt),Bt.finalize(),Bt}addLine(Ot={}){Ot.start=this.getSelectionCenter(Ot.start),Ot.end=this.getSelectionCenter(Ot.end),Ot.wireframe=!0;var Bt=new bt.GLShape(Ot);return Bt.shapePosition=this.shapes.length,Ot.dashed?Bt=this.addLineDashed(Ot,Bt):Bt.addLine(Ot),this.shapes.push(Bt),Bt.finalize(),Bt}addUnitCell(Ot,Bt){Ot=this.getModel(Ot),Bt=Bt||{alabel:"a",blabel:"b",clabel:"c"},Bt.box=Bt.box||{},Bt.astyle=Bt.astyle||{color:"red",radius:.1,midpos:-1},Bt.bstyle=Bt.bstyle||{color:"green",radius:.1,midpos:-1},Bt.cstyle=Bt.cstyle||{color:"blue",radius:.1,midpos:-1},Bt.alabelstyle=Bt.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},Bt.blabelstyle=Bt.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},Bt.clabelstyle=Bt.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},Ot.unitCellObjects&&this.removeUnitCell(Ot),Ot.unitCellObjects={shapes:[],labels:[]};var Xt=Ot.getCrystData(),Zt=null;if(Xt){if(Xt.matrix)Zt=Xt.matrix;else{var rn=Xt.a,Gt=Xt.b,nn=Xt.c,cn=Xt.alpha,an=Xt.beta,mn=Xt.gamma;cn=cn*Math.PI/180,an=an*Math.PI/180,mn=mn*Math.PI/180;var En,Cn,Mn;En=Math.cos(an),Cn=(Math.cos(cn)-Math.cos(an)*Math.cos(mn))/Math.sin(mn),Mn=Math.sqrt(Math.max(0,1-En*En-Cn*Cn)),Zt=new at.Matrix3(rn,Gt*Math.cos(mn),nn*En,0,Gt*Math.sin(mn),nn*Cn,0,0,nn*Mn)}var un=[new at.Vector3(0,0,0),new at.Vector3(1,0,0),new at.Vector3(0,1,0),new at.Vector3(0,0,1),new at.Vector3(1,1,0),new at.Vector3(0,1,1),new at.Vector3(1,0,1),new at.Vector3(1,1,1)];if(Xt.matrix4)for(let Pn=0;Pn<un.length;Pn++)Xt.size&&un[Pn].multiplyVectors(un[Pn],Xt.size),un[Pn]=un[Pn].applyMatrix4(Xt.matrix4);else for(let Pn=0;Pn<un.length;Pn++)un[Pn]=un[Pn].applyMatrix3(Zt);if(Bt.box&&!Bt.box.hidden){Bt.box.wireframe=!0;var Tn=new bt.GLShape(Bt.box);Tn.shapePosition=this.shapes.length,Tn.addLine({start:un[0],end:un[1]}),Tn.addLine({start:un[0],end:un[2]}),Tn.addLine({start:un[1],end:un[4]}),Tn.addLine({start:un[2],end:un[4]}),Tn.addLine({start:un[0],end:un[3]}),Tn.addLine({start:un[3],end:un[5]}),Tn.addLine({start:un[2],end:un[5]}),Tn.addLine({start:un[1],end:un[6]}),Tn.addLine({start:un[4],end:un[7]}),Tn.addLine({start:un[6],end:un[7]}),Tn.addLine({start:un[3],end:un[6]}),Tn.addLine({start:un[5],end:un[7]}),this.shapes.push(Tn),Ot.unitCellObjects.shapes.push(Tn),Tn.finalize()}if(!Bt.astyle.hidden){Bt.astyle.start=un[0],Bt.astyle.end=un[1];let Pn=this.addArrow(Bt.astyle);Ot.unitCellObjects.shapes.push(Pn)}if(!Bt.bstyle.hidden){Bt.bstyle.start=un[0],Bt.bstyle.end=un[2];let Pn=this.addArrow(Bt.bstyle);Ot.unitCellObjects.shapes.push(Pn)}if(!Bt.cstyle.hidden){Bt.cstyle.start=un[0],Bt.cstyle.end=un[3];let Pn=this.addArrow(Bt.cstyle);Ot.unitCellObjects.shapes.push(Pn)}if(Bt.alabel){Bt.alabelstyle.position=un[1];let Pn=this.addLabel(Bt.alabel,Bt.alabelstyle);Ot.unitCellObjects.labels.push(Pn)}if(Bt.blabel){Bt.blabelstyle.position=un[2];let Pn=this.addLabel(Bt.blabel,Bt.blabelstyle);Ot.unitCellObjects.labels.push(Pn)}if(Bt.clabel){Bt.clabelstyle.position=un[3];let Pn=this.addLabel(Bt.clabel,Bt.clabelstyle);Ot.unitCellObjects.labels.push(Pn)}}}removeUnitCell(Ot){if(Ot=this.getModel(Ot),Ot.unitCellObjects){let Bt=this;Ot.unitCellObjects.shapes.forEach(function(Xt){Bt.removeShape(Xt)}),Ot.unitCellObjects.labels.forEach(function(Xt){Bt.removeLabel(Xt)})}delete Ot.unitCellObjects}replicateUnitCell(Ot=3,Bt=Ot,Xt=Bt,Zt,rn,Gt){Zt=this.getModel(Zt);let nn=Zt.getCrystData();if(nn){const cn=Zt.selectedAtoms({}),an=nn.matrix;let mn=function(Cn){return Cn%2==0?-Cn/2:Math.ceil(Cn/2)};Ot<=1&&Bt<=1&&Xt<=1&&(Gt=!0,Ot=Bt=Xt=3);let En=function(Cn,Mn,un){return!1};if(Gt){const Cn=new at.Matrix3().getInverse3(an);En=function(Mn,un,Tn){let Pn=new at.Vector3(Mn,un,Tn).applyMatrix3(Cn);return!(Pn.x>-1e-4&&Pn.x<1.0001&&Pn.y>-1e-4&&Pn.y<1.0001&&Pn.z>-1e-4&&Pn.z<1.0001)}}for(let Cn=0;Cn<Ot;Cn++)for(let Mn=0;Mn<Bt;Mn++)for(let un=0;un<Xt;un++){if(Cn==0&&Mn==0&&un==0)continue;let Tn=new at.Vector3(mn(Cn),mn(Mn),mn(un));Tn.applyMatrix3(an);let Pn=[];for(let dn=0;dn<cn.length;dn++){let Un=cn[dn].x+Tn.x,qn=cn[dn].y+Tn.y,In=cn[dn].z+Tn.z;if(En(Un,qn,In))continue;let Wn={};for(let ar in cn[dn])Wn[ar]=cn[dn][ar];Wn.x=Un,Wn.y=qn,Wn.z=In,Pn.push(Wn)}Zt.addAtoms(Pn)}rn&&Zt.assignBonds()}}addLineDashed(Ot,Bt){Ot.dashLength=Ot.dashLength||.5,Ot.gapLength=Ot.gapLength||.5;var Xt;Ot.start?Xt=new at.Vector3(Ot.start.x||0,Ot.start.y||0,Ot.start.z||0):Xt=new at.Vector3(0,0,0);var Zt;Ot.end?Zt=new at.Vector3(Ot.end.x,Ot.end.y||0,Ot.end.z||0):Zt=new at.Vector3(0,0,0);var rn=new at.Vector3,Gt=new at.Vector3,nn=new at.Vector3,cn,an,mn,En=Xt.clone(),Cn=0;for(rn.subVectors(Zt,Xt),cn=rn.length(),rn.normalize(),Gt=rn.clone(),nn=rn.clone(),Gt.multiplyScalar(Ot.dashLength),nn.multiplyScalar(Ot.gapLength),an=Gt.length(),mn=nn.length();Cn<cn;){if(Cn+an>cn){Ot.start=Xt,Ot.end=Zt,Bt.addLine(Ot);break}En.addVectors(Xt,Gt),Ot.start=Xt,Ot.end=En,Bt.addLine(Ot),Xt=En.clone(),Cn+=an,En.addVectors(Xt,nn),Xt=En.clone(),Cn+=mn}return Bt.finalize(),Bt}addCustom(Ot){Ot=Ot||{};var Bt=new bt.GLShape(Ot);return Bt.shapePosition=this.shapes.length,Bt.addCustom(Ot),this.shapes.push(Bt),Bt.finalize(),Bt}addVolumetricData(Ot,Bt,Xt={}){var Zt=new Mt.VolumeData(Ot,Bt);return Xt.hasOwnProperty("transferfn")?this.addVolumetricRender(Zt,Xt):this.addIsosurface(Zt,Xt)}addIsosurface(Ot,Bt={},Xt){var Zt=new bt.GLShape(Bt);return Zt.shapePosition=this.shapes.length,Zt.addIsosurface(Ot,Bt,Xt,this),this.shapes.push(Zt),Zt}addVolumetricRender(Ot,Bt){Bt=Bt||{};var Xt=new Tt.GLVolumetricRender(Ot,Bt,this);return Xt.shapePosition=this.shapes.length,this.shapes.push(Xt),Xt}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(Ot){Ot?this.scene.fog=new st.Fog(this.bgColor,100,200):(this.config.disableFog=!0,this.show())}setFrame(Ot){this.viewer_frame=Ot;let Bt=this;return new Promise(function(Xt){var Zt=Bt.models.map(function(rn){return rn.setFrame(Ot,Bt)});Promise.all(Zt).then(function(){Xt()})})}getFrame(){return this.viewer_frame}getNumFrames(){var Ot=0;for(let Bt=0;Bt<this.models.length;Bt++)this.models[Bt].getNumFrames()>Ot&&(Ot=this.models[Bt].getNumFrames());for(let Bt=0;Bt<this.shapes.length;Bt++)this.shapes[Bt].frame&&this.shapes[Bt].frame>=Ot&&(Ot=this.shapes[Bt].frame+1);for(let Bt=0;Bt<this.labels.length;Bt++)this.labels[Bt].frame&&this.labels[Bt].frame>=Ot&&(Ot=this.labels[Bt].frame+1);return Ot}animate(Ot){this.incAnim();var Bt=100,Xt="forward",Zt=1/0;Ot=Ot||{},Ot.interval&&(Bt=Ot.interval),Ot.loop&&(Xt=Ot.loop),Ot.reps&&(Zt=Ot.reps);var rn=this.getNumFrames(),Gt=this,nn=0;Ot.startFrame&&(nn=Ot.startFrame%rn);var cn=1;Ot.step&&(cn=Ot.step,Zt/=cn);var an=0,mn=rn*Zt,En=new Date,Cn,Mn,un=function(Tn){En=new Date,Tn=="forward"?Gt.setFrame(nn).then(function(){nn=(nn+cn)%rn,Cn()}):Tn=="backward"?Gt.setFrame(rn-1-nn).then(function(){nn=(nn+cn)%rn,Cn()}):Gt.setFrame(nn).then(function(){nn+=cn,cn*=nn%(rn-1)==0?-1:1,Cn()})};return Cn=function(){if(Gt.render(),!Gt.getCanvas().isConnected)Gt.stopAnimate();else if(++an>=mn||!Gt.isAnimated())Mn.cancel(),Gt.animationTimers.delete(Mn),Gt.decAnim();else{var Tn=Bt-(new Date().getTime()-En.getTime());Tn=Tn>0?Tn:0,Gt.animationTimers.delete(Mn),Mn=new dt.PausableTimer(un,Tn,Xt),Gt.animationTimers.add(Mn)}},Mn=new dt.PausableTimer(un,0,Xt),this.animationTimers.add(Mn),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(Ot){Ot.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(Ot){Ot.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(Ot){Ot.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(Ot){return Ot&&!Ot.defaultcolors?(Ot.defaultcolors=this.defaultcolors,Ot.cartoonQuality=Ot.cartoonQuality||this.config.cartoonQuality):typeof Ot>"u"&&(Ot={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),Ot}addModel(Ot,Bt="",Xt){Xt=this.getModelOpt(Xt);var Zt=new vt.GLModel(this.models.length,Xt);return Zt.addMolData(Ot,Bt,Xt),this.models.push(Zt),Zt}addModels(Ot,Bt,Xt){Xt=this.getModelOpt(Xt),Xt.multimodel=!0,Xt.frames=!0;for(var Zt=vt.GLModel.parseMolData(Ot,Bt,Xt),rn=0;rn<Zt.length;rn++){var Gt=new vt.GLModel(this.models.length,Xt);Gt.setAtomDefaults(Zt[rn]),Gt.addFrame(Zt[rn]),Gt.setFrame(0),Zt.modelData&&Gt.setModelData(Zt.modelData[rn]),Gt.setDontDuplicateAtoms(!Xt.duplicateAssemblyAtoms),this.models.push(Gt)}return this.models}addModelsAsFrames(Ot,Bt,Xt){Xt=this.getModelOpt(Xt),Xt.multimodel=!0,Xt.frames=!0;var Zt=new vt.GLModel(this.models.length,Xt);return Zt.addMolData(Ot,Bt,Xt),this.models.push(Zt),Zt}addAsOneMolecule(Ot,Bt,Xt){Xt=this.getModelOpt(Xt),Xt.multimodel=!0,Xt.onemol=!0;var Zt=new vt.GLModel(this.models.length,Xt);return Zt.addMolData(Ot,Bt,Xt),this.models.push(Zt),Zt}removeModel(Ot){if(Ot=this.getModel(Ot),!!Ot){for(Ot.removegl(this.modelGroup),delete this.models[Ot.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var Ot=0;Ot<this.models.length;Ot++){var Bt=this.models[Ot];Bt&&Bt.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(Ot,Bt){var Xt={};return Bt===void 0?Xt.m=this.models.map(function(Zt){return Zt.toCDObject(Ot)}):Xt.m=[this.models[Bt].toCDObject()],JSON.stringify(Xt)}exportVRML(){var Ot=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new st.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var Bt=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=Ot,Bt}createModelFrom(Ot,Bt=!1){for(var Xt=new vt.GLModel(this.models.length,this.defaultcolors),Zt=0;Zt<this.models.length;Zt++)if(this.models[Zt]){var rn=this.models[Zt].selectedAtoms(Ot);Xt.addAtoms(rn),Bt&&this.models[Zt].removeAtoms(rn)}return this.models.push(Xt),Xt}applyToModels(Ot,Bt,Xt,Zt,rn,Gt,nn){for(var cn=this.getModelList(Bt),an=0;an<cn.length;an++)cn[an][Ot](Bt,Xt,Zt,rn,Gt,nn)}setStyle(Ot,Bt){return typeof Bt>"u"&&(Bt=Ot,Ot={}),this.applyToModels("setStyle",Ot,Bt,!1),this}addStyle(Ot,Bt){return typeof Bt>"u"&&(Bt=Ot,Ot={}),this.applyToModels("setStyle",Ot,Bt,!0),this}setClickable(Ot,Bt,Xt){return this.applyToModels("setClickable",Ot,Bt,Xt),this}setHoverable(Ot,Bt,Xt,Zt){return this.applyToModels("setHoverable",Ot,Bt,Xt,Zt),this}enableContextMenu(Ot,Bt){return this.applyToModels("enableContextMenu",Ot,Bt),this}vibrate(Ot,Bt,Xt,Zt){return this.applyToModels("vibrate",Ot,Bt,Xt,this,Zt),this}setColorByProperty(Ot,Bt,Xt,Zt){return this.applyToModels("setColorByProperty",Ot,Bt,Xt,Zt),this}setColorByElement(Ot,Bt){return this.applyToModels("setColorByElement",Ot,Bt),this}static getAtomsWithin(Ot,Bt){var Xt=[];for(let rn=0;rn<Ot.length;rn++){var Zt=Ot[rn];typeof Zt>"u"||Zt.x<Bt[0][0]||Zt.x>Bt[1][0]||Zt.y<Bt[0][1]||Zt.y>Bt[1][1]||Zt.z<Bt[0][2]||Zt.z>Bt[1][2]||Xt.push(Zt)}return Xt}static volume(Ot){var Bt=Ot[1][0]-Ot[0][0],Xt=Ot[1][1]-Ot[0][1],Zt=Ot[1][2]-Ot[0][2];return Bt*Xt*Zt}carveUpExtent(Ot,Bt,Xt){let Zt=[],rn={};for(let En=0,Cn=Bt.length;En<Cn;En++)rn[Bt[En].index]=En;let Gt=function(En){let Cn=[];for(let Mn=0,un=En.length;Mn<un;Mn++)En[Mn].index in rn&&Cn.push(rn[En[Mn].index]);return Cn},nn=function(En){let Cn=[];return Cn[0]=[En[0][0],En[0][1],En[0][2]],Cn[1]=[En[1][0],En[1][1],En[1][2]],Cn},cn=function(En){if(Et.volume(En)<Et.maxVolume)return[En];var Cn=En[1][0]-En[0][0],Mn=En[1][1]-En[0][1],un=En[1][2]-En[0][2],Tn;Cn>Mn&&Cn>un?Tn=0:Mn>Cn&&Mn>un?Tn=1:Tn=2;var Pn=nn(En),dn=nn(En),Un=(En[1][Tn]-En[0][Tn])/2+En[0][Tn];Pn[1][Tn]=Un,dn[0][Tn]=Un;var qn=cn(Pn),In=cn(dn);return qn.concat(In)},an=cn(Ot),mn=6;for(let En=0,Cn=an.length;En<Cn;En++){let Mn=nn(an[En]);Mn[0][0]-=mn,Mn[0][1]-=mn,Mn[0][2]-=mn,Mn[1][0]+=mn,Mn[1][1]+=mn,Mn[1][2]+=mn;let un=Et.getAtomsWithin(Bt,Mn),Tn=Et.getAtomsWithin(Xt,an[En]);Zt.push({extent:an[En],atoms:Gt(un),toshow:Gt(Tn)})}return Zt}static generateSurfaceMesh(Ot,Bt,Xt){var Zt=new st.Geometry(!0),rn=Zt.updateGeoGroup(0),Gt=[];for(let Jn=0,hr=Ot.length;Jn<hr;Jn++){var nn=Ot[Jn];nn&&(typeof nn.surfaceColor<"u"?Gt[Jn]=nn.surfaceColor:nn.color&&(Gt[Jn]=lt.CC.color(nn.color)))}var cn=rn.vertexArray,an=Bt.vertices;for(let Jn=0,hr=an.length;Jn<hr;Jn++){let wr=rn.vertices*3;cn[wr]=an[Jn].x,cn[wr+1]=an[Jn].y,cn[wr+2]=an[Jn].z,rn.vertices++}var mn=rn.colorArray;let En=rn.atomArray;if(Xt.voldata&&Xt.volscheme){var Cn=Xt.volscheme,Mn=Xt.voldata,un=Cn.range()||[-1,1];for(let Jn=0,hr=an.length;Jn<hr;Jn++){let wr=an[Jn].atomid,Nr=Mn.getVal(an[Jn].x,an[Jn].y,an[Jn].z),Fr=lt.CC.color(Cn.valueToHex(Nr,un)),Yr=Jn*3;mn[Yr]=Fr.r,mn[Yr+1]=Fr.g,mn[Yr+2]=Fr.b,En[Jn]=Ot[wr]}}else if(Gt.length>0)for(let Jn=0,hr=an.length;Jn<hr;Jn++){let wr=an[Jn].atomid,Nr=Jn*3;mn[Nr]=Gt[wr].r,mn[Nr+1]=Gt[wr].g,mn[Nr+2]=Gt[wr].b,En[Jn]=Ot[wr]}var Tn=Bt.faces;rn.faceidx=Tn.length,Zt.initTypedArrays();var Pn=rn.vertexArray,dn=rn.normalArray,Un,qn,In,Wn;for(let Jn=0,hr=Tn.length;Jn<hr;Jn+=3){var ar=Tn[Jn],fr=Tn[Jn+1],mr=Tn[Jn+2],vr=ar*3,Ar=fr*3,$r=mr*3;Un=new at.Vector3(Pn[vr],Pn[vr+1],Pn[vr+2]),qn=new at.Vector3(Pn[Ar],Pn[Ar+1],Pn[Ar+2]),In=new at.Vector3(Pn[$r],Pn[$r+1],Pn[$r+2]),In.subVectors(In,qn),Un.subVectors(Un,qn),In.cross(Un),Wn=In,Wn.normalize(),dn[vr]+=Wn.x,dn[Ar]+=Wn.x,dn[$r]+=Wn.x,dn[vr+1]+=Wn.y,dn[Ar+1]+=Wn.y,dn[$r+1]+=Wn.y,dn[vr+2]+=Wn.z,dn[Ar+2]+=Wn.z,dn[$r+2]+=Wn.z}rn.faceArray=new Uint16Array(Tn);var Mr=new st.Mesh(Zt,Xt);return Mr}static generateMeshSyncHelper(Ot,Bt,Xt,Zt,rn,Gt){var nn=new Ct.ProteinSurface;return nn.initparm(Bt,Ot!==1,Gt),nn.fillvoxels(rn,Xt),nn.buildboundary(),(Ot==Ct.SurfaceType.SES||Ot==Ct.SurfaceType.MS)&&(nn.fastdistancemap(),nn.boundingatom(!1),nn.fillvoxelswaals(rn,Xt)),nn.marchingcube(Ot),nn.getFacesAndVertices(Zt)}static getMatWithStyle(Ot){let Bt=null;Ot.onesided?Bt=new st.MeshLambertMaterial:Bt=new st.MeshDoubleLambertMaterial,Bt.vertexColors=st.Coloring.VertexColors;for(var Xt in Ot)Xt==="color"||Xt==="map"||Ot.hasOwnProperty(Xt)&&(Bt[Xt]=Ot[Xt]);return Ot.opacity!==void 0&&(Ot.opacity===1?Bt.transparent=!1:Bt.transparent=!0),Bt}addMesh(Ot){var Bt={geo:Ot.geometry,mat:Ot.material,done:!0,finished:!1},Xt=this.nextSurfID();return this.surfaces[Xt]=[Bt],Xt}static shallowCopy(Ot){var Bt=[];let Xt=Ot.length;for(let Zt=0;Zt<Xt;Zt++)Bt[Zt]=(0,dt.extend)({},Ot[Zt]);return Bt}addSurface(Ot,Bt={},Xt={},Zt,rn,Gt){let nn=this.nextSurfID(),cn=null,an=this,mn=Ct.SurfaceType.VDW;typeof Ot=="string"?Et.surfaceTypeMap[Ot.toUpperCase()]!==void 0?mn=Et.surfaceTypeMap[Ot]:console.log("Surface type : "+Ot+" is not recognized"):typeof Ot=="number"&&(mn=Ot);var En=null,Cn=null,Mn=Et.shallowCopy(this.getAtomsFromSel(Xt));Zt?En=Et.shallowCopy(this.getAtomsFromSel(Zt)):En=Mn,(0,dt.adjustVolumeStyle)(Bt);var un=!1,Tn;for(Tn=0;Tn<this.models.length;Tn++)if(this.models[Tn]){var Pn=this.models[Tn].getSymmetries();if(Pn.length>1||Pn.length==1&&!Pn[0].isIdentity()){un=!0;break}}var dn=function(mr,vr,Ar){rn?Cn=Et.shallowCopy(an.getAtomsFromSel(rn)):Cn=Ar;var $r,Mr=(0,dt.getExtent)(Ar,!0);if(Bt.map&&Bt.map.prop){var Jn=Bt.map.prop;let pr=(0,yt.getGradient)(Bt.map.scheme||Bt.map.gradient||new yt.Gradient.RWB),Tr=pr.range();Tr||(Tr=(0,dt.getPropertyRange)(Ar,Jn)),Bt.colorscheme={prop:Jn,gradient:pr}}for(let pr=0,Tr=vr.length;pr<Tr;pr++)$r=vr[pr],$r.surfaceColor=(0,dt.getColorFromStyle)($r,Bt);var hr=Et.volume(Mr),wr=an.carveUpExtent(Mr,vr,Ar);if(Cn&&Cn.length&&Cn.length>0){var Nr=(0,dt.getExtent)(Cn,!0),Fr=function(pr,Tr){var Wr=function(ur,Sr){var gr=ur.extent,Gr=gr[1][0]-gr[0][0],jr=gr[1][1]-gr[0][1],er=gr[1][2]-gr[0][2],yr=Gr-Sr[2][0];yr*=yr;var Er=jr-Sr[2][1];Er*=Er;var Hr=er-Sr[2][2];return Hr*=Hr,yr+Er+Hr},Kn=Wr(pr,Nr),rr=Wr(Tr,Nr);return Kn-rr};wr.sort(Fr)}var Yr=[];for(let pr=0,Tr=vr.length;pr<Tr;pr++)$r=vr[pr],Yr[pr]={x:$r.x,y:$r.y,z:$r.z,serial:pr,elem:$r.elem};var cs=!!Ct.syncSurface;if(cs){var cr=function(Tr){return new Promise(function(Wr){for(var Kn=Et.generateMeshSyncHelper(mn,wr[Tr].extent,wr[Tr].atoms,wr[Tr].toshow,Yr,hr),rr=(0,bt.splitMesh)({vertexArr:Kn.vertices,faceArr:Kn.faces}),ur=0,Sr=rr.length;ur<Sr;ur++){Kn={vertices:rr[ur].vertexArr,faces:rr[ur].faceArr};var gr=Et.generateSurfaceMesh(vr,Kn,cn);(0,dt.mergeGeos)(mr.geo,gr)}an.render(),Wr()})},Qn=[];for(let pr=0;pr<wr.length;pr++)Qn.push(cr(pr));return Promise.all(Qn).then(function(){return mr.done=!0,Promise.resolve(nn)})}else{var _r=[];mn<0&&(mn=0);for(let pr=0,Tr=Et.numWorkers;pr<Tr;pr++){var Ir=new Worker($3Dmol.SurfaceWorker);_r.push(Ir),Ir.postMessage({type:-1,atoms:Yr,volume:hr})}return new Promise(function(pr,Tr){var Wr=0,Kn=function(){!_r||!_r.length||_r.forEach(function(gr){gr&&gr.terminate&&gr.terminate()})},rr=function(gr){for(var Gr=(0,bt.splitMesh)({vertexArr:gr.data.vertices,faceArr:gr.data.faces}),jr=0,er=Gr.length;jr<er;jr++){var yr={vertices:Gr[jr].vertexArr,faces:Gr[jr].faceArr},Er=Et.generateSurfaceMesh(vr,yr,cn);(0,dt.mergeGeos)(mr.geo,Er)}an.render(),Wr++,Wr==wr.length&&(mr.done=!0,Kn(),pr(nn))},ur=function(gr){Kn(),console.log(gr.message+" ("+gr.filename+":"+gr.lineno+")"),Tr(gr)};for(let gr=0;gr<wr.length;gr++){var Sr=_r[gr%_r.length];Sr.onmessage=rr,Sr.onerror=ur,Sr.postMessage({type:mn,expandedExtent:wr[gr].extent,extendedAtoms:wr[gr].atoms,atomsToShow:wr[gr].toshow})}})}};Bt=Bt||{},cn=Et.getMatWithStyle(Bt);var Un=[];Un.style=Bt,Un.atomsel=Xt,Un.allsel=Zt,Un.focus=rn;var qn=null;if(un){var In={},Wn={};for(Tn=0;Tn<this.models.length;Tn++)In[Tn]=[],Wn[Tn]=[];for(Tn=0;Tn<En.length;Tn++)In[En[Tn].model].push(En[Tn]);for(Tn=0;Tn<Mn.length;Tn++)Wn[Mn[Tn].model].push(Mn[Tn]);var ar=[];for(Tn=0;Tn<this.models.length;Tn++)Wn[Tn].length>0&&(Un.push({geo:new st.Geometry(!0),mat:cn,done:!1,finished:!1,symmetries:this.models[Tn].getSymmetries()}),ar.push(dn(Un[Un.length-1],In[Tn],Wn[Tn])));qn=Promise.all(ar)}else Un.push({geo:new st.Geometry(!0),mat:cn,done:!1,finished:!1,symmetries:[new at.Matrix4]}),qn=dn(Un[Un.length-1],En,Mn);return this.surfaces[nn]=Un,qn.surfid=nn,Gt&&typeof Gt=="function"?(qn.then(function(fr){Gt(fr)}),nn):qn}setSurfaceMaterialStyle(Ot,Bt){if((0,dt.adjustVolumeStyle)(Bt),this.surfaces[Ot]){var Xt=this.surfaces[Ot];for(let rn=0;rn<Xt.length;rn++){var Zt=Xt[rn].mat=Et.getMatWithStyle(Bt);if(Xt[rn].mat.side=st.FrontSide,Bt.color){Xt[rn].mat.color=lt.CC.color(Bt.color),Xt[rn].geo.colorsNeedUpdate=!0;const Gt=lt.CC.color(Bt.color);Xt[rn].geo.setColor(Gt)}else if(Zt.voldata&&Zt.volscheme){const Gt=Zt.volscheme,nn=Zt.voldata,cn=lt.CC,an=Gt.range()||[-1,1];Xt[rn].geo.setColors(function(mn,En,Cn){let Mn=nn.getVal(mn,En,Cn);return cn.color(Gt.valueToHex(Mn,an))})}else{Xt[rn].geo.colorsNeedUpdate=!0;for(let Gt of Xt[rn].geo.geometryGroups)for(let nn=0;nn<Gt.vertices;nn++){let cn=(0,dt.getColorFromStyle)(Gt.atomArray[nn],Bt),an=3*nn;Gt.colorArray[an]=cn.r,Gt.colorArray[an+1]=cn.g,Gt.colorArray[an+2]=cn.b}}Xt[rn].finished=!1}}return this}getSurface(Ot){return this.surfaces[Ot]}removeSurface(Ot){for(var Bt=this.surfaces[Ot],Xt=0;Xt<Bt.length;Xt++)Bt[Xt]&&Bt[Xt].lastGL&&(Bt[Xt].geo!==void 0&&Bt[Xt].geo.dispose(),Bt[Xt].mat!==void 0&&Bt[Xt].mat.dispose(),this.modelGroup.remove(Bt[Xt].lastGL));return delete this.surfaces[Ot],this.show(),this}removeAllSurfaces(){for(var Ot in this.surfaces)if(this.surfaces.hasOwnProperty(Ot)){for(var Bt=this.surfaces[Ot],Xt=0;Xt<Bt.length;Xt++)Bt[Xt]&&Bt[Xt].lastGL&&(Bt[Xt].geo!==void 0&&Bt[Xt].geo.dispose(),Bt[Xt].mat!==void 0&&Bt[Xt].mat.dispose(),this.modelGroup.remove(Bt[Xt].lastGL));delete this.surfaces[Ot]}return this.show(),this}jmolMoveTo(){var Ot=this.modelGroup.position,Bt="center { "+-Ot.x+" "+-Ot.y+" "+-Ot.z+" }; ",Xt=this.rotationGroup.quaternion;return Bt+="moveto .5 quaternion { "+Xt.x+" "+Xt.y+" "+Xt.z+" "+Xt.w+" };",Bt}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(Ot,Bt){Bt=Bt||{};var Xt=this.getAtomsFromSel(Bt);if(typeof Ot=="function")for(let Gt=0,nn=Xt.length;Gt<nn;Gt++){let cn=Xt[Gt];Ot(cn)}else for(let Gt=0,nn=Xt.length;Gt<nn;Gt++){var Zt=Xt[Gt];for(let cn=0,an=Ot.length;cn<an;cn++){let mn=Ot[cn];if(mn.props)for(var rn in mn.props)mn.props.hasOwnProperty(rn)&&this.atomIsSelected(Zt,mn)&&(Zt.properties||(Zt.properties={}),Zt.properties[rn]=mn.props[rn])}}return this}linkViewer(Ot){return this.linkedViewers.push(Ot),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(Ot){this.rotationGroup.position.z=this.CAMERA_Z-Ot}setAutoEyeSeparation(Ot,Bt){var Xt=this.getPerceivedDistance();return Bt||(Bt=5),Ot||this.camera.position.x>0?this.camera.position.x=Xt*Math.tan(Math.PI/180*Bt):this.camera.position.x=-Xt*Math.tan(Math.PI/180*Bt),this.camera.lookAt(new at.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(Ot){this.config.cartoonQuality=Ot}}Et.numWorkers=4,Et.maxVolume=64e3,Et.surfaceTypeMap={VDW:Ct.SurfaceType.VDW,MS:Ct.SurfaceType.MS,SAS:Ct.SurfaceType.SAS,SES:Ct.SurfaceType.SES};function wt(Nt,Ot){if(Nt=(0,dt.getElement)(Nt),!!Nt){Ot=Ot||{};try{var Bt=new Et(Nt,Ot);return Bt}catch(Xt){throw"error creating viewer: "+Xt}}}function Pt(Nt,Ot={},Bt={}){if(Nt=(0,dt.getElement)(Nt),!!Nt){var Xt=[],Zt=document.createElement("canvas");Bt.rows=Ot.rows,Bt.cols=Ot.cols,Bt.control_all=Ot.control_all!=null?Ot.control_all:!1,Nt.appendChild(Zt);try{for(var rn=0;rn<Ot.rows;rn++){for(var Gt=[],nn=0;nn<Ot.cols;nn++){Bt.row=rn,Bt.col=nn,Bt.canvas=Zt,Bt.viewers=Xt,Bt.control_all=Ot.control_all;var cn=wt(Nt,(0,dt.extend)({},Bt));Gt.push(cn)}Xt.unshift(Gt)}}catch(an){throw"error creating viewer grid: "+an}return Xt}}function Ft(Nt){var Ot=this;if(Nt=(0,dt.getElement)(Nt),!!Nt){var Bt=Pt(Nt,{rows:1,cols:2,control_all:!0});this.glviewer1=Bt[0][0],this.glviewer2=Bt[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var Xt=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(rn){return typeof Ot.glviewer1[rn]=="function"}),Zt=0;Zt<Xt.length;Zt++)this[Xt[Zt]]=function(rn){return function(){var Gt=this.glviewer1[rn].apply(this.glviewer1,arguments),nn=this.glviewer2[rn].apply(this.glviewer2,arguments);return[Gt,nn]}}(Xt[Zt]);this.setCoordinates=function(rn,Gt,nn){for(var cn=0;cn<rn.length;cn++)rn[cn].setCoordinates(Gt,nn)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(rn){this.glviewer1.render(),this.glviewer2.render(),rn&&rn(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}},"./src/Gradient.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{CustomLinear:()=>bt,Gradient:()=>Ct,GradientType:()=>at,ROYGB:()=>vt,RWB:()=>yt,Sinebow:()=>_t,builtinGradients:()=>Mt,getGradient:()=>dt,normalizeValue:()=>lt});var st=rt("./src/colors.ts");class at{}function lt(Tt,$t,Rt){return $t>=Tt?(Rt<Tt&&(Rt=Tt),Rt>$t&&(Rt=$t),{lo:Tt,hi:$t,val:Rt}):(Rt>Tt&&(Rt=Tt),Rt<$t&&(Rt=$t),Rt=Tt-Rt+$t,{lo:$t,hi:Tt,val:Rt})}function dt(Tt){if(Tt instanceof at)return Tt;if(Tt.gradient!==void 0&&Mt[Tt.gradient]){let $t=Tt.min===void 0?-1:Tt.min,Rt=Tt.max===void 0?1:Tt.max;return Tt.mid===void 0?Tt.colors===void 0?new Mt[Tt.gradient]($t,Rt):new Mt[Tt.gradient]($t,Rt,Tt.colors):new Mt[Tt.gradient]($t,Rt,Tt.mid)}else if(typeof Tt.gradient=="string"&&Tt.gradient.startsWith("linear_")){let $t=Tt.gradient.split("_");$t.shift();let Rt=Tt.min===void 0?-1:Tt.min,Et=Tt.max===void 0?1:Tt.max;return new bt(Rt,Et,$t)}return Tt}class yt extends at{constructor($t,Rt,Et){super(),this.gradient="RWB",this.mult=1,this.mid=Et,this.min=$t,this.max=Rt,typeof Rt>"u"&&Array.isArray($t)&&$t.length>=2?(this.max=$t[1],this.min=$t[0]):$t&&Rt&&!Array.isArray($t)&&(this.min=$t,this.max=Rt)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex($t,Rt){var Et,wt;if($t=this.mult*$t,Rt?(Et=Rt[0],wt=Rt[1]):(Et=this.min,wt=this.max),$t===void 0)return 16777215;var Pt=lt(Et,wt,$t);Et=Pt.lo,wt=Pt.hi,$t=Pt.val;var Ft=(wt+Et)/2;Rt&&typeof Rt[2]<"u"?Ft=Rt[2]:typeof this.mid<"u"?Ft=this.mid:Ft=(Et+wt)/2;var Nt,Ot;return $t<Ft?(Nt=Math.floor(255*Math.sqrt(($t-Et)/(Ft-Et))),Ot=16711680+256*Nt+Nt,Ot):$t>Ft?(Nt=Math.floor(255*Math.sqrt(1-($t-Ft)/(wt-Ft))),Ot=65536*Nt+256*Nt+255,Ot):16777215}}class vt extends at{constructor($t,Rt){super(),this.gradient="ROYGB",this.mult=1,this.min=$t,this.max=Rt,typeof Rt>"u"&&Array.isArray($t)&&$t.length>=2?(this.max=$t[1],this.min=$t[0]):$t&&Rt&&!Array.isArray($t)&&(this.min=$t,this.max=Rt)}valueToHex($t,Rt){var Et,wt;if($t=this.mult*$t,Rt?(Et=Rt[0],wt=Rt[1]):(Et=this.min,wt=this.max),typeof $t>"u")return 16777215;var Pt=lt(Et,wt,$t);Et=Pt.lo,wt=Pt.hi,$t=Pt.val;var Ft=(Et+wt)/2,Nt=(Et+Ft)/2,Ot=(Ft+wt)/2,Bt,Xt;return $t<Nt?(Bt=Math.floor(255*Math.sqrt(($t-Et)/(Nt-Et))),Xt=16711680+256*Bt+0,Xt):$t<Ft?(Bt=Math.floor(255*Math.sqrt(1-($t-Nt)/(Ft-Nt))),Xt=65536*Bt+65280+0,Xt):$t<Ot?(Bt=Math.floor(255*Math.sqrt(($t-Ft)/(Ot-Ft))),Xt=65280+1*Bt,Xt):(Bt=Math.floor(255*Math.sqrt(1-($t-Ot)/(wt-Ot))),Xt=0+256*Bt+255,Xt)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class _t extends at{constructor($t,Rt){super(),this.gradient="Sinebow",this.mult=1,this.min=$t,this.max=Rt,typeof Rt>"u"&&Array.isArray($t)&&$t.length>=2&&(this.max=$t[1],this.min=$t[0]),Rt<$t&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex($t,Rt){var Et,wt;if($t=this.mult*$t,Rt?(Et=Rt[0],wt=Rt[1]):(Et=this.min,wt=this.max),typeof $t>"u")return 16777215;var Pt=Ct.normalizeValue(Et,wt,$t);Et=Pt.lo,wt=Pt.hi,$t=Pt.val;var Ft=($t-Et)/(wt-Et),Nt=5*Ft/6+.5,Ot=Math.sin(Math.PI*Nt);Ot*=Ot*255;var Bt=Math.sin(Math.PI*(Nt+1/3));Bt*=Bt*255;var Xt=Math.sin(Math.PI*(Nt+2/3));return Xt*=Xt*255,65536*Math.floor(Ot)+256*Math.floor(Xt)+1*Math.floor(Bt)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class bt extends at{constructor($t,Rt,Et){super(),this.gradient="linear",this.colors=new Array;var wt;if(Array.isArray($t)&&$t.length>=2?(this.max=$t[1],this.min=$t[0],wt=Rt):(this.min=$t,this.max=Rt,wt=Et),wt)for(let Pt of wt)this.colors.push(st.CC.color(Pt));else this.colors.push(st.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex($t,Rt){var Et,wt;if(Rt?(Et=Rt[0],wt=Rt[1]):(Et=this.min,wt=this.max),$t===void 0)return 16777215;var Pt=lt(Et,wt,$t);Et=Pt.lo,wt=Pt.hi,$t=Pt.val;let Ft=this.colors.length,Nt=(wt-Et)/Ft,Ot=Math.min(Math.floor(($t-Et)/Nt),Ft-1),Bt=Math.min(Ot+1,Ft-1),Xt=($t-Et-Ot*Nt)/Nt,Zt=this.colors[Ot],rn=this.colors[Bt];return new st.Color(Zt.r+Xt*(rn.r-Zt.r),Zt.g+Xt*(rn.g-Zt.g),Zt.b+Xt*(rn.b-Zt.b)).getHex()}}const Mt={rwb:yt,RWB:yt,roygb:vt,ROYGB:vt,sinebow:_t,linear:bt};class Ct extends at{valueToHex($t,Rt){return 0}range(){return null}}Ct.RWB=yt,Ct.ROYGB=vt,Ct.Sinebow=_t,Ct.CustomLinear=bt,Ct.builtinGradients=Mt,Ct.normalizeValue=lt,Ct.getGradient=dt},"./src/Label.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Label:()=>_t,LabelCount:()=>dt});var st=rt("./src/WebGL/index.ts"),at=rt("./src/Gradient.ts"),lt=rt("./src/colors.ts");let dt=0;function yt(bt,Mt,Ct,Tt,$t,Rt,Et){bt.beginPath(),bt.moveTo(Mt+Rt,Ct),bt.lineTo(Mt+Tt-Rt,Ct),bt.quadraticCurveTo(Mt+Tt,Ct,Mt+Tt,Ct+Rt),bt.lineTo(Mt+Tt,Ct+$t-Rt),bt.quadraticCurveTo(Mt+Tt,Ct+$t,Mt+Tt-Rt,Ct+$t),bt.lineTo(Mt+Rt,Ct+$t),bt.quadraticCurveTo(Mt,Ct+$t,Mt,Ct+$t-Rt),bt.lineTo(Mt,Ct+Rt),bt.quadraticCurveTo(Mt,Ct,Mt+Rt,Ct),bt.closePath(),bt.fill(),Et&&bt.stroke()}function vt(bt,Mt,Ct){var Tt=Ct;return typeof bt<"u"&&(bt instanceof lt.Color?Tt=bt.scaled():(Tt=lt.CC.color(bt),typeof Tt.scaled<"u"&&(Tt=Tt.scaled()))),typeof Mt<"u"&&(Tt.a=parseFloat(Mt)),Tt}class _t{constructor(Mt,Ct){this.id=dt++,this.stylespec=Ct||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new st.Sprite,this.text=Mt,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var Mt=this.stylespec,Ct=typeof Mt.useScreen>"u"?!1:Mt.useScreen,Tt=Mt.showBackground;(Tt==="0"||Tt==="false")&&(Tt=!1),typeof Tt>"u"&&(Tt=!0);var $t=Mt.font?Mt.font:"sans-serif",Rt=parseInt(Mt.fontSize)?parseInt(Mt.fontSize):18,Et=vt(Mt.fontColor,Mt.fontOpacity,{r:255,g:255,b:255,a:1}),wt=Mt.padding?Mt.padding:4,Pt=Mt.borderThickness?Mt.borderThickness:0,Ft=vt(Mt.backgroundColor,Mt.backgroundOpacity,{r:0,g:0,b:0,a:1}),Nt=vt(Mt.borderColor,Mt.borderOpacity,Ft),Ot=Mt.position?Mt.position:{x:-10,y:1,z:1},Bt=Mt.inFront!==void 0?Mt.inFront:!0;(Bt==="false"||Bt==="0")&&(Bt=!1);var Xt=Mt.alignment||st.SpriteAlignment.topLeft;typeof Xt=="string"&&Xt in st.SpriteAlignment&&(Xt=st.SpriteAlignment[Xt]);var Zt="";Mt.bold&&(Zt="bold "),this.context.font=Zt+Rt+"px  "+$t;var rn=this.context.measureText(this.text),Gt=rn.width;Tt||(Pt=0);var nn=Gt+2.5*Pt+2*wt,cn=Rt*1.25+2*Pt+2*wt;if(Mt.backgroundImage){var an=Mt.backgroundImage,mn=Mt.backgroundWidth?Mt.backgroundWidth:an.width,En=Mt.backgroundHeight?Mt.backgroundHeight:an.height;mn>nn&&(nn=mn),En>cn&&(cn=En)}if(this.canvas.width=nn,this.canvas.height=cn,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),Zt="",Mt.bold&&(Zt="bold "),this.context.font=Zt+Rt+"px  "+$t,this.context.fillStyle="rgba("+Ft.r+","+Ft.g+","+Ft.b+","+Ft.a+")",this.context.strokeStyle="rgba("+Nt.r+","+Nt.g+","+Nt.b+","+Nt.a+")",Mt.backgroundGradient){let Mn=this.context.createLinearGradient(0,cn/2,nn,cn/2),un=at.Gradient.getGradient(Mt.backgroundGradient),Tn=un.range(),Pn=-1,dn=1;Tn&&(Pn=Tn[0],dn=Tn[1]);let Un=dn-Pn;for(let qn=0;qn<1.01;qn+=.1){let In=vt(un.valueToHex(Pn+Un*qn)),Wn="rgba("+In.r+","+In.g+","+In.b+","+In.a+")";Mn.addColorStop(qn,Wn)}this.context.fillStyle=Mn}this.context.lineWidth=Pt,Tt&&yt(this.context,Pt,Pt,nn-2*Pt,cn-2*Pt,6,Pt>0),Mt.backgroundImage&&this.context.drawImage(an,0,0,nn,cn),this.context.fillStyle="rgba("+Et.r+","+Et.g+","+Et.b+","+Et.a+")",this.context.fillText(this.text,Pt+wt,Rt+Pt+wt,Gt);var Cn=new st.Texture(this.canvas);Cn.needsUpdate=!0,this.sprite.material=new st.SpriteMaterial({map:Cn,useScreenCoordinates:Ct,alignment:Xt,depthTest:!Bt,screenOffset:Mt.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(Ot.x,Ot.y,Ot.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}},"./src/ProteinSurface4.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{MarchingCube:()=>vt,MarchingCubeInitializer:()=>yt,PointGrid:()=>_t,ProteinSurface:()=>bt,SurfaceType:()=>at,setSyncSurface:()=>dt,syncSurface:()=>lt});var st=rt("./src/WebGL/math/index.ts"),at;(function(Mt){Mt[Mt.VDW=1]="VDW",Mt[Mt.MS=2]="MS",Mt[Mt.SAS=3]="SAS",Mt[Mt.SES=4]="SES"})(at||(at={}));var lt=!1;function dt(Mt){lt=Mt}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(lt=!0);class yt{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(Ct,Tt,$t,Rt){let Et=!!Rt.fulltable,wt=Rt.hasOwnProperty("origin")&&Rt.origin.hasOwnProperty("x")?Rt.origin:{x:0,y:0,z:0},Pt=!!Rt.voxel,Ft=Rt.matrix,Nt=Rt.nX||0,Ot=Rt.nY||0,Bt=Rt.nZ||0,Xt=Rt.scale||1,Zt=null;Rt.unitCube?Zt=Rt.unitCube:Zt={x:Xt,y:Xt,z:Xt};let rn=new Int32Array(Nt*Ot*Bt),Gt,nn;for(Gt=0,nn=rn.length;Gt<nn;++Gt)rn[Gt]=-1;let cn=function(Cn,Mn,un,Tn,Pn,dn){let Un={x:0,y:0,z:0},qn=!!(Tn&1<<Pn),In=!!(Tn&1<<dn),Wn=Pn;if(!qn&&In&&(Wn=dn),Wn&1&&un++,Wn&2&&Mn++,Wn&4&&Cn++,Ft){let fr=new st.Vector3(Cn,Mn,un);fr=fr.applyMatrix4(Ft),Un={x:fr.x,y:fr.y,z:fr.z}}else Un.x=wt.x+Zt.x*Cn,Un.y=wt.y+Zt.y*Mn,Un.z=wt.z+Zt.z*un;let ar=(Ot*Cn+Mn)*Bt+un;return Pt?(Tt.push(Un),Tt.length-1):(rn[ar]<0&&(rn[ar]=Tt.length,Tt.push(Un)),rn[ar])},an=new Int32Array(12),mn=Et?this.edgeTable2:this.edgeTable,En=Et?this.triTable2:this.triTable;for(Gt=0;Gt<Nt-1;++Gt)for(let Cn=0;Cn<Ot-1;++Cn)for(let Mn=0;Mn<Bt-1;++Mn){let un=0;for(let dn=0;dn<8;++dn){let Un=(Ot*(Gt+((dn&4)>>2))+Cn+((dn&2)>>1))*Bt+Mn+(dn&1),qn=!!(Ct[Un]&this.ISDONE);un|=qn<<dn}if(un===0||un===255)continue;let Tn=mn[un];if(Tn===0)continue;let Pn=En[un];Tn&1&&(an[0]=cn(Gt,Cn,Mn,un,0,1)),Tn&2&&(an[1]=cn(Gt,Cn,Mn,un,1,3)),Tn&4&&(an[2]=cn(Gt,Cn,Mn,un,3,2)),Tn&8&&(an[3]=cn(Gt,Cn,Mn,un,2,0)),Tn&16&&(an[4]=cn(Gt,Cn,Mn,un,4,5)),Tn&32&&(an[5]=cn(Gt,Cn,Mn,un,5,7)),Tn&64&&(an[6]=cn(Gt,Cn,Mn,un,7,6)),Tn&128&&(an[7]=cn(Gt,Cn,Mn,un,6,4)),Tn&256&&(an[8]=cn(Gt,Cn,Mn,un,0,4)),Tn&512&&(an[9]=cn(Gt,Cn,Mn,un,1,5)),Tn&1024&&(an[10]=cn(Gt,Cn,Mn,un,3,7)),Tn&2048&&(an[11]=cn(Gt,Cn,Mn,un,2,6));for(let dn=0;dn<Pn.length;dn+=3){let Un=an[Pn[dn]],qn=an[Pn[dn+1]],In=an[Pn[dn+2]];Pt&&dn>=3&&(Tt.push(Tt[Un]),Un=Tt.length-1,Tt.push(Tt[qn]),qn=Tt.length-1,Tt.push(Tt[In]),In=Tt.length-1),$t.push(Un),$t.push(qn),$t.push(In)}}}laplacianSmooth(Ct,Tt,$t){let Rt=new Array(Tt.length),Et,wt,Pt,Ft,Nt;for(Et=0,wt=Tt.length;Et<wt;Et++)Rt[Et]={x:0,y:0,z:0};let Ot=new Array(20),Bt;for(Et=0;Et<20;Et++)Ot[Et]=new Array(Tt.length);for(Et=0,wt=Tt.length;Et<wt;Et++)Ot[0][Et]=0;for(Et=0,wt=$t.length/3;Et<wt;Et++){let rn=Et*3,Gt=Et*3+1,nn=Et*3+2;for(Bt=!0,Pt=0,Ft=Ot[0][$t[rn]];Pt<Ft;Pt++)if($t[Gt]==Ot[Pt+1][$t[rn]]){Bt=!1;break}for(Bt&&(Ot[0][$t[rn]]++,Ot[Ot[0][$t[rn]]][$t[rn]]=$t[Gt]),Bt=!0,Pt=0,Ft=Ot[0][$t[rn]];Pt<Ft;Pt++)if($t[nn]==Ot[Pt+1][$t[rn]]){Bt=!1;break}for(Bt&&(Ot[0][$t[rn]]++,Ot[Ot[0][$t[rn]]][$t[rn]]=$t[nn]),Bt=!0,Pt=0,Ft=Ot[0][$t[Gt]];Pt<Ft;Pt++)if($t[rn]==Ot[Pt+1][$t[Gt]]){Bt=!1;break}for(Bt&&(Ot[0][$t[Gt]]++,Ot[Ot[0][$t[Gt]]][$t[Gt]]=$t[rn]),Bt=!0,Pt=0,Ft=Ot[0][$t[Gt]];Pt<Ft;Pt++)if($t[nn]==Ot[Pt+1][$t[Gt]]){Bt=!1;break}for(Bt&&(Ot[0][$t[Gt]]++,Ot[Ot[0][$t[Gt]]][$t[Gt]]=$t[nn]),Bt=!0,Pt=0;Pt<Ot[0][$t[nn]];Pt++)if($t[rn]==Ot[Pt+1][$t[nn]]){Bt=!1;break}for(Bt&&(Ot[0][$t[nn]]++,Ot[Ot[0][$t[nn]]][$t[nn]]=$t[rn]),Bt=!0,Pt=0,Ft=Ot[0][$t[nn]];Pt<Ft;Pt++)if($t[Gt]==Ot[Pt+1][$t[nn]]){Bt=!1;break}Bt&&(Ot[0][$t[nn]]++,Ot[Ot[0][$t[nn]]][$t[nn]]=$t[Gt])}let Xt=1,Zt=.5;for(Nt=0;Nt<Ct;Nt++){for(Et=0,wt=Tt.length;Et<wt;Et++)if(Ot[0][Et]<3)Rt[Et].x=Tt[Et].x,Rt[Et].y=Tt[Et].y,Rt[Et].z=Tt[Et].z;else if(Ot[0][Et]==3||Ot[0][Et]==4){for(Rt[Et].x=0,Rt[Et].y=0,Rt[Et].z=0,Pt=0,Ft=Ot[0][Et];Pt<Ft;Pt++)Rt[Et].x+=Tt[Ot[Pt+1][Et]].x,Rt[Et].y+=Tt[Ot[Pt+1][Et]].y,Rt[Et].z+=Tt[Ot[Pt+1][Et]].z;Rt[Et].x+=Zt*Tt[Et].x,Rt[Et].y+=Zt*Tt[Et].y,Rt[Et].z+=Zt*Tt[Et].z,Rt[Et].x/=Zt+Ot[0][Et],Rt[Et].y/=Zt+Ot[0][Et],Rt[Et].z/=Zt+Ot[0][Et]}else{for(Rt[Et].x=0,Rt[Et].y=0,Rt[Et].z=0,Pt=0,Ft=Ot[0][Et];Pt<Ft;Pt++)Rt[Et].x+=Tt[Ot[Pt+1][Et]].x,Rt[Et].y+=Tt[Ot[Pt+1][Et]].y,Rt[Et].z+=Tt[Ot[Pt+1][Et]].z;Rt[Et].x+=Xt*Tt[Et].x,Rt[Et].y+=Xt*Tt[Et].y,Rt[Et].z+=Xt*Tt[Et].z,Rt[Et].x/=Xt+Ot[0][Et],Rt[Et].y/=Xt+Ot[0][Et],Rt[Et].z/=Xt+Ot[0][Et]}for(Et=0,wt=Tt.length;Et<wt;Et++)Tt[Et].x=Rt[Et].x,Tt[Et].y=Rt[Et].y,Tt[Et].z=Rt[Et].z}}}let vt=new yt;class _t{constructor(Ct,Tt,$t){this.data=new Int32Array(Ct*Tt*$t*3),this.width=Tt,this.height=$t}set(Ct,Tt,$t,Rt){let Et=((Ct*this.width+Tt)*this.height+$t)*3;this.data[Et]=Rt.ix,this.data[Et+1]=Rt.iy,this.data[Et+2]=Rt.iz}get(Ct,Tt,$t){let Rt=((Ct*this.width+Tt)*this.height+$t)*3;return{ix:this.data[Rt],iy:this.data[Rt+1],iz:this.data[Rt+2]}}}class bt{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],bt.MarchingCube||(bt.MarchingCube=new yt)}getVDWIndex(Ct){return!Ct.elem||typeof this.vdwRadii[Ct.elem]>"u"?"X":Ct.elem}getFacesAndVertices(Ct){let Tt={};for(let Et=0,wt=Ct.length;Et<wt;Et++)Tt[Ct[Et]]=!0;let $t=this.verts;for(let Et=0,wt=$t.length;Et<wt;Et++)$t[Et].x=$t[Et].x/this.scaleFactor-this.ptranx,$t[Et].y=$t[Et].y/this.scaleFactor-this.ptrany,$t[Et].z=$t[Et].z/this.scaleFactor-this.ptranz;let Rt=[];for(let Et=0,wt=this.faces.length;Et<wt;Et+=3){let Pt=this.faces[Et],Ft=this.faces[Et+1],Nt=this.faces[Et+2],Ot=$t[Pt].atomid,Bt=$t[Ft].atomid,Xt=$t[Nt].atomid,Zt=Ot;Bt<Zt&&(Zt=Bt),Xt<Zt&&(Zt=Xt),Tt[Zt]&&Pt!==Ft&&Ft!==Nt&&Pt!==Nt&&(Rt.push(Pt),Rt.push(Ft),Rt.push(Nt))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:$t,faces:Rt}}initparm(Ct,Tt,$t){$t>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let Rt=1/this.scaleFactor*5.5;this.pminx=Ct[0][0],this.pmaxx=Ct[1][0],this.pminy=Ct[0][1],this.pmaxy=Ct[1][1],this.pminz=Ct[0][2],this.pmaxz=Ct[1][2],Tt?(this.pminx-=this.probeRadius+Rt,this.pminy-=this.probeRadius+Rt,this.pminz-=this.probeRadius+Rt,this.pmaxx+=this.probeRadius+Rt,this.pmaxy+=this.probeRadius+Rt,this.pmaxz+=this.probeRadius+Rt):(this.pminx-=Rt,this.pminy-=Rt,this.pminz-=Rt,this.pmaxx+=Rt,this.pmaxy+=Rt,this.pmaxz+=Rt),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(Tt),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(Ct){let Tt={};for(const $t in this.vdwRadii){let Rt=this.vdwRadii[$t];Ct?Tt[$t]=(Rt+this.probeRadius)*this.scaleFactor+.5:Tt[$t]=Rt*this.scaleFactor+.5;let Et=Tt[$t]*Tt[$t];this.widxz[$t]=Math.floor(Tt[$t])+1,this.depty[$t]=new Int32Array(this.widxz[$t]*this.widxz[$t]);let wt=0;for(let Pt=0;Pt<this.widxz[$t];Pt++)for(let Ft=0;Ft<this.widxz[$t];Ft++){let Nt=Pt*Pt+Ft*Ft;if(Nt>Et)this.depty[$t][wt]=-1;else{let Ot=Math.sqrt(Et-Nt);this.depty[$t][wt]=Math.floor(Ot)}wt++}}}fillvoxels(Ct,Tt){for(let $t=0,Rt=this.vpBits.length;$t<Rt;$t++)this.vpBits[$t]=0,this.vpDistance[$t]=-1,this.vpAtomID[$t]=-1;for(let $t in Tt){let Rt=Ct[Tt[$t]];Rt!==void 0&&this.fillAtom(Rt,Ct)}for(let $t=0,Rt=this.vpBits.length;$t<Rt;$t++)this.vpBits[$t]&this.INOUT&&(this.vpBits[$t]|=this.ISDONE)}fillAtom(Ct,Tt){let $t=Math.floor(.5+this.scaleFactor*(Ct.x+this.ptranx)),Rt=Math.floor(.5+this.scaleFactor*(Ct.y+this.ptrany)),Et=Math.floor(.5+this.scaleFactor*(Ct.z+this.ptranz)),wt=this.getVDWIndex(Ct),Pt=0,Ft=this.pWidth*this.pHeight;for(let Nt=0,Ot=this.widxz[wt];Nt<Ot;Nt++)for(let Bt=0;Bt<Ot;Bt++){if(this.depty[wt][Pt]!=-1){for(let Xt=-1;Xt<2;Xt++)for(let Zt=-1;Zt<2;Zt++)for(let rn=-1;rn<2;rn++)if(Xt!==0&&Zt!==0&&rn!==0){let Gt=Xt*Nt,nn=rn*Bt;for(let cn=0;cn<=this.depty[wt][Pt];cn++){let an=cn*Zt,mn=$t+Gt,En=Rt+an,Cn=Et+nn;if(mn<0||En<0||Cn<0||mn>=this.pLength||En>=this.pWidth||Cn>=this.pHeight)continue;let Mn=mn*Ft+En*this.pHeight+Cn;if(!(this.vpBits[Mn]&this.INOUT))this.vpBits[Mn]|=this.INOUT,this.vpAtomID[Mn]=Ct.serial;else{let un=Tt[this.vpAtomID[Mn]];if(un.serial!=Ct.serial){let Tn=$t+Gt-Math.floor(.5+this.scaleFactor*(un.x+this.ptranx)),Pn=Rt+an-Math.floor(.5+this.scaleFactor*(un.y+this.ptrany)),dn=Et+nn-Math.floor(.5+this.scaleFactor*(un.z+this.ptranz));Gt*Gt+an*an+nn*nn<Tn*Tn+Pn*Pn+dn*dn&&(this.vpAtomID[Mn]=Ct.serial)}}}}}Pt++}}fillvoxelswaals(Ct,Tt){for(let $t=0,Rt=this.vpBits.length;$t<Rt;$t++)this.vpBits[$t]&=~this.ISDONE;for(let $t in Tt){let Rt=Ct[Tt[$t]];Rt!==void 0&&this.fillAtomWaals(Rt,Ct)}}fillAtomWaals(Ct,Tt){let $t=0,Rt=Math.floor(.5+this.scaleFactor*(Ct.x+this.ptranx)),Et=Math.floor(.5+this.scaleFactor*(Ct.y+this.ptrany)),wt=Math.floor(.5+this.scaleFactor*(Ct.z+this.ptranz)),Pt=this.getVDWIndex(Ct),Ft=this.pWidth*this.pHeight;for(let Nt=0,Ot=this.widxz[Pt];Nt<Ot;Nt++)for(let Bt=0;Bt<Ot;Bt++){if(this.depty[Pt][$t]!=-1){for(let Xt=-1;Xt<2;Xt++)for(let Zt=-1;Zt<2;Zt++)for(let rn=-1;rn<2;rn++)if(Xt!==0&&Zt!==0&&rn!==0){let Gt=Xt*Nt,nn=rn*Bt;for(let cn=0;cn<=this.depty[Pt][$t];cn++){let an=cn*Zt,mn=Rt+Gt,En=Et+an,Cn=wt+nn;if(mn<0||En<0||Cn<0||mn>=this.pLength||En>=this.pWidth||Cn>=this.pHeight)continue;let Mn=mn*Ft+En*this.pHeight+Cn;if(!(this.vpBits[Mn]&this.ISDONE))this.vpBits[Mn]|=this.ISDONE,this.vpAtomID[Mn]=Ct.serial;else{let un=Tt[this.vpAtomID[Mn]];if(un.serial!=Ct.serial){let Tn=Rt+Gt-Math.floor(.5+this.scaleFactor*(un.x+this.ptranx)),Pn=Et+an-Math.floor(.5+this.scaleFactor*(un.y+this.ptrany)),dn=wt+nn-Math.floor(.5+this.scaleFactor*(un.z+this.ptranz));Gt*Gt+an*an+nn*nn<Tn*Tn+Pn*Pn+dn*dn&&(this.vpAtomID[Mn]=Ct.serial)}}}}}$t++}}buildboundary(){let Ct=this.pWidth*this.pHeight;for(let Tt=0;Tt<this.pLength;Tt++)for(let $t=0;$t<this.pHeight;$t++)for(let Rt=0;Rt<this.pWidth;Rt++){let Et=Tt*Ct+Rt*this.pHeight+$t;if(this.vpBits[Et]&this.INOUT){let wt=0;for(;wt<26;){let Pt=Tt+this.nb[wt][0],Ft=$t+this.nb[wt][2],Nt=Rt+this.nb[wt][1];if(Pt>-1&&Pt<this.pLength&&Nt>-1&&Nt<this.pWidth&&Ft>-1&&Ft<this.pHeight&&!(this.vpBits[Pt*Ct+Nt*this.pHeight+Ft]&this.INOUT)){this.vpBits[Et]|=this.ISBOUND;break}else wt++}}}}fastdistancemap(){let Ct=new _t(this.pLength,this.pWidth,this.pHeight),Tt=this.pWidth*this.pHeight,$t=this.cutRadius*this.cutRadius,Rt=[],Et=[],wt;for(let Nt=0;Nt<this.pLength;Nt++)for(let Ot=0;Ot<this.pWidth;Ot++)for(let Bt=0;Bt<this.pHeight;Bt++)if(wt=Nt*Tt+Ot*this.pHeight+Bt,this.vpBits[wt]&=~this.ISDONE,this.vpBits[wt]&this.INOUT&&this.vpBits[wt]&this.ISBOUND){let Xt={ix:Nt,iy:Ot,iz:Bt};Ct.set(Nt,Ot,Bt,Xt),Rt.push(Xt),this.vpDistance[wt]=0,this.vpBits[wt]|=this.ISDONE,this.vpBits[wt]&=~this.ISBOUND}do{Et=this.fastoneshell(Rt,Ct),Rt=[];for(let Nt=0,Ot=Et.length;Nt<Ot;Nt++)wt=Tt*Et[Nt].ix+this.pHeight*Et[Nt].iy+Et[Nt].iz,this.vpBits[wt]&=~this.ISBOUND,this.vpDistance[wt]<=1.0404*$t&&Rt.push({ix:Et[Nt].ix,iy:Et[Nt].iy,iz:Et[Nt].iz})}while(Rt.length!==0);Rt=[],Et=[],Ct=null;let Pt=this.scaleFactor-.5;Pt<0&&(Pt=0);let Ft=$t-.5/(.1+Pt);for(let Nt=0;Nt<this.pLength;Nt++)for(let Ot=0;Ot<this.pWidth;Ot++)for(let Bt=0;Bt<this.pHeight;Bt++)wt=Nt*Tt+Ot*this.pHeight+Bt,this.vpBits[wt]&=~this.ISBOUND,this.vpBits[wt]&this.INOUT&&(!(this.vpBits[wt]&this.ISDONE)||this.vpBits[wt]&this.ISDONE&&this.vpDistance[wt]>=Ft)&&(this.vpBits[wt]|=this.ISBOUND)}fastoneshell(Ct,Tt){let $t,Rt,Et,wt,Pt,Ft,Nt,Ot,Bt,Xt=[];if(Ct.length===0)return Xt;let Zt={ix:-1,iy:-1,iz:-1},rn=this.pWidth*this.pHeight;for(let Gt=0,nn=Ct.length;Gt<nn;Gt++){$t=Ct[Gt].ix,Rt=Ct[Gt].iy,Et=Ct[Gt].iz,Ot=Tt.get($t,Rt,Et);for(let cn=0;cn<6;cn++)Zt.ix=$t+this.nb[cn][0],Zt.iy=Rt+this.nb[cn][1],Zt.iz=Et+this.nb[cn][2],Zt.ix<this.pLength&&Zt.ix>-1&&Zt.iy<this.pWidth&&Zt.iy>-1&&Zt.iz<this.pHeight&&Zt.iz>-1&&(Bt=Zt.ix*rn+this.pHeight*Zt.iy+Zt.iz,this.vpBits[Bt]&this.INOUT&&!(this.vpBits[Bt]&this.ISDONE)?(Tt.set(Zt.ix,Zt.iy,Et+this.nb[cn][2],Ot),wt=Zt.ix-Ot.ix,Pt=Zt.iy-Ot.iy,Ft=Zt.iz-Ot.iz,Nt=wt*wt+Pt*Pt+Ft*Ft,this.vpDistance[Bt]=Nt,this.vpBits[Bt]|=this.ISDONE,this.vpBits[Bt]|=this.ISBOUND,Xt.push({ix:Zt.ix,iy:Zt.iy,iz:Zt.iz})):this.vpBits[Bt]&this.INOUT&&this.vpBits[Bt]&this.ISDONE&&(wt=Zt.ix-Ot.ix,Pt=Zt.iy-Ot.iy,Ft=Zt.iz-Ot.iz,Nt=wt*wt+Pt*Pt+Ft*Ft,Nt<this.vpDistance[Bt]&&(Tt.set(Zt.ix,Zt.iy,Zt.iz,Ot),this.vpDistance[Bt]=Nt,this.vpBits[Bt]&this.ISBOUND||(this.vpBits[Bt]|=this.ISBOUND,Xt.push({ix:Zt.ix,iy:Zt.iy,iz:Zt.iz})))))}for(let Gt=0,nn=Ct.length;Gt<nn;Gt++){$t=Ct[Gt].ix,Rt=Ct[Gt].iy,Et=Ct[Gt].iz,Ot=Tt.get($t,Rt,Et);for(let cn=6;cn<18;cn++)Zt.ix=$t+this.nb[cn][0],Zt.iy=Rt+this.nb[cn][1],Zt.iz=Et+this.nb[cn][2],Zt.ix<this.pLength&&Zt.ix>-1&&Zt.iy<this.pWidth&&Zt.iy>-1&&Zt.iz<this.pHeight&&Zt.iz>-1&&(Bt=Zt.ix*rn+this.pHeight*Zt.iy+Zt.iz,this.vpBits[Bt]&this.INOUT&&!(this.vpBits[Bt]&this.ISDONE)?(Tt.set(Zt.ix,Zt.iy,Et+this.nb[cn][2],Ot),wt=Zt.ix-Ot.ix,Pt=Zt.iy-Ot.iy,Ft=Zt.iz-Ot.iz,Nt=wt*wt+Pt*Pt+Ft*Ft,this.vpDistance[Bt]=Nt,this.vpBits[Bt]|=this.ISDONE,this.vpBits[Bt]|=this.ISBOUND,Xt.push({ix:Zt.ix,iy:Zt.iy,iz:Zt.iz})):this.vpBits[Bt]&this.INOUT&&this.vpBits[Bt]&this.ISDONE&&(wt=Zt.ix-Ot.ix,Pt=Zt.iy-Ot.iy,Ft=Zt.iz-Ot.iz,Nt=wt*wt+Pt*Pt+Ft*Ft,Nt<this.vpDistance[Bt]&&(Tt.set(Zt.ix,Zt.iy,Zt.iz,Ot),this.vpDistance[Bt]=Nt,this.vpBits[Bt]&this.ISBOUND||(this.vpBits[Bt]|=this.ISBOUND,Xt.push({ix:Zt.ix,iy:Zt.iy,iz:Zt.iz})))))}for(let Gt=0,nn=Ct.length;Gt<nn;Gt++){$t=Ct[Gt].ix,Rt=Ct[Gt].iy,Et=Ct[Gt].iz,Ot=Tt.get($t,Rt,Et);for(let cn=18;cn<26;cn++)Zt.ix=$t+this.nb[cn][0],Zt.iy=Rt+this.nb[cn][1],Zt.iz=Et+this.nb[cn][2],Zt.ix<this.pLength&&Zt.ix>-1&&Zt.iy<this.pWidth&&Zt.iy>-1&&Zt.iz<this.pHeight&&Zt.iz>-1&&(Bt=Zt.ix*rn+this.pHeight*Zt.iy+Zt.iz,this.vpBits[Bt]&this.INOUT&&!(this.vpBits[Bt]&this.ISDONE)?(Tt.set(Zt.ix,Zt.iy,Et+this.nb[cn][2],Ot),wt=Zt.ix-Ot.ix,Pt=Zt.iy-Ot.iy,Ft=Zt.iz-Ot.iz,Nt=wt*wt+Pt*Pt+Ft*Ft,this.vpDistance[Bt]=Nt,this.vpBits[Bt]|=this.ISDONE,this.vpBits[Bt]|=this.ISBOUND,Xt.push({ix:Zt.ix,iy:Zt.iy,iz:Zt.iz})):this.vpBits[Bt]&this.INOUT&&this.vpBits[Bt]&this.ISDONE&&(wt=Zt.ix-Ot.ix,Pt=Zt.iy-Ot.iy,Ft=Zt.iz-Ot.iz,Nt=wt*wt+Pt*Pt+Ft*Ft,Nt<this.vpDistance[Bt]&&(Tt.set(Zt.ix,Zt.iy,Zt.iz,Ot),this.vpDistance[Bt]=Nt,this.vpBits[Bt]&this.ISBOUND||(this.vpBits[Bt]|=this.ISBOUND,Xt.push({ix:Zt.ix,iy:Zt.iy,iz:Zt.iz})))))}return Xt}marchingcubeinit(Ct){for(let Tt=0,$t=this.vpBits.length;Tt<$t;Tt++)Ct==1?this.vpBits[Tt]&=~this.ISBOUND:Ct==4?(this.vpBits[Tt]&=~this.ISDONE,this.vpBits[Tt]&this.ISBOUND&&(this.vpBits[Tt]|=this.ISDONE),this.vpBits[Tt]&=~this.ISBOUND):Ct==2?this.vpBits[Tt]&this.ISBOUND&&this.vpBits[Tt]&this.ISDONE?this.vpBits[Tt]&=~this.ISBOUND:this.vpBits[Tt]&this.ISBOUND&&!(this.vpBits[Tt]&this.ISDONE)&&(this.vpBits[Tt]|=this.ISDONE):Ct==3&&(this.vpBits[Tt]&=~this.ISBOUND)}marchingcube(Ct){this.marchingcubeinit(Ct),this.verts=[],this.faces=[],bt.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let Tt=this.pWidth*this.pHeight;for(let $t=0,Rt=this.verts.length;$t<Rt;$t++)this.verts[$t].atomid=this.vpAtomID[this.verts[$t].x*Tt+this.pHeight*this.verts[$t].y+this.verts[$t].z];bt.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}bt.MarchingCube=new yt},"./src/VolumeData.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{VolumeData:()=>vt});var st=rt("./src/utilities.ts"),at=rt("./src/WebGL/math/index.ts"),lt=rt("./src/parsers/VASP.ts"),dt=rt("./src/parsers/CUBE.ts"),yt=rt("./node_modules/pako/dist/pako.esm.mjs");class vt{constructor(bt,Mt,Ct){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(wt){var Pt=wt/(this.size.y*this.size.z),Ft=wt%(this.size.y*this.size.z),Nt=wt%this.size.z;return Pt*=this.unit.x,Ft*=this.unit.y,Nt*=this.unit.z,Pt+=this.origin.x,Ft+=this.origin.y,Nt+=this.origin.z,{x:Pt,y:Ft,z:Nt}},this.vasp=function(wt){var Pt=wt.replace(/^\s+/,"").split(/[\n\r]/),Ft=(0,lt.VASP)(wt)[0],Nt=Ft.length;if(Nt==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var Ot=1.889725992,Bt=.036749309,Xt=parseFloat(Pt[1]),Zt;Zt=Pt[2].replace(/^\s+/,"").split(/\s+/);var rn=new at.Vector3(parseFloat(Zt[0]),parseFloat(Zt[1]),parseFloat(Zt[2])).multiplyScalar(Xt*Ot);Zt=Pt[3].replace(/^\s+/,"").split(/\s+/);var Gt=new at.Vector3(parseFloat(Zt[0]),parseFloat(Zt[1]),parseFloat(Zt[2])).multiplyScalar(Xt*Ot);Zt=Pt[4].replace(/^\s+/,"").split(/\s+/);var nn=new at.Vector3(parseFloat(Zt[0]),parseFloat(Zt[1]),parseFloat(Zt[2])).multiplyScalar(Xt*Ot),cn=rn.x*(Gt.y*nn.z-nn.y*Gt.z)-Gt.x*(rn.y*nn.z-nn.y*rn.z)+nn.x*(rn.y*Gt.z-Gt.y*rn.z);cn=Math.abs(cn)/Math.pow(Ot,3);var an=1/cn;Pt.splice(0,8+Nt+1);var mn=Pt[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),En=Math.abs(parseFloat(mn[0])),Cn=Math.abs(parseFloat(mn[1])),Mn=Math.abs(parseFloat(mn[2])),un=this.origin=new at.Vector3(0,0,0);this.size={x:En,y:Cn,z:Mn},this.unit=new at.Vector3(rn.x,Gt.y,nn.z),rn=rn.multiplyScalar(1/(Ot*En)),Gt=Gt.multiplyScalar(1/(Ot*Cn)),nn=nn.multiplyScalar(1/(Ot*Mn)),(rn.y!=0||rn.z!=0||Gt.x!=0||Gt.z!=0||nn.x!=0||nn.y!=0)&&(this.matrix=new at.Matrix4(rn.x,Gt.x,nn.x,0,rn.y,Gt.y,nn.y,0,rn.z,Gt.z,nn.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new at.Matrix4().makeTranslation(un.x,un.y,un.z)),this.origin=new at.Vector3(0,0,0),this.unit=new at.Vector3(1,1,1)),Pt.splice(0,1);var Tn=Pt.join(" ");Tn=Tn.replace(/^\s+/,"");var Pn=Tn.split(/[\s\r]+/);Pn.splice(En*Cn*Mn+1);for(var dn=Float32Array.from(Pn,parseFloat),Un=0;Un<dn.length;Un++)dn[Un]=dn[Un]*an*Bt;this.data=dn},this.dx=function(wt){var Pt=wt.split(/[\n\r]+/),Ft,Nt=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,Ot=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,Bt=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,Xt=/data follows/,Zt=0;for(Zt=0;Zt<Pt.length;Zt++){var rn=Pt[Zt];if(Ft=Nt.exec(rn)){var Gt=parseInt(Ft[1]),nn=parseInt(Ft[2]),cn=parseInt(Ft[3]);this.size={x:Gt,y:nn,z:cn}}else if(Ft=Bt.exec(rn)){var an=parseFloat(Ft[1]);if((parseFloat(Ft[2])!=0||parseFloat(Ft[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),Zt+=1,rn=Pt[Zt],Ft=Bt.exec(rn),Ft==null){console.error("Parse error in dx delta matrix");return}var mn=parseFloat(Ft[2]);if((parseFloat(Ft[1])!=0||parseFloat(Ft[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),Zt+=1,rn=Pt[Zt],Ft=Bt.exec(rn),Ft==null){console.error("Parse error in dx delta matrix");return}var En=parseFloat(Ft[3]);(parseFloat(Ft[1])!=0||parseFloat(Ft[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new at.Vector3(an,mn,En)}else if(Ft=Ot.exec(rn)){var Cn=parseFloat(Ft[1]),Mn=parseFloat(Ft[2]),un=parseFloat(Ft[3]);this.origin=new at.Vector3(Cn,Mn,un)}else if(Ft=Xt.exec(rn))break}if(Zt+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var Tn=Pt.splice(Zt).join(" "),Pn=Tn.split(/[\s\r]+/);this.data=Float32Array.from(Pn,parseFloat)},Mt=Mt.toLowerCase(),/\.gz$/.test(Mt)){Mt=Mt.replace(/\.gz$/,"");try{this[Mt]&&this.isbinary.has(Mt)?(typeof bt=="string"&&(bt=(0,st.base64ToArray)(bt)),bt=(0,yt.inflate)(bt)):bt=new TextDecoder("utf-8").decode((0,yt.inflate)(bt))}catch(wt){console.error(wt)}}if(this[Mt]&&(this.isbinary.has(Mt)&&typeof bt=="string"&&(bt=(0,st.base64ToArray)(bt)),this[Mt](bt)),Ct){if(Ct.negate)for(let wt=0,Pt=this.data.length;wt<Pt;wt++)this.data[wt]=-this.data[wt];if(Ct.normalize){var Tt=0;for(let wt=0,Pt=this.data.length;wt<Pt;wt++)Tt+=this.data[wt];var $t=Tt/this.data.length;Tt=0;for(let wt=0,Pt=this.data.length;wt<Pt;wt++){var Rt=this.data[wt]-$t;Tt+=Rt*Rt}var Et=Tt/this.data.length;for(let wt=0,Pt=this.data.length;wt<Pt;wt++)this.data[wt]=(this.data[wt]-$t)/Et}}}getIndex(bt,Mt,Ct){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new at.Matrix4().getInverse(this.matrix));var Tt=new at.Vector3(bt,Mt,Ct);Tt=Tt.applyMatrix4(this.inversematrix),bt=Tt.x,Mt=Tt.y,Ct=Tt.z}else bt-=this.origin.x,Mt-=this.origin.y,Ct-=this.origin.z,bt/=this.unit.x,Mt/=this.unit.y,Ct/=this.unit.z;return bt=Math.round(bt),Mt=Math.round(Mt),Ct=Math.round(Ct),bt<0||bt>=this.size.x||Mt<0||Mt>=this.size.y||Ct<0||Ct>=this.size.z?-1:bt*this.size.y*this.size.z+Mt*this.size.z+Ct}getVal(bt,Mt,Ct){let Tt=this.getIndex(bt,Mt,Ct);return Tt<0?0:this.data[Tt]}cube(bt){var Mt=bt.split(/\r?\n/);if(!(Mt.length<6)){var Ct=(0,dt.CUBE)(bt,{}).modelData[0].cryst,Tt=Mt[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),$t=parseFloat(Tt[0]),Rt=Math.abs($t);this.origin=Ct.origin,this.size=Ct.size,this.unit=Ct.unit,this.matrix=Ct.matrix4;var Et=6;$t<0&&Et++;var wt=Mt.splice(Rt+Et).join(" ");wt=wt.replace(/^\s+/,"");var Pt=wt.split(/[\s\r]+/);this.data=Float32Array.from(Pt,parseFloat)}}ccp4(bt){var Mt={};bt=new Int8Array(bt);var Ct=new Int32Array(bt.buffer,0,56),Tt=new Float32Array(bt.buffer,0,56),$t=new DataView(bt.buffer);if(Mt.MAP=String.fromCharCode($t.getUint8(208),$t.getUint8(209),$t.getUint8(210),$t.getUint8(211)),Mt.MACHST=[$t.getUint8(212),$t.getUint8(213)],Mt.MACHST[0]===17&&Mt.MACHST[1]===17)for(var Rt=bt.byteLength,Et=0;Et<Rt;Et+=4)$t.setFloat32(Et,$t.getFloat32(Et),!0);Mt.NX=Ct[0],Mt.NY=Ct[1],Mt.NZ=Ct[2],Mt.MODE=Ct[3],Mt.NXSTART=Ct[4],Mt.NYSTART=Ct[5],Mt.NZSTART=Ct[6],Mt.MX=Ct[7],Mt.MY=Ct[8],Mt.MZ=Ct[9],Mt.xlen=Tt[10],Mt.ylen=Tt[11],Mt.zlen=Tt[12],Mt.alpha=Tt[13],Mt.beta=Tt[14],Mt.gamma=Tt[15],Mt.MAPC=Ct[16],Mt.MAPR=Ct[17],Mt.MAPS=Ct[18],Mt.DMIN=Tt[19],Mt.DMAX=Tt[20],Mt.DMEAN=Tt[21],Mt.ISPG=Ct[22],Mt.NSYMBT=Ct[23],Mt.LSKFLG=Ct[24],Mt.originX=Tt[49],Mt.originY=Tt[50],Mt.originZ=Tt[51],Mt.ARMS=Tt[54];var wt=Mt,Pt=[wt.xlen,0,0],Ft=[wt.ylen*Math.cos(Math.PI/180*wt.gamma),wt.ylen*Math.sin(Math.PI/180*wt.gamma),0],Nt=[wt.zlen*Math.cos(Math.PI/180*wt.beta),wt.zlen*(Math.cos(Math.PI/180*wt.alpha)-Math.cos(Math.PI/180*wt.gamma)*Math.cos(Math.PI/180*wt.beta))/Math.sin(Math.PI/180*wt.gamma),0];Nt[2]=Math.sqrt(wt.zlen*wt.zlen*Math.sin(Math.PI/180*wt.beta)*Math.sin(Math.PI/180*wt.beta)-Nt[1]*Nt[1]);var Ot=[0,Pt,Ft,Nt],Bt=[0,wt.MX,wt.MY,wt.MZ],Xt=[0,wt.MAPC,wt.MAPR,wt.MAPS];this.matrix=new at.Matrix4,this.matrix.set(Ot[Xt[1]][0]/Bt[Xt[1]],Ot[Xt[2]][0]/Bt[Xt[2]],Ot[Xt[3]][0]/Bt[Xt[3]],0,Ot[Xt[1]][1]/Bt[Xt[1]],Ot[Xt[2]][1]/Bt[Xt[2]],Ot[Xt[3]][1]/Bt[Xt[3]],0,Ot[Xt[1]][2]/Bt[Xt[1]],Ot[Xt[2]][2]/Bt[Xt[2]],Ot[Xt[3]][2]/Bt[Xt[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new at.Matrix4().makeTranslation(wt.NXSTART+wt.originX,wt.NYSTART+wt.originY,wt.NZSTART+wt.originZ)),this.origin=new at.Vector3(0,0,0),this.unit=new at.Vector3(1,1,1),this.size={x:Mt.NX,y:Mt.NY,z:Mt.NZ},this.dimensionorder=[Mt.MAPC,Mt.MAPR,Mt.MAPS];var Zt=new Float32Array(bt.buffer,1024+Mt.NSYMBT),rn=Mt.NX,Gt=Mt.NY,nn=Mt.NZ;this.data=new Float32Array(rn*Gt*nn);for(let cn=0;cn<rn;cn++)for(let an=0;an<Gt;an++)for(let mn=0;mn<nn;mn++)this.data[(cn*Gt+an)*nn+mn]=Zt[(mn*Gt+an)*rn+cn]}}},"./src/VolumetricRender.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{GLVolumetricRender:()=>vt});var st=rt("./src/WebGL/shapes/index.ts"),at=rt("./src/WebGL/math/index.ts"),lt=rt("./src/WebGL/index.ts"),dt=rt("./src/colors.ts"),yt=rt("./src/GLShape.ts");class vt{static interpolateArray(bt,Mt){function Ct(Nt,Ot,Bt){return Nt+(Ot-Nt)*Bt}var Tt=[],$t=(bt.length-1)/(Mt-1);Tt[0]=bt[0];for(var Rt=1;Rt<Mt-1;Rt++){var Et=Rt*$t,wt=Math.floor(Et),Pt=Math.ceil(Et),Ft=Et-wt;Tt[Rt]=Ct(bt[wt],bt[Pt],Ft)}return Tt[Mt-1]=bt[bt.length-1],Tt}constructor(bt,Mt,Ct){this.hidden=!1,this.boundingSphere=new st.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,Mt=Mt||{};var Tt=Object.assign([],Mt.transferfn);this.subsamples=Mt.subsamples||5;let $t=256;Tt.forEach(function(Gt){Gt.value=parseFloat(Gt.value)}),Tt.sort(function(Gt,nn){return Gt.value-nn.value}),this.min=Tt[0].value,Tt.length==0&&Tt.push(Tt[0]),this.max=Tt[Tt.length-1].value;var Rt,Et,wt,Pt,Ft,Nt,Ot,Bt,Xt,Zt;for(let Gt=0;Gt<Tt.length-1;Gt++)if(wt=dt.CC.color(Tt[Gt].color),Pt=dt.CC.color(Tt[Gt+1].color),Xt=Tt[Gt].opacity,Zt=Tt[Gt+1].opacity,Rt=Math.floor((Tt[Gt].value-this.min)*$t/(this.max-this.min)),Et=Math.floor((Tt[Gt+1].value-this.min)*$t/(this.max-this.min)),Rt!=Et){Ft=vt.interpolateArray([wt.r*255,Pt.r*255],Et-Rt),Nt=vt.interpolateArray([wt.g*255,Pt.g*255],Et-Rt),Ot=vt.interpolateArray([wt.b*255,Pt.b*255],Et-Rt),Bt=vt.interpolateArray([Xt*255,Zt*255],Et-Rt);for(let nn=0;nn<Ft.length;nn++)this.transferfunctionbuffer.push(Ft[nn]),this.transferfunctionbuffer.push(Nt[nn]),this.transferfunctionbuffer.push(Ot[nn]),this.transferfunctionbuffer.push(Bt[nn])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),bt.matrix){let Gt=new at.Vector3(0,0,0),nn=new at.Vector3(bt.size.x,bt.size.y,bt.size.z),cn=new at.Vector3(1,1,1);Gt.applyMatrix4(bt.matrix),nn.applyMatrix4(bt.matrix),cn.applyMatrix4(bt.matrix).sub(Gt),this.extent=[[Gt.x,Gt.y,Gt.z],[nn.x,nn.y,nn.z]];for(let Cn=1;Cn<7;Cn++)nn.x=Cn&1?bt.size.x:0,nn.y=Cn&2?bt.size.y:0,nn.z=Cn&4?bt.size.z:0,nn.applyMatrix4(bt.matrix),this.extent[0][0]=Math.min(this.extent[0][0],nn.x),this.extent[0][1]=Math.min(this.extent[0][1],nn.y),this.extent[0][2]=Math.min(this.extent[0][2],nn.z),this.extent[1][0]=Math.max(this.extent[1][0],nn.x),this.extent[1][1]=Math.max(this.extent[1][1],nn.y),this.extent[1][2]=Math.max(this.extent[1][2],nn.z);let an=nn.x-Gt.x,mn=nn.y-Gt.y,En=nn.z-Gt.z;this.maxdepth=Math.sqrt(an*an+mn*mn+En*En),this.minunit=Math.min(Math.min(cn.x,cn.y),cn.z),this.texmatrix=new at.Matrix4().identity().scale({x:bt.size.x,y:bt.size.y,z:bt.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(bt.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new at.Matrix4().identity();let Gt=bt.unit.x*bt.size.x,nn=bt.unit.y*bt.size.y,cn=bt.unit.z*bt.size.z;this.texmatrix.makeTranslation(-bt.origin.x/Gt,-bt.origin.y/nn,-bt.origin.z/cn),this.texmatrix.scale({x:1/Gt,y:1/nn,z:1/cn}),this.minunit=Math.min(Math.min(bt.unit.x,bt.unit.y),bt.unit.z),this.extent=[[bt.origin.x,bt.origin.y,bt.origin.z],[bt.origin.x+Gt,bt.origin.y+nn,bt.origin.z+cn]],this.maxdepth=Math.sqrt(Gt*Gt+nn*nn+cn*cn)}var rn=new yt.GLShape({});if(rn.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=rn.finalize(),this.boundingSphere.center=new at.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,Mt.coords===void 0&&Mt.selection!==void 0&&(Ct?Mt.coords=Ct.selectedAtoms(Mt.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),Mt.coords!==void 0&&Mt.seldist!==void 0){let Gt=new Uint8Array(bt.data.length),nn=Mt.seldist,cn=nn*nn;for(let an=0,mn=Mt.coords.length;an<mn;an++){let En=Mt.coords[an],Cn=En.x-nn,Mn=En.y-nn,un=En.z-nn,Tn=En.x+nn,Pn=En.y+nn,dn=En.z+nn;if(bt.getIndex(Cn,Mn,un)>=0||bt.getIndex(Tn,Pn,dn)>=0)for(let Un=Cn;Un<Tn;Un+=this.minunit)for(let qn=Mn;qn<Pn;qn+=this.minunit)for(let In=un;In<dn;In+=this.minunit){let Wn=bt.getIndex(Un,qn,In);Wn>=0&&!Gt[Wn]&&(Un-En.x)*(Un-En.x)+(qn-En.y)*(qn-En.y)+(In-En.z)*(In-En.z)<cn&&(Gt[Wn]=1)}}for(let an=0,mn=bt.data.length;an<mn;an++)Gt[an]==0&&(bt.data[an]=1/0)}this.data=bt}globj(bt){if(this.renderedShapeObj&&(bt.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new lt.Object3D;var Mt=null,Ct=new lt.Texture(this.data,!0),Tt=new lt.Texture(this.transferfunctionbuffer,!1);Ct.needsUpdate=!0,Tt.needsUpdate=!0,Tt.flipY=!1,Mt=new lt.VolumetricMaterial({transferfn:Tt,transfermin:this.min,transfermax:this.max,map:Ct,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var $t=new lt.Mesh(this.geo,Mt);this.shapeObj.add($t),this.renderedShapeObj=this.shapeObj.clone(),bt.add(this.renderedShapeObj)}}removegl(bt){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),bt.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}},"./src/WebGL/Camera.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Camera:()=>lt});var st=rt("./src/WebGL/core/index.ts"),at=rt("./src/WebGL/math/index.ts");class lt extends st.Object3D{constructor(yt=50,vt=1,_t=.1,bt=2e3,Mt=!1){super(),this.projectionMatrix=new at.Matrix4,this.projectionMatrixInverse=new at.Matrix4,this.matrixWorldInverse=new at.Matrix4,this.fov=yt,this.aspect=vt,this.near=_t,this.far=bt;var Ct=this.position.z;this.right=Ct*Math.tan(Math.PI/180*yt),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!Mt,this.updateProjectionMatrix()}lookAt(yt){this.matrix.lookAt(this.position,yt,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof at.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}},"./src/WebGL/Fog.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Fog:()=>at});var st=rt("./src/colors.ts");class at{constructor(dt,yt=1,vt=1e3){this.name="",this.color=new st.Color(dt),this.near=yt,this.far=vt}clone(){return new at(this.color.getHex(),this.near,this.far)}}},"./src/WebGL/Renderer.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Renderer:()=>Rt});var st=rt("./src/WebGL/Camera.ts"),at=rt("./src/WebGL/constants/Sides.ts"),lt=rt("./src/WebGL/constants/TextureConstants.ts"),dt=rt("./src/WebGL/core/index.ts"),yt=rt("./src/colors.ts"),vt=rt("./src/WebGL/materials/index.ts"),_t=rt("./src/WebGL/math/index.ts"),bt=rt("./src/WebGL/objects/index.ts"),Mt=rt("./src/WebGL/shaders/index.ts"),Ct=rt("./src/WebGL/SpritePlugin.ts"),Tt=null,$t=null;class Rt{constructor(wt){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new _t.Vector3,this._worldInverse=new _t.Matrix4,this._projInverse=new _t.Matrix4,this._textureMatrix=new _t.Matrix4,this._fullProjModelMatrix=new _t.Matrix4,this._fullProjModelMatrixInv=new _t.Matrix4,this._direction=new _t.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new Ct.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,wt=wt||{},this.row=wt.row,this.col=wt.col,this.rows=wt.rows,this.cols=wt.cols,this._canvas=wt.canvas!==void 0?wt.canvas:document.createElement("canvas"),this._precision=wt.precision!==void 0?wt.precision:"highp",this._alpha=wt.alpha!==void 0?wt.alpha:!0,this._premultipliedAlpha=wt.premultipliedAlpha!==void 0?wt.premultipliedAlpha:!0,this._antialias=wt.antialias!==void 0?wt.antialias:!1,this._preserveDrawingBuffer=wt.preserveDrawingBuffer!==void 0?wt.preserveDrawingBuffer:!1,this._clearColor=wt.clearColor!==void 0?new yt.Color(wt.clearColor):new yt.Color(0),this._clearAlpha=wt.clearAlpha!==void 0?wt.clearAlpha:0,this._outlineMaterial=new vt.MeshOutlineMaterial(wt.outline),this._outlineSphereImposterMaterial=new vt.SphereImposterOutlineMaterial(wt.outline),this._outlineStickImposterMaterial=new vt.StickImposterOutlineMaterial(wt.outline),this._outlineEnabled=!!wt.outline,this._AOEnabled=!!wt.ambientOcclusion,wt.ambientOcclusion&&typeof wt.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(wt.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),wt.ambientOcclusion&&typeof wt.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(wt.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=wt.id,!(wt.containerWidth==0||wt.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(wt,Pt){this._clearColor.setHex(wt),this._clearAlpha=Pt,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(wt){this._outlineMaterial=new vt.MeshOutlineMaterial(wt),this._outlineSphereImposterMaterial=new vt.SphereImposterOutlineMaterial(wt),this._outlineStickImposterMaterial=new vt.StickImposterOutlineMaterial(wt),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(wt){wt&&(wt.strength&&(this._AOstrength=wt.strength),wt.scale&&(this._AOradius=wt.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var wt=this._canvas.width/this.cols,Pt=this._canvas.height/this.rows;this._viewportWidth=wt,this._viewportHeight=Pt,this.isLost()||(this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(wt*this.col,Pt*this.row,wt,Pt),this._gl.viewport(wt*this.col,Pt*this.row,wt,Pt))}}setSize(wt,Pt){if(this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._antialias&&this.devicePixelRatio<2&&(this.devicePixelRatio*=2),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var Ft=wt/this.cols,Nt=Pt/this.rows;this._canvas.width=wt*this.devicePixelRatio,this._canvas.height=Pt*this.devicePixelRatio,this._viewportWidth=Ft*this.devicePixelRatio,this._viewportHeight=Nt*this.devicePixelRatio,this._canvas.style.width=wt+"px",this._canvas.style.height=Pt+"px",this.setViewport()}else this._viewportWidth=this._canvas.width=wt*this.devicePixelRatio,this._viewportHeight=this._canvas.height=Pt*this.devicePixelRatio,this._canvas.style.width=wt+"px",this._canvas.style.height=Pt+"px",this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight);this.initFrameBuffer()}clear(wt,Pt,Ft){var Nt=0;(wt===void 0||wt)&&(Nt|=this._gl.COLOR_BUFFER_BIT),(Pt===void 0||Pt)&&(Nt|=this._gl.DEPTH_BUFFER_BIT),(Ft===void 0||Ft)&&(Nt|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(Nt)}setMaterialFaces(wt,Pt){var Ft=wt.side===at.DoubleSide,Nt=wt.side===at.BackSide;wt.imposter||(Nt=Pt?!Nt:Nt),this._oldDoubleSided!==Ft&&(Ft?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=Ft),this._oldFlipSided!==Nt&&(Nt?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=Nt),this._gl.cullFace(this._gl.BACK)}setDepthTest(wt){this._oldDepthTest!==wt&&(wt?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=wt)}setDepthWrite(wt){this._oldDepthWrite!==wt&&(this._gl.depthMask(wt),this._oldDepthWrite=wt)}setBlending(wt){wt?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(wt,Pt,Ft,Nt){wt.addEventListener("dispose",this.onMaterialDispose.bind(this));var Ot,Bt;if(Bt=wt.shaderID,Bt){var Xt=Mt.ShaderLib[Bt];wt.vertexShader=Xt.vertexShader,wt.fragmentShader=Xt.fragmentShader,wt.uniforms=Mt.ShaderUtils.clone(Xt.uniforms),wt.shaded&&wt.makeShaded(this.SHADE_TEXTURE)}Ot={wireframe:wt.wireframe,fragdepth:wt.imposter,volumetric:wt.volumetric,shaded:wt.shaded},wt.program=this.buildProgram(wt.fragmentShader,wt.vertexShader,wt.uniforms,Ot)}renderBuffer(wt,Pt,Ft,Nt,Ot,Bt){if(Nt.visible){var Xt,Zt;if(Xt=this.setProgram(wt,Pt,Ft,Nt,Bt,this),!!Xt){Zt=Xt.attributes;var rn=!1,Gt=Nt.wireframe?1:0,nn=Ot.id*16777215+Xt.id*2+Gt;nn!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=nn,rn=!0),rn&&(this.disableAttributes(),Zt.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Ot.__webglVertexBuffer),this.enableAttribute(Zt.position),this._gl.vertexAttribPointer(Zt.position,3,this._gl.FLOAT,!1,0,0)),Zt.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Ot.__webglColorBuffer),this.enableAttribute(Zt.color),this._gl.vertexAttribPointer(Zt.color,3,this._gl.FLOAT,!1,0,0)),Zt.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Ot.__webglNormalBuffer),this.enableAttribute(Zt.normal),this._gl.vertexAttribPointer(Zt.normal,3,this._gl.FLOAT,!1,0,0)),Zt.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Ot.__webglOffsetBuffer),this.enableAttribute(Zt.offset),this._gl.vertexAttribPointer(Zt.offset,3,this._gl.FLOAT,!1,0,0)),Zt.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Ot.__webglRadiusBuffer),this.enableAttribute(Zt.radius),this._gl.vertexAttribPointer(Zt.radius,1,this._gl.FLOAT,!1,0,0)));var cn,an;if(Bt instanceof bt.Mesh){if(Nt.shaderID==="instanced"){var mn=Nt.sphere.geometryGroups[0];rn&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Ot.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,mn.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,Ot.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,mn.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Ot.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,mn.faceArray,this._gl.STATIC_DRAW)),cn=mn.faceidx,this._extInstanced.vertexAttribDivisorANGLE(Zt.offset,1),this._extInstanced.vertexAttribDivisorANGLE(Zt.radius,1),this._extInstanced.vertexAttribDivisorANGLE(Zt.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,cn,this._gl.UNSIGNED_SHORT,0,Ot.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(Zt.offset,0),this._extInstanced.vertexAttribDivisorANGLE(Zt.radius,0),this._extInstanced.vertexAttribDivisorANGLE(Zt.color,0)}else Nt.wireframe?(an=Ot.lineidx,this.setLineWidth(Nt.wireframeLinewidth),rn&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Ot.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,an,this._gl.UNSIGNED_SHORT,0)):(cn=Ot.faceidx,rn&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,Ot.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,cn,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=cn,this.info.render.faces+=cn/3}else Bt instanceof bt.Line&&(an=Ot.vertices,this.setLineWidth(Nt.linewidth),this._gl.drawArrays(this._gl.LINES,0,an),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(wt,Pt,Ft){let Nt=wt.__lights,Ot=wt.fog,Bt=[];for(let rn=0,Gt=wt.__webglObjects.length;rn<Gt;rn++){let nn=wt.__webglObjects[rn];nn.render&&nn[Ft]&&Bt.push(nn)}if(Bt.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(wt.__webglObjects,!0,Ft+"Depth",Pt,Nt,Ot,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let Xt=this._AOshader.uniforms;this._gl.uniform1f(Xt.total_strength,this._AOstrength),this._gl.uniform1f(Xt.radius,this._AOradius),this._fullProjModelMatrix=new _t.Matrix4,this._fullProjModelMatrixInv=new _t.Matrix4;let Zt=Bt[0].object;this._fullProjModelMatrix.multiplyMatrices(Pt.projectionMatrix,Zt._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(Xt.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(Xt.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(wt,Pt){if(!(Pt instanceof st.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var Ft,Nt,Ot,Bt,Xt,Zt=wt.__lights,rn=wt.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&wt.updateMatrixWorld(),Pt.parent===void 0&&Pt.updateMatrixWorld(),Pt.matrixWorldInverse.getInverse(Pt.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(wt),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),Xt=wt.__webglObjects;let Gt=!1,nn=this._AOEnabled;for(Ft=0,Nt=Xt.length;Ft<Nt;Ft++)Ot=Xt[Ft],Bt=Ot.object,Ot.render=!1,Bt.visible&&(this.setupMatrices(Bt,Pt),this.unrollBufferMaterial(Ot),Ot.render=!0,Ot.volumetric&&(Gt=!0),Ot.hasAO&&(nn=!0));if(this.setBlending(!1),nn&&this.setShading(wt,Pt,"opaque"),this.renderObjects(wt.__webglObjects,!0,"opaque",Pt,Zt,rn,!1),nn&&this.clearShading(),this.renderSprites(wt,Pt,!1),this.renderObjects(wt.__webglObjects,!0,"transparentDepth",Pt,Zt,rn,!0),this.renderObjects(wt.__webglObjects,!1,"transparent",Pt,Zt,rn,!0),Gt&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(wt.__webglObjects,!1,"volumetric",Pt,Zt,rn,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(wt,Pt,!0),this._bitmap){const cn=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(cn),cn.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let wt=this._viewportWidth,Pt=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,wt,Pt),this._gl.viewport(0,0,wt,Pt),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,wt,Pt,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,wt,Pt,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,wt,Pt,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,wt,Pt,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let wt=this._viewportWidth,Pt=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,wt,Pt),this._gl.viewport(0,0,wt,Pt),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var Ft=this._antialias?Mt.ShaderLib.screenaa:Mt.ShaderLib.screen;this._screenshader=this.buildProgram(Ft.fragmentShader,Ft.vertexShader,Ft.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var Nt=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(Nt),this._gl.STATIC_DRAW);let Ot=Mt.ShaderLib.ssao;this._AOshader=this.buildProgram(Ot.fragmentShader,Ot.vertexShader,Ot.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let Bt=Mt.ShaderLib.blur;this._blurshader=this.buildProgram(Bt.fragmentShader,Bt.vertexShader,Bt.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(wt){if(wt.__webglObjects||(wt.__webglObjects=[],wt.__webglObjectsImmediate=[],wt.__webglSprites=[],wt.__webglFlares=[]),wt.__objectsAdded.length){for(;wt.__objectsAdded.length;)this.addObject(wt.__objectsAdded[0],wt),wt.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;wt.__objectsRemoved.length;)this.removeObject(wt.__objectsRemoved[0],wt),wt.__objectsRemoved.splice(0,1);for(var Pt=0,Ft=wt.__webglObjects.length;Pt<Ft;Pt++)this.updateObject(wt.__webglObjects[Pt].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(wt,Pt){(wt==null||Pt==null)&&(wt=this._canvas.width,Pt=this._canvas.height);var Ft=wt/Pt;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var Nt=wt/this.cols,Ot=Pt/this.rows;Ft=Nt/Ot}return Ft}setTexture(wt,Pt,Ft){if(wt.needsUpdate){wt.__webglInit||(wt.__webglInit=!0,wt.addEventListener("dispose",this.onTextureDispose.bind(this)),wt.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+Pt);var Nt=Ft?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(Nt,wt.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,wt.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,wt.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,wt.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,wt.unpackAlignment);var Ot=this.paramToGL(wt.format),Bt=this.paramToGL(wt.type);if(Ft)this.setTextureParameters(this._gl.TEXTURE_3D,wt),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,wt.image.size.z,wt.image.size.y,wt.image.size.x,0,this._gl.RED,this._gl.FLOAT,wt.image.data);else{var Xt=wt.image,Zt=Xt.width,rn=Xt.height;typeof Zt>"u"&&(Zt=Xt.length,Ot==this._gl.RGBA&&(Zt/=4),rn=1),this.setTextureParameters(this._gl.TEXTURE_2D,wt),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,Ot,Ot,Bt,wt.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,Ot,Zt,rn,0,Ot,Bt,wt.image)}wt.needsUpdate=!1,wt.onUpdate&&wt.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+Pt),Ft?this._gl.bindTexture(this._gl.TEXTURE_3D,wt.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,wt.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(wt){this._enabledAttributes[wt]||(this._gl.enableVertexAttribArray(wt),this._enabledAttributes[wt]=!0)}disableAttributes(){for(let wt in this._enabledAttributes)this._enabledAttributes[wt]&&(this._gl.disableVertexAttribArray(wt),this._enabledAttributes[wt]=!1)}setPolygonOffset(wt,Pt,Ft){this._oldPolygonOffset!==wt&&(wt?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(wt){wt!==this._oldLineWidth&&(this._gl.lineWidth(wt),this._oldLineWidth=wt)}deallocateGeometry(wt){if(wt.__webglInit=void 0,wt.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(wt.__webglVertexBuffer),wt.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(wt.__webglColorBuffer),wt.geometryGroups!==void 0)for(var Pt=0,Ft=wt.groups;Pt<Ft;Pt++){var Nt=wt.geometryGroups[Pt];Nt.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(Nt.__webglVertexBuffer),Nt.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(Nt.__webglColorBuffer),Nt.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(Nt.__webglNormalBuffer),Nt.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(Nt.__webglFaceBuffer),Nt.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(Nt.__webglLineBuffer)}}deallocateMaterial(wt){var Pt=wt.program;if(Pt!==void 0){wt.program=void 0;var Ft,Nt,Ot,Bt=!1;for(Ft=0,Nt=this._programs.length;Ft<Nt;Ft++)if(Ot=this._programs[Ft],Ot.program===Pt){Ot.usedTimes--,Ot.usedTimes===0&&(Bt=!0);break}if(Bt===!0){var Xt=[];for(Ft=0,Nt=this._programs.length;Ft<Nt;Ft++)Ot=this._programs[Ft],Ot.program!==Pt&&Xt.push(Ot);this._programs=Xt,this._gl.deleteProgram(Pt),this.info.memory.programs--}}}deallocateTexture(wt){if(wt.image&&wt.image.__webglTextureCube)this._gl.deleteTexture(wt.image.__webglTextureCube);else{if(!wt.__webglInit)return;wt.__webglInit=!1,this._gl.deleteTexture(wt.__webglTexture)}}onGeometryDispose(wt){var Pt=wt.target;Pt.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(Pt),this.info.memory.geometries--}onTextureDispose(wt){var Pt=wt.target;Pt.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(Pt),this.info.memory.textures--}onMaterialDispose(wt){var Pt=wt.target;Pt.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(Pt)}getShader(wt,Pt){var Ft;return!this.isWebGL1()&&!Pt.startsWith("#version")&&(Pt=Pt.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),wt=="fragment"?Pt=Pt.replace(/varying/g,"in"):Pt=Pt.replace(/varying/g,"out"),Pt=Pt.replace(/attribute/g,"in"),Pt=Pt.replace(/texture2D/g,"texture"),Pt=Pt.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),Pt=Pt.replace(/gl_FragColor/g,"glFragColor"),Pt=`#version 300 es
`+Pt),wt==="fragment"?Ft=this._gl.createShader(this._gl.FRAGMENT_SHADER):wt==="vertex"&&(Ft=this._gl.createShader(this._gl.VERTEX_SHADER)),Ft==null?null:(this._gl.shaderSource(Ft,Pt),this._gl.compileShader(Ft),this._gl.getShaderParameter(Ft,this._gl.COMPILE_STATUS)?Ft:(console.error(this._gl.getShaderInfoLog(Ft)),console.error("could not initialize shader"),null))}buildProgram(wt,Pt,Ft,Nt){var Ot,Bt,Xt,Zt,rn=[];rn.push(wt),rn.push(Pt);for(Ot in Nt)rn.push(Ot),rn.push(Nt[Ot]);for(Zt=rn.join(),Ot=0,Bt=this._programs.length;Ot<Bt;Ot++){var Gt=this._programs[Ot];if(Gt.code===Zt)return Gt.usedTimes++,Gt.program}if(this.isWebGL1()&&Nt.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(Xt=this._gl.createProgram(),Xt==null)return null;var nn=this._precision,cn="precision "+nn+" float;",an=[Nt.volumetric?"#version 300 es":"",cn].join(`
`),mn=[Nt.volumetric?"#version 300 es":"",Nt.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",Nt.shaded?"#define SHADED 1":"",Nt.wireframe?"#define WIREFRAME 1":"",cn].join(`
`),En=this.getShader("fragment",mn+wt),Cn=this.getShader("vertex",an+Pt);Cn!=null&&this._gl.attachShader(Xt,Cn),En!=null&&this._gl.attachShader(Xt,En),this._gl.linkProgram(Xt),this._gl.getProgramParameter(Xt,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),Xt.uniforms={},Xt.attributes={};var Mn,un,Tn;Mn=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(un in Ft)Mn.push(un);for(Tn=0;Tn<Mn.length;Tn++){var Pn=Mn[Tn];Xt.uniforms[Pn]=this._gl.getUniformLocation(Xt,Pn)}for(Mn=["position","normal","color","lineDistance","offset","radius"],Tn=0;Tn<Mn.length;Tn++){var dn=Mn[Tn];Xt.attributes[dn]=this._gl.getAttribLocation(Xt,dn)}return Xt.id=this._programs_counter++,this._programs.push({program:Xt,code:Zt,usedTimes:1}),this.info.memory.programs=this._programs.length,Xt}setProgram(wt,Pt,Ft,Nt,Ot,Bt){if(Nt.needsUpdate&&(Nt.program&&this.deallocateMaterial(Nt),this.initMaterial(Nt,Pt,Ft,Ot),Nt.needsUpdate=!1),Nt.program==null)return null;var Xt=!1,Zt=Nt.program,rn=Zt.uniforms,Gt=Nt.uniforms;if(Zt!=this._currentProgram&&(this._gl.useProgram(Zt),this._currentProgram=Zt,Xt=!0),Nt.id!=this._currentMaterialId&&(this._currentMaterialId=Nt.id,Xt=!0),wt!=this._currentCamera&&(this._currentCamera=wt,Xt=!0),rn.projectionMatrix&&this._gl.uniformMatrix4fv(rn.projectionMatrix,!1,wt.projectionMatrix.elements),rn.modelViewMatrix&&this._gl.uniformMatrix4fv(rn.modelViewMatrix,!1,Ot._modelViewMatrix.elements),rn.normalMatrix&&this._gl.uniformMatrix3fv(rn.normalMatrix,!1,Ot._normalMatrix.elements),rn.projinv&&(this._projInverse.getInverse(wt.projectionMatrix),this._gl.uniformMatrix4fv(rn.projinv,!1,this._projInverse.elements)),rn.viewMatrix&&this._gl.uniformMatrix4fv(rn.viewMatrix,!1,wt.matrixWorldInverse.elements),rn.vWidth&&this._gl.uniform1f(rn.vWidth,this._viewportWidth),rn.vHeight&&this._gl.uniform1f(rn.vHeight,this._viewportHeight),Xt){if(Gt.fogColor.value=Ft.color,Gt.fogNear.value=Ft.near,Gt.fogFar.value=Ft.far,Nt.shaderID.startsWith("lambert")||Nt.shaderID==="instanced"||Nt.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(Zt,Pt),this._lightsNeedUpdate=!1),Gt.directionalLightColor.value=this._lights.directional.colors,Gt.directionalLightDirection.value=this._lights.directional.positions;else if(Nt.shaderID.endsWith("outline"))Gt.outlineColor.value=Nt.outlineColor,Gt.outlineWidth.value=Nt.outlineWidth,Gt.outlinePushback.value=Nt.outlinePushback,Gt.outlineMaxPixels.value=Nt.outlineMaxPixels*this.devicePixelRatio;else if(Nt.shaderID==="volumetric"){Ot._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(Ot._modelViewMatrix),this._projInverse.getInverse(wt.projectionMatrix),this._textureMatrix.multiplyMatrices(Ot.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(rn.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(rn.projinv,!1,this._projInverse.elements);let nn=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);Gt.step.value=Ot.material.unit*nn,Gt.maxdepth.value=Ot.material.maxdepth*nn,Gt.transfermax.value=Ot.material.transfermax,Gt.transfermin.value=Ot.material.transfermin,Gt.subsamples.value=Ot.material.subsamples,Bt.setTexture(Ot.material.transferfn,4,!1),Bt.setTexture(Ot.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}Gt.opacity.value=Nt.opacity,this.loadMaterialUniforms(rn,Gt)}return Gt.shading&&(Gt.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),Zt}loadMaterialUniforms(wt,Pt){var Ft,Nt,Ot,Bt;for(Ft in Pt)wt[Ft]&&(Nt=Pt[Ft].type,Ot=Pt[Ft].value,Bt=wt[Ft],Nt==="f"?this._gl.uniform1f(Bt,Ot):Nt==="i"?this._gl.uniform1i(Bt,Ot):Nt==="fv"?this._gl.uniform3fv(Bt,Ot):Nt==="c"?this._gl.uniform3f(Bt,Ot.r,Ot.g,Ot.b):Nt==="f4"&&this._gl.uniform4f(Bt,Ot[0],Ot[1],Ot[2],Ot[3]))}addObject(wt,Pt){var Ft,Nt,Ot,Bt;if(!wt.__webglInit&&(wt.__webglInit=!0,wt._modelViewMatrix=new _t.Matrix4,wt._normalMatrix=new _t.Matrix3,wt.geometry!==void 0&&wt.geometry.__webglInit===void 0&&(wt.geometry.__webglInit=!0,wt.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),wt instanceof bt.Mesh||wt instanceof bt.Line))for(Ot=wt.geometry,Ft=0,Nt=Ot.geometryGroups.length;Ft<Nt;Ft++)Bt=Ot.geometryGroups[Ft],Bt.id=this._geometryGroupCounter++,Bt.__webglVertexBuffer||(wt instanceof bt.Mesh?(this.createMeshBuffers(Bt),Ot.elementsNeedUpdate=!0,Ot.normalsNeedUpdate=!0):wt instanceof bt.Line&&this.createLineBuffers(Bt),Ot.verticesNeedUpdate=!0,Ot.colorsNeedUpdate=!0);if(!wt.__webglActive){if(wt instanceof bt.Mesh||wt instanceof bt.Line)for(Ot=wt.geometry,Ft=0,Nt=Ot.geometryGroups.length;Ft<Nt;Ft++)Bt=Ot.geometryGroups[Ft],this.addBuffer(Pt.__webglObjects,Bt,wt);else wt instanceof bt.Sprite&&Pt.__webglSprites.push(wt);wt.__webglActive=!0}}updateObject(wt){var Pt=wt.geometry,Ft;if(wt instanceof bt.Mesh||wt instanceof bt.Line){for(var Nt=0,Ot=Pt.geometryGroups.length;Nt<Ot;Nt++)Ft=Pt.geometryGroups[Nt],(Pt.verticesNeedUpdate||Pt.elementsNeedUpdate||Pt.colorsNeedUpdate||Pt.normalsNeedUpdate)&&this.setBuffers(Ft,this._gl.STATIC_DRAW);Pt.verticesNeedUpdate=!1,Pt.elementsNeedUpdate=!1,Pt.normalsNeedUpdate=!1,Pt.colorsNeedUpdate=!1,Pt.buffersNeedUpdate=!1}}removeObject(wt,Pt){wt instanceof bt.Mesh||wt instanceof bt.Line?this.removeInstances(Pt.__webglObjects,wt):wt instanceof bt.Sprite&&this.removeInstancesDirect(Pt.__webglSprites,wt),wt.__webglActive=!1}removeInstances(wt,Pt){for(var Ft=wt.length-1;Ft>=0;--Ft)wt[Ft].object===Pt&&wt.splice(Ft,1)}removeInstancesDirect(wt,Pt){for(var Ft=wt.length-1;Ft>=0;--Ft)wt[Ft]===Pt&&wt.splice(Ft,1)}unrollBufferMaterial(wt){var Pt=wt.object,Ft=Pt.material;if(Ft.volumetric)wt.opaque=null,wt.transparent=null,wt.volumetric=Ft;else if(Ft.transparent){if(wt.opaque=null,wt.volumetric=null,wt.transparent=Ft,!Ft.wireframe){let Nt=Ft.clone();Nt.opacity=0,wt.transparentDepth=Nt}}else{if(wt.opaque=Ft,wt.transparent=null,wt.volumetric=null,!Ft.wireframe){let Nt=Ft.clone();Nt.opacity=0,wt.opaqueDepth=Nt}Ft.hasAO&&(wt.hasAO=!0),(this._AOEnabled||wt.hasAO)&&(wt.opaqueShaded=Ft.clone(),wt.opaqueShaded.shaded=!0)}}setBuffers(wt,Pt){var Ft=wt.vertexArray,Nt=wt.colorArray;if(wt.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,wt.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Ft,Pt)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,wt.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Ft,Pt)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,wt.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Nt,Pt),wt.normalArray&&wt.__webglNormalBuffer!==void 0){var Ot=wt.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,wt.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,Ot,Pt)}if(wt.radiusArray&&wt.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,wt.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,wt.radiusArray,Pt)),wt.faceArray&&wt.__webglFaceBuffer!==void 0){var Bt=wt.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,wt.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Bt,Pt)}if(wt.lineArray&&wt.__webglLineBuffer!==void 0){var Xt=wt.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,wt.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,Xt,Pt)}}createMeshBuffers(wt){wt.radiusArray&&(wt.__webglRadiusBuffer=this._gl.createBuffer()),wt.useOffset&&(wt.__webglOffsetBuffer=this._gl.createBuffer()),wt.__webglVertexBuffer=this._gl.createBuffer(),wt.__webglNormalBuffer=this._gl.createBuffer(),wt.__webglColorBuffer=this._gl.createBuffer(),wt.__webglFaceBuffer=this._gl.createBuffer(),wt.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(wt){wt.__webglVertexBuffer=this._gl.createBuffer(),wt.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(wt,Pt,Ft){wt.push({buffer:Pt,object:Ft,opaque:null,transparent:null})}setupMatrices(wt,Pt){wt._modelViewMatrix.multiplyMatrices(Pt.matrixWorldInverse,wt.matrixWorld),wt._normalMatrix.getInverse(wt._modelViewMatrix),wt._normalMatrix.transpose()}filterFallback(wt){return this._gl.LINEAR}setTextureParameters(wt,Pt){wt==this._gl.TEXTURE_2D?(this._gl.texParameteri(wt,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(wt,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(wt,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(Pt.magFilter)),this._gl.texParameteri(wt,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(Pt.minFilter))):(this._gl.texParameteri(wt,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(wt,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(wt,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(wt,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(wt,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(wt,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(wt,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(wt){return wt===lt.UnsignedByteType?this._gl.UNSIGNED_BYTE:wt===lt.RGBAFormat?this._gl.RGBA:wt===lt.NearestFilter?this._gl.NEAREST:0}setupLights(wt,Pt){var Ft,Nt,Ot,Bt=0,Xt=0,Zt=0,rn,Gt,nn=this._lights,cn=nn.directional.colors,an=nn.directional.positions,mn=0,En=0;for(Ft=0,Nt=Pt.length;Ft<Nt;Ft++)if(Ot=Pt[Ft],rn=Ot.color,Gt=Ot.intensity,Ot instanceof dt.Light){if(this._direction.getPositionFromMatrix(Ot.matrixWorld),this._vector3.getPositionFromMatrix(Ot.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;an[En]=this._direction.x,an[En+1]=this._direction.y,an[En+2]=this._direction.z,cn[En]=rn.r*Gt,cn[En+1]=rn.g*Gt,cn[En+2]=rn.b*Gt,En+=3,mn++}nn.ambient[0]=Bt,nn.ambient[1]=Xt,nn.ambient[2]=Zt,nn.directional.length=mn}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))($t==null||$t.isContextLost())&&(Tt=new OffscreenCanvas(this._canvas.width,this._canvas.height),$t=Tt.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=Tt,this._gl=$t,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var wt=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(wt[6])}catch(Pt){console.error(Pt)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(wt,Pt,Ft,Nt,Ot,Bt,Xt){var Zt,rn,Gt,nn,cn,an,mn;Pt?(cn=wt.length-1,an=-1,mn=-1):(cn=0,an=wt.length,mn=1);for(var En=cn;En!==an;En+=mn)if(Zt=wt[En],Zt.render){if(rn=Zt.object,Gt=Zt.buffer,nn=Zt[Ft],(Zt.hasAO||this._AOEnabled)&&Zt[Ft+"Shaded"]&&(nn=Zt[Ft+"Shaded"]),!nn)continue;this.setBlending(Xt),this.setDepthTest(nn.depthTest),this.setDepthWrite(nn.depthWrite),this.setPolygonOffset(nn.polygonOffset,nn.polygonOffsetFactor,nn.polygonOffsetUnits);var Cn=rn._modelViewMatrix.isReflected();if(this.setMaterialFaces(nn,Cn),this.renderBuffer(Nt,Ot,Bt,nn,Gt,rn),(this._outlineEnabled||nn.outline)&&!nn.wireframe&&nn.shaderID!=="basic"&&nn.opacity!==0){let Mn=this._outlineMaterial;nn.shaderID=="sphereimposter"?Mn=this._outlineSphereImposterMaterial:nn.shaderID=="stickimposter"&&(Mn=this._outlineStickImposterMaterial),this.renderBuffer(Nt,Ot,Bt,Mn,Gt,rn)}}}renderSprites(wt,Pt,Ft){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(wt,Pt,this._currentWidth,this._currentHeight,Ft),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},"./src/WebGL/SpritePlugin.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{SpritePlugin:()=>at});var st=rt("./src/WebGL/shaders/index.ts");class at{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(yt){this.gl=yt.context,this.renderer=yt,this.precision=yt.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var vt=0;this.sprite.vertices[vt++]=-1,this.sprite.vertices[vt++]=-1,this.sprite.vertices[vt++]=0,this.sprite.vertices[vt++]=0,this.sprite.vertices[vt++]=1,this.sprite.vertices[vt++]=-1,this.sprite.vertices[vt++]=1,this.sprite.vertices[vt++]=0,this.sprite.vertices[vt++]=1,this.sprite.vertices[vt++]=1,this.sprite.vertices[vt++]=1,this.sprite.vertices[vt++]=1,this.sprite.vertices[vt++]=-1,this.sprite.vertices[vt++]=1,this.sprite.vertices[vt++]=0,this.sprite.vertices[vt++]=1,vt=0,this.sprite.faces[vt++]=0,this.sprite.faces[vt++]=1,this.sprite.faces[vt++]=2,this.sprite.faces[vt++]=0,this.sprite.faces[vt++]=2,this.sprite.faces[vt++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(st.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const _t={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),_t.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),_t.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),_t.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),_t.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),_t.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),_t.color=this.gl.getUniformLocation(this.sprite.program,"color"),_t.map=this.gl.getUniformLocation(this.sprite.program,"map"),_t.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),_t.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),_t.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),_t.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),_t.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),_t.fogType=this.gl.getUniformLocation(this.sprite.program,"fogType"),_t.fogDensity=this.gl.getUniformLocation(this.sprite.program,"fogDensity"),_t.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),_t.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),_t.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),_t.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=_t}render(yt,vt,_t,bt,Mt){var Ct,Tt,$t,Rt,Et,wt,Pt,Ft,Nt,Ot;if(!this.gl)throw new Error("WebGLRenderer not initialized");let Bt=[];(Ct=yt==null?void 0:yt.__webglSprites)===null||Ct===void 0||Ct.forEach(qn=>{(Mt&&qn.material.depthTest==!1||!Mt&&qn.material.depthTest)&&Bt.push(qn)});let Xt=Bt.length;if(!Xt)return;const Zt=this.sprite.attributes,rn=this.sprite.uniforms;if(!rn)throw new Error("Uniforms not defined");var Gt=_t*.5,nn=bt*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(Zt.position),this.gl.enableVertexAttribArray(Zt.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(Zt.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(Zt.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(rn.projectionMatrix,!1,vt.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(rn.map,0);var cn=0,an=0,mn=yt.fog;mn?(this.gl.uniform3f(rn.fogColor,mn.color.r,mn.color.g,mn.color.b),this.gl.uniform1f(rn.fogNear,mn.near),this.gl.uniform1f(rn.fogFar,mn.far),this.gl.uniform1i(rn.fogType,1),cn=1,an=1):(this.gl.uniform1i(rn.fogType,0),cn=0,an=0);var En;let Cn,Mn,un,Tn,Pn=[];for(En=0;En<Xt;En++)Cn=Bt[En],Mn=Cn.material,Mn&&(Mn.depthTest==!1&&!Mt||!Cn.visible||Mn.opacity===0||(Mn.useScreenCoordinates?Cn.z=-Cn.position.z:(Cn._modelViewMatrix.multiplyMatrices(vt.matrixWorldInverse,Cn.matrixWorld),Cn.z=-Cn._modelViewMatrix.elements[14])));for(Bt.sort(lt),En=0;En<Xt;En++)if(Cn=Bt[En],Mn=Cn.material,!!Mn&&!(!Cn.visible||Mn.opacity===0)&&Mn.map&&Mn.map.image&&Mn.map.image.width){this.gl.uniform1f((rn==null?void 0:rn.alphaTest)||null,Mn.alphaTest);var dn=Mn.map.image.width,Un=Mn.map.image.height;Pn[0]=dn*this.renderer.devicePixelRatio/_t,Pn[1]=Un*this.renderer.devicePixelRatio/bt,Mn.useScreenCoordinates===!0?(this.gl.uniform1i(rn.useScreenCoordinates,1),this.gl.uniform3f(rn.screenPosition,(Cn.position.x*this.renderer.devicePixelRatio-Gt)/Gt,(nn-Cn.position.y*this.renderer.devicePixelRatio)/nn,Math.max(0,Math.min(1,Cn.position.z)))):(this.gl.uniform1i(rn.useScreenCoordinates,0),this.gl.uniformMatrix4fv(rn.modelViewMatrix,!1,Cn._modelViewMatrix.elements)),yt.fog&&Mn.fog?Tn=an:Tn=0,cn!==Tn&&(this.gl.uniform1i(rn.fogType,Tn),cn=Tn),un=1/(Mn.scaleByViewport?bt:1),Pn[0]*=un*Cn.scale.x,Pn[1]*=un*Cn.scale.y;let qn=(Tt=Mn==null?void 0:Mn.alignment)===null||Tt===void 0?void 0:Tt.x,In=($t=Mn==null?void 0:Mn.alignment)===null||$t===void 0?void 0:$t.y;Mn.screenOffset&&(qn=(qn||0)+2*Mn.screenOffset.x/dn,In=(In||0)+2*Mn.screenOffset.y/Un),this.gl.uniform2f(rn.uvScale,((Rt=Mn==null?void 0:Mn.uvScale)===null||Rt===void 0?void 0:Rt.x)||1,((Et=Mn==null?void 0:Mn.uvScale)===null||Et===void 0?void 0:Et.y)||1),this.gl.uniform2f(rn.uvOffset,((wt=Mn==null?void 0:Mn.uvOffset)===null||wt===void 0?void 0:wt.x)||0,((Pt=Mn==null?void 0:Mn.uvOffset)===null||Pt===void 0?void 0:Pt.y)||0),this.gl.uniform2f(rn.alignment,qn||0,In||0),this.gl.uniform1f(rn.opacity,Mn.opacity),this.gl.uniform3f(rn.color,((Ft=Mn==null?void 0:Mn.color)===null||Ft===void 0?void 0:Ft.r)||0,((Nt=Mn==null?void 0:Mn.color)===null||Nt===void 0?void 0:Nt.g)||0,((Ot=Mn==null?void 0:Mn.color)===null||Ot===void 0?void 0:Ot.b)||0),this.gl.uniform1f(rn.rotation,Cn.rotation),this.gl.uniform2fv(rn.scale,Pn),this.renderer.setDepthTest(Mn.depthTest),this.renderer.setDepthWrite(Mn.depthWrite),this.renderer.setTexture(Mn.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(yt,vt){if(!this.gl)throw new Error("WebGL Rendering context not found");var _t=this.gl.createProgram();if(!_t)throw new Error("Error creating webgl program");var bt=this.gl.createShader(this.gl.FRAGMENT_SHADER),Mt=this.gl.createShader(this.gl.VERTEX_SHADER);if(!bt)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!Mt)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var Ct="precision "+vt+` float;
`;if(this.gl.shaderSource(bt,Ct+yt.fragmentShader),this.gl.shaderSource(Mt,Ct+yt.vertexShader),this.gl.compileShader(bt),this.gl.compileShader(Mt),!this.gl.getShaderParameter(bt,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(Mt,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(bt)} 
      ${this.gl.getShaderInfoLog(Mt)}`);return this.gl.attachShader(_t,bt),this.gl.attachShader(_t,Mt),this.gl.linkProgram(_t),this.gl.getProgramParameter(_t,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),_t}}function lt(dt,yt){return dt.z!==yt.z?yt.z-dt.z:yt.id-dt.id}},"./src/WebGL/constants/Coloring.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Coloring:()=>st});var st;(function(at){at[at.NoColors=0]="NoColors",at[at.FaceColors=1]="FaceColors",at[at.VertexColors=2]="VertexColors"})(st||(st={}))},"./src/WebGL/constants/Shading.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Shading:()=>st});var st;(function(at){at[at.NoShading=0]="NoShading",at[at.FlatShading=1]="FlatShading",at[at.SmoothShading=2]="SmoothShading"})(st||(st={}))},"./src/WebGL/constants/Sides.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{BackSide:()=>at,DoubleSide:()=>lt,FrontSide:()=>st});const st=0,at=1,lt=2},"./src/WebGL/constants/SpriteAlignment.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{SpriteAlignment:()=>at});var st=rt("./src/WebGL/math/index.ts");const at={topLeft:new st.Vector2(1,-1),topCenter:new st.Vector2(0,-1),topRight:new st.Vector2(-1,-1),centerLeft:new st.Vector2(1,0),center:new st.Vector2(0,0),centerRight:new st.Vector2(-1,0),bottomLeft:new st.Vector2(1,1),bottomCenter:new st.Vector2(0,1),bottomRight:new st.Vector2(-1,1)}},"./src/WebGL/constants/TextureConstants.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{ClampToEdgeWrapping:()=>st,FloatType:()=>vt,LinearFilter:()=>at,LinearMipMapLinearFilter:()=>dt,NearestFilter:()=>lt,R32Format:()=>Mt,RFormat:()=>bt,RGBAFormat:()=>_t,UnsignedByteType:()=>yt});const st=1001,at=1006,lt=1007,dt=1008,yt=1009,vt=1010,_t=1021,bt=1022,Mt=1023},"./src/WebGL/constants/TextureOperations.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{TextureOperations:()=>st});var st;(function(at){at[at.MultiplyOperation=0]="MultiplyOperation",at[at.MixOperation=1]="MixOperation",at[at.AddOperation=2]="AddOperation"})(st||(st={}))},"./src/WebGL/constants/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{BackSide:()=>at.BackSide,ClampToEdgeWrapping:()=>yt.ClampToEdgeWrapping,Coloring:()=>st.Coloring,DoubleSide:()=>at.DoubleSide,FloatType:()=>yt.FloatType,FrontSide:()=>at.FrontSide,LinearFilter:()=>yt.LinearFilter,LinearMipMapLinearFilter:()=>yt.LinearMipMapLinearFilter,NearestFilter:()=>yt.NearestFilter,R32Format:()=>yt.R32Format,RFormat:()=>yt.RFormat,RGBAFormat:()=>yt.RGBAFormat,Shading:()=>lt.Shading,SpriteAlignment:()=>dt.SpriteAlignment,TextureOperations:()=>vt.TextureOperations,UnsignedByteType:()=>yt.UnsignedByteType});var st=rt("./src/WebGL/constants/Coloring.ts"),at=rt("./src/WebGL/constants/Sides.ts"),lt=rt("./src/WebGL/constants/Shading.ts"),dt=rt("./src/WebGL/constants/SpriteAlignment.ts"),yt=rt("./src/WebGL/constants/TextureConstants.ts"),vt=rt("./src/WebGL/constants/TextureOperations.ts")},"./src/WebGL/core/EventDispatcher.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{EventDispatcher:()=>st});class st{constructor(){this.listeners={}}dispatchEvent(lt){var dt=this.listeners[lt.type];if(dt!==void 0){lt.target=this;for(var yt=0,vt=dt.length;yt<vt;yt++)dt[yt].call(this,lt)}}removeEventListener(lt,dt){if(!dt)this.listeners[lt]=[];else{var yt=this.listeners[lt].indexOf(dt);yt!==-1&&this.listeners[lt].splice(yt,1)}}addEventListener(lt,dt){this.listeners[lt]===void 0&&(this.listeners[lt]=[]),this.listeners[lt].indexOf(dt)===-1&&this.listeners[lt].push(dt)}}},"./src/WebGL/core/Geometry.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Geometry:()=>_t,GeometryGroup:()=>vt,GeometryIDCount:()=>bt});var st=rt("./src/WebGL/materials/LineBasicMaterial.ts"),at=rt("./src/WebGL/core/EventDispatcher.ts"),lt=rt("./src/WebGL/math/index.ts"),dt=rt("./src/colors.ts");const yt=65535;class vt{constructor(Ct=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=Ct}setColor(Ct){var Tt=this.vertexArray,$t=this.colorArray;if(!Tt)throw new Error("vertex array not initialized");if(!$t)throw new Error("color array not initialized");let Rt=dt.CC.color(Ct);for(var Et=0;Et<Tt.length;Et+=3)$t[Et]=Rt.r,$t[Et+1]=Rt.g,$t[Et+2]=Rt.b}setColors(Ct){var Tt=this.vertexArray,$t=this.colorArray;if(!Tt)throw new Error("vertex array not initialized");if(!$t)throw new Error("color array not initialized");if(Tt.length!=$t.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var Rt=0;Rt<Tt.length;Rt+=3){var Et=Ct(Tt[Rt],Tt[Rt+1],Tt[Rt+2]);Et instanceof dt.Color||(Et=dt.CC.color(Et)),$t[Rt]=Et.r,$t[Rt+1]=Et.g,$t[Rt+2]=Et.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var Ct=new lt.Vector3,Tt,$t,Rt,Et,wt=0;wt<this.vertices;++wt)Tt=wt*3,$t=this.vertexArray[Tt],Rt=this.vertexArray[Tt+1],Et=this.vertexArray[Tt+2],Ct.x+=$t,Ct.y+=Rt,Ct.z+=Et;return Ct.divideScalar(this.vertices),Ct}setNormals(){var Ct=this.faceArray,Tt=this.vertexArray,$t=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!Ct)throw new Error("face array not initialized");if(!Tt)throw new Error("vertex array not initialized");if(!$t)throw new Error("normal array not initialized");for(var Rt,Et,wt,Pt,Ft,Nt,Ot,Bt=0;Bt<Ct.length/3;++Bt)Rt=Ct[Bt*3]*3,Et=Ct[Bt*3+1]*3,wt=Ct[Bt*3+2]*3,Pt=new lt.Vector3(Tt[Rt],Tt[Rt+1],Tt[Rt+2]),Ft=new lt.Vector3(Tt[Et],Tt[Et+1],Tt[Et+2]),Nt=new lt.Vector3(Tt[wt],Tt[wt+1],Tt[wt+2]),Pt.subVectors(Pt,Ft),Nt.subVectors(Nt,Ft),Nt.cross(Pt),Ot=Nt,Ot.normalize(),$t[Rt]+=Ot.x,$t[Et]+=Ot.x,$t[wt]+=Ot.x,$t[Rt+1]+=Ot.y,$t[Et+1]+=Ot.y,$t[wt+1]+=Ot.y,$t[Rt+2]+=Ot.z,$t[Et+2]+=Ot.z,$t[wt+2]+=Ot.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var Ct=this.faceArray,Tt=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!Ct)throw new Error("face array not initialized");for(var $t=0;$t<this.faceidx/3;++$t){var Rt=$t*3,Et=Rt*2,wt=Ct[Rt],Pt=Ct[Rt+1],Ft=Ct[Rt+2];Tt[Et]=wt,Tt[Et+1]=Pt,Tt[Et+2]=wt,Tt[Et+3]=Ft,Tt[Et+4]=Pt,Tt[Et+5]=Ft}}}vrml(Ct,Tt){var $t,Rt,Et,wt,Pt,Ft,Nt,Ot,Bt,Xt,Zt,rn,Gt,nn,cn,an,mn,En,Cn="";if(Cn+=Ct+`Shape {
`+Ct+` appearance Appearance {
`+Ct+`  material Material {
`+Ct+"   diffuseColor "+(($t=Tt==null?void 0:Tt.color)===null||$t===void 0?void 0:$t.r)+" "+((Rt=Tt==null?void 0:Tt.color)===null||Rt===void 0?void 0:Rt.g)+" "+((Et=Tt==null?void 0:Tt.color)===null||Et===void 0?void 0:Et.b)+`
`,Tt.wireframe&&this.colorArray){let un=this.colorArray;Cn+=Ct+"    emissiveColor "+un[0]+" "+un[1]+" "+un[2]+`
`}Tt!=null&&Tt.transparent&&(Cn+=Ct+"   transparency "+(1-Tt.opacity)+`
`),Cn+=Ct+`  }
`,Cn+=Ct+` }
`;var Mn=Ct;if(Ct+=" ",Tt instanceof st.LineBasicMaterial||Tt.wireframe){Cn+=Ct+`geometry IndexedLineSet {
`+Ct+` colorPerVertex TRUE
`+Ct+` coord Coordinate {
`+Ct+`  point [
`;let un,Tn,Pn;for(let dn=0;dn<this.vertices;++dn){let Un=dn*3;un=(wt=this.vertexArray)===null||wt===void 0?void 0:wt[Un],Tn=(Pt=this.vertexArray)===null||Pt===void 0?void 0:Pt[Un+1],Pn=(Ft=this.vertexArray)===null||Ft===void 0?void 0:Ft[Un+2],Cn+=Ct+"   "+un+" "+Tn+" "+Pn+`,
`}if(Cn+=Ct+`  ]
`,Cn+=Ct+` }
`,this.colorArray&&!Tt.wireframe){Cn+=Ct+` color Color {
`+Ct+`  color [
`;for(let dn=0;dn<this.vertices;++dn){let Un=dn*3;un=this.colorArray[Un],Tn=this.colorArray[Un+1],Pn=this.colorArray[Un+2],Cn+=Ct+"   "+un+" "+Tn+" "+Pn+`,
`}Cn+=Ct+`  ]
`,Cn+=Ct+` }
`}if(Cn+=Ct+` coordIndex [
`,Tt.wireframe&&this.faceArray)for(let dn=0;dn<this.faceidx;dn+=3)un=(Nt=this.faceArray)===null||Nt===void 0?void 0:Nt[dn],Tn=(Ot=this.faceArray)===null||Ot===void 0?void 0:Ot[dn+1],Pn=(Bt=this.faceArray)===null||Bt===void 0?void 0:Bt[dn+2],Cn+=Ct+"  "+un+", "+Tn+", "+Pn+`, -1,
`;else for(let dn=0;dn<this.vertices-1;dn+=2)Cn+=Ct+"  "+dn+", "+(dn+1)+`, -1,
`;Cn+=Ct+` ]
`,Cn+=Ct+`}
`}else{Cn+=Ct+`geometry IndexedFaceSet {
`+Ct+` colorPerVertex TRUE
`+Ct+` normalPerVertex TRUE
`+Ct+` solid FALSE
`,Cn+=Ct+` coord Coordinate {
`+Ct+`  point [
`;let un,Tn,Pn;for(let dn=0;dn<this.vertices;++dn){let Un=dn*3;un=(Xt=this.vertexArray)===null||Xt===void 0?void 0:Xt[Un],Tn=(Zt=this.vertexArray)===null||Zt===void 0?void 0:Zt[Un+1],Pn=(rn=this.vertexArray)===null||rn===void 0?void 0:rn[Un+2],Cn+=Ct+"   "+un+" "+Tn+" "+Pn+`,
`}Cn+=Ct+`  ]
`,Cn+=Ct+` }
`,Cn+=Ct+` normal Normal {
`+Ct+`  vector [
`;for(let dn=0;dn<this.vertices;++dn){let Un=dn*3;un=(Gt=this.normalArray)===null||Gt===void 0?void 0:Gt[Un],Tn=(nn=this.normalArray)===null||nn===void 0?void 0:nn[Un+1],Pn=(cn=this.normalArray)===null||cn===void 0?void 0:cn[Un+2],Cn+=Ct+"   "+un+" "+Tn+" "+Pn+`,
`}if(Cn+=Ct+`  ]
`,Cn+=Ct+` }
`,this.colorArray){Cn+=Ct+` color Color {
`+Ct+`  color [
`;for(let dn=0;dn<this.vertices;++dn){let Un=dn*3;un=this.colorArray[Un],Tn=this.colorArray[Un+1],Pn=this.colorArray[Un+2],Cn+=Ct+"   "+un+" "+Tn+" "+Pn+`,
`}Cn+=Ct+`  ]
`,Cn+=Ct+` }
`}Cn+=Ct+` coordIndex [
`;for(let dn=0;dn<this.faceidx;dn+=3)un=(an=this.faceArray)===null||an===void 0?void 0:an[dn],Tn=(mn=this.faceArray)===null||mn===void 0?void 0:mn[dn+1],Pn=(En=this.faceArray)===null||En===void 0?void 0:En[dn+2],Cn+=Ct+"  "+un+", "+Tn+", "+Pn+`, -1,
`;Cn+=Ct+` ]
`,Cn+=Ct+`}
`}return Cn+=Mn+"}",Cn}truncateArrayBuffers(Ct=!0,Tt=!1){var $t=this.vertexArray,Rt=this.colorArray,Et=this.normalArray,wt=this.faceArray,Pt=this.lineArray,Ft=this.radiusArray;this.vertexArray=($t==null?void 0:$t.subarray(0,this.vertices*3))||null,this.colorArray=(Rt==null?void 0:Rt.subarray(0,this.vertices*3))||null,Ct?(this.normalArray=(Et==null?void 0:Et.subarray(0,this.vertices*3))||null,this.faceArray=(wt==null?void 0:wt.subarray(0,this.faceidx))||null,this.lineidx>0?this.lineArray=(Pt==null?void 0:Pt.subarray(0,this.lineidx))||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),Ft&&(this.radiusArray=Ft.subarray(0,this.vertices)),Tt&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class _t extends at.EventDispatcher{constructor(Ct=!1,Tt=!1,$t=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=bt++,this.mesh=Ct,this.radii=Tt,this.offset=$t}updateGeoGroup(Ct=0){var Tt,$t=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!$t||$t.vertices+Ct>(((Tt=$t==null?void 0:$t.vertexArray)===null||Tt===void 0?void 0:Tt.length)||0)/3)&&($t=this.addGeoGroup()),$t}vrml(Ct,Tt){for(var $t="",Rt=this.geometryGroups.length,Et=0;Et<Rt;Et++){var wt=this.geometryGroups[Et];$t+=wt.vrml(Ct,Tt)+`,
`}return $t}addGeoGroup(){var Ct=new vt(this.geometryGroups.length);return this.geometryGroups.push(Ct),this.groups=this.geometryGroups.length,Ct.vertexArray=new Float32Array(yt*3),Ct.colorArray=new Float32Array(yt*3),this.mesh&&(Ct.normalArray=new Float32Array(yt*3),Ct.faceArray=new Uint16Array(yt*6),Ct.lineArray=new Uint16Array(yt*6)),this.radii&&(Ct.radiusArray=new Float32Array(yt)),Ct.useOffset=this.offset,Ct}setUpNormals(...Ct){for(var Tt=0;Tt<this.groups;Tt++){var $t=this.geometryGroups[Tt];$t.setNormals(...Ct)}}setColors(...Ct){for(var Tt=this.geometryGroups.length,$t=0;$t<Tt;$t++){var Rt=this.geometryGroups[$t];Rt.setColors(...Ct)}}setColor(...Ct){for(var Tt=this.geometryGroups.length,$t=0;$t<Tt;$t++){var Rt=this.geometryGroups[$t];Rt.setColor(...Ct)}}setUpWireframe(...Ct){for(var Tt=0;Tt<this.groups;Tt++){var $t=this.geometryGroups[Tt];$t.setLineIndices(...Ct)}}initTypedArrays(){for(var Ct=0;Ct<this.groups;Ct++){var Tt=this.geometryGroups[Ct];Tt.__inittedArrays!==!0&&Tt.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var Ct=0,Tt=0;Tt<this.groups;Tt++)Ct+=this.geometryGroups[Tt].vertices;return Ct}}let bt=0},"./src/WebGL/core/Object3D.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Light:()=>vt,Object3D:()=>dt,Object3DIDCount:()=>lt,Scene:()=>yt});var st=rt("./src/WebGL/math/index.ts"),at=rt("./src/colors.ts");let lt=0;class dt{constructor(){this.id=lt++,this.name="",this.children=[],this.position=new st.Vector3,this.rotation=new st.Vector3,this.matrix=new st.Matrix4,this.matrixWorld=new st.Matrix4,this.quaternion=new st.Quaternion,this.eulerOrder="XYZ",this.up=new st.Vector3(0,1,0),this.scale=new st.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(bt){this.matrix.lookAt(bt,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof st.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(bt){if(bt===this){console.error("Can't add $3Dmol.Object3D to itself");return}bt.parent=this,this.children.push(bt);for(var Mt=this;Mt.parent!==void 0;)Mt=Mt.parent;Mt!==void 0&&Mt instanceof yt&&Mt.__addObject(bt)}remove(bt){var Mt=this.children.indexOf(bt);if(Mt!==-1){bt.parent=void 0,this.children.splice(Mt,1);for(var Ct=this;Ct.parent!==void 0;)Ct=Ct.parent;Ct!==void 0&&Ct instanceof yt&&Ct.__removeObject(bt)}}vrml(bt){bt||(bt=" ");var Mt=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),Ct=0,Tt=0,$t=0;if(Mt!=0){let wt=Math.sin(Mt/2);Ct=this.quaternion.x/wt,Tt=this.quaternion.y/wt,$t=this.quaternion.z/wt}var Rt=bt+`Transform {
`+bt+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+bt+" rotation "+Ct+" "+Tt+" "+$t+" "+Mt+`
`+bt+` children [
`;this.geometry&&(Rt+=this.geometry.vrml(bt,this.material));for(var Et=0;Et<this.children.length;Et++)Rt+=this.children[Et].vrml(bt+" ")+`,
`;return Rt+=` ]
`,Rt+="}",Rt}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof st.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(bt){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||bt===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var Mt=0;Mt<this.children.length;Mt++)this.children[Mt].updateMatrixWorld(!0)}clone(bt){bt===void 0&&(bt=new dt),bt.name=this.name,bt.up.copy(this.up),bt.position.copy(this.position),bt.rotation instanceof st.Vector3&&this.rotation instanceof st.Vector3?bt.rotation.copy(this.rotation):bt.rotation=this.rotation,bt.eulerOrder=this.eulerOrder,bt.scale.copy(this.scale),bt.rotationAutoUpdate=this.rotationAutoUpdate,bt.matrix.copy(this.matrix),bt.matrixWorld.copy(this.matrixWorld),bt.quaternion.copy(this.quaternion),bt.matrixAutoUpdate=this.matrixAutoUpdate,bt.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,bt.useQuaternion=this.useQuaternion,bt.visible=this.visible;for(var Mt=0;Mt<this.children.length;Mt++){var Ct=this.children[Mt];bt.add(Ct.clone())}return bt}setVisible(bt){this.visible=bt;for(var Mt=0;Mt<this.children.length;Mt++){var Ct=this.children[Mt];Ct.setVisible(bt)}}}class yt extends dt{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(bt){if(bt instanceof vt)this.__lights.indexOf(bt)===-1&&this.__lights.push(bt),bt.target&&bt.target.parent===void 0&&this.add(bt.target);else if(this.__objects.indexOf(bt)===-1){this.__objects.push(bt),this.__objectsAdded.push(bt);var Mt=this.__objectsRemoved.indexOf(bt);Mt!==-1&&this.__objectsRemoved.splice(Mt,1)}for(var Ct=0;Ct<bt.children.length;Ct++)this.__addObject(bt.children[Ct])}__removeObject(bt){var Mt;if(bt instanceof vt)Mt=this.__lights.indexOf(bt),Mt!==-1&&this.__lights.splice(Mt,1);else if(Mt=this.__objects.indexOf(bt),Mt!==-1){this.__objects.splice(Mt,1),this.__objectsRemoved.push(bt);var Ct=this.__objectsAdded.indexOf(bt);Ct!==-1&&this.__objectsAdded.splice(Mt,1)}for(var Tt=0;Tt<bt.children.length;Tt++)this.__removeObject(bt.children[Tt])}}class vt extends dt{constructor(bt,Mt=1){super(),this.position=new st.Vector3(0,1,0),this.target=new dt,this.castShadow=!1,this.onlyShadow=!1,this.color=new at.Color(bt),this.intensity=Mt}}},"./src/WebGL/core/Projector.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Projector:()=>lt});var st=rt("./src/WebGL/math/index.ts");const at=new st.Matrix4;class lt{static unprojectVector(yt,vt){return vt.projectionMatrixInverse.getInverse(vt.projectionMatrix),at.multiplyMatrices(vt.matrixWorld,vt.projectionMatrixInverse),yt.applyProjection(at)}static projectVector(yt,vt){return vt.matrixWorldInverse.getInverse(vt.matrixWorld),at.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),yt.applyProjection(at)}projectVector(yt,vt){return lt.projectVector(yt,vt)}unprojectVector(yt,vt){return lt.unprojectVector(yt,vt)}}},"./src/WebGL/core/Raycaster.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Raycaster:()=>yt,intersectObject:()=>wt});var st=rt("./src/WebGL/math/index.ts"),at=rt("./src/WebGL/shapes/index.ts");const lt=(Pt,Ft)=>Pt.distance-Ft.distance,dt=new st.Matrix4;class yt{constructor(Ft,Nt,Ot,Bt){this.precision=1e-4,this.linePrecision=.2,this.ray=new st.Ray(Ft,Nt),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=Bt||0,this.far=Ot||1/0}set(Ft,Nt){this.ray.set(Ft,Nt)}setFromCamera(Ft,Nt){Nt.ortho?(this.ray.origin.set(Ft.x,Ft.y,(Nt.near+Nt.far)/(Nt.near-Nt.far)).unproject(Nt),this.ray.direction.set(0,0,-1).transformDirection(Nt.matrixWorld)):(this.ray.origin.setFromMatrixPosition(Nt.matrixWorld),this.ray.direction.set(Ft.x,Ft.y,Ft.z),Nt.projectionMatrixInverse.getInverse(Nt.projectionMatrix),dt.multiplyMatrices(Nt.matrixWorld,Nt.projectionMatrixInverse),this.ray.direction.applyProjection(dt),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(Ft,Nt){for(var Ot=[],Bt=0,Xt=Nt.length;Bt<Xt;Bt++)wt(Ft,Nt[Bt],this,Ot);return Ot.sort(lt),Ot}}const vt=Pt=>Math.min(Math.max(Pt,-1),1);var _t=new at.Sphere,bt=new at.Cylinder,Mt=new at.Triangle,Ct=new st.Vector3,Tt=new st.Vector3,$t=new st.Vector3,Rt=new st.Vector3,Et=new st.Vector3;function wt(Pt,Ft,Nt,Ot){if(Et.getPositionFromMatrix(Pt.matrixWorld),Ft.intersectionShape===void 0)return Ot;var Bt=Ft.intersectionShape,Xt=Nt.linePrecision;Xt*=Pt.matrixWorld.getMaxScaleOnAxis();var Zt=Xt*Xt;if(Ft.boundingSphere!==void 0&&Ft.boundingSphere instanceof at.Sphere&&(_t.copy(Ft.boundingSphere),_t.applyMatrix4(Pt.matrixWorld),!Nt.ray.isIntersectionSphere(_t)))return Ot;var rn,Gt,nn,cn,an,mn,En,Cn,Mn,un,Tn,Pn,dn,Un;for(rn=0,Gt=Bt.triangle.length;rn<Gt;rn++)if(Bt.triangle[rn]instanceof at.Triangle){if(Mt.copy(Bt.triangle[rn]),Mt.applyMatrix4(Pt.matrixWorld),nn=Mt.getNormal(),cn=Nt.ray.direction.dot(nn),cn>=0||(Ct.subVectors(Mt.a,Nt.ray.origin),En=nn.dot(Ct)/cn,En<0))continue;Tt.copy(Nt.ray.direction).multiplyScalar(En).add(Nt.ray.origin),Tt.sub(Mt.a),$t.copy(Mt.b).sub(Mt.a),Rt.copy(Mt.c).sub(Mt.a);var qn=$t.dot(Rt),In=$t.lengthSq(),Wn=Rt.lengthSq();if(Pn=(In*Tt.dot(Rt)-qn*Tt.dot($t))/(In*Wn-qn*qn),Pn<0||Pn>1||(Tn=(Tt.dot($t)-Pn*qn)/In,Tn<0||Tn>1||Tn+Pn>1))continue;Ot.push({clickable:Ft,distance:En})}for(rn=0,Gt=Bt.cylinder.length;rn<Gt;rn++)if(Bt.cylinder[rn]instanceof at.Cylinder){if(bt.copy(Bt.cylinder[rn]),bt.applyMatrix4(Pt.matrixWorld),Ct.subVectors(bt.c1,Nt.ray.origin),an=Ct.dot(bt.direction),mn=Ct.dot(Nt.ray.direction),cn=vt(Nt.ray.direction.dot(bt.direction)),Mn=1-cn*cn,Mn===0)continue;dn=(cn*mn-an)/Mn,Un=(mn-cn*an)/Mn,Tt.copy(bt.direction).multiplyScalar(dn).add(bt.c1),$t.copy(Nt.ray.direction).multiplyScalar(Un).add(Nt.ray.origin),Cn=Rt.subVectors(Tt,$t).lengthSq();var ar=bt.radius*bt.radius;if(Cn<=ar){if(un=(cn*an-mn)*(cn*an-mn)-Mn*(Ct.lengthSq()-an*an-ar),un<=0?Pn=En=Math.sqrt(Cn):Pn=En=(mn-cn*an-Math.sqrt(un))/Mn,Tn=cn*Pn-an,Tn<0||Tn*Tn>bt.lengthSq()||Pn<0)continue;Ot.push({clickable:Ft,distance:En})}}for(rn=0,Gt=Bt.line.length;rn<Gt;rn+=2){Tt.copy(Bt.line[rn]),Tt.applyMatrix4(Pt.matrixWorld),$t.copy(Bt.line[rn+1]),$t.applyMatrix4(Pt.matrixWorld),Rt.subVectors($t,Tt);var fr=Rt.lengthSq();Rt.normalize(),Ct.subVectors(Tt,Nt.ray.origin);var mr=Ct.dot(Rt);mn=Ct.dot(Nt.ray.direction),cn=vt(Nt.ray.direction.dot(Rt)),Mn=1-cn*cn,Mn!==0&&(dn=(cn*mn-mr)/Mn,Un=(mn-cn*mr)/Mn,Tt.add(Rt.multiplyScalar(dn)),$t.copy(Nt.ray.direction).multiplyScalar(Un).add(Nt.ray.origin),Cn=Rt.subVectors($t,Tt).lengthSq(),Cn<Zt&&dn*dn<fr&&Ot.push({clickable:Ft,distance:Un}))}for(rn=0,Gt=Bt.sphere.length;rn<Gt;rn++)if(Bt.sphere[rn]instanceof at.Sphere&&(_t.copy(Bt.sphere[rn]),_t.applyMatrix4(Pt.matrixWorld),Nt.ray.isIntersectionSphere(_t))){Tt.subVectors(_t.center,Nt.ray.origin);var vr=Tt.dot(Nt.ray.direction);if(un=vr*vr-(Tt.lengthSq()-_t.radius*_t.radius),vr<0)return Ot;un<=0?En=vr:En=vr-Math.sqrt(un),Ot.push({clickable:Ft,distance:En})}return Ot}},"./src/WebGL/core/Texture.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Texture:()=>yt,TextureIdCount:()=>vt});var st=rt("./src/WebGL/constants/TextureConstants.ts"),at=rt("./src/WebGL/math/index.ts"),lt=rt("./src/WebGL/core/EventDispatcher.ts"),dt=rt("./src/WebGL/core/UVMapping.ts");class yt extends lt.EventDispatcher{constructor(bt,Mt){super(),this.id=vt++,this.name="",this.image=bt,this.mapping=new dt.UVMapping,this.wrapS=st.ClampToEdgeWrapping,this.wrapT=st.ClampToEdgeWrapping,this.anisotropy=1,Mt?(this.format=st.RFormat,this.type=st.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=st.NearestFilter,this.minFilter=st.NearestFilter):(this.format=st.RGBAFormat,this.type=st.UnsignedByteType,this.offset=new at.Vector2(0,0),this.repeat=new at.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=st.LinearFilter,this.minFilter=st.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(bt=new yt){return bt.image=this.image,bt.mapping=this.mapping,bt.wrapS=this.wrapS,bt.wrapT=this.wrapT,bt.magFilter=this.magFilter,bt.minFilter=this.minFilter,bt.anisotropy=this.anisotropy,bt.format=this.format,bt.type=this.type,bt.offset.copy(this.offset),bt.repeat.copy(this.repeat),bt.premultiplyAlpha=this.premultiplyAlpha,bt.flipY=this.flipY,bt.unpackAlignment=this.unpackAlignment,bt}dispose(){this.dispatchEvent({type:"dispose"})}}let vt=0},"./src/WebGL/core/UVMapping.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{UVMapping:()=>st});class st{}},"./src/WebGL/core/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{EventDispatcher:()=>st.EventDispatcher,Geometry:()=>at.Geometry,GeometryGroup:()=>at.GeometryGroup,GeometryIDCount:()=>at.GeometryIDCount,Light:()=>lt.Light,Object3D:()=>lt.Object3D,Object3DIDCount:()=>lt.Object3DIDCount,Projector:()=>dt.Projector,Raycaster:()=>yt.Raycaster,Scene:()=>lt.Scene,Texture:()=>vt.Texture,TextureIdCount:()=>vt.TextureIdCount,UVMapping:()=>_t.UVMapping,intersectObject:()=>yt.intersectObject});var st=rt("./src/WebGL/core/EventDispatcher.ts"),at=rt("./src/WebGL/core/Geometry.ts"),lt=rt("./src/WebGL/core/Object3D.ts"),dt=rt("./src/WebGL/core/Projector.ts"),yt=rt("./src/WebGL/core/Raycaster.ts"),vt=rt("./src/WebGL/core/Texture.ts"),_t=rt("./src/WebGL/core/UVMapping.ts")},"./src/WebGL/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{BackSide:()=>st.BackSide,Camera:()=>bt.Camera,ClampToEdgeWrapping:()=>st.ClampToEdgeWrapping,Coloring:()=>st.Coloring,Cylinder:()=>_t.Cylinder,DoubleSide:()=>st.DoubleSide,EventDispatcher:()=>at.EventDispatcher,FloatType:()=>st.FloatType,Fog:()=>Mt.Fog,FrontSide:()=>st.FrontSide,Geometry:()=>at.Geometry,GeometryGroup:()=>at.GeometryGroup,GeometryIDCount:()=>at.GeometryIDCount,ImposterMaterial:()=>lt.ImposterMaterial,InstancedMaterial:()=>lt.InstancedMaterial,Light:()=>at.Light,Line:()=>yt.Line,LineBasicMaterial:()=>lt.LineBasicMaterial,LineStyle:()=>yt.LineStyle,LinearFilter:()=>st.LinearFilter,LinearMipMapLinearFilter:()=>st.LinearMipMapLinearFilter,Material:()=>lt.Material,MaterialIdCount:()=>lt.MaterialIdCount,Matrix3:()=>dt.Matrix3,Matrix4:()=>dt.Matrix4,Mesh:()=>yt.Mesh,MeshDoubleLambertMaterial:()=>lt.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>lt.MeshLambertMaterial,MeshOutlineMaterial:()=>lt.MeshOutlineMaterial,NearestFilter:()=>st.NearestFilter,Object3D:()=>at.Object3D,Object3DIDCount:()=>at.Object3DIDCount,Projector:()=>at.Projector,Quaternion:()=>dt.Quaternion,R32Format:()=>st.R32Format,RFormat:()=>st.RFormat,RGBAFormat:()=>st.RGBAFormat,Ray:()=>dt.Ray,Raycaster:()=>at.Raycaster,Renderer:()=>Ct.Renderer,Scene:()=>at.Scene,ShaderLib:()=>vt.ShaderLib,ShaderUtils:()=>vt.ShaderUtils,Shading:()=>st.Shading,Sphere:()=>_t.Sphere,SphereImposterMaterial:()=>lt.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>lt.SphereImposterOutlineMaterial,Sprite:()=>yt.Sprite,SpriteAlignment:()=>st.SpriteAlignment,SpriteMaterial:()=>lt.SpriteMaterial,SpritePlugin:()=>Tt.SpritePlugin,StickImposterMaterial:()=>lt.StickImposterMaterial,StickImposterOutlineMaterial:()=>lt.StickImposterOutlineMaterial,Texture:()=>at.Texture,TextureIdCount:()=>at.TextureIdCount,TextureOperations:()=>st.TextureOperations,Triangle:()=>_t.Triangle,UVMapping:()=>at.UVMapping,UnsignedByteType:()=>st.UnsignedByteType,Vector2:()=>dt.Vector2,Vector3:()=>dt.Vector3,VolumetricMaterial:()=>lt.VolumetricMaterial,basic:()=>vt.basic,clamp:()=>dt.clamp,clone:()=>vt.clone,conversionMatrix3:()=>dt.conversionMatrix3,degToRad:()=>dt.degToRad,instanced:()=>vt.instanced,intersectObject:()=>at.intersectObject,lambert:()=>vt.lambert,lambertdouble:()=>vt.lambertdouble,outline:()=>vt.outline,screen:()=>vt.screen,screenaa:()=>vt.screenaa,sphereimposter:()=>vt.sphereimposter,sphereimposteroutline:()=>vt.sphereimposteroutline,sprite:()=>vt.sprite,stickimposter:()=>vt.stickimposter,stickimposteroutline:()=>vt.stickimposteroutline,volumetric:()=>vt.volumetric});var st=rt("./src/WebGL/constants/index.ts"),at=rt("./src/WebGL/core/index.ts"),lt=rt("./src/WebGL/materials/index.ts"),dt=rt("./src/WebGL/math/index.ts"),yt=rt("./src/WebGL/objects/index.ts"),vt=rt("./src/WebGL/shaders/index.ts"),_t=rt("./src/WebGL/shapes/index.ts"),bt=rt("./src/WebGL/Camera.ts"),Mt=rt("./src/WebGL/Fog.ts"),Ct=rt("./src/WebGL/Renderer.ts"),Tt=rt("./src/WebGL/SpritePlugin.ts")},"./src/WebGL/materials/ImposterMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{ImposterMaterial:()=>vt});var st=rt("./src/WebGL/constants/Coloring.ts"),at=rt("./src/WebGL/constants/Shading.ts"),lt=rt("./src/colors.ts"),dt=rt("./src/WebGL/math/index.ts"),yt=rt("./src/WebGL/materials/Material.ts");class vt extends yt.Material{constructor(bt){super(),this.color=new lt.Color(16777215),this.ambient=new lt.Color(1048575),this.emissive=new lt.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new dt.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=at.Shading.SmoothShading,this.shaderID=null,this.vertexColors=st.Coloring.NoColors,this.skinning=!1,this.setValues(bt)}clone(bt=new vt){return super.clone.call(this,bt),bt.color.copy(this.color),bt.ambient.copy(this.ambient),bt.emissive.copy(this.emissive),bt.wrapAround=this.wrapAround,bt.wrapRGB.copy(this.wrapRGB),bt.map=this.map,bt.lightMap=this.lightMap,bt.specularMap=this.specularMap,bt.envMap=this.envMap,bt.combine=this.combine,bt.reflectivity=this.reflectivity,bt.refractionRatio=this.refractionRatio,bt.fog=this.fog,bt.shading=this.shading,bt.shaderID=this.shaderID,bt.vertexColors=this.vertexColors,bt.skinning=this.skinning,bt.morphTargets=this.morphTargets,bt.morphNormals=this.morphNormals,bt}}},"./src/WebGL/materials/InstancedMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{InstancedMaterial:()=>vt});var st=rt("./src/WebGL/constants/Coloring.ts"),at=rt("./src/WebGL/constants/Shading.ts"),lt=rt("./src/colors.ts"),dt=rt("./src/WebGL/math/index.ts"),yt=rt("./src/WebGL/materials/Material.ts");class vt extends yt.Material{constructor(bt){super(),this.color=new lt.Color(16777215),this.ambient=new lt.Color(1048575),this.emissive=new lt.Color(0),this.wrapAround=!1,this.wrapRGB=new dt.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=at.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=st.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(bt)}clone(bt=new vt){return super.clone.call(this,bt),bt.color.copy(this.color),bt.ambient.copy(this.ambient),bt.emissive.copy(this.emissive),bt.wrapAround=this.wrapAround,bt.wrapRGB.copy(this.wrapRGB),bt.map=this.map,bt.lightMap=this.lightMap,bt.specularMap=this.specularMap,bt.envMap=this.envMap,bt.combine=this.combine,bt.reflectivity=this.reflectivity,bt.refractionRatio=this.refractionRatio,bt.fog=this.fog,bt.shading=this.shading,bt.shaderID=this.shaderID,bt.vertexColors=this.vertexColors,bt.skinning=this.skinning,bt.morphTargets=this.morphTargets,bt.morphNormals=this.morphNormals,bt.sphere=this.sphere,bt}}},"./src/WebGL/materials/LineBasicMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{LineBasicMaterial:()=>lt});var st=rt("./src/colors.ts"),at=rt("./src/WebGL/materials/Material.ts");class lt extends at.Material{constructor(yt){super(),this.color=new st.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(yt)}clone(yt=new lt){return super.clone.call(this,yt),yt.color.copy(this.color),yt}}},"./src/WebGL/materials/Material.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Material:()=>yt,MaterialIdCount:()=>vt});var st=rt("./src/WebGL/constants/Sides.ts"),at=rt("./src/WebGL/core/index.ts"),lt=rt("./src/WebGL/math/index.ts"),dt=rt("./src/colors.ts");class yt extends at.EventDispatcher{constructor(){super(...arguments),this.id=vt++,this.name="",this.side=st.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(bt={}){if(bt!==void 0)for(var Mt in bt){var Ct=bt[Mt];if(Ct===void 0){console.warn("$3Dmol.Material: '"+Mt+"' parameter is undefined.");continue}if(Mt in this){var Tt=this[Mt];Tt instanceof dt.Color&&Ct instanceof dt.Color?Tt.copy(Ct):Tt instanceof dt.Color?Tt.set(Ct):Tt instanceof lt.Vector3&&Ct instanceof lt.Vector3?Tt.copy(Ct):this[Mt]=Ct}}}clone(bt=new yt){return bt.name=this.name,bt.side=this.side,bt.opacity=this.opacity,bt.transparent=this.transparent,bt.depthTest=this.depthTest,bt.depthWrite=this.depthWrite,bt.polygonOffset=this.polygonOffset,bt.polygonOffsetFactor=this.polygonOffsetFactor,bt.polygonOffsetUnits=this.polygonOffsetUnits,bt.alphaTest=this.alphaTest,bt.overdraw=this.overdraw,bt.visible=this.visible,bt}makeShaded(bt){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:bt},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let vt=0},"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{MeshDoubleLambertMaterial:()=>lt});var st=rt("./src/WebGL/constants/Sides.ts"),at=rt("./src/WebGL/materials/MeshLambertMaterial.ts");class lt extends at.MeshLambertMaterial{constructor(yt){super(yt),this.shaderID="lambertdouble",this.side=st.DoubleSide,this.outline=!1}clone(yt=new lt){return super.clone.call(this,yt),yt}}},"./src/WebGL/materials/MeshLambertMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{MeshLambertMaterial:()=>vt});var st=rt("./src/WebGL/constants/Coloring.ts"),at=rt("./src/WebGL/constants/Shading.ts"),lt=rt("./src/WebGL/materials/Material.ts"),dt=rt("./src/colors.ts"),yt=rt("./src/WebGL/math/index.ts");class vt extends lt.Material{constructor(bt){super(),this.color=new dt.Color(16777215),this.ambient=new dt.Color(1048575),this.emissive=new dt.Color(0),this.wrapAround=!1,this.wrapRGB=new yt.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=at.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=st.Coloring.NoColors,this.skinning=!1,this.setValues(bt)}clone(bt=new vt){return super.clone.call(this,bt),bt.color.copy(this.color),bt.ambient.copy(this.ambient),bt.emissive.copy(this.emissive),bt.wrapAround=this.wrapAround,bt.wrapRGB.copy(this.wrapRGB),bt.map=this.map,bt.lightMap=this.lightMap,bt.specularMap=this.specularMap,bt.envMap=this.envMap,bt.combine=this.combine,bt.reflectivity=this.reflectivity,bt.refractionRatio=this.refractionRatio,bt.fog=this.fog,bt.shading=this.shading,bt.shaderID=this.shaderID,bt.vertexColors=this.vertexColors,bt.skinning=this.skinning,bt.morphTargets=this.morphTargets,bt.morphNormals=this.morphNormals,bt}}},"./src/WebGL/materials/MeshOutlineMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{MeshOutlineMaterial:()=>lt});var st=rt("./src/colors.ts"),at=rt("./src/WebGL/materials/Material.ts");class lt extends at.Material{constructor(yt){super(),yt=yt||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=st.CC.color(yt.color||new st.Color(0,0,0)),this.outlineWidth=yt.width||.1,this.outlinePushback=yt.pushback||1,this.outlineMaxPixels=yt.maxpixels||0}clone(yt=new lt){return super.clone.call(this,yt),yt.fog=this.fog,yt.shaderID=this.shaderID,yt.wireframe=this.wireframe,yt.outlineColor=this.outlineColor,yt.outlineWidth=this.outlineWidth,yt.outlinePushback=this.outlinePushback,yt.outlineMaxPixels=this.outlineMaxPixels,yt}}},"./src/WebGL/materials/SphereImposterMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{SphereImposterMaterial:()=>at});var st=rt("./src/WebGL/materials/ImposterMaterial.ts");class at extends st.ImposterMaterial{constructor(dt){super(dt),this.shaderID="sphereimposter",this.setValues(dt)}clone(dt=new at){return super.clone.call(this,dt),dt}}},"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{SphereImposterOutlineMaterial:()=>lt});var st=rt("./src/colors.ts"),at=rt("./src/WebGL/materials/ImposterMaterial.ts");class lt extends at.ImposterMaterial{constructor(yt){super(yt),yt=yt||{},this.shaderID="sphereimposteroutline",this.outlineColor=st.CC.color(yt.color||new st.Color(0,0,0)),this.outlineWidth=yt.width||.1,this.outlinePushback=yt.pushback||1,this.outlineMaxPixels=yt.maxpixels||0,this.setValues(yt)}clone(yt=new lt){return super.clone.call(this,yt),yt.outlineColor=this.outlineColor,yt.outlineWidth=this.outlineWidth,yt.outlinePushback=this.outlinePushback,yt.outlineMaxPixels=this.outlineMaxPixels,yt}}},"./src/WebGL/materials/SpriteMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{SpriteMaterial:()=>vt});var st=rt("./src/WebGL/constants/SpriteAlignment.ts"),at=rt("./src/WebGL/core/Texture.ts"),lt=rt("./src/colors.ts"),dt=rt("./src/WebGL/math/index.ts"),yt=rt("./src/WebGL/materials/Material.ts");class vt extends yt.Material{constructor(bt){super(),this.color=new lt.Color(16777215),this.map=new at.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new dt.Vector2(0,0),this.uvScale=new dt.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=st.SpriteAlignment.center.clone(),this.setValues(bt),bt=bt||{},bt.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),bt.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),bt.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(bt=new vt){return super.clone.call(this,bt),bt.color.copy(this.color),bt.map=this.map,bt.useScreenCoordinates=this.useScreenCoordinates,bt.screenOffset=this.screenOffset,bt.sizeAttenuation=this.sizeAttenuation,bt.scaleByViewport=this.scaleByViewPort,bt.alignment.copy(this.alignment),bt.uvOffset.copy(this.uvOffset),bt}}},"./src/WebGL/materials/StickImposterMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{StickImposterMaterial:()=>at});var st=rt("./src/WebGL/materials/ImposterMaterial.ts");class at extends st.ImposterMaterial{constructor(dt){super(dt),this.shaderID="stickimposter",this.setValues(dt)}clone(dt=new at){return super.clone.call(this,dt),dt}}},"./src/WebGL/materials/StickImposterOutlineMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{StickImposterOutlineMaterial:()=>lt});var st=rt("./src/colors.ts"),at=rt("./src/WebGL/materials/ImposterMaterial.ts");class lt extends at.ImposterMaterial{constructor(yt={}){super(yt),this.shaderID="stickimposteroutline",this.outlineColor=new st.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,yt.color&&(this.outlineColor=st.CC.color(yt.color)),yt.width&&(this.outlineWidth=yt.width),yt.pushback&&(this.outlinePushback=yt.pushback),yt.maxpixels&&(this.outlineMaxPixels=yt.maxpixels),this.setValues(yt)}clone(yt=new lt){return super.clone.call(this,yt),yt.outlineColor=this.outlineColor,yt.outlineWidth=this.outlineWidth,yt.outlinePushback=this.outlinePushback,yt.outlineMaxPixels=this.outlineMaxPixels,yt}}},"./src/WebGL/materials/VolumetricMaterial.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{VolumetricMaterial:()=>dt});var st=rt("./src/WebGL/constants/Sides.ts"),at=rt("./src/colors.ts"),lt=rt("./src/WebGL/materials/Material.ts");class dt extends lt.Material{constructor(vt){super(),this.transparent=!1,this.volumetric=!0,this.color=new at.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=st.FrontSide,this.setValues(vt)}clone(vt=new dt){return super.clone.call(this,vt),vt.transparent=this.transparent,vt.volumetric=this.volumetric,vt.color=this.color,vt.transferfn=this.transferfn,vt.map=this.map,vt.extent=this.extent,vt.maxdepth=this.maxdepth,vt.unit=this.unit,vt.texmatrix=this.texmatrix,vt.transfermin=this.transfermin,vt.transfermax=this.transfermax,vt.subsamples=this.subsamples,vt.shaderID=this.shaderID,vt.side=this.side,vt}}},"./src/WebGL/materials/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{ImposterMaterial:()=>st.ImposterMaterial,InstancedMaterial:()=>at.InstancedMaterial,LineBasicMaterial:()=>lt.LineBasicMaterial,Material:()=>dt.Material,MaterialIdCount:()=>dt.MaterialIdCount,MeshDoubleLambertMaterial:()=>yt.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>vt.MeshLambertMaterial,MeshOutlineMaterial:()=>_t.MeshOutlineMaterial,SphereImposterMaterial:()=>bt.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>Mt.SphereImposterOutlineMaterial,SpriteMaterial:()=>Ct.SpriteMaterial,StickImposterMaterial:()=>Tt.StickImposterMaterial,StickImposterOutlineMaterial:()=>$t.StickImposterOutlineMaterial,VolumetricMaterial:()=>Rt.VolumetricMaterial});var st=rt("./src/WebGL/materials/ImposterMaterial.ts"),at=rt("./src/WebGL/materials/InstancedMaterial.ts"),lt=rt("./src/WebGL/materials/LineBasicMaterial.ts"),dt=rt("./src/WebGL/materials/Material.ts"),yt=rt("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),vt=rt("./src/WebGL/materials/MeshLambertMaterial.ts"),_t=rt("./src/WebGL/materials/MeshOutlineMaterial.ts"),bt=rt("./src/WebGL/materials/SphereImposterMaterial.ts"),Mt=rt("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),Ct=rt("./src/WebGL/materials/SpriteMaterial.ts"),Tt=rt("./src/WebGL/materials/StickImposterMaterial.ts"),$t=rt("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),Rt=rt("./src/WebGL/materials/VolumetricMaterial.ts")},"./src/WebGL/math/Quaternion.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Quaternion:()=>st});class st{constructor(lt,dt,yt,vt){this.x=lt||0,this.y=dt||0,this.z=yt||0,this.w=vt!==void 0?vt:1}set(lt,dt,yt,vt){return this.x=lt,this.y=dt,this.z=yt,this.w=vt,this}copy(lt){return this.x=lt.x,this.y=lt.y,this.z=lt.z,this.w=lt.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let lt=this.length();return lt===0?(this.x=0,this.y=0,this.z=0,this.w=1):(lt=1/lt,this.x*=lt,this.y*=lt,this.z*=lt,this.w*=lt),this}multiply(lt){return this.multiplyQuaternions(this,lt)}multiplyScalar(lt){return this.x*=lt,this.y*=lt,this.z*=lt,this.w*=lt,this}multiplyQuaternions(lt,dt){const yt=lt.x,vt=lt.y,_t=lt.z,bt=lt.w,Mt=dt.x,Ct=dt.y,Tt=dt.z,$t=dt.w;return this.x=yt*$t+bt*Mt+vt*Tt-_t*Ct,this.y=vt*$t+bt*Ct+_t*Mt-yt*Tt,this.z=_t*$t+bt*Tt+yt*Ct-vt*Mt,this.w=bt*$t-yt*Mt-vt*Ct-_t*Tt,this}sub(lt){return this.x-=lt.x,this.y-=lt.y,this.z-=lt.z,this.w-=lt.w,this}clone(){return new st(this.x,this.y,this.z,this.w)}setFromEuler(lt){const dt=Math.cos(lt.x/2),yt=Math.cos(lt.y/2),vt=Math.cos(lt.z/2),_t=Math.sin(lt.x/2),bt=Math.sin(lt.y/2),Mt=Math.sin(lt.z/2);return this.x=_t*yt*vt+dt*bt*Mt,this.y=dt*bt*vt-_t*yt*Mt,this.z=dt*yt*Mt+_t*bt*vt,this.w=dt*yt*vt-_t*bt*Mt,this}}},"./src/WebGL/math/Vector2.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Vector2:()=>st});class st{constructor(lt,dt){this.x=lt||0,this.y=dt||0}set(lt,dt){return this.x=lt,this.y=dt,this}subVectors(lt,dt){return this.x=lt.x-dt.x,this.y=lt.y-dt.y,this}copy(lt){return this.x=lt.x,this.y=lt.y,this}clone(){return new st(this.x,this.y)}}},"./src/WebGL/math/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Matrix3:()=>vt.Matrix3,Matrix4:()=>vt.Matrix4,Quaternion:()=>st.Quaternion,Ray:()=>vt.Ray,Vector2:()=>at.Vector2,Vector3:()=>vt.Vector3,clamp:()=>lt.clamp,conversionMatrix3:()=>dt.conversionMatrix3,degToRad:()=>yt.degToRad});var st=rt("./src/WebGL/math/Quaternion.ts"),at=rt("./src/WebGL/math/Vector2.ts"),lt=rt("./src/WebGL/math/utils/clamp.ts"),dt=rt("./src/WebGL/math/utils/conversionMatrix3.ts"),yt=rt("./src/WebGL/math/utils/degToRad.ts"),vt=rt("./src/WebGL/math/math.ts")},"./src/WebGL/math/math.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Matrix3:()=>Ct,Matrix4:()=>bt,Ray:()=>Tt,Vector3:()=>Mt});var st=rt("./src/WebGL/math/utils/degToRad.ts"),at=rt("./src/WebGL/math/utils/clamp.ts"),lt,dt,yt,vt,_t;class bt{constructor(Rt=1,Et=0,wt=0,Pt=0,Ft=0,Nt=1,Ot=0,Bt=0,Xt=0,Zt=0,rn=1,Gt=0,nn=0,cn=0,an=0,mn=1){typeof Rt<"u"&&typeof Rt!="number"?this.elements=new Float32Array(Rt):(this.elements=new Float32Array(16),this.elements[0]=Rt,this.elements[4]=Et,this.elements[8]=wt,this.elements[12]=Pt,this.elements[1]=Ft,this.elements[5]=Nt,this.elements[9]=Ot,this.elements[13]=Bt,this.elements[2]=Xt,this.elements[6]=Zt,this.elements[10]=rn,this.elements[14]=Gt,this.elements[3]=nn,this.elements[7]=cn,this.elements[11]=an,this.elements[15]=mn)}makeScale(Rt,Et,wt){throw new Error("Method not implemented.")}set(Rt,Et,wt,Pt,Ft,Nt,Ot,Bt,Xt,Zt,rn,Gt,nn,cn,an,mn){const En=this.elements;return En[0]=Rt,En[4]=Et,En[8]=wt,En[12]=Pt,En[1]=Ft,En[5]=Nt,En[9]=Ot,En[13]=Bt,En[2]=Xt,En[6]=Zt,En[10]=rn,En[14]=Gt,En[3]=nn,En[7]=cn,En[11]=an,En[15]=mn,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(Rt){const Et=Rt.elements;return this.set(Et[0],Et[4],Et[8],Et[12],Et[1],Et[5],Et[9],Et[13],Et[2],Et[6],Et[10],Et[14],Et[3],Et[7],Et[11],Et[15]),this}matrix3FromTopLeft(){const Rt=this.elements;return new Ct(Rt[0],Rt[4],Rt[8],Rt[1],Rt[5],Rt[9],Rt[2],Rt[6],Rt[10])}setRotationFromEuler(Rt,Et){const wt=this.elements,{x:Pt,y:Ft,z:Nt}=Rt,Ot=Math.cos(Pt),Bt=Math.sin(Pt),Xt=Math.cos(Ft),Zt=Math.sin(Ft),rn=Math.cos(Nt),Gt=Math.sin(Nt);if(Et===void 0||Et==="XYZ"){const nn=Ot*rn,cn=Ot*Gt,an=Bt*rn,mn=Bt*Gt;wt[0]=Xt*rn,wt[4]=-Xt*Gt,wt[8]=Zt,wt[1]=cn+an*Zt,wt[5]=nn-mn*Zt,wt[9]=-Bt*Xt,wt[2]=mn-nn*Zt,wt[6]=an+cn*Zt,wt[10]=Ot*Xt}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${Et}`);return this}setRotationFromQuaternion(Rt){const Et=this.elements,{x:wt,y:Pt,z:Ft,w:Nt}=Rt,Ot=wt+wt,Bt=Pt+Pt,Xt=Ft+Ft,Zt=wt*Ot,rn=wt*Bt,Gt=wt*Xt,nn=Pt*Bt,cn=Pt*Xt,an=Ft*Xt,mn=Nt*Ot,En=Nt*Bt,Cn=Nt*Xt;return Et[0]=1-(nn+an),Et[4]=rn-Cn,Et[8]=Gt+En,Et[1]=rn+Cn,Et[5]=1-(Zt+an),Et[9]=cn-mn,Et[2]=Gt-En,Et[6]=cn+mn,Et[10]=1-(Zt+nn),this}multiplyMatrices(Rt,Et){const wt=Rt.elements,Pt=Et.elements,Ft=this.elements,Nt=wt[0],Ot=wt[4],Bt=wt[8],Xt=wt[12],Zt=wt[1],rn=wt[5],Gt=wt[9],nn=wt[13],cn=wt[2],an=wt[6],mn=wt[10],En=wt[14],Cn=wt[3],Mn=wt[7],un=wt[11],Tn=wt[15],Pn=Pt[0],dn=Pt[4],Un=Pt[8],qn=Pt[12],In=Pt[1],Wn=Pt[5],ar=Pt[9],fr=Pt[13],mr=Pt[2],vr=Pt[6],Ar=Pt[10],$r=Pt[14],Mr=Pt[3],Jn=Pt[7],hr=Pt[11],wr=Pt[15];return Ft[0]=Nt*Pn+Ot*In+Bt*mr+Xt*Mr,Ft[4]=Nt*dn+Ot*Wn+Bt*vr+Xt*Jn,Ft[8]=Nt*Un+Ot*ar+Bt*Ar+Xt*hr,Ft[12]=Nt*qn+Ot*fr+Bt*$r+Xt*wr,Ft[1]=Zt*Pn+rn*In+Gt*mr+nn*Mr,Ft[5]=Zt*dn+rn*Wn+Gt*vr+nn*Jn,Ft[9]=Zt*Un+rn*ar+Gt*Ar+nn*hr,Ft[13]=Zt*qn+rn*fr+Gt*$r+nn*wr,Ft[2]=cn*Pn+an*In+mn*mr+En*Mr,Ft[6]=cn*dn+an*Wn+mn*vr+En*Jn,Ft[10]=cn*Un+an*ar+mn*Ar+En*hr,Ft[14]=cn*qn+an*fr+mn*$r+En*wr,Ft[3]=Cn*Pn+Mn*In+un*mr+Tn*Mr,Ft[7]=Cn*dn+Mn*Wn+un*vr+Tn*Jn,Ft[11]=Cn*Un+Mn*ar+un*Ar+Tn*hr,Ft[15]=Cn*qn+Mn*fr+un*$r+Tn*wr,this}multiplyScalar(Rt){const Et=this.elements;return Et[0]*=Rt,Et[4]*=Rt,Et[8]*=Rt,Et[12]*=Rt,Et[1]*=Rt,Et[5]*=Rt,Et[9]*=Rt,Et[13]*=Rt,Et[2]*=Rt,Et[6]*=Rt,Et[10]*=Rt,Et[14]*=Rt,Et[3]*=Rt,Et[7]*=Rt,Et[11]*=Rt,Et[15]*=Rt,this}makeTranslation(Rt,Et,wt){return this.set(1,0,0,Rt,0,1,0,Et,0,0,1,wt,0,0,0,1),this}snap(Rt){const Et=Math.pow(10,4),wt=this.elements;for(let Pt=0;Pt<16;Pt++){const Ft=Math.round(wt[Pt]);Ft===Math.round(wt[Pt]*Et)/Et&&(wt[Pt]=Ft)}return this}transpose(){const Rt=this.elements;let Et;return Et=Rt[1],Rt[1]=Rt[4],Rt[4]=Et,Et=Rt[2],Rt[2]=Rt[8],Rt[8]=Et,Et=Rt[6],Rt[6]=Rt[9],Rt[9]=Et,Et=Rt[3],Rt[3]=Rt[12],Rt[12]=Et,Et=Rt[7],Rt[7]=Rt[13],Rt[13]=Et,Et=Rt[11],Rt[11]=Rt[14],Rt[14]=Et,this}setPosition(Rt){const Et=this.elements;return Et[12]=Rt.x,Et[13]=Rt.y,Et[14]=Rt.z,this}translate(Rt){const Et=this.elements;return Et[12]+=Rt.x,Et[13]+=Rt.y,Et[14]+=Rt.z,this}getInverse(Rt,Et){const wt=this.elements,Pt=Rt.elements,Ft=Pt[0],Nt=Pt[4],Ot=Pt[8],Bt=Pt[12],Xt=Pt[1],Zt=Pt[5],rn=Pt[9],Gt=Pt[13],nn=Pt[2],cn=Pt[6],an=Pt[10],mn=Pt[14],En=Pt[3],Cn=Pt[7],Mn=Pt[11],un=Pt[15];wt[0]=rn*mn*Cn-Gt*an*Cn+Gt*cn*Mn-Zt*mn*Mn-rn*cn*un+Zt*an*un,wt[4]=Bt*an*Cn-Ot*mn*Cn-Bt*cn*Mn+Nt*mn*Mn+Ot*cn*un-Nt*an*un,wt[8]=Ot*Gt*Cn-Bt*rn*Cn+Bt*Zt*Mn-Nt*Gt*Mn-Ot*Zt*un+Nt*rn*un,wt[12]=Bt*rn*cn-Ot*Gt*cn-Bt*Zt*an+Nt*Gt*an+Ot*Zt*mn-Nt*rn*mn,wt[1]=Gt*an*En-rn*mn*En-Gt*nn*Mn+Xt*mn*Mn+rn*nn*un-Xt*an*un,wt[5]=Ot*mn*En-Bt*an*En+Bt*nn*Mn-Ft*mn*Mn-Ot*nn*un+Ft*an*un,wt[9]=Bt*rn*En-Ot*Gt*En-Bt*Xt*Mn+Ft*Gt*Mn+Ot*Xt*un-Ft*rn*un,wt[13]=Ot*Gt*nn-Bt*rn*nn+Bt*Xt*an-Ft*Gt*an-Ot*Xt*mn+Ft*rn*mn,wt[2]=Zt*mn*En-Gt*cn*En+Gt*nn*Cn-Xt*mn*Cn-Zt*nn*un+Xt*cn*un,wt[6]=Bt*cn*En-Nt*mn*En-Bt*nn*Cn+Ft*mn*Cn+Nt*nn*un-Ft*cn*un,wt[10]=Nt*Gt*En-Bt*Zt*En+Bt*Xt*Cn-Ft*Gt*Cn-Nt*Xt*un+Ft*Zt*un,wt[14]=Bt*Zt*nn-Nt*Gt*nn-Bt*Xt*cn+Ft*Gt*cn+Nt*Xt*mn-Ft*Zt*mn,wt[3]=rn*cn*En-Zt*an*En-rn*nn*Cn+Xt*an*Cn+Zt*nn*Mn-Xt*cn*Mn,wt[7]=Nt*an*En-Ot*cn*En+Ot*nn*Cn-Ft*an*Cn-Nt*nn*Mn+Ft*cn*Mn,wt[11]=Ot*Zt*En-Nt*rn*En-Ot*Xt*Cn+Ft*rn*Cn+Nt*Xt*Mn-Ft*Zt*Mn,wt[15]=Nt*rn*nn-Ot*Zt*nn+Ot*Xt*cn-Ft*rn*cn-Nt*Xt*an+Ft*Zt*an;const Tn=Ft*wt[0]+Xt*wt[4]+nn*wt[8]+En*wt[12];if(Tn===0){const Pn="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(Et)throw new Error(Pn);return console.warn(Pn),this.identity(),this}return this.multiplyScalar(1/Tn),this}isReflected(){const Rt=this.elements,Et=Rt[0],wt=Rt[4],Pt=Rt[8],Ft=Rt[1],Nt=Rt[5],Ot=Rt[9],Bt=Rt[2],Xt=Rt[6],Zt=Rt[10];return Et*Nt*Zt+Ft*Xt*Pt+Bt*wt*Ot-Bt*Nt*Pt-Ft*wt*Zt-Et*Xt*Ot<0}scale(Rt){const Et=this.elements,{x:wt}=Rt,{y:Pt}=Rt,{z:Ft}=Rt;return Et[0]*=wt,Et[4]*=Pt,Et[8]*=Ft,Et[1]*=wt,Et[5]*=Pt,Et[9]*=Ft,Et[2]*=wt,Et[6]*=Pt,Et[10]*=Ft,Et[3]*=wt,Et[7]*=Pt,Et[11]*=Ft,this}getMaxScaleOnAxis(){const Rt=this.elements,Et=Rt[0]*Rt[0]+Rt[1]*Rt[1]+Rt[2]*Rt[2],wt=Rt[4]*Rt[4]+Rt[5]*Rt[5]+Rt[6]*Rt[6],Pt=Rt[8]*Rt[8]+Rt[9]*Rt[9]+Rt[10]*Rt[10];return Math.sqrt(Math.max(Et,Math.max(wt,Pt)))}makeFrustum(Rt,Et,wt,Pt,Ft,Nt){const Ot=this.elements,Bt=2*Ft/(Et-Rt),Xt=2*Ft/(Pt-wt),Zt=(Et+Rt)/(Et-Rt),rn=(Pt+wt)/(Pt-wt),Gt=-(Nt+Ft)/(Nt-Ft),nn=-2*Nt*Ft/(Nt-Ft);return Ot[0]=Bt,Ot[4]=0,Ot[8]=Zt,Ot[12]=0,Ot[1]=0,Ot[5]=Xt,Ot[9]=rn,Ot[13]=0,Ot[2]=0,Ot[6]=0,Ot[10]=Gt,Ot[14]=nn,Ot[3]=0,Ot[7]=0,Ot[11]=-1,Ot[15]=0,this}makePerspective(Rt,Et,wt,Pt){const Ft=wt*Math.tan((0,st.degToRad)(Rt*.5)),Nt=-Ft,Ot=Nt*Et,Bt=Ft*Et;return this.makeFrustum(Ot,Bt,Nt,Ft,wt,Pt)}makeOrthographic(Rt,Et,wt,Pt,Ft,Nt){const Ot=this.elements,Bt=1/(Et-Rt),Xt=1/(wt-Pt),Zt=1/(Nt-Ft),rn=(Et+Rt)*Bt,Gt=(wt+Pt)*Xt,nn=(Nt+Ft)*Zt;return Ot[0]=2*Bt,Ot[4]=0,Ot[8]=0,Ot[12]=-rn,Ot[1]=0,Ot[5]=2*Xt,Ot[9]=0,Ot[13]=-Gt,Ot[2]=0,Ot[6]=0,Ot[10]=-2*Zt,Ot[14]=-nn,Ot[3]=0,Ot[7]=0,Ot[11]=0,Ot[15]=1,this}isEqual(Rt){const Et=Rt.elements,wt=this.elements;return wt[0]===Et[0]&&wt[4]===Et[4]&&wt[8]===Et[8]&&wt[12]===Et[12]&&wt[1]===Et[1]&&wt[5]===Et[5]&&wt[9]===Et[9]&&wt[13]===Et[13]&&wt[2]===Et[2]&&wt[6]===Et[6]&&wt[10]===Et[10]&&wt[14]===Et[14]&&wt[3]===Et[3]&&wt[7]===Et[7]&&wt[11]===Et[11]&&wt[15]===Et[15]}clone(){const Rt=this.elements;return new bt(Rt[0],Rt[4],Rt[8],Rt[12],Rt[1],Rt[5],Rt[9],Rt[13],Rt[2],Rt[6],Rt[10],Rt[14],Rt[3],Rt[7],Rt[11],Rt[15])}isIdentity(){const Rt=this.elements;return Rt[0]===1&&Rt[4]===0&&Rt[8]===0&&Rt[12]===0&&Rt[1]===0&&Rt[5]===1&&Rt[9]===0&&Rt[13]===0&&Rt[2]===0&&Rt[6]===0&&Rt[10]===1&&Rt[14]===0&&Rt[3]===0&&Rt[7]===0&&Rt[11]===0&&Rt[15]===1}isNearlyIdentity(Rt){return this.clone().snap(Rt).isIdentity()}getScale(Rt){const Et=this.elements;return Rt=Rt||new Mt,yt.set(Et[0],Et[1],Et[2]),vt.set(Et[4],Et[5],Et[6]),_t.set(Et[8],Et[9],Et[10]),Rt.x=yt.length(),Rt.y=vt.length(),Rt.z=_t.length(),Rt}lookAt(Rt,Et,wt){const Pt=this.elements;return _t.subVectors(Rt,Et).normalize(),_t.length()===0&&(_t.z=1),yt.crossVectors(wt,_t).normalize(),yt.length()===0&&(_t.x+=1e-4,yt.crossVectors(wt,_t).normalize()),vt.crossVectors(_t,yt),Pt[0]=yt.x,Pt[4]=vt.x,Pt[8]=_t.x,Pt[1]=yt.y,Pt[5]=vt.y,Pt[9]=_t.y,Pt[2]=yt.z,Pt[6]=vt.z,Pt[10]=_t.z,this}compose(Rt,Et,wt){const Pt=this.elements;return lt.identity(),lt.setRotationFromQuaternion(Et),dt.makeScale(wt.x,wt.y,wt.z),this.multiplyMatrices(lt,dt),Pt[12]=Rt.x,Pt[13]=Rt.y,Pt[14]=Rt.z,this}}lt=new bt,dt=new bt;class Mt{constructor(Rt,Et,wt){this.x=Rt||0,this.y=Et||0,this.z=wt||0,this.atomid=void 0}set(Rt,Et,wt){return this.x=Rt,this.y=Et,this.z=wt,this}copy(Rt){return this.x=Rt.x,this.y=Rt.y,this.z=Rt.z,this}add(Rt){return this.x+=Rt.x,this.y+=Rt.y,this.z+=Rt.z,this}addVectors(Rt,Et){return this.x=Rt.x+Et.x,this.y=Rt.y+Et.y,this.z=Rt.z+Et.z,this}multiplyVectors(Rt,Et){return this.x=Rt.x*Et.x,this.y=Rt.y*Et.y,this.z=Rt.z*Et.z,this}sub(Rt){return this.x-=Rt.x,this.y-=Rt.y,this.z-=Rt.z,this}subVectors(Rt,Et){return this.x=Rt.x-Et.x,this.y=Rt.y-Et.y,this.z=Rt.z-Et.z,this}multiplyScalar(Rt){return this.x*=Rt,this.y*=Rt,this.z*=Rt,this}divideScalar(Rt){return Rt!==0?(this.x/=Rt,this.y/=Rt,this.z/=Rt):(this.x=0,this.y=0,this.z=0),this}max(Rt){return this.x=Math.max(this.x,Rt.x),this.y=Math.max(this.y,Rt.y),this.z=Math.max(this.z,Rt.z),this}min(Rt){return this.x=Math.min(this.x,Rt.x),this.y=Math.min(this.y,Rt.y),this.z=Math.min(this.z,Rt.z),this}distanceTo(Rt){return Math.sqrt(this.distanceToSquared(Rt))}distanceToSquared(Rt){const Et=this.x-Rt.x,wt=this.y-Rt.y,Pt=this.z-Rt.z;return Et*Et+wt*wt+Pt*Pt}applyMatrix3(Rt){const{x:Et}=this,{y:wt}=this,{z:Pt}=this,Ft=Rt.elements;return this.x=Ft[0]*Et+Ft[3]*wt+Ft[6]*Pt,this.y=Ft[1]*Et+Ft[4]*wt+Ft[7]*Pt,this.z=Ft[2]*Et+Ft[5]*wt+Ft[8]*Pt,this}applyMatrix4(Rt){const{x:Et}=this,{y:wt}=this,{z:Pt}=this,Ft=Rt.elements;return this.x=Ft[0]*Et+Ft[4]*wt+Ft[8]*Pt+Ft[12],this.y=Ft[1]*Et+Ft[5]*wt+Ft[9]*Pt+Ft[13],this.z=Ft[2]*Et+Ft[6]*wt+Ft[10]*Pt+Ft[14],this}applyProjection(Rt){const{x:Et}=this,{y:wt}=this,{z:Pt}=this,Ft=Rt.elements,Nt=Ft[3]*Et+Ft[7]*wt+Ft[11]*Pt+Ft[15];return this.x=(Ft[0]*Et+Ft[4]*wt+Ft[8]*Pt+Ft[12])/Nt,this.y=(Ft[1]*Et+Ft[5]*wt+Ft[9]*Pt+Ft[13])/Nt,this.z=(Ft[2]*Et+Ft[6]*wt+Ft[10]*Pt+Ft[14])/Nt,this}applyQuaternion(Rt){const{x:Et}=this,{y:wt}=this,{z:Pt}=this,Ft=Rt.x,Nt=Rt.y,Ot=Rt.z,Bt=Rt.w,Xt={};Xt.x=2*(wt*Ot-Pt*Nt),Xt.y=2*(Pt*Ft-Et*Ot),Xt.z=2*(Et*Nt-wt*Ft);const Zt={};return Zt.x=Xt.y*Ot-Xt.z*Nt,Zt.y=Xt.z*Ft-Xt.x*Ot,Zt.z=Xt.x*Nt-Xt.y*Ft,this.x=Et+Bt*Xt.x+Zt.x,this.y=wt+Bt*Xt.y+Zt.y,this.z=Pt+Bt*Xt.z+Zt.z,this}negate(){return this.multiplyScalar(-1)}dot(Rt){return this.x*Rt.x+this.y*Rt.y+this.z*Rt.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(Rt){const{x:Et}=this,{y:wt}=this,{z:Pt}=this;return this.x=wt*Rt.z-Pt*Rt.y,this.y=Pt*Rt.x-Et*Rt.z,this.z=Et*Rt.y-wt*Rt.x,this}crossVectors(Rt,Et){return this.x=Rt.y*Et.z-Rt.z*Et.y,this.y=Rt.z*Et.x-Rt.x*Et.z,this.z=Rt.x*Et.y-Rt.y*Et.x,this}equals(Rt){return this.x==Rt.x&&this.y==Rt.y&&this.z==Rt.z}getPositionFromMatrix(Rt){return this.x=Rt.elements[12],this.y=Rt.elements[13],this.z=Rt.elements[14],this}setEulerFromRotationMatrix(Rt,Et){const wt=Rt.elements,Pt=wt[0],Ft=wt[4],Nt=wt[8],Ot=wt[5],Bt=wt[9],Xt=wt[6],Zt=wt[10];return Et===void 0||Et==="XYZ"?(this.y=Math.asin((0,at.clamp)(Nt,-1,1)),Math.abs(Nt)<.99999?(this.x=Math.atan2(-Bt,Zt),this.z=Math.atan2(-Ft,Pt)):(this.x=Math.atan2(Xt,Ot),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${Et}`),this}rotateAboutVector(Rt,Et){Rt.normalize();const wt=Math.cos(Et),Pt=Math.sin(Et),Ft=this.clone().multiplyScalar(wt),Nt=Rt.clone().cross(this).multiplyScalar(Pt),Ot=Rt.clone().multiplyScalar(Rt.clone().dot(this)).multiplyScalar(1-wt),Bt=Ft.add(Nt).add(Ot);return this.x=Bt.x,this.y=Bt.y,this.z=Bt.z,this}setFromMatrixPosition(Rt){const Et=Rt.elements;return this.x=Et[12],this.y=Et[13],this.z=Et[14],this}transformDirection(Rt){const{x:Et}=this,{y:wt}=this,{z:Pt}=this,Ft=Rt.elements;return this.x=Ft[0]*Et+Ft[4]*wt+Ft[8]*Pt,this.y=Ft[1]*Et+Ft[5]*wt+Ft[9]*Pt,this.z=Ft[2]*Et+Ft[6]*wt+Ft[10]*Pt,this.normalize()}clone(){return new Mt(this.x,this.y,this.z)}unproject(Rt){const Et=lt;return Et.multiplyMatrices(Rt.matrixWorld,Et.getInverse(Rt.projectionMatrix)),this.applyMatrix4(Et)}}yt=new Mt,vt=new Mt,_t=new Mt;class Ct{constructor(Rt=1,Et=0,wt=0,Pt=0,Ft=1,Nt=0,Ot=0,Bt=0,Xt=1){this.elements=new Float32Array(9),this.set(Rt,Et,wt,Pt,Ft,Nt,Ot,Bt,Xt)}set(Rt,Et,wt,Pt,Ft,Nt,Ot,Bt,Xt){const Zt=this.elements;return Zt[0]=Rt,Zt[3]=Et,Zt[6]=wt,Zt[1]=Pt,Zt[4]=Ft,Zt[7]=Nt,Zt[2]=Ot,Zt[5]=Bt,Zt[8]=Xt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(Rt){const Et=Rt.elements;this.set(Et[0],Et[3],Et[6],Et[1],Et[4],Et[7],Et[2],Et[5],Et[8])}multiplyScalar(Rt){const Et=this.elements;return Et[0]*=Rt,Et[3]*=Rt,Et[6]*=Rt,Et[1]*=Rt,Et[4]*=Rt,Et[7]*=Rt,Et[2]*=Rt,Et[5]*=Rt,Et[8]*=Rt,this}getInverse3(Rt){const Et=Rt.elements,wt=this.elements;wt[0]=Et[4]*Et[8]-Et[5]*Et[7],wt[3]=Et[6]*Et[5]-Et[3]*Et[8],wt[6]=Et[3]*Et[7]-Et[6]*Et[4],wt[1]=Et[7]*Et[2]-Et[1]*Et[8],wt[4]=Et[0]*Et[8]-Et[6]*Et[2],wt[7]=Et[1]*Et[6]-Et[0]*Et[7],wt[2]=Et[1]*Et[5]-Et[2]*Et[4],wt[5]=Et[2]*Et[3]-Et[0]*Et[5],wt[8]=Et[0]*Et[4]-Et[1]*Et[3];const Pt=Et[0]*wt[0]+Et[3]*wt[1]+Et[6]*wt[2];return this.multiplyScalar(1/Pt),this}getInverse(Rt,Et){const wt=Rt.elements,Pt=this.elements;Pt[0]=wt[10]*wt[5]-wt[6]*wt[9],Pt[1]=-wt[10]*wt[1]+wt[2]*wt[9],Pt[2]=wt[6]*wt[1]-wt[2]*wt[5],Pt[3]=-wt[10]*wt[4]+wt[6]*wt[8],Pt[4]=wt[10]*wt[0]-wt[2]*wt[8],Pt[5]=-wt[6]*wt[0]+wt[2]*wt[4],Pt[6]=wt[9]*wt[4]-wt[5]*wt[8],Pt[7]=-wt[9]*wt[0]+wt[1]*wt[8],Pt[8]=wt[5]*wt[0]-wt[1]*wt[4];const Ft=wt[0]*Pt[0]+wt[1]*Pt[3]+wt[2]*Pt[6];if(Ft===0){const Nt="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(Et)throw new Error(Nt);return console.warn(Nt),this.identity(),this}return this.multiplyScalar(1/Ft),this}getDeterminant(){const Rt=this.elements;return Rt[0]*Rt[4]*Rt[8]+Rt[1]*Rt[5]*Rt[6]+Rt[2]*Rt[3]*Rt[7]-Rt[2]*Rt[4]*Rt[6]-Rt[1]*Rt[3]*Rt[8]-Rt[0]*Rt[5]*Rt[7]}transpose(){let Rt;const Et=this.elements;return Rt=Et[1],Et[1]=Et[3],Et[3]=Rt,Rt=Et[2],Et[2]=Et[6],Et[6]=Rt,Rt=Et[5],Et[5]=Et[7],Et[7]=Rt,this}clone(){const Rt=this.elements;return new Ct(Rt[0],Rt[3],Rt[6],Rt[1],Rt[4],Rt[7],Rt[2],Rt[5],Rt[8])}getMatrix4(){const Rt=this.elements;return new bt(Rt[0],Rt[3],Rt[6],0,Rt[1],Rt[4],Rt[7],0,Rt[2],Rt[5],Rt[8],0)}}class Tt{constructor(Rt,Et){this.origin=Rt!==void 0?Rt:new Mt,this.direction=Et!==void 0?Et:new Mt}set(Rt,Et){return this.origin.copy(Rt),this.direction.copy(Et),this}copy(Rt){return this.origin.copy(Rt.origin),this.direction.copy(Rt.direction),this}at(Rt,Et){return(Et||new Mt).copy(this.direction).multiplyScalar(Rt).add(this.origin)}recast(Rt){const Et=yt;return this.origin.copy(this.at(Rt,Et)),this}closestPointToPoint(Rt,Et){const wt=Et||new Mt;wt.subVectors(Rt,this.origin);const Pt=wt.dot(this.direction);return wt.copy(this.direction).multiplyScalar(Pt).add(this.origin)}distanceToPoint(Rt){const Et=yt,wt=Et.subVectors(Rt,this.origin).dot(this.direction);return Et.copy(this.direction).multiplyScalar(wt).add(this.origin),Et.distanceTo(Rt)}isIntersectionCylinder(){}isIntersectionSphere(Rt){return this.distanceToPoint(Rt.center)<=Rt.radius}isIntersectionPlane(Rt){return Rt.normal.dot(this.direction)!==0||Rt.distanceToPoint(this.origin)===0}distanceToPlane(Rt){const Et=Rt.normal.dot(this.direction);return Et===0?Rt.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(Rt.normal)+Rt.constant)/Et}intersectPlane(Rt,Et){const wt=this.distanceToPlane(Rt);if(wt!==void 0)return this.at(wt,Et)}applyMatrix4(Rt){return this.direction.add(this.origin).applyMatrix4(Rt),this.origin.applyMatrix4(Rt),this.direction.sub(this.origin),this}clone(){return new Tt().copy(this)}}},"./src/WebGL/math/utils/clamp.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{clamp:()=>st});function st(at,lt,dt){return Math.min(Math.max(at,lt),dt)}},"./src/WebGL/math/utils/conversionMatrix3.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{conversionMatrix3:()=>at});var st=rt("./src/WebGL/math/math.ts");function at(lt,dt,yt,vt,_t,bt){vt=vt*Math.PI/180,_t=_t*Math.PI/180,bt=bt*Math.PI/180;const Mt=wt=>wt*wt,Ct=Math.cos(vt),Tt=Math.cos(_t),$t=Math.cos(bt),Rt=Math.sin(bt);return new st.Matrix3(lt,dt*$t,yt*Tt,0,dt*Rt,yt*(Ct-Tt*$t)/Rt,0,0,yt*Math.sqrt(1-Mt(Ct)-Mt(Tt)-Mt($t)+2*Ct*Tt*$t)/Rt)}},"./src/WebGL/math/utils/degToRad.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{degToRad:()=>at});const st=Math.PI/180;function at(lt){return lt*st}},"./src/WebGL/objects/Line.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Line:()=>dt,LineStyle:()=>lt});var st=rt("./src/WebGL/materials/index.ts"),at=rt("./src/WebGL/core/index.ts"),lt;(function(yt){yt[yt.LineStrip=0]="LineStrip",yt[yt.LinePieces=1]="LinePieces"})(lt||(lt={}));class dt extends at.Object3D{constructor(vt,_t=new st.LineBasicMaterial({color:Math.random()*16777215}),bt=lt.LineStrip){super(),this.geometry=vt,this.material=_t,this.type=bt}clone(vt=new dt(this.geometry,this.material,this.type)){return super.clone.call(this,vt),vt}}},"./src/WebGL/objects/Mesh.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Mesh:()=>at});var st=rt("./src/WebGL/core/index.ts");class at extends st.Object3D{constructor(dt,yt){super(),this.geometry=dt,this.material=yt}clone(dt){return dt===void 0&&(dt=new at(this.geometry,this.material)),super.clone.call(this,dt),dt}}},"./src/WebGL/objects/Sprite.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Sprite:()=>lt});var st=rt("./src/WebGL/materials/index.ts"),at=rt("./src/WebGL/core/index.ts");class lt extends at.Object3D{constructor(yt=new st.SpriteMaterial){super(),this.material=yt,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(yt=new lt(this.material)){return at.Object3D.prototype.clone.call(this,yt),yt}}},"./src/WebGL/objects/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Line:()=>st.Line,LineStyle:()=>st.LineStyle,Mesh:()=>at.Mesh,Sprite:()=>lt.Sprite});var st=rt("./src/WebGL/objects/Line.ts"),at=rt("./src/WebGL/objects/Mesh.ts"),lt=rt("./src/WebGL/objects/Sprite.ts")},"./src/WebGL/shaders/ShaderType.ts":(nt,tt,rt)=>{rt.r(tt)},"./src/WebGL/shaders/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{ShaderLib:()=>st.ShaderLib,ShaderUtils:()=>at.ShaderUtils,basic:()=>st.basic,clone:()=>at.clone,instanced:()=>st.instanced,lambert:()=>st.lambert,lambertdouble:()=>st.lambertdouble,outline:()=>st.outline,screen:()=>st.screen,screenaa:()=>st.screenaa,sphereimposter:()=>st.sphereimposter,sphereimposteroutline:()=>st.sphereimposteroutline,sprite:()=>st.sprite,stickimposter:()=>st.stickimposter,stickimposteroutline:()=>st.stickimposteroutline,volumetric:()=>st.volumetric});var st=rt("./src/WebGL/shaders/lib/index.ts"),at=rt("./src/WebGL/shaders/utils/index.ts");rt("./src/WebGL/shaders/ShaderType.ts")},"./src/WebGL/shaders/lib/basic/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{basic:()=>dt});var st=rt("./src/WebGL/shaders/lib/basic/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/basic/basic.frag"),lt=rt("./src/WebGL/shaders/lib/basic/basic.vert");const dt={vertexShader:lt.default.replace("#define GLSLIFY 1",""),fragmentShader:at.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/basic/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},"./src/WebGL/shaders/lib/blur/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{blur:()=>dt});var st=rt("./src/WebGL/shaders/lib/blur/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/blur/blur.frag"),lt=rt("./src/WebGL/shaders/lib/blur/blur.vert");const dt={fragmentShader:at.default,vertexShader:lt.default,uniforms:st.uniforms}},"./src/WebGL/shaders/lib/blur/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>st});const st={}},"./src/WebGL/shaders/lib/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{ShaderLib:()=>Pt,basic:()=>st.basic,instanced:()=>at.instanced,lambert:()=>lt.lambert,lambertdouble:()=>dt.lambertdouble,outline:()=>yt.outline,screen:()=>vt.screen,screenaa:()=>_t.screenaa,sphereimposter:()=>bt.sphereimposter,sphereimposteroutline:()=>Mt.sphereimposteroutline,sprite:()=>Ct.sprite,stickimposter:()=>Tt.stickimposter,stickimposteroutline:()=>$t.stickimposteroutline,volumetric:()=>Rt.volumetric});var st=rt("./src/WebGL/shaders/lib/basic/index.ts"),at=rt("./src/WebGL/shaders/lib/instanced/index.ts"),lt=rt("./src/WebGL/shaders/lib/lambert/index.ts"),dt=rt("./src/WebGL/shaders/lib/lambertdouble/index.ts"),yt=rt("./src/WebGL/shaders/lib/outline/index.ts"),vt=rt("./src/WebGL/shaders/lib/screen/index.ts"),_t=rt("./src/WebGL/shaders/lib/screenaa/index.ts"),bt=rt("./src/WebGL/shaders/lib/sphereimposter/index.ts"),Mt=rt("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),Ct=rt("./src/WebGL/shaders/lib/sprite/index.ts"),Tt=rt("./src/WebGL/shaders/lib/stickimposter/index.ts"),$t=rt("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),Rt=rt("./src/WebGL/shaders/lib/volumetric/index.ts"),Et=rt("./src/WebGL/shaders/lib/ssao/index.ts"),wt=rt("./src/WebGL/shaders/lib/blur/index.ts");const Pt={basic:st.basic,blur:wt.blur,instanced:at.instanced,lambert:lt.lambert,lambertdouble:dt.lambertdouble,outline:yt.outline,screen:vt.screen,screenaa:_t.screenaa,ssao:Et.ssao,sphereimposter:bt.sphereimposter,sphereimposteroutline:Mt.sphereimposteroutline,sprite:Ct.sprite,stickimposter:Tt.stickimposter,stickimposteroutline:$t.stickimposteroutline,volumetric:Rt.volumetric}},"./src/WebGL/shaders/lib/instanced/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{instanced:()=>dt});var st=rt("./src/WebGL/shaders/lib/instanced/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/instanced/instanced.frag"),lt=rt("./src/WebGL/shaders/lib/instanced/instanced.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/instanced/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambert/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{lambert:()=>dt});var st=rt("./src/WebGL/shaders/lib/lambert/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/lambert/lambert.frag"),lt=rt("./src/WebGL/shaders/lib/lambert/lambert.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/lambert/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambertdouble/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{lambertdouble:()=>dt});var st=rt("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),lt=rt("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/outline/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{outline:()=>dt});var st=rt("./src/WebGL/shaders/lib/outline/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/outline/outline.frag"),lt=rt("./src/WebGL/shaders/lib/outline/outline.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/outline/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new st.Color(0,0,0)},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/screen/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{screen:()=>dt});var st=rt("./src/WebGL/shaders/lib/screen/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/screen/screen.frag"),lt=rt("./src/WebGL/shaders/lib/screen/screen.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/screen/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>st});const st={}},"./src/WebGL/shaders/lib/screenaa/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{screenaa:()=>dt});var st=rt("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),lt=rt("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/screenaa/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>st});const st={}},"./src/WebGL/shaders/lib/sphereimposter/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{sphereimposter:()=>dt});var st=rt("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),lt=rt("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const dt={vertexShader:lt.default.replace("#define GLSLIFY 1",""),fragmentShader:at.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{sphereimposteroutline:()=>dt});var st=rt("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),lt=rt("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new st.Color(0,0,0)},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/sprite/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{sprite:()=>dt});var st=rt("./src/WebGL/shaders/lib/sprite/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/sprite/sprite.frag"),lt=rt("./src/WebGL/shaders/lib/sprite/sprite.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/sprite/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>st});const st={}},"./src/WebGL/shaders/lib/ssao/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{ssao:()=>dt});var st=rt("./src/WebGL/shaders/lib/ssao/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/ssao/ssao.frag"),lt=rt("./src/WebGL/shaders/lib/ssao/ssao.vert");const dt={fragmentShader:at.default,vertexShader:lt.default,uniforms:st.uniforms}},"./src/WebGL/shaders/lib/ssao/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>st});const st={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/stickimposter/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{stickimposter:()=>vt});var st=rt("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),lt=rt("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),dt=rt("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const vt={fragmentShader:[at.default,lt.default].join(`
`),vertexShader:dt.default,uniforms:st.uniforms}},"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{stickimposteroutline:()=>yt});var st=rt("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),lt=rt("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const yt={fragmentShader:at.default+"gl_FragColor = vec4(color,1.0);}",vertexShader:lt.default,uniforms:st.uniforms}},"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new st.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/volumetric/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{volumetric:()=>dt});var st=rt("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),at=rt("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),lt=rt("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const dt={fragmentShader:at.default.replace("#define GLSLIFY 1",""),vertexShader:lt.default.replace("#define GLSLIFY 1",""),uniforms:st.uniforms}},"./src/WebGL/shaders/lib/volumetric/uniforms.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{uniforms:()=>at});var st=rt("./src/colors.ts");const at={opacity:{type:"f",value:1},fogColor:{type:"c",value:new st.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},"./src/WebGL/shaders/utils/clone.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{clone:()=>at});var st=rt("./src/colors.ts");function at(lt){let dt={};for(const vt in lt){dt[vt]={},dt[vt].type=lt[vt].type;var yt=lt[vt].value;yt instanceof st.Color?dt[vt].value=yt.clone():typeof yt=="number"?dt[vt].value=yt:yt instanceof Array?dt[vt].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return dt}},"./src/WebGL/shaders/utils/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{ShaderUtils:()=>at,clone:()=>st.clone});var st=rt("./src/WebGL/shaders/utils/clone.ts");const at={clone:st.clone}},"./src/WebGL/shapes/Cylinder.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Cylinder:()=>lt});var st=rt("./src/WebGL/math/index.ts");let at=new st.Vector3;class lt{constructor(yt=new st.Vector3,vt=new st.Vector3,_t=0){this.c1=yt,this.c2=vt,this.radius=_t,this.direction=new st.Vector3().subVectors(this.c2,this.c1).normalize()}copy(yt){return this.c1.copy(yt.c1),this.c2.copy(yt.c2),this.direction.copy(yt.direction),this.radius=yt.radius,this}lengthSq(){return at.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(yt){return this.direction.add(this.c1).applyMatrix4(yt),this.c1.applyMatrix4(yt),this.c2.applyMatrix4(yt),this.direction.sub(this.c1).normalize(),this.radius=this.radius*yt.getMaxScaleOnAxis(),this}}},"./src/WebGL/shapes/Sphere.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Sphere:()=>at});var st=rt("./src/WebGL/math/index.ts");class at{constructor(dt={x:0,y:0,z:0},yt=0){this.center=new st.Vector3(dt.x,dt.y,dt.z),this.radius=yt}set(dt,yt){return this.center.copy(dt),this.radius=yt,this}copy(dt){return this.center.copy(dt.center),this.radius=dt.radius,this}applyMatrix4(dt){return this.center.applyMatrix4(dt),this.radius=this.radius*dt.getMaxScaleOnAxis(),this}translate(dt){return this.center.add(dt),this}equals(dt){return dt.center.equals(this.center)&&dt.radius===this.radius}clone(){return new at().copy(this)}}},"./src/WebGL/shapes/Triangle.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Triangle:()=>lt});var st=rt("./src/WebGL/math/index.ts");const at=new st.Vector3;class lt{constructor(yt=new st.Vector3,vt=new st.Vector3,_t=new st.Vector3){this.a=yt,this.b=vt,this.c=_t}copy(yt){return this.a.copy(yt.a),this.b.copy(yt.b),this.c.copy(yt.c),this}applyMatrix4(yt){return this.a.applyMatrix4(yt),this.b.applyMatrix4(yt),this.c.applyMatrix4(yt),this}getNormal(){var yt=this.a.clone();return yt.sub(this.b),at.subVectors(this.c,this.b),yt.cross(at),yt.normalize(),yt}}},"./src/WebGL/shapes/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Cylinder:()=>at.Cylinder,Sphere:()=>st.Sphere,Triangle:()=>lt.Triangle});var st=rt("./src/WebGL/shapes/Sphere.ts"),at=rt("./src/WebGL/shapes/Cylinder.ts"),lt=rt("./src/WebGL/shapes/Triangle.ts")},"./src/autoload.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{autoinit:()=>yt,autoload:()=>bt,processing_autoinit:()=>vt,viewers:()=>_t});var st=rt("./src/GLViewer.ts"),at=rt("./src/ProteinSurface4.ts"),lt=rt("./src/utilities.ts"),dt=rt("./src/colors.ts"),yt=!1,vt=!1,_t={};function bt(Mt,Ct){var Tt,$t,Rt;if(document.querySelector(".viewer_3Dmoljs")!=null&&(yt=!0),yt){vt=!0,Mt=Mt??null;var Et=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(wt=>{var Pt=[],Ft=[],Nt="";wt.style.position=="static"&&(wt.style.position="relative");var Ot=null;if(Rt=null,wt.dataset.pdb)Pt.push("https://files.rcsb.org/view/"+wt.dataset.pdb+".pdb"),Ft.push("pdb");else if(wt.dataset.cid)Ft.push("sdf"),Pt.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+wt.dataset.cid+"/SDF?record_type=3d");else if(wt.dataset.href||wt.dataset.url){if(wt.dataset.href?Nt=wt.dataset.href:Nt=wt.dataset.url,Pt.push(Nt),Rt=Nt.substring(Nt.lastIndexOf(".")+1),Rt=="gz"){let Jn=Nt.substring(0,Nt.lastIndexOf(".")).lastIndexOf(".");Rt=Nt.substring(Jn+1)}Ft.push(Rt);var Bt=Nt.substring(Nt.lastIndexOf("/")+1,Nt.lastIndexOf("."));Bt=="/"&&(Bt=Nt.substring(Nt.lastIndexOf("/")+1)),wt.dataset[Ft[Ft.length-1]]=Bt}let Xt=wt.dataset;for(Tt in Xt)Tt.substring(0,3)==="pdb"&&Tt!=="pdb"?(Pt.push("https://files.rcsb.org/view/"+Xt[Tt]+".pdb"),Ft.push("pdb")):Tt.substring(0,4)==="href"&&Tt!=="href"?(Nt=Xt[Tt],Pt.push(Nt),Ft.push(Nt.substring(Nt.lastIndexOf(".")+1))):Tt.substring(0,3)==="cid"&&Tt!=="cid"&&(Pt.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+Xt[Tt]+"/SDF?record_type=3d"),Ft.push("sdf"));var Zt={};wt.dataset.options&&(Zt=(0,lt.specStringToObject)(wt.dataset.options));var rn=dt.CC.color(wt.dataset.backgroundcolor),Gt=wt.dataset.backgroundalpha;Gt=Gt==null?1:parseFloat(Gt);var nn={line:{}};wt.dataset.style&&(nn=(0,lt.specStringToObject)(wt.dataset.style));var cn={};wt.dataset.select&&(cn=(0,lt.specStringToObject)(wt.dataset.select));var an=[],mn=[],En=[],Cn={},Mn=null,un=wt.dataset,Tn=/style(.+)/,Pn=/surface(.*)/,dn=/labelres(.*)/,Un=[];for($t in un)Object.prototype.hasOwnProperty.call(un,$t)&&Un.push($t);for(Un.sort(),Tt=0;Tt<Un.length;Tt++){$t=Un[Tt];var qn=Tn.exec($t),In,Wn,ar;qn&&(In="select"+qn[1],Wn=(0,lt.specStringToObject)(un[In]),ar=(0,lt.specStringToObject)(un[$t]),an.push([Wn,ar])),qn=Pn.exec($t),qn&&(In="select"+qn[1],Wn=(0,lt.specStringToObject)(un[In]),ar=(0,lt.specStringToObject)(un[$t]),mn.push([Wn,ar])),qn=dn.exec($t),qn&&(In="select"+qn[1],Wn=(0,lt.specStringToObject)(un[In]),ar=(0,lt.specStringToObject)(un[$t]),En.push([Wn,ar])),$t=="zoomto"&&(Cn=(0,lt.specStringToObject)(un[$t])),$t=="spin"&&(Mn=(0,lt.specStringToObject)(un[$t]))}var fr=function(Jn){for(Jn.setStyle(cn,nn),Ot&&Ot.createSelectionAndStyle(cn,nn),Tt=0;Tt<an.length;Tt++){let hr=an[Tt][0]||{},wr=an[Tt][1]||{line:{}};Jn.setStyle(hr,wr),Ot&&Ot.createSelectionAndStyle(cn,nn)}for(Tt=0;Tt<mn.length;Tt++){let hr=mn[Tt][0]||{},wr=mn[Tt][1]||{};Ot?Jn.addSurface(at.SurfaceType.VDW,wr,hr,hr).then(Fr=>{Ot.loadSurface("VDW",hr,wr,Fr)}):Jn.addSurface(at.SurfaceType.VDW,wr,hr,hr)}for(Tt=0;Tt<En.length;Tt++){let hr=En[Tt][0]||{},wr=En[Tt][1]||{};Jn.addResLabels(hr,wr)}Jn.render(),Jn.zoomTo(Cn),Mn&&Jn.spin(Mn.axis,Mn.speed)};let mr=Mt;try{var vr=(0,lt.specStringToObject)(wt.dataset.config)||{};vr.backgroundColor===void 0&&(vr.backgroundColor=rn),vr.backgroundAlpha===void 0&&(vr.backgroundAlpha=Gt),mr==null?mr=_t[wt.id||Et++]=(0,st.createViewer)(wt,vr):(mr.setBackgroundColor(rn,Gt),mr.setConfig(vr),Ot&&Ot.initiateUI()),wt.dataset.ui&&$3Dmol.StateManager&&(Ot=new $3Dmol.StateManager(mr))}catch(Jn){console.log(Jn),wt.textContent="WebGL appears to be disabled."}if(Pt.length!=0){let Jn=0,hr=((wr,Nr)=>function(Fr){Nt=Pt[Jn];var Yr=wr.dataset.type||wr.dataset.datatype||Ft[Jn];if(Nr.addModel(Fr,Yr,Zt),Ot){var cs=wr.dataset[Ft[Jn]];Ot.setModelTitle(cs)}Jn+=1,Jn<Pt.length?(0,lt.get)(Pt[Jn]).then(hr):(fr(Nr),wr.dataset.callback&&(0,lt.makeFunction)(wr.dataset.callback)(Nr),vt=!1,Ct&&Ct(Nr))})(wt,mr);Rt&&Rt.endsWith("gz")?(0,lt.getbin)(Pt[0]).then(hr):(0,lt.get)(Pt[0]).then(hr)}else{if(wt.dataset.element){var Ar="#"+wt.dataset.element,$r=document.querySelector(Ar),Mr=$r?$r.textContent:"";Rt=wt.dataset.type||wt.dataset.datatype,mr.addModel(Mr,Rt,Zt)}fr(mr),wt.dataset.callback&&(0,lt.makeFunction)(wt.dataset.callback)(mr),vt=!1,Ct&&Ct(mr)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&bt()}},"./src/colors.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{CC:()=>at,Color:()=>st,builtinColorSchemes:()=>Mt,chains:()=>bt,elementColors:()=>vt,htmlColors:()=>lt,residues:()=>_t,ssColors:()=>dt});class st{constructor(Tt,$t,Rt){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof Tt=="number"?(this.r=Tt||0,this.g=$t||0,this.b=Rt||0,this):this.set(Tt||0)}set(Tt){return Tt instanceof st?Tt.clone():(typeof Tt=="number"?this.setHex(Tt):typeof Tt=="object"&&(this.r=(Tt==null?void 0:Tt.r)||0,this.g=(Tt==null?void 0:Tt.g)||0,this.b=(Tt==null?void 0:Tt.b)||0),this)}setHex(Tt){return Tt=Math.floor(Tt),this.r=(Tt>>16&255)/255,this.g=(Tt>>8&255)/255,this.b=(Tt&255)/255,this}getHex(){var Tt=Math.round(this.r*255),$t=Math.round(this.g*255),Rt=Math.round(this.b*255);return Tt<<16|$t<<8|Rt}clone(){return new st(this.r,this.g,this.b)}copy(Tt){return this.r=Tt.r,this.g=Tt.g,this.b=Tt.b,this}scaled(){var Tt={};return Tt.r=Math.round(this.r*255),Tt.g=Math.round(this.g*255),Tt.b=Math.round(this.b*255),Tt.a=1,Tt}}class at{static color(Tt){if(!Tt)return at.cache[0];if(Tt instanceof st)return Tt;if(typeof Tt=="number"&&typeof at.cache[Tt]<"u")return at.cache[Tt];if(Tt&&Array.isArray(Tt))return Tt.map(at.color);let $t=at.getHex(Tt),Rt=new st($t);return at.cache[$t]=Rt,Rt}static getHex(Tt){var $t;if(Array.isArray(Tt))return Tt.map(at.getHex);if(typeof Tt=="string"){let Rt=Tt;if(!isNaN(parseInt(Rt)))return parseInt(Rt);if(Rt=Rt.trim(),Rt.length==4&&Rt[0]=="#"&&(Rt="#"+Rt[1]+Rt[1]+Rt[2]+Rt[2]+Rt[3]+Rt[3]),Rt.length==7&&Rt[0]=="#")return parseInt(Rt.substring(1),16);let Et=at.rgbRegEx.exec(Rt);if(Et){Et[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let wt=0;for(let Pt=2;Pt<5;Pt++){wt*=256;let Ft=Et[Pt].endsWith("%")?255*parseFloat(Et[Pt])/100:parseFloat(Et[Pt]);wt+=Math.round(Ft)}return wt}return(($t=window==null?void 0:window.$3Dmol)===null||$t===void 0?void 0:$t.htmlColors[Tt.toLowerCase()])||0}return Tt}}at.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,at.cache={0:new st(0)};const lt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},dt={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},yt={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},vt={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:yt,defaultColors:Object.assign({},yt),greenCarbon:Object.assign(Object.assign({},yt),{C:65280}),cyanCarbon:Object.assign(Object.assign({},yt),{C:65535}),magentaCarbon:Object.assign(Object.assign({},yt),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},yt),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},yt),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},yt),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},yt),{C:8388736}),blueCarbon:Object.assign(Object.assign({},yt),{C:255})},_t={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},bt={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},Mt={ssPyMol:{prop:"ss",map:dt.pyMol},ssJmol:{prop:"ss",map:dt.Jmol},Jmol:{prop:"elem",map:vt.Jmol},amino:{prop:"resn",map:_t.amino},shapely:{prop:"resn",map:_t.shapely},nucleic:{prop:"resn",map:_t.nucleic},chain:{prop:"chain",map:bt.atom},rasmol:{prop:"elem",map:vt.rasmol},default:{prop:"elem",map:vt.defaultColors},greenCarbon:{prop:"elem",map:vt.greenCarbon},chainHetatm:{prop:"chain",map:bt.hetatm},cyanCarbon:{prop:"elem",map:vt.cyanCarbon},magentaCarbon:{prop:"elem",map:vt.magentaCarbon},purpleCarbon:{prop:"elem",map:vt.purpleCarbon},whiteCarbon:{prop:"elem",map:vt.whiteCarbon},orangeCarbon:{prop:"elem",map:vt.orangeCarbon},yellowCarbon:{prop:"elem",map:vt.yellowCarbon},blueCarbon:{prop:"elem",map:vt.blueCarbon}}},"./src/glcartoon.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{drawCartoon:()=>cn,subdivide_spline:()=>bt});var st=rt("./src/WebGL/math/index.ts"),at=rt("./src/WebGL/shapes/index.ts"),lt=rt("./src/WebGL/index.ts"),dt=rt("./src/Gradient.ts"),yt=rt("./src/colors.ts"),vt=rt("./src/GLDraw.ts"),_t=rt("./src/utilities.ts");function bt(an,mn){var En=[],Cn=an;Cn=[],Cn.push(an[0]);var Mn,un,Tn,Pn,dn,Un,qn,In,Wn;for(Mn=1,un=an.length-1;Mn<un;Mn++)if(dn=an[Mn],Un=an[Mn+1],dn.smoothen){var ar=new st.Vector3((dn.x+Un.x)/2,(dn.y+Un.y)/2,(dn.z+Un.z)/2);ar.atom=dn.atom,Cn.push(ar)}else Cn.push(dn);for(Cn.push(an[an.length-1]),Mn=-1,Tn=Cn.length;Mn<=Tn-3;Mn++)if(Pn=Cn[Mn===-1?0:Mn],dn=Cn[Mn+1],Un=Cn[Mn+2],qn=Cn[Mn===Tn-3?Tn-1:Mn+3],In=new st.Vector3().subVectors(Un,Pn).multiplyScalar(.5),Wn=new st.Vector3().subVectors(qn,dn).multiplyScalar(.5),!Un.skip)for(var fr=0;fr<mn;fr++){var mr=1/mn*fr,vr=dn.x+mr*In.x+mr*mr*(-3*dn.x+3*Un.x-2*In.x-Wn.x)+mr*mr*mr*(2*dn.x-2*Un.x+In.x+Wn.x),Ar=dn.y+mr*In.y+mr*mr*(-3*dn.y+3*Un.y-2*In.y-Wn.y)+mr*mr*mr*(2*dn.y-2*Un.y+In.y+Wn.y),$r=dn.z+mr*In.z+mr*mr*(-3*dn.z+3*Un.z-2*In.z-Wn.z)+mr*mr*mr*(2*dn.z-2*Un.z+In.z+Wn.z),Mr=new st.Vector3(vr,Ar,$r);fr<mn/2?Mr.atom=dn.atom:Mr.atom=Un.atom,En.push(Mr)}return En.push(Cn[Cn.length-1]),En}const Mt=.5,Ct=1.3,Tt=.8,$t=.4,Rt=.4;function Et(an,mn,En,Cn){for(var Mn,un,Tn,Pn,dn=0,Un=mn.length;dn<Un;dn++){Pn=Math.round(dn*(Cn.length-1)/Un),Tn=yt.CC.color(Cn[Pn]);var qn=an.updateGeoGroup(2),In=qn.vertexArray,Wn=qn.colorArray,ar=qn.faceArray;Mn=qn.vertices,un=Mn*3,In[un]=mn[dn].x,In[un+1]=mn[dn].y,In[un+2]=mn[dn].z,In[un+3]=En[dn].x,In[un+4]=En[dn].y,In[un+5]=En[dn].z;for(var fr=0;fr<6;++fr)Wn[un+3*fr]=Tn.r,Wn[un+1+3*fr]=Tn.g,Wn[un+2+3*fr]=Tn.b;if(dn>0){var mr=[Mn,Mn+1,Mn-1,Mn-2],vr=qn.faceidx;ar[vr]=mr[0],ar[vr+1]=mr[1],ar[vr+2]=mr[3],ar[vr+3]=mr[1],ar[vr+4]=mr[2],ar[vr+5]=mr[3],qn.faceidx+=6}qn.vertices+=2}}function wt(an,mn,En,Cn,Mn,un,Tn){var Pn,dn,Un,qn;if(Un=mn.length,Un<2||mn[0].length<2)return;for(Pn=0;Pn<Un;Pn++)mn[Pn]=bt(mn[Pn],Cn);if(qn=mn[0].length,!Mn)return Et(an,mn[0],mn[Un-1],En);var In,Wn,ar,fr,mr,vr,Ar=[],$r=[],Mr=[];for(dn=0;dn<Un;dn++)Ar.push(.25+1.5*Math.sqrt((Un-1)*dn-Math.pow(dn,2))/(Un-1)),$r.push(.5),Mr.push(2*(Math.pow(dn/Un,2)-dn/Un)+.6);var Jn=[];for(dn=0;dn<Un*2-1;dn++)Jn[dn]=[dn,dn+1,dn+1-2*Un,dn-2*Un];Jn[Un*2-1]=[dn,dn+1-2*Un,dn+1-4*Un,dn-2*Un];var hr,wr,Nr,Fr,Yr,cs,cr,Qn,_r,Ir;let pr=an.updateGeoGroup();for(Pn=0;Pn<qn;Pn++){let rr=an.groups,ur=!1;pr=an.updateGeoGroup(2*Un),rr!=an.groups&&Pn>0&&(Pn=Pn-1,ur=!0),cs=Math.round(Pn*(En.length-1)/qn),Yr=yt.CC.color(En[cs]),mr=ar,vr=fr,ar=[],fr=[],In=[],mn[0][Pn].atom!==void 0&&(Fr=mn[0][Pn].atom,Tn==="oval"?Wn=Ar:Tn==="rectangle"?Wn=$r:Tn==="parabola"&&(Wn=Mr)),Wn||(Wn=$r);var Tr,Wr;for(dn=0;dn<Un;dn++)Pn<qn-1?Tr=mn[dn][Pn+1].clone().sub(mn[dn][Pn]):Tr=mn[dn][Pn-1].clone().sub(mn[dn][Pn]).negate(),dn<Un-1?Wr=mn[dn+1][Pn].clone().sub(mn[dn][Pn]):Wr=mn[dn-1][Pn].clone().sub(mn[dn][Pn]).negate(),In[dn]=Wr.cross(Tr).normalize().multiplyScalar(Mn*Wn[dn]);for(dn=0;dn<Un;dn++)ar[dn]=mn[dn][Pn].clone().add(In[dn].clone().negate());for(dn=0;dn<Un;dn++)fr[dn]=mn[dn][Pn].clone().add(In[dn]);for(cr=pr.vertexArray,Qn=pr.colorArray,_r=pr.faceArray,hr=pr.vertices,wr=hr*3,dn=0;dn<Un;dn++)cr[wr+3*dn+0]=ar[dn].x,cr[wr+3*dn+1]=ar[dn].y,cr[wr+3*dn+2]=ar[dn].z;for(dn=0;dn<Un;dn++)cr[wr+3*dn+0+3*Un]=fr[Un-1-dn].x,cr[wr+3*dn+1+3*Un]=fr[Un-1-dn].y,cr[wr+3*dn+2+3*Un]=fr[Un-1-dn].z;for(dn=0;dn<2*Un;++dn)Qn[wr+3*dn+0]=Yr.r,Qn[wr+3*dn+1]=Yr.g,Qn[wr+3*dn+2]=Yr.b;if(Pn>0&&!ur){for(dn=0;dn<Un*2;dn++)Ir=[hr+Jn[dn][0],hr+Jn[dn][1],hr+Jn[dn][2],hr+Jn[dn][3]],Nr=pr.faceidx,_r[Nr]=Ir[0],_r[Nr+1]=Ir[1],_r[Nr+2]=Ir[3],_r[Nr+3]=Ir[1],_r[Nr+4]=Ir[2],_r[Nr+5]=Ir[3],pr.faceidx+=6;if(Fr.clickable||Fr.hoverable){var Kn=[];Kn.push(new at.Triangle(mr[0],ar[0],ar[Un-1])),Kn.push(new at.Triangle(mr[0],ar[Un-1],mr[Un-1])),Kn.push(new at.Triangle(mr[Un-1],ar[Un-1],fr[Un-1])),Kn.push(new at.Triangle(mr[Un-1],fr[Un-1],vr[Un-1])),Kn.push(new at.Triangle(fr[0],vr[0],vr[Un-1])),Kn.push(new at.Triangle(fr[Un-1],fr[0],vr[Un-1])),Kn.push(new at.Triangle(ar[0],mr[0],vr[0])),Kn.push(new at.Triangle(fr[0],ar[0],vr[0]));for(dn in Kn)Fr.intersectionShape.triangle.push(Kn[dn])}}pr.vertices+=2*Un}for(cr=pr.vertexArray,Qn=pr.colorArray,_r=pr.faceArray,hr=pr.vertices,wr=hr*3,Nr=pr.faceidx,Pn=0;Pn<Un-1;Pn++)Ir=[Pn,Pn+1,2*Un-2-Pn,2*Un-1-Pn],Nr=pr.faceidx,_r[Nr]=Ir[0],_r[Nr+1]=Ir[1],_r[Nr+2]=Ir[3],_r[Nr+3]=Ir[1],_r[Nr+4]=Ir[2],_r[Nr+5]=Ir[3],pr.faceidx+=6;for(Pn=0;Pn<Un-1;Pn++)Ir=[hr-1-Pn,hr-2-Pn,hr-2*Un+Pn+1,hr-2*Un+Pn],Nr=pr.faceidx,_r[Nr]=Ir[0],_r[Nr+1]=Ir[1],_r[Nr+2]=Ir[3],_r[Nr+3]=Ir[1],_r[Nr+4]=Ir[2],_r[Nr+5]=Ir[3],pr.faceidx+=6}function Pt(an,mn,En,Cn,Mn,un){if(!(mn.length<2)){var Tn,Pn;if(Tn=mn[0],Pn=mn[mn.length-1],Tn=bt(Tn,Cn),Pn=bt(Pn,Cn),!Mn)return Et(an,Tn,Pn,En);var dn=[],Un,qn,In,Wn,ar,fr=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],mr,vr,Ar,$r,Mr,Jn,hr,wr,Nr,Fr,Yr,cs,cr,Qn,_r,Ir,pr;for(wr=0,Nr=Tn.length;wr<Nr;wr++){if(Mr=Math.round(wr*(En.length-1)/Nr),$r=yt.CC.color(En[Mr]),dn.push(qn=Tn[wr]),dn.push(qn),dn.push(In=Pn[wr]),dn.push(In),wr<Nr-1){var Tr=Tn[wr+1].clone().sub(Tn[wr]),Wr=Pn[wr].clone().sub(Tn[wr]);Un=Wr.cross(Tr).normalize().multiplyScalar(Mn)}for(dn.push(Wn=Tn[wr].clone().add(Un)),dn.push(Wn),dn.push(ar=Pn[wr].clone().add(Un)),dn.push(ar),qn.atom!==void 0&&(Jn=qn.atom),Qn=an.updateGeoGroup(8),_r=Qn.vertexArray,Ir=Qn.colorArray,pr=Qn.faceArray,mr=Qn.vertices,vr=mr*3,_r[vr]=qn.x,_r[vr+1]=qn.y,_r[vr+2]=qn.z,_r[vr+3]=qn.x,_r[vr+4]=qn.y,_r[vr+5]=qn.z,_r[vr+6]=In.x,_r[vr+7]=In.y,_r[vr+8]=In.z,_r[vr+9]=In.x,_r[vr+10]=In.y,_r[vr+11]=In.z,_r[vr+12]=Wn.x,_r[vr+13]=Wn.y,_r[vr+14]=Wn.z,_r[vr+15]=Wn.x,_r[vr+16]=Wn.y,_r[vr+17]=Wn.z,_r[vr+18]=ar.x,_r[vr+19]=ar.y,_r[vr+20]=ar.z,_r[vr+21]=ar.x,_r[vr+22]=ar.y,_r[vr+23]=ar.z,Fr=0;Fr<8;++Fr)Ir[vr+3*Fr]=$r.r,Ir[vr+1+3*Fr]=$r.g,Ir[vr+2+3*Fr]=$r.b;if(wr>0){var Kn=hr!==void 0&&Jn!==void 0&&hr.serial!==Jn.serial;for(Fr=0;Fr<4;Fr++){var rr=[mr+fr[Fr][0],mr+fr[Fr][1],mr+fr[Fr][2],mr+fr[Fr][3]];if(Ar=Qn.faceidx,pr[Ar]=rr[0],pr[Ar+1]=rr[1],pr[Ar+2]=rr[3],pr[Ar+3]=rr[1],pr[Ar+4]=rr[2],pr[Ar+5]=rr[3],Qn.faceidx+=6,Jn.clickable||hr.clickable||Jn.hoverable||hr.hoverable){var ur=dn[rr[3]].clone(),Sr=dn[rr[0]].clone(),gr=dn[rr[2]].clone(),Gr=dn[rr[1]].clone();if(ur.atom=dn[rr[3]].atom||null,gr.atom=dn[rr[2]].atom||null,Sr.atom=dn[rr[0]].atom||null,Gr.atom=dn[rr[1]].atom||null,Kn){var jr=ur.clone().add(Sr).multiplyScalar(.5),er=gr.clone().add(Gr).multiplyScalar(.5),yr=ur.clone().add(Gr).multiplyScalar(.5);Fr%2===0?((hr.clickable||hr.hoverable)&&(Yr=new at.Triangle(jr,yr,ur),cs=new at.Triangle(er,gr,yr),cr=new at.Triangle(yr,gr,ur),hr.intersectionShape.triangle.push(Yr),hr.intersectionShape.triangle.push(cs),hr.intersectionShape.triangle.push(cr)),(Jn.clickable||Jn.hoverable)&&(Yr=new at.Triangle(Sr,Gr,yr),cs=new at.Triangle(Gr,er,yr),cr=new at.Triangle(Sr,yr,jr),Jn.intersectionShape.triangle.push(Yr),Jn.intersectionShape.triangle.push(cs),Jn.intersectionShape.triangle.push(cr))):((Jn.clickable||Jn.hoverable)&&(Yr=new at.Triangle(jr,yr,ur),cs=new at.Triangle(er,gr,yr),cr=new at.Triangle(yr,gr,ur),Jn.intersectionShape.triangle.push(Yr),Jn.intersectionShape.triangle.push(cs),Jn.intersectionShape.triangle.push(cr)),(hr.clickable||hr.hoverable)&&(Yr=new at.Triangle(Sr,Gr,yr),cs=new at.Triangle(Gr,er,yr),cr=new at.Triangle(Sr,yr,jr),hr.intersectionShape.triangle.push(Yr),hr.intersectionShape.triangle.push(cs),hr.intersectionShape.triangle.push(cr)))}else(Jn.clickable||Jn.hoverable)&&(Yr=new at.Triangle(Sr,Gr,ur),cs=new at.Triangle(Gr,gr,ur),Jn.intersectionShape.triangle.push(Yr),Jn.intersectionShape.triangle.push(cs))}}}Qn.vertices+=8,hr=Jn}var Er=dn.length-8;for(Qn=an.updateGeoGroup(8),_r=Qn.vertexArray,Ir=Qn.colorArray,pr=Qn.faceArray,mr=Qn.vertices,vr=mr*3,Ar=Qn.faceidx,wr=0;wr<4;wr++){dn.push(dn[wr*2]),dn.push(dn[Er+wr*2]);var Hr=dn[wr*2],lr=dn[Er+wr*2];_r[vr+6*wr]=Hr.x,_r[vr+1+6*wr]=Hr.y,_r[vr+2+6*wr]=Hr.z,_r[vr+3+6*wr]=lr.x,_r[vr+4+6*wr]=lr.y,_r[vr+5+6*wr]=lr.z,Ir[vr+6*wr]=$r.r,Ir[vr+1+6*wr]=$r.g,Ir[vr+2+6*wr]=$r.b,Ir[vr+3+6*wr]=$r.r,Ir[vr+4+6*wr]=$r.g,Ir[vr+5+6*wr]=$r.b}Er+=8,Yr=[mr,mr+2,mr+6,mr+4],cs=[mr+1,mr+5,mr+7,mr+3],pr[Ar]=Yr[0],pr[Ar+1]=Yr[1],pr[Ar+2]=Yr[3],pr[Ar+3]=Yr[1],pr[Ar+4]=Yr[2],pr[Ar+5]=Yr[3],pr[Ar+6]=cs[0],pr[Ar+7]=cs[1],pr[Ar+8]=cs[3],pr[Ar+9]=cs[1],pr[Ar+10]=cs[2],pr[Ar+11]=cs[3],Qn.faceidx+=12,Qn.vertices+=8}}function Ft(an,mn,En,Cn,Mn,un,Tn){(!Tn||Tn==="default")&&(Tn="rectangle"),Tn==="edged"?Pt(an,mn,En,Cn,Mn):(Tn==="rectangle"||Tn==="oval"||Tn==="parabola")&&wt(an,mn,En,Cn,Mn,un,Tn)}function Nt(an){return an&&an.elem==="C"&&an.atom==="CA"}function Ot(an,mn){if(an&&mn&&an.chain===mn.chain){if(!an.hetflag&&!mn.hetflag&&an.reschain===mn.reschain&&(an.resi===mn.resi||an.resi===mn.resi-1))return!0;if(an.resi<mn.resi){var En=an.x-mn.x,Cn=an.y-mn.y,Mn=an.z-mn.z,un=En*En+Cn*Cn+Mn*Mn;if(an.atom=="CA"&&mn.atom=="CA"&&un<16)return!0;if((an.atom=="P"||mn.atom=="P")&&un<64)return!0}}return!1}function Bt(an,mn,En,Cn,Mn){if(!(mn==null||mn.vertices==0)){Mn&&(mn.initTypedArrays(),mn.setUpNormals());var un=new lt.MeshDoubleLambertMaterial;un.vertexColors=lt.Coloring.FaceColors,typeof En=="number"&&En>=0&&En<1&&(un.transparent=!0,un.opacity=En),un.outline=Cn;var Tn=new lt.Mesh(mn,un);an.add(Tn)}}function Xt(an,mn,En,Cn,Mn,un,Tn,Pn,dn){var Un,qn,In,Wn,ar,fr;if(!(!Cn||!Mn||!Tn)){var mr=Mn.sub(Cn);mr.normalize();var vr=Pn[dn];for(qn=dn+1;qn<Pn.length&&(vr=Pn[qn],vr.atom!=Tn.atom);qn++);if(vr=vr?new st.Vector3(vr.x,vr.y,vr.z):new st.Vector3(0,0,0),vr.sub(Cn),Tn.ss==="arrow start"){var Ar=vr.clone().multiplyScalar(.3).cross(Mn);Cn.add(Ar);var $r=vr.clone().cross(mr).normalize();mr.rotateAboutVector($r,.43)}for(Tn.style.cartoon.ribbon?Un=Tn.style.cartoon.thickness||$t:Tn.style.cartoon.width?Un=Tn.style.cartoon.width:Tn.ss==="c"?Tn.atom==="P"?Un=Tt:Un=Mt:Tn.ss==="arrow start"?(Un=Ct,ar=!0):Tn.ss==="arrow end"||Tn.ss==="h"&&Tn.style.cartoon.tubes||Tn.ss==="tube start"?Un=Mt:Un=Ct,un!=null&&mr.dot(un)<0&&mr.negate(),mr.multiplyScalar(Un),qn=0;qn<mn;qn++)In=-1+qn*2/(mn-1),Wn=new st.Vector3(Cn.x+In*mr.x,Cn.y+In*mr.y,Cn.z+In*mr.z),Wn.atom=Tn,Tn.ss==="s"&&(Wn.smoothen=!0),an[qn].push(Wn);if(ar)for(mr.multiplyScalar(2),qn=0;qn<mn;qn++)In=-1+qn*2/(mn-1),Wn=new st.Vector3(Cn.x+In*mr.x,Cn.y+In*mr.y,Cn.z+In*mr.z),Wn.atom=Tn,Wn.smoothen=!1,Wn.skip=!0,an[qn].push(Wn);return fr=Tn.style.cartoon.style||"default",an.style?an.style!=fr&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),an.style="default"):an.style=fr,(Tn.ss==="arrow start"||Tn.ss==="arrow end")&&(Tn.ss="s"),ar}}const Zt={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},rn={DA:!0,DG:!0,A:!0,G:!0},Gt={DT:!0,DC:!0,U:!0,C:!0,T:!0},nn={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function cn(an,mn,En,Cn=10){let Mn=Cn,un=Cn;var Tn,Pn,dn,Un,qn,In,Wn,ar,fr,mr,vr,Ar,$r,Mr,Jn,hr,wr,Nr,Fr=new lt.Geometry(!0),Yr=new lt.Geometry(!0),cs=[],cr=[],Qn=1,_r=!1,Ir={};for(var pr in dt.Gradient.builtinGradients)dt.Gradient.builtinGradients.hasOwnProperty(pr)&&(Ir[pr]=new dt.Gradient.builtinGradients[pr](En[1],En[0]));var Tr=function(Hn,kr){return En&&kr.color==="spectrum"?kr.colorscheme in Ir?Ir[kr.colorscheme].valueToHex(Hn.resi):Ir.sinebow.valueToHex(Hn.resi):(0,_t.getColorFromStyle)(Hn,kr).getHex()};for(ar=0;ar<Mn;ar++)cr[ar]=[];var Wr=!1,Kn=!1,rr=[];for(ar in mn){if(Un=mn[ar],Un.elem==="C"&&Un.atom==="CA"){var ur=Ot(dn,Un);ur&&Un.ss==="s"?Wr=!0:Wr&&(dn&&Pn&&dn.style.cartoon.arrows&&Pn.style.cartoon.arrows&&(dn.ss="arrow end",Pn.ss="arrow start"),Wr=!1),ur&&(dn.ss==="h"||dn.ss=="tube start")&&dn.style.cartoon.tubes?!Kn&&dn.ss!="tube start"&&Un.style.cartoon.tubes&&(Un.ss="tube start",Kn=!0):Kn&&(dn.ss==="tube start"?dn.ss="tube end":Pn&&Pn.style.cartoon.tubes&&(Pn.ss="tube end"),Kn=!1),Pn=dn,dn=Un}Un&&Un.atom in Zt&&rr.push(Un)}Kn&&dn.style.cartoon.tubes&&(dn.ss="tube end",Kn=!1);var Sr=function(Hn){cr[0].length>0&&Ft(Yr,cr,cs,un,Wn,Qn,cr.style);var kr=[],Cs=null;if(Hn){for(ar=0;ar<Mn;ar++)kr[ar]=cr[ar][cr[ar].length-1];Cs=cs[cs.length-1]}for(cr=[],ar=0;ar<Mn;ar++)cr[ar]=[];if(cs=[],Hn){for(ar=0;ar<Mn;ar++)cr[ar].push(kr[ar]);cs.push(Cs)}Bt(an,Yr,Qn,_r,!0),Bt(an,Fr,Qn,_r,!1),Yr=new lt.Geometry(!0),Fr=new lt.Geometry(!0)};dn=void 0;for(var gr=0;gr<rr.length;gr++){Un=rr[gr];var Gr=Un.resn.trim(),jr=Gr in nn;if(Qn=1,Tn=Un.style.cartoon,dn&&dn.style.cartoon&&(Qn=dn.style.cartoon.opacity),dn&&dn.style.cartoon&&dn.style.cartoon.outline&&(_r=dn.style.cartoon.outline),dn&&dn.style.cartoon&&(!Un.style.cartoon||dn.style.cartoon.opacity!=Un.style.cartoon.opacity)&&Sr(dn.chain==Un.chain),Tn.style==="trace"){if(!Un.hetflag){if(Un.elem==="C"&&Un.atom==="CA"||jr&&Un.atom==="P"||Un.atom==="BB"){if(In=Tr(Un,Tn),(0,_t.isNumeric)(Tn.thickness)?Wn=Tn.thickness:Wn=$t,Ot(dn,Un))if(In==qn){var er=yt.CC.color(In);vt.GLDraw.drawCylinder(Fr,dn,Un,Wn,er,2,2)}else{var yr=new st.Vector3().addVectors(dn,Un).multiplyScalar(.5),Er=yt.CC.color(qn),Hr=yt.CC.color(In);vt.GLDraw.drawCylinder(Fr,dn,yr,Wn,Er,2,0),vt.GLDraw.drawCylinder(Fr,yr,Un,Wn,Hr,0,2)}if((Un.clickable===!0||Un.hoverable)&&Un.intersectionShape!==void 0){var lr=new st.Vector3(Un.x,Un.y,Un.z);Un.intersectionShape.sphere.push(new at.Sphere(lr,Wn))}dn=Un,qn=In}}}else{if(Nt(Un)||jr&&(Un.atom==="P"||Un.atom.indexOf("O5")==0)){if(Nr)if(Un.ss==="tube end")Nr=!1,wr=new st.Vector3(Un.x,Un.y,Un.z),vt.GLDraw.drawCylinder(Fr,hr,wr,2,yt.CC.color(qn),1,1),Un.ss="h";else if(dn.chain!=Un.chain||dn.ss==="tube end")Nr=!1,dn.ss="h",wr=new st.Vector3(dn.x,dn.y,dn.z),vt.GLDraw.drawCylinder(Fr,hr,wr,2,yt.CC.color(qn),1,1);else continue;if(dn&&(!Ot(dn,Un)||dn.ss==="tube start")){for(dn.ss==="tube start"&&(Nr=!0,hr=new st.Vector3(dn.x,dn.y,dn.z),dn.ss="h"),Jn&&(Ar?Mr=new st.Vector3().addVectors(dn,Ar).multiplyScalar(.5):Mr=new st.Vector3(dn.x,dn.y,dn.z),vt.GLDraw.drawCylinder(Fr,Mr,Jn,Rt,yt.CC.color(Jn.color),0,2),Xt(cr,Mn,!0,Ar,$r,vr,dn,rr,gr),cs.push(In),Mr=null,Jn=null),cr[0].length>0&&Ft(Yr,cr,cs,un,Wn,Qn,cr.style),cr=[],ar=0;ar<Mn;ar++)cr[ar]=[];cs=[]}if(dn===void 0||dn.rescode!=Un.rescode||dn.resi!=Un.resi){if(Jn&&dn!=null){Mr=new st.Vector3().addVectors(dn,Un).multiplyScalar(.5);var Br=Mr.clone().sub(Jn).multiplyScalar(.02);Mr.add(Br),vt.GLDraw.drawCylinder(Fr,Mr,Jn,Rt,yt.CC.color(Jn.color),0,2),Mr=null,Jn=null}In=Tr(Un,Tn),cs.push(In),(0,_t.isNumeric)(Tn.thickness)?Wn=Tn.thickness:Wn=$t,dn=Un,fr=new st.Vector3(dn.x,dn.y,dn.z),fr.resi=dn.resi,qn=In}(Un.clickable===!0||Un.hoverable===!0)&&(Un.intersectionShape===void 0||Un.intersectionShape.triangle===void 0)&&(Un.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else dn!=null&&(Nt(dn)&&Un.atom==="O"||jr&&dn.atom==="P"&&(Un.atom==="OP2"||Un.atom==="O2P")||jr&&dn.atom.indexOf("O5")==0&&Un.atom.indexOf("C5")==0)?(mr=new st.Vector3(Un.x,Un.y,Un.z),mr.resi=Un.resi,(Un.atom==="OP2"||Un.atom==="O2P")&&($r=new st.Vector3(Un.x,Un.y,Un.z))):jr&&Un.atom.indexOf("O3")==0?Ar=new st.Vector3(Un.x,Un.y,Un.z):(Un.atom==="N1"&&Gr in rn||Un.atom==="N3"&&Gr in Gt)&&(Jn=new st.Vector3(Un.x,Un.y,Un.z),Jn.color=(0,_t.getColorFromStyle)(Un,Tn).getHex());mr&&fr&&mr.resi===fr.resi&&(Xt(cr,Mn,!0,fr,mr,vr,dn,rr,gr),vr=mr,fr=null,mr=null,cs.push(In))}}Jn&&(Ar?Mr=new st.Vector3().addVectors(dn,Ar).multiplyScalar(.5):Mr=new st.Vector3(dn.x,dn.y,dn.z),vt.GLDraw.drawCylinder(Fr,Mr,Jn,Rt,yt.CC.color(Jn.color),0,2),Xt(cr,Mn,!0,Ar,$r,vr,dn,rr,gr),cs.push(In)),Sr(!1)}},"./src/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{CAP:()=>Rt.CAP,CC:()=>at.CC,CONTEXTS_PER_VIEWPORT:()=>Pt.CONTEXTS_PER_VIEWPORT,Color:()=>at.Color,CustomLinear:()=>st.CustomLinear,Cylinder:()=>_t.Cylinder,GLDraw:()=>Rt.GLDraw,GLModel:()=>wt.GLModel,GLShape:()=>$t.GLShape,GLViewer:()=>Pt.GLViewer,GLVolumetricRender:()=>Tt.GLVolumetricRender,Gradient:()=>st.Gradient,GradientType:()=>st.GradientType,Label:()=>lt.Label,LabelCount:()=>lt.LabelCount,MarchingCube:()=>Mt.MarchingCube,MarchingCubeInitializer:()=>Mt.MarchingCubeInitializer,Matrix3:()=>vt.Matrix3,Matrix4:()=>vt.Matrix4,Parsers:()=>yt.Parsers,PausableTimer:()=>bt.PausableTimer,PointGrid:()=>Mt.PointGrid,ProteinSurface:()=>Mt.ProteinSurface,Quaternion:()=>vt.Quaternion,ROYGB:()=>st.ROYGB,RWB:()=>st.RWB,Ray:()=>vt.Ray,Sinebow:()=>st.Sinebow,Sphere:()=>_t.Sphere,SurfaceType:()=>Mt.SurfaceType,Triangle:()=>_t.Triangle,Vector2:()=>vt.Vector2,Vector3:()=>vt.Vector3,VolumeData:()=>Ct.VolumeData,adjustVolumeStyle:()=>bt.adjustVolumeStyle,applyPartialCharges:()=>dt.applyPartialCharges,autoinit:()=>Ft.autoinit,autoload:()=>Ft.autoload,base64ToArray:()=>bt.base64ToArray,bondLength:()=>yt.bondLength,builtinColorSchemes:()=>at.builtinColorSchemes,builtinGradients:()=>st.builtinGradients,chains:()=>at.chains,clamp:()=>vt.clamp,conversionMatrix3:()=>vt.conversionMatrix3,createStereoViewer:()=>Pt.createStereoViewer,createViewer:()=>Pt.createViewer,createViewerGrid:()=>Pt.createViewerGrid,deepCopy:()=>bt.deepCopy,degToRad:()=>vt.degToRad,download:()=>bt.download,drawCartoon:()=>Et.drawCartoon,elementColors:()=>at.elementColors,extend:()=>bt.extend,get:()=>bt.get,getAtomProperty:()=>bt.getAtomProperty,getColorFromStyle:()=>bt.getColorFromStyle,getElement:()=>bt.getElement,getExtent:()=>bt.getExtent,getGradient:()=>st.getGradient,getPropertyRange:()=>bt.getPropertyRange,getbin:()=>bt.getbin,htmlColors:()=>at.htmlColors,inflateString:()=>bt.inflateString,isEmptyObject:()=>bt.isEmptyObject,isNumeric:()=>bt.isNumeric,makeFunction:()=>bt.makeFunction,mergeGeos:()=>bt.mergeGeos,normalizeValue:()=>st.normalizeValue,partialCharges:()=>dt.partialCharges,processing_autoinit:()=>Ft.processing_autoinit,residues:()=>at.residues,setBondLength:()=>yt.setBondLength,setSyncSurface:()=>Mt.setSyncSurface,specStringToObject:()=>bt.specStringToObject,splitMesh:()=>$t.splitMesh,ssColors:()=>at.ssColors,subdivide_spline:()=>Et.subdivide_spline,syncSurface:()=>Mt.syncSurface,viewers:()=>Ft.viewers});var st=rt("./src/Gradient.ts"),at=rt("./src/colors.ts"),lt=rt("./src/Label.ts"),dt=rt("./src/partialCharges.ts"),yt=rt("./src/parsers/index.ts"),vt=rt("./src/WebGL/math/index.ts"),_t=rt("./src/WebGL/shapes/index.ts"),bt=rt("./src/utilities.ts"),Mt=rt("./src/ProteinSurface4.ts"),Ct=rt("./src/VolumeData.ts"),Tt=rt("./src/VolumetricRender.ts"),$t=rt("./src/GLShape.ts"),Rt=rt("./src/GLDraw.ts"),Et=rt("./src/glcartoon.ts"),wt=rt("./src/GLModel.ts"),Pt=rt("./src/GLViewer.ts"),Ft=rt("./src/autoload.ts");rt("./src/specs.ts"),window&&(window.$3Dmol=tt)},"./src/parsers/BCIF.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{BCIF:()=>$t});var st=rt("./src/utilities.ts"),at=rt("./src/parsers/utils/computeSecondaryStructure.ts"),lt=rt("./src/parsers/utils/processSymmetries.ts"),dt=rt("./src/parsers/cifutils/category.ts"),yt=rt("./src/parsers/utils/assignPDBBonds.ts"),vt=rt("./src/WebGL/index.ts"),_t=rt("./src/parsers/utils/isEmpty.ts"),bt=rt("./src/vendor/mmtf.js");class Mt{constructor(Et){if(this.C={},Et){let wt=Et.getField("comp_id"),Pt=Et.getField("atom_id_1"),Ft=Et.getField("atom_id_2"),Nt=Et.getField("value_order");for(let Ot=0;Ot<wt.length;Ot++){let Bt=wt[Ot],Xt=Pt[Ot],Zt=Ft[Ot],rn=Nt[Ot],Gt=1;rn=="doub"?Gt=2:rn=="trip"&&(Gt=3),this.C[Bt]==null&&(this.C[Bt]={}),this.C[Bt][Xt]==null&&(this.C[Bt][Xt]={}),this.C[Bt][Zt]==null&&(this.C[Bt][Zt]={}),this.C[Bt][Xt][Zt]=Gt,this.C[Bt][Zt][Xt]=Gt}}}order(Et,wt,Pt){return this.C[Et]!==void 0&&this.C[Et][wt]!==void 0&&this.C[Et][wt][Pt]!==void 0?this.C[Et][wt][Pt]:0}}class Ct{constructor(Et){if(this.C=[],Et){let wt=Et.getField("conn_type_id"),Pt=Et.getField("ptnr1_label_asym_id"),Ft=Et.getField("ptnr1_label_seq_id"),Nt=Et.getField("ptnr1_label_comp_id"),Ot=Et.getField("ptnr1_label_atom_id"),Bt=Et.getField("ptnr2_label_asym_id"),Xt=Et.getField("ptnr2_label_seq_id"),Zt=Et.getField("ptnr2_label_comp_id"),rn=Et.getField("ptnr2_label_atom_id"),Gt=Et.getField("pdbx_value_order");for(let nn=0;nn<wt.length;nn++)if(wt[nn]=="disulf"||wt[nn]=="covale"){let cn=Gt?Gt[nn]==""?1:parseInt(Gt[nn]):1;this.C.push([[Pt[nn],Ft[nn],Nt[nn],Ot[nn]],[Bt[nn],Xt[nn],Zt[nn],rn[nn]],cn])}}}}class Tt{constructor(){this.R={}}add(Et){this.R[Et.lchain]==null&&(this.R[Et.lchain]={}),this.R[Et.lchain][Et.lresi]==null&&(this.R[Et.lchain][Et.lresi]={}),this.R[Et.lchain][Et.lresi][Et.lresn]==null&&(this.R[Et.lchain][Et.lresi][Et.lresn]=[]),this.R[Et.lchain][Et.lresi][Et.lresn].push(Et),this.R[Et.lchain][Et.lresi][Et.lresn][Et.atom]=Et}geta([Et,wt,Pt,Ft]){if(this.R[Et]!==void 0&&this.R[Et][wt]!==void 0&&this.R[Et][wt][Pt]!==void 0)return this.R[Et][wt][Pt][Ft]}setBonds(Et,wt){for(let Pt in this.R)for(let Ft in this.R[Pt])for(let Nt in this.R[Pt][Ft]){let Ot=this.R[Pt][Ft][Nt];for(let Bt=0;Bt<Ot.length;Bt++)for(let Xt=Bt+1;Xt<Ot.length;Xt++){let Zt=Ot[Bt],rn=Ot[Xt],Gt=Et.order(Nt,Zt.atom,rn.atom);Zt.altLoc!=rn.altLoc&&Zt.altLoc!=""&&rn.altLoc!=""&&(Gt=0),Gt>0&&(Zt.bonds.push(rn.index),rn.bonds.push(Zt.index),Zt.bondOrder.push(Gt),rn.bondOrder.push(Gt))}}for(let Pt of wt.C){let Ft=Pt[0],Nt=Pt[1],Ot=Pt[2],Bt=this.geta(Ft),Xt=this.geta(Nt);Bt!=null&&Xt!=null&&(Bt.bonds.push(Xt.index),Xt.bonds.push(Bt.index),Bt.bondOrder.push(Ot),Xt.bondOrder.push(Ot))}}}function $t(Rt,Et){var wt=!Et.keepH,Pt=Et.altLoc?Et.altLoc:"A",Ft=!Et.noComputeSecondaryStructure;const Nt=!Et.doAssembly,Ot=Et.assignBonds===void 0?!0:Et.assignBonds;if(typeof Rt=="string")try{Rt=(0,st.base64ToArray)(Rt)}catch{Rt=new TextEncoder().encode(Rt)}else Rt=new Uint8Array(Rt);var Bt=bt.decodeMsgpack(Rt);Bt==31&&(Rt=(0,st.inflateString)(Rt,!1),Bt=bt.decodeMsgpack(Rt));var Xt=[],Zt=Xt.modelData=[],rn=Bt.dataBlocks.length;if(rn==0)return Xt;Et.multimodel||(rn=1);for(let Gt=0;Gt<rn;Gt++){let nn=Xt.length;const cn=[];Zt.push({symmetries:[]}),Xt.push([]);const an=Bt.dataBlocks[Gt],mn=Object.create(null);for(const Ir of an.categories)mn[Ir.name.substr(1)]=(0,dt.Category)(Ir);let En={},Cn=mn.struct_conf;if(Cn){let Ir=Cn.getField("conf_type_id"),pr=Cn.getField("beg_label_asym_id"),Tr=Cn.getField("beg_label_seq_id"),Wr=Cn.getField("end_label_seq_id");for(let Kn=0;Kn<Ir.length;Kn++)if(Ir[Kn].startsWith("H")){let rr=pr[Kn],ur=Tr[Kn],Sr=Wr[Kn];rr in En||(En[rr]={}),En[rr][ur]="h1";for(let gr=ur+1;gr<Sr;gr++)En[rr][gr]="h";En[rr][Sr]="h2"}}let Mn=mn.struct_sheet_range;if(Mn){let Ir=Mn.getField("id"),pr=Mn.getField("beg_label_asym_id"),Tr=Mn.getField("beg_label_seq_id"),Wr=Mn.getField("end_label_seq_id");for(let Kn=0;Kn<Ir.length;Kn++){let rr=pr[Kn],ur=Tr[Kn],Sr=Wr[Kn];rr in En||(En[rr]={}),En[rr][ur]="s1";for(let gr=ur+1;gr<Sr;gr++)En[rr][gr]="s";En[rr][Sr]="s2"}}let un=mn.pdbx_struct_oper_list,Tn=un.getField("id");if(Tn&&!Nt){let Ir=un.getField("matrix[1][1]"),pr=un.getField("matrix[1][2]"),Tr=un.getField("matrix[1][3]"),Wr=un.getField("matrix[2][1]"),Kn=un.getField("matrix[2][2]"),rr=un.getField("matrix[2][3]"),ur=un.getField("matrix[3][1]"),Sr=un.getField("matrix[3][2]"),gr=un.getField("matrix[3][3]"),Gr=un.getField("vector[1]"),jr=un.getField("vector[2]"),er=un.getField("vector[3]");for(let yr=0;yr<Tn.length;yr++){const Er=new vt.Matrix4(Ir[yr],pr[yr],Tr[yr],Gr[yr],Wr[yr],Kn[yr],rr[yr],jr[yr],ur[yr],Sr[yr],gr[yr],er[yr]);Zt[Zt.length-1].symmetries.push(Er)}}let Pn=new Mt(mn.chem_comp_bond),dn=new Tt,Un=new Ct(mn.struct_conn),qn=mn.atom_site,In=qn.rowCount,Wn=qn.getField("group_PDB"),ar=qn.getField("Cartn_x"),fr=qn.getField("Cartn_y"),mr=qn.getField("Cartn_z"),vr=qn.getField("auth_asym_id"),Ar=qn.getField("label_asym_id"),$r=qn.getField("auth_seq_id"),Mr=qn.getField("label_seq_id"),Jn=qn.getField("auth_comp_id"),hr=qn.getField("label_comp_id"),wr=qn.getField("auth_atom_id"),Nr=qn.getField("label_atom_id"),Fr=qn.getField("type_symbol"),Yr=qn.getField("B_iso_or_equiv"),cs=qn.getField("id"),cr=qn.getField("label_alt_id"),Qn=qn.getField("pdbx_PDB_model_num"),_r=Qn?Qn[0]:0;for(let Ir=0;Ir<In;Ir++){if(Wn!==void 0&&Wn[Ir]==="TER")continue;if(Qn&&Qn[Ir]!=_r)if(_r=Qn[Ir],Et.multimodel)Et.onemol||(Xt.push([]),Zt.push(Zt[Zt.length-1]),_r=Qn[Ir],dn.setBonds(Pn,Un),dn=new Tt);else break;const pr={};pr.x=ar[Ir],pr.y=fr[Ir],pr.z=mr[Ir],pr.chain=vr?vr[Ir]:Ar?Ar[Ir]:void 0,pr.lchain=Ar?Ar[Ir]:void 0,pr.resi=$r?$r[Ir]:Mr?Mr[Ir]:void 0,pr.lresi=Mr?Mr[Ir]:void 0,pr.resn=Jn?Jn[Ir].trim():hr?hr[Ir].trim():void 0,pr.lresn=hr?hr[Ir].trim():void 0,pr.atom=wr?wr[Ir].replace(/"/gm,""):Nr?Nr[Ir].replace(/"/gm,""):void 0,pr.icode=cr?cr[Ir]:void 0,pr.altLoc=pr.icode,pr.hetflag=!Wn||Wn[Ir]==="HETA"||Wn[Ir]==="HETATM";let Tr="X";Fr&&(Tr=Fr[Ir].replace(/\(?\+?\d+.*/,"")),pr.elem=Tr[0].toUpperCase()+Tr.substring(1,2).toLowerCase(),Yr&&(pr.b=Yr[Ir]),!(wt&&pr.elem=="H")&&(pr.altLoc!=""&&pr.altLoc!=Pt&&Pt!="*"||(pr.bonds=[],pr.ss="c",pr.serial=cs[Ir],pr.model=_r,pr.bondOrder=[],pr.properties={},pr.index=Xt[Xt.length-1].length,cn[pr.serial]=[Xt.length,pr.index],Xt[Xt.length-1].push(pr),dn.add(pr)))}if(dn.setBonds(Pn,Un),!(0,_t.isEmpty)(En))for(let Ir=nn;Ir<Xt.length;Ir++){let pr=Xt[Ir];for(let Tr=0;Tr<pr.length;Tr++){const Wr=pr[Tr];if(Wr!==void 0&&Wr.lchain in En&&Wr.lresi in En[Wr.lchain]){const Kn=En[Wr.lchain][Wr.lresi];Wr.ss=Kn[0],Kn.length>1&&(Kn[1]=="1"?Wr.ssbegin=!0:Kn[1]=="2"&&(Wr.ssend=!0))}}}Et.multimodel&&Gt<rn-1&&(Et.onemol||(Xt.push([]),Zt.push({symmetries:[]})))}for(let Gt=0;Gt<Xt.length;Gt++)Ot&&!(Et.duplicateAssemblyAtoms&&!Et.dontConnectDuplicatedAtoms)&&(0,yt.assignPDBBonds)(Xt[Gt],Et),Ft&&(0,at.computeSecondaryStructure)(Xt[Gt],Et.hbondCutoff),(0,lt.processSymmetries)(Zt[Gt].symmetries,Xt[Gt],Et,Zt[Gt].cryst),Et.duplicateAssemblyAtoms&&!Et.dontConnectDuplicatedAtoms&&Ot&&(0,yt.assignPDBBonds)(Xt[Gt],Et);return Xt}},"./src/parsers/CDJSON.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{CDJSON:()=>st});function st(at,lt){var dt=[[]];typeof at=="string"&&(at=JSON.parse(at));for(var yt=at.m,vt=yt[0].a,_t=yt[0].b,bt=yt[0].s,Mt=lt!==void 0&&lt.parseStyle!==void 0?lt.parseStyle:bt!==void 0,Ct=dt[dt.length-1].length,Tt=0;Tt<vt.length;Tt++){var $t=vt[Tt],Rt={};Rt.id=$t.i,Rt.x=$t.x,Rt.y=$t.y,Rt.z=$t.z||0,Rt.bonds=[],Rt.bondOrder=[];var Et=$t.l||"C";Rt.elem=Et[0].toUpperCase()+Et.substring(1).toLowerCase(),Rt.serial=dt[dt.length-1].length,Mt&&(Rt.style=bt[$t.s||0]),dt[dt.length-1].push(Rt)}for(let wt=0;wt<_t.length;wt++){let Pt=_t[wt],Ft=Pt.b+Ct,Nt=Pt.e+Ct,Ot=Pt.o||1,Bt=dt[dt.length-1][Ft],Xt=dt[dt.length-1][Nt];Bt.bonds.push(Nt),Bt.bondOrder.push(Ot),Xt.bonds.push(Ft),Xt.bondOrder.push(Ot)}return dt}},"./src/parsers/CIF.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{CIF:()=>vt});var st=rt("./src/parsers/utils/computeSecondaryStructure.ts"),at=rt("./src/parsers/utils/processSymmetries.ts"),lt=rt("./src/WebGL/index.ts"),dt=rt("./src/parsers/utils/assignPDBBonds.ts");const yt=function(_t,bt,Mt,Ct){return new lt.Vector3(bt,Mt,Ct).applyMatrix3(_t)};function vt(_t,bt={}){const Mt=[],Ct=!bt.doAssembly,Tt=Mt.modelData=[],$t=bt.assignBonds===void 0?!0:bt.assignBonds;function Rt(Ot,Bt){const Xt=[];let Zt=0,rn=0;for(;rn<Ot.length;){for(;Ot.substring(rn,rn+Bt.length)!==Bt&&rn<Ot.length;)if(Ot[rn]==="'"){for(rn++;rn<Ot.length&&Ot[rn]!=="'";)rn++;for(;Ot.substring(rn,rn+Bt.length)!==Bt&&rn<Ot.length;)rn++}else if(Ot[rn]==='"'){for(rn++;rn<Ot.length&&Ot[rn]!=='"';)rn++;rn++}else rn++;Xt.push(Ot.substring(Zt,rn)),Zt=rn=rn+Bt.length}return Xt}const Et=_t.split(/\r?\n|\r/),wt=[];let Pt=!1;for(let Ot=0;Ot<Et.length;Ot++){var Ft=Et[Ot].split("#")[0];if(Pt?Ft[0]===";"&&(Pt=!1):Ft[0]===";"&&(Pt=!0),Pt||Ft!==""){if(!Pt&&(Ft=Ft.trim(),Ft[0]==="_")){const Bt=Ft.split(/\s/)[0].indexOf(".");if(Bt>-1){let Xt=Ft.split("");Xt[Bt]="_",Ft=Xt.join(""),Ft=Ft.substring(0,Bt)+"_"+Ft.substring(Bt+1)}}wt.push(Ft)}}let Nt=0;for(;Nt<wt.length;){for(;!wt[Nt].startsWith("data_")||wt[Nt]==="data_global";)Nt++;Nt++;const Ot={};for(;Nt<wt.length&&!wt[Nt].startsWith("data_");)if(wt[Nt][0]===void 0)Nt++;else if(wt[Nt][0]==="_"){const rn=wt[Nt].split(/\s/)[0].toLowerCase(),Gt=Ot[rn]=Ot[rn]||[],nn=wt[Nt].substring(wt[Nt].indexOf(rn)+rn.length);if(nn==="")if(Nt++,wt[Nt][0]===";"){let cn=wt[Nt].substring(1);for(Nt++;wt[Nt]!==";";)cn=cn+`
`+wt[Nt],Nt++;Gt.push(cn)}else Gt.push(wt[Nt]);else Gt.push(nn.trim());Nt++}else if(wt[Nt].substring(0,5)==="loop_"){Nt++;const rn=[];for(;wt[Nt]===""||wt[Nt][0]==="_";){if(wt[Nt]!==""){let nn=wt[Nt].split(/\s/)[0].toLowerCase(),cn=Ot[nn]=Ot[nn]||[];rn.push(cn)}Nt++}let Gt=0;for(;Nt<wt.length&&wt[Nt][0]!=="_"&&!wt[Nt].startsWith("loop_")&&!wt[Nt].startsWith("data_");){let nn=Rt(wt[Nt]," ");for(let cn=0;cn<nn.length;cn++)nn[cn]!==""&&(rn[Gt].push(nn[cn]),Gt=(Gt+1)%rn.length);Nt++}}else Nt++;Tt.push({symmetries:[]}),Mt.push([]);const Bt=Ot._atom_site_id!==void 0?Ot._atom_site_id.length:Ot._atom_site_label.length;let Xt;if(Ot._cell_length_a!==void 0){const rn=parseFloat(Ot._cell_length_a),Gt=parseFloat(Ot._cell_length_b),nn=parseFloat(Ot._cell_length_c),cn=parseFloat(Ot._cell_angle_alpha)||90,an=parseFloat(Ot._cell_angle_beta)||90,mn=parseFloat(Ot._cell_angle_gamma)||90;Xt=(0,lt.conversionMatrix3)(rn,Gt,nn,cn,an,mn),Tt[Tt.length-1].cryst={a:rn,b:Gt,c:nn,alpha:cn,beta:an,gamma:mn}}for(let rn=0;rn<Bt;rn++){if(Ot._atom_site_group_pdb!==void 0&&Ot._atom_site_group_pdb[rn]==="TER")continue;const Gt={};if(Ot._atom_site_cartn_x!==void 0)Gt.x=parseFloat(Ot._atom_site_cartn_x[rn]),Gt.y=parseFloat(Ot._atom_site_cartn_y[rn]),Gt.z=parseFloat(Ot._atom_site_cartn_z[rn]);else{const cn=yt(Xt,parseFloat(Ot._atom_site_fract_x[rn]),parseFloat(Ot._atom_site_fract_y[rn]),parseFloat(Ot._atom_site_fract_z[rn]));Gt.x=cn.x,Gt.y=cn.y,Gt.z=cn.z}Gt.chain=Ot._atom_site_auth_asym_id?Ot._atom_site_auth_asym_id[rn]:Ot._atom_site_label_asym_id?Ot._atom_site_label_asym_id[rn]:void 0,Gt.resi=Ot._atom_site_auth_seq_id?parseInt(Ot._atom_site_auth_seq_id[rn]):Ot._atom_site_label_seq_id?Ot._atom_site_label_seq_id[rn]:void 0,Gt.resn=Ot._atom_site_auth_comp_id?Ot._atom_site_auth_comp_id[rn].trim():Ot._atom_site_label_comp_id?Ot._atom_site_label_comp_id[rn].trim():void 0,Gt.atom=Ot._atom_site_auth_atom_id?Ot._atom_site_auth_atom_id[rn].replace(/"/gm,""):Ot._atom_site_label_atom_id?Ot._atom_site_label_atom_id[rn].replace(/"/gm,""):void 0,Gt.hetflag=!Ot._atom_site_group_pdb||Ot._atom_site_group_pdb[rn]==="HETA"||Ot._atom_site_group_pdb[rn]==="HETATM",Ot._atom_site_b_iso_or_equiv&&(Gt.b=parseFloat(Ot._atom_site_b_iso_or_equiv[rn]));let nn="X";Ot._atom_site_type_symbol?nn=Ot._atom_site_type_symbol[rn].replace(/\(?\+?\d+.*/,""):Ot._atom_site_label&&(nn=Ot._atom_site_label[rn].split("_")[0].replace(/\(?\d+.*/,"")),Gt.elem=nn[0].toUpperCase()+nn.substring(1,2).toLowerCase(),Gt.bonds=[],Gt.ss="c",Gt.serial=rn,Gt.bondOrder=[],Gt.properties={},Mt[Mt.length-1].push(Gt)}if(Ot._pdbx_struct_oper_list_id!==void 0&&!Ct)for(let rn=0;rn<Ot._pdbx_struct_oper_list_id.length;rn++){const Gt=parseFloat(Ot["_pdbx_struct_oper_list_matrix[1][1]"][rn]),nn=parseFloat(Ot["_pdbx_struct_oper_list_matrix[1][2]"][rn]),cn=parseFloat(Ot["_pdbx_struct_oper_list_matrix[1][3]"][rn]),an=parseFloat(Ot["_pdbx_struct_oper_list_vector[1]"][rn]),mn=parseFloat(Ot["_pdbx_struct_oper_list_matrix[2][1]"][rn]),En=parseFloat(Ot["_pdbx_struct_oper_list_matrix[2][2]"][rn]),Cn=parseFloat(Ot["_pdbx_struct_oper_list_matrix[2][3]"][rn]),Mn=parseFloat(Ot["_pdbx_struct_oper_list_vector[2]"][rn]),un=parseFloat(Ot["_pdbx_struct_oper_list_matrix[3][1]"][rn]),Tn=parseFloat(Ot["_pdbx_struct_oper_list_matrix[3][2]"][rn]),Pn=parseFloat(Ot["_pdbx_struct_oper_list_matrix[3][3]"][rn]),dn=parseFloat(Ot["_pdbx_struct_oper_list_vector[3]"][rn]),Un=new lt.Matrix4(Gt,nn,cn,an,mn,En,Cn,Mn,un,Tn,Pn,dn);Tt[Tt.length-1].symmetries.push(Un)}const Zt=function(rn){const Gt=rn.match("-");rn=rn.replace(/[-xyz]/g,"");const nn=rn.split("/");let cn,an;return nn[1]===void 0?an=1:an=parseInt(nn[1]),nn[0]===""?cn=1:cn=parseInt(nn[0]),cn/an*(Gt?-1:1)};if(Ot._symmetry_equiv_pos_as_xyz!==void 0&&!Ct)for(let rn=0;rn<Ot._symmetry_equiv_pos_as_xyz.length;rn++){const nn=Ot._symmetry_equiv_pos_as_xyz[rn].replace(/["' ]/g,"").split(",").map(function(En){return En.replace(/-/g,"+-")});let cn=new lt.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let En=0;En<3;En++){const Cn=nn[En].split("+");for(let Mn=0;Mn<Cn.length;Mn++){const un=Cn[Mn];if(un==="")continue;const Tn=Zt(un);un.match("x")?cn.elements[En+0]=Tn:un.match("y")?cn.elements[En+4]=Tn:un.match("z")?cn.elements[En+8]=Tn:cn.elements[En+12]=Tn}}const an=Xt.getMatrix4(),mn=new lt.Matrix4().getInverse(an,!0);cn=new lt.Matrix4().multiplyMatrices(cn,mn),cn=new lt.Matrix4().multiplyMatrices(an,cn),Tt[Tt.length-1].symmetries.push(cn)}}for(let Ot=0;Ot<Mt.length;Ot++)$t&&!(bt.duplicateAssemblyAtoms&&!bt.dontConnectDuplicatedAtoms)&&(0,dt.assignPDBBonds)(Mt[Ot],bt),(0,st.computeSecondaryStructure)(Mt[Ot],bt.hbondCutoff),(0,at.processSymmetries)(Tt[Ot].symmetries,Mt[Ot],bt,Tt[Ot].cryst),bt.duplicateAssemblyAtoms&&!bt.dontConnectDuplicatedAtoms&&$t&&(0,dt.assignPDBBonds)(Mt[Ot],bt);return Mt}},"./src/parsers/CUBE.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{CUBE:()=>dt});var st=rt("./src/WebGL/index.ts"),at=rt("./src/parsers/utils/assignBonds.ts"),lt=rt("./src/parsers/utils/anumToSymbol.ts");function dt(yt,vt){vt=vt||{};const _t=[[]];let bt=yt.split(/\r?\n/);const Mt=vt.assignBonds===void 0?!0:vt.assignBonds;if(bt.length<6)return _t;let Ct=bt[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const Tt=Math.abs(parseFloat(Ct[0]));let $t={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const Rt=$t.origin=new st.Vector3(parseFloat(Ct[1]),parseFloat(Ct[2]),parseFloat(Ct[3]));Ct=bt[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),Ct=bt[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const Et=Ct[0]>0?.529177:1;Rt.multiplyScalar(Et);const wt=Math.abs(Ct[0]),Pt=new st.Vector3(parseFloat(Ct[1]),parseFloat(Ct[2]),parseFloat(Ct[3])).multiplyScalar(Et);Ct=bt[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const Ft=Math.abs(Ct[0]),Nt=new st.Vector3(parseFloat(Ct[1]),parseFloat(Ct[2]),parseFloat(Ct[3])).multiplyScalar(Et);Ct=bt[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const Ot=Math.abs(Ct[0]),Bt=new st.Vector3(parseFloat(Ct[1]),parseFloat(Ct[2]),parseFloat(Ct[3])).multiplyScalar(Et);if($t.size={x:wt,y:Ft,z:Ot},$t.unit=new st.Vector3(Pt.x,Nt.y,Bt.z),Pt.y!=0||Pt.z!=0||Nt.x!=0||Nt.z!=0||Bt.x!=0||Bt.y!=0){$t.matrix4=new st.Matrix4(Pt.x,Nt.x,Bt.x,0,Pt.y,Nt.y,Bt.y,0,Pt.z,Nt.z,Bt.z,0,0,0,0,1);let an=new st.Matrix4().makeTranslation(Rt.x,Rt.y,Rt.z);$t.matrix4=$t.matrix4.multiplyMatrices(an,$t.matrix4),$t.matrix=$t.matrix4.matrix3FromTopLeft(),$t.origin=new st.Vector3(0,0,0),$t.unit=new st.Vector3(1,1,1)}_t.modelData=[{cryst:$t}],bt=bt.splice(6,Tt);for(var Xt=_t[_t.length-1].length,Zt=Xt+bt.length,rn=Xt;rn<Zt;++rn){var Gt={};Gt.serial=rn;var nn=bt[rn-Xt],cn=nn.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");Gt.elem=lt.anumToSymbol[cn[0]],Gt.x=parseFloat(cn[2])*Et,Gt.y=parseFloat(cn[3])*Et,Gt.z=parseFloat(cn[4])*Et,Gt.hetflag=!0,Gt.bonds=[],Gt.bondOrder=[],Gt.properties={},_t[_t.length-1].push(Gt)}if(Mt)for(let an=0;an<_t.length;an++)(0,at.assignBonds)(_t[an],vt);return _t}},"./src/parsers/GRO.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{GRO:()=>lt});var st=rt("./src/parsers/utils/assignPDBBonds.ts"),at=rt("./src/parsers/utils/atomNameToElem.ts");function lt(dt,yt){const vt=[],_t=dt.split(/\r?\n|\r/);for(;_t.length>0;){const bt=parseInt(_t[1]);if(_t.length<3||isNaN(bt)||bt<=0||_t.length<bt+3)break;const Ct=[];vt.push(Ct);let Tt=2;const $t=Ct.length,Rt=$t+bt;for(let Et=$t;Et<Rt;Et++){const wt=_t[Tt++],Pt={};Pt.serial=Et,Pt.atom=wt.slice(10,15).trim(),Pt.elem=(0,at.atomNameToElem)(Pt.atom,!0),Pt.x=10*parseFloat(wt.slice(20,28)),Pt.y=10*parseFloat(wt.slice(28,36)),Pt.z=10*parseFloat(wt.slice(36,44)),Pt.resi=parseInt(wt.slice(0,5)),Pt.resn=wt.slice(5,10).trim(),Pt.bonds=[],Pt.bondOrder=[],Pt.properties={},wt.length>44&&(Pt.dx=10*parseFloat(wt.slice(44,52)),Pt.dy=10*parseFloat(wt.slice(52,60)),Pt.dz=10*parseFloat(wt.slice(60,68))),Ct[Et]=Pt}if(_t.length<=Tt+3){const wt=_t[Tt++].trim().split(/\s+/);if(wt.length===3){for(let Pt=0;Pt<3;Pt++)wt[Pt]=(parseFloat(wt[Pt])*10).toString();vt.box=wt}}_t.splice(0,++Tt)}for(let bt=0;bt<vt.length;bt++)(0,st.assignPDBBonds)(vt[bt],yt);return vt}},"./src/parsers/LAMMPSTRJ.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{LAMMPSTRJ:()=>lt});var st=rt("./src/parsers/utils/assignBonds.ts");const at={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function lt(dt,yt){const vt=[],_t=dt.split(/\r?\n|\r/);let bt=0,Mt=0,Ct=0;for(;Ct<_t.length-9;){for(var Tt=Ct;Tt<_t.length;Tt++)if(_t[Tt].match(/ITEM: NUMBER OF ATOMS/)&&(Mt=parseInt(_t[Tt+1])),_t[Tt].match(/ITEM: ATOMS/)){bt=Tt+1;break}const $t=_t[bt-1].replace("ITEM: ATOMS ","").split(" ");vt.push([]);for(let Rt=bt;Rt<bt+Mt;Rt++){const Et={},wt={},Pt=_t[Rt].split(" ");for(let Ft=0;Ft<Pt.length;Ft++){const Nt=at[$t[Ft]];Nt!==void 0&&(Nt==="serial"?Et[Nt]=parseInt(Pt[Ft]):Nt==="x"||Nt==="y"||Nt==="z"?Et[Nt]=parseFloat(Pt[Ft]):Nt==="charge"||Nt==="radius"?wt[Nt]=parseFloat(Pt[Ft]):Et[Nt]=Pt[Ft]),Et.properties=wt,Et.bonds=[],Et.bondOrder=[]}vt[vt.length-1][Rt-bt]=Et}Ct=bt+Mt-1}if(yt.assignBonds)for(let $t=0;$t<vt.length;$t++)(0,st.assignBonds)(vt[$t],yt);return vt}},"./src/parsers/MMTF.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{MMTFparser:()=>Mt});var st=rt("./src/utilities.ts"),at=rt("./src/WebGL/index.ts"),lt=rt("./src/parsers/utils/computeSecondaryStructure.ts"),dt=rt("./src/parsers/utils/processSymmetries.ts"),yt=rt("./src/vendor/mmtf.js"),vt=function(Ct){return String.fromCharCode.apply(null,Ct).replace(/\0/g,"")},_t=function(Ct){return Ct==0||Ct==2||Ct==4?"h":Ct==3?"s":"c"};let bt=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function Mt(Ct,Tt){var $t=!Tt.keepH,Rt=Tt.altLoc?Tt.altLoc:"A",Et=!!Tt.noSecondaryStructure,wt=!Tt.noComputeSecondaryStructure,Pt=!Tt.doAssembly,Ft=Tt.assemblyIndex?Tt.assemblyIndex:0;typeof Ct=="string"?Ct=(0,st.base64ToArray)(Ct):Ct=new Uint8Array(Ct);var Nt=yt.decode(Ct),Ot=[[]],Bt=Ot.modelData=[],Xt=0,Zt=0,rn=0,Gt=Nt.secStructList,nn=Nt.bFactorList,cn=Nt.altLocList,an=Nt.occupancyList,mn=Nt.bondAtomList,En=Nt.bondOrderList,Cn=Nt.numModels;if(Cn==0)return Ot;Tt.multimodel||(Cn=1);var Mn,un,Tn,Pn,dn,Un,qn=[];if(!Pt&&Nt.bioAssemblyList&&Nt.bioAssemblyList.length>0){var In=Nt.bioAssemblyList[Ft].transformList;for(Mn=0,Un=In.length;Mn<Un;Mn++){var Wn=new at.Matrix4(In[Mn].matrix);Wn.transpose(),qn.push(Wn)}}var ar=null;if(Nt.unitCell){var fr=Nt.unitCell;ar={a:fr[0],b:fr[1],c:fr[2],alpha:fr[3],beta:fr[4],gamma:fr[5]}}let mr=[];Nt.entityList.forEach(Vr=>{Vr.chainIndexList.forEach(dr=>{mr[dr]=Vr.type=="polymer"})});var vr=0;for(dn=0;dn<Cn;dn++){var Ar=Nt.chainsPerModel[dn],$r=Ot[Ot.length-1],Mr=[];for(Bt.push({symmetries:qn,cryst:ar}),Mn=0;Mn<Ar;++Mn){var Jn=Nt.groupsPerChain[Xt],hr=vt(Nt.chainIdList.subarray(Xt*4,Xt*4+4));Nt.chainNameList&&(hr=vt(Nt.chainNameList.subarray(Xt*4,Xt*4+4)));var wr=Zt,Nr="";for(un=0;un<Jn;++un){var Fr=Nt.groupList[Nt.groupTypeList[Zt]],Yr=Fr.atomNameList.length,cs=0,cr=!1,Qn=!1;if(Gt){cs=Gt[Zt];var _r=_t(cs);(Zt==0||_r!=Nr)&&(cr=!0),Nr=_r;var Ir=Zt+1;(Ir>=Gt.length||_t(Gt[Ir]!=_r))&&(Qn=!0)}var pr=Nt.groupIdList[Zt],Tr=Fr.groupName;let Vr=Fr.chemCompType;var Wr=rn;let dr=bt.has(Vr)||!mr[Xt];for(Tn=0;Tn<Yr;++Tn){var Kn=Fr.elementList[Tn];if($t&&Kn=="H"){rn+=1;continue}var rr="";nn&&(rr=nn[rn]);var ur="";cn&&cn[rn]&&(ur=String.fromCharCode(cn[rn]));var Sr="";if(an&&(Sr=an[rn]),ur!=""&&ur!=Rt&&Rt!="*"){rn+=1;continue}var gr=Nt.atomIdList[rn],Gr=Fr.atomNameList[Tn],jr=0;Fr.atomChargeList&&(jr=Fr.atomChargeList[Tn]);var er=Nt.xCoordList[rn],yr=Nt.yCoordList[rn],Er=Nt.zCoordList[rn];Mr[rn]=$r.length,$r.push({resn:Tr,x:er,y:yr,z:Er,elem:Kn,hetflag:dr,chain:hr,resi:pr,icode:ur,rescode:pr+(ur!=" "?"^"+ur:""),serial:gr,altLoc:ur,index:rn,atom:Gr,bonds:[],ss:_t(cs),ssbegin:cr,ssend:Qn,bondOrder:[],properties:{charge:jr,occupancy:Sr},b:rr}),rn+=1}var Hr=Fr.bondAtomList;for(Tn=0,Pn=Fr.bondOrderList.length;Tn<Pn;++Tn){var lr=Wr+Hr[Tn*2],Br=Wr+Hr[Tn*2+1],Hn=Fr.bondOrderList[Tn],kr=Mr[lr],Cs=Mr[Br],Fn=$r[kr],Ur=$r[Cs];Fn&&Ur&&(Fn.bonds.push(Cs),Fn.bondOrder.push(Hn),Ur.bonds.push(kr),Ur.bondOrder.push(Hn))}Zt+=1}for(Zt=wr,un=0;un<Jn;++un)Zt+=1;Xt+=1}if(mn)for(let Vr=vr,dr=mn.length;Vr<dr;Vr+=2){let Cr=mn[Vr],hs=mn[Vr+1],ro=En?En[Vr/2]:1;if(Cr>=rn){vr=Vr;break}let oo=Mr[Cr],ao=Mr[hs],Uo=$r[oo],gu=$r[ao];Uo&&gu&&(Uo.bonds.push(ao),Uo.bondOrder.push(ro),gu.bonds.push(oo),gu.bondOrder.push(ro))}Tt.multimodel&&(Tt.onemol||Ot.push([]))}if(!Pt)for(let Vr=0;Vr<Ot.length;Vr++)(0,dt.processSymmetries)(Bt[Vr].symmetries,Ot[Vr],Tt,Bt[Vr].cryst);return wt&&!Et&&(0,lt.computeSecondaryStructure)(Ot,Tt.hbondCutoff),Ot}},"./src/parsers/MOL2.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{MOL2:()=>at});let st={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function at(lt,dt){var yt=[[]],vt=!1;typeof dt.keepH<"u"&&(vt=!dt.keepH);var _t=lt.search(/@<TRIPOS>MOLECULE/),bt=lt.search(/@<TRIPOS>ATOM/);if(_t==-1||bt==-1)return yt;for(var Mt=lt.substring(_t).split(/\r?\n|\r/);Mt.length>0;){var Ct=[],Tt=Mt[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),$t=parseInt(Tt[0]),Rt=0;Tt.length>1&&(Rt=parseInt(Tt[1]));var Et=4,wt;for(wt=3;wt<Mt.length;wt++)if(Mt[wt]=="@<TRIPOS>ATOM"){Et=wt+1;break}var Pt=yt[yt.length-1].length,Ft=Pt+$t,Nt;for(wt=Pt;wt<Ft;wt++){Nt=Mt[Et++],Tt=Nt.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var Ot={},Bt=Tt[5];if(st[Bt]!==void 0?Bt=st[Bt]:(Bt=Bt.split(".")[0],Bt=Bt[0].toUpperCase()+Bt.substring(1).toLowerCase()),Ot.atom=Tt[1],Ot.elem=Bt,!(Ot.elem=="H"&&vt)){var Xt=yt[yt.length-1].length,Zt=parseInt(Tt[0]);Ot.serial=Zt,Ot.x=parseFloat(Tt[2]),Ot.y=parseFloat(Tt[3]),Ot.z=parseFloat(Tt[4]),Ot.atom=Tt[5];var rn=parseFloat(Tt[8]);Ot.index=Xt,Ot.bonds=[],Ot.bondOrder=[],Ot.properties={charge:rn,partialCharge:rn},Ct[Zt]=Xt,yt[yt.length-1].push(Ot)}}for(var Gt=!1;Et<Mt.length;)if(Mt[Et++]=="@<TRIPOS>BOND"){Gt=!0;break}if(Gt&&Rt)for(wt=0;wt<Rt;wt++){Nt=Mt[Et++],Tt=Nt.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var nn=parseInt(Tt[1]),cn=yt[yt.length-1][Ct[nn]],an=parseInt(Tt[2]),mn=yt[yt.length-1][Ct[an]],En=parseInt(Tt[3]);isNaN(En)&&(En=1),cn!==void 0&&mn!==void 0&&(cn.bonds.push(Ct[an]),cn.bondOrder.push(En),mn.bonds.push(Ct[nn]),mn.bondOrder.push(En))}if(dt.multimodel){dt.onemol||yt.push([]),Mt.splice(0,Et),lt=Mt.join(`
`);continue}else break}return yt}},"./src/parsers/PDB.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{PDB:()=>at});var st=rt("./src/parsers/utils/getSinglePDB.ts");function at(lt,dt){dt=dt||{};var yt=[],vt={};yt.modelData=[];for(var _t=lt.split(/\r?\n|\r/);_t.length>0;){var bt=(0,st.getSinglePDB)(_t,dt,vt),Mt=bt[0],Ct=bt[1];if(_t=bt[2],Mt.length!=0){if(dt.multimodel&&dt.onemol&&yt.length>0)for(var Tt=yt[0].length,$t=0;$t<Mt.length;$t++){var Rt=Mt[$t];Rt.index=$t;for(var Et=0;Et<Rt.bonds.length;Et++)Rt.bonds[Et]+=Tt;yt[0].push(Rt)}else yt.modelData.push(Ct),yt.push(Mt);if(!dt.multimodel)break}}return yt}},"./src/parsers/PQR.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{PQR:()=>lt});var st=rt("./src/parsers/utils/assignPDBBonds.ts"),at=rt("./src/parsers/utils/computeSecondaryStructure.ts");function lt(dt,yt){var vt=[[]],_t=!yt.noSecondaryStructure;vt.modelData=[{symmetries:[]}];var bt=[],Mt=dt.split(/\r?\n|\r/),Ct;for(let Gt=0;Gt<Mt.length;Gt++){Ct=Mt[Gt].replace(/^\s*/,"");var Tt=Ct.substring(0,6);if(Tt.indexOf("END")==0)if(yt.multimodel){yt.onemol||vt.push([]);continue}else break;else if(Tt=="ATOM  "||Tt=="HETATM"){var $t;let nn=parseInt(Ct.substring(6,11)),cn=Ct.substring(12,16).replace(/ /g,""),an=Ct.substring(17,20).trim(),mn=Ct.substring(21,22),En=parseInt(Ct.substring(22,26));var Rt=Ct.substring(30).trim().split(/\s+/),Et=parseFloat(Rt[0]),wt=parseFloat(Rt[1]),Pt=parseFloat(Rt[2]),Ft=parseFloat(Rt[3]),Nt=parseFloat(Rt[4]),Ot=cn[0];cn.length>1&&cn[1].toUpperCase()!=cn[1]&&(Ot=cn.substring(0,2)),Ct[0]=="H"?$t=!0:$t=!1,bt[nn]=vt[vt.length-1].length,vt[vt.length-1].push({resn:an,x:Et,y:wt,z:Pt,elem:Ot,hetflag:$t,chain:mn,resi:En,serial:nn,atom:cn,bonds:[],ss:"c",bondOrder:[],properties:{charge:Ft,partialCharge:Ft,radius:Nt},pdbline:Ct})}else if(Tt=="CONECT"){var Bt=parseInt(Ct.substring(6,11)),Xt=vt[vt.length-1][bt[Bt]];for(let nn=0;nn<4;nn++){var Zt=parseInt(Ct.substring([11,16,21,26][nn],[11,16,21,26][nn]+5)),rn=vt[vt.length-1][bt[Zt]];Xt!==void 0&&rn!==void 0&&(Xt.bonds.push(bt[Zt]),Xt.bondOrder.push(1))}}}for(let Gt=0;Gt<vt.length;Gt++)(0,st.assignPDBBonds)(vt[Gt],yt),_t&&(0,at.computeSecondaryStructure)(vt[Gt],yt.hbondCutoff);return vt}},"./src/parsers/PRMTOP.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{PRMTOP:()=>st});function st(at){var lt=[],dt,yt=0,vt=at.split(/\r?\n|\r/);if(vt.length>0&&vt[0].includes("VERSION")){var _t=vt.filter(function(Et){return Et.includes("POINTERS")||Et.includes("ATOM_NAME")||Et.includes("CHARGE")||Et.includes("RADII")||Et.includes("BONDS_INC_HYDROGEN")||Et.includes("BONDS_WITHOUT_HYDROGEN")}),bt=$t("POINTERS");if(bt==-1)return[];var Mt=Rt(bt),Ct=parseInt(vt[bt+1].slice(0,Mt[1]));if(isNaN(Ct)||Ct<=0)return[];if(bt=$t("ATOM_NAME"),bt==-1)return[];Mt=Rt(bt);var Tt=Mt[0];for(let Et=0;Et<Ct/Mt[0];Et++){Et==parseInt(Ct/Mt[0])&&(Tt=Ct%Mt[0]);for(let wt=0;wt<Tt;wt++){let Pt={},Ft={charge:"",radii:""};Pt.serial=yt,Pt.x=0,Pt.y=0,Pt.z=0,Pt.atom=vt[bt+1].slice(Mt[1]*wt,Mt[1]*(wt+1)).trim(),Pt.elem=vt[bt+1].slice(Mt[1]*wt,Mt[1]*wt+1).trim(),Pt.properties=Ft,Pt.bonds=[],Pt.bondOrder=[],lt.push(Pt),yt++}bt++}if(bt=$t("CHARGE"),bt!=-1){Mt=Rt(bt),yt=0,Tt=Mt[0];for(let Et=0;Et<Ct/Mt[0];Et++){Et==parseInt(Ct/Mt[0])&&(Tt=Ct%Mt[0]);for(let wt=0;wt<Tt;wt++)lt[yt].properties.charge=parseFloat(vt[bt+1].slice(Mt[1]*wt,Mt[1]*(wt+1))),yt++;bt++}}if(bt=$t("RADII"),bt!=-1){Mt=Rt(bt),yt=0,Tt=Mt[0];for(let Et=0;Et<Ct/Mt[0];Et++){Et==parseInt(Ct/Mt[0])&&(Tt=Ct%Mt[0]);for(let wt=0;wt<Tt;wt++)lt[yt].properties.radii=parseFloat(vt[bt+1].slice(Mt[1]*wt,Mt[1]*(wt+1))),yt++;bt++}}if(bt=$t("BONDS_WITHOUT_HYDROGEN"),bt!=-1)for(Mt=Rt(bt),yt=0,Tt=Mt[0],bt=bt+1;!vt[bt].match(/^%FLAG/);){vt[bt+1].match(/^%FLAG/)&&(Tt=Ct%Mt[0]);for(let Et=0;Et<Tt;Et++)yt%3==0?dt=parseInt(vt[bt].slice(Mt[1]*Et,Mt[1]*(Et+1))/3):yt%3==1&&lt[dt].bonds.push(parseInt(vt[bt].slice(Mt[1]*Et,Mt[1]*(Et+1))/3)),yt++;bt++}if(bt=$t("BONDS_INC_HYDROGEN"),bt!=-1)for(Mt=Rt(bt),yt=0,Tt=Mt[0],bt=bt+1;!vt[bt].match(/^%FLAG/);){vt[bt+1].match(/^%FLAG/)&&(Tt=Ct%Mt[0]);for(let Et=0;Et<Tt;Et++)yt%3==0?dt=parseInt(vt[bt].slice(Mt[1]*Et,Mt[1]*(Et+1))/3):yt%3==1&&lt[dt].bonds.push(parseInt(vt[bt].slice(Mt[1]*Et,Mt[1]*(Et+1))/3)),yt++;bt++}}else return[];function $t(Et){var wt=vt.indexOf(_t.filter(function(Pt){return Pt.includes(Et)})[0]);if(Number.isInteger(wt)&&wt>0){for(;!vt[wt].includes("FORMAT");)wt++;return wt}else return-1}function Rt(Et){var wt=vt[Et].match(/\((\d*)\S*/),Pt=vt[Et].match(/[a-zA-Z](\d*)\)\s*/);return Pt==null&&(Pt=vt[Et].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[wt[1],Pt[1]]}return[lt]}},"./src/parsers/SDF.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{SDF:()=>lt});var st=function(dt,yt){var vt=[[]],_t=!1;for(typeof yt.keepH<"u"&&(_t=!yt.keepH);dt.length>0&&!(dt.length<4);){var bt=parseInt(dt[3].substring(0,3));if(isNaN(bt)||bt<=0)break;var Mt=parseInt(dt[3].substring(3,6)),Ct=4;if(dt.length<4+bt+Mt)break;var Tt=[],$t=vt[vt.length-1].length,Rt=$t+bt,Et,wt;for(Et=$t;Et<Rt;Et++,Ct++){wt=dt[Ct];var Pt={},Ft=wt.substring(31,34).replace(/ /g,"");Pt.atom=Pt.elem=Ft[0].toUpperCase()+Ft.substring(1).toLowerCase(),(Pt.elem!=="H"||!_t)&&(Pt.serial=Et,Tt[Et]=vt[vt.length-1].length,Pt.x=parseFloat(wt.substring(0,10)),Pt.y=parseFloat(wt.substring(10,20)),Pt.z=parseFloat(wt.substring(20,30)),Pt.hetflag=!0,Pt.bonds=[],Pt.bondOrder=[],Pt.properties={},Pt.index=vt[vt.length-1].length,vt[vt.length-1].push(Pt))}for(Et=0;Et<Mt;Et++,Ct++){wt=dt[Ct];var Nt=Tt[parseInt(wt.substring(0,3))-1+$t],Ot=Tt[parseInt(wt.substring(3,6))-1+$t],Bt=parseFloat(wt.substring(6));typeof Nt<"u"&&typeof Ot<"u"&&(vt[vt.length-1][Nt].bonds.push(Ot),vt[vt.length-1][Nt].bondOrder.push(Bt),vt[vt.length-1][Ot].bonds.push(Nt),vt[vt.length-1][Ot].bondOrder.push(Bt))}if(yt.multimodel){for(yt.onemol||vt.push([]);dt[Ct]!=="$$$$"&&Ct<dt.length;)Ct++;dt.splice(0,++Ct)}else break}return vt},at=function(dt,yt){var vt=[[]],_t=!1;for(typeof yt.keepH<"u"&&(_t=!yt.keepH);dt.length>0&&!(dt.length<8||!dt[4].startsWith("M  V30 BEGIN CTAB")||!dt[5].startsWith("M  V30 COUNTS")||dt[5].length<14);){var bt=dt[5].substring(13).match(/\S+/g);if(bt.length<2)break;var Mt=parseInt(bt[0]);if(isNaN(Mt)||Mt<=0)break;var Ct=parseInt(bt[1]),Tt=7;if(dt.length<8+Mt+Ct)break;var $t=[],Rt=vt[vt.length-1].length,Et=Rt+Mt,wt,Pt;for(wt=Rt;wt<Et;wt++,Tt++){Pt=dt[Tt];var Ft=Pt.substring(6).match(/\S+/g);if(Ft.length>4){var Nt={},Ot=Ft[1].replace(/ /g,"");Nt.atom=Nt.elem=Ot[0].toUpperCase()+Ot.substring(1).toLowerCase(),(Nt.elem!=="H"||!_t)&&(Nt.serial=wt,$t[wt]=vt[vt.length-1].length,Nt.x=parseFloat(Ft[2]),Nt.y=parseFloat(Ft[3]),Nt.z=parseFloat(Ft[4]),Nt.hetflag=!0,Nt.bonds=[],Nt.bondOrder=[],Nt.properties={},Nt.index=vt[vt.length-1].length,vt[vt.length-1].push(Nt))}}if(dt[Tt]==="M  V30 END ATOM")Tt++;else break;if(Ct!==0&&dt[Tt]==="M  V30 BEGIN BOND")Tt++;else break;for(wt=0;wt<Ct;wt++,Tt++){Pt=dt[Tt];var Bt=Pt.substring(6).match(/\S+/g);if(Bt.length>3){var Xt=$t[parseInt(Bt[2])-1+Rt],Zt=$t[parseInt(Bt[3])-1+Rt],rn=parseFloat(Bt[1]);typeof Xt<"u"&&typeof Zt<"u"&&(vt[vt.length-1][Xt].bonds.push(Zt),vt[vt.length-1][Xt].bondOrder.push(rn),vt[vt.length-1][Zt].bonds.push(Xt),vt[vt.length-1][Zt].bondOrder.push(rn))}}if(yt.multimodel){for(yt.onemol||vt.push([]);dt[Tt]!=="$$$$"&&Tt<dt.length;)Tt++;dt.splice(0,++Tt)}else break}return vt};function lt(dt,yt){var vt="V2000",_t=dt.split(/\r?\n|\r/);return _t.length>3&&_t[3].length>38&&(vt=_t[3].substring(34,39)),vt==="V2000"?st(_t,yt):vt==="V3000"?at(_t,yt):[[""]]}},"./src/parsers/VASP.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{VASP:()=>lt});var st=rt("./src/WebGL/index.ts"),at=rt("./src/parsers/utils/assignBonds.ts");function lt(dt,yt={}){var vt=[[]],_t={};const bt=yt.assignBonds===void 0?!0:yt.assignBonds;var Mt=dt.replace(/^\s+/,"").split(/\r?\n/);if(Mt.length<3)return vt;if(Mt[1].match(/\d+/))_t.length=parseFloat(Mt[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),vt;if(_t.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),vt;_t.xVec=new Float32Array(Mt[2].replace(/^\s+/,"").split(/\s+/)),_t.yVec=new Float32Array(Mt[3].replace(/^\s+/,"").split(/\s+/)),_t.zVec=new Float32Array(Mt[4].replace(/^\s+/,"").split(/\s+/));var Ct=new st.Matrix3(_t.xVec[0],_t.xVec[1],_t.xVec[2],_t.yVec[0],_t.yVec[1],_t.yVec[2],_t.zVec[0],_t.zVec[1],_t.zVec[2]);Ct.multiplyScalar(_t.length),vt.modelData=[{symmetries:[],cryst:{matrix:Ct}}];var Tt=Mt[5].trim().split(/\s+/),$t=new Int16Array(Mt[6].trim().split(/\s+/)),Rt=Mt[7].trim(),Et=!1;if(Rt.match(/S/)&&(Et=!0,Rt=Mt[8].trim()),Rt.toLowerCase()[0]=="c")Rt="cartesian";else if(Rt.toLowerCase()[0]=="d")Rt="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),vt;if(Tt.length!=$t.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(Tt),console.log($t),vt;Et?Mt.splice(0,9):Mt.splice(0,8);for(var wt=0,Pt=0,Ft=Tt.length;Pt<Ft;Pt++){for(var Nt=Tt[Pt],Ot=0,Bt=$t[Pt];Ot<Bt;Ot++){var Xt=new Float32Array(Mt[wt+Ot].trim().split(/\s+/)),Zt={};Zt.elem=Nt,Rt=="cartesian"?(Zt.x=_t.length*Xt[0],Zt.y=_t.length*Xt[1],Zt.z=_t.length*Xt[2]):(Zt.x=_t.length*(Xt[0]*_t.xVec[0]+Xt[1]*_t.yVec[0]+Xt[2]*_t.zVec[0]),Zt.y=_t.length*(Xt[0]*_t.xVec[1]+Xt[1]*_t.yVec[1]+Xt[2]*_t.zVec[1]),Zt.z=_t.length*(Xt[0]*_t.xVec[2]+Xt[1]*_t.yVec[2]+Xt[2]*_t.zVec[2])),Zt.bonds=[],Zt.bondOrder=[],vt[0].push(Zt)}wt+=$t[Pt]}if(bt)for(let rn=0;rn<vt.length;rn++)(0,at.assignBonds)(vt[rn],yt);return vt}},"./src/parsers/XYZ.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{XYZ:()=>lt});var st=rt("./src/WebGL/index.ts"),at=rt("./src/parsers/utils/assignBonds.ts");function lt(dt,yt){yt=yt||{};for(var vt=[[]],_t=yt.assignBonds===void 0?!0:yt.assignBonds,bt=dt.trimStart().split(/\r?\n|\r/);bt.length>0&&!(bt.length<3);){var Mt=parseInt(bt[0]);if(isNaN(Mt)||Mt<=0||bt.length<Mt+2)break;var Ct=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,Tt=Ct.exec(bt[1]);if(Tt!=null&&Tt.length>1){var $t=new Float32Array(Tt[1].split(/\s+/)),Rt=new st.Matrix3($t[0],$t[3],$t[6],$t[1],$t[4],$t[7],$t[2],$t[5],$t[8]);vt.modelData=[{cryst:{matrix:Rt}}]}for(var Et=2,wt=vt[vt.length-1].length,Pt=wt+Mt,Ft=wt;Ft<Pt;Ft++){var Nt=bt[Et++],Ot=Nt.trim().split(/\s+/),Bt={};Bt.serial=Ft;var Xt=Ot[0];Bt.atom=Bt.elem=Xt[0].toUpperCase()+Xt.substring(1,2).toLowerCase(),Bt.x=parseFloat(Ot[1]),Bt.y=parseFloat(Ot[2]),Bt.z=parseFloat(Ot[3]),Bt.hetflag=!0,Bt.bonds=[],Bt.bondOrder=[],Bt.properties={},vt[vt.length-1][Ft]=Bt,Ot.length>=7&&(Bt.dx=parseFloat(Ot[4]),Bt.dy=parseFloat(Ot[5]),Bt.dz=parseFloat(Ot[6]))}if(yt.multimodel)vt.push([]),bt.splice(0,Et);else break}if(_t)for(let rn=0;rn<vt.length;rn++)(0,at.assignBonds)(vt[rn],yt);if(yt.onemol){var Zt=vt;vt=[],vt.push(Zt[0]);for(let rn=1;rn<Zt.length;rn++){let Gt=vt[0].length;for(let nn=0;nn<Zt[rn].length;nn++){let cn=Zt[rn][nn];for(let an=0;an<cn.bonds.length;an++)cn.bonds[an]=cn.bonds[an]+Gt;cn.index=vt[0].length,cn.serial=vt[0].length,vt[0].push(cn)}}}return vt}},"./src/parsers/cifutils/category.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Category:()=>at});var st=rt("./src/parsers/cifutils/decoder.ts");function at(lt){const dt=Object.create(null),yt=Object.create(null);for(const vt of lt.columns)dt[vt.name]=vt;return{rowCount:lt.rowCount,name:lt.name.substring(1),fieldNames:lt.columns.map(vt=>vt.name),getField(vt){const _t=dt[vt];if(_t)return yt[vt]||(yt[vt]=(0,st.decode)(_t.data)),yt[vt]}}}},"./src/parsers/cifutils/decoder.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{decode:()=>dt});var st=rt("./src/parsers/cifutils/encoding.ts");const at=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function lt(Gt,nn){const cn=new ArrayBuffer(Gt.length),an=new Uint8Array(cn);for(let mn=0,En=Gt.length;mn<En;mn+=nn)for(let Cn=0;Cn<nn;Cn++)an[mn+nn-Cn-1]=Gt[mn+Cn];return cn}function dt(Gt){let nn=Gt.data;for(let cn=Gt.encoding.length-1;cn>=0;cn--)nn=yt(nn,Gt.encoding[cn]);return nn}function yt(Gt,nn){switch(nn.kind){case"ByteArray":switch(nn.type){case st.Encoding.IntDataType.Uint8:return Gt;case st.Encoding.IntDataType.Int8:return bt(Gt);case st.Encoding.IntDataType.Int16:return Ct(Gt);case st.Encoding.IntDataType.Uint16:return Tt(Gt);case st.Encoding.IntDataType.Int32:return $t(Gt);case st.Encoding.IntDataType.Uint32:return Rt(Gt);case st.Encoding.FloatDataType.Float32:return Et(Gt);case st.Encoding.FloatDataType.Float64:return wt(Gt);default:throw new Error("unreachable")}case"FixedPoint":return Pt(Gt,nn);case"IntervalQuantization":return Ft(Gt,nn);case"RunLength":return Nt(Gt,nn);case"Delta":return Ot(Gt,nn);case"IntegerPacking":return Zt(Gt,nn);case"StringArray":return rn(Gt,nn)}}function vt(Gt,nn){switch(Gt){case st.Encoding.IntDataType.Int8:return new Int8Array(nn);case st.Encoding.IntDataType.Int16:return new Int16Array(nn);case st.Encoding.IntDataType.Int32:return new Int32Array(nn);case st.Encoding.IntDataType.Uint8:return new Uint8Array(nn);case st.Encoding.IntDataType.Uint16:return new Uint16Array(nn);case st.Encoding.IntDataType.Uint32:return new Uint32Array(nn);default:return new Int32Array(nn)}}function _t(Gt,nn){switch(Gt){case st.Encoding.FloatDataType.Float32:return new Float32Array(nn);case st.Encoding.FloatDataType.Float64:return new Float64Array(nn);default:return new Float64Array(nn)}}function bt(Gt){return new Int8Array(Gt.buffer,Gt.byteOffset)}function Mt(Gt,nn,cn){return(Gt.byteOffset!=0||Gt.byteLength!=Gt.buffer.byteLength)&&(Gt=new Uint8Array(Gt)),at?new cn(Gt.buffer):new cn(lt(Gt,nn))}function Ct(Gt){return Mt(Gt,2,Int16Array)}function Tt(Gt){return Mt(Gt,2,Uint16Array)}function $t(Gt){return Mt(Gt,4,Int32Array)}function Rt(Gt){return Mt(Gt,4,Uint32Array)}function Et(Gt){return Mt(Gt,4,Float32Array)}function wt(Gt){return Mt(Gt,8,Float64Array)}function Pt(Gt,nn){const cn=Gt.length,an=_t(nn.srcType,cn),mn=1/nn.factor;for(let En=0;En<cn;En++)an[En]=mn*Gt[En];return an}function Ft(Gt,nn){const cn=Gt.length,an=_t(nn.srcType,cn),mn=(nn.max-nn.min)/(nn.numSteps-1),En=nn.min;for(let Cn=0;Cn<cn;Cn++)an[Cn]=En+mn*Gt[Cn];return an}function Nt(Gt,nn){const cn=vt(nn.srcType,nn.srcSize);let an=0;for(let mn=0,En=Gt.length;mn<En;mn+=2){const Cn=Gt[mn],Mn=Gt[mn+1];for(let un=0;un<Mn;++un)cn[an++]=Cn}return cn}function Ot(Gt,nn){const cn=Gt.length,an=vt(nn.srcType,cn);if(!cn)return Gt;an[0]=Gt[0]+(nn.origin|0);for(let mn=1;mn<cn;++mn)an[mn]=Gt[mn]+an[mn-1];return an}function Bt(Gt,nn){const cn=nn.byteCount===1?127:32767,an=-cn-1,mn=Gt.length,En=new Int32Array(nn.srcSize);let Cn=0,Mn=0;for(;Cn<mn;){let un=0,Tn=Gt[Cn];for(;Tn===cn||Tn===an;)un+=Tn,Cn++,Tn=Gt[Cn];un+=Tn,En[Mn]=un,Cn++,Mn++}return En}function Xt(Gt,nn){const cn=nn.byteCount===1?255:65535,an=Gt.length,mn=new Int32Array(nn.srcSize);let En=0,Cn=0;for(;En<an;){let Mn=0,un=Gt[En];for(;un===cn;)Mn+=un,En++,un=Gt[En];Mn+=un,mn[Cn]=Mn,En++,Cn++}return mn}function Zt(Gt,nn){return Gt.length===nn.srcSize?Gt:nn.isUnsigned?Xt(Gt,nn):Bt(Gt,nn)}function rn(Gt,nn){const cn=dt({encoding:nn.offsetEncoding,data:nn.offsets}),an=dt({encoding:nn.dataEncoding,data:Gt}),mn=nn.stringData,En=new Array(cn.length);En[0]="";for(let un=1,Tn=cn.length;un<Tn;un++)En[un]=mn.substring(cn[un-1],cn[un]);let Cn=0;const Mn=new Array(an.length);for(let un=0,Tn=an.length;un<Tn;un++)Mn[Cn++]=En[an[un]+1];return Mn}},"./src/parsers/cifutils/encoding.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Encoding:()=>at,VERSION:()=>st});const st="0.3.0";var at;(function(lt){(function(vt){vt[vt.Int8=1]="Int8",vt[vt.Int16=2]="Int16",vt[vt.Int32=3]="Int32",vt[vt.Uint8=4]="Uint8",vt[vt.Uint16=5]="Uint16",vt[vt.Uint32=6]="Uint32"})(lt.IntDataType||(lt.IntDataType={})),function(vt){vt[vt.Float32=32]="Float32",vt[vt.Float64=33]="Float64"}(lt.FloatDataType||(lt.FloatDataType={}));function dt(vt){let _t;return vt instanceof Int8Array?_t=lt.IntDataType.Int8:vt instanceof Int16Array?_t=lt.IntDataType.Int16:vt instanceof Int32Array?_t=lt.IntDataType.Int32:vt instanceof Uint8Array?_t=lt.IntDataType.Uint8:vt instanceof Uint16Array?_t=lt.IntDataType.Uint16:vt instanceof Uint32Array?_t=lt.IntDataType.Uint32:vt instanceof Float32Array?_t=lt.FloatDataType.Float32:vt instanceof Float64Array?_t=lt.FloatDataType.Float64:_t=lt.IntDataType.Int32,_t}lt.getDataType=dt;function yt(vt){if(vt instanceof Int8Array||vt instanceof Int16Array||vt instanceof Int32Array)return!0;for(let _t=0,bt=vt.length;_t<bt;_t++)if(_t<0)return!1;return!0}lt.isSignedIntegerDataType=yt})(at||(at={}))},"./src/parsers/index.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Parsers:()=>Pt,bondLength:()=>wt.bondLength,setBondLength:()=>wt.setBondLength});var st=rt("./src/parsers/VASP.ts"),at=rt("./src/parsers/CUBE.ts"),lt=rt("./src/parsers/XYZ.ts"),dt=rt("./src/parsers/SDF.ts"),yt=rt("./src/parsers/CDJSON.ts"),vt=rt("./src/parsers/CIF.ts"),_t=rt("./src/parsers/MOL2.ts"),bt=rt("./src/parsers/PDB.ts"),Mt=rt("./src/parsers/PQR.ts"),Ct=rt("./src/parsers/MMTF.ts"),Tt=rt("./src/parsers/PRMTOP.ts"),$t=rt("./src/parsers/GRO.ts"),Rt=rt("./src/parsers/LAMMPSTRJ.ts"),Et=rt("./src/parsers/BCIF.ts"),wt=rt("./src/parsers/utils/bondLength.ts");const Pt={vasp:st.VASP,VASP:st.VASP,cube:at.CUBE,CUBE:at.CUBE,xyz:lt.XYZ,XYZ:lt.XYZ,sdf:dt.SDF,SDF:dt.SDF,json:yt.CDJSON,cdjson:yt.CDJSON,CDJSON:yt.CDJSON,mcif:vt.CIF,cif:vt.CIF,CIF:vt.CIF,mol2:_t.MOL2,MOL2:_t.MOL2,pdb:bt.PDB,PDB:bt.PDB,pdbqt:bt.PDB,PDBQT:bt.PDB,pqr:Mt.PQR,PQR:Mt.PQR,mmtf:Ct.MMTFparser,MMTF:Ct.MMTFparser,prmtop:Tt.PRMTOP,PRMTOP:Tt.PRMTOP,gro:$t.GRO,GRO:$t.GRO,lammpstrj:Rt.LAMMPSTRJ,LAMMPSTRJ:Rt.LAMMPSTRJ,bcif:Et.BCIF,BCIF:Et.BCIF}},"./src/parsers/utils/anumToSymbol.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{anumToSymbol:()=>st});const st={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}},"./src/parsers/utils/areConnected.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{areConnected:()=>lt});var st=rt("./src/parsers/utils/bondLength.ts");const at=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function lt(dt,yt,vt){if(vt&&vt.unboundCations&&(at.has(dt.elem)||at.has(yt.elem)))return!1;let _t=(0,st.bondLength)(dt.elem)+(0,st.bondLength)(yt.elem);_t+=.25,_t*=_t;let bt=dt.x-yt.x;if(bt*=bt,bt>_t)return!1;let Mt=dt.y-yt.y;if(Mt*=Mt,Mt>_t)return!1;let Ct=dt.z-yt.z;if(Ct*=Ct,Ct>_t)return!1;const Tt=bt+Mt+Ct;return!(isNaN(Tt)||Tt<.5||Tt>_t||dt.altLoc!==yt.altLoc&&dt.altLoc.trim()!==""&&yt.altLoc.trim()!=="")}},"./src/parsers/utils/assignBackboneHBonds.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{assignBackboneHBonds:()=>st});function st(at,lt){const dt=lt||3.2,yt=dt*dt,vt=[];for(let _t=0,bt=at.length;_t<bt;_t++){at[_t].index=_t;const Mt=at[_t];!Mt.hetflag&&(Mt.atom==="N"||Mt.atom==="O")&&(vt.push(Mt),Mt.hbondOther=null,Mt.hbondDistanceSq=Number.POSITIVE_INFINITY)}vt.sort(function(_t,bt){return _t.z-bt.z});for(let _t=0,bt=vt.length;_t<bt;_t++){const Mt=vt[_t];for(let Ct=_t+1;Ct<bt;Ct++){const Tt=vt[Ct],$t=Tt.z-Mt.z;if($t>dt)break;if(Tt.atom==Mt.atom)continue;const Rt=Math.abs(Tt.y-Mt.y);if(Rt>dt)continue;const Et=Math.abs(Tt.x-Mt.x);if(Et>dt)continue;const wt=Et*Et+Rt*Rt+$t*$t;wt>yt||Tt.chain==Mt.chain&&Math.abs(Tt.resi-Mt.resi)<4||(wt<Mt.hbondDistanceSq&&(Mt.hbondOther=Tt,Mt.hbondDistanceSq=wt),wt<Tt.hbondDistanceSq&&(Tt.hbondOther=Mt,Tt.hbondDistanceSq=wt))}}}},"./src/parsers/utils/assignBonds.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{assignBonds:()=>dt});var st=rt("./src/parsers/utils/areConnected.ts");const at=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],lt=4.95;function dt(yt,vt){for(let Mt=0,Ct=yt.length;Mt<Ct;Mt++)yt[Mt].index||(yt[Mt].index=Mt);const _t={x:{y:{z:[]}}};for(let Mt=0;Mt<yt.length;Mt++){const Ct=yt[Mt],Tt=Math.floor(Ct.x/lt),$t=Math.floor(Ct.y/lt),Rt=Math.floor(Ct.z/lt);_t[Tt]||(_t[Tt]={}),_t[Tt][$t]||(_t[Tt][$t]={}),_t[Tt][$t][Rt]||(_t[Tt][$t][Rt]=[]),_t[Tt][$t][Rt].push(Ct)}function bt(Mt,Ct){for(let Tt=0;Tt<Mt.length;Tt++){const $t=Mt[Tt];for(let Rt=0;Rt<Ct.length;Rt++){const Et=Ct[Rt];if((0,st.areConnected)($t,Et,vt)){const wt=$t.bonds.indexOf(Et.index),Pt=Et.bonds.indexOf($t.index);wt===-1&&Pt===-1?($t.bonds.push(Et.index),$t.bondOrder.push(1),Et.bonds.push($t.index),Et.bondOrder.push(1)):wt===-1?($t.bonds.push(Et.index),$t.bondOrder.push(Et.bondOrder[Pt])):Pt===-1&&(Et.bonds.push($t.index),Et.bondOrder.push($t.bondOrder[wt]))}}}}for(let Mt in _t){const Ct=parseInt(Mt);for(let Tt in _t[Ct]){const $t=parseInt(Tt);for(let Rt in _t[Ct][$t]){const Et=parseInt(Rt),wt=_t[Ct][$t][Et];for(let Pt=0;Pt<wt.length;Pt++){const Ft=wt[Pt];for(let Nt=Pt+1;Nt<wt.length;Nt++){const Ot=wt[Nt];(0,st.areConnected)(Ft,Ot,vt)&&Ft.bonds.indexOf(Ot.index)==-1&&(Ft.bonds.push(Ot.index),Ft.bondOrder.push(1),Ot.bonds.push(Ft.index),Ot.bondOrder.push(1))}}for(let Pt=0;Pt<at.length;Pt++){const Ft=at[Pt];if(!_t[Ct+Ft.x]||!_t[Ct+Ft.x][$t+Ft.y]||!_t[Ct+Ft.x][$t+Ft.y][Et+Ft.z])continue;const Nt=_t[Ct+Ft.x][$t+Ft.y][Et+Ft.z];bt(wt,Nt)}}}}}},"./src/parsers/utils/assignPDBBonds.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{assignPDBBonds:()=>dt});var st=rt("./src/parsers/utils/areConnected.ts"),at=rt("./src/parsers/utils/assignBonds.ts"),lt=rt("./src/parsers/utils/standardResidues.ts");function dt(yt,vt){const _t=[],bt=[];for(let $t=0,Rt=yt.length;$t<Rt;$t++){const Et=yt[$t];Et.index=$t,Et.hetflag||!lt.standardResidues.has(Et.resn)?bt.push(Et):_t.push(Et)}(0,at.assignBonds)(bt,vt),_t.sort(function($t,Rt){return $t.chain!==Rt.chain?$t.chain<Rt.chain?-1:1:$t.resi-Rt.resi});let Mt=-1,Ct=-1,Tt;for(let $t=0,Rt=_t.length;$t<Rt;$t++){const Et=_t[$t];Et.resi!==Mt&&(Mt=Et.resi,Tt||Ct++,Tt=!1),Et.reschain=Ct;for(let wt=$t+1;wt<_t.length;wt++){const Pt=_t[wt];if(Pt.chain!==Et.chain||Pt.resi-Et.resi>1)break;(0,st.areConnected)(Et,Pt,vt)&&(Et.bonds.indexOf(Pt.index)===-1&&(Et.bonds.push(Pt.index),Et.bondOrder.push(1),Pt.bonds.push(Et.index),Pt.bondOrder.push(1)),Et.resi!==Pt.resi&&(Tt=!0))}}}},"./src/parsers/utils/atomNameToElem.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{atomNameToElem:()=>at});var st=rt("./src/parsers/utils/bondLength.ts");function at(lt,dt){let yt=lt.replace(/ /g,"");return yt.length>0&&yt[0]==="H"&&yt!=="Hg"&&yt!=="He"&&yt!=="Hf"&&yt!=="Hs"&&yt!=="Ho"&&(yt="H"),yt.length>1&&(yt=yt[0].toUpperCase()+yt.substring(1).toLowerCase(),st.bondTable[yt]===void 0?yt=yt[0]:dt&&(yt==="Ca"||yt==="Cd")&&(yt="C")),yt}},"./src/parsers/utils/bondLength.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{bondLength:()=>at,bondTable:()=>st,setBondLength:()=>lt});let st={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function at(dt){return st[dt]||1.6}function lt(dt,yt){yt<0&&(yt=0),st[dt]=yt}},"./src/parsers/utils/computeSecondaryStructure.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{computeSecondaryStructure:()=>at});var st=rt("./src/parsers/utils/assignBackboneHBonds.ts");function at(lt,dt){(0,st.assignBackboneHBonds)(lt,dt);const yt={};let vt,_t,bt,Mt,Ct,Tt;for(vt=0,_t=lt.length;vt<_t;vt++)if(Ct=lt[vt],yt[Ct.chain]===void 0&&(yt[Ct.chain]=[]),isFinite(Ct.hbondDistanceSq)){const $t=Ct.hbondOther;yt[$t.chain]===void 0&&(yt[$t.chain]=[]),Math.abs($t.resi-Ct.resi)===4&&(yt[Ct.chain][Ct.resi]="h")}for(bt in yt)for(Mt=1;Mt<yt[bt].length-1;Mt++){const $t=yt[bt][Mt-1],Rt=yt[bt][Mt+1];Tt=yt[bt][Mt],$t=="h"&&$t==Rt&&Tt!=$t&&(yt[bt][Mt]=$t)}for(vt=0,_t=lt.length;vt<_t;vt++)Ct=lt[vt],isFinite(Ct.hbondDistanceSq)&&yt[Ct.chain][Ct.resi]!="h"&&Ct.ss!=="h"&&(yt[Ct.chain][Ct.resi]="maybesheet");for(let $t=0,Rt=lt.length;$t<Rt;$t++)if(Ct=lt[$t],isFinite(Ct.hbondDistanceSq)&&yt[Ct.chain][Ct.resi]=="maybesheet"){let Et=Ct.hbondOther,wt=yt[Et.chain][Et.resi];(wt=="maybesheet"||wt=="s")&&(yt[Ct.chain][Ct.resi]="s",yt[Et.chain][Et.resi]="s")}for(let $t in yt){for(let Rt=1;Rt<yt[$t].length-1;Rt++){const Et=yt[$t][Rt-1],wt=yt[$t][Rt+1];Tt=yt[$t][Rt],Et=="s"&&Et==wt&&Tt!=Et&&(yt[$t][Rt]=Et)}for(let Rt=0;Rt<yt[$t].length;Rt++){const Et=yt[$t][Rt];(Et=="h"||Et=="s")&&yt[$t][Rt-1]!=Et&&yt[$t][Rt+1]!=Et&&delete yt[$t][Rt]}}for(vt=0,_t=lt.length;vt<_t;vt++)Ct=lt[vt],Tt=yt[Ct.chain][Ct.resi],delete Ct.hbondOther,delete Ct.hbondDistanceSq,!(Tt===void 0||Tt==="maybesheet")&&(Ct.ss=Tt,yt[Ct.chain][Ct.resi-1]!=Tt&&(Ct.ssbegin=!0),yt[Ct.chain][Ct.resi+1]!=Tt&&(Ct.ssend=!0))}},"./src/parsers/utils/getSinglePDB.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{getSinglePDB:()=>Mt});var st=rt("./src/WebGL/index.ts"),at=rt("./src/parsers/utils/atomNameToElem.ts"),lt=rt("./src/parsers/utils/bondLength.ts"),dt=rt("./src/parsers/utils/computeSecondaryStructure.ts"),yt=rt("./src/parsers/utils/isEmpty.ts"),vt=rt("./src/parsers/utils/processSymmetries.ts"),_t=rt("./src/parsers/utils/assignPDBBonds.ts"),bt=rt("./src/parsers/utils/validateBonds.ts");function Mt(Ct,Tt,$t){const Rt=[],Et=Tt.assignBonds===void 0?!0:Tt.assignBonds,wt=!Tt.keepH,Pt=!!Tt.noSecondaryStructure,Ft=!Tt.noComputeSecondaryStructure,Nt=!Tt.doAssembly,Ot=Tt.altLoc?Tt.altLoc:"A",Bt={symmetries:[],cryst:void 0};let Xt,Zt=[];const rn=[];let Gt;const nn={};for(let cn=0;cn<Ct.length;cn++){Gt=Ct[cn].replace(/^\s*/,"");const an=Gt.substring(0,6);let mn,En,Cn;if(an.indexOf("END")===0){if(Zt=Ct.slice(cn+1),an==="END")for(const Mn in $t)$t.hasOwnProperty(Mn)&&delete $t[Mn];break}else if(an==="ATOM  "||an==="HETATM"){let Mn,un,Tn,Pn,dn,Un,qn,In,Wn,ar,fr,mr;if(fr=Gt.substring(16,17),fr!==" "&&fr!==Ot&&Ot!=="*"||(ar=parseInt(Gt.substring(6,11)),Xt=Gt.substring(12,16).replace(/ /g,""),Mn=Gt.substring(17,20).replace(/ /g,""),un=Gt.substring(21,22),Tn=parseInt(Gt.substring(22,26)),Pn=Gt.substring(26,27),dn=parseFloat(Gt.substring(30,38)),Un=parseFloat(Gt.substring(38,46)),qn=parseFloat(Gt.substring(46,54)),mr=parseFloat(Gt.substring(60,68)),Wn=Gt.substring(76,78).replace(/ /g,""),Wn===""||lt.bondTable[Wn]===void 0?Wn=(0,at.atomNameToElem)(Gt.substring(12,14),Gt[0]=="A"):Wn=Wn[0].toUpperCase()+Wn.substring(1).toLowerCase(),Wn==="H"&&wt))continue;an[0]=="H"?In=!0:In=!1,rn[ar]=Rt.length,Rt.push({resn:Mn,x:dn,y:Un,z:qn,elem:Wn,hetflag:In,altLoc:fr,chain:un,resi:Tn,icode:Pn,rescode:Tn+(Pn!==" "?"^"+Pn:""),serial:ar,atom:Xt,bonds:[],ss:"c",bondOrder:[],properties:{},b:mr,pdbline:Gt})}else if(an==="SHEET "){mn=Gt.substring(21,22),En=parseInt(Gt.substring(22,26)),Cn=parseInt(Gt.substring(33,37)),mn in $t||($t[mn]={}),$t[mn][En]="s1";for(let Mn=En+1;Mn<Cn;Mn++)$t[mn][Mn]="s";$t[mn][Cn]="s2"}else if(an==="CONECT"){const Mn=parseInt(Gt.substring(6,11)),un=rn[Mn],Tn=Rt[un],Pn=[11,16,21,26];for(let dn=0;dn<4;dn++){const Un=parseInt(Gt.substring(Pn[dn],Pn[dn]+5)),qn=rn[Un];let In=un+":"+qn;const Wn=Rt[qn];if(Tn!==void 0&&Wn!==void 0)if(!nn[In])nn[In]=1,(Tn.bonds.length==0||Tn.bonds[Tn.bonds.length-1]!==qn)&&(Tn.bonds.push(qn),Tn.bondOrder.push(1));else{nn[In]+=1;for(let ar=0;ar<Tn.bonds.length;ar++)if(Tn.bonds[ar]==qn){const fr=nn[In];fr>=4?Tn.bondOrder[ar]=1:Tn.bondOrder[ar]=fr}}}}else if(an==="HELIX "){mn=Gt.substring(19,20),En=parseInt(Gt.substring(21,25)),Cn=parseInt(Gt.substring(33,37)),mn in $t||($t[mn]={}),$t[mn][En]="h1";for(let Mn=En+1;Mn<Cn;Mn++)$t[mn][Mn]="h";$t[mn][Cn]="h2"}else if(!Nt&&an==="REMARK"&&Gt.substring(13,18)==="BIOMT"){let Mn,un=new st.Matrix4;for(Mn=1;Mn<=3;Mn++)if(Gt=Ct[cn].replace(/^\s*/,""),parseInt(Gt.substring(18,19))==Mn)un.elements[Mn-1]=parseFloat(Gt.substring(23,33)),un.elements[Mn-1+4]=parseFloat(Gt.substring(33,43)),un.elements[Mn-1+8]=parseFloat(Gt.substring(43,53)),un.elements[Mn-1+12]=parseFloat(Gt.substring(53)),cn++;else for(;Gt.substring(13,18)==="BIOMT";)cn++,Gt=Ct[cn].replace(/^\s*/,"");un.elements[3]=0,un.elements[7]=0,un.elements[11]=0,un.elements[15]=1,Bt.symmetries.push(un),cn--}else if(an==="CRYST1"){let Mn,un,Tn,Pn,dn,Un;Mn=parseFloat(Gt.substring(7,15)),un=parseFloat(Gt.substring(16,24)),Tn=parseFloat(Gt.substring(25,33)),Pn=parseFloat(Gt.substring(34,40)),dn=parseFloat(Gt.substring(41,47)),Un=parseFloat(Gt.substring(48,54)),Bt.cryst={a:Mn,b:un,c:Tn,alpha:Pn,beta:dn,gamma:Un}}else if(an==="ANISOU"){const Mn=parseInt(Gt.substring(6,11)),un=rn[Mn],Tn=Rt[un];if(Tn){const Pn=Gt.substring(30).trim().split(/\s+/),dn={u11:parseInt(Pn[0]),u22:parseInt(Pn[1]),u33:parseInt(Pn[2]),u12:parseInt(Pn[3]),u13:parseInt(Pn[4]),u23:parseInt(Pn[5])};Tn.uMat=dn}}}if((0,bt.validateBonds)(Rt,rn),Et&&(0,_t.assignPDBBonds)(Rt,Tt),Nt||(0,vt.processSymmetries)(Bt.symmetries,Rt,Tt,Bt.cryst),Ft&&!Pt&&(0,dt.computeSecondaryStructure)(Rt,Tt.hbondCutoff),!(0,yt.isEmpty)($t))for(let cn=0;cn<Rt.length;cn++){const an=Rt[cn];if(an!==void 0&&an.chain in $t&&an.resi in $t[an.chain]){const mn=$t[an.chain][an.resi];an.ss=mn[0],mn.length>1&&(mn[1]=="1"?an.ssbegin=!0:mn[1]=="2"&&(an.ssend=!0))}}return[Rt,Bt,Zt]}},"./src/parsers/utils/isEmpty.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{isEmpty:()=>st});function st(at){for(const lt in at)return!1;return!0}},"./src/parsers/utils/processSymmetries.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{processSymmetries:()=>at});var st=rt("./src/WebGL/index.ts");function at(lt,dt,yt,vt){const _t=!yt.duplicateAssemblyAtoms,bt=dt.length;let Mt=bt,Ct=-1,Tt=null,$t=null;(yt.normalizeAssembly||yt.wrapAtoms)&&vt&&(Tt=(0,st.conversionMatrix3)(vt.a,vt.b,vt.c,vt.alpha,vt.beta,vt.gamma),$t=new st.Matrix3,$t.getInverse3(Tt));let Rt=function(Pt){let Ft=Pt.clone().applyMatrix3($t);const Nt=[Ft.x,Ft.y,Ft.z],Ot=[0,0,0];for(let Xt=0;Xt<3;Xt++){for(;Nt[Xt]<-.001;)Nt[Xt]+=1,Ot[Xt]+=1;for(;Nt[Xt]>1.001;)Nt[Xt]-=1,Ot[Xt]-=1}const Bt=new st.Vector3(Ot[0],Ot[1],Ot[2]);return Bt.applyMatrix3(Tt),Bt};if(yt.normalizeAssembly&&vt)for(let Pt=0;Pt<lt.length;Pt++){const Ft=new st.Vector3(0,0,0);for(let Ot=0;Ot<bt;Ot++){const Bt=new st.Vector3(dt[Ot].x,dt[Ot].y,dt[Ot].z);Bt.applyMatrix4(lt[Pt]),Ft.add(Bt)}Ft.divideScalar(bt);const Nt=Rt(Ft);lt[Pt].isNearlyIdentity()&&Nt.lengthSq()>.001&&(Ct=Pt),lt[Pt].translate(Nt)}if(_t){if(lt.length>1)for(let Pt=0;Pt<dt.length;Pt++){var Et=[];for(let Ft=0;Ft<lt.length;Ft++)if(!lt[Ft].isNearlyIdentity()){var wt=new st.Vector3;wt.set(dt[Pt].x,dt[Pt].y,dt[Pt].z),wt.applyMatrix4(lt[Ft]),Et.push(wt)}dt[Pt].symmetries=Et}}else{for(let Pt=0;Pt<bt;Pt++)dt[Pt].sym=-1;for(let Pt=0;Pt<lt.length;Pt++)if(!lt[Pt].isNearlyIdentity()&&Ct!=Pt){let Ft=new st.Vector3;for(let Nt=0;Nt<bt;Nt++){const Ot=[];for(let Xt=0;Xt<dt[Nt].bonds.length;Xt++)Ot.push(dt[Nt].bonds[Xt]+Mt);if(Ft.set(dt[Nt].x,dt[Nt].y,dt[Nt].z),Ft.applyMatrix4(lt[Pt]),yt.wrapAtoms&&vt){let Xt=Rt(Ft);Ft.add(Xt)}const Bt={};for(const Xt in dt[Nt])Bt[Xt]=dt[Nt][Xt];Bt.x=Ft.x,Bt.y=Ft.y,Bt.z=Ft.z,Bt.bonds=Ot,Bt.sym=Pt,Bt.index=dt.length,dt.push(Bt)}Mt=dt.length}else for(let Ft=0;Ft<bt;Ft++)dt[Ft].sym=Pt;if(yt.wrapAtoms&&vt){let Pt=new st.Vector3;for(let Ft=0;Ft<bt;Ft++){Pt.set(dt[Ft].x,dt[Ft].y,dt[Ft].z);let Nt=Rt(Pt);Pt.add(Nt),dt[Ft].x=Pt.x,dt[Ft].y=Pt.y,dt[Ft].z=Pt.z}}if(Ct>=0){const Pt=new st.Vector3;for(let Ft=0;Ft<bt;Ft++)Pt.set(dt[Ft].x,dt[Ft].y,dt[Ft].z),Pt.applyMatrix4(lt[Ct]),dt[Ft].x=Pt.x,dt[Ft].y=Pt.y,dt[Ft].z=Pt.z}lt.length=0}}},"./src/parsers/utils/standardResidues.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{standardResidues:()=>st});const st=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])},"./src/parsers/utils/validateBonds.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{validateBonds:()=>st});function st(at,lt){for(let dt=0,yt=at.length;dt<yt;dt++){const vt=at[dt];for(let _t=0;_t<vt.bonds.length;_t++){const bt=vt.bonds[_t],Mt=at[bt],Ct=lt[vt.serial];Mt&&Ct&&Mt.bonds.indexOf(Ct)<0&&(Mt.bonds.push(Ct),Mt.bondOrder.push(vt.bondOrder[_t]))}}}},"./src/partialCharges.ts":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{applyPartialCharges:()=>at,partialCharges:()=>st});const st={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function at(lt,dt){if((!dt||typeof lt.partialCharge>"u")&&lt.resn&&lt.atom){var yt=lt.resn+":"+lt.atom;lt.properties.partialCharge=st[yt]}}},"./src/specs.ts":(nt,tt,rt)=>{rt.r(tt)},"./src/utilities.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(nt,tt){for(var rt in tt)tt.hasOwnProperty(rt)&&tt[rt]!==void 0&&(nt[rt]=tt[rt]);return nt}function deepCopy(nt){let tt,rt,st;if(nt==null)return{};if(typeof nt!="object"||nt===null)return nt;tt=Array.isArray(nt)?[]:{};for(st in nt)rt=nt[st],tt[st]=deepCopy(rt);return tt}function isNumeric(nt){var tt=typeof nt;return(tt==="number"||tt==="string")&&!isNaN(nt-parseFloat(nt))}function isEmptyObject(nt){var tt;for(tt in nt)return!1;return!0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(nt){nt&&(nt.volformat&&!(nt.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(nt.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(nt.voldata,nt.volformat)),nt.volscheme&&(nt.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(nt.volscheme)))}function getExtent(nt,tt){var rt,st,at,lt,dt,yt,vt,_t,bt,Mt,Ct=!tt;if(rt=st=at=9999,lt=dt=yt=-9999,vt=_t=bt=Mt=0,nt.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var Tt=0;Tt<nt.length;Tt++){var $t=nt[Tt];if(!(typeof $t>"u"||!isFinite($t.x)||!isFinite($t.y)||!isFinite($t.z))&&(Mt++,vt+=$t.x,_t+=$t.y,bt+=$t.z,rt=rt<$t.x?rt:$t.x,st=st<$t.y?st:$t.y,at=at<$t.z?at:$t.z,lt=lt>$t.x?lt:$t.x,dt=dt>$t.y?dt:$t.y,yt=yt>$t.z?yt:$t.z,$t.symmetries&&Ct))for(var Rt=0;Rt<$t.symmetries.length;Rt++)Mt++,vt+=$t.symmetries[Rt].x,_t+=$t.symmetries[Rt].y,bt+=$t.symmetries[Rt].z,rt=rt<$t.symmetries[Rt].x?rt:$t.symmetries[Rt].x,st=st<$t.symmetries[Rt].y?st:$t.symmetries[Rt].y,at=at<$t.symmetries[Rt].z?at:$t.symmetries[Rt].z,lt=lt>$t.symmetries[Rt].x?lt:$t.symmetries[Rt].x,dt=dt>$t.symmetries[Rt].y?dt:$t.symmetries[Rt].y,yt=yt>$t.symmetries[Rt].z?yt:$t.symmetries[Rt].z}return[[rt,st,at],[lt,dt,yt],[vt/Mt,_t/Mt,bt/Mt]]}function getPropertyRange(nt,tt){for(var rt=Number.POSITIVE_INFINITY,st=Number.NEGATIVE_INFINITY,at=0,lt=nt.length;at<lt;at++){var dt=nt[at],yt=getAtomProperty(dt,tt);yt!=null&&(yt<rt&&(rt=yt),yt>st&&(st=yt))}return!isFinite(rt)&&!isFinite(st)?rt=st=0:isFinite(rt)?isFinite(st)||(st=rt):rt=st,[rt,st]}class PausableTimer{constructor(tt,rt,st){this.total_time_run=0,this.fn=tt,this.arg=st,this.countdown=rt,this.start_time=new Date().getTime(),this.ident=setTimeout(tt,rt,st)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(nt){for(var tt=window.atob(nt),rt=tt.length,st=new Uint8Array(rt),at=0;at<rt;at++)st[at]=tt.charCodeAt(at);return st}function getAtomProperty(nt,tt){var rt=null;return nt.properties&&typeof nt.properties[tt]<"u"?rt=nt.properties[tt]:typeof nt[tt]<"u"&&(rt=nt[tt]),rt}function mergeGeos(nt,tt){var rt=tt.geometry;rt!==void 0&&nt.geometryGroups.push(rt.geometryGroups[0])}function specStringToObject(nt){if(typeof nt=="object")return nt;if(typeof nt>"u"||nt==null)return nt;try{return JSON.parse(nt)}catch{}nt=nt.replace(/%7E/g,"~");var tt=function(Ct){return isNumeric(Ct)?Math.floor(parseFloat(Ct))==parseInt(Ct)||Ct.indexOf(".")>=0?parseFloat(Ct):parseInt(Ct):Ct==="true"?!0:Ct==="false"?!1:Ct},rt={};if(nt==="all")return rt;for(var st=nt.split(";"),at=0;at<st.length;at++){var lt=st[at].split(":"),dt=lt[0],yt={},vt=lt[1];if(vt)if(vt=vt.replace(/~/g,"="),vt.indexOf("=")!==-1)for(var _t=vt.split(","),bt=0;bt<_t.length;bt++){var Mt=_t[bt].split("=",2);yt[Mt[0]]=tt(Mt[1])}else vt.indexOf(",")!==-1?yt=vt.split(","):yt=tt(vt);rt[dt]=yt}return rt}function checkStatus(nt){if(!nt.ok)throw new Error(`HTTP ${nt.status} - ${nt.statusText}`);return nt}function get(nt,tt){var rt=fetch(nt).then(checkStatus).then(st=>st.text());return tt?rt.then(tt):rt}function getbin(nt,tt,rt,st){var at;return rt=="POST"?at=fetch(nt,{method:"POST",body:st}).then(lt=>checkStatus(lt)).then(lt=>lt.arrayBuffer()):at=fetch(nt).then(lt=>checkStatus(lt)).then(lt=>lt.arrayBuffer()),tt?at.then(tt):at}function download(nt,tt,rt,st){var at="",lt="",dt="",yt=null,vt=tt.addModel();if(nt.indexOf(":")<0&&(nt.length==4?nt="pdb:"+nt:isNaN(nt)?nt="url:"+nt:nt="cid:"+nt),nt.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),nt="bcif:"+nt.slice(5)),nt.substring(0,5)==="bcif:")nt=nt.substring(5).toUpperCase(),dt="https://models.rcsb.org/"+nt+".bcif.gz",rt&&typeof rt.noComputeSecondaryStructure>"u"&&(rt.noComputeSecondaryStructure=!0),yt=new Promise(function(bt){getbin(dt).then(function(Mt){vt.addMolData(Mt,"bcif.gz",rt),tt.zoomTo(),tt.render(),bt(vt)},function(){console.error("fetch of "+dt+" failed.")})});else{if(nt.substring(0,4)==="pdb:"){if(at="bcif",rt&&rt.format&&(at=rt.format),rt&&typeof rt.noComputeSecondaryStructure>"u"&&(rt.noComputeSecondaryStructure=!0),nt=nt.substring(4).toUpperCase(),!nt.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}at=="bcif"?dt="https://models.rcsb.org/"+nt.toUpperCase()+".bcif.gz":(lt=rt&&rt.pdbUri?rt.pdbUri:"https://files.rcsb.org/view/",dt=lt+nt+"."+at)}else if(nt.substring(0,4)=="cid:"){if(at="sdf",nt=nt.substring(4),!nt.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}dt="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+nt+"/SDF?record_type=3d"}else nt.substring(0,4)=="url:"&&(dt=nt.substring(4),at=dt);var _t=function(bt){vt.addMolData(bt,at,rt),tt.zoomTo(),tt.render()};yt=new Promise(function(bt){at=="bcif"?getbin(dt).then(function(Mt){_t(Mt),bt(vt)}).catch(function(){lt=rt&&rt.pdbUri?rt.pdbUri:"https://files.rcsb.org/view/",dt=lt+nt+".pdb",at="pdb",console.warn("falling back to pdb format"),get(dt).then(function(Mt){_t(Mt),bt(vt)}).catch(function(Mt){_t(""),bt(vt),console.error("fetch of "+dt+" failed: "+Mt.statusText)})}):get(dt).then(function(Mt){_t(Mt),bt(vt)}).catch(function(Mt){_t(""),bt(vt),console.error("fetch of "+dt+" failed: "+Mt.statusText)})})}return st?(yt.then(function(bt){st(bt)}),vt):yt}function getColorFromStyle(nt,tt){let rt=tt.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[rt]<"u")rt=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[rt];else if(typeof rt=="string"&&rt.endsWith("Carbon")){let dt=rt.substring(0,rt.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[dt]<"u"){let yt=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);yt.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[dt],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[rt]={prop:"elem",map:yt},rt=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[rt]}}let st=nt.color;if(typeof tt.color<"u"&&tt.color!="spectrum"&&(st=tt.color),typeof rt<"u"){let dt,yt;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[rt]<"u")rt=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[rt],typeof rt[nt[rt.prop]]<"u"&&(st=rt.map[nt[rt.prop]]);else if(typeof rt[nt[rt.prop]]<"u")st=rt.map[nt[rt.prop]];else if(typeof rt.prop<"u"&&typeof rt.gradient<"u"){dt=rt.prop;var at=rt.gradient;at instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(at=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(rt));let vt=at.range()||[-1,1];yt=getAtomProperty(nt,dt),yt!=null&&(st=at.valueToHex(yt,vt))}else typeof rt.prop<"u"&&typeof rt.map<"u"?(dt=rt.prop,yt=getAtomProperty(nt,dt),typeof rt.map[yt]<"u"&&(st=rt.map[yt])):typeof tt.colorscheme[nt.elem]<"u"?st=tt.colorscheme[nt.elem]:console.warn("Could not interpret colorscheme "+rt)}else typeof tt.colorfunc<"u"&&(st=tt.colorfunc(nt));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(st)}function getElement(nt){let tt=nt;return typeof nt=="string"?tt=document.querySelector("#"+nt):typeof nt=="object"&&nt.get&&(tt=nt.get(0)),tt}function inflateString(nt,tt=!0){let rt;return typeof nt=="string"?rt=new TextEncoder().encode(nt):rt=new Uint8Array(nt),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(rt,{to:tt?"string":null})}},"./node_modules/upng-js/UPNG.js":(nt,tt,rt)=>{(function(){var st={},at;nt.exports=st,at=rt("./node_modules/upng-js/node_modules/pako/index.js"),function(lt,dt){lt.toRGBA8=function(yt){var vt=yt.width,_t=yt.height;if(yt.tabs.acTL==null)return[lt.toRGBA8.decodeImage(yt.data,vt,_t,yt).buffer];var bt=[];yt.frames[0].data==null&&(yt.frames[0].data=yt.data);for(var Mt,Ct=new Uint8Array(vt*_t*4),Tt=0;Tt<yt.frames.length;Tt++){var $t=yt.frames[Tt],Rt=$t.rect.x,Et=$t.rect.y,wt=$t.rect.width,Pt=$t.rect.height,Ft=lt.toRGBA8.decodeImage($t.data,wt,Pt,yt);if(Tt==0?Mt=Ft:$t.blend==0?lt._copyTile(Ft,wt,Pt,Mt,vt,_t,Rt,Et,0):$t.blend==1&&lt._copyTile(Ft,wt,Pt,Mt,vt,_t,Rt,Et,1),bt.push(Mt.buffer),Mt=Mt.slice(0),$t.dispose!=0){if($t.dispose==1)lt._copyTile(Ct,wt,Pt,Mt,vt,_t,Rt,Et,0);else if($t.dispose==2){for(var Nt=Tt-1;yt.frames[Nt].dispose==2;)Nt--;Mt=new Uint8Array(bt[Nt]).slice(0)}}}return bt},lt.toRGBA8.decodeImage=function(yt,vt,_t,bt){var Mt=vt*_t,Ct=lt.decode._getBPP(bt),Tt=Math.ceil(vt*Ct/8),$t=new Uint8Array(Mt*4),Rt=new Uint32Array($t.buffer),Et=bt.ctype,wt=bt.depth,Pt=lt._bin.readUshort;if(Et==6){var Ft=Mt<<2;if(wt==8)for(var Nt=0;Nt<Ft;Nt++)$t[Nt]=yt[Nt];if(wt==16)for(var Nt=0;Nt<Ft;Nt++)$t[Nt]=yt[Nt<<1]}else if(Et==2){var Ot=bt.tabs.tRNS,Bt=-1,Xt=-1,Zt=-1;if(Ot&&(Bt=Ot[0],Xt=Ot[1],Zt=Ot[2]),wt==8)for(var Nt=0;Nt<Mt;Nt++){var rn=Nt<<2,Gt=Nt*3;$t[rn]=yt[Gt],$t[rn+1]=yt[Gt+1],$t[rn+2]=yt[Gt+2],$t[rn+3]=255,Bt!=-1&&yt[Gt]==Bt&&yt[Gt+1]==Xt&&yt[Gt+2]==Zt&&($t[rn+3]=0)}if(wt==16)for(var Nt=0;Nt<Mt;Nt++){var rn=Nt<<2,Gt=Nt*6;$t[rn]=yt[Gt],$t[rn+1]=yt[Gt+2],$t[rn+2]=yt[Gt+4],$t[rn+3]=255,Bt!=-1&&Pt(yt,Gt)==Bt&&Pt(yt,Gt+2)==Xt&&Pt(yt,Gt+4)==Zt&&($t[rn+3]=0)}}else if(Et==3){var nn=bt.tabs.PLTE,cn=bt.tabs.tRNS,an=cn?cn.length:0;if(wt==1)for(var mn=0;mn<_t;mn++)for(var En=mn*Tt,Cn=mn*vt,Nt=0;Nt<vt;Nt++){var rn=Cn+Nt<<2,Mn=yt[En+(Nt>>3)]>>7-((Nt&7)<<0)&1,un=3*Mn;$t[rn]=nn[un],$t[rn+1]=nn[un+1],$t[rn+2]=nn[un+2],$t[rn+3]=Mn<an?cn[Mn]:255}if(wt==2)for(var mn=0;mn<_t;mn++)for(var En=mn*Tt,Cn=mn*vt,Nt=0;Nt<vt;Nt++){var rn=Cn+Nt<<2,Mn=yt[En+(Nt>>2)]>>6-((Nt&3)<<1)&3,un=3*Mn;$t[rn]=nn[un],$t[rn+1]=nn[un+1],$t[rn+2]=nn[un+2],$t[rn+3]=Mn<an?cn[Mn]:255}if(wt==4)for(var mn=0;mn<_t;mn++)for(var En=mn*Tt,Cn=mn*vt,Nt=0;Nt<vt;Nt++){var rn=Cn+Nt<<2,Mn=yt[En+(Nt>>1)]>>4-((Nt&1)<<2)&15,un=3*Mn;$t[rn]=nn[un],$t[rn+1]=nn[un+1],$t[rn+2]=nn[un+2],$t[rn+3]=Mn<an?cn[Mn]:255}if(wt==8)for(var Nt=0;Nt<Mt;Nt++){var rn=Nt<<2,Mn=yt[Nt],un=3*Mn;$t[rn]=nn[un],$t[rn+1]=nn[un+1],$t[rn+2]=nn[un+2],$t[rn+3]=Mn<an?cn[Mn]:255}}else if(Et==4){if(wt==8)for(var Nt=0;Nt<Mt;Nt++){var rn=Nt<<2,Tn=Nt<<1,Pn=yt[Tn];$t[rn]=Pn,$t[rn+1]=Pn,$t[rn+2]=Pn,$t[rn+3]=yt[Tn+1]}if(wt==16)for(var Nt=0;Nt<Mt;Nt++){var rn=Nt<<2,Tn=Nt<<2,Pn=yt[Tn];$t[rn]=Pn,$t[rn+1]=Pn,$t[rn+2]=Pn,$t[rn+3]=yt[Tn+2]}}else if(Et==0){var Bt=bt.tabs.tRNS?bt.tabs.tRNS:-1;if(wt==1)for(var Nt=0;Nt<Mt;Nt++){var Pn=255*(yt[Nt>>3]>>7-(Nt&7)&1),dn=Pn==Bt*255?0:255;Rt[Nt]=dn<<24|Pn<<16|Pn<<8|Pn}if(wt==2)for(var Nt=0;Nt<Mt;Nt++){var Pn=85*(yt[Nt>>2]>>6-((Nt&3)<<1)&3),dn=Pn==Bt*85?0:255;Rt[Nt]=dn<<24|Pn<<16|Pn<<8|Pn}if(wt==4)for(var Nt=0;Nt<Mt;Nt++){var Pn=17*(yt[Nt>>1]>>4-((Nt&1)<<2)&15),dn=Pn==Bt*17?0:255;Rt[Nt]=dn<<24|Pn<<16|Pn<<8|Pn}if(wt==8)for(var Nt=0;Nt<Mt;Nt++){var Pn=yt[Nt],dn=Pn==Bt?0:255;Rt[Nt]=dn<<24|Pn<<16|Pn<<8|Pn}if(wt==16)for(var Nt=0;Nt<Mt;Nt++){var Pn=yt[Nt<<1],dn=Pt(yt,Nt<<1)==Bt?0:255;Rt[Nt]=dn<<24|Pn<<16|Pn<<8|Pn}}return $t},lt.decode=function(yt){for(var vt=new Uint8Array(yt),_t=8,bt=lt._bin,Mt=bt.readUshort,Ct=bt.readUint,Tt={tabs:{},frames:[]},$t=new Uint8Array(vt.length),Rt=0,Et,wt=0,Pt=[137,80,78,71,13,10,26,10],Ft=0;Ft<8;Ft++)if(vt[Ft]!=Pt[Ft])throw"The input is not a PNG file!";for(;_t<vt.length;){var Nt=bt.readUint(vt,_t);_t+=4;var Ot=bt.readASCII(vt,_t,4);if(_t+=4,Ot=="IHDR")lt.decode._IHDR(vt,_t,Tt);else if(Ot=="IDAT"){for(var Ft=0;Ft<Nt;Ft++)$t[Rt+Ft]=vt[_t+Ft];Rt+=Nt}else if(Ot=="acTL")Tt.tabs[Ot]={num_frames:Ct(vt,_t),num_plays:Ct(vt,_t+4)},Et=new Uint8Array(vt.length);else if(Ot=="fcTL"){if(wt!=0){var Bt=Tt.frames[Tt.frames.length-1];Bt.data=lt.decode._decompress(Tt,Et.slice(0,wt),Bt.rect.width,Bt.rect.height),wt=0}var Xt={x:Ct(vt,_t+12),y:Ct(vt,_t+16),width:Ct(vt,_t+4),height:Ct(vt,_t+8)},Zt=Mt(vt,_t+22);Zt=Mt(vt,_t+20)/(Zt==0?100:Zt);var rn={rect:Xt,delay:Math.round(Zt*1e3),dispose:vt[_t+24],blend:vt[_t+25]};Tt.frames.push(rn)}else if(Ot=="fdAT"){for(var Ft=0;Ft<Nt-4;Ft++)Et[wt+Ft]=vt[_t+Ft+4];wt+=Nt-4}else if(Ot=="pHYs")Tt.tabs[Ot]=[bt.readUint(vt,_t),bt.readUint(vt,_t+4),vt[_t+8]];else if(Ot=="cHRM"){Tt.tabs[Ot]=[];for(var Ft=0;Ft<8;Ft++)Tt.tabs[Ot].push(bt.readUint(vt,_t+Ft*4))}else if(Ot=="tEXt"){Tt.tabs[Ot]==null&&(Tt.tabs[Ot]={});var Gt=bt.nextZero(vt,_t),nn=bt.readASCII(vt,_t,Gt-_t),cn=bt.readASCII(vt,Gt+1,_t+Nt-Gt-1);Tt.tabs[Ot][nn]=cn}else if(Ot=="iTXt"){Tt.tabs[Ot]==null&&(Tt.tabs[Ot]={});var Gt=0,an=_t;Gt=bt.nextZero(vt,an);var nn=bt.readASCII(vt,an,Gt-an);an=Gt+1,vt[an],vt[an+1],an+=2,Gt=bt.nextZero(vt,an),bt.readASCII(vt,an,Gt-an),an=Gt+1,Gt=bt.nextZero(vt,an),bt.readUTF8(vt,an,Gt-an),an=Gt+1;var cn=bt.readUTF8(vt,an,Nt-(an-_t));Tt.tabs[Ot][nn]=cn}else if(Ot=="PLTE")Tt.tabs[Ot]=bt.readBytes(vt,_t,Nt);else if(Ot=="hIST"){var mn=Tt.tabs.PLTE.length/3;Tt.tabs[Ot]=[];for(var Ft=0;Ft<mn;Ft++)Tt.tabs[Ot].push(Mt(vt,_t+Ft*2))}else if(Ot=="tRNS")Tt.ctype==3?Tt.tabs[Ot]=bt.readBytes(vt,_t,Nt):Tt.ctype==0?Tt.tabs[Ot]=Mt(vt,_t):Tt.ctype==2&&(Tt.tabs[Ot]=[Mt(vt,_t),Mt(vt,_t+2),Mt(vt,_t+4)]);else if(Ot=="gAMA")Tt.tabs[Ot]=bt.readUint(vt,_t)/1e5;else if(Ot=="sRGB")Tt.tabs[Ot]=vt[_t];else if(Ot=="bKGD")Tt.ctype==0||Tt.ctype==4?Tt.tabs[Ot]=[Mt(vt,_t)]:Tt.ctype==2||Tt.ctype==6?Tt.tabs[Ot]=[Mt(vt,_t),Mt(vt,_t+2),Mt(vt,_t+4)]:Tt.ctype==3&&(Tt.tabs[Ot]=vt[_t]);else if(Ot=="IEND"){if(wt!=0){var Bt=Tt.frames[Tt.frames.length-1];Bt.data=lt.decode._decompress(Tt,Et.slice(0,wt),Bt.rect.width,Bt.rect.height),wt=0}Tt.data=lt.decode._decompress(Tt,$t,Tt.width,Tt.height);break}_t+=Nt,bt.readUint(vt,_t),_t+=4}return delete Tt.compress,delete Tt.interlace,delete Tt.filter,Tt},lt.decode._decompress=function(yt,vt,_t,bt){return yt.compress==0&&(vt=lt.decode._inflate(vt)),yt.interlace==0?vt=lt.decode._filterZero(vt,yt,0,_t,bt):yt.interlace==1&&(vt=lt.decode._readInterlace(vt,yt)),vt},lt.decode._inflate=function(yt){return dt.inflate(yt)},lt.decode._readInterlace=function(yt,vt){for(var _t=vt.width,bt=vt.height,Mt=lt.decode._getBPP(vt),Ct=Mt>>3,Tt=Math.ceil(_t*Mt/8),$t=new Uint8Array(bt*Tt),Rt=0,Et=[0,0,4,0,2,0,1],wt=[0,4,0,2,0,1,0],Pt=[8,8,8,4,4,2,2],Ft=[8,8,4,4,2,2,1],Nt=0;Nt<7;){for(var Ot=Pt[Nt],Bt=Ft[Nt],Xt=0,Zt=0,rn=Et[Nt];rn<bt;)rn+=Ot,Zt++;for(var Gt=wt[Nt];Gt<_t;)Gt+=Bt,Xt++;var nn=Math.ceil(Xt*Mt/8);lt.decode._filterZero(yt,vt,Rt,Xt,Zt);for(var cn=0,an=Et[Nt];an<bt;){for(var mn=wt[Nt],En=Rt+cn*nn<<3;mn<_t;){if(Mt==1){var Cn=yt[En>>3];Cn=Cn>>7-(En&7)&1,$t[an*Tt+(mn>>3)]|=Cn<<7-((mn&3)<<0)}if(Mt==2){var Cn=yt[En>>3];Cn=Cn>>6-(En&7)&3,$t[an*Tt+(mn>>2)]|=Cn<<6-((mn&3)<<1)}if(Mt==4){var Cn=yt[En>>3];Cn=Cn>>4-(En&7)&15,$t[an*Tt+(mn>>1)]|=Cn<<4-((mn&1)<<2)}if(Mt>=8)for(var Mn=an*Tt+mn*Ct,un=0;un<Ct;un++)$t[Mn+un]=yt[(En>>3)+un];En+=Mt,mn+=Bt}cn++,an+=Ot}Xt*Zt!=0&&(Rt+=Zt*(1+nn)),Nt=Nt+1}return $t},lt.decode._getBPP=function(yt){var vt=[1,null,3,1,2,null,4][yt.ctype];return vt*yt.depth},lt.decode._filterZero=function(yt,vt,_t,bt,Mt){var Ct=lt.decode._getBPP(vt),Tt=Math.ceil(bt*Ct/8),$t=lt.decode._paeth;Ct=Math.ceil(Ct/8);for(var Rt=0;Rt<Mt;Rt++){var Et=_t+Rt*Tt,wt=Et+Rt+1,Pt=yt[wt-1];if(Pt==0)for(var Ft=0;Ft<Tt;Ft++)yt[Et+Ft]=yt[wt+Ft];else if(Pt==1){for(var Ft=0;Ft<Ct;Ft++)yt[Et+Ft]=yt[wt+Ft];for(var Ft=Ct;Ft<Tt;Ft++)yt[Et+Ft]=yt[wt+Ft]+yt[Et+Ft-Ct]&255}else if(Rt==0){for(var Ft=0;Ft<Ct;Ft++)yt[Et+Ft]=yt[wt+Ft];if(Pt==2)for(var Ft=Ct;Ft<Tt;Ft++)yt[Et+Ft]=yt[wt+Ft]&255;if(Pt==3)for(var Ft=Ct;Ft<Tt;Ft++)yt[Et+Ft]=yt[wt+Ft]+(yt[Et+Ft-Ct]>>1)&255;if(Pt==4)for(var Ft=Ct;Ft<Tt;Ft++)yt[Et+Ft]=yt[wt+Ft]+$t(yt[Et+Ft-Ct],0,0)&255}else{if(Pt==2)for(var Ft=0;Ft<Tt;Ft++)yt[Et+Ft]=yt[wt+Ft]+yt[Et+Ft-Tt]&255;if(Pt==3){for(var Ft=0;Ft<Ct;Ft++)yt[Et+Ft]=yt[wt+Ft]+(yt[Et+Ft-Tt]>>1)&255;for(var Ft=Ct;Ft<Tt;Ft++)yt[Et+Ft]=yt[wt+Ft]+(yt[Et+Ft-Tt]+yt[Et+Ft-Ct]>>1)&255}if(Pt==4){for(var Ft=0;Ft<Ct;Ft++)yt[Et+Ft]=yt[wt+Ft]+$t(0,yt[Et+Ft-Tt],0)&255;for(var Ft=Ct;Ft<Tt;Ft++)yt[Et+Ft]=yt[wt+Ft]+$t(yt[Et+Ft-Ct],yt[Et+Ft-Tt],yt[Et+Ft-Ct-Tt])&255}}}return yt},lt.decode._paeth=function(yt,vt,_t){var bt=yt+vt-_t,Mt=Math.abs(bt-yt),Ct=Math.abs(bt-vt),Tt=Math.abs(bt-_t);return Mt<=Ct&&Mt<=Tt?yt:Ct<=Tt?vt:_t},lt.decode._IHDR=function(yt,vt,_t){var bt=lt._bin;_t.width=bt.readUint(yt,vt),vt+=4,_t.height=bt.readUint(yt,vt),vt+=4,_t.depth=yt[vt],vt++,_t.ctype=yt[vt],vt++,_t.compress=yt[vt],vt++,_t.filter=yt[vt],vt++,_t.interlace=yt[vt],vt++},lt._bin={nextZero:function(yt,vt){for(;yt[vt]!=0;)vt++;return vt},readUshort:function(yt,vt){return yt[vt]<<8|yt[vt+1]},writeUshort:function(yt,vt,_t){yt[vt]=_t>>8&255,yt[vt+1]=_t&255},readUint:function(yt,vt){return yt[vt]*16777216+(yt[vt+1]<<16|yt[vt+2]<<8|yt[vt+3])},writeUint:function(yt,vt,_t){yt[vt]=_t>>24&255,yt[vt+1]=_t>>16&255,yt[vt+2]=_t>>8&255,yt[vt+3]=_t&255},readASCII:function(yt,vt,_t){for(var bt="",Mt=0;Mt<_t;Mt++)bt+=String.fromCharCode(yt[vt+Mt]);return bt},writeASCII:function(yt,vt,_t){for(var bt=0;bt<_t.length;bt++)yt[vt+bt]=_t.charCodeAt(bt)},readBytes:function(yt,vt,_t){for(var bt=[],Mt=0;Mt<_t;Mt++)bt.push(yt[vt+Mt]);return bt},pad:function(yt){return yt.length<2?"0"+yt:yt},readUTF8:function(yt,vt,_t){for(var bt="",Mt,Ct=0;Ct<_t;Ct++)bt+="%"+lt._bin.pad(yt[vt+Ct].toString(16));try{Mt=decodeURIComponent(bt)}catch{return lt._bin.readASCII(yt,vt,_t)}return Mt}},lt._copyTile=function(yt,vt,_t,bt,Mt,Ct,Tt,$t,Rt){for(var Et=Math.min(vt,Mt),wt=Math.min(_t,Ct),Pt=0,Ft=0,Nt=0;Nt<wt;Nt++)for(var Ot=0;Ot<Et;Ot++)if(Tt>=0&&$t>=0?(Pt=Nt*vt+Ot<<2,Ft=($t+Nt)*Mt+Tt+Ot<<2):(Pt=(-$t+Nt)*vt-Tt+Ot<<2,Ft=Nt*Mt+Ot<<2),Rt==0)bt[Ft]=yt[Pt],bt[Ft+1]=yt[Pt+1],bt[Ft+2]=yt[Pt+2],bt[Ft+3]=yt[Pt+3];else if(Rt==1){var Bt=yt[Pt+3]*.00392156862745098,Xt=yt[Pt]*Bt,Zt=yt[Pt+1]*Bt,rn=yt[Pt+2]*Bt,Gt=bt[Ft+3]*(1/255),nn=bt[Ft]*Gt,cn=bt[Ft+1]*Gt,an=bt[Ft+2]*Gt,mn=1-Bt,En=Bt+Gt*mn,Cn=En==0?0:1/En;bt[Ft+3]=255*En,bt[Ft+0]=(Xt+nn*mn)*Cn,bt[Ft+1]=(Zt+cn*mn)*Cn,bt[Ft+2]=(rn+an*mn)*Cn}else if(Rt==2){var Bt=yt[Pt+3],Xt=yt[Pt],Zt=yt[Pt+1],rn=yt[Pt+2],Gt=bt[Ft+3],nn=bt[Ft],cn=bt[Ft+1],an=bt[Ft+2];Bt==Gt&&Xt==nn&&Zt==cn&&rn==an?(bt[Ft]=0,bt[Ft+1]=0,bt[Ft+2]=0,bt[Ft+3]=0):(bt[Ft]=Xt,bt[Ft+1]=Zt,bt[Ft+2]=rn,bt[Ft+3]=Bt)}else if(Rt==3){var Bt=yt[Pt+3],Xt=yt[Pt],Zt=yt[Pt+1],rn=yt[Pt+2],Gt=bt[Ft+3],nn=bt[Ft],cn=bt[Ft+1],an=bt[Ft+2];if(Bt==Gt&&Xt==nn&&Zt==cn&&rn==an)continue;if(Bt<220&&Gt>20)return!1}return!0},lt.encode=function(yt,vt,_t,bt,Mt,Ct){bt==null&&(bt=0),Ct==null&&(Ct=!1);for(var Tt=new Uint8Array(yt[0].byteLength*yt.length+100),$t=[137,80,78,71,13,10,26,10],Rt=0;Rt<8;Rt++)Tt[Rt]=$t[Rt];var Et=8,wt=lt._bin,Pt=lt.crc.crc,Ft=wt.writeUint,Nt=wt.writeUshort,Ot=wt.writeASCII,Bt=lt.encode.compressPNG(yt,vt,_t,bt,Ct);Ft(Tt,Et,13),Et+=4,Ot(Tt,Et,"IHDR"),Et+=4,Ft(Tt,Et,vt),Et+=4,Ft(Tt,Et,_t),Et+=4,Tt[Et]=Bt.depth,Et++,Tt[Et]=Bt.ctype,Et++,Tt[Et]=0,Et++,Tt[Et]=0,Et++,Tt[Et]=0,Et++,Ft(Tt,Et,Pt(Tt,Et-17,17)),Et+=4,Ft(Tt,Et,1),Et+=4,Ot(Tt,Et,"sRGB"),Et+=4,Tt[Et]=1,Et++,Ft(Tt,Et,Pt(Tt,Et-5,5)),Et+=4;var Xt=yt.length>1;if(Xt&&(Ft(Tt,Et,8),Et+=4,Ot(Tt,Et,"acTL"),Et+=4,Ft(Tt,Et,yt.length),Et+=4,Ft(Tt,Et,0),Et+=4,Ft(Tt,Et,Pt(Tt,Et-12,12)),Et+=4),Bt.ctype==3){var Zt=Bt.plte.length;Ft(Tt,Et,Zt*3),Et+=4,Ot(Tt,Et,"PLTE"),Et+=4;for(var Rt=0;Rt<Zt;Rt++){var rn=Rt*3,Gt=Bt.plte[Rt],nn=Gt&255,cn=Gt>>8&255,an=Gt>>16&255;Tt[Et+rn+0]=nn,Tt[Et+rn+1]=cn,Tt[Et+rn+2]=an}if(Et+=Zt*3,Ft(Tt,Et,Pt(Tt,Et-Zt*3-4,Zt*3+4)),Et+=4,Bt.gotAlpha){Ft(Tt,Et,Zt),Et+=4,Ot(Tt,Et,"tRNS"),Et+=4;for(var Rt=0;Rt<Zt;Rt++)Tt[Et+Rt]=Bt.plte[Rt]>>24&255;Et+=Zt,Ft(Tt,Et,Pt(Tt,Et-Zt-4,Zt+4)),Et+=4}}for(var mn=0,En=0;En<Bt.frames.length;En++){var Cn=Bt.frames[En];Xt&&(Ft(Tt,Et,26),Et+=4,Ot(Tt,Et,"fcTL"),Et+=4,Ft(Tt,Et,mn++),Et+=4,Ft(Tt,Et,Cn.rect.width),Et+=4,Ft(Tt,Et,Cn.rect.height),Et+=4,Ft(Tt,Et,Cn.rect.x),Et+=4,Ft(Tt,Et,Cn.rect.y),Et+=4,Nt(Tt,Et,Mt[En]),Et+=2,Nt(Tt,Et,1e3),Et+=2,Tt[Et]=Cn.dispose,Et++,Tt[Et]=Cn.blend,Et++,Ft(Tt,Et,Pt(Tt,Et-30,30)),Et+=4);var Mn=Cn.cimg,Zt=Mn.length;Ft(Tt,Et,Zt+(En==0?0:4)),Et+=4;var un=Et;Ot(Tt,Et,En==0?"IDAT":"fdAT"),Et+=4,En!=0&&(Ft(Tt,Et,mn++),Et+=4);for(var Rt=0;Rt<Zt;Rt++)Tt[Et+Rt]=Mn[Rt];Et+=Zt,Ft(Tt,Et,Pt(Tt,un,Et-un)),Et+=4}return Ft(Tt,Et,0),Et+=4,Ot(Tt,Et,"IEND"),Et+=4,Ft(Tt,Et,Pt(Tt,Et-4,4)),Et+=4,Tt.buffer.slice(0,Et)},lt.encode.compressPNG=function(yt,vt,_t,bt,Mt){for(var Ct=lt.encode.compress(yt,vt,_t,bt,!1,Mt),Tt=0;Tt<yt.length;Tt++){var $t=Ct.frames[Tt];$t.rect.width;var Rt=$t.rect.height,Et=$t.bpl,wt=$t.bpp,Pt=new Uint8Array(Rt*Et+Rt);$t.cimg=lt.encode._filterZero($t.img,Rt,wt,Et,Pt)}return Ct},lt.encode.compress=function(yt,vt,_t,bt,Mt,Ct){Ct==null&&(Ct=!1);for(var Tt=6,$t=8,Rt=4,Et=255,wt=0;wt<yt.length;wt++)for(var Pt=new Uint8Array(yt[wt]),Ft=Pt.length,Nt=0;Nt<Ft;Nt+=4)Et&=Pt[Nt+3];var Ot=Et!=255,Bt={},Xt=[];if(yt.length!=0&&(Bt[0]=0,Xt.push(0),bt!=0&&bt--),bt!=0){var Zt=lt.quantize(yt,bt,Mt);yt=Zt.bufs;for(var Nt=0;Nt<Zt.plte.length;Nt++){var rn=Zt.plte[Nt].est.rgba;Bt[rn]==null&&(Bt[rn]=Xt.length,Xt.push(rn))}}else for(var wt=0;wt<yt.length;wt++)for(var Gt=new Uint32Array(yt[wt]),Ft=Gt.length,Nt=0;Nt<Ft;Nt++){var rn=Gt[Nt];if((Nt<vt||rn!=Gt[Nt-1]&&rn!=Gt[Nt-vt])&&Bt[rn]==null&&(Bt[rn]=Xt.length,Xt.push(rn),Xt.length>=300))break}var nn=Ot?Mt:!1,cn=Xt.length;cn<=256&&Ct==!1&&(cn<=2?$t=1:cn<=4?$t=2:cn<=16?$t=4:$t=8,Mt&&($t=8),Ot=!0);for(var an=[],wt=0;wt<yt.length;wt++){var mn=new Uint8Array(yt[wt]),En=new Uint32Array(mn.buffer),Cn=0,Mn=0,un=vt,Tn=_t,Pn=0;if(wt!=0&&!nn){for(var dn=Mt||wt==1||an[an.length-2].dispose==2?1:2,Un=0,qn=1e9,In=0;In<dn;In++){for(var Jn=new Uint8Array(yt[wt-1-In]),Wn=new Uint32Array(yt[wt-1-In]),ar=vt,fr=_t,mr=-1,vr=-1,Ar=0;Ar<_t;Ar++)for(var $r=0;$r<vt;$r++){var Nt=Ar*vt+$r;En[Nt]!=Wn[Nt]&&($r<ar&&(ar=$r),$r>mr&&(mr=$r),Ar<fr&&(fr=Ar),Ar>vr&&(vr=Ar))}var Mr=mr==-1?1:(mr-ar+1)*(vr-fr+1);Mr<qn&&(qn=Mr,Un=In,mr==-1?(Cn=Mn=0,un=Tn=1):(Cn=ar,Mn=fr,un=mr-ar+1,Tn=vr-fr+1))}var Jn=new Uint8Array(yt[wt-1-Un]);Un==1&&(an[an.length-1].dispose=2);var hr=new Uint8Array(un*Tn*4);new Uint32Array(hr.buffer),lt._copyTile(Jn,vt,_t,hr,un,Tn,-Cn,-Mn,0),lt._copyTile(mn,vt,_t,hr,un,Tn,-Cn,-Mn,3)?(lt._copyTile(mn,vt,_t,hr,un,Tn,-Cn,-Mn,2),Pn=1):(lt._copyTile(mn,vt,_t,hr,un,Tn,-Cn,-Mn,0),Pn=0),mn=hr,En=new Uint32Array(mn.buffer)}var wr=4*un;if(cn<=256&&Ct==!1){wr=Math.ceil($t*un/8);for(var hr=new Uint8Array(wr*Tn),Ar=0;Ar<Tn;Ar++){var Nt=Ar*wr,Nr=Ar*un;if($t==8)for(var $r=0;$r<un;$r++)hr[Nt+$r]=Bt[En[Nr+$r]];else if($t==4)for(var $r=0;$r<un;$r++)hr[Nt+($r>>1)]|=Bt[En[Nr+$r]]<<4-($r&1)*4;else if($t==2)for(var $r=0;$r<un;$r++)hr[Nt+($r>>2)]|=Bt[En[Nr+$r]]<<6-($r&3)*2;else if($t==1)for(var $r=0;$r<un;$r++)hr[Nt+($r>>3)]|=Bt[En[Nr+$r]]<<7-($r&7)*1}mn=hr,Tt=3,Rt=1}else if(Ot==!1&&yt.length==1){for(var hr=new Uint8Array(un*Tn*3),Fr=un*Tn,Nt=0;Nt<Fr;Nt++){var Yr=Nt*3,cs=Nt*4;hr[Yr]=mn[cs],hr[Yr+1]=mn[cs+1],hr[Yr+2]=mn[cs+2]}mn=hr,Tt=2,Rt=3,wr=3*un}an.push({rect:{x:Cn,y:Mn,width:un,height:Tn},img:mn,bpl:wr,bpp:Rt,blend:Pn,dispose:nn?1:0})}return{ctype:Tt,depth:$t,plte:Xt,gotAlpha:Ot,frames:an}},lt.encode._filterZero=function(yt,vt,_t,bt,Mt){for(var Ct=[],Tt=0;Tt<5;Tt++)if(!(vt*bt>5e5&&(Tt==2||Tt==3||Tt==4))){for(var $t=0;$t<vt;$t++)lt.encode._filterLine(Mt,yt,$t,bt,_t,Tt);if(Ct.push(dt.deflate(Mt)),_t==1)break}for(var Rt,Et=1e9,wt=0;wt<Ct.length;wt++)Ct[wt].length<Et&&(Rt=wt,Et=Ct[wt].length);return Ct[Rt]},lt.encode._filterLine=function(yt,vt,_t,bt,Mt,Ct){var Tt=_t*bt,$t=Tt+_t,Rt=lt.decode._paeth;if(yt[$t]=Ct,$t++,Ct==0)for(var Et=0;Et<bt;Et++)yt[$t+Et]=vt[Tt+Et];else if(Ct==1){for(var Et=0;Et<Mt;Et++)yt[$t+Et]=vt[Tt+Et];for(var Et=Mt;Et<bt;Et++)yt[$t+Et]=vt[Tt+Et]-vt[Tt+Et-Mt]+256&255}else if(_t==0){for(var Et=0;Et<Mt;Et++)yt[$t+Et]=vt[Tt+Et];if(Ct==2)for(var Et=Mt;Et<bt;Et++)yt[$t+Et]=vt[Tt+Et];if(Ct==3)for(var Et=Mt;Et<bt;Et++)yt[$t+Et]=vt[Tt+Et]-(vt[Tt+Et-Mt]>>1)+256&255;if(Ct==4)for(var Et=Mt;Et<bt;Et++)yt[$t+Et]=vt[Tt+Et]-Rt(vt[Tt+Et-Mt],0,0)+256&255}else{if(Ct==2)for(var Et=0;Et<bt;Et++)yt[$t+Et]=vt[Tt+Et]+256-vt[Tt+Et-bt]&255;if(Ct==3){for(var Et=0;Et<Mt;Et++)yt[$t+Et]=vt[Tt+Et]+256-(vt[Tt+Et-bt]>>1)&255;for(var Et=Mt;Et<bt;Et++)yt[$t+Et]=vt[Tt+Et]+256-(vt[Tt+Et-bt]+vt[Tt+Et-Mt]>>1)&255}if(Ct==4){for(var Et=0;Et<Mt;Et++)yt[$t+Et]=vt[Tt+Et]+256-Rt(0,vt[Tt+Et-bt],0)&255;for(var Et=Mt;Et<bt;Et++)yt[$t+Et]=vt[Tt+Et]+256-Rt(vt[Tt+Et-Mt],vt[Tt+Et-bt],vt[Tt+Et-Mt-bt])&255}}},lt.crc={table:function(){for(var yt=new Uint32Array(256),vt=0;vt<256;vt++){for(var _t=vt,bt=0;bt<8;bt++)_t&1?_t=3988292384^_t>>>1:_t=_t>>>1;yt[vt]=_t}return yt}(),update:function(yt,vt,_t,bt){for(var Mt=0;Mt<bt;Mt++)yt=lt.crc.table[(yt^vt[_t+Mt])&255]^yt>>>8;return yt},crc:function(yt,vt,_t){return lt.crc.update(4294967295,yt,vt,_t)^4294967295}},lt.quantize=function(yt,vt,_t){for(var bt=[],Mt=0,Ct=0;Ct<yt.length;Ct++)bt.push(lt.encode.alphaMul(new Uint8Array(yt[Ct]),_t)),Mt+=yt[Ct].byteLength;for(var Tt=new Uint8Array(Mt),$t=new Uint32Array(Tt.buffer),Rt=0,Ct=0;Ct<bt.length;Ct++){for(var Et=bt[Ct],wt=Et.length,Pt=0;Pt<wt;Pt++)Tt[Rt+Pt]=Et[Pt];Rt+=wt}var Ft={i0:0,i1:Tt.length,bst:null,est:null,tdst:0,left:null,right:null};Ft.bst=lt.quantize.stats(Tt,Ft.i0,Ft.i1),Ft.est=lt.quantize.estats(Ft.bst);for(var Nt=[Ft];Nt.length<vt;){for(var Ot=0,Bt=0,Ct=0;Ct<Nt.length;Ct++)Nt[Ct].est.L>Ot&&(Ot=Nt[Ct].est.L,Bt=Ct);if(Ot<.001)break;var Xt=Nt[Bt],Zt=lt.quantize.splitPixels(Tt,$t,Xt.i0,Xt.i1,Xt.est.e,Xt.est.eMq255),rn={i0:Xt.i0,i1:Zt,bst:null,est:null,tdst:0,left:null,right:null};rn.bst=lt.quantize.stats(Tt,rn.i0,rn.i1),rn.est=lt.quantize.estats(rn.bst);var Gt={i0:Zt,i1:Xt.i1,bst:null,est:null,tdst:0,left:null,right:null};Gt.bst={R:[],m:[],N:Xt.bst.N-rn.bst.N};for(var Ct=0;Ct<16;Ct++)Gt.bst.R[Ct]=Xt.bst.R[Ct]-rn.bst.R[Ct];for(var Ct=0;Ct<4;Ct++)Gt.bst.m[Ct]=Xt.bst.m[Ct]-rn.bst.m[Ct];Gt.est=lt.quantize.estats(Gt.bst),Xt.left=rn,Xt.right=Gt,Nt[Bt]=rn,Nt.push(Gt)}Nt.sort(function(dn,Un){return Un.bst.N-dn.bst.N});for(var nn=0;nn<bt.length;nn++){for(var cn=lt.quantize.planeDst,an=new Uint8Array(bt[nn].buffer),mn=new Uint32Array(bt[nn].buffer),En=an.length,Ct=0;Ct<En;Ct+=4){for(var Cn=an[Ct]*.00392156862745098,Mn=an[Ct+1]*(1/255),un=an[Ct+2]*(1/255),Tn=an[Ct+3]*(1/255),Pn=Ft;Pn.left;)Pn=cn(Pn.est,Cn,Mn,un,Tn)<=0?Pn.left:Pn.right;mn[Ct>>2]=Pn.est.rgba}bt[nn]=mn.buffer}return{bufs:bt,plte:Nt}},lt.quantize.getNearest=function(yt,vt,_t,bt,Mt){if(yt.left==null)return yt.tdst=lt.quantize.dist(yt.est.q,vt,_t,bt,Mt),yt;var Ct=lt.quantize.planeDst(yt.est,vt,_t,bt,Mt),Tt=yt.left,$t=yt.right;Ct>0&&(Tt=yt.right,$t=yt.left);var Rt=lt.quantize.getNearest(Tt,vt,_t,bt,Mt);if(Rt.tdst<=Ct*Ct)return Rt;var Et=lt.quantize.getNearest($t,vt,_t,bt,Mt);return Et.tdst<Rt.tdst?Et:Rt},lt.quantize.planeDst=function(yt,vt,_t,bt,Mt){var Ct=yt.e;return Ct[0]*vt+Ct[1]*_t+Ct[2]*bt+Ct[3]*Mt-yt.eMq},lt.quantize.dist=function(yt,vt,_t,bt,Mt){var Ct=vt-yt[0],Tt=_t-yt[1],$t=bt-yt[2],Rt=Mt-yt[3];return Ct*Ct+Tt*Tt+$t*$t+Rt*Rt},lt.quantize.splitPixels=function(yt,vt,_t,bt,Mt,Ct){var Tt=lt.quantize.vecDot;for(bt-=4;_t<bt;){for(;Tt(yt,_t,Mt)<=Ct;)_t+=4;for(;Tt(yt,bt,Mt)>Ct;)bt-=4;if(_t>=bt)break;var $t=vt[_t>>2];vt[_t>>2]=vt[bt>>2],vt[bt>>2]=$t,_t+=4,bt-=4}for(;Tt(yt,_t,Mt)>Ct;)_t-=4;return _t+4},lt.quantize.vecDot=function(yt,vt,_t){return yt[vt]*_t[0]+yt[vt+1]*_t[1]+yt[vt+2]*_t[2]+yt[vt+3]*_t[3]},lt.quantize.stats=function(yt,vt,_t){for(var bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Mt=[0,0,0,0],Ct=_t-vt>>2,Tt=vt;Tt<_t;Tt+=4){var $t=yt[Tt]*.00392156862745098,Rt=yt[Tt+1]*(1/255),Et=yt[Tt+2]*(1/255),wt=yt[Tt+3]*(1/255);Mt[0]+=$t,Mt[1]+=Rt,Mt[2]+=Et,Mt[3]+=wt,bt[0]+=$t*$t,bt[1]+=$t*Rt,bt[2]+=$t*Et,bt[3]+=$t*wt,bt[5]+=Rt*Rt,bt[6]+=Rt*Et,bt[7]+=Rt*wt,bt[10]+=Et*Et,bt[11]+=Et*wt,bt[15]+=wt*wt}return bt[4]=bt[1],bt[8]=bt[2],bt[12]=bt[3],bt[9]=bt[6],bt[13]=bt[7],bt[14]=bt[11],{R:bt,m:Mt,N:Ct}},lt.quantize.estats=function(yt){var vt=yt.R,_t=yt.m,bt=yt.N,Mt=_t[0],Ct=_t[1],Tt=_t[2],$t=_t[3],Rt=bt==0?0:1/bt,Et=[vt[0]-Mt*Mt*Rt,vt[1]-Mt*Ct*Rt,vt[2]-Mt*Tt*Rt,vt[3]-Mt*$t*Rt,vt[4]-Ct*Mt*Rt,vt[5]-Ct*Ct*Rt,vt[6]-Ct*Tt*Rt,vt[7]-Ct*$t*Rt,vt[8]-Tt*Mt*Rt,vt[9]-Tt*Ct*Rt,vt[10]-Tt*Tt*Rt,vt[11]-Tt*$t*Rt,vt[12]-$t*Mt*Rt,vt[13]-$t*Ct*Rt,vt[14]-$t*Tt*Rt,vt[15]-$t*$t*Rt],wt=Et,Pt=lt.M4,Ft=[.5,.5,.5,.5],Nt=0,Ot=0;if(bt!=0)for(var Bt=0;Bt<10&&(Ft=Pt.multVec(wt,Ft),Ot=Math.sqrt(Pt.dot(Ft,Ft)),Ft=Pt.sml(1/Ot,Ft),!(Math.abs(Ot-Nt)<1e-9));Bt++)Nt=Ot;var Xt=[Mt*Rt,Ct*Rt,Tt*Rt,$t*Rt],Zt=Pt.dot(Pt.sml(255,Xt),Ft),rn=Xt[3]<.001?0:1/Xt[3];return{Cov:Et,q:Xt,e:Ft,L:Nt,eMq255:Zt,eMq:Pt.dot(Ft,Xt),rgba:(Math.round(255*Xt[3])<<24|Math.round(255*Xt[2]*rn)<<16|Math.round(255*Xt[1]*rn)<<8|Math.round(255*Xt[0]*rn)<<0)>>>0}},lt.M4={multVec:function(yt,vt){return[yt[0]*vt[0]+yt[1]*vt[1]+yt[2]*vt[2]+yt[3]*vt[3],yt[4]*vt[0]+yt[5]*vt[1]+yt[6]*vt[2]+yt[7]*vt[3],yt[8]*vt[0]+yt[9]*vt[1]+yt[10]*vt[2]+yt[11]*vt[3],yt[12]*vt[0]+yt[13]*vt[1]+yt[14]*vt[2]+yt[15]*vt[3]]},dot:function(yt,vt){return yt[0]*vt[0]+yt[1]*vt[1]+yt[2]*vt[2]+yt[3]*vt[3]},sml:function(yt,vt){return[yt*vt[0],yt*vt[1],yt*vt[2],yt*vt[3]]}},lt.encode.alphaMul=function(yt,vt){for(var _t=new Uint8Array(yt.length),bt=yt.length>>2,Mt=0;Mt<bt;Mt++){var Ct=Mt<<2,Tt=yt[Ct+3];vt&&(Tt=Tt<128?0:255);var $t=Tt*(1/255);_t[Ct+0]=yt[Ct+0]*$t,_t[Ct+1]=yt[Ct+1]*$t,_t[Ct+2]=yt[Ct+2]*$t,_t[Ct+3]=Tt}return _t}}(st,at)})()},"./node_modules/upng-js/node_modules/pako/index.js":(nt,tt,rt)=>{var st=rt("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,at=rt("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),lt=rt("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),dt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),yt={};st(yt,at,lt,dt),nt.exports=yt},"./node_modules/upng-js/node_modules/pako/lib/deflate.js":(nt,tt,rt)=>{var st=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),at=rt("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),lt=rt("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),dt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),yt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),vt=Object.prototype.toString,_t=0,bt=4,Mt=0,Ct=1,Tt=2,$t=-1,Rt=0,Et=8;function wt(Ot){if(!(this instanceof wt))return new wt(Ot);this.options=at.assign({level:$t,method:Et,chunkSize:16384,windowBits:15,memLevel:8,strategy:Rt,to:""},Ot||{});var Bt=this.options;Bt.raw&&Bt.windowBits>0?Bt.windowBits=-Bt.windowBits:Bt.gzip&&Bt.windowBits>0&&Bt.windowBits<16&&(Bt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yt,this.strm.avail_out=0;var Xt=st.deflateInit2(this.strm,Bt.level,Bt.method,Bt.windowBits,Bt.memLevel,Bt.strategy);if(Xt!==Mt)throw new Error(dt[Xt]);if(Bt.header&&st.deflateSetHeader(this.strm,Bt.header),Bt.dictionary){var Zt;if(typeof Bt.dictionary=="string"?Zt=lt.string2buf(Bt.dictionary):vt.call(Bt.dictionary)==="[object ArrayBuffer]"?Zt=new Uint8Array(Bt.dictionary):Zt=Bt.dictionary,Xt=st.deflateSetDictionary(this.strm,Zt),Xt!==Mt)throw new Error(dt[Xt]);this._dict_set=!0}}wt.prototype.push=function(Ot,Bt){var Xt=this.strm,Zt=this.options.chunkSize,rn,Gt;if(this.ended)return!1;Gt=Bt===~~Bt?Bt:Bt===!0?bt:_t,typeof Ot=="string"?Xt.input=lt.string2buf(Ot):vt.call(Ot)==="[object ArrayBuffer]"?Xt.input=new Uint8Array(Ot):Xt.input=Ot,Xt.next_in=0,Xt.avail_in=Xt.input.length;do{if(Xt.avail_out===0&&(Xt.output=new at.Buf8(Zt),Xt.next_out=0,Xt.avail_out=Zt),rn=st.deflate(Xt,Gt),rn!==Ct&&rn!==Mt)return this.onEnd(rn),this.ended=!0,!1;(Xt.avail_out===0||Xt.avail_in===0&&(Gt===bt||Gt===Tt))&&(this.options.to==="string"?this.onData(lt.buf2binstring(at.shrinkBuf(Xt.output,Xt.next_out))):this.onData(at.shrinkBuf(Xt.output,Xt.next_out)))}while((Xt.avail_in>0||Xt.avail_out===0)&&rn!==Ct);return Gt===bt?(rn=st.deflateEnd(this.strm),this.onEnd(rn),this.ended=!0,rn===Mt):(Gt===Tt&&(this.onEnd(Mt),Xt.avail_out=0),!0)},wt.prototype.onData=function(Ot){this.chunks.push(Ot)},wt.prototype.onEnd=function(Ot){Ot===Mt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=at.flattenChunks(this.chunks)),this.chunks=[],this.err=Ot,this.msg=this.strm.msg};function Pt(Ot,Bt){var Xt=new wt(Bt);if(Xt.push(Ot,!0),Xt.err)throw Xt.msg||dt[Xt.err];return Xt.result}function Ft(Ot,Bt){return Bt=Bt||{},Bt.raw=!0,Pt(Ot,Bt)}function Nt(Ot,Bt){return Bt=Bt||{},Bt.gzip=!0,Pt(Ot,Bt)}tt.Deflate=wt,tt.deflate=Pt,tt.deflateRaw=Ft,tt.gzip=Nt},"./node_modules/upng-js/node_modules/pako/lib/inflate.js":(nt,tt,rt)=>{var st=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),at=rt("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),lt=rt("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),dt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),yt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),vt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),_t=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),bt=Object.prototype.toString;function Mt($t){if(!(this instanceof Mt))return new Mt($t);this.options=at.assign({chunkSize:16384,windowBits:0,to:""},$t||{});var Rt=this.options;Rt.raw&&Rt.windowBits>=0&&Rt.windowBits<16&&(Rt.windowBits=-Rt.windowBits,Rt.windowBits===0&&(Rt.windowBits=-15)),Rt.windowBits>=0&&Rt.windowBits<16&&!($t&&$t.windowBits)&&(Rt.windowBits+=32),Rt.windowBits>15&&Rt.windowBits<48&&(Rt.windowBits&15||(Rt.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vt,this.strm.avail_out=0;var Et=st.inflateInit2(this.strm,Rt.windowBits);if(Et!==dt.Z_OK)throw new Error(yt[Et]);if(this.header=new _t,st.inflateGetHeader(this.strm,this.header),Rt.dictionary&&(typeof Rt.dictionary=="string"?Rt.dictionary=lt.string2buf(Rt.dictionary):bt.call(Rt.dictionary)==="[object ArrayBuffer]"&&(Rt.dictionary=new Uint8Array(Rt.dictionary)),Rt.raw&&(Et=st.inflateSetDictionary(this.strm,Rt.dictionary),Et!==dt.Z_OK)))throw new Error(yt[Et])}Mt.prototype.push=function($t,Rt){var Et=this.strm,wt=this.options.chunkSize,Pt=this.options.dictionary,Ft,Nt,Ot,Bt,Xt,Zt=!1;if(this.ended)return!1;Nt=Rt===~~Rt?Rt:Rt===!0?dt.Z_FINISH:dt.Z_NO_FLUSH,typeof $t=="string"?Et.input=lt.binstring2buf($t):bt.call($t)==="[object ArrayBuffer]"?Et.input=new Uint8Array($t):Et.input=$t,Et.next_in=0,Et.avail_in=Et.input.length;do{if(Et.avail_out===0&&(Et.output=new at.Buf8(wt),Et.next_out=0,Et.avail_out=wt),Ft=st.inflate(Et,dt.Z_NO_FLUSH),Ft===dt.Z_NEED_DICT&&Pt&&(Ft=st.inflateSetDictionary(this.strm,Pt)),Ft===dt.Z_BUF_ERROR&&Zt===!0&&(Ft=dt.Z_OK,Zt=!1),Ft!==dt.Z_STREAM_END&&Ft!==dt.Z_OK)return this.onEnd(Ft),this.ended=!0,!1;Et.next_out&&(Et.avail_out===0||Ft===dt.Z_STREAM_END||Et.avail_in===0&&(Nt===dt.Z_FINISH||Nt===dt.Z_SYNC_FLUSH))&&(this.options.to==="string"?(Ot=lt.utf8border(Et.output,Et.next_out),Bt=Et.next_out-Ot,Xt=lt.buf2string(Et.output,Ot),Et.next_out=Bt,Et.avail_out=wt-Bt,Bt&&at.arraySet(Et.output,Et.output,Ot,Bt,0),this.onData(Xt)):this.onData(at.shrinkBuf(Et.output,Et.next_out))),Et.avail_in===0&&Et.avail_out===0&&(Zt=!0)}while((Et.avail_in>0||Et.avail_out===0)&&Ft!==dt.Z_STREAM_END);return Ft===dt.Z_STREAM_END&&(Nt=dt.Z_FINISH),Nt===dt.Z_FINISH?(Ft=st.inflateEnd(this.strm),this.onEnd(Ft),this.ended=!0,Ft===dt.Z_OK):(Nt===dt.Z_SYNC_FLUSH&&(this.onEnd(dt.Z_OK),Et.avail_out=0),!0)},Mt.prototype.onData=function($t){this.chunks.push($t)},Mt.prototype.onEnd=function($t){$t===dt.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=at.flattenChunks(this.chunks)),this.chunks=[],this.err=$t,this.msg=this.strm.msg};function Ct($t,Rt){var Et=new Mt(Rt);if(Et.push($t,!0),Et.err)throw Et.msg||yt[Et.err];return Et.result}function Tt($t,Rt){return Rt=Rt||{},Rt.raw=!0,Ct($t,Rt)}tt.Inflate=Mt,tt.inflate=Ct,tt.inflateRaw=Tt,tt.ungzip=Ct},"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":(nt,tt)=>{var rt=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function st(dt,yt){return Object.prototype.hasOwnProperty.call(dt,yt)}tt.assign=function(dt){for(var yt=Array.prototype.slice.call(arguments,1);yt.length;){var vt=yt.shift();if(vt){if(typeof vt!="object")throw new TypeError(vt+"must be non-object");for(var _t in vt)st(vt,_t)&&(dt[_t]=vt[_t])}}return dt},tt.shrinkBuf=function(dt,yt){return dt.length===yt?dt:dt.subarray?dt.subarray(0,yt):(dt.length=yt,dt)};var at={arraySet:function(dt,yt,vt,_t,bt){if(yt.subarray&&dt.subarray){dt.set(yt.subarray(vt,vt+_t),bt);return}for(var Mt=0;Mt<_t;Mt++)dt[bt+Mt]=yt[vt+Mt]},flattenChunks:function(dt){var yt,vt,_t,bt,Mt,Ct;for(_t=0,yt=0,vt=dt.length;yt<vt;yt++)_t+=dt[yt].length;for(Ct=new Uint8Array(_t),bt=0,yt=0,vt=dt.length;yt<vt;yt++)Mt=dt[yt],Ct.set(Mt,bt),bt+=Mt.length;return Ct}},lt={arraySet:function(dt,yt,vt,_t,bt){for(var Mt=0;Mt<_t;Mt++)dt[bt+Mt]=yt[vt+Mt]},flattenChunks:function(dt){return[].concat.apply([],dt)}};tt.setTyped=function(dt){dt?(tt.Buf8=Uint8Array,tt.Buf16=Uint16Array,tt.Buf32=Int32Array,tt.assign(tt,at)):(tt.Buf8=Array,tt.Buf16=Array,tt.Buf32=Array,tt.assign(tt,lt))},tt.setTyped(rt)},"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":(nt,tt,rt)=>{var st=rt("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),at=!0,lt=!0;try{String.fromCharCode.apply(null,[0])}catch{at=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{lt=!1}for(var dt=new st.Buf8(256),yt=0;yt<256;yt++)dt[yt]=yt>=252?6:yt>=248?5:yt>=240?4:yt>=224?3:yt>=192?2:1;dt[254]=dt[254]=1,tt.string2buf=function(_t){var bt,Mt,Ct,Tt,$t,Rt=_t.length,Et=0;for(Tt=0;Tt<Rt;Tt++)Mt=_t.charCodeAt(Tt),(Mt&64512)===55296&&Tt+1<Rt&&(Ct=_t.charCodeAt(Tt+1),(Ct&64512)===56320&&(Mt=65536+(Mt-55296<<10)+(Ct-56320),Tt++)),Et+=Mt<128?1:Mt<2048?2:Mt<65536?3:4;for(bt=new st.Buf8(Et),$t=0,Tt=0;$t<Et;Tt++)Mt=_t.charCodeAt(Tt),(Mt&64512)===55296&&Tt+1<Rt&&(Ct=_t.charCodeAt(Tt+1),(Ct&64512)===56320&&(Mt=65536+(Mt-55296<<10)+(Ct-56320),Tt++)),Mt<128?bt[$t++]=Mt:Mt<2048?(bt[$t++]=192|Mt>>>6,bt[$t++]=128|Mt&63):Mt<65536?(bt[$t++]=224|Mt>>>12,bt[$t++]=128|Mt>>>6&63,bt[$t++]=128|Mt&63):(bt[$t++]=240|Mt>>>18,bt[$t++]=128|Mt>>>12&63,bt[$t++]=128|Mt>>>6&63,bt[$t++]=128|Mt&63);return bt};function vt(_t,bt){if(bt<65534&&(_t.subarray&&lt||!_t.subarray&&at))return String.fromCharCode.apply(null,st.shrinkBuf(_t,bt));for(var Mt="",Ct=0;Ct<bt;Ct++)Mt+=String.fromCharCode(_t[Ct]);return Mt}tt.buf2binstring=function(_t){return vt(_t,_t.length)},tt.binstring2buf=function(_t){for(var bt=new st.Buf8(_t.length),Mt=0,Ct=bt.length;Mt<Ct;Mt++)bt[Mt]=_t.charCodeAt(Mt);return bt},tt.buf2string=function(_t,bt){var Mt,Ct,Tt,$t,Rt=bt||_t.length,Et=new Array(Rt*2);for(Ct=0,Mt=0;Mt<Rt;){if(Tt=_t[Mt++],Tt<128){Et[Ct++]=Tt;continue}if($t=dt[Tt],$t>4){Et[Ct++]=65533,Mt+=$t-1;continue}for(Tt&=$t===2?31:$t===3?15:7;$t>1&&Mt<Rt;)Tt=Tt<<6|_t[Mt++]&63,$t--;if($t>1){Et[Ct++]=65533;continue}Tt<65536?Et[Ct++]=Tt:(Tt-=65536,Et[Ct++]=55296|Tt>>10&1023,Et[Ct++]=56320|Tt&1023)}return vt(Et,Ct)},tt.utf8border=function(_t,bt){var Mt;for(bt=bt||_t.length,bt>_t.length&&(bt=_t.length),Mt=bt-1;Mt>=0&&(_t[Mt]&192)===128;)Mt--;return Mt<0||Mt===0?bt:Mt+dt[_t[Mt]]>bt?Mt:bt}},"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":nt=>{function tt(rt,st,at,lt){for(var dt=rt&65535|0,yt=rt>>>16&65535|0,vt=0;at!==0;){vt=at>2e3?2e3:at,at-=vt;do dt=dt+st[lt++]|0,yt=yt+dt|0;while(--vt);dt%=65521,yt%=65521}return dt|yt<<16|0}nt.exports=tt},"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":nt=>{nt.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":nt=>{function tt(){for(var at,lt=[],dt=0;dt<256;dt++){at=dt;for(var yt=0;yt<8;yt++)at=at&1?3988292384^at>>>1:at>>>1;lt[dt]=at}return lt}var rt=tt();function st(at,lt,dt,yt){var vt=rt,_t=yt+dt;at^=-1;for(var bt=yt;bt<_t;bt++)at=at>>>8^vt[(at^lt[bt])&255];return at^-1}nt.exports=st},"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":(nt,tt,rt)=>{var st=rt("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),at=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),lt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),dt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),yt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),vt=0,_t=1,bt=3,Mt=4,Ct=5,Tt=0,$t=1,Rt=-2,Et=-3,wt=-5,Pt=-1,Ft=1,Nt=2,Ot=3,Bt=4,Xt=0,Zt=2,rn=8,Gt=9,nn=15,cn=8,an=29,mn=256,En=mn+1+an,Cn=30,Mn=19,un=2*En+1,Tn=15,Pn=3,dn=258,Un=dn+Pn+1,qn=32,In=42,Wn=69,ar=73,fr=91,mr=103,vr=113,Ar=666,$r=1,Mr=2,Jn=3,hr=4,wr=3;function Nr(Fn,Ur){return Fn.msg=yt[Ur],Ur}function Fr(Fn){return(Fn<<1)-(Fn>4?9:0)}function Yr(Fn){for(var Ur=Fn.length;--Ur>=0;)Fn[Ur]=0}function cs(Fn){var Ur=Fn.state,Vr=Ur.pending;Vr>Fn.avail_out&&(Vr=Fn.avail_out),Vr!==0&&(st.arraySet(Fn.output,Ur.pending_buf,Ur.pending_out,Vr,Fn.next_out),Fn.next_out+=Vr,Ur.pending_out+=Vr,Fn.total_out+=Vr,Fn.avail_out-=Vr,Ur.pending-=Vr,Ur.pending===0&&(Ur.pending_out=0))}function cr(Fn,Ur){at._tr_flush_block(Fn,Fn.block_start>=0?Fn.block_start:-1,Fn.strstart-Fn.block_start,Ur),Fn.block_start=Fn.strstart,cs(Fn.strm)}function Qn(Fn,Ur){Fn.pending_buf[Fn.pending++]=Ur}function _r(Fn,Ur){Fn.pending_buf[Fn.pending++]=Ur>>>8&255,Fn.pending_buf[Fn.pending++]=Ur&255}function Ir(Fn,Ur,Vr,dr){var Cr=Fn.avail_in;return Cr>dr&&(Cr=dr),Cr===0?0:(Fn.avail_in-=Cr,st.arraySet(Ur,Fn.input,Fn.next_in,Cr,Vr),Fn.state.wrap===1?Fn.adler=lt(Fn.adler,Ur,Cr,Vr):Fn.state.wrap===2&&(Fn.adler=dt(Fn.adler,Ur,Cr,Vr)),Fn.next_in+=Cr,Fn.total_in+=Cr,Cr)}function pr(Fn,Ur){var Vr=Fn.max_chain_length,dr=Fn.strstart,Cr,hs,ro=Fn.prev_length,oo=Fn.nice_match,ao=Fn.strstart>Fn.w_size-Un?Fn.strstart-(Fn.w_size-Un):0,Uo=Fn.window,gu=Fn.w_mask,yl=Fn.prev,_l=Fn.strstart+dn,Vo=Uo[dr+ro-1],uu=Uo[dr+ro];Fn.prev_length>=Fn.good_match&&(Vr>>=2),oo>Fn.lookahead&&(oo=Fn.lookahead);do if(Cr=Ur,!(Uo[Cr+ro]!==uu||Uo[Cr+ro-1]!==Vo||Uo[Cr]!==Uo[dr]||Uo[++Cr]!==Uo[dr+1])){dr+=2,Cr++;do;while(Uo[++dr]===Uo[++Cr]&&Uo[++dr]===Uo[++Cr]&&Uo[++dr]===Uo[++Cr]&&Uo[++dr]===Uo[++Cr]&&Uo[++dr]===Uo[++Cr]&&Uo[++dr]===Uo[++Cr]&&Uo[++dr]===Uo[++Cr]&&Uo[++dr]===Uo[++Cr]&&dr<_l);if(hs=dn-(_l-dr),dr=_l-dn,hs>ro){if(Fn.match_start=Ur,ro=hs,hs>=oo)break;Vo=Uo[dr+ro-1],uu=Uo[dr+ro]}}while((Ur=yl[Ur&gu])>ao&&--Vr!==0);return ro<=Fn.lookahead?ro:Fn.lookahead}function Tr(Fn){var Ur=Fn.w_size,Vr,dr,Cr,hs,ro;do{if(hs=Fn.window_size-Fn.lookahead-Fn.strstart,Fn.strstart>=Ur+(Ur-Un)){st.arraySet(Fn.window,Fn.window,Ur,Ur,0),Fn.match_start-=Ur,Fn.strstart-=Ur,Fn.block_start-=Ur,dr=Fn.hash_size,Vr=dr;do Cr=Fn.head[--Vr],Fn.head[Vr]=Cr>=Ur?Cr-Ur:0;while(--dr);dr=Ur,Vr=dr;do Cr=Fn.prev[--Vr],Fn.prev[Vr]=Cr>=Ur?Cr-Ur:0;while(--dr);hs+=Ur}if(Fn.strm.avail_in===0)break;if(dr=Ir(Fn.strm,Fn.window,Fn.strstart+Fn.lookahead,hs),Fn.lookahead+=dr,Fn.lookahead+Fn.insert>=Pn)for(ro=Fn.strstart-Fn.insert,Fn.ins_h=Fn.window[ro],Fn.ins_h=(Fn.ins_h<<Fn.hash_shift^Fn.window[ro+1])&Fn.hash_mask;Fn.insert&&(Fn.ins_h=(Fn.ins_h<<Fn.hash_shift^Fn.window[ro+Pn-1])&Fn.hash_mask,Fn.prev[ro&Fn.w_mask]=Fn.head[Fn.ins_h],Fn.head[Fn.ins_h]=ro,ro++,Fn.insert--,!(Fn.lookahead+Fn.insert<Pn)););}while(Fn.lookahead<Un&&Fn.strm.avail_in!==0)}function Wr(Fn,Ur){var Vr=65535;for(Vr>Fn.pending_buf_size-5&&(Vr=Fn.pending_buf_size-5);;){if(Fn.lookahead<=1){if(Tr(Fn),Fn.lookahead===0&&Ur===vt)return $r;if(Fn.lookahead===0)break}Fn.strstart+=Fn.lookahead,Fn.lookahead=0;var dr=Fn.block_start+Vr;if((Fn.strstart===0||Fn.strstart>=dr)&&(Fn.lookahead=Fn.strstart-dr,Fn.strstart=dr,cr(Fn,!1),Fn.strm.avail_out===0)||Fn.strstart-Fn.block_start>=Fn.w_size-Un&&(cr(Fn,!1),Fn.strm.avail_out===0))return $r}return Fn.insert=0,Ur===Mt?(cr(Fn,!0),Fn.strm.avail_out===0?Jn:hr):(Fn.strstart>Fn.block_start&&(cr(Fn,!1),Fn.strm.avail_out===0),$r)}function Kn(Fn,Ur){for(var Vr,dr;;){if(Fn.lookahead<Un){if(Tr(Fn),Fn.lookahead<Un&&Ur===vt)return $r;if(Fn.lookahead===0)break}if(Vr=0,Fn.lookahead>=Pn&&(Fn.ins_h=(Fn.ins_h<<Fn.hash_shift^Fn.window[Fn.strstart+Pn-1])&Fn.hash_mask,Vr=Fn.prev[Fn.strstart&Fn.w_mask]=Fn.head[Fn.ins_h],Fn.head[Fn.ins_h]=Fn.strstart),Vr!==0&&Fn.strstart-Vr<=Fn.w_size-Un&&(Fn.match_length=pr(Fn,Vr)),Fn.match_length>=Pn)if(dr=at._tr_tally(Fn,Fn.strstart-Fn.match_start,Fn.match_length-Pn),Fn.lookahead-=Fn.match_length,Fn.match_length<=Fn.max_lazy_match&&Fn.lookahead>=Pn){Fn.match_length--;do Fn.strstart++,Fn.ins_h=(Fn.ins_h<<Fn.hash_shift^Fn.window[Fn.strstart+Pn-1])&Fn.hash_mask,Vr=Fn.prev[Fn.strstart&Fn.w_mask]=Fn.head[Fn.ins_h],Fn.head[Fn.ins_h]=Fn.strstart;while(--Fn.match_length!==0);Fn.strstart++}else Fn.strstart+=Fn.match_length,Fn.match_length=0,Fn.ins_h=Fn.window[Fn.strstart],Fn.ins_h=(Fn.ins_h<<Fn.hash_shift^Fn.window[Fn.strstart+1])&Fn.hash_mask;else dr=at._tr_tally(Fn,0,Fn.window[Fn.strstart]),Fn.lookahead--,Fn.strstart++;if(dr&&(cr(Fn,!1),Fn.strm.avail_out===0))return $r}return Fn.insert=Fn.strstart<Pn-1?Fn.strstart:Pn-1,Ur===Mt?(cr(Fn,!0),Fn.strm.avail_out===0?Jn:hr):Fn.last_lit&&(cr(Fn,!1),Fn.strm.avail_out===0)?$r:Mr}function rr(Fn,Ur){for(var Vr,dr,Cr;;){if(Fn.lookahead<Un){if(Tr(Fn),Fn.lookahead<Un&&Ur===vt)return $r;if(Fn.lookahead===0)break}if(Vr=0,Fn.lookahead>=Pn&&(Fn.ins_h=(Fn.ins_h<<Fn.hash_shift^Fn.window[Fn.strstart+Pn-1])&Fn.hash_mask,Vr=Fn.prev[Fn.strstart&Fn.w_mask]=Fn.head[Fn.ins_h],Fn.head[Fn.ins_h]=Fn.strstart),Fn.prev_length=Fn.match_length,Fn.prev_match=Fn.match_start,Fn.match_length=Pn-1,Vr!==0&&Fn.prev_length<Fn.max_lazy_match&&Fn.strstart-Vr<=Fn.w_size-Un&&(Fn.match_length=pr(Fn,Vr),Fn.match_length<=5&&(Fn.strategy===Ft||Fn.match_length===Pn&&Fn.strstart-Fn.match_start>4096)&&(Fn.match_length=Pn-1)),Fn.prev_length>=Pn&&Fn.match_length<=Fn.prev_length){Cr=Fn.strstart+Fn.lookahead-Pn,dr=at._tr_tally(Fn,Fn.strstart-1-Fn.prev_match,Fn.prev_length-Pn),Fn.lookahead-=Fn.prev_length-1,Fn.prev_length-=2;do++Fn.strstart<=Cr&&(Fn.ins_h=(Fn.ins_h<<Fn.hash_shift^Fn.window[Fn.strstart+Pn-1])&Fn.hash_mask,Vr=Fn.prev[Fn.strstart&Fn.w_mask]=Fn.head[Fn.ins_h],Fn.head[Fn.ins_h]=Fn.strstart);while(--Fn.prev_length!==0);if(Fn.match_available=0,Fn.match_length=Pn-1,Fn.strstart++,dr&&(cr(Fn,!1),Fn.strm.avail_out===0))return $r}else if(Fn.match_available){if(dr=at._tr_tally(Fn,0,Fn.window[Fn.strstart-1]),dr&&cr(Fn,!1),Fn.strstart++,Fn.lookahead--,Fn.strm.avail_out===0)return $r}else Fn.match_available=1,Fn.strstart++,Fn.lookahead--}return Fn.match_available&&(dr=at._tr_tally(Fn,0,Fn.window[Fn.strstart-1]),Fn.match_available=0),Fn.insert=Fn.strstart<Pn-1?Fn.strstart:Pn-1,Ur===Mt?(cr(Fn,!0),Fn.strm.avail_out===0?Jn:hr):Fn.last_lit&&(cr(Fn,!1),Fn.strm.avail_out===0)?$r:Mr}function ur(Fn,Ur){for(var Vr,dr,Cr,hs,ro=Fn.window;;){if(Fn.lookahead<=dn){if(Tr(Fn),Fn.lookahead<=dn&&Ur===vt)return $r;if(Fn.lookahead===0)break}if(Fn.match_length=0,Fn.lookahead>=Pn&&Fn.strstart>0&&(Cr=Fn.strstart-1,dr=ro[Cr],dr===ro[++Cr]&&dr===ro[++Cr]&&dr===ro[++Cr])){hs=Fn.strstart+dn;do;while(dr===ro[++Cr]&&dr===ro[++Cr]&&dr===ro[++Cr]&&dr===ro[++Cr]&&dr===ro[++Cr]&&dr===ro[++Cr]&&dr===ro[++Cr]&&dr===ro[++Cr]&&Cr<hs);Fn.match_length=dn-(hs-Cr),Fn.match_length>Fn.lookahead&&(Fn.match_length=Fn.lookahead)}if(Fn.match_length>=Pn?(Vr=at._tr_tally(Fn,1,Fn.match_length-Pn),Fn.lookahead-=Fn.match_length,Fn.strstart+=Fn.match_length,Fn.match_length=0):(Vr=at._tr_tally(Fn,0,Fn.window[Fn.strstart]),Fn.lookahead--,Fn.strstart++),Vr&&(cr(Fn,!1),Fn.strm.avail_out===0))return $r}return Fn.insert=0,Ur===Mt?(cr(Fn,!0),Fn.strm.avail_out===0?Jn:hr):Fn.last_lit&&(cr(Fn,!1),Fn.strm.avail_out===0)?$r:Mr}function Sr(Fn,Ur){for(var Vr;;){if(Fn.lookahead===0&&(Tr(Fn),Fn.lookahead===0)){if(Ur===vt)return $r;break}if(Fn.match_length=0,Vr=at._tr_tally(Fn,0,Fn.window[Fn.strstart]),Fn.lookahead--,Fn.strstart++,Vr&&(cr(Fn,!1),Fn.strm.avail_out===0))return $r}return Fn.insert=0,Ur===Mt?(cr(Fn,!0),Fn.strm.avail_out===0?Jn:hr):Fn.last_lit&&(cr(Fn,!1),Fn.strm.avail_out===0)?$r:Mr}function gr(Fn,Ur,Vr,dr,Cr){this.good_length=Fn,this.max_lazy=Ur,this.nice_length=Vr,this.max_chain=dr,this.func=Cr}var Gr;Gr=[new gr(0,0,0,0,Wr),new gr(4,4,8,4,Kn),new gr(4,5,16,8,Kn),new gr(4,6,32,32,Kn),new gr(4,4,16,16,rr),new gr(8,16,32,32,rr),new gr(8,16,128,128,rr),new gr(8,32,128,256,rr),new gr(32,128,258,1024,rr),new gr(32,258,258,4096,rr)];function jr(Fn){Fn.window_size=2*Fn.w_size,Yr(Fn.head),Fn.max_lazy_match=Gr[Fn.level].max_lazy,Fn.good_match=Gr[Fn.level].good_length,Fn.nice_match=Gr[Fn.level].nice_length,Fn.max_chain_length=Gr[Fn.level].max_chain,Fn.strstart=0,Fn.block_start=0,Fn.lookahead=0,Fn.insert=0,Fn.match_length=Fn.prev_length=Pn-1,Fn.match_available=0,Fn.ins_h=0}function er(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=rn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new st.Buf16(un*2),this.dyn_dtree=new st.Buf16((2*Cn+1)*2),this.bl_tree=new st.Buf16((2*Mn+1)*2),Yr(this.dyn_ltree),Yr(this.dyn_dtree),Yr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new st.Buf16(Tn+1),this.heap=new st.Buf16(2*En+1),Yr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new st.Buf16(2*En+1),Yr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function yr(Fn){var Ur;return!Fn||!Fn.state?Nr(Fn,Rt):(Fn.total_in=Fn.total_out=0,Fn.data_type=Zt,Ur=Fn.state,Ur.pending=0,Ur.pending_out=0,Ur.wrap<0&&(Ur.wrap=-Ur.wrap),Ur.status=Ur.wrap?In:vr,Fn.adler=Ur.wrap===2?0:1,Ur.last_flush=vt,at._tr_init(Ur),Tt)}function Er(Fn){var Ur=yr(Fn);return Ur===Tt&&jr(Fn.state),Ur}function Hr(Fn,Ur){return!Fn||!Fn.state||Fn.state.wrap!==2?Rt:(Fn.state.gzhead=Ur,Tt)}function lr(Fn,Ur,Vr,dr,Cr,hs){if(!Fn)return Rt;var ro=1;if(Ur===Pt&&(Ur=6),dr<0?(ro=0,dr=-dr):dr>15&&(ro=2,dr-=16),Cr<1||Cr>Gt||Vr!==rn||dr<8||dr>15||Ur<0||Ur>9||hs<0||hs>Bt)return Nr(Fn,Rt);dr===8&&(dr=9);var oo=new er;return Fn.state=oo,oo.strm=Fn,oo.wrap=ro,oo.gzhead=null,oo.w_bits=dr,oo.w_size=1<<oo.w_bits,oo.w_mask=oo.w_size-1,oo.hash_bits=Cr+7,oo.hash_size=1<<oo.hash_bits,oo.hash_mask=oo.hash_size-1,oo.hash_shift=~~((oo.hash_bits+Pn-1)/Pn),oo.window=new st.Buf8(oo.w_size*2),oo.head=new st.Buf16(oo.hash_size),oo.prev=new st.Buf16(oo.w_size),oo.lit_bufsize=1<<Cr+6,oo.pending_buf_size=oo.lit_bufsize*4,oo.pending_buf=new st.Buf8(oo.pending_buf_size),oo.d_buf=1*oo.lit_bufsize,oo.l_buf=3*oo.lit_bufsize,oo.level=Ur,oo.strategy=hs,oo.method=Vr,Er(Fn)}function Br(Fn,Ur){return lr(Fn,Ur,rn,nn,cn,Xt)}function Hn(Fn,Ur){var Vr,dr,Cr,hs;if(!Fn||!Fn.state||Ur>Ct||Ur<0)return Fn?Nr(Fn,Rt):Rt;if(dr=Fn.state,!Fn.output||!Fn.input&&Fn.avail_in!==0||dr.status===Ar&&Ur!==Mt)return Nr(Fn,Fn.avail_out===0?wt:Rt);if(dr.strm=Fn,Vr=dr.last_flush,dr.last_flush=Ur,dr.status===In)if(dr.wrap===2)Fn.adler=0,Qn(dr,31),Qn(dr,139),Qn(dr,8),dr.gzhead?(Qn(dr,(dr.gzhead.text?1:0)+(dr.gzhead.hcrc?2:0)+(dr.gzhead.extra?4:0)+(dr.gzhead.name?8:0)+(dr.gzhead.comment?16:0)),Qn(dr,dr.gzhead.time&255),Qn(dr,dr.gzhead.time>>8&255),Qn(dr,dr.gzhead.time>>16&255),Qn(dr,dr.gzhead.time>>24&255),Qn(dr,dr.level===9?2:dr.strategy>=Nt||dr.level<2?4:0),Qn(dr,dr.gzhead.os&255),dr.gzhead.extra&&dr.gzhead.extra.length&&(Qn(dr,dr.gzhead.extra.length&255),Qn(dr,dr.gzhead.extra.length>>8&255)),dr.gzhead.hcrc&&(Fn.adler=dt(Fn.adler,dr.pending_buf,dr.pending,0)),dr.gzindex=0,dr.status=Wn):(Qn(dr,0),Qn(dr,0),Qn(dr,0),Qn(dr,0),Qn(dr,0),Qn(dr,dr.level===9?2:dr.strategy>=Nt||dr.level<2?4:0),Qn(dr,wr),dr.status=vr);else{var ro=rn+(dr.w_bits-8<<4)<<8,oo=-1;dr.strategy>=Nt||dr.level<2?oo=0:dr.level<6?oo=1:dr.level===6?oo=2:oo=3,ro|=oo<<6,dr.strstart!==0&&(ro|=qn),ro+=31-ro%31,dr.status=vr,_r(dr,ro),dr.strstart!==0&&(_r(dr,Fn.adler>>>16),_r(dr,Fn.adler&65535)),Fn.adler=1}if(dr.status===Wn)if(dr.gzhead.extra){for(Cr=dr.pending;dr.gzindex<(dr.gzhead.extra.length&65535)&&!(dr.pending===dr.pending_buf_size&&(dr.gzhead.hcrc&&dr.pending>Cr&&(Fn.adler=dt(Fn.adler,dr.pending_buf,dr.pending-Cr,Cr)),cs(Fn),Cr=dr.pending,dr.pending===dr.pending_buf_size));)Qn(dr,dr.gzhead.extra[dr.gzindex]&255),dr.gzindex++;dr.gzhead.hcrc&&dr.pending>Cr&&(Fn.adler=dt(Fn.adler,dr.pending_buf,dr.pending-Cr,Cr)),dr.gzindex===dr.gzhead.extra.length&&(dr.gzindex=0,dr.status=ar)}else dr.status=ar;if(dr.status===ar)if(dr.gzhead.name){Cr=dr.pending;do{if(dr.pending===dr.pending_buf_size&&(dr.gzhead.hcrc&&dr.pending>Cr&&(Fn.adler=dt(Fn.adler,dr.pending_buf,dr.pending-Cr,Cr)),cs(Fn),Cr=dr.pending,dr.pending===dr.pending_buf_size)){hs=1;break}dr.gzindex<dr.gzhead.name.length?hs=dr.gzhead.name.charCodeAt(dr.gzindex++)&255:hs=0,Qn(dr,hs)}while(hs!==0);dr.gzhead.hcrc&&dr.pending>Cr&&(Fn.adler=dt(Fn.adler,dr.pending_buf,dr.pending-Cr,Cr)),hs===0&&(dr.gzindex=0,dr.status=fr)}else dr.status=fr;if(dr.status===fr)if(dr.gzhead.comment){Cr=dr.pending;do{if(dr.pending===dr.pending_buf_size&&(dr.gzhead.hcrc&&dr.pending>Cr&&(Fn.adler=dt(Fn.adler,dr.pending_buf,dr.pending-Cr,Cr)),cs(Fn),Cr=dr.pending,dr.pending===dr.pending_buf_size)){hs=1;break}dr.gzindex<dr.gzhead.comment.length?hs=dr.gzhead.comment.charCodeAt(dr.gzindex++)&255:hs=0,Qn(dr,hs)}while(hs!==0);dr.gzhead.hcrc&&dr.pending>Cr&&(Fn.adler=dt(Fn.adler,dr.pending_buf,dr.pending-Cr,Cr)),hs===0&&(dr.status=mr)}else dr.status=mr;if(dr.status===mr&&(dr.gzhead.hcrc?(dr.pending+2>dr.pending_buf_size&&cs(Fn),dr.pending+2<=dr.pending_buf_size&&(Qn(dr,Fn.adler&255),Qn(dr,Fn.adler>>8&255),Fn.adler=0,dr.status=vr)):dr.status=vr),dr.pending!==0){if(cs(Fn),Fn.avail_out===0)return dr.last_flush=-1,Tt}else if(Fn.avail_in===0&&Fr(Ur)<=Fr(Vr)&&Ur!==Mt)return Nr(Fn,wt);if(dr.status===Ar&&Fn.avail_in!==0)return Nr(Fn,wt);if(Fn.avail_in!==0||dr.lookahead!==0||Ur!==vt&&dr.status!==Ar){var ao=dr.strategy===Nt?Sr(dr,Ur):dr.strategy===Ot?ur(dr,Ur):Gr[dr.level].func(dr,Ur);if((ao===Jn||ao===hr)&&(dr.status=Ar),ao===$r||ao===Jn)return Fn.avail_out===0&&(dr.last_flush=-1),Tt;if(ao===Mr&&(Ur===_t?at._tr_align(dr):Ur!==Ct&&(at._tr_stored_block(dr,0,0,!1),Ur===bt&&(Yr(dr.head),dr.lookahead===0&&(dr.strstart=0,dr.block_start=0,dr.insert=0))),cs(Fn),Fn.avail_out===0))return dr.last_flush=-1,Tt}return Ur!==Mt?Tt:dr.wrap<=0?$t:(dr.wrap===2?(Qn(dr,Fn.adler&255),Qn(dr,Fn.adler>>8&255),Qn(dr,Fn.adler>>16&255),Qn(dr,Fn.adler>>24&255),Qn(dr,Fn.total_in&255),Qn(dr,Fn.total_in>>8&255),Qn(dr,Fn.total_in>>16&255),Qn(dr,Fn.total_in>>24&255)):(_r(dr,Fn.adler>>>16),_r(dr,Fn.adler&65535)),cs(Fn),dr.wrap>0&&(dr.wrap=-dr.wrap),dr.pending!==0?Tt:$t)}function kr(Fn){var Ur;return!Fn||!Fn.state?Rt:(Ur=Fn.state.status,Ur!==In&&Ur!==Wn&&Ur!==ar&&Ur!==fr&&Ur!==mr&&Ur!==vr&&Ur!==Ar?Nr(Fn,Rt):(Fn.state=null,Ur===vr?Nr(Fn,Et):Tt))}function Cs(Fn,Ur){var Vr=Ur.length,dr,Cr,hs,ro,oo,ao,Uo,gu;if(!Fn||!Fn.state||(dr=Fn.state,ro=dr.wrap,ro===2||ro===1&&dr.status!==In||dr.lookahead))return Rt;for(ro===1&&(Fn.adler=lt(Fn.adler,Ur,Vr,0)),dr.wrap=0,Vr>=dr.w_size&&(ro===0&&(Yr(dr.head),dr.strstart=0,dr.block_start=0,dr.insert=0),gu=new st.Buf8(dr.w_size),st.arraySet(gu,Ur,Vr-dr.w_size,dr.w_size,0),Ur=gu,Vr=dr.w_size),oo=Fn.avail_in,ao=Fn.next_in,Uo=Fn.input,Fn.avail_in=Vr,Fn.next_in=0,Fn.input=Ur,Tr(dr);dr.lookahead>=Pn;){Cr=dr.strstart,hs=dr.lookahead-(Pn-1);do dr.ins_h=(dr.ins_h<<dr.hash_shift^dr.window[Cr+Pn-1])&dr.hash_mask,dr.prev[Cr&dr.w_mask]=dr.head[dr.ins_h],dr.head[dr.ins_h]=Cr,Cr++;while(--hs);dr.strstart=Cr,dr.lookahead=Pn-1,Tr(dr)}return dr.strstart+=dr.lookahead,dr.block_start=dr.strstart,dr.insert=dr.lookahead,dr.lookahead=0,dr.match_length=dr.prev_length=Pn-1,dr.match_available=0,Fn.next_in=ao,Fn.input=Uo,Fn.avail_in=oo,dr.wrap=ro,Tt}tt.deflateInit=Br,tt.deflateInit2=lr,tt.deflateReset=Er,tt.deflateResetKeep=yr,tt.deflateSetHeader=Hr,tt.deflate=Hn,tt.deflateEnd=kr,tt.deflateSetDictionary=Cs,tt.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":nt=>{function tt(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}nt.exports=tt},"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":nt=>{var tt=30,rt=12;nt.exports=function(at,lt){var dt,yt,vt,_t,bt,Mt,Ct,Tt,$t,Rt,Et,wt,Pt,Ft,Nt,Ot,Bt,Xt,Zt,rn,Gt,nn,cn,an,mn;dt=at.state,yt=at.next_in,an=at.input,vt=yt+(at.avail_in-5),_t=at.next_out,mn=at.output,bt=_t-(lt-at.avail_out),Mt=_t+(at.avail_out-257),Ct=dt.dmax,Tt=dt.wsize,$t=dt.whave,Rt=dt.wnext,Et=dt.window,wt=dt.hold,Pt=dt.bits,Ft=dt.lencode,Nt=dt.distcode,Ot=(1<<dt.lenbits)-1,Bt=(1<<dt.distbits)-1;e:do{Pt<15&&(wt+=an[yt++]<<Pt,Pt+=8,wt+=an[yt++]<<Pt,Pt+=8),Xt=Ft[wt&Ot];t:for(;;){if(Zt=Xt>>>24,wt>>>=Zt,Pt-=Zt,Zt=Xt>>>16&255,Zt===0)mn[_t++]=Xt&65535;else if(Zt&16){rn=Xt&65535,Zt&=15,Zt&&(Pt<Zt&&(wt+=an[yt++]<<Pt,Pt+=8),rn+=wt&(1<<Zt)-1,wt>>>=Zt,Pt-=Zt),Pt<15&&(wt+=an[yt++]<<Pt,Pt+=8,wt+=an[yt++]<<Pt,Pt+=8),Xt=Nt[wt&Bt];n:for(;;){if(Zt=Xt>>>24,wt>>>=Zt,Pt-=Zt,Zt=Xt>>>16&255,Zt&16){if(Gt=Xt&65535,Zt&=15,Pt<Zt&&(wt+=an[yt++]<<Pt,Pt+=8,Pt<Zt&&(wt+=an[yt++]<<Pt,Pt+=8)),Gt+=wt&(1<<Zt)-1,Gt>Ct){at.msg="invalid distance too far back",dt.mode=tt;break e}if(wt>>>=Zt,Pt-=Zt,Zt=_t-bt,Gt>Zt){if(Zt=Gt-Zt,Zt>$t&&dt.sane){at.msg="invalid distance too far back",dt.mode=tt;break e}if(nn=0,cn=Et,Rt===0){if(nn+=Tt-Zt,Zt<rn){rn-=Zt;do mn[_t++]=Et[nn++];while(--Zt);nn=_t-Gt,cn=mn}}else if(Rt<Zt){if(nn+=Tt+Rt-Zt,Zt-=Rt,Zt<rn){rn-=Zt;do mn[_t++]=Et[nn++];while(--Zt);if(nn=0,Rt<rn){Zt=Rt,rn-=Zt;do mn[_t++]=Et[nn++];while(--Zt);nn=_t-Gt,cn=mn}}}else if(nn+=Rt-Zt,Zt<rn){rn-=Zt;do mn[_t++]=Et[nn++];while(--Zt);nn=_t-Gt,cn=mn}for(;rn>2;)mn[_t++]=cn[nn++],mn[_t++]=cn[nn++],mn[_t++]=cn[nn++],rn-=3;rn&&(mn[_t++]=cn[nn++],rn>1&&(mn[_t++]=cn[nn++]))}else{nn=_t-Gt;do mn[_t++]=mn[nn++],mn[_t++]=mn[nn++],mn[_t++]=mn[nn++],rn-=3;while(rn>2);rn&&(mn[_t++]=mn[nn++],rn>1&&(mn[_t++]=mn[nn++]))}}else if(Zt&64){at.msg="invalid distance code",dt.mode=tt;break e}else{Xt=Nt[(Xt&65535)+(wt&(1<<Zt)-1)];continue n}break}}else if(Zt&64)if(Zt&32){dt.mode=rt;break e}else{at.msg="invalid literal/length code",dt.mode=tt;break e}else{Xt=Ft[(Xt&65535)+(wt&(1<<Zt)-1)];continue t}break}}while(yt<vt&&_t<Mt);rn=Pt>>3,yt-=rn,Pt-=rn<<3,wt&=(1<<Pt)-1,at.next_in=yt,at.next_out=_t,at.avail_in=yt<vt?5+(vt-yt):5-(yt-vt),at.avail_out=_t<Mt?257+(Mt-_t):257-(_t-Mt),dt.hold=wt,dt.bits=Pt}},"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":(nt,tt,rt)=>{var st=rt("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),at=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),lt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),dt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),yt=rt("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),vt=0,_t=1,bt=2,Mt=4,Ct=5,Tt=6,$t=0,Rt=1,Et=2,wt=-2,Pt=-3,Ft=-4,Nt=-5,Ot=8,Bt=1,Xt=2,Zt=3,rn=4,Gt=5,nn=6,cn=7,an=8,mn=9,En=10,Cn=11,Mn=12,un=13,Tn=14,Pn=15,dn=16,Un=17,qn=18,In=19,Wn=20,ar=21,fr=22,mr=23,vr=24,Ar=25,$r=26,Mr=27,Jn=28,hr=29,wr=30,Nr=31,Fr=32,Yr=852,cs=592,cr=15,Qn=cr;function _r(lr){return(lr>>>24&255)+(lr>>>8&65280)+((lr&65280)<<8)+((lr&255)<<24)}function Ir(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new st.Buf16(320),this.work=new st.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function pr(lr){var Br;return!lr||!lr.state?wt:(Br=lr.state,lr.total_in=lr.total_out=Br.total=0,lr.msg="",Br.wrap&&(lr.adler=Br.wrap&1),Br.mode=Bt,Br.last=0,Br.havedict=0,Br.dmax=32768,Br.head=null,Br.hold=0,Br.bits=0,Br.lencode=Br.lendyn=new st.Buf32(Yr),Br.distcode=Br.distdyn=new st.Buf32(cs),Br.sane=1,Br.back=-1,$t)}function Tr(lr){var Br;return!lr||!lr.state?wt:(Br=lr.state,Br.wsize=0,Br.whave=0,Br.wnext=0,pr(lr))}function Wr(lr,Br){var Hn,kr;return!lr||!lr.state||(kr=lr.state,Br<0?(Hn=0,Br=-Br):(Hn=(Br>>4)+1,Br<48&&(Br&=15)),Br&&(Br<8||Br>15))?wt:(kr.window!==null&&kr.wbits!==Br&&(kr.window=null),kr.wrap=Hn,kr.wbits=Br,Tr(lr))}function Kn(lr,Br){var Hn,kr;return lr?(kr=new Ir,lr.state=kr,kr.window=null,Hn=Wr(lr,Br),Hn!==$t&&(lr.state=null),Hn):wt}function rr(lr){return Kn(lr,Qn)}var ur=!0,Sr,gr;function Gr(lr){if(ur){var Br;for(Sr=new st.Buf32(512),gr=new st.Buf32(32),Br=0;Br<144;)lr.lens[Br++]=8;for(;Br<256;)lr.lens[Br++]=9;for(;Br<280;)lr.lens[Br++]=7;for(;Br<288;)lr.lens[Br++]=8;for(yt(_t,lr.lens,0,288,Sr,0,lr.work,{bits:9}),Br=0;Br<32;)lr.lens[Br++]=5;yt(bt,lr.lens,0,32,gr,0,lr.work,{bits:5}),ur=!1}lr.lencode=Sr,lr.lenbits=9,lr.distcode=gr,lr.distbits=5}function jr(lr,Br,Hn,kr){var Cs,Fn=lr.state;return Fn.window===null&&(Fn.wsize=1<<Fn.wbits,Fn.wnext=0,Fn.whave=0,Fn.window=new st.Buf8(Fn.wsize)),kr>=Fn.wsize?(st.arraySet(Fn.window,Br,Hn-Fn.wsize,Fn.wsize,0),Fn.wnext=0,Fn.whave=Fn.wsize):(Cs=Fn.wsize-Fn.wnext,Cs>kr&&(Cs=kr),st.arraySet(Fn.window,Br,Hn-kr,Cs,Fn.wnext),kr-=Cs,kr?(st.arraySet(Fn.window,Br,Hn-kr,kr,0),Fn.wnext=kr,Fn.whave=Fn.wsize):(Fn.wnext+=Cs,Fn.wnext===Fn.wsize&&(Fn.wnext=0),Fn.whave<Fn.wsize&&(Fn.whave+=Cs))),0}function er(lr,Br){var Hn,kr,Cs,Fn,Ur,Vr,dr,Cr,hs,ro,oo,ao,Uo,gu,yl=0,_l,Vo,uu,Hl,Ku,ju,au,ou,ru=new st.Buf8(4),br,ls,Ns=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!lr||!lr.state||!lr.output||!lr.input&&lr.avail_in!==0)return wt;Hn=lr.state,Hn.mode===Mn&&(Hn.mode=un),Ur=lr.next_out,Cs=lr.output,dr=lr.avail_out,Fn=lr.next_in,kr=lr.input,Vr=lr.avail_in,Cr=Hn.hold,hs=Hn.bits,ro=Vr,oo=dr,ou=$t;e:for(;;)switch(Hn.mode){case Bt:if(Hn.wrap===0){Hn.mode=un;break}for(;hs<16;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(Hn.wrap&2&&Cr===35615){Hn.check=0,ru[0]=Cr&255,ru[1]=Cr>>>8&255,Hn.check=lt(Hn.check,ru,2,0),Cr=0,hs=0,Hn.mode=Xt;break}if(Hn.flags=0,Hn.head&&(Hn.head.done=!1),!(Hn.wrap&1)||(((Cr&255)<<8)+(Cr>>8))%31){lr.msg="incorrect header check",Hn.mode=wr;break}if((Cr&15)!==Ot){lr.msg="unknown compression method",Hn.mode=wr;break}if(Cr>>>=4,hs-=4,au=(Cr&15)+8,Hn.wbits===0)Hn.wbits=au;else if(au>Hn.wbits){lr.msg="invalid window size",Hn.mode=wr;break}Hn.dmax=1<<au,lr.adler=Hn.check=1,Hn.mode=Cr&512?En:Mn,Cr=0,hs=0;break;case Xt:for(;hs<16;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(Hn.flags=Cr,(Hn.flags&255)!==Ot){lr.msg="unknown compression method",Hn.mode=wr;break}if(Hn.flags&57344){lr.msg="unknown header flags set",Hn.mode=wr;break}Hn.head&&(Hn.head.text=Cr>>8&1),Hn.flags&512&&(ru[0]=Cr&255,ru[1]=Cr>>>8&255,Hn.check=lt(Hn.check,ru,2,0)),Cr=0,hs=0,Hn.mode=Zt;case Zt:for(;hs<32;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Hn.head&&(Hn.head.time=Cr),Hn.flags&512&&(ru[0]=Cr&255,ru[1]=Cr>>>8&255,ru[2]=Cr>>>16&255,ru[3]=Cr>>>24&255,Hn.check=lt(Hn.check,ru,4,0)),Cr=0,hs=0,Hn.mode=rn;case rn:for(;hs<16;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Hn.head&&(Hn.head.xflags=Cr&255,Hn.head.os=Cr>>8),Hn.flags&512&&(ru[0]=Cr&255,ru[1]=Cr>>>8&255,Hn.check=lt(Hn.check,ru,2,0)),Cr=0,hs=0,Hn.mode=Gt;case Gt:if(Hn.flags&1024){for(;hs<16;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Hn.length=Cr,Hn.head&&(Hn.head.extra_len=Cr),Hn.flags&512&&(ru[0]=Cr&255,ru[1]=Cr>>>8&255,Hn.check=lt(Hn.check,ru,2,0)),Cr=0,hs=0}else Hn.head&&(Hn.head.extra=null);Hn.mode=nn;case nn:if(Hn.flags&1024&&(ao=Hn.length,ao>Vr&&(ao=Vr),ao&&(Hn.head&&(au=Hn.head.extra_len-Hn.length,Hn.head.extra||(Hn.head.extra=new Array(Hn.head.extra_len)),st.arraySet(Hn.head.extra,kr,Fn,ao,au)),Hn.flags&512&&(Hn.check=lt(Hn.check,kr,ao,Fn)),Vr-=ao,Fn+=ao,Hn.length-=ao),Hn.length))break e;Hn.length=0,Hn.mode=cn;case cn:if(Hn.flags&2048){if(Vr===0)break e;ao=0;do au=kr[Fn+ao++],Hn.head&&au&&Hn.length<65536&&(Hn.head.name+=String.fromCharCode(au));while(au&&ao<Vr);if(Hn.flags&512&&(Hn.check=lt(Hn.check,kr,ao,Fn)),Vr-=ao,Fn+=ao,au)break e}else Hn.head&&(Hn.head.name=null);Hn.length=0,Hn.mode=an;case an:if(Hn.flags&4096){if(Vr===0)break e;ao=0;do au=kr[Fn+ao++],Hn.head&&au&&Hn.length<65536&&(Hn.head.comment+=String.fromCharCode(au));while(au&&ao<Vr);if(Hn.flags&512&&(Hn.check=lt(Hn.check,kr,ao,Fn)),Vr-=ao,Fn+=ao,au)break e}else Hn.head&&(Hn.head.comment=null);Hn.mode=mn;case mn:if(Hn.flags&512){for(;hs<16;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(Cr!==(Hn.check&65535)){lr.msg="header crc mismatch",Hn.mode=wr;break}Cr=0,hs=0}Hn.head&&(Hn.head.hcrc=Hn.flags>>9&1,Hn.head.done=!0),lr.adler=Hn.check=0,Hn.mode=Mn;break;case En:for(;hs<32;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}lr.adler=Hn.check=_r(Cr),Cr=0,hs=0,Hn.mode=Cn;case Cn:if(Hn.havedict===0)return lr.next_out=Ur,lr.avail_out=dr,lr.next_in=Fn,lr.avail_in=Vr,Hn.hold=Cr,Hn.bits=hs,Et;lr.adler=Hn.check=1,Hn.mode=Mn;case Mn:if(Br===Ct||Br===Tt)break e;case un:if(Hn.last){Cr>>>=hs&7,hs-=hs&7,Hn.mode=Mr;break}for(;hs<3;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}switch(Hn.last=Cr&1,Cr>>>=1,hs-=1,Cr&3){case 0:Hn.mode=Tn;break;case 1:if(Gr(Hn),Hn.mode=Wn,Br===Tt){Cr>>>=2,hs-=2;break e}break;case 2:Hn.mode=Un;break;case 3:lr.msg="invalid block type",Hn.mode=wr}Cr>>>=2,hs-=2;break;case Tn:for(Cr>>>=hs&7,hs-=hs&7;hs<32;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if((Cr&65535)!==(Cr>>>16^65535)){lr.msg="invalid stored block lengths",Hn.mode=wr;break}if(Hn.length=Cr&65535,Cr=0,hs=0,Hn.mode=Pn,Br===Tt)break e;case Pn:Hn.mode=dn;case dn:if(ao=Hn.length,ao){if(ao>Vr&&(ao=Vr),ao>dr&&(ao=dr),ao===0)break e;st.arraySet(Cs,kr,Fn,ao,Ur),Vr-=ao,Fn+=ao,dr-=ao,Ur+=ao,Hn.length-=ao;break}Hn.mode=Mn;break;case Un:for(;hs<14;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(Hn.nlen=(Cr&31)+257,Cr>>>=5,hs-=5,Hn.ndist=(Cr&31)+1,Cr>>>=5,hs-=5,Hn.ncode=(Cr&15)+4,Cr>>>=4,hs-=4,Hn.nlen>286||Hn.ndist>30){lr.msg="too many length or distance symbols",Hn.mode=wr;break}Hn.have=0,Hn.mode=qn;case qn:for(;Hn.have<Hn.ncode;){for(;hs<3;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Hn.lens[Ns[Hn.have++]]=Cr&7,Cr>>>=3,hs-=3}for(;Hn.have<19;)Hn.lens[Ns[Hn.have++]]=0;if(Hn.lencode=Hn.lendyn,Hn.lenbits=7,br={bits:Hn.lenbits},ou=yt(vt,Hn.lens,0,19,Hn.lencode,0,Hn.work,br),Hn.lenbits=br.bits,ou){lr.msg="invalid code lengths set",Hn.mode=wr;break}Hn.have=0,Hn.mode=In;case In:for(;Hn.have<Hn.nlen+Hn.ndist;){for(;yl=Hn.lencode[Cr&(1<<Hn.lenbits)-1],_l=yl>>>24,Vo=yl>>>16&255,uu=yl&65535,!(_l<=hs);){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(uu<16)Cr>>>=_l,hs-=_l,Hn.lens[Hn.have++]=uu;else{if(uu===16){for(ls=_l+2;hs<ls;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(Cr>>>=_l,hs-=_l,Hn.have===0){lr.msg="invalid bit length repeat",Hn.mode=wr;break}au=Hn.lens[Hn.have-1],ao=3+(Cr&3),Cr>>>=2,hs-=2}else if(uu===17){for(ls=_l+3;hs<ls;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Cr>>>=_l,hs-=_l,au=0,ao=3+(Cr&7),Cr>>>=3,hs-=3}else{for(ls=_l+7;hs<ls;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Cr>>>=_l,hs-=_l,au=0,ao=11+(Cr&127),Cr>>>=7,hs-=7}if(Hn.have+ao>Hn.nlen+Hn.ndist){lr.msg="invalid bit length repeat",Hn.mode=wr;break}for(;ao--;)Hn.lens[Hn.have++]=au}}if(Hn.mode===wr)break;if(Hn.lens[256]===0){lr.msg="invalid code -- missing end-of-block",Hn.mode=wr;break}if(Hn.lenbits=9,br={bits:Hn.lenbits},ou=yt(_t,Hn.lens,0,Hn.nlen,Hn.lencode,0,Hn.work,br),Hn.lenbits=br.bits,ou){lr.msg="invalid literal/lengths set",Hn.mode=wr;break}if(Hn.distbits=6,Hn.distcode=Hn.distdyn,br={bits:Hn.distbits},ou=yt(bt,Hn.lens,Hn.nlen,Hn.ndist,Hn.distcode,0,Hn.work,br),Hn.distbits=br.bits,ou){lr.msg="invalid distances set",Hn.mode=wr;break}if(Hn.mode=Wn,Br===Tt)break e;case Wn:Hn.mode=ar;case ar:if(Vr>=6&&dr>=258){lr.next_out=Ur,lr.avail_out=dr,lr.next_in=Fn,lr.avail_in=Vr,Hn.hold=Cr,Hn.bits=hs,dt(lr,oo),Ur=lr.next_out,Cs=lr.output,dr=lr.avail_out,Fn=lr.next_in,kr=lr.input,Vr=lr.avail_in,Cr=Hn.hold,hs=Hn.bits,Hn.mode===Mn&&(Hn.back=-1);break}for(Hn.back=0;yl=Hn.lencode[Cr&(1<<Hn.lenbits)-1],_l=yl>>>24,Vo=yl>>>16&255,uu=yl&65535,!(_l<=hs);){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(Vo&&!(Vo&240)){for(Hl=_l,Ku=Vo,ju=uu;yl=Hn.lencode[ju+((Cr&(1<<Hl+Ku)-1)>>Hl)],_l=yl>>>24,Vo=yl>>>16&255,uu=yl&65535,!(Hl+_l<=hs);){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Cr>>>=Hl,hs-=Hl,Hn.back+=Hl}if(Cr>>>=_l,hs-=_l,Hn.back+=_l,Hn.length=uu,Vo===0){Hn.mode=$r;break}if(Vo&32){Hn.back=-1,Hn.mode=Mn;break}if(Vo&64){lr.msg="invalid literal/length code",Hn.mode=wr;break}Hn.extra=Vo&15,Hn.mode=fr;case fr:if(Hn.extra){for(ls=Hn.extra;hs<ls;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Hn.length+=Cr&(1<<Hn.extra)-1,Cr>>>=Hn.extra,hs-=Hn.extra,Hn.back+=Hn.extra}Hn.was=Hn.length,Hn.mode=mr;case mr:for(;yl=Hn.distcode[Cr&(1<<Hn.distbits)-1],_l=yl>>>24,Vo=yl>>>16&255,uu=yl&65535,!(_l<=hs);){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(!(Vo&240)){for(Hl=_l,Ku=Vo,ju=uu;yl=Hn.distcode[ju+((Cr&(1<<Hl+Ku)-1)>>Hl)],_l=yl>>>24,Vo=yl>>>16&255,uu=yl&65535,!(Hl+_l<=hs);){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Cr>>>=Hl,hs-=Hl,Hn.back+=Hl}if(Cr>>>=_l,hs-=_l,Hn.back+=_l,Vo&64){lr.msg="invalid distance code",Hn.mode=wr;break}Hn.offset=uu,Hn.extra=Vo&15,Hn.mode=vr;case vr:if(Hn.extra){for(ls=Hn.extra;hs<ls;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}Hn.offset+=Cr&(1<<Hn.extra)-1,Cr>>>=Hn.extra,hs-=Hn.extra,Hn.back+=Hn.extra}if(Hn.offset>Hn.dmax){lr.msg="invalid distance too far back",Hn.mode=wr;break}Hn.mode=Ar;case Ar:if(dr===0)break e;if(ao=oo-dr,Hn.offset>ao){if(ao=Hn.offset-ao,ao>Hn.whave&&Hn.sane){lr.msg="invalid distance too far back",Hn.mode=wr;break}ao>Hn.wnext?(ao-=Hn.wnext,Uo=Hn.wsize-ao):Uo=Hn.wnext-ao,ao>Hn.length&&(ao=Hn.length),gu=Hn.window}else gu=Cs,Uo=Ur-Hn.offset,ao=Hn.length;ao>dr&&(ao=dr),dr-=ao,Hn.length-=ao;do Cs[Ur++]=gu[Uo++];while(--ao);Hn.length===0&&(Hn.mode=ar);break;case $r:if(dr===0)break e;Cs[Ur++]=Hn.length,dr--,Hn.mode=ar;break;case Mr:if(Hn.wrap){for(;hs<32;){if(Vr===0)break e;Vr--,Cr|=kr[Fn++]<<hs,hs+=8}if(oo-=dr,lr.total_out+=oo,Hn.total+=oo,oo&&(lr.adler=Hn.check=Hn.flags?lt(Hn.check,Cs,oo,Ur-oo):at(Hn.check,Cs,oo,Ur-oo)),oo=dr,(Hn.flags?Cr:_r(Cr))!==Hn.check){lr.msg="incorrect data check",Hn.mode=wr;break}Cr=0,hs=0}Hn.mode=Jn;case Jn:if(Hn.wrap&&Hn.flags){for(;hs<32;){if(Vr===0)break e;Vr--,Cr+=kr[Fn++]<<hs,hs+=8}if(Cr!==(Hn.total&4294967295)){lr.msg="incorrect length check",Hn.mode=wr;break}Cr=0,hs=0}Hn.mode=hr;case hr:ou=Rt;break e;case wr:ou=Pt;break e;case Nr:return Ft;case Fr:default:return wt}return lr.next_out=Ur,lr.avail_out=dr,lr.next_in=Fn,lr.avail_in=Vr,Hn.hold=Cr,Hn.bits=hs,(Hn.wsize||oo!==lr.avail_out&&Hn.mode<wr&&(Hn.mode<Mr||Br!==Mt))&&jr(lr,lr.output,lr.next_out,oo-lr.avail_out),ro-=lr.avail_in,oo-=lr.avail_out,lr.total_in+=ro,lr.total_out+=oo,Hn.total+=oo,Hn.wrap&&oo&&(lr.adler=Hn.check=Hn.flags?lt(Hn.check,Cs,oo,lr.next_out-oo):at(Hn.check,Cs,oo,lr.next_out-oo)),lr.data_type=Hn.bits+(Hn.last?64:0)+(Hn.mode===Mn?128:0)+(Hn.mode===Wn||Hn.mode===Pn?256:0),(ro===0&&oo===0||Br===Mt)&&ou===$t&&(ou=Nt),ou}function yr(lr){if(!lr||!lr.state)return wt;var Br=lr.state;return Br.window&&(Br.window=null),lr.state=null,$t}function Er(lr,Br){var Hn;return!lr||!lr.state||(Hn=lr.state,!(Hn.wrap&2))?wt:(Hn.head=Br,Br.done=!1,$t)}function Hr(lr,Br){var Hn=Br.length,kr,Cs,Fn;return!lr||!lr.state||(kr=lr.state,kr.wrap!==0&&kr.mode!==Cn)?wt:kr.mode===Cn&&(Cs=1,Cs=at(Cs,Br,Hn,0),Cs!==kr.check)?Pt:(Fn=jr(lr,Br,Hn,Hn),Fn?(kr.mode=Nr,Ft):(kr.havedict=1,$t))}tt.inflateReset=Tr,tt.inflateReset2=Wr,tt.inflateResetKeep=pr,tt.inflateInit=rr,tt.inflateInit2=Kn,tt.inflate=er,tt.inflateEnd=yr,tt.inflateGetHeader=Er,tt.inflateSetDictionary=Hr,tt.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":(nt,tt,rt)=>{var st=rt("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),at=15,lt=852,dt=592,yt=0,vt=1,_t=2,bt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Mt=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ct=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Tt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];nt.exports=function(Rt,Et,wt,Pt,Ft,Nt,Ot,Bt){var Xt=Bt.bits,Zt=0,rn=0,Gt=0,nn=0,cn=0,an=0,mn=0,En=0,Cn=0,Mn=0,un,Tn,Pn,dn,Un,qn=null,In=0,Wn,ar=new st.Buf16(at+1),fr=new st.Buf16(at+1),mr=null,vr=0,Ar,$r,Mr;for(Zt=0;Zt<=at;Zt++)ar[Zt]=0;for(rn=0;rn<Pt;rn++)ar[Et[wt+rn]]++;for(cn=Xt,nn=at;nn>=1&&ar[nn]===0;nn--);if(cn>nn&&(cn=nn),nn===0)return Ft[Nt++]=20971520,Ft[Nt++]=20971520,Bt.bits=1,0;for(Gt=1;Gt<nn&&ar[Gt]===0;Gt++);for(cn<Gt&&(cn=Gt),En=1,Zt=1;Zt<=at;Zt++)if(En<<=1,En-=ar[Zt],En<0)return-1;if(En>0&&(Rt===yt||nn!==1))return-1;for(fr[1]=0,Zt=1;Zt<at;Zt++)fr[Zt+1]=fr[Zt]+ar[Zt];for(rn=0;rn<Pt;rn++)Et[wt+rn]!==0&&(Ot[fr[Et[wt+rn]]++]=rn);if(Rt===yt?(qn=mr=Ot,Wn=19):Rt===vt?(qn=bt,In-=257,mr=Mt,vr-=257,Wn=256):(qn=Ct,mr=Tt,Wn=-1),Mn=0,rn=0,Zt=Gt,Un=Nt,an=cn,mn=0,Pn=-1,Cn=1<<cn,dn=Cn-1,Rt===vt&&Cn>lt||Rt===_t&&Cn>dt)return 1;for(;;){Ar=Zt-mn,Ot[rn]<Wn?($r=0,Mr=Ot[rn]):Ot[rn]>Wn?($r=mr[vr+Ot[rn]],Mr=qn[In+Ot[rn]]):($r=96,Mr=0),un=1<<Zt-mn,Tn=1<<an,Gt=Tn;do Tn-=un,Ft[Un+(Mn>>mn)+Tn]=Ar<<24|$r<<16|Mr|0;while(Tn!==0);for(un=1<<Zt-1;Mn&un;)un>>=1;if(un!==0?(Mn&=un-1,Mn+=un):Mn=0,rn++,--ar[Zt]===0){if(Zt===nn)break;Zt=Et[wt+Ot[rn]]}if(Zt>cn&&(Mn&dn)!==Pn){for(mn===0&&(mn=cn),Un+=Gt,an=Zt-mn,En=1<<an;an+mn<nn&&(En-=ar[an+mn],!(En<=0));)an++,En<<=1;if(Cn+=1<<an,Rt===vt&&Cn>lt||Rt===_t&&Cn>dt)return 1;Pn=Mn&dn,Ft[Pn]=cn<<24|an<<16|Un-Nt|0}}return Mn!==0&&(Ft[Un+Mn]=Zt-mn<<24|4194304|0),Bt.bits=cn,0}},"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":nt=>{nt.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":(nt,tt,rt)=>{var st=rt("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),at=4,lt=0,dt=1,yt=2;function vt(er){for(var yr=er.length;--yr>=0;)er[yr]=0}var _t=0,bt=1,Mt=2,Ct=3,Tt=258,$t=29,Rt=256,Et=Rt+1+$t,wt=30,Pt=19,Ft=2*Et+1,Nt=15,Ot=16,Bt=7,Xt=256,Zt=16,rn=17,Gt=18,nn=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],cn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],an=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],mn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],En=512,Cn=new Array((Et+2)*2);vt(Cn);var Mn=new Array(wt*2);vt(Mn);var un=new Array(En);vt(un);var Tn=new Array(Tt-Ct+1);vt(Tn);var Pn=new Array($t);vt(Pn);var dn=new Array(wt);vt(dn);function Un(er,yr,Er,Hr,lr){this.static_tree=er,this.extra_bits=yr,this.extra_base=Er,this.elems=Hr,this.max_length=lr,this.has_stree=er&&er.length}var qn,In,Wn;function ar(er,yr){this.dyn_tree=er,this.max_code=0,this.stat_desc=yr}function fr(er){return er<256?un[er]:un[256+(er>>>7)]}function mr(er,yr){er.pending_buf[er.pending++]=yr&255,er.pending_buf[er.pending++]=yr>>>8&255}function vr(er,yr,Er){er.bi_valid>Ot-Er?(er.bi_buf|=yr<<er.bi_valid&65535,mr(er,er.bi_buf),er.bi_buf=yr>>Ot-er.bi_valid,er.bi_valid+=Er-Ot):(er.bi_buf|=yr<<er.bi_valid&65535,er.bi_valid+=Er)}function Ar(er,yr,Er){vr(er,Er[yr*2],Er[yr*2+1])}function $r(er,yr){var Er=0;do Er|=er&1,er>>>=1,Er<<=1;while(--yr>0);return Er>>>1}function Mr(er){er.bi_valid===16?(mr(er,er.bi_buf),er.bi_buf=0,er.bi_valid=0):er.bi_valid>=8&&(er.pending_buf[er.pending++]=er.bi_buf&255,er.bi_buf>>=8,er.bi_valid-=8)}function Jn(er,yr){var Er=yr.dyn_tree,Hr=yr.max_code,lr=yr.stat_desc.static_tree,Br=yr.stat_desc.has_stree,Hn=yr.stat_desc.extra_bits,kr=yr.stat_desc.extra_base,Cs=yr.stat_desc.max_length,Fn,Ur,Vr,dr,Cr,hs,ro=0;for(dr=0;dr<=Nt;dr++)er.bl_count[dr]=0;for(Er[er.heap[er.heap_max]*2+1]=0,Fn=er.heap_max+1;Fn<Ft;Fn++)Ur=er.heap[Fn],dr=Er[Er[Ur*2+1]*2+1]+1,dr>Cs&&(dr=Cs,ro++),Er[Ur*2+1]=dr,!(Ur>Hr)&&(er.bl_count[dr]++,Cr=0,Ur>=kr&&(Cr=Hn[Ur-kr]),hs=Er[Ur*2],er.opt_len+=hs*(dr+Cr),Br&&(er.static_len+=hs*(lr[Ur*2+1]+Cr)));if(ro!==0){do{for(dr=Cs-1;er.bl_count[dr]===0;)dr--;er.bl_count[dr]--,er.bl_count[dr+1]+=2,er.bl_count[Cs]--,ro-=2}while(ro>0);for(dr=Cs;dr!==0;dr--)for(Ur=er.bl_count[dr];Ur!==0;)Vr=er.heap[--Fn],!(Vr>Hr)&&(Er[Vr*2+1]!==dr&&(er.opt_len+=(dr-Er[Vr*2+1])*Er[Vr*2],Er[Vr*2+1]=dr),Ur--)}}function hr(er,yr,Er){var Hr=new Array(Nt+1),lr=0,Br,Hn;for(Br=1;Br<=Nt;Br++)Hr[Br]=lr=lr+Er[Br-1]<<1;for(Hn=0;Hn<=yr;Hn++){var kr=er[Hn*2+1];kr!==0&&(er[Hn*2]=$r(Hr[kr]++,kr))}}function wr(){var er,yr,Er,Hr,lr,Br=new Array(Nt+1);for(Er=0,Hr=0;Hr<$t-1;Hr++)for(Pn[Hr]=Er,er=0;er<1<<nn[Hr];er++)Tn[Er++]=Hr;for(Tn[Er-1]=Hr,lr=0,Hr=0;Hr<16;Hr++)for(dn[Hr]=lr,er=0;er<1<<cn[Hr];er++)un[lr++]=Hr;for(lr>>=7;Hr<wt;Hr++)for(dn[Hr]=lr<<7,er=0;er<1<<cn[Hr]-7;er++)un[256+lr++]=Hr;for(yr=0;yr<=Nt;yr++)Br[yr]=0;for(er=0;er<=143;)Cn[er*2+1]=8,er++,Br[8]++;for(;er<=255;)Cn[er*2+1]=9,er++,Br[9]++;for(;er<=279;)Cn[er*2+1]=7,er++,Br[7]++;for(;er<=287;)Cn[er*2+1]=8,er++,Br[8]++;for(hr(Cn,Et+1,Br),er=0;er<wt;er++)Mn[er*2+1]=5,Mn[er*2]=$r(er,5);qn=new Un(Cn,nn,Rt+1,Et,Nt),In=new Un(Mn,cn,0,wt,Nt),Wn=new Un(new Array(0),an,0,Pt,Bt)}function Nr(er){var yr;for(yr=0;yr<Et;yr++)er.dyn_ltree[yr*2]=0;for(yr=0;yr<wt;yr++)er.dyn_dtree[yr*2]=0;for(yr=0;yr<Pt;yr++)er.bl_tree[yr*2]=0;er.dyn_ltree[Xt*2]=1,er.opt_len=er.static_len=0,er.last_lit=er.matches=0}function Fr(er){er.bi_valid>8?mr(er,er.bi_buf):er.bi_valid>0&&(er.pending_buf[er.pending++]=er.bi_buf),er.bi_buf=0,er.bi_valid=0}function Yr(er,yr,Er,Hr){Fr(er),mr(er,Er),mr(er,~Er),st.arraySet(er.pending_buf,er.window,yr,Er,er.pending),er.pending+=Er}function cs(er,yr,Er,Hr){var lr=yr*2,Br=Er*2;return er[lr]<er[Br]||er[lr]===er[Br]&&Hr[yr]<=Hr[Er]}function cr(er,yr,Er){for(var Hr=er.heap[Er],lr=Er<<1;lr<=er.heap_len&&(lr<er.heap_len&&cs(yr,er.heap[lr+1],er.heap[lr],er.depth)&&lr++,!cs(yr,Hr,er.heap[lr],er.depth));)er.heap[Er]=er.heap[lr],Er=lr,lr<<=1;er.heap[Er]=Hr}function Qn(er,yr,Er){var Hr,lr,Br=0,Hn,kr;if(er.last_lit!==0)do Hr=er.pending_buf[er.d_buf+Br*2]<<8|er.pending_buf[er.d_buf+Br*2+1],lr=er.pending_buf[er.l_buf+Br],Br++,Hr===0?Ar(er,lr,yr):(Hn=Tn[lr],Ar(er,Hn+Rt+1,yr),kr=nn[Hn],kr!==0&&(lr-=Pn[Hn],vr(er,lr,kr)),Hr--,Hn=fr(Hr),Ar(er,Hn,Er),kr=cn[Hn],kr!==0&&(Hr-=dn[Hn],vr(er,Hr,kr)));while(Br<er.last_lit);Ar(er,Xt,yr)}function _r(er,yr){var Er=yr.dyn_tree,Hr=yr.stat_desc.static_tree,lr=yr.stat_desc.has_stree,Br=yr.stat_desc.elems,Hn,kr,Cs=-1,Fn;for(er.heap_len=0,er.heap_max=Ft,Hn=0;Hn<Br;Hn++)Er[Hn*2]!==0?(er.heap[++er.heap_len]=Cs=Hn,er.depth[Hn]=0):Er[Hn*2+1]=0;for(;er.heap_len<2;)Fn=er.heap[++er.heap_len]=Cs<2?++Cs:0,Er[Fn*2]=1,er.depth[Fn]=0,er.opt_len--,lr&&(er.static_len-=Hr[Fn*2+1]);for(yr.max_code=Cs,Hn=er.heap_len>>1;Hn>=1;Hn--)cr(er,Er,Hn);Fn=Br;do Hn=er.heap[1],er.heap[1]=er.heap[er.heap_len--],cr(er,Er,1),kr=er.heap[1],er.heap[--er.heap_max]=Hn,er.heap[--er.heap_max]=kr,Er[Fn*2]=Er[Hn*2]+Er[kr*2],er.depth[Fn]=(er.depth[Hn]>=er.depth[kr]?er.depth[Hn]:er.depth[kr])+1,Er[Hn*2+1]=Er[kr*2+1]=Fn,er.heap[1]=Fn++,cr(er,Er,1);while(er.heap_len>=2);er.heap[--er.heap_max]=er.heap[1],Jn(er,yr),hr(Er,Cs,er.bl_count)}function Ir(er,yr,Er){var Hr,lr=-1,Br,Hn=yr[0*2+1],kr=0,Cs=7,Fn=4;for(Hn===0&&(Cs=138,Fn=3),yr[(Er+1)*2+1]=65535,Hr=0;Hr<=Er;Hr++)Br=Hn,Hn=yr[(Hr+1)*2+1],!(++kr<Cs&&Br===Hn)&&(kr<Fn?er.bl_tree[Br*2]+=kr:Br!==0?(Br!==lr&&er.bl_tree[Br*2]++,er.bl_tree[Zt*2]++):kr<=10?er.bl_tree[rn*2]++:er.bl_tree[Gt*2]++,kr=0,lr=Br,Hn===0?(Cs=138,Fn=3):Br===Hn?(Cs=6,Fn=3):(Cs=7,Fn=4))}function pr(er,yr,Er){var Hr,lr=-1,Br,Hn=yr[0*2+1],kr=0,Cs=7,Fn=4;for(Hn===0&&(Cs=138,Fn=3),Hr=0;Hr<=Er;Hr++)if(Br=Hn,Hn=yr[(Hr+1)*2+1],!(++kr<Cs&&Br===Hn)){if(kr<Fn)do Ar(er,Br,er.bl_tree);while(--kr!==0);else Br!==0?(Br!==lr&&(Ar(er,Br,er.bl_tree),kr--),Ar(er,Zt,er.bl_tree),vr(er,kr-3,2)):kr<=10?(Ar(er,rn,er.bl_tree),vr(er,kr-3,3)):(Ar(er,Gt,er.bl_tree),vr(er,kr-11,7));kr=0,lr=Br,Hn===0?(Cs=138,Fn=3):Br===Hn?(Cs=6,Fn=3):(Cs=7,Fn=4)}}function Tr(er){var yr;for(Ir(er,er.dyn_ltree,er.l_desc.max_code),Ir(er,er.dyn_dtree,er.d_desc.max_code),_r(er,er.bl_desc),yr=Pt-1;yr>=3&&er.bl_tree[mn[yr]*2+1]===0;yr--);return er.opt_len+=3*(yr+1)+5+5+4,yr}function Wr(er,yr,Er,Hr){var lr;for(vr(er,yr-257,5),vr(er,Er-1,5),vr(er,Hr-4,4),lr=0;lr<Hr;lr++)vr(er,er.bl_tree[mn[lr]*2+1],3);pr(er,er.dyn_ltree,yr-1),pr(er,er.dyn_dtree,Er-1)}function Kn(er){var yr=4093624447,Er;for(Er=0;Er<=31;Er++,yr>>>=1)if(yr&1&&er.dyn_ltree[Er*2]!==0)return lt;if(er.dyn_ltree[18]!==0||er.dyn_ltree[20]!==0||er.dyn_ltree[26]!==0)return dt;for(Er=32;Er<Rt;Er++)if(er.dyn_ltree[Er*2]!==0)return dt;return lt}var rr=!1;function ur(er){rr||(wr(),rr=!0),er.l_desc=new ar(er.dyn_ltree,qn),er.d_desc=new ar(er.dyn_dtree,In),er.bl_desc=new ar(er.bl_tree,Wn),er.bi_buf=0,er.bi_valid=0,Nr(er)}function Sr(er,yr,Er,Hr){vr(er,(_t<<1)+(Hr?1:0),3),Yr(er,yr,Er)}function gr(er){vr(er,bt<<1,3),Ar(er,Xt,Cn),Mr(er)}function Gr(er,yr,Er,Hr){var lr,Br,Hn=0;er.level>0?(er.strm.data_type===yt&&(er.strm.data_type=Kn(er)),_r(er,er.l_desc),_r(er,er.d_desc),Hn=Tr(er),lr=er.opt_len+3+7>>>3,Br=er.static_len+3+7>>>3,Br<=lr&&(lr=Br)):lr=Br=Er+5,Er+4<=lr&&yr!==-1?Sr(er,yr,Er,Hr):er.strategy===at||Br===lr?(vr(er,(bt<<1)+(Hr?1:0),3),Qn(er,Cn,Mn)):(vr(er,(Mt<<1)+(Hr?1:0),3),Wr(er,er.l_desc.max_code+1,er.d_desc.max_code+1,Hn+1),Qn(er,er.dyn_ltree,er.dyn_dtree)),Nr(er),Hr&&Fr(er)}function jr(er,yr,Er){return er.pending_buf[er.d_buf+er.last_lit*2]=yr>>>8&255,er.pending_buf[er.d_buf+er.last_lit*2+1]=yr&255,er.pending_buf[er.l_buf+er.last_lit]=Er&255,er.last_lit++,yr===0?er.dyn_ltree[Er*2]++:(er.matches++,yr--,er.dyn_ltree[(Tn[Er]+Rt+1)*2]++,er.dyn_dtree[fr(yr)*2]++),er.last_lit===er.lit_bufsize-1}tt._tr_init=ur,tt._tr_stored_block=Sr,tt._tr_flush_block=Gr,tt._tr_tally=jr,tt._tr_align=gr},"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":nt=>{function tt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}nt.exports=tt},"./src/SurfaceWorker.js":()=>{$3Dmol.workerString=(function(){self.onmessage=function(nt){var tt=nt.data,rt=tt.type;if(rt<0)self.atomData=tt.atoms,self.volume=tt.volume,self.ps=new ProteinSurface;else{var st=self.ps;st.initparm(tt.expandedExtent,rt!=1,self.volume),st.fillvoxels(self.atomData,tt.extendedAtoms),st.buildboundary(),(rt===4||rt===2)&&(st.fastdistancemap(),st.boundingatom(!1),st.fillvoxelswaals(self.atomData,tt.extendedAtoms)),st.marchingcube(rt);var at=st.getFacesAndVertices(tt.atomsToShow);self.postMessage(at)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},"./src/exporter.js":nt=>{typeof nt.exports=="object"&&(nt.exports=window.$3Dmol)},"./src/vendor/mmtf.js":function(nt,tt){(function(rt,st){st(tt)})(this,function(rt){function st(Kn,rr,ur){for(var Sr=(Kn.byteLength,0),gr=ur.length;gr>Sr;Sr++){var Gr=ur.charCodeAt(Sr);if(128>Gr)Kn.setUint8(rr++,Gr>>>0&127|0);else if(2048>Gr)Kn.setUint8(rr++,Gr>>>6&31|192),Kn.setUint8(rr++,Gr>>>0&63|128);else if(65536>Gr)Kn.setUint8(rr++,Gr>>>12&15|224),Kn.setUint8(rr++,Gr>>>6&63|128),Kn.setUint8(rr++,Gr>>>0&63|128);else{if(!(1114112>Gr))throw new Error("bad codepoint "+Gr);Kn.setUint8(rr++,Gr>>>18&7|240),Kn.setUint8(rr++,Gr>>>12&63|128),Kn.setUint8(rr++,Gr>>>6&63|128),Kn.setUint8(rr++,Gr>>>0&63|128)}}}function at(Kn){for(var rr=0,ur=0,Sr=Kn.length;Sr>ur;ur++){var gr=Kn.charCodeAt(ur);if(128>gr)rr+=1;else if(2048>gr)rr+=2;else if(65536>gr)rr+=3;else{if(!(1114112>gr))throw new Error("bad codepoint "+gr);rr+=4}}return rr}function lt(Kn,rr,ur){var Sr=typeof Kn;if(Sr==="string"){var gr=at(Kn);if(32>gr)return rr.setUint8(ur,160|gr),st(rr,ur+1,Kn),1+gr;if(256>gr)return rr.setUint8(ur,217),rr.setUint8(ur+1,gr),st(rr,ur+2,Kn),2+gr;if(65536>gr)return rr.setUint8(ur,218),rr.setUint16(ur+1,gr),st(rr,ur+3,Kn),3+gr;if(4294967296>gr)return rr.setUint8(ur,219),rr.setUint32(ur+1,gr),st(rr,ur+5,Kn),5+gr}if(Kn instanceof Uint8Array){var gr=Kn.byteLength,Gr=new Uint8Array(rr.buffer);if(256>gr)return rr.setUint8(ur,196),rr.setUint8(ur+1,gr),Gr.set(Kn,ur+2),2+gr;if(65536>gr)return rr.setUint8(ur,197),rr.setUint16(ur+1,gr),Gr.set(Kn,ur+3),3+gr;if(4294967296>gr)return rr.setUint8(ur,198),rr.setUint32(ur+1,gr),Gr.set(Kn,ur+5),5+gr}if(Sr==="number"){if(!isFinite(Kn))throw new Error("Number not finite: "+Kn);if(Math.floor(Kn)!==Kn)return rr.setUint8(ur,203),rr.setFloat64(ur+1,Kn),9;if(Kn>=0){if(128>Kn)return rr.setUint8(ur,Kn),1;if(256>Kn)return rr.setUint8(ur,204),rr.setUint8(ur+1,Kn),2;if(65536>Kn)return rr.setUint8(ur,205),rr.setUint16(ur+1,Kn),3;if(4294967296>Kn)return rr.setUint8(ur,206),rr.setUint32(ur+1,Kn),5;throw new Error("Number too big 0x"+Kn.toString(16))}if(Kn>=-32)return rr.setInt8(ur,Kn),1;if(Kn>=-128)return rr.setUint8(ur,208),rr.setInt8(ur+1,Kn),2;if(Kn>=-32768)return rr.setUint8(ur,209),rr.setInt16(ur+1,Kn),3;if(Kn>=-2147483648)return rr.setUint8(ur,210),rr.setInt32(ur+1,Kn),5;throw new Error("Number too small -0x"+(-Kn).toString(16).substr(1))}if(Kn===null)return rr.setUint8(ur,192),1;if(Sr==="boolean")return rr.setUint8(ur,Kn?195:194),1;if(Sr==="object"){var gr,yr=0,jr=Array.isArray(Kn);if(jr)gr=Kn.length;else{var er=Object.keys(Kn);gr=er.length}var yr;if(16>gr?(rr.setUint8(ur,gr|(jr?144:128)),yr=1):65536>gr?(rr.setUint8(ur,jr?220:222),rr.setUint16(ur+1,gr),yr=3):4294967296>gr&&(rr.setUint8(ur,jr?221:223),rr.setUint32(ur+1,gr),yr=5),jr)for(var Er=0;gr>Er;Er++)yr+=lt(Kn[Er],rr,ur+yr);else for(var Er=0;gr>Er;Er++){var Hr=er[Er];yr+=lt(Hr,rr,ur+yr),yr+=lt(Kn[Hr],rr,ur+yr)}return yr}throw new Error("Unknown type "+Sr)}function dt(Kn){var rr=typeof Kn;if(rr==="string"){var ur=at(Kn);if(32>ur)return 1+ur;if(256>ur)return 2+ur;if(65536>ur)return 3+ur;if(4294967296>ur)return 5+ur}if(Kn instanceof Uint8Array){var ur=Kn.byteLength;if(256>ur)return 2+ur;if(65536>ur)return 3+ur;if(4294967296>ur)return 5+ur}if(rr==="number"){if(Math.floor(Kn)!==Kn)return 9;if(Kn>=0){if(128>Kn)return 1;if(256>Kn)return 2;if(65536>Kn)return 3;if(4294967296>Kn)return 5;throw new Error("Number too big 0x"+Kn.toString(16))}if(Kn>=-32)return 1;if(Kn>=-128)return 2;if(Kn>=-32768)return 3;if(Kn>=-2147483648)return 5;throw new Error("Number too small -0x"+Kn.toString(16).substr(1))}if(rr==="boolean"||Kn===null)return 1;if(rr==="object"){var ur,Sr=0;if(Array.isArray(Kn)){ur=Kn.length;for(var gr=0;ur>gr;gr++)Sr+=dt(Kn[gr])}else{var Gr=Object.keys(Kn);ur=Gr.length;for(var gr=0;ur>gr;gr++){var jr=Gr[gr];Sr+=dt(jr)+dt(Kn[jr])}}if(16>ur)return 1+Sr;if(65536>ur)return 3+Sr;if(4294967296>ur)return 5+Sr;throw new Error("Array or object too long 0x"+ur.toString(16))}throw new Error("Unknown type "+rr)}function yt(Kn){var rr=new ArrayBuffer(dt(Kn)),ur=new DataView(rr);return lt(Kn,ur,0),new Uint8Array(rr)}function vt(Kn,rr,ur){return rr?new Kn(rr.buffer,rr.byteOffset,rr.byteLength/(ur||1)):void 0}function _t(Kn){return vt(DataView,Kn)}function bt(Kn){return vt(Uint8Array,Kn)}function Mt(Kn){return vt(Int8Array,Kn)}function Ct(Kn){return vt(Int32Array,Kn,4)}function Tt(Kn){return vt(Float32Array,Kn,4)}function $t(Kn,rr){var ur=Kn.length/2;rr||(rr=new Int16Array(ur));for(var Sr=0,gr=0;ur>Sr;++Sr,gr+=2)rr[Sr]=Kn[gr]<<8^Kn[gr+1]<<0;return rr}function Rt(Kn,rr){var ur=Kn.length;rr||(rr=new Uint8Array(2*ur));for(var Sr=_t(rr),gr=0;ur>gr;++gr)Sr.setInt16(2*gr,Kn[gr]);return bt(rr)}function Et(Kn,rr){var ur=Kn.length/4;rr||(rr=new Int32Array(ur));for(var Sr=0,gr=0;ur>Sr;++Sr,gr+=4)rr[Sr]=Kn[gr]<<24^Kn[gr+1]<<16^Kn[gr+2]<<8^Kn[gr+3]<<0;return rr}function wt(Kn,rr){var ur=Kn.length;rr||(rr=new Uint8Array(4*ur));for(var Sr=_t(rr),gr=0;ur>gr;++gr)Sr.setInt32(4*gr,Kn[gr]);return bt(rr)}function Pt(Kn,rr){var ur=Kn.length;rr||(rr=new Float32Array(ur/4));for(var Sr=_t(rr),gr=_t(Kn),Gr=0,jr=0,er=ur/4;er>Gr;++Gr,jr+=4)Sr.setFloat32(jr,gr.getFloat32(jr),!0);return rr}function Ft(Kn,rr,ur){var Sr=Kn.length,gr=1/rr;ur||(ur=new Float32Array(Sr));for(var Gr=0;Sr>Gr;++Gr)ur[Gr]=Kn[Gr]*gr;return ur}function Nt(Kn,rr,ur){var Sr=Kn.length;ur||(ur=new Int32Array(Sr));for(var gr=0;Sr>gr;++gr)ur[gr]=Math.round(Kn[gr]*rr);return ur}function Ot(Kn,rr){var ur,Sr;if(!rr){var gr=0;for(ur=0,Sr=Kn.length;Sr>ur;ur+=2)gr+=Kn[ur+1];rr=new Kn.constructor(gr)}var Gr=0;for(ur=0,Sr=Kn.length;Sr>ur;ur+=2)for(var jr=Kn[ur],er=Kn[ur+1],yr=0;er>yr;++yr)rr[Gr]=jr,++Gr;return rr}function Bt(Kn){if(Kn.length===0)return new Int32Array;var rr,ur,Sr=2;for(rr=1,ur=Kn.length;ur>rr;++rr)Kn[rr-1]!==Kn[rr]&&(Sr+=2);var gr=new Int32Array(Sr),Gr=0,jr=1;for(rr=1,ur=Kn.length;ur>rr;++rr)Kn[rr-1]!==Kn[rr]?(gr[Gr]=Kn[rr-1],gr[Gr+1]=jr,jr=1,Gr+=2):++jr;return gr[Gr]=Kn[Kn.length-1],gr[Gr+1]=jr,gr}function Xt(Kn,rr){var ur=Kn.length;rr||(rr=new Kn.constructor(ur)),ur&&(rr[0]=Kn[0]);for(var Sr=1;ur>Sr;++Sr)rr[Sr]=Kn[Sr]+rr[Sr-1];return rr}function Zt(Kn,rr){var ur=Kn.length;rr||(rr=new Kn.constructor(ur)),rr[0]=Kn[0];for(var Sr=1;ur>Sr;++Sr)rr[Sr]=Kn[Sr]-Kn[Sr-1];return rr}function rn(Kn,rr){var ur,Sr,gr=Kn instanceof Int8Array?127:32767,Gr=-gr-1,jr=Kn.length;if(!rr){var er=0;for(ur=0;jr>ur;++ur)Kn[ur]<gr&&Kn[ur]>Gr&&++er;rr=new Int32Array(er)}for(ur=0,Sr=0;jr>ur;){for(var yr=0;Kn[ur]===gr||Kn[ur]===Gr;)yr+=Kn[ur],++ur;yr+=Kn[ur],++ur,rr[Sr]=yr,++Sr}return rr}function Gt(Kn,rr){var ur,Sr=32767,gr=-32768,Gr=Kn.length,jr=0;for(ur=0;Gr>ur;++ur){var er=Kn[ur];er===0?++jr:er>0?(jr+=Math.ceil(er/Sr),er%Sr===0&&(jr+=1)):(jr+=Math.ceil(er/gr),er%gr===0&&(jr+=1))}var yr=new Int16Array(jr),Er=0;for(ur=0;Gr>ur;++ur){var er=Kn[ur];if(er>=0)for(;er>=Sr;)yr[Er]=Sr,++Er,er-=Sr;else for(;gr>=er;)yr[Er]=gr,++Er,er-=gr;yr[Er]=er,++Er}return yr}function nn(Kn,rr){return Xt(Ot(Kn),rr)}function cn(Kn){return Bt(Zt(Kn))}function an(Kn,rr,ur){return Ft(Ot(Kn,Ct(ur)),rr,ur)}function mn(Kn,rr){return Bt(Nt(Kn,rr))}function En(Kn,rr,ur){return Ft(Xt(Kn,Ct(ur)),rr,ur)}function Cn(Kn,rr,ur){return Zt(Nt(Kn,rr),ur)}function Mn(Kn,rr,ur){return Ft(rn(Kn,Ct(ur)),rr,ur)}function un(Kn,rr,ur){var Sr=rn(Kn,Ct(ur));return En(Sr,rr,Tt(Sr))}function Tn(Kn,rr,ur){return Gt(Cn(Kn,rr))}function Pn(Gr){var rr=_t(Gr),ur=rr.getInt32(0),Sr=rr.getInt32(4),gr=Gr.subarray(8,12),Gr=Gr.subarray(12);return[ur,Gr,Sr,gr]}function dn(Kn,rr,ur,Sr){var gr=new ArrayBuffer(12+Sr.byteLength),Gr=new Uint8Array(gr),jr=new DataView(gr);return jr.setInt32(0,Kn),jr.setInt32(4,rr),ur&&Gr.set(ur,8),Gr.set(Sr,12),Gr}function Un(Kn){var rr=Kn.length,ur=bt(Kn);return dn(2,rr,void 0,ur)}function qn(Kn){var rr=Kn.length,ur=wt(Kn);return dn(4,rr,void 0,ur)}function In(Kn,rr){var ur=Kn.length/rr,Sr=wt([rr]),gr=bt(Kn);return dn(5,ur,Sr,gr)}function Wn(Kn){var rr=Kn.length,ur=wt(Bt(Kn));return dn(6,rr,void 0,ur)}function ar(Kn){var rr=Kn.length,ur=wt(cn(Kn));return dn(8,rr,void 0,ur)}function fr(Kn,rr){var ur=Kn.length,Sr=wt([rr]),gr=wt(mn(Kn,rr));return dn(9,ur,Sr,gr)}function mr(Kn,rr){var ur=Kn.length,Sr=wt([rr]),gr=Rt(Tn(Kn,rr));return dn(10,ur,Sr,gr)}function vr(Kn){var rr={};return cr.forEach(function(ur){Kn[ur]!==void 0&&(rr[ur]=Kn[ur])}),Kn.bondAtomList&&(rr.bondAtomList=qn(Kn.bondAtomList)),Kn.bondOrderList&&(rr.bondOrderList=Un(Kn.bondOrderList)),rr.xCoordList=mr(Kn.xCoordList,1e3),rr.yCoordList=mr(Kn.yCoordList,1e3),rr.zCoordList=mr(Kn.zCoordList,1e3),Kn.bFactorList&&(rr.bFactorList=mr(Kn.bFactorList,100)),Kn.atomIdList&&(rr.atomIdList=ar(Kn.atomIdList)),Kn.altLocList&&(rr.altLocList=Wn(Kn.altLocList)),Kn.occupancyList&&(rr.occupancyList=fr(Kn.occupancyList,100)),rr.groupIdList=ar(Kn.groupIdList),rr.groupTypeList=qn(Kn.groupTypeList),Kn.secStructList&&(rr.secStructList=Un(Kn.secStructList)),Kn.insCodeList&&(rr.insCodeList=Wn(Kn.insCodeList)),Kn.sequenceIndexList&&(rr.sequenceIndexList=ar(Kn.sequenceIndexList)),rr.chainIdList=In(Kn.chainIdList,4),Kn.chainNameList&&(rr.chainNameList=In(Kn.chainNameList,4)),rr}function Ar(Kn){function rr(yr){for(var Er={},Hr=0;yr>Hr;Hr++){var lr=Gr();Er[lr]=Gr()}return Er}function ur(yr){var Er=Kn.subarray(jr,jr+yr);return jr+=yr,Er}function Sr(yr){var Er=Kn.subarray(jr,jr+yr);jr+=yr;var Hr=65535;if(yr>Hr){for(var lr=[],Br=0;Br<Er.length;Br+=Hr)lr.push(String.fromCharCode.apply(null,Er.subarray(Br,Br+Hr)));return lr.join("")}return String.fromCharCode.apply(null,Er)}function gr(yr){for(var Er=new Array(yr),Hr=0;yr>Hr;Hr++)Er[Hr]=Gr();return Er}function Gr(){var yr,Er,Hr=Kn[jr];if(!(128&Hr))return jr++,Hr;if((240&Hr)===128)return Er=15&Hr,jr++,rr(Er);if((240&Hr)===144)return Er=15&Hr,jr++,gr(Er);if((224&Hr)===160)return Er=31&Hr,jr++,Sr(Er);if((224&Hr)===224)return yr=er.getInt8(jr),jr++,yr;switch(Hr){case 192:return jr++,null;case 194:return jr++,!1;case 195:return jr++,!0;case 196:return Er=er.getUint8(jr+1),jr+=2,ur(Er);case 197:return Er=er.getUint16(jr+1),jr+=3,ur(Er);case 198:return Er=er.getUint32(jr+1),jr+=5,ur(Er);case 202:return yr=er.getFloat32(jr+1),jr+=5,yr;case 203:return yr=er.getFloat64(jr+1),jr+=9,yr;case 204:return yr=Kn[jr+1],jr+=2,yr;case 205:return yr=er.getUint16(jr+1),jr+=3,yr;case 206:return yr=er.getUint32(jr+1),jr+=5,yr;case 208:return yr=er.getInt8(jr+1),jr+=2,yr;case 209:return yr=er.getInt16(jr+1),jr+=3,yr;case 210:return yr=er.getInt32(jr+1),jr+=5,yr;case 217:return Er=er.getUint8(jr+1),jr+=2,Sr(Er);case 218:return Er=er.getUint16(jr+1),jr+=3,Sr(Er);case 219:return Er=er.getUint32(jr+1),jr+=5,Sr(Er);case 220:return Er=er.getUint16(jr+1),jr+=3,gr(Er);case 221:return Er=er.getUint32(jr+1),jr+=5,gr(Er);case 222:return Er=er.getUint16(jr+1),jr+=3,rr(Er);case 223:return Er=er.getUint32(jr+1),jr+=5,rr(Er)}throw new Error("Unknown type 0x"+Hr.toString(16))}var jr=0,er=new DataView(Kn.buffer);return Gr()}function $r(Kn,rr,ur,Sr){switch(Kn){case 1:return Pt(rr);case 2:return Mt(rr);case 3:return $t(rr);case 4:return Et(rr);case 5:return bt(rr);case 6:return Ot(Et(rr),new Uint8Array(ur));case 7:return Ot(Et(rr));case 8:return nn(Et(rr));case 9:return an(Et(rr),Et(Sr)[0]);case 10:return un($t(rr),Et(Sr)[0]);case 11:return Ft($t(rr),Et(Sr)[0]);case 12:return Mn($t(rr),Et(Sr)[0]);case 13:return Mn(Mt(rr),Et(Sr)[0]);case 14:return rn($t(rr));case 15:return rn(Mt(rr))}}function Mr(Kn,rr){rr=rr||{};var ur=rr.ignoreFields,Sr={};return _r.forEach(function(gr){var Gr=ur?ur.indexOf(gr)!==-1:!1,jr=Kn[gr];Gr||jr===void 0||(jr instanceof Uint8Array?Sr[gr]=$r.apply(null,Pn(jr)):Sr[gr]=jr)}),Sr}function Jn(Kn){return String.fromCharCode.apply(null,Kn).replace(/\0/g,"")}function hr(Kn,rr,ur){ur=ur||{};var Sr,gr,Gr,jr,er,yr,Er=ur.firstModelOnly,Hr=rr.onModel,lr=rr.onChain,Br=rr.onGroup,Hn=rr.onAtom,kr=rr.onBond,Cs=0,Fn=0,Ur=0,Vr=0,dr=0,Cr=-1,hs=Kn.chainNameList,ro=Kn.secStructList,oo=Kn.insCodeList,ao=Kn.sequenceIndexList,Uo=Kn.atomIdList,gu=Kn.bFactorList,yl=Kn.altLocList,_l=Kn.occupancyList,Vo=Kn.bondAtomList,uu=Kn.bondOrderList;for(Sr=0,gr=Kn.chainsPerModel.length;gr>Sr&&!(Er&&Cs>0);++Sr){var Hl=Kn.chainsPerModel[Cs];for(Hr&&Hr({chainCount:Hl,modelIndex:Cs}),Gr=0;Hl>Gr;++Gr){var Ku=Kn.groupsPerChain[Fn];if(lr){var ju=Jn(Kn.chainIdList.subarray(4*Fn,4*Fn+4)),au=null;hs&&(au=Jn(hs.subarray(4*Fn,4*Fn+4))),lr({groupCount:Ku,chainIndex:Fn,modelIndex:Cs,chainId:ju,chainName:au})}for(jr=0;Ku>jr;++jr){var ou=Kn.groupList[Kn.groupTypeList[Ur]],ru=ou.atomNameList.length;if(Br){var br=null;ro&&(br=ro[Ur]);var ls=null;Kn.insCodeList&&(ls=String.fromCharCode(oo[Ur]));var Ns=null;ao&&(Ns=ao[Ur]),Br({atomCount:ru,groupIndex:Ur,chainIndex:Fn,modelIndex:Cs,groupId:Kn.groupIdList[Ur],groupType:Kn.groupTypeList[Ur],groupName:ou.groupName,singleLetterCode:ou.singleLetterCode,chemCompType:ou.chemCompType,secStruct:br,insCode:ls,sequenceIndex:Ns})}for(er=0;ru>er;++er){if(Hn){var $a=null;Uo&&($a=Uo[Vr]);var Ms=null;gu&&(Ms=gu[Vr]);var io=null;yl&&(io=String.fromCharCode(yl[Vr]));var lo=null;_l&&(lo=_l[Vr]),Hn({atomIndex:Vr,groupIndex:Ur,chainIndex:Fn,modelIndex:Cs,atomId:$a,element:ou.elementList[er],atomName:ou.atomNameList[er],formalCharge:ou.formalChargeList[er],xCoord:Kn.xCoordList[Vr],yCoord:Kn.yCoordList[Vr],zCoord:Kn.zCoordList[Vr],bFactor:Ms,altLoc:io,occupancy:lo})}Vr+=1}if(kr){var mo=ou.bondAtomList;for(er=0,yr=ou.bondOrderList.length;yr>er;++er)kr({atomIndex1:Vr-ru+mo[2*er],atomIndex2:Vr-ru+mo[2*er+1],bondOrder:ou.bondOrderList[er]})}Ur+=1}Fn+=1}if(dr=Cr+1,Cr=Vr-1,kr&&Vo)for(er=0,yr=Vo.length;yr>er;er+=2){var go=Vo[er],Io=Vo[er+1];(go>=dr&&Cr>=go||Io>=dr&&Cr>=Io)&&kr({atomIndex1:go,atomIndex2:Io,bondOrder:uu?uu[er/2]:null})}Cs+=1}}function wr(Kn){return yt(vr(Kn))}function Nr(Kn,rr){Kn instanceof ArrayBuffer&&(Kn=new Uint8Array(Kn));var ur;return ur=Kn instanceof Uint8Array?Ar(Kn):Kn,Mr(ur,rr)}function Fr(Kn,rr,ur,Sr){function gr(){try{var jr=Nr(Gr.response);ur(jr)}catch(er){Sr(er)}}var Gr=new XMLHttpRequest;Gr.addEventListener("load",gr,!0),Gr.addEventListener("error",Sr,!0),Gr.responseType="arraybuffer",Gr.open("GET",rr+Kn.toUpperCase()),Gr.send()}function Yr(Kn,rr,ur){Fr(Kn,Tr,rr,ur)}function cs(Kn,rr,ur){Fr(Kn,Wr,rr,ur)}var cr=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],Qn=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],_r=cr.concat(Qn),Ir="v1.0.1",pr="//mmtf.rcsb.org/v1.0/",Tr=pr+"full/",Wr=pr+"reduced/";rt.encode=wr,rt.decode=Nr,rt.traverse=hr,rt.fetch=Yr,rt.fetchReduced=cs,rt.version=Ir,rt.fetchUrl=Tr,rt.fetchReducedUrl=Wr,rt.encodeMsgpack=yt,rt.encodeMmtf=vr,rt.decodeMsgpack=Ar,rt.decodeMmtf=Mr})},"./node_modules/pako/dist/pako.esm.mjs":(nt,tt,rt)=>{rt.r(tt),rt.d(tt,{Deflate:()=>j0,Inflate:()=>s0,constants:()=>Oy,default:()=>a0,deflate:()=>V0,deflateRaw:()=>Tm,gzip:()=>G0,inflate:()=>W0,inflateRaw:()=>mp,ungzip:()=>Iy});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const st=4,at=0,lt=1,dt=2;function yt(sn){let or=sn.length;for(;--or>=0;)sn[or]=0}const vt=0,_t=1,bt=2,Mt=3,Ct=258,Tt=29,$t=256,Rt=$t+1+Tt,Et=30,wt=19,Pt=2*Rt+1,Ft=15,Nt=16,Ot=7,Bt=256,Xt=16,Zt=17,rn=18,Gt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),nn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),cn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),an=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mn=512,En=new Array((Rt+2)*2);yt(En);const Cn=new Array(Et*2);yt(Cn);const Mn=new Array(mn);yt(Mn);const un=new Array(Ct-Mt+1);yt(un);const Tn=new Array(Tt);yt(Tn);const Pn=new Array(Et);yt(Pn);function dn(sn,or,Sn,xr,Pr){this.static_tree=sn,this.extra_bits=or,this.extra_base=Sn,this.elems=xr,this.max_length=Pr,this.has_stree=sn&&sn.length}let Un,qn,In;function Wn(sn,or){this.dyn_tree=sn,this.max_code=0,this.stat_desc=or}const ar=sn=>sn<256?Mn[sn]:Mn[256+(sn>>>7)],fr=(sn,or)=>{sn.pending_buf[sn.pending++]=or&255,sn.pending_buf[sn.pending++]=or>>>8&255},mr=(sn,or,Sn)=>{sn.bi_valid>Nt-Sn?(sn.bi_buf|=or<<sn.bi_valid&65535,fr(sn,sn.bi_buf),sn.bi_buf=or>>Nt-sn.bi_valid,sn.bi_valid+=Sn-Nt):(sn.bi_buf|=or<<sn.bi_valid&65535,sn.bi_valid+=Sn)},vr=(sn,or,Sn)=>{mr(sn,Sn[or*2],Sn[or*2+1])},Ar=(sn,or)=>{let Sn=0;do Sn|=sn&1,sn>>>=1,Sn<<=1;while(--or>0);return Sn>>>1},$r=sn=>{sn.bi_valid===16?(fr(sn,sn.bi_buf),sn.bi_buf=0,sn.bi_valid=0):sn.bi_valid>=8&&(sn.pending_buf[sn.pending++]=sn.bi_buf&255,sn.bi_buf>>=8,sn.bi_valid-=8)},Mr=(sn,or)=>{const Sn=or.dyn_tree,xr=or.max_code,Pr=or.stat_desc.static_tree,Rr=or.stat_desc.has_stree,js=or.stat_desc.extra_bits,Ss=or.stat_desc.extra_base,yo=or.stat_desc.max_length;let ss,Us,Yl,ho,no,Wo,mu=0;for(ho=0;ho<=Ft;ho++)sn.bl_count[ho]=0;for(Sn[sn.heap[sn.heap_max]*2+1]=0,ss=sn.heap_max+1;ss<Pt;ss++)Us=sn.heap[ss],ho=Sn[Sn[Us*2+1]*2+1]+1,ho>yo&&(ho=yo,mu++),Sn[Us*2+1]=ho,!(Us>xr)&&(sn.bl_count[ho]++,no=0,Us>=Ss&&(no=js[Us-Ss]),Wo=Sn[Us*2],sn.opt_len+=Wo*(ho+no),Rr&&(sn.static_len+=Wo*(Pr[Us*2+1]+no)));if(mu!==0){do{for(ho=yo-1;sn.bl_count[ho]===0;)ho--;sn.bl_count[ho]--,sn.bl_count[ho+1]+=2,sn.bl_count[yo]--,mu-=2}while(mu>0);for(ho=yo;ho!==0;ho--)for(Us=sn.bl_count[ho];Us!==0;)Yl=sn.heap[--ss],!(Yl>xr)&&(Sn[Yl*2+1]!==ho&&(sn.opt_len+=(ho-Sn[Yl*2+1])*Sn[Yl*2],Sn[Yl*2+1]=ho),Us--)}},Jn=(sn,or,Sn)=>{const xr=new Array(Ft+1);let Pr=0,Rr,js;for(Rr=1;Rr<=Ft;Rr++)Pr=Pr+Sn[Rr-1]<<1,xr[Rr]=Pr;for(js=0;js<=or;js++){let Ss=sn[js*2+1];Ss!==0&&(sn[js*2]=Ar(xr[Ss]++,Ss))}},hr=()=>{let sn,or,Sn,xr,Pr;const Rr=new Array(Ft+1);for(Sn=0,xr=0;xr<Tt-1;xr++)for(Tn[xr]=Sn,sn=0;sn<1<<Gt[xr];sn++)un[Sn++]=xr;for(un[Sn-1]=xr,Pr=0,xr=0;xr<16;xr++)for(Pn[xr]=Pr,sn=0;sn<1<<nn[xr];sn++)Mn[Pr++]=xr;for(Pr>>=7;xr<Et;xr++)for(Pn[xr]=Pr<<7,sn=0;sn<1<<nn[xr]-7;sn++)Mn[256+Pr++]=xr;for(or=0;or<=Ft;or++)Rr[or]=0;for(sn=0;sn<=143;)En[sn*2+1]=8,sn++,Rr[8]++;for(;sn<=255;)En[sn*2+1]=9,sn++,Rr[9]++;for(;sn<=279;)En[sn*2+1]=7,sn++,Rr[7]++;for(;sn<=287;)En[sn*2+1]=8,sn++,Rr[8]++;for(Jn(En,Rt+1,Rr),sn=0;sn<Et;sn++)Cn[sn*2+1]=5,Cn[sn*2]=Ar(sn,5);Un=new dn(En,Gt,$t+1,Rt,Ft),qn=new dn(Cn,nn,0,Et,Ft),In=new dn(new Array(0),cn,0,wt,Ot)},wr=sn=>{let or;for(or=0;or<Rt;or++)sn.dyn_ltree[or*2]=0;for(or=0;or<Et;or++)sn.dyn_dtree[or*2]=0;for(or=0;or<wt;or++)sn.bl_tree[or*2]=0;sn.dyn_ltree[Bt*2]=1,sn.opt_len=sn.static_len=0,sn.sym_next=sn.matches=0},Nr=sn=>{sn.bi_valid>8?fr(sn,sn.bi_buf):sn.bi_valid>0&&(sn.pending_buf[sn.pending++]=sn.bi_buf),sn.bi_buf=0,sn.bi_valid=0},Fr=(sn,or,Sn,xr)=>{const Pr=or*2,Rr=Sn*2;return sn[Pr]<sn[Rr]||sn[Pr]===sn[Rr]&&xr[or]<=xr[Sn]},Yr=(sn,or,Sn)=>{const xr=sn.heap[Sn];let Pr=Sn<<1;for(;Pr<=sn.heap_len&&(Pr<sn.heap_len&&Fr(or,sn.heap[Pr+1],sn.heap[Pr],sn.depth)&&Pr++,!Fr(or,xr,sn.heap[Pr],sn.depth));)sn.heap[Sn]=sn.heap[Pr],Sn=Pr,Pr<<=1;sn.heap[Sn]=xr},cs=(sn,or,Sn)=>{let xr,Pr,Rr=0,js,Ss;if(sn.sym_next!==0)do xr=sn.pending_buf[sn.sym_buf+Rr++]&255,xr+=(sn.pending_buf[sn.sym_buf+Rr++]&255)<<8,Pr=sn.pending_buf[sn.sym_buf+Rr++],xr===0?vr(sn,Pr,or):(js=un[Pr],vr(sn,js+$t+1,or),Ss=Gt[js],Ss!==0&&(Pr-=Tn[js],mr(sn,Pr,Ss)),xr--,js=ar(xr),vr(sn,js,Sn),Ss=nn[js],Ss!==0&&(xr-=Pn[js],mr(sn,xr,Ss)));while(Rr<sn.sym_next);vr(sn,Bt,or)},cr=(sn,or)=>{const Sn=or.dyn_tree,xr=or.stat_desc.static_tree,Pr=or.stat_desc.has_stree,Rr=or.stat_desc.elems;let js,Ss,yo=-1,ss;for(sn.heap_len=0,sn.heap_max=Pt,js=0;js<Rr;js++)Sn[js*2]!==0?(sn.heap[++sn.heap_len]=yo=js,sn.depth[js]=0):Sn[js*2+1]=0;for(;sn.heap_len<2;)ss=sn.heap[++sn.heap_len]=yo<2?++yo:0,Sn[ss*2]=1,sn.depth[ss]=0,sn.opt_len--,Pr&&(sn.static_len-=xr[ss*2+1]);for(or.max_code=yo,js=sn.heap_len>>1;js>=1;js--)Yr(sn,Sn,js);ss=Rr;do js=sn.heap[1],sn.heap[1]=sn.heap[sn.heap_len--],Yr(sn,Sn,1),Ss=sn.heap[1],sn.heap[--sn.heap_max]=js,sn.heap[--sn.heap_max]=Ss,Sn[ss*2]=Sn[js*2]+Sn[Ss*2],sn.depth[ss]=(sn.depth[js]>=sn.depth[Ss]?sn.depth[js]:sn.depth[Ss])+1,Sn[js*2+1]=Sn[Ss*2+1]=ss,sn.heap[1]=ss++,Yr(sn,Sn,1);while(sn.heap_len>=2);sn.heap[--sn.heap_max]=sn.heap[1],Mr(sn,or),Jn(Sn,yo,sn.bl_count)},Qn=(sn,or,Sn)=>{let xr,Pr=-1,Rr,js=or[0*2+1],Ss=0,yo=7,ss=4;for(js===0&&(yo=138,ss=3),or[(Sn+1)*2+1]=65535,xr=0;xr<=Sn;xr++)Rr=js,js=or[(xr+1)*2+1],!(++Ss<yo&&Rr===js)&&(Ss<ss?sn.bl_tree[Rr*2]+=Ss:Rr!==0?(Rr!==Pr&&sn.bl_tree[Rr*2]++,sn.bl_tree[Xt*2]++):Ss<=10?sn.bl_tree[Zt*2]++:sn.bl_tree[rn*2]++,Ss=0,Pr=Rr,js===0?(yo=138,ss=3):Rr===js?(yo=6,ss=3):(yo=7,ss=4))},_r=(sn,or,Sn)=>{let xr,Pr=-1,Rr,js=or[0*2+1],Ss=0,yo=7,ss=4;for(js===0&&(yo=138,ss=3),xr=0;xr<=Sn;xr++)if(Rr=js,js=or[(xr+1)*2+1],!(++Ss<yo&&Rr===js)){if(Ss<ss)do vr(sn,Rr,sn.bl_tree);while(--Ss!==0);else Rr!==0?(Rr!==Pr&&(vr(sn,Rr,sn.bl_tree),Ss--),vr(sn,Xt,sn.bl_tree),mr(sn,Ss-3,2)):Ss<=10?(vr(sn,Zt,sn.bl_tree),mr(sn,Ss-3,3)):(vr(sn,rn,sn.bl_tree),mr(sn,Ss-11,7));Ss=0,Pr=Rr,js===0?(yo=138,ss=3):Rr===js?(yo=6,ss=3):(yo=7,ss=4)}},Ir=sn=>{let or;for(Qn(sn,sn.dyn_ltree,sn.l_desc.max_code),Qn(sn,sn.dyn_dtree,sn.d_desc.max_code),cr(sn,sn.bl_desc),or=wt-1;or>=3&&sn.bl_tree[an[or]*2+1]===0;or--);return sn.opt_len+=3*(or+1)+5+5+4,or},pr=(sn,or,Sn,xr)=>{let Pr;for(mr(sn,or-257,5),mr(sn,Sn-1,5),mr(sn,xr-4,4),Pr=0;Pr<xr;Pr++)mr(sn,sn.bl_tree[an[Pr]*2+1],3);_r(sn,sn.dyn_ltree,or-1),_r(sn,sn.dyn_dtree,Sn-1)},Tr=sn=>{let or=4093624447,Sn;for(Sn=0;Sn<=31;Sn++,or>>>=1)if(or&1&&sn.dyn_ltree[Sn*2]!==0)return at;if(sn.dyn_ltree[9*2]!==0||sn.dyn_ltree[10*2]!==0||sn.dyn_ltree[13*2]!==0)return lt;for(Sn=32;Sn<$t;Sn++)if(sn.dyn_ltree[Sn*2]!==0)return lt;return at};let Wr=!1;const Kn=sn=>{Wr||(hr(),Wr=!0),sn.l_desc=new Wn(sn.dyn_ltree,Un),sn.d_desc=new Wn(sn.dyn_dtree,qn),sn.bl_desc=new Wn(sn.bl_tree,In),sn.bi_buf=0,sn.bi_valid=0,wr(sn)},rr=(sn,or,Sn,xr)=>{mr(sn,(vt<<1)+(xr?1:0),3),Nr(sn),fr(sn,Sn),fr(sn,~Sn),Sn&&sn.pending_buf.set(sn.window.subarray(or,or+Sn),sn.pending),sn.pending+=Sn},ur=sn=>{mr(sn,_t<<1,3),vr(sn,Bt,En),$r(sn)},Sr=(sn,or,Sn,xr)=>{let Pr,Rr,js=0;sn.level>0?(sn.strm.data_type===dt&&(sn.strm.data_type=Tr(sn)),cr(sn,sn.l_desc),cr(sn,sn.d_desc),js=Ir(sn),Pr=sn.opt_len+3+7>>>3,Rr=sn.static_len+3+7>>>3,Rr<=Pr&&(Pr=Rr)):Pr=Rr=Sn+5,Sn+4<=Pr&&or!==-1?rr(sn,or,Sn,xr):sn.strategy===st||Rr===Pr?(mr(sn,(_t<<1)+(xr?1:0),3),cs(sn,En,Cn)):(mr(sn,(bt<<1)+(xr?1:0),3),pr(sn,sn.l_desc.max_code+1,sn.d_desc.max_code+1,js+1),cs(sn,sn.dyn_ltree,sn.dyn_dtree)),wr(sn),xr&&Nr(sn)},gr=(sn,or,Sn)=>(sn.pending_buf[sn.sym_buf+sn.sym_next++]=or,sn.pending_buf[sn.sym_buf+sn.sym_next++]=or>>8,sn.pending_buf[sn.sym_buf+sn.sym_next++]=Sn,or===0?sn.dyn_ltree[Sn*2]++:(sn.matches++,or--,sn.dyn_ltree[(un[Sn]+$t+1)*2]++,sn.dyn_dtree[ar(or)*2]++),sn.sym_next===sn.sym_end);var Gr=Kn,jr=rr,er=Sr,yr=gr,Er=ur,Hr={_tr_init:Gr,_tr_stored_block:jr,_tr_flush_block:er,_tr_tally:yr,_tr_align:Er},Br=(sn,or,Sn,xr)=>{let Pr=sn&65535|0,Rr=sn>>>16&65535|0,js=0;for(;Sn!==0;){js=Sn>2e3?2e3:Sn,Sn-=js;do Pr=Pr+or[xr++]|0,Rr=Rr+Pr|0;while(--js);Pr%=65521,Rr%=65521}return Pr|Rr<<16|0};const Hn=()=>{let sn,or=[];for(var Sn=0;Sn<256;Sn++){sn=Sn;for(var xr=0;xr<8;xr++)sn=sn&1?3988292384^sn>>>1:sn>>>1;or[Sn]=sn}return or},kr=new Uint32Array(Hn());var Fn=(sn,or,Sn,xr)=>{const Pr=kr,Rr=xr+Sn;sn^=-1;for(let js=xr;js<Rr;js++)sn=sn>>>8^Pr[(sn^or[js])&255];return sn^-1},Ur={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:dr,_tr_stored_block:Cr,_tr_flush_block:hs,_tr_tally:ro,_tr_align:oo}=Hr,{Z_NO_FLUSH:ao,Z_PARTIAL_FLUSH:Uo,Z_FULL_FLUSH:gu,Z_FINISH:yl,Z_BLOCK:_l,Z_OK:Vo,Z_STREAM_END:uu,Z_STREAM_ERROR:Hl,Z_DATA_ERROR:Ku,Z_BUF_ERROR:ju,Z_DEFAULT_COMPRESSION:au,Z_FILTERED:ou,Z_HUFFMAN_ONLY:ru,Z_RLE:br,Z_FIXED:ls,Z_DEFAULT_STRATEGY:Ns,Z_UNKNOWN:$a,Z_DEFLATED:Ms}=Vr,io=9,lo=15,mo=8,ko=256+1+29,xo=30,Kl=19,Zl=2*ko+1,Jl=15,uo=3,vo=258,fo=vo+uo+1,Wl=32,Ko=42,vu=57,Lu=69,eu=73,op=91,lu=103,Tu=113,Xu=666,iu=1,_u=2,xp=3,bp=4,Wy=3,lp=(sn,or)=>(sn.msg=Ur[or],or),lm=sn=>sn*2-(sn>4?9:0),Yu=sn=>{let or=sn.length;for(;--or>=0;)sn[or]=0},Om=sn=>{let or,Sn,xr,Pr=sn.w_size;or=sn.hash_size,xr=or;do Sn=sn.head[--xr],sn.head[xr]=Sn>=Pr?Sn-Pr:0;while(--or);or=Pr,xr=or;do Sn=sn.prev[--xr],sn.prev[xr]=Sn>=Pr?Sn-Pr:0;while(--or)};let Mp=(sn,or,Sn)=>(or<<sn.hash_shift^Sn)&sn.hash_mask;const Du=sn=>{const or=sn.state;let Sn=or.pending;Sn>sn.avail_out&&(Sn=sn.avail_out),Sn!==0&&(sn.output.set(or.pending_buf.subarray(or.pending_out,or.pending_out+Sn),sn.next_out),sn.next_out+=Sn,or.pending_out+=Sn,sn.total_out+=Sn,sn.avail_out-=Sn,or.pending-=Sn,or.pending===0&&(or.pending_out=0))},Fu=(sn,or)=>{hs(sn,sn.block_start>=0?sn.block_start:-1,sn.strstart-sn.block_start,or),sn.block_start=sn.strstart,Du(sn.strm)},Vl=(sn,or)=>{sn.pending_buf[sn.pending++]=or},cm=(sn,or)=>{sn.pending_buf[sn.pending++]=or>>>8&255,sn.pending_buf[sn.pending++]=or&255},um=(sn,or,Sn,xr)=>{let Pr=sn.avail_in;return Pr>xr&&(Pr=xr),Pr===0?0:(sn.avail_in-=Pr,or.set(sn.input.subarray(sn.next_in,sn.next_in+Pr),Sn),sn.state.wrap===1?sn.adler=Br(sn.adler,or,Pr,Sn):sn.state.wrap===2&&(sn.adler=Fn(sn.adler,or,Pr,Sn)),sn.next_in+=Pr,sn.total_in+=Pr,Pr)},Xl=(sn,or)=>{let Sn=sn.max_chain_length,xr=sn.strstart,Pr,Rr,js=sn.prev_length,Ss=sn.nice_match;const yo=sn.strstart>sn.w_size-fo?sn.strstart-(sn.w_size-fo):0,ss=sn.window,Us=sn.w_mask,Yl=sn.prev,ho=sn.strstart+vo;let no=ss[xr+js-1],Wo=ss[xr+js];sn.prev_length>=sn.good_match&&(Sn>>=2),Ss>sn.lookahead&&(Ss=sn.lookahead);do if(Pr=or,!(ss[Pr+js]!==Wo||ss[Pr+js-1]!==no||ss[Pr]!==ss[xr]||ss[++Pr]!==ss[xr+1])){xr+=2,Pr++;do;while(ss[++xr]===ss[++Pr]&&ss[++xr]===ss[++Pr]&&ss[++xr]===ss[++Pr]&&ss[++xr]===ss[++Pr]&&ss[++xr]===ss[++Pr]&&ss[++xr]===ss[++Pr]&&ss[++xr]===ss[++Pr]&&ss[++xr]===ss[++Pr]&&xr<ho);if(Rr=vo-(ho-xr),xr=ho-vo,Rr>js){if(sn.match_start=or,js=Rr,Rr>=Ss)break;no=ss[xr+js-1],Wo=ss[xr+js]}}while((or=Yl[or&Us])>yo&&--Sn!==0);return js<=sn.lookahead?js:sn.lookahead},Dp=sn=>{const or=sn.w_size;let Sn,xr,Pr;do{if(xr=sn.window_size-sn.lookahead-sn.strstart,sn.strstart>=or+(or-fo)&&(sn.window.set(sn.window.subarray(or,or+or-xr),0),sn.match_start-=or,sn.strstart-=or,sn.block_start-=or,sn.insert>sn.strstart&&(sn.insert=sn.strstart),Om(sn),xr+=or),sn.strm.avail_in===0)break;if(Sn=um(sn.strm,sn.window,sn.strstart+sn.lookahead,xr),sn.lookahead+=Sn,sn.lookahead+sn.insert>=uo)for(Pr=sn.strstart-sn.insert,sn.ins_h=sn.window[Pr],sn.ins_h=Mp(sn,sn.ins_h,sn.window[Pr+1]);sn.insert&&(sn.ins_h=Mp(sn,sn.ins_h,sn.window[Pr+uo-1]),sn.prev[Pr&sn.w_mask]=sn.head[sn.ins_h],sn.head[sn.ins_h]=Pr,Pr++,sn.insert--,!(sn.lookahead+sn.insert<uo)););}while(sn.lookahead<fo&&sn.strm.avail_in!==0)},Lm=(sn,or)=>{let Sn=sn.pending_buf_size-5>sn.w_size?sn.w_size:sn.pending_buf_size-5,xr,Pr,Rr,js=0,Ss=sn.strm.avail_in;do{if(xr=65535,Rr=sn.bi_valid+42>>3,sn.strm.avail_out<Rr||(Rr=sn.strm.avail_out-Rr,Pr=sn.strstart-sn.block_start,xr>Pr+sn.strm.avail_in&&(xr=Pr+sn.strm.avail_in),xr>Rr&&(xr=Rr),xr<Sn&&(xr===0&&or!==yl||or===ao||xr!==Pr+sn.strm.avail_in)))break;js=or===yl&&xr===Pr+sn.strm.avail_in?1:0,Cr(sn,0,0,js),sn.pending_buf[sn.pending-4]=xr,sn.pending_buf[sn.pending-3]=xr>>8,sn.pending_buf[sn.pending-2]=~xr,sn.pending_buf[sn.pending-1]=~xr>>8,Du(sn.strm),Pr&&(Pr>xr&&(Pr=xr),sn.strm.output.set(sn.window.subarray(sn.block_start,sn.block_start+Pr),sn.strm.next_out),sn.strm.next_out+=Pr,sn.strm.avail_out-=Pr,sn.strm.total_out+=Pr,sn.block_start+=Pr,xr-=Pr),xr&&(um(sn.strm,sn.strm.output,sn.strm.next_out,xr),sn.strm.next_out+=xr,sn.strm.avail_out-=xr,sn.strm.total_out+=xr)}while(js===0);return Ss-=sn.strm.avail_in,Ss&&(Ss>=sn.w_size?(sn.matches=2,sn.window.set(sn.strm.input.subarray(sn.strm.next_in-sn.w_size,sn.strm.next_in),0),sn.strstart=sn.w_size,sn.insert=sn.strstart):(sn.window_size-sn.strstart<=Ss&&(sn.strstart-=sn.w_size,sn.window.set(sn.window.subarray(sn.w_size,sn.w_size+sn.strstart),0),sn.matches<2&&sn.matches++,sn.insert>sn.strstart&&(sn.insert=sn.strstart)),sn.window.set(sn.strm.input.subarray(sn.strm.next_in-Ss,sn.strm.next_in),sn.strstart),sn.strstart+=Ss,sn.insert+=Ss>sn.w_size-sn.insert?sn.w_size-sn.insert:Ss),sn.block_start=sn.strstart),sn.high_water<sn.strstart&&(sn.high_water=sn.strstart),js?bp:or!==ao&&or!==yl&&sn.strm.avail_in===0&&sn.strstart===sn.block_start?_u:(Rr=sn.window_size-sn.strstart,sn.strm.avail_in>Rr&&sn.block_start>=sn.w_size&&(sn.block_start-=sn.w_size,sn.strstart-=sn.w_size,sn.window.set(sn.window.subarray(sn.w_size,sn.w_size+sn.strstart),0),sn.matches<2&&sn.matches++,Rr+=sn.w_size,sn.insert>sn.strstart&&(sn.insert=sn.strstart)),Rr>sn.strm.avail_in&&(Rr=sn.strm.avail_in),Rr&&(um(sn.strm,sn.window,sn.strstart,Rr),sn.strstart+=Rr,sn.insert+=Rr>sn.w_size-sn.insert?sn.w_size-sn.insert:Rr),sn.high_water<sn.strstart&&(sn.high_water=sn.strstart),Rr=sn.bi_valid+42>>3,Rr=sn.pending_buf_size-Rr>65535?65535:sn.pending_buf_size-Rr,Sn=Rr>sn.w_size?sn.w_size:Rr,Pr=sn.strstart-sn.block_start,(Pr>=Sn||(Pr||or===yl)&&or!==ao&&sn.strm.avail_in===0&&Pr<=Rr)&&(xr=Pr>Rr?Rr:Pr,js=or===yl&&sn.strm.avail_in===0&&xr===Pr?1:0,Cr(sn,sn.block_start,xr,js),sn.block_start+=xr,Du(sn.strm)),js?xp:iu)},Dm=(sn,or)=>{let Sn,xr;for(;;){if(sn.lookahead<fo){if(Dp(sn),sn.lookahead<fo&&or===ao)return iu;if(sn.lookahead===0)break}if(Sn=0,sn.lookahead>=uo&&(sn.ins_h=Mp(sn,sn.ins_h,sn.window[sn.strstart+uo-1]),Sn=sn.prev[sn.strstart&sn.w_mask]=sn.head[sn.ins_h],sn.head[sn.ins_h]=sn.strstart),Sn!==0&&sn.strstart-Sn<=sn.w_size-fo&&(sn.match_length=Xl(sn,Sn)),sn.match_length>=uo)if(xr=ro(sn,sn.strstart-sn.match_start,sn.match_length-uo),sn.lookahead-=sn.match_length,sn.match_length<=sn.max_lazy_match&&sn.lookahead>=uo){sn.match_length--;do sn.strstart++,sn.ins_h=Mp(sn,sn.ins_h,sn.window[sn.strstart+uo-1]),Sn=sn.prev[sn.strstart&sn.w_mask]=sn.head[sn.ins_h],sn.head[sn.ins_h]=sn.strstart;while(--sn.match_length!==0);sn.strstart++}else sn.strstart+=sn.match_length,sn.match_length=0,sn.ins_h=sn.window[sn.strstart],sn.ins_h=Mp(sn,sn.ins_h,sn.window[sn.strstart+1]);else xr=ro(sn,0,sn.window[sn.strstart]),sn.lookahead--,sn.strstart++;if(xr&&(Fu(sn,!1),sn.strm.avail_out===0))return iu}return sn.insert=sn.strstart<uo-1?sn.strstart:uo-1,or===yl?(Fu(sn,!0),sn.strm.avail_out===0?xp:bp):sn.sym_next&&(Fu(sn,!1),sn.strm.avail_out===0)?iu:_u},Kp=(sn,or)=>{let Sn,xr,Pr;for(;;){if(sn.lookahead<fo){if(Dp(sn),sn.lookahead<fo&&or===ao)return iu;if(sn.lookahead===0)break}if(Sn=0,sn.lookahead>=uo&&(sn.ins_h=Mp(sn,sn.ins_h,sn.window[sn.strstart+uo-1]),Sn=sn.prev[sn.strstart&sn.w_mask]=sn.head[sn.ins_h],sn.head[sn.ins_h]=sn.strstart),sn.prev_length=sn.match_length,sn.prev_match=sn.match_start,sn.match_length=uo-1,Sn!==0&&sn.prev_length<sn.max_lazy_match&&sn.strstart-Sn<=sn.w_size-fo&&(sn.match_length=Xl(sn,Sn),sn.match_length<=5&&(sn.strategy===ou||sn.match_length===uo&&sn.strstart-sn.match_start>4096)&&(sn.match_length=uo-1)),sn.prev_length>=uo&&sn.match_length<=sn.prev_length){Pr=sn.strstart+sn.lookahead-uo,xr=ro(sn,sn.strstart-1-sn.prev_match,sn.prev_length-uo),sn.lookahead-=sn.prev_length-1,sn.prev_length-=2;do++sn.strstart<=Pr&&(sn.ins_h=Mp(sn,sn.ins_h,sn.window[sn.strstart+uo-1]),Sn=sn.prev[sn.strstart&sn.w_mask]=sn.head[sn.ins_h],sn.head[sn.ins_h]=sn.strstart);while(--sn.prev_length!==0);if(sn.match_available=0,sn.match_length=uo-1,sn.strstart++,xr&&(Fu(sn,!1),sn.strm.avail_out===0))return iu}else if(sn.match_available){if(xr=ro(sn,0,sn.window[sn.strstart-1]),xr&&Fu(sn,!1),sn.strstart++,sn.lookahead--,sn.strm.avail_out===0)return iu}else sn.match_available=1,sn.strstart++,sn.lookahead--}return sn.match_available&&(xr=ro(sn,0,sn.window[sn.strstart-1]),sn.match_available=0),sn.insert=sn.strstart<uo-1?sn.strstart:uo-1,or===yl?(Fu(sn,!0),sn.strm.avail_out===0?xp:bp):sn.sym_next&&(Fu(sn,!1),sn.strm.avail_out===0)?iu:_u},Hy=(sn,or)=>{let Sn,xr,Pr,Rr;const js=sn.window;for(;;){if(sn.lookahead<=vo){if(Dp(sn),sn.lookahead<=vo&&or===ao)return iu;if(sn.lookahead===0)break}if(sn.match_length=0,sn.lookahead>=uo&&sn.strstart>0&&(Pr=sn.strstart-1,xr=js[Pr],xr===js[++Pr]&&xr===js[++Pr]&&xr===js[++Pr])){Rr=sn.strstart+vo;do;while(xr===js[++Pr]&&xr===js[++Pr]&&xr===js[++Pr]&&xr===js[++Pr]&&xr===js[++Pr]&&xr===js[++Pr]&&xr===js[++Pr]&&xr===js[++Pr]&&Pr<Rr);sn.match_length=vo-(Rr-Pr),sn.match_length>sn.lookahead&&(sn.match_length=sn.lookahead)}if(sn.match_length>=uo?(Sn=ro(sn,1,sn.match_length-uo),sn.lookahead-=sn.match_length,sn.strstart+=sn.match_length,sn.match_length=0):(Sn=ro(sn,0,sn.window[sn.strstart]),sn.lookahead--,sn.strstart++),Sn&&(Fu(sn,!1),sn.strm.avail_out===0))return iu}return sn.insert=0,or===yl?(Fu(sn,!0),sn.strm.avail_out===0?xp:bp):sn.sym_next&&(Fu(sn,!1),sn.strm.avail_out===0)?iu:_u},Su=(sn,or)=>{let Sn;for(;;){if(sn.lookahead===0&&(Dp(sn),sn.lookahead===0)){if(or===ao)return iu;break}if(sn.match_length=0,Sn=ro(sn,0,sn.window[sn.strstart]),sn.lookahead--,sn.strstart++,Sn&&(Fu(sn,!1),sn.strm.avail_out===0))return iu}return sn.insert=0,or===yl?(Fu(sn,!0),sn.strm.avail_out===0?xp:bp):sn.sym_next&&(Fu(sn,!1),sn.strm.avail_out===0)?iu:_u};function qu(sn,or,Sn,xr,Pr){this.good_length=sn,this.max_lazy=or,this.nice_length=Sn,this.max_chain=xr,this.func=Pr}const dm=[new qu(0,0,0,0,Lm),new qu(4,4,8,4,Dm),new qu(4,5,16,8,Dm),new qu(4,6,32,32,Dm),new qu(4,4,16,16,Kp),new qu(8,16,32,32,Kp),new qu(8,16,128,128,Kp),new qu(8,32,128,256,Kp),new qu(32,128,258,1024,Kp),new qu(32,258,258,4096,Kp)],u0=sn=>{sn.window_size=2*sn.w_size,Yu(sn.head),sn.max_lazy_match=dm[sn.level].max_lazy,sn.good_match=dm[sn.level].good_length,sn.nice_match=dm[sn.level].nice_length,sn.max_chain_length=dm[sn.level].max_chain,sn.strstart=0,sn.block_start=0,sn.lookahead=0,sn.insert=0,sn.match_length=sn.prev_length=uo-1,sn.match_available=0,sn.ins_h=0};function Ky(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ms,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Zl*2),this.dyn_dtree=new Uint16Array((2*xo+1)*2),this.bl_tree=new Uint16Array((2*Kl+1)*2),Yu(this.dyn_ltree),Yu(this.dyn_dtree),Yu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Jl+1),this.heap=new Uint16Array(2*ko+1),Yu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ko+1),Yu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Tp=sn=>{if(!sn)return 1;const or=sn.state;return!or||or.strm!==sn||or.status!==Ko&&or.status!==vu&&or.status!==Lu&&or.status!==eu&&or.status!==op&&or.status!==lu&&or.status!==Tu&&or.status!==Xu?1:0},tp=sn=>{if(Tp(sn))return lp(sn,Hl);sn.total_in=sn.total_out=0,sn.data_type=$a;const or=sn.state;return or.pending=0,or.pending_out=0,or.wrap<0&&(or.wrap=-or.wrap),or.status=or.wrap===2?vu:or.wrap?Ko:Tu,sn.adler=or.wrap===2?0:1,or.last_flush=-2,dr(or),Vo},Z0=sn=>{const or=tp(sn);return or===Vo&&u0(sn.state),or},Xy=(sn,or)=>Tp(sn)||sn.state.wrap!==2?Hl:(sn.state.gzhead=or,Vo),np=(sn,or,Sn,xr,Pr,Rr)=>{if(!sn)return Hl;let js=1;if(or===au&&(or=6),xr<0?(js=0,xr=-xr):xr>15&&(js=2,xr-=16),Pr<1||Pr>io||Sn!==Ms||xr<8||xr>15||or<0||or>9||Rr<0||Rr>ls||xr===8&&js!==1)return lp(sn,Hl);xr===8&&(xr=9);const Ss=new Ky;return sn.state=Ss,Ss.strm=sn,Ss.status=Ko,Ss.wrap=js,Ss.gzhead=null,Ss.w_bits=xr,Ss.w_size=1<<Ss.w_bits,Ss.w_mask=Ss.w_size-1,Ss.hash_bits=Pr+7,Ss.hash_size=1<<Ss.hash_bits,Ss.hash_mask=Ss.hash_size-1,Ss.hash_shift=~~((Ss.hash_bits+uo-1)/uo),Ss.window=new Uint8Array(Ss.w_size*2),Ss.head=new Uint16Array(Ss.hash_size),Ss.prev=new Uint16Array(Ss.w_size),Ss.lit_bufsize=1<<Pr+6,Ss.pending_buf_size=Ss.lit_bufsize*4,Ss.pending_buf=new Uint8Array(Ss.pending_buf_size),Ss.sym_buf=Ss.lit_bufsize,Ss.sym_end=(Ss.lit_bufsize-1)*3,Ss.level=or,Ss.strategy=Rr,Ss.method=Sn,Z0(sn)},Sp=(sn,or)=>np(sn,or,Ms,lo,mo,Ns),Fm=(sn,or)=>{if(Tp(sn)||or>_l||or<0)return sn?lp(sn,Hl):Hl;const Sn=sn.state;if(!sn.output||sn.avail_in!==0&&!sn.input||Sn.status===Xu&&or!==yl)return lp(sn,sn.avail_out===0?ju:Hl);const xr=Sn.last_flush;if(Sn.last_flush=or,Sn.pending!==0){if(Du(sn),sn.avail_out===0)return Sn.last_flush=-1,Vo}else if(sn.avail_in===0&&lm(or)<=lm(xr)&&or!==yl)return lp(sn,ju);if(Sn.status===Xu&&sn.avail_in!==0)return lp(sn,ju);if(Sn.status===Ko&&Sn.wrap===0&&(Sn.status=Tu),Sn.status===Ko){let Pr=Ms+(Sn.w_bits-8<<4)<<8,Rr=-1;if(Sn.strategy>=ru||Sn.level<2?Rr=0:Sn.level<6?Rr=1:Sn.level===6?Rr=2:Rr=3,Pr|=Rr<<6,Sn.strstart!==0&&(Pr|=Wl),Pr+=31-Pr%31,cm(Sn,Pr),Sn.strstart!==0&&(cm(Sn,sn.adler>>>16),cm(Sn,sn.adler&65535)),sn.adler=1,Sn.status=Tu,Du(sn),Sn.pending!==0)return Sn.last_flush=-1,Vo}if(Sn.status===vu){if(sn.adler=0,Vl(Sn,31),Vl(Sn,139),Vl(Sn,8),Sn.gzhead)Vl(Sn,(Sn.gzhead.text?1:0)+(Sn.gzhead.hcrc?2:0)+(Sn.gzhead.extra?4:0)+(Sn.gzhead.name?8:0)+(Sn.gzhead.comment?16:0)),Vl(Sn,Sn.gzhead.time&255),Vl(Sn,Sn.gzhead.time>>8&255),Vl(Sn,Sn.gzhead.time>>16&255),Vl(Sn,Sn.gzhead.time>>24&255),Vl(Sn,Sn.level===9?2:Sn.strategy>=ru||Sn.level<2?4:0),Vl(Sn,Sn.gzhead.os&255),Sn.gzhead.extra&&Sn.gzhead.extra.length&&(Vl(Sn,Sn.gzhead.extra.length&255),Vl(Sn,Sn.gzhead.extra.length>>8&255)),Sn.gzhead.hcrc&&(sn.adler=Fn(sn.adler,Sn.pending_buf,Sn.pending,0)),Sn.gzindex=0,Sn.status=Lu;else if(Vl(Sn,0),Vl(Sn,0),Vl(Sn,0),Vl(Sn,0),Vl(Sn,0),Vl(Sn,Sn.level===9?2:Sn.strategy>=ru||Sn.level<2?4:0),Vl(Sn,Wy),Sn.status=Tu,Du(sn),Sn.pending!==0)return Sn.last_flush=-1,Vo}if(Sn.status===Lu){if(Sn.gzhead.extra){let Pr=Sn.pending,Rr=(Sn.gzhead.extra.length&65535)-Sn.gzindex;for(;Sn.pending+Rr>Sn.pending_buf_size;){let Ss=Sn.pending_buf_size-Sn.pending;if(Sn.pending_buf.set(Sn.gzhead.extra.subarray(Sn.gzindex,Sn.gzindex+Ss),Sn.pending),Sn.pending=Sn.pending_buf_size,Sn.gzhead.hcrc&&Sn.pending>Pr&&(sn.adler=Fn(sn.adler,Sn.pending_buf,Sn.pending-Pr,Pr)),Sn.gzindex+=Ss,Du(sn),Sn.pending!==0)return Sn.last_flush=-1,Vo;Pr=0,Rr-=Ss}let js=new Uint8Array(Sn.gzhead.extra);Sn.pending_buf.set(js.subarray(Sn.gzindex,Sn.gzindex+Rr),Sn.pending),Sn.pending+=Rr,Sn.gzhead.hcrc&&Sn.pending>Pr&&(sn.adler=Fn(sn.adler,Sn.pending_buf,Sn.pending-Pr,Pr)),Sn.gzindex=0}Sn.status=eu}if(Sn.status===eu){if(Sn.gzhead.name){let Pr=Sn.pending,Rr;do{if(Sn.pending===Sn.pending_buf_size){if(Sn.gzhead.hcrc&&Sn.pending>Pr&&(sn.adler=Fn(sn.adler,Sn.pending_buf,Sn.pending-Pr,Pr)),Du(sn),Sn.pending!==0)return Sn.last_flush=-1,Vo;Pr=0}Sn.gzindex<Sn.gzhead.name.length?Rr=Sn.gzhead.name.charCodeAt(Sn.gzindex++)&255:Rr=0,Vl(Sn,Rr)}while(Rr!==0);Sn.gzhead.hcrc&&Sn.pending>Pr&&(sn.adler=Fn(sn.adler,Sn.pending_buf,Sn.pending-Pr,Pr)),Sn.gzindex=0}Sn.status=op}if(Sn.status===op){if(Sn.gzhead.comment){let Pr=Sn.pending,Rr;do{if(Sn.pending===Sn.pending_buf_size){if(Sn.gzhead.hcrc&&Sn.pending>Pr&&(sn.adler=Fn(sn.adler,Sn.pending_buf,Sn.pending-Pr,Pr)),Du(sn),Sn.pending!==0)return Sn.last_flush=-1,Vo;Pr=0}Sn.gzindex<Sn.gzhead.comment.length?Rr=Sn.gzhead.comment.charCodeAt(Sn.gzindex++)&255:Rr=0,Vl(Sn,Rr)}while(Rr!==0);Sn.gzhead.hcrc&&Sn.pending>Pr&&(sn.adler=Fn(sn.adler,Sn.pending_buf,Sn.pending-Pr,Pr))}Sn.status=lu}if(Sn.status===lu){if(Sn.gzhead.hcrc){if(Sn.pending+2>Sn.pending_buf_size&&(Du(sn),Sn.pending!==0))return Sn.last_flush=-1,Vo;Vl(Sn,sn.adler&255),Vl(Sn,sn.adler>>8&255),sn.adler=0}if(Sn.status=Tu,Du(sn),Sn.pending!==0)return Sn.last_flush=-1,Vo}if(sn.avail_in!==0||Sn.lookahead!==0||or!==ao&&Sn.status!==Xu){let Pr=Sn.level===0?Lm(Sn,or):Sn.strategy===ru?Su(Sn,or):Sn.strategy===br?Hy(Sn,or):dm[Sn.level].func(Sn,or);if((Pr===xp||Pr===bp)&&(Sn.status=Xu),Pr===iu||Pr===xp)return sn.avail_out===0&&(Sn.last_flush=-1),Vo;if(Pr===_u&&(or===Uo?oo(Sn):or!==_l&&(Cr(Sn,0,0,!1),or===gu&&(Yu(Sn.head),Sn.lookahead===0&&(Sn.strstart=0,Sn.block_start=0,Sn.insert=0))),Du(sn),sn.avail_out===0))return Sn.last_flush=-1,Vo}return or!==yl?Vo:Sn.wrap<=0?uu:(Sn.wrap===2?(Vl(Sn,sn.adler&255),Vl(Sn,sn.adler>>8&255),Vl(Sn,sn.adler>>16&255),Vl(Sn,sn.adler>>24&255),Vl(Sn,sn.total_in&255),Vl(Sn,sn.total_in>>8&255),Vl(Sn,sn.total_in>>16&255),Vl(Sn,sn.total_in>>24&255)):(cm(Sn,sn.adler>>>16),cm(Sn,sn.adler&65535)),Du(sn),Sn.wrap>0&&(Sn.wrap=-Sn.wrap),Sn.pending!==0?Vo:uu)},d0=sn=>{if(Tp(sn))return Hl;const or=sn.state.status;return sn.state=null,or===Tu?lp(sn,Ku):Vo},J0=(sn,or)=>{let Sn=or.length;if(Tp(sn))return Hl;const xr=sn.state,Pr=xr.wrap;if(Pr===2||Pr===1&&xr.status!==Ko||xr.lookahead)return Hl;if(Pr===1&&(sn.adler=Br(sn.adler,or,Sn,0)),xr.wrap=0,Sn>=xr.w_size){Pr===0&&(Yu(xr.head),xr.strstart=0,xr.block_start=0,xr.insert=0);let yo=new Uint8Array(xr.w_size);yo.set(or.subarray(Sn-xr.w_size,Sn),0),or=yo,Sn=xr.w_size}const Rr=sn.avail_in,js=sn.next_in,Ss=sn.input;for(sn.avail_in=Sn,sn.next_in=0,sn.input=or,Dp(xr);xr.lookahead>=uo;){let yo=xr.strstart,ss=xr.lookahead-(uo-1);do xr.ins_h=Mp(xr,xr.ins_h,xr.window[yo+uo-1]),xr.prev[yo&xr.w_mask]=xr.head[xr.ins_h],xr.head[xr.ins_h]=yo,yo++;while(--ss);xr.strstart=yo,xr.lookahead=uo-1,Dp(xr)}return xr.strstart+=xr.lookahead,xr.block_start=xr.strstart,xr.insert=xr.lookahead,xr.lookahead=0,xr.match_length=xr.prev_length=uo-1,xr.match_available=0,sn.next_in=js,sn.input=Ss,sn.avail_in=Rr,xr.wrap=Pr,Vo};var Yy=Sp,cp=np,qy=Z0,km=tp,Zy=Xy,rp=Fm,Nm=d0,Bm=J0,Xp="pako deflate (from Nodeca project)",Fp={deflateInit:Yy,deflateInit2:cp,deflateReset:qy,deflateResetKeep:km,deflateSetHeader:Zy,deflate:rp,deflateEnd:Nm,deflateSetDictionary:Bm,deflateInfo:Xp};const f0=(sn,or)=>Object.prototype.hasOwnProperty.call(sn,or);var Q0=function(sn){const or=Array.prototype.slice.call(arguments,1);for(;or.length;){const Sn=or.shift();if(Sn){if(typeof Sn!="object")throw new TypeError(Sn+"must be non-object");for(const xr in Sn)f0(Sn,xr)&&(sn[xr]=Sn[xr])}}return sn},h0=sn=>{let or=0;for(let xr=0,Pr=sn.length;xr<Pr;xr++)or+=sn[xr].length;const Sn=new Uint8Array(or);for(let xr=0,Pr=0,Rr=sn.length;xr<Rr;xr++){let js=sn[xr];Sn.set(js,Pr),Pr+=js.length}return Sn},Yp={assign:Q0,flattenChunks:h0};let kp=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{kp=!1}const Pu=new Uint8Array(256);for(let sn=0;sn<256;sn++)Pu[sn]=sn>=252?6:sn>=248?5:sn>=240?4:sn>=224?3:sn>=192?2:1;Pu[254]=Pu[254]=1;var up=sn=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(sn);let or,Sn,xr,Pr,Rr,js=sn.length,Ss=0;for(Pr=0;Pr<js;Pr++)Sn=sn.charCodeAt(Pr),(Sn&64512)===55296&&Pr+1<js&&(xr=sn.charCodeAt(Pr+1),(xr&64512)===56320&&(Sn=65536+(Sn-55296<<10)+(xr-56320),Pr++)),Ss+=Sn<128?1:Sn<2048?2:Sn<65536?3:4;for(or=new Uint8Array(Ss),Rr=0,Pr=0;Rr<Ss;Pr++)Sn=sn.charCodeAt(Pr),(Sn&64512)===55296&&Pr+1<js&&(xr=sn.charCodeAt(Pr+1),(xr&64512)===56320&&(Sn=65536+(Sn-55296<<10)+(xr-56320),Pr++)),Sn<128?or[Rr++]=Sn:Sn<2048?(or[Rr++]=192|Sn>>>6,or[Rr++]=128|Sn&63):Sn<65536?(or[Rr++]=224|Sn>>>12,or[Rr++]=128|Sn>>>6&63,or[Rr++]=128|Sn&63):(or[Rr++]=240|Sn>>>18,or[Rr++]=128|Sn>>>12&63,or[Rr++]=128|Sn>>>6&63,or[Rr++]=128|Sn&63);return or};const Ap=(sn,or)=>{if(or<65534&&sn.subarray&&kp)return String.fromCharCode.apply(null,sn.length===or?sn:sn.subarray(0,or));let Sn="";for(let xr=0;xr<or;xr++)Sn+=String.fromCharCode(sn[xr]);return Sn};var p0=(sn,or)=>{const Sn=or||sn.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(sn.subarray(0,or));let xr,Pr;const Rr=new Array(Sn*2);for(Pr=0,xr=0;xr<Sn;){let js=sn[xr++];if(js<128){Rr[Pr++]=js;continue}let Ss=Pu[js];if(Ss>4){Rr[Pr++]=65533,xr+=Ss-1;continue}for(js&=Ss===2?31:Ss===3?15:7;Ss>1&&xr<Sn;)js=js<<6|sn[xr++]&63,Ss--;if(Ss>1){Rr[Pr++]=65533;continue}js<65536?Rr[Pr++]=js:(js-=65536,Rr[Pr++]=55296|js>>10&1023,Rr[Pr++]=56320|js&1023)}return Ap(Rr,Pr)},ey=(sn,or)=>{or=or||sn.length,or>sn.length&&(or=sn.length);let Sn=or-1;for(;Sn>=0&&(sn[Sn]&192)===128;)Sn--;return Sn<0||Sn===0?or:Sn+Pu[sn[Sn]]>or?Sn:or},Vu={string2buf:up,buf2string:p0,utf8border:ey};function Rp(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var fm=Rp;const m0=Object.prototype.toString,{Z_NO_FLUSH:Um,Z_SYNC_FLUSH:ty,Z_FULL_FLUSH:ny,Z_FINISH:g0,Z_OK:Np,Z_STREAM_END:ry,Z_DEFAULT_COMPRESSION:iy,Z_DEFAULT_STRATEGY:sy,Z_DEFLATED:y0}=Vr;function dp(sn){this.options=Yp.assign({level:iy,method:y0,chunkSize:16384,windowBits:15,memLevel:8,strategy:sy},sn||{});let or=this.options;or.raw&&or.windowBits>0?or.windowBits=-or.windowBits:or.gzip&&or.windowBits>0&&or.windowBits<16&&(or.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fm,this.strm.avail_out=0;let Sn=Fp.deflateInit2(this.strm,or.level,or.method,or.windowBits,or.memLevel,or.strategy);if(Sn!==Np)throw new Error(Ur[Sn]);if(or.header&&Fp.deflateSetHeader(this.strm,or.header),or.dictionary){let xr;if(typeof or.dictionary=="string"?xr=Vu.string2buf(or.dictionary):m0.call(or.dictionary)==="[object ArrayBuffer]"?xr=new Uint8Array(or.dictionary):xr=or.dictionary,Sn=Fp.deflateSetDictionary(this.strm,xr),Sn!==Np)throw new Error(Ur[Sn]);this._dict_set=!0}}dp.prototype.push=function(sn,or){const Sn=this.strm,xr=this.options.chunkSize;let Pr,Rr;if(this.ended)return!1;for(or===~~or?Rr=or:Rr=or===!0?g0:Um,typeof sn=="string"?Sn.input=Vu.string2buf(sn):m0.call(sn)==="[object ArrayBuffer]"?Sn.input=new Uint8Array(sn):Sn.input=sn,Sn.next_in=0,Sn.avail_in=Sn.input.length;;){if(Sn.avail_out===0&&(Sn.output=new Uint8Array(xr),Sn.next_out=0,Sn.avail_out=xr),(Rr===ty||Rr===ny)&&Sn.avail_out<=6){this.onData(Sn.output.subarray(0,Sn.next_out)),Sn.avail_out=0;continue}if(Pr=Fp.deflate(Sn,Rr),Pr===ry)return Sn.next_out>0&&this.onData(Sn.output.subarray(0,Sn.next_out)),Pr=Fp.deflateEnd(this.strm),this.onEnd(Pr),this.ended=!0,Pr===Np;if(Sn.avail_out===0){this.onData(Sn.output);continue}if(Rr>0&&Sn.next_out>0){this.onData(Sn.output.subarray(0,Sn.next_out)),Sn.avail_out=0;continue}if(Sn.avail_in===0)break}return!0},dp.prototype.onData=function(sn){this.chunks.push(sn)},dp.prototype.onEnd=function(sn){sn===Np&&(this.result=Yp.flattenChunks(this.chunks)),this.chunks=[],this.err=sn,this.msg=this.strm.msg};function $p(sn,or){const Sn=new dp(or);if(Sn.push(sn,!0),Sn.err)throw Sn.msg||Ur[Sn.err];return Sn.result}function zm(sn,or){return or=or||{},or.raw=!0,$p(sn,or)}function jm(sn,or){return or=or||{},or.gzip=!0,$p(sn,or)}var Zu=dp,Ju=$p,Bp=zm,Ep=jm,wp=Vr,Up={Deflate:Zu,deflate:Ju,deflateRaw:Bp,gzip:Ep,constants:wp};const hm=16209,v0=16191;var _0=function(or,Sn){let xr,Pr,Rr,js,Ss,yo,ss,Us,Yl,ho,no,Wo,mu,jl,xl,Ql,Ll,co,_c,wu,Ho,su,Gl,Jo;const Dl=or.state;xr=or.next_in,Gl=or.input,Pr=xr+(or.avail_in-5),Rr=or.next_out,Jo=or.output,js=Rr-(Sn-or.avail_out),Ss=Rr+(or.avail_out-257),yo=Dl.dmax,ss=Dl.wsize,Us=Dl.whave,Yl=Dl.wnext,ho=Dl.window,no=Dl.hold,Wo=Dl.bits,mu=Dl.lencode,jl=Dl.distcode,xl=(1<<Dl.lenbits)-1,Ql=(1<<Dl.distbits)-1;e:do{Wo<15&&(no+=Gl[xr++]<<Wo,Wo+=8,no+=Gl[xr++]<<Wo,Wo+=8),Ll=mu[no&xl];t:for(;;){if(co=Ll>>>24,no>>>=co,Wo-=co,co=Ll>>>16&255,co===0)Jo[Rr++]=Ll&65535;else if(co&16){_c=Ll&65535,co&=15,co&&(Wo<co&&(no+=Gl[xr++]<<Wo,Wo+=8),_c+=no&(1<<co)-1,no>>>=co,Wo-=co),Wo<15&&(no+=Gl[xr++]<<Wo,Wo+=8,no+=Gl[xr++]<<Wo,Wo+=8),Ll=jl[no&Ql];n:for(;;){if(co=Ll>>>24,no>>>=co,Wo-=co,co=Ll>>>16&255,co&16){if(wu=Ll&65535,co&=15,Wo<co&&(no+=Gl[xr++]<<Wo,Wo+=8,Wo<co&&(no+=Gl[xr++]<<Wo,Wo+=8)),wu+=no&(1<<co)-1,wu>yo){or.msg="invalid distance too far back",Dl.mode=hm;break e}if(no>>>=co,Wo-=co,co=Rr-js,wu>co){if(co=wu-co,co>Us&&Dl.sane){or.msg="invalid distance too far back",Dl.mode=hm;break e}if(Ho=0,su=ho,Yl===0){if(Ho+=ss-co,co<_c){_c-=co;do Jo[Rr++]=ho[Ho++];while(--co);Ho=Rr-wu,su=Jo}}else if(Yl<co){if(Ho+=ss+Yl-co,co-=Yl,co<_c){_c-=co;do Jo[Rr++]=ho[Ho++];while(--co);if(Ho=0,Yl<_c){co=Yl,_c-=co;do Jo[Rr++]=ho[Ho++];while(--co);Ho=Rr-wu,su=Jo}}}else if(Ho+=Yl-co,co<_c){_c-=co;do Jo[Rr++]=ho[Ho++];while(--co);Ho=Rr-wu,su=Jo}for(;_c>2;)Jo[Rr++]=su[Ho++],Jo[Rr++]=su[Ho++],Jo[Rr++]=su[Ho++],_c-=3;_c&&(Jo[Rr++]=su[Ho++],_c>1&&(Jo[Rr++]=su[Ho++]))}else{Ho=Rr-wu;do Jo[Rr++]=Jo[Ho++],Jo[Rr++]=Jo[Ho++],Jo[Rr++]=Jo[Ho++],_c-=3;while(_c>2);_c&&(Jo[Rr++]=Jo[Ho++],_c>1&&(Jo[Rr++]=Jo[Ho++]))}}else if(co&64){or.msg="invalid distance code",Dl.mode=hm;break e}else{Ll=jl[(Ll&65535)+(no&(1<<co)-1)];continue n}break}}else if(co&64)if(co&32){Dl.mode=v0;break e}else{or.msg="invalid literal/length code",Dl.mode=hm;break e}else{Ll=mu[(Ll&65535)+(no&(1<<co)-1)];continue t}break}}while(xr<Pr&&Rr<Ss);_c=Wo>>3,xr-=_c,Wo-=_c<<3,no&=(1<<Wo)-1,or.next_in=xr,or.next_out=Rr,or.avail_in=xr<Pr?5+(Pr-xr):5-(xr-Pr),or.avail_out=Rr<Ss?257+(Ss-Rr):257-(Rr-Ss),Dl.hold=no,Dl.bits=Wo};const Eu=15,Uu=852,du=592,qp=0,Gu=1,x0=2,ay=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),b0=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),S0=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),oy=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var fp=(sn,or,Sn,xr,Pr,Rr,js,Ss)=>{const yo=Ss.bits;let ss=0,Us=0,Yl=0,ho=0,no=0,Wo=0,mu=0,jl=0,xl=0,Ql=0,Ll,co,_c,wu,Ho,su=null,Gl;const Jo=new Uint16Array(Eu+1),Dl=new Uint16Array(Eu+1);let gp=null,Am,Wp,Hp;for(ss=0;ss<=Eu;ss++)Jo[ss]=0;for(Us=0;Us<xr;Us++)Jo[or[Sn+Us]]++;for(no=yo,ho=Eu;ho>=1&&Jo[ho]===0;ho--);if(no>ho&&(no=ho),ho===0)return Pr[Rr++]=1<<24|64<<16|0,Pr[Rr++]=1<<24|64<<16|0,Ss.bits=1,0;for(Yl=1;Yl<ho&&Jo[Yl]===0;Yl++);for(no<Yl&&(no=Yl),jl=1,ss=1;ss<=Eu;ss++)if(jl<<=1,jl-=Jo[ss],jl<0)return-1;if(jl>0&&(sn===qp||ho!==1))return-1;for(Dl[1]=0,ss=1;ss<Eu;ss++)Dl[ss+1]=Dl[ss]+Jo[ss];for(Us=0;Us<xr;Us++)or[Sn+Us]!==0&&(js[Dl[or[Sn+Us]]++]=Us);if(sn===qp?(su=gp=js,Gl=20):sn===Gu?(su=ay,gp=b0,Gl=257):(su=S0,gp=oy,Gl=0),Ql=0,Us=0,ss=Yl,Ho=Rr,Wo=no,mu=0,_c=-1,xl=1<<no,wu=xl-1,sn===Gu&&xl>Uu||sn===x0&&xl>du)return 1;for(;;){Am=ss-mu,js[Us]+1<Gl?(Wp=0,Hp=js[Us]):js[Us]>=Gl?(Wp=gp[js[Us]-Gl],Hp=su[js[Us]-Gl]):(Wp=96,Hp=0),Ll=1<<ss-mu,co=1<<Wo,Yl=co;do co-=Ll,Pr[Ho+(Ql>>mu)+co]=Am<<24|Wp<<16|Hp|0;while(co!==0);for(Ll=1<<ss-1;Ql&Ll;)Ll>>=1;if(Ll!==0?(Ql&=Ll-1,Ql+=Ll):Ql=0,Us++,--Jo[ss]===0){if(ss===ho)break;ss=or[Sn+js[Us]]}if(ss>no&&(Ql&wu)!==_c){for(mu===0&&(mu=no),Ho+=Yl,Wo=ss-mu,jl=1<<Wo;Wo+mu<ho&&(jl-=Jo[Wo+mu],!(jl<=0));)Wo++,jl<<=1;if(xl+=1<<Wo,sn===Gu&&xl>Uu||sn===x0&&xl>du)return 1;_c=Ql&wu,Pr[_c]=no<<24|Wo<<16|Ho-Rr|0}}return Ql!==0&&(Pr[Ho+Ql]=ss-mu<<24|64<<16|0),Ss.bits=no,0};const E0=0,Zp=1,pm=2,{Z_FINISH:w0,Z_BLOCK:ly,Z_TREES:Cp,Z_OK:Pp,Z_STREAM_END:mm,Z_NEED_DICT:Qu,Z_STREAM_ERROR:Iu,Z_DATA_ERROR:zp,Z_MEM_ERROR:ip,Z_BUF_ERROR:C0,Z_DEFLATED:jp}=Vr,gm=16180,Gm=16181,pu=16182,ym=16183,Wm=16184,Hm=16185,vm=16186,Wu=16187,Vp=16188,yu=16189,xu=16190,cu=16191,Jp=16192,Qp=16193,Gp=16194,cy=16195,Au=16196,Km=16197,Xm=16198,em=16199,_d=16200,sp=16201,Ip=16202,_m=16203,xm=16204,M0=16205,Ym=16206,T0=16207,A0=16208,fu=16209,R0=16210,qm=16211,bm=852,uy=592,Zm=15,Jm=sn=>(sn>>>24&255)+(sn>>>8&65280)+((sn&65280)<<8)+((sn&255)<<24);function Sm(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Op=sn=>{if(!sn)return 1;const or=sn.state;return!or||or.strm!==sn||or.mode<gm||or.mode>qm?1:0},P0=sn=>{if(Op(sn))return Iu;const or=sn.state;return sn.total_in=sn.total_out=or.total=0,sn.msg="",or.wrap&&(sn.adler=or.wrap&1),or.mode=gm,or.last=0,or.havedict=0,or.flags=-1,or.dmax=32768,or.head=null,or.hold=0,or.bits=0,or.lencode=or.lendyn=new Int32Array(bm),or.distcode=or.distdyn=new Int32Array(uy),or.sane=1,or.back=-1,Pp},I0=sn=>{if(Op(sn))return Iu;const or=sn.state;return or.wsize=0,or.whave=0,or.wnext=0,P0(sn)},O0=(sn,or)=>{let Sn;if(Op(sn))return Iu;const xr=sn.state;return or<0?(Sn=0,or=-or):(Sn=(or>>4)+5,or<48&&(or&=15)),or&&(or<8||or>15)?Iu:(xr.window!==null&&xr.wbits!==or&&(xr.window=null),xr.wrap=Sn,xr.wbits=or,I0(sn))},Qm=(sn,or)=>{if(!sn)return Iu;const Sn=new Sm;sn.state=Sn,Sn.strm=sn,Sn.window=null,Sn.mode=gm;const xr=O0(sn,or);return xr!==Pp&&(sn.state=null),xr},dy=sn=>Qm(sn,Zm);let L0=!0,D0,_g;const Jy=sn=>{if(L0){D0=new Int32Array(512),_g=new Int32Array(32);let or=0;for(;or<144;)sn.lens[or++]=8;for(;or<256;)sn.lens[or++]=9;for(;or<280;)sn.lens[or++]=7;for(;or<288;)sn.lens[or++]=8;for(fp(Zp,sn.lens,0,288,D0,0,sn.work,{bits:9}),or=0;or<32;)sn.lens[or++]=5;fp(pm,sn.lens,0,32,_g,0,sn.work,{bits:5}),L0=!1}sn.lencode=D0,sn.lenbits=9,sn.distcode=_g,sn.distbits=5},fy=(sn,or,Sn,xr)=>{let Pr;const Rr=sn.state;return Rr.window===null&&(Rr.wsize=1<<Rr.wbits,Rr.wnext=0,Rr.whave=0,Rr.window=new Uint8Array(Rr.wsize)),xr>=Rr.wsize?(Rr.window.set(or.subarray(Sn-Rr.wsize,Sn),0),Rr.wnext=0,Rr.whave=Rr.wsize):(Pr=Rr.wsize-Rr.wnext,Pr>xr&&(Pr=xr),Rr.window.set(or.subarray(Sn-xr,Sn-xr+Pr),Rr.wnext),xr-=Pr,xr?(Rr.window.set(or.subarray(Sn-xr,Sn),0),Rr.wnext=xr,Rr.whave=Rr.wsize):(Rr.wnext+=Pr,Rr.wnext===Rr.wsize&&(Rr.wnext=0),Rr.whave<Rr.wsize&&(Rr.whave+=Pr))),0},hy=(sn,or)=>{let Sn,xr,Pr,Rr,js,Ss,yo,ss,Us,Yl,ho,no,Wo,mu,jl=0,xl,Ql,Ll,co,_c,wu,Ho,su;const Gl=new Uint8Array(4);let Jo,Dl;const gp=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Op(sn)||!sn.output||!sn.input&&sn.avail_in!==0)return Iu;Sn=sn.state,Sn.mode===cu&&(Sn.mode=Jp),js=sn.next_out,Pr=sn.output,yo=sn.avail_out,Rr=sn.next_in,xr=sn.input,Ss=sn.avail_in,ss=Sn.hold,Us=Sn.bits,Yl=Ss,ho=yo,su=Pp;e:for(;;)switch(Sn.mode){case gm:if(Sn.wrap===0){Sn.mode=Jp;break}for(;Us<16;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(Sn.wrap&2&&ss===35615){Sn.wbits===0&&(Sn.wbits=15),Sn.check=0,Gl[0]=ss&255,Gl[1]=ss>>>8&255,Sn.check=Fn(Sn.check,Gl,2,0),ss=0,Us=0,Sn.mode=Gm;break}if(Sn.head&&(Sn.head.done=!1),!(Sn.wrap&1)||(((ss&255)<<8)+(ss>>8))%31){sn.msg="incorrect header check",Sn.mode=fu;break}if((ss&15)!==jp){sn.msg="unknown compression method",Sn.mode=fu;break}if(ss>>>=4,Us-=4,Ho=(ss&15)+8,Sn.wbits===0&&(Sn.wbits=Ho),Ho>15||Ho>Sn.wbits){sn.msg="invalid window size",Sn.mode=fu;break}Sn.dmax=1<<Sn.wbits,Sn.flags=0,sn.adler=Sn.check=1,Sn.mode=ss&512?yu:cu,ss=0,Us=0;break;case Gm:for(;Us<16;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(Sn.flags=ss,(Sn.flags&255)!==jp){sn.msg="unknown compression method",Sn.mode=fu;break}if(Sn.flags&57344){sn.msg="unknown header flags set",Sn.mode=fu;break}Sn.head&&(Sn.head.text=ss>>8&1),Sn.flags&512&&Sn.wrap&4&&(Gl[0]=ss&255,Gl[1]=ss>>>8&255,Sn.check=Fn(Sn.check,Gl,2,0)),ss=0,Us=0,Sn.mode=pu;case pu:for(;Us<32;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}Sn.head&&(Sn.head.time=ss),Sn.flags&512&&Sn.wrap&4&&(Gl[0]=ss&255,Gl[1]=ss>>>8&255,Gl[2]=ss>>>16&255,Gl[3]=ss>>>24&255,Sn.check=Fn(Sn.check,Gl,4,0)),ss=0,Us=0,Sn.mode=ym;case ym:for(;Us<16;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}Sn.head&&(Sn.head.xflags=ss&255,Sn.head.os=ss>>8),Sn.flags&512&&Sn.wrap&4&&(Gl[0]=ss&255,Gl[1]=ss>>>8&255,Sn.check=Fn(Sn.check,Gl,2,0)),ss=0,Us=0,Sn.mode=Wm;case Wm:if(Sn.flags&1024){for(;Us<16;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}Sn.length=ss,Sn.head&&(Sn.head.extra_len=ss),Sn.flags&512&&Sn.wrap&4&&(Gl[0]=ss&255,Gl[1]=ss>>>8&255,Sn.check=Fn(Sn.check,Gl,2,0)),ss=0,Us=0}else Sn.head&&(Sn.head.extra=null);Sn.mode=Hm;case Hm:if(Sn.flags&1024&&(no=Sn.length,no>Ss&&(no=Ss),no&&(Sn.head&&(Ho=Sn.head.extra_len-Sn.length,Sn.head.extra||(Sn.head.extra=new Uint8Array(Sn.head.extra_len)),Sn.head.extra.set(xr.subarray(Rr,Rr+no),Ho)),Sn.flags&512&&Sn.wrap&4&&(Sn.check=Fn(Sn.check,xr,no,Rr)),Ss-=no,Rr+=no,Sn.length-=no),Sn.length))break e;Sn.length=0,Sn.mode=vm;case vm:if(Sn.flags&2048){if(Ss===0)break e;no=0;do Ho=xr[Rr+no++],Sn.head&&Ho&&Sn.length<65536&&(Sn.head.name+=String.fromCharCode(Ho));while(Ho&&no<Ss);if(Sn.flags&512&&Sn.wrap&4&&(Sn.check=Fn(Sn.check,xr,no,Rr)),Ss-=no,Rr+=no,Ho)break e}else Sn.head&&(Sn.head.name=null);Sn.length=0,Sn.mode=Wu;case Wu:if(Sn.flags&4096){if(Ss===0)break e;no=0;do Ho=xr[Rr+no++],Sn.head&&Ho&&Sn.length<65536&&(Sn.head.comment+=String.fromCharCode(Ho));while(Ho&&no<Ss);if(Sn.flags&512&&Sn.wrap&4&&(Sn.check=Fn(Sn.check,xr,no,Rr)),Ss-=no,Rr+=no,Ho)break e}else Sn.head&&(Sn.head.comment=null);Sn.mode=Vp;case Vp:if(Sn.flags&512){for(;Us<16;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(Sn.wrap&4&&ss!==(Sn.check&65535)){sn.msg="header crc mismatch",Sn.mode=fu;break}ss=0,Us=0}Sn.head&&(Sn.head.hcrc=Sn.flags>>9&1,Sn.head.done=!0),sn.adler=Sn.check=0,Sn.mode=cu;break;case yu:for(;Us<32;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}sn.adler=Sn.check=Jm(ss),ss=0,Us=0,Sn.mode=xu;case xu:if(Sn.havedict===0)return sn.next_out=js,sn.avail_out=yo,sn.next_in=Rr,sn.avail_in=Ss,Sn.hold=ss,Sn.bits=Us,Qu;sn.adler=Sn.check=1,Sn.mode=cu;case cu:if(or===ly||or===Cp)break e;case Jp:if(Sn.last){ss>>>=Us&7,Us-=Us&7,Sn.mode=Ym;break}for(;Us<3;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}switch(Sn.last=ss&1,ss>>>=1,Us-=1,ss&3){case 0:Sn.mode=Qp;break;case 1:if(Jy(Sn),Sn.mode=em,or===Cp){ss>>>=2,Us-=2;break e}break;case 2:Sn.mode=Au;break;case 3:sn.msg="invalid block type",Sn.mode=fu}ss>>>=2,Us-=2;break;case Qp:for(ss>>>=Us&7,Us-=Us&7;Us<32;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if((ss&65535)!==(ss>>>16^65535)){sn.msg="invalid stored block lengths",Sn.mode=fu;break}if(Sn.length=ss&65535,ss=0,Us=0,Sn.mode=Gp,or===Cp)break e;case Gp:Sn.mode=cy;case cy:if(no=Sn.length,no){if(no>Ss&&(no=Ss),no>yo&&(no=yo),no===0)break e;Pr.set(xr.subarray(Rr,Rr+no),js),Ss-=no,Rr+=no,yo-=no,js+=no,Sn.length-=no;break}Sn.mode=cu;break;case Au:for(;Us<14;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(Sn.nlen=(ss&31)+257,ss>>>=5,Us-=5,Sn.ndist=(ss&31)+1,ss>>>=5,Us-=5,Sn.ncode=(ss&15)+4,ss>>>=4,Us-=4,Sn.nlen>286||Sn.ndist>30){sn.msg="too many length or distance symbols",Sn.mode=fu;break}Sn.have=0,Sn.mode=Km;case Km:for(;Sn.have<Sn.ncode;){for(;Us<3;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}Sn.lens[gp[Sn.have++]]=ss&7,ss>>>=3,Us-=3}for(;Sn.have<19;)Sn.lens[gp[Sn.have++]]=0;if(Sn.lencode=Sn.lendyn,Sn.lenbits=7,Jo={bits:Sn.lenbits},su=fp(E0,Sn.lens,0,19,Sn.lencode,0,Sn.work,Jo),Sn.lenbits=Jo.bits,su){sn.msg="invalid code lengths set",Sn.mode=fu;break}Sn.have=0,Sn.mode=Xm;case Xm:for(;Sn.have<Sn.nlen+Sn.ndist;){for(;jl=Sn.lencode[ss&(1<<Sn.lenbits)-1],xl=jl>>>24,Ql=jl>>>16&255,Ll=jl&65535,!(xl<=Us);){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(Ll<16)ss>>>=xl,Us-=xl,Sn.lens[Sn.have++]=Ll;else{if(Ll===16){for(Dl=xl+2;Us<Dl;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(ss>>>=xl,Us-=xl,Sn.have===0){sn.msg="invalid bit length repeat",Sn.mode=fu;break}Ho=Sn.lens[Sn.have-1],no=3+(ss&3),ss>>>=2,Us-=2}else if(Ll===17){for(Dl=xl+3;Us<Dl;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}ss>>>=xl,Us-=xl,Ho=0,no=3+(ss&7),ss>>>=3,Us-=3}else{for(Dl=xl+7;Us<Dl;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}ss>>>=xl,Us-=xl,Ho=0,no=11+(ss&127),ss>>>=7,Us-=7}if(Sn.have+no>Sn.nlen+Sn.ndist){sn.msg="invalid bit length repeat",Sn.mode=fu;break}for(;no--;)Sn.lens[Sn.have++]=Ho}}if(Sn.mode===fu)break;if(Sn.lens[256]===0){sn.msg="invalid code -- missing end-of-block",Sn.mode=fu;break}if(Sn.lenbits=9,Jo={bits:Sn.lenbits},su=fp(Zp,Sn.lens,0,Sn.nlen,Sn.lencode,0,Sn.work,Jo),Sn.lenbits=Jo.bits,su){sn.msg="invalid literal/lengths set",Sn.mode=fu;break}if(Sn.distbits=6,Sn.distcode=Sn.distdyn,Jo={bits:Sn.distbits},su=fp(pm,Sn.lens,Sn.nlen,Sn.ndist,Sn.distcode,0,Sn.work,Jo),Sn.distbits=Jo.bits,su){sn.msg="invalid distances set",Sn.mode=fu;break}if(Sn.mode=em,or===Cp)break e;case em:Sn.mode=_d;case _d:if(Ss>=6&&yo>=258){sn.next_out=js,sn.avail_out=yo,sn.next_in=Rr,sn.avail_in=Ss,Sn.hold=ss,Sn.bits=Us,_0(sn,ho),js=sn.next_out,Pr=sn.output,yo=sn.avail_out,Rr=sn.next_in,xr=sn.input,Ss=sn.avail_in,ss=Sn.hold,Us=Sn.bits,Sn.mode===cu&&(Sn.back=-1);break}for(Sn.back=0;jl=Sn.lencode[ss&(1<<Sn.lenbits)-1],xl=jl>>>24,Ql=jl>>>16&255,Ll=jl&65535,!(xl<=Us);){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(Ql&&!(Ql&240)){for(co=xl,_c=Ql,wu=Ll;jl=Sn.lencode[wu+((ss&(1<<co+_c)-1)>>co)],xl=jl>>>24,Ql=jl>>>16&255,Ll=jl&65535,!(co+xl<=Us);){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}ss>>>=co,Us-=co,Sn.back+=co}if(ss>>>=xl,Us-=xl,Sn.back+=xl,Sn.length=Ll,Ql===0){Sn.mode=M0;break}if(Ql&32){Sn.back=-1,Sn.mode=cu;break}if(Ql&64){sn.msg="invalid literal/length code",Sn.mode=fu;break}Sn.extra=Ql&15,Sn.mode=sp;case sp:if(Sn.extra){for(Dl=Sn.extra;Us<Dl;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}Sn.length+=ss&(1<<Sn.extra)-1,ss>>>=Sn.extra,Us-=Sn.extra,Sn.back+=Sn.extra}Sn.was=Sn.length,Sn.mode=Ip;case Ip:for(;jl=Sn.distcode[ss&(1<<Sn.distbits)-1],xl=jl>>>24,Ql=jl>>>16&255,Ll=jl&65535,!(xl<=Us);){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(!(Ql&240)){for(co=xl,_c=Ql,wu=Ll;jl=Sn.distcode[wu+((ss&(1<<co+_c)-1)>>co)],xl=jl>>>24,Ql=jl>>>16&255,Ll=jl&65535,!(co+xl<=Us);){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}ss>>>=co,Us-=co,Sn.back+=co}if(ss>>>=xl,Us-=xl,Sn.back+=xl,Ql&64){sn.msg="invalid distance code",Sn.mode=fu;break}Sn.offset=Ll,Sn.extra=Ql&15,Sn.mode=_m;case _m:if(Sn.extra){for(Dl=Sn.extra;Us<Dl;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}Sn.offset+=ss&(1<<Sn.extra)-1,ss>>>=Sn.extra,Us-=Sn.extra,Sn.back+=Sn.extra}if(Sn.offset>Sn.dmax){sn.msg="invalid distance too far back",Sn.mode=fu;break}Sn.mode=xm;case xm:if(yo===0)break e;if(no=ho-yo,Sn.offset>no){if(no=Sn.offset-no,no>Sn.whave&&Sn.sane){sn.msg="invalid distance too far back",Sn.mode=fu;break}no>Sn.wnext?(no-=Sn.wnext,Wo=Sn.wsize-no):Wo=Sn.wnext-no,no>Sn.length&&(no=Sn.length),mu=Sn.window}else mu=Pr,Wo=js-Sn.offset,no=Sn.length;no>yo&&(no=yo),yo-=no,Sn.length-=no;do Pr[js++]=mu[Wo++];while(--no);Sn.length===0&&(Sn.mode=_d);break;case M0:if(yo===0)break e;Pr[js++]=Sn.length,yo--,Sn.mode=_d;break;case Ym:if(Sn.wrap){for(;Us<32;){if(Ss===0)break e;Ss--,ss|=xr[Rr++]<<Us,Us+=8}if(ho-=yo,sn.total_out+=ho,Sn.total+=ho,Sn.wrap&4&&ho&&(sn.adler=Sn.check=Sn.flags?Fn(Sn.check,Pr,ho,js-ho):Br(Sn.check,Pr,ho,js-ho)),ho=yo,Sn.wrap&4&&(Sn.flags?ss:Jm(ss))!==Sn.check){sn.msg="incorrect data check",Sn.mode=fu;break}ss=0,Us=0}Sn.mode=T0;case T0:if(Sn.wrap&&Sn.flags){for(;Us<32;){if(Ss===0)break e;Ss--,ss+=xr[Rr++]<<Us,Us+=8}if(Sn.wrap&4&&ss!==(Sn.total&4294967295)){sn.msg="incorrect length check",Sn.mode=fu;break}ss=0,Us=0}Sn.mode=A0;case A0:su=mm;break e;case fu:su=zp;break e;case R0:return ip;case qm:default:return Iu}return sn.next_out=js,sn.avail_out=yo,sn.next_in=Rr,sn.avail_in=Ss,Sn.hold=ss,Sn.bits=Us,(Sn.wsize||ho!==sn.avail_out&&Sn.mode<fu&&(Sn.mode<Ym||or!==w0))&&fy(sn,sn.output,sn.next_out,ho-sn.avail_out),Yl-=sn.avail_in,ho-=sn.avail_out,sn.total_in+=Yl,sn.total_out+=ho,Sn.total+=ho,Sn.wrap&4&&ho&&(sn.adler=Sn.check=Sn.flags?Fn(Sn.check,Pr,ho,sn.next_out-ho):Br(Sn.check,Pr,ho,sn.next_out-ho)),sn.data_type=Sn.bits+(Sn.last?64:0)+(Sn.mode===cu?128:0)+(Sn.mode===em||Sn.mode===Gp?256:0),(Yl===0&&ho===0||or===w0)&&su===Pp&&(su=C0),su},my=sn=>{if(Op(sn))return Iu;let or=sn.state;return or.window&&(or.window=null),sn.state=null,Pp},gy=(sn,or)=>{if(Op(sn))return Iu;const Sn=sn.state;return Sn.wrap&2?(Sn.head=or,or.done=!1,Pp):Iu},yy=(sn,or)=>{const Sn=or.length;let xr,Pr,Rr;return Op(sn)||(xr=sn.state,xr.wrap!==0&&xr.mode!==xu)?Iu:xr.mode===xu&&(Pr=1,Pr=Br(Pr,or,Sn,0),Pr!==xr.check)?zp:(Rr=fy(sn,or,Sn,Sn),Rr?(xr.mode=R0,ip):(xr.havedict=1,Pp))};var e0=I0,Qy=O0,ev=P0,tv=dy,F0=Qm,k0=hy,nv=my,vy=gy,xy=yy,by="pako inflate (from Nodeca project)",hp={inflateReset:e0,inflateReset2:Qy,inflateResetKeep:ev,inflateInit:tv,inflateInit2:F0,inflate:k0,inflateEnd:nv,inflateGetHeader:vy,inflateSetDictionary:xy,inflateInfo:by};function Sy(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var pp=Sy;const N0=Object.prototype.toString,{Z_NO_FLUSH:Em,Z_FINISH:wm,Z_OK:Lp,Z_STREAM_END:tm,Z_NEED_DICT:n0,Z_STREAM_ERROR:Cm,Z_DATA_ERROR:Ru,Z_MEM_ERROR:rv}=Vr;function Mm(sn){this.options=Yp.assign({chunkSize:65536,windowBits:15,to:""},sn||{});const or=this.options;or.raw&&or.windowBits>=0&&or.windowBits<16&&(or.windowBits=-or.windowBits,or.windowBits===0&&(or.windowBits=-15)),or.windowBits>=0&&or.windowBits<16&&!(sn&&sn.windowBits)&&(or.windowBits+=32),or.windowBits>15&&or.windowBits<48&&(or.windowBits&15||(or.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fm,this.strm.avail_out=0;let Sn=hp.inflateInit2(this.strm,or.windowBits);if(Sn!==Lp)throw new Error(Ur[Sn]);if(this.header=new pp,hp.inflateGetHeader(this.strm,this.header),or.dictionary&&(typeof or.dictionary=="string"?or.dictionary=Vu.string2buf(or.dictionary):N0.call(or.dictionary)==="[object ArrayBuffer]"&&(or.dictionary=new Uint8Array(or.dictionary)),or.raw&&(Sn=hp.inflateSetDictionary(this.strm,or.dictionary),Sn!==Lp)))throw new Error(Ur[Sn])}Mm.prototype.push=function(sn,or){const Sn=this.strm,xr=this.options.chunkSize,Pr=this.options.dictionary;let Rr,js,Ss;if(this.ended)return!1;for(or===~~or?js=or:js=or===!0?wm:Em,N0.call(sn)==="[object ArrayBuffer]"?Sn.input=new Uint8Array(sn):Sn.input=sn,Sn.next_in=0,Sn.avail_in=Sn.input.length;;){for(Sn.avail_out===0&&(Sn.output=new Uint8Array(xr),Sn.next_out=0,Sn.avail_out=xr),Rr=hp.inflate(Sn,js),Rr===n0&&Pr&&(Rr=hp.inflateSetDictionary(Sn,Pr),Rr===Lp?Rr=hp.inflate(Sn,js):Rr===Ru&&(Rr=n0));Sn.avail_in>0&&Rr===tm&&Sn.state.wrap>0&&sn[Sn.next_in]!==0;)hp.inflateReset(Sn),Rr=hp.inflate(Sn,js);switch(Rr){case Cm:case Ru:case n0:case rv:return this.onEnd(Rr),this.ended=!0,!1}if(Ss=Sn.avail_out,Sn.next_out&&(Sn.avail_out===0||Rr===tm))if(this.options.to==="string"){let yo=Vu.utf8border(Sn.output,Sn.next_out),ss=Sn.next_out-yo,Us=Vu.buf2string(Sn.output,yo);Sn.next_out=ss,Sn.avail_out=xr-ss,ss&&Sn.output.set(Sn.output.subarray(yo,yo+ss),0),this.onData(Us)}else this.onData(Sn.output.length===Sn.next_out?Sn.output:Sn.output.subarray(0,Sn.next_out));if(!(Rr===Lp&&Ss===0)){if(Rr===tm)return Rr=hp.inflateEnd(this.strm),this.onEnd(Rr),this.ended=!0,!0;if(Sn.avail_in===0)break}}return!0},Mm.prototype.onData=function(sn){this.chunks.push(sn)},Mm.prototype.onEnd=function(sn){sn===Lp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Yp.flattenChunks(this.chunks)),this.chunks=[],this.err=sn,this.msg=this.strm.msg};function ku(sn,or){const Sn=new Mm(or);if(Sn.push(sn),Sn.err)throw Sn.msg||Ur[Sn.err];return Sn.result}function Nu(sn,or){return or=or||{},or.raw=!0,ku(sn,or)}var Ey=Mm,wy=ku,Cy=Nu,My=ku,Ty=Vr,B0={Inflate:Ey,inflate:wy,inflateRaw:Cy,ungzip:My,constants:Ty};const{Deflate:Ay,deflate:U0,deflateRaw:Ry,gzip:$y}=Up,{Inflate:r0,inflate:i0,inflateRaw:Py,ungzip:z0}=B0;var j0=Ay,V0=U0,Tm=Ry,G0=$y,s0=r0,W0=i0,mp=Py,Iy=z0,Oy=Vr,a0={Deflate:j0,deflate:V0,deflateRaw:Tm,gzip:G0,Inflate:s0,inflate:W0,inflateRaw:mp,ungzip:Iy,constants:Oy}}},__webpack_module_cache__={};function __webpack_require__(nt){var tt=__webpack_module_cache__[nt];if(tt!==void 0)return tt.exports;var rt=__webpack_module_cache__[nt]={exports:{}};return __webpack_modules__[nt].call(rt.exports,rt,rt.exports,__webpack_require__),rt.exports}__webpack_require__.n=nt=>{var tt=nt&&nt.__esModule?()=>nt.default:()=>nt;return __webpack_require__.d(tt,{a:tt}),tt},__webpack_require__.d=(nt,tt)=>{for(var rt in tt)__webpack_require__.o(tt,rt)&&!__webpack_require__.o(nt,rt)&&Object.defineProperty(nt,rt,{enumerable:!0,get:tt[rt]})},__webpack_require__.o=(nt,tt)=>Object.prototype.hasOwnProperty.call(nt,tt),__webpack_require__.r=nt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nt,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())})(_3Dmol);var _3DmolExports=_3Dmol.exports;function Molecule3D(nt){const tt=reactExports.useRef(null);return reactExports.useEffect(()=>{if(tt.current){const st=tt.current.children;if(st.length!=0)for(let at=0;at<st.length;at++)st[at].remove()}const rt=_3DmolExports.createViewer(tt.current,{backgroundColor:nt.color});if(nt.orbital){rt.addModel(nt.orbital.cubeData,"cube");const st=new _3DmolExports.VolumeData(nt.orbital.cubeData,"cube"),{positiveColor:at,negativeColor:lt,positiveMin:dt,positiveMax:yt,negativeMin:vt,negativeMax:_t,isosurface:bt}=nt.orbital.transferfn;bt?(rt.addIsosurface(st,{isoval:dt,color:at,alpha:.95,smoothness:10}),rt.addIsosurface(st,{isoval:-1*vt,color:lt,alpha:.95,smoothness:10})):rt.addVolumetricRender(st,{transferfn:[{color:at,opacity:.075,value:yt},{color:at,opacity:.001,value:dt},{color:"white",opacity:0,value:0},{color:lt,opacity:.001,value:vt*-1},{color:lt,opacity:.075,value:_t*-1}]})}else if(nt.moleculedata){const st=rt.addModel(nt.moleculedata,"xyz");rt.addUnitCell(st,{box:{color:"purple"},alabel:"X",blabel:"Y",clabel:"Z"})}nt.style=="Stick"?rt.setStyle({},{stick:{color:"spectrum"}}):nt.style=="Sphere"&&rt.setStyle({},{sphere:{color:"spectrum",radius:1}}),rt.zoomTo(),rt.render()}),jsxRuntimeExports.jsx("div",{ref:tt,style:{height:"75%",width:"100%",position:"relative"}})}const VisuallyHiddenInput=styled("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function isObject$g(nt){return typeof nt!="object"||nt===null||typeof nt.lastModified=="number"&&typeof File<"u"&&nt instanceof File||typeof nt.getMonth=="function"&&typeof Date<"u"&&nt instanceof Date?!1:!Array.isArray(nt)}function allowAdditionalItems(nt){return nt.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),isObject$g(nt.additionalItems)}function asNumber(nt){if(nt==="")return;if(nt===null)return null;if(/\.$/.test(nt)||/\.0$/.test(nt)||/\.\d*0$/.test(nt))return nt;const tt=Number(nt);return typeof tt=="number"&&!Number.isNaN(tt)?tt:nt}const ADDITIONAL_PROPERTY_FLAG="__additional_property",ADDITIONAL_PROPERTIES_KEY="additionalProperties",ALL_OF_KEY="allOf",ANY_OF_KEY="anyOf",CONST_KEY="const",DEFAULT_KEY="default",DEPENDENCIES_KEY="dependencies",ENUM_KEY="enum",ERRORS_KEY="__errors",ID_KEY="$id",IF_KEY="if",ITEMS_KEY="items",JUNK_OPTION_ID="_$junk_option_schema_id$_",NAME_KEY="$name",ONE_OF_KEY="oneOf",PROPERTIES_KEY="properties",REQUIRED_KEY="required",SUBMIT_BTN_OPTIONS_KEY="submitButtonOptions",REF_KEY="$ref",RJSF_ADDITIONAL_PROPERTIES_FLAG="__rjsf_additionalProperties",ROOT_SCHEMA_PREFIX="__rjsf_rootSchema",UI_FIELD_KEY="ui:field",UI_WIDGET_KEY="ui:widget",UI_OPTIONS_KEY="ui:options",UI_GLOBAL_OPTIONS_KEY="ui:globalOptions";function getUiOptions(nt={},tt={}){return Object.keys(nt).filter(rt=>rt.indexOf("ui:")===0).reduce((rt,st)=>{const at=nt[st];return st===UI_WIDGET_KEY&&isObject$g(at)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),rt):st===UI_OPTIONS_KEY&&isObject$g(at)?{...rt,...at}:{...rt,[st.substring(3)]:at}},{...tt})}function canExpand(nt,tt={},rt){if(!nt.additionalProperties)return!1;const{expandable:st=!0}=getUiOptions(tt);return st===!1?st:nt.maxProperties!==void 0&&rt?Object.keys(rt).length<nt.maxProperties:!0}var freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$8=freeGlobal||freeSelf||Function("return this")(),_root=root$8,root$7=_root,Symbol$7=root$7.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$i=Object.prototype,hasOwnProperty$h=objectProto$i.hasOwnProperty,nativeObjectToString$1=objectProto$i.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(nt){var tt=hasOwnProperty$h.call(nt,symToStringTag$1),rt=nt[symToStringTag$1];try{nt[symToStringTag$1]=void 0;var st=!0}catch{}var at=nativeObjectToString$1.call(nt);return st&&(tt?nt[symToStringTag$1]=rt:delete nt[symToStringTag$1]),at}var _getRawTag=getRawTag$1,objectProto$h=Object.prototype,nativeObjectToString=objectProto$h.toString;function objectToString$1(nt){return nativeObjectToString.call(nt)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$9(nt){return nt==null?nt===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(nt)?getRawTag(nt):objectToString(nt)}var _baseGetTag=baseGetTag$9;function overArg$2(nt,tt){return function(rt){return nt(tt(rt))}}var _overArg=overArg$2,overArg$1=_overArg,getPrototype$4=overArg$1(Object.getPrototypeOf,Object),_getPrototype=getPrototype$4;function isObjectLike$c(nt){return nt!=null&&typeof nt=="object"}var isObjectLike_1=isObjectLike$c,baseGetTag$8=_baseGetTag,getPrototype$3=_getPrototype,isObjectLike$b=isObjectLike_1,objectTag$4="[object Object]",funcProto$2=Function.prototype,objectProto$g=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$g=objectProto$g.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject$6(nt){if(!isObjectLike$b(nt)||baseGetTag$8(nt)!=objectTag$4)return!1;var tt=getPrototype$3(nt);if(tt===null)return!0;var rt=hasOwnProperty$g.call(tt,"constructor")&&tt.constructor;return typeof rt=="function"&&rt instanceof rt&&funcToString$2.call(rt)==objectCtorString}var isPlainObject_1=isPlainObject$6;const isPlainObject$7=getDefaultExportFromCjs(isPlainObject_1);function createErrorHandler(nt){const tt={[ERRORS_KEY]:[],addError(rt){this[ERRORS_KEY].push(rt)}};if(Array.isArray(nt))return nt.reduce((rt,st,at)=>({...rt,[at]:createErrorHandler(st)}),tt);if(isPlainObject$7(nt)){const rt=nt;return Object.keys(rt).reduce((st,at)=>({...st,[at]:createErrorHandler(rt[at])}),tt)}return tt}function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$6(nt,tt){return nt===tt||nt!==nt&&tt!==tt}var eq_1=eq$6,eq$5=eq_1;function assocIndexOf$4(nt,tt){for(var rt=nt.length;rt--;)if(eq$5(nt[rt][0],tt))return rt;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete$1(nt){var tt=this.__data__,rt=assocIndexOf$3(tt,nt);if(rt<0)return!1;var st=tt.length-1;return rt==st?tt.pop():splice$1.call(tt,rt,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(nt){var tt=this.__data__,rt=assocIndexOf$2(tt,nt);return rt<0?void 0:tt[rt][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(nt){return assocIndexOf$1(this.__data__,nt)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(nt,tt){var rt=this.__data__,st=assocIndexOf(rt,nt);return st<0?(++this.size,rt.push([nt,tt])):rt[st][1]=tt,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(nt){var tt=-1,rt=nt==null?0:nt.length;for(this.clear();++tt<rt;){var st=nt[tt];this.set(st[0],st[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(nt){var tt=this.__data__,rt=tt.delete(nt);return this.size=tt.size,rt}var _stackDelete=stackDelete$1;function stackGet$1(nt){return this.__data__.get(nt)}var _stackGet=stackGet$1;function stackHas$1(nt){return this.__data__.has(nt)}var _stackHas=stackHas$1;function isObject$e(nt){var tt=typeof nt;return nt!=null&&(tt=="object"||tt=="function")}var isObject_1=isObject$e;const isObject$f=getDefaultExportFromCjs(isObject_1);var baseGetTag$7=_baseGetTag,isObject$d=isObject_1,asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$8(nt){if(!isObject$d(nt))return!1;var tt=baseGetTag$7(nt);return tt==funcTag$2||tt==genTag$1||tt==asyncTag||tt==proxyTag}var isFunction_1=isFunction$8,root$6=_root,coreJsData$1=root$6["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var nt=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return nt?"Symbol(src)_1."+nt:""}();function isMasked$1(nt){return!!maskSrcKey&&maskSrcKey in nt}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(nt){if(nt!=null){try{return funcToString$1.call(nt)}catch{}try{return nt+""}catch{}}return""}var _toSource=toSource$2,isFunction$7=isFunction_1,isMasked=_isMasked,isObject$c=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$f=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$f=objectProto$f.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$f).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(nt){if(!isObject$c(nt)||isMasked(nt))return!1;var tt=isFunction$7(nt)?reIsNative:reIsHostCtor;return tt.test(toSource$1(nt))}var _baseIsNative=baseIsNative$1;function getValue$2(nt,tt){return nt==null?void 0:nt[tt]}var _getValue=getValue$2,baseIsNative=_baseIsNative,getValue$1=_getValue;function getNative$7(nt,tt){var rt=getValue$1(nt,tt);return baseIsNative(rt)?rt:void 0}var _getNative=getNative$7,getNative$6=_getNative,root$5=_root,Map$4=getNative$6(root$5,"Map"),_Map=Map$4,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(nt){var tt=this.has(nt)&&delete this.__data__[nt];return this.size-=tt?1:0,tt}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$e=Object.prototype,hasOwnProperty$e=objectProto$e.hasOwnProperty;function hashGet$1(nt){var tt=this.__data__;if(nativeCreate$2){var rt=tt[nt];return rt===HASH_UNDEFINED$2?void 0:rt}return hasOwnProperty$e.call(tt,nt)?tt[nt]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$d=Object.prototype,hasOwnProperty$d=objectProto$d.hasOwnProperty;function hashHas$1(nt){var tt=this.__data__;return nativeCreate$1?tt[nt]!==void 0:hasOwnProperty$d.call(tt,nt)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(nt,tt){var rt=this.__data__;return this.size+=this.has(nt)?0:1,rt[nt]=nativeCreate&&tt===void 0?HASH_UNDEFINED$1:tt,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(nt){var tt=-1,rt=nt==null?0:nt.length;for(this.clear();++tt<rt;){var st=nt[tt];this.set(st[0],st[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(nt){var tt=typeof nt;return tt=="string"||tt=="number"||tt=="symbol"||tt=="boolean"?nt!=="__proto__":nt===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(nt,tt){var rt=nt.__data__;return isKeyable(tt)?rt[typeof tt=="string"?"string":"hash"]:rt.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(nt){var tt=getMapData$3(this,nt).delete(nt);return this.size-=tt?1:0,tt}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(nt){return getMapData$2(this,nt).get(nt)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(nt){return getMapData$1(this,nt).has(nt)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(nt,tt){var rt=getMapData(this,nt),st=rt.size;return rt.set(nt,tt),this.size+=rt.size==st?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(nt){var tt=-1,rt=nt==null?0:nt.length;for(this.clear();++tt<rt;){var st=nt[tt];this.set(st[0],st[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,ListCache$1=_ListCache,Map$2=_Map,MapCache$2=_MapCache,LARGE_ARRAY_SIZE$2=200;function stackSet$1(nt,tt){var rt=this.__data__;if(rt instanceof ListCache$1){var st=rt.__data__;if(!Map$2||st.length<LARGE_ARRAY_SIZE$2-1)return st.push([nt,tt]),this.size=++rt.size,this;rt=this.__data__=new MapCache$2(st)}return rt.set(nt,tt),this.size=rt.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$4(nt){var tt=this.__data__=new ListCache(nt);this.size=tt.size}Stack$4.prototype.clear=stackClear;Stack$4.prototype.delete=stackDelete;Stack$4.prototype.get=stackGet;Stack$4.prototype.has=stackHas;Stack$4.prototype.set=stackSet;var _Stack=Stack$4,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(nt){return this.__data__.set(nt,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(nt){return this.__data__.has(nt)}var _setCacheHas=setCacheHas$1,MapCache$1=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$4(nt){var tt=-1,rt=nt==null?0:nt.length;for(this.__data__=new MapCache$1;++tt<rt;)this.add(nt[tt])}SetCache$4.prototype.add=SetCache$4.prototype.push=setCacheAdd;SetCache$4.prototype.has=setCacheHas;var _SetCache=SetCache$4;function arraySome$1(nt,tt){for(var rt=-1,st=nt==null?0:nt.length;++rt<st;)if(tt(nt[rt],rt,nt))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$4(nt,tt){return nt.has(tt)}var _cacheHas=cacheHas$4,SetCache$3=_SetCache,arraySome=_arraySome,cacheHas$3=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(nt,tt,rt,st,at,lt){var dt=rt&COMPARE_PARTIAL_FLAG$5,yt=nt.length,vt=tt.length;if(yt!=vt&&!(dt&&vt>yt))return!1;var _t=lt.get(nt),bt=lt.get(tt);if(_t&&bt)return _t==tt&&bt==nt;var Mt=-1,Ct=!0,Tt=rt&COMPARE_UNORDERED_FLAG$3?new SetCache$3:void 0;for(lt.set(nt,tt),lt.set(tt,nt);++Mt<yt;){var $t=nt[Mt],Rt=tt[Mt];if(st)var Et=dt?st(Rt,$t,Mt,tt,nt,lt):st($t,Rt,Mt,nt,tt,lt);if(Et!==void 0){if(Et)continue;Ct=!1;break}if(Tt){if(!arraySome(tt,function(wt,Pt){if(!cacheHas$3(Tt,Pt)&&($t===wt||at($t,wt,rt,st,lt)))return Tt.push(Pt)})){Ct=!1;break}}else if(!($t===Rt||at($t,Rt,rt,st,lt))){Ct=!1;break}}return lt.delete(nt),lt.delete(tt),Ct}var _equalArrays=equalArrays$2,root$4=_root,Uint8Array$3=root$4.Uint8Array,_Uint8Array=Uint8Array$3;function mapToArray$1(nt){var tt=-1,rt=Array(nt.size);return nt.forEach(function(st,at){rt[++tt]=[at,st]}),rt}var _mapToArray=mapToArray$1;function setToArray$3(nt){var tt=-1,rt=Array(nt.size);return nt.forEach(function(st){rt[++tt]=st}),rt}var _setToArray=setToArray$3,Symbol$4=_Symbol,Uint8Array$2=_Uint8Array,eq$4=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$4="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",mapTag$6="[object Map]",numberTag$4="[object Number]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$4="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",symbolProto$2=Symbol$4?Symbol$4.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function equalByTag$1(nt,tt,rt,st,at,lt,dt){switch(rt){case dataViewTag$4:if(nt.byteLength!=tt.byteLength||nt.byteOffset!=tt.byteOffset)return!1;nt=nt.buffer,tt=tt.buffer;case arrayBufferTag$3:return!(nt.byteLength!=tt.byteLength||!lt(new Uint8Array$2(nt),new Uint8Array$2(tt)));case boolTag$4:case dateTag$3:case numberTag$4:return eq$4(+nt,+tt);case errorTag$2:return nt.name==tt.name&&nt.message==tt.message;case regexpTag$3:case stringTag$4:return nt==tt+"";case mapTag$6:var yt=mapToArray;case setTag$6:var vt=st&COMPARE_PARTIAL_FLAG$4;if(yt||(yt=setToArray$2),nt.size!=tt.size&&!vt)return!1;var _t=dt.get(nt);if(_t)return _t==tt;st|=COMPARE_UNORDERED_FLAG$2,dt.set(nt,tt);var bt=equalArrays$1(yt(nt),yt(tt),st,at,lt,dt);return dt.delete(nt),bt;case symbolTag$3:if(symbolValueOf$1)return symbolValueOf$1.call(nt)==symbolValueOf$1.call(tt)}return!1}var _equalByTag=equalByTag$1;function arrayPush$3(nt,tt){for(var rt=-1,st=tt.length,at=nt.length;++rt<st;)nt[at+rt]=tt[rt];return nt}var _arrayPush=arrayPush$3,isArray$n=Array.isArray,isArray_1=isArray$n,arrayPush$2=_arrayPush,isArray$m=isArray_1;function baseGetAllKeys$2(nt,tt,rt){var st=tt(nt);return isArray$m(nt)?st:arrayPush$2(st,rt(nt))}var _baseGetAllKeys=baseGetAllKeys$2;function arrayFilter$1(nt,tt){for(var rt=-1,st=nt==null?0:nt.length,at=0,lt=[];++rt<st;){var dt=nt[rt];tt(dt,rt,nt)&&(lt[at++]=dt)}return lt}var _arrayFilter=arrayFilter$1;function stubArray$2(){return[]}var stubArray_1=stubArray$2,arrayFilter=_arrayFilter,stubArray$1=stubArray_1,objectProto$c=Object.prototype,propertyIsEnumerable$1=objectProto$c.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1?function(nt){return nt==null?[]:(nt=Object(nt),arrayFilter(nativeGetSymbols$1(nt),function(tt){return propertyIsEnumerable$1.call(nt,tt)}))}:stubArray$1,_getSymbols=getSymbols$3;function baseTimes$2(nt,tt){for(var rt=-1,st=Array(nt);++rt<nt;)st[rt]=tt(rt);return st}var _baseTimes=baseTimes$2,baseGetTag$6=_baseGetTag,isObjectLike$a=isObjectLike_1,argsTag$3="[object Arguments]";function baseIsArguments$1(nt){return isObjectLike$a(nt)&&baseGetTag$6(nt)==argsTag$3}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$9=isObjectLike_1,objectProto$b=Object.prototype,hasOwnProperty$c=objectProto$b.hasOwnProperty,propertyIsEnumerable=objectProto$b.propertyIsEnumerable,isArguments$5=baseIsArguments(function(){return arguments}())?baseIsArguments:function(nt){return isObjectLike$9(nt)&&hasOwnProperty$c.call(nt,"callee")&&!propertyIsEnumerable.call(nt,"callee")},isArguments_1=isArguments$5,isBuffer$7={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$7.exports;(function(nt,tt){var rt=_root,st=stubFalse_1,at=tt&&!tt.nodeType&&tt,lt=at&&!0&&nt&&!nt.nodeType&&nt,dt=lt&&lt.exports===at,yt=dt?rt.Buffer:void 0,vt=yt?yt.isBuffer:void 0,_t=vt||st;nt.exports=_t})(isBuffer$7,isBuffer$7.exports);var isBufferExports=isBuffer$7.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$4(nt,tt){var rt=typeof nt;return tt=tt??MAX_SAFE_INTEGER$2,!!tt&&(rt=="number"||rt!="symbol"&&reIsUint.test(nt))&&nt>-1&&nt%1==0&&nt<tt}var _isIndex=isIndex$4,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$3(nt){return typeof nt=="number"&&nt>-1&&nt%1==0&&nt<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$3,baseGetTag$5=_baseGetTag,isLength$2=isLength_1,isObjectLike$8=isObjectLike_1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$3="[object Object]",regexpTag$2="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray$1(nt){return isObjectLike$8(nt)&&isLength$2(nt.length)&&!!typedArrayTags[baseGetTag$5(nt)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$7(nt){return function(tt){return nt(tt)}}var _baseUnary=baseUnary$7,_nodeUtil={exports:{}};_nodeUtil.exports;(function(nt,tt){var rt=_freeGlobal,st=tt&&!tt.nodeType&&tt,at=st&&!0&&nt&&!nt.nodeType&&nt,lt=at&&at.exports===st,dt=lt&&rt.process,yt=function(){try{var vt=at&&at.require&&at.require("util").types;return vt||dt&&dt.binding&&dt.binding("util")}catch{}}();nt.exports=yt})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$6=_baseUnary,nodeUtil$2=_nodeUtilExports,nodeIsTypedArray=nodeUtil$2&&nodeUtil$2.isTypedArray,isTypedArray$7=nodeIsTypedArray?baseUnary$6(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$7,baseTimes$1=_baseTimes,isArguments$4=isArguments_1,isArray$l=isArray_1,isBuffer$6=isBufferExports,isIndex$3=_isIndex,isTypedArray$6=isTypedArray_1,objectProto$a=Object.prototype,hasOwnProperty$b=objectProto$a.hasOwnProperty;function arrayLikeKeys$2(nt,tt){var rt=isArray$l(nt),st=!rt&&isArguments$4(nt),at=!rt&&!st&&isBuffer$6(nt),lt=!rt&&!st&&!at&&isTypedArray$6(nt),dt=rt||st||at||lt,yt=dt?baseTimes$1(nt.length,String):[],vt=yt.length;for(var _t in nt)(tt||hasOwnProperty$b.call(nt,_t))&&!(dt&&(_t=="length"||at&&(_t=="offset"||_t=="parent")||lt&&(_t=="buffer"||_t=="byteLength"||_t=="byteOffset")||isIndex$3(_t,vt)))&&yt.push(_t);return yt}var _arrayLikeKeys=arrayLikeKeys$2,objectProto$9=Object.prototype;function isPrototype$4(nt){var tt=nt&&nt.constructor,rt=typeof tt=="function"&&tt.prototype||objectProto$9;return nt===rt}var _isPrototype=isPrototype$4,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype$3=_isPrototype,nativeKeys=_nativeKeys,objectProto$8=Object.prototype,hasOwnProperty$a=objectProto$8.hasOwnProperty;function baseKeys$2(nt){if(!isPrototype$3(nt))return nativeKeys(nt);var tt=[];for(var rt in Object(nt))hasOwnProperty$a.call(nt,rt)&&rt!="constructor"&&tt.push(rt);return tt}var _baseKeys=baseKeys$2,isFunction$6=isFunction_1,isLength$1=isLength_1;function isArrayLike$7(nt){return nt!=null&&isLength$1(nt.length)&&!isFunction$6(nt)}var isArrayLike_1=isArrayLike$7,arrayLikeKeys$1=_arrayLikeKeys,baseKeys$1=_baseKeys,isArrayLike$6=isArrayLike_1;function keys$a(nt){return isArrayLike$6(nt)?arrayLikeKeys$1(nt):baseKeys$1(nt)}var keys_1=keys$a,baseGetAllKeys$1=_baseGetAllKeys,getSymbols$2=_getSymbols,keys$9=keys_1;function getAllKeys$2(nt){return baseGetAllKeys$1(nt,keys$9,getSymbols$2)}var _getAllKeys=getAllKeys$2,getAllKeys$1=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$7=Object.prototype,hasOwnProperty$9=objectProto$7.hasOwnProperty;function equalObjects$1(nt,tt,rt,st,at,lt){var dt=rt&COMPARE_PARTIAL_FLAG$3,yt=getAllKeys$1(nt),vt=yt.length,_t=getAllKeys$1(tt),bt=_t.length;if(vt!=bt&&!dt)return!1;for(var Mt=vt;Mt--;){var Ct=yt[Mt];if(!(dt?Ct in tt:hasOwnProperty$9.call(tt,Ct)))return!1}var Tt=lt.get(nt),$t=lt.get(tt);if(Tt&&$t)return Tt==tt&&$t==nt;var Rt=!0;lt.set(nt,tt),lt.set(tt,nt);for(var Et=dt;++Mt<vt;){Ct=yt[Mt];var wt=nt[Ct],Pt=tt[Ct];if(st)var Ft=dt?st(Pt,wt,Ct,tt,nt,lt):st(wt,Pt,Ct,nt,tt,lt);if(!(Ft===void 0?wt===Pt||at(wt,Pt,rt,st,lt):Ft)){Rt=!1;break}Et||(Et=Ct=="constructor")}if(Rt&&!Et){var Nt=nt.constructor,Ot=tt.constructor;Nt!=Ot&&"constructor"in nt&&"constructor"in tt&&!(typeof Nt=="function"&&Nt instanceof Nt&&typeof Ot=="function"&&Ot instanceof Ot)&&(Rt=!1)}return lt.delete(nt),lt.delete(tt),Rt}var _equalObjects=equalObjects$1,getNative$4=_getNative,root$3=_root,DataView$2=getNative$4(root$3,"DataView"),_DataView=DataView$2,getNative$3=_getNative,root$2=_root,Promise$2=getNative$3(root$2,"Promise"),_Promise=Promise$2,getNative$2=_getNative,root$1=_root,Set$3=getNative$2(root$1,"Set"),_Set=Set$3,getNative$1=_getNative,root=_root,WeakMap$2=getNative$1(root,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$4=_baseGetTag,toSource=_toSource,mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$5=baseGetTag$4;(DataView$1&&getTag$5(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag$5(new Map$1)!=mapTag$4||Promise$1&&getTag$5(Promise$1.resolve())!=promiseTag||Set$2&&getTag$5(new Set$2)!=setTag$4||WeakMap$1&&getTag$5(new WeakMap$1)!=weakMapTag$1)&&(getTag$5=function(nt){var tt=baseGetTag$4(nt),rt=tt==objectTag$2?nt.constructor:void 0,st=rt?toSource(rt):"";if(st)switch(st){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return tt});var _getTag=getTag$5,Stack$3=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$4=_getTag,isArray$k=isArray_1,isBuffer$5=isBufferExports,isTypedArray$5=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",objectTag$1="[object Object]",objectProto$6=Object.prototype,hasOwnProperty$8=objectProto$6.hasOwnProperty;function baseIsEqualDeep$1(nt,tt,rt,st,at,lt){var dt=isArray$k(nt),yt=isArray$k(tt),vt=dt?arrayTag$1:getTag$4(nt),_t=yt?arrayTag$1:getTag$4(tt);vt=vt==argsTag$1?objectTag$1:vt,_t=_t==argsTag$1?objectTag$1:_t;var bt=vt==objectTag$1,Mt=_t==objectTag$1,Ct=vt==_t;if(Ct&&isBuffer$5(nt)){if(!isBuffer$5(tt))return!1;dt=!0,bt=!1}if(Ct&&!bt)return lt||(lt=new Stack$3),dt||isTypedArray$5(nt)?equalArrays(nt,tt,rt,st,at,lt):equalByTag(nt,tt,vt,rt,st,at,lt);if(!(rt&COMPARE_PARTIAL_FLAG$2)){var Tt=bt&&hasOwnProperty$8.call(nt,"__wrapped__"),$t=Mt&&hasOwnProperty$8.call(tt,"__wrapped__");if(Tt||$t){var Rt=Tt?nt.value():nt,Et=$t?tt.value():tt;return lt||(lt=new Stack$3),at(Rt,Et,rt,st,lt)}}return Ct?(lt||(lt=new Stack$3),equalObjects(nt,tt,rt,st,at,lt)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$7=isObjectLike_1;function baseIsEqual$4(nt,tt,rt,st,at){return nt===tt?!0:nt==null||tt==null||!isObjectLike$7(nt)&&!isObjectLike$7(tt)?nt!==nt&&tt!==tt:baseIsEqualDeep(nt,tt,rt,st,baseIsEqual$4,at)}var _baseIsEqual=baseIsEqual$4,baseIsEqual$3=_baseIsEqual;function isEqualWith(nt,tt,rt){rt=typeof rt=="function"?rt:void 0;var st=rt?rt(nt,tt):void 0;return st===void 0?baseIsEqual$3(nt,tt,void 0,rt):!!st}var isEqualWith_1=isEqualWith;const isEqualWith$1=getDefaultExportFromCjs(isEqualWith_1);function deepEquals(nt,tt){return isEqualWith$1(nt,tt,(rt,st)=>{if(typeof rt=="function"&&typeof st=="function")return!0})}var baseGetTag$3=_baseGetTag,isObjectLike$6=isObjectLike_1,symbolTag$2="[object Symbol]";function isSymbol$6(nt){return typeof nt=="symbol"||isObjectLike$6(nt)&&baseGetTag$3(nt)==symbolTag$2}var isSymbol_1=isSymbol$6,isArray$j=isArray_1,isSymbol$5=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$3(nt,tt){if(isArray$j(nt))return!1;var rt=typeof nt;return rt=="number"||rt=="symbol"||rt=="boolean"||nt==null||isSymbol$5(nt)?!0:reIsPlainProp.test(nt)||!reIsDeepProp.test(nt)||tt!=null&&nt in Object(tt)}var _isKey=isKey$3,MapCache=_MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize$1(nt,tt){if(typeof nt!="function"||tt!=null&&typeof tt!="function")throw new TypeError(FUNC_ERROR_TEXT);var rt=function(){var st=arguments,at=tt?tt.apply(this,st):st[0],lt=rt.cache;if(lt.has(at))return lt.get(at);var dt=nt.apply(this,st);return rt.cache=lt.set(at,dt)||lt,dt};return rt.cache=new(memoize$1.Cache||MapCache),rt}memoize$1.Cache=MapCache;var memoize_1=memoize$1;const memoize$2=getDefaultExportFromCjs(memoize_1);var memoize=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(nt){var tt=memoize(nt,function(st){return rt.size===MAX_MEMOIZE_SIZE&&rt.clear(),st}),rt=tt.cache;return tt}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$2=memoizeCapped(function(nt){var tt=[];return nt.charCodeAt(0)===46&&tt.push(""),nt.replace(rePropName,function(rt,st,at,lt){tt.push(at?lt.replace(reEscapeChar,"$1"):st||rt)}),tt}),_stringToPath=stringToPath$2;function arrayMap$9(nt,tt){for(var rt=-1,st=nt==null?0:nt.length,at=Array(st);++rt<st;)at[rt]=tt(nt[rt],rt,nt);return at}var _arrayMap=arrayMap$9,Symbol$3=_Symbol,arrayMap$8=_arrayMap,isArray$i=isArray_1,isSymbol$4=isSymbol_1,symbolProto$1=Symbol$3?Symbol$3.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(nt){if(typeof nt=="string")return nt;if(isArray$i(nt))return arrayMap$8(nt,baseToString$1)+"";if(isSymbol$4(nt))return symbolToString?symbolToString.call(nt):"";var tt=nt+"";return tt=="0"&&1/nt==-1/0?"-0":tt}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$4(nt){return nt==null?"":baseToString(nt)}var toString_1=toString$4,isArray$h=isArray_1,isKey$2=_isKey,stringToPath$1=_stringToPath,toString$3=toString_1;function castPath$6(nt,tt){return isArray$h(nt)?nt:isKey$2(nt,tt)?[nt]:stringToPath$1(toString$3(nt))}var _castPath=castPath$6,isSymbol$3=isSymbol_1;function toKey$7(nt){if(typeof nt=="string"||isSymbol$3(nt))return nt;var tt=nt+"";return tt=="0"&&1/nt==-1/0?"-0":tt}var _toKey=toKey$7,castPath$5=_castPath,toKey$6=_toKey;function baseGet$5(nt,tt){tt=castPath$5(tt,nt);for(var rt=0,st=tt.length;nt!=null&&rt<st;)nt=nt[toKey$6(tt[rt++])];return rt&&rt==st?nt:void 0}var _baseGet=baseGet$5,baseGet$4=_baseGet;function get$2(nt,tt,rt){var st=nt==null?void 0:baseGet$4(nt,tt);return st===void 0?rt:st}var get_1=get$2;const _get=getDefaultExportFromCjs(get_1);var baseKeys=_baseKeys,getTag$3=_getTag,isArguments$3=isArguments_1,isArray$g=isArray_1,isArrayLike$5=isArrayLike_1,isBuffer$4=isBufferExports,isPrototype$2=_isPrototype,isTypedArray$4=isTypedArray_1,mapTag$3="[object Map]",setTag$3="[object Set]",objectProto$5=Object.prototype,hasOwnProperty$7=objectProto$5.hasOwnProperty;function isEmpty(nt){if(nt==null)return!0;if(isArrayLike$5(nt)&&(isArray$g(nt)||typeof nt=="string"||typeof nt.splice=="function"||isBuffer$4(nt)||isTypedArray$4(nt)||isArguments$3(nt)))return!nt.length;var tt=getTag$3(nt);if(tt==mapTag$3||tt==setTag$3)return!nt.size;if(isPrototype$2(nt))return!baseKeys(nt).length;for(var rt in nt)if(hasOwnProperty$7.call(nt,rt))return!1;return!0}var isEmpty_1=isEmpty;const _isEmpty=getDefaultExportFromCjs(isEmpty_1);var jsonpointer={},hasExcape=/~/,escapeMatcher=/~[01]/g;function escapeReplacer(nt){switch(nt){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+nt)}function untilde(nt){return hasExcape.test(nt)?nt.replace(escapeMatcher,escapeReplacer):nt}function setter(nt,tt,rt){for(var st,at,lt=1,dt=tt.length;lt<dt;){if(tt[lt]==="constructor"||tt[lt]==="prototype"||tt[lt]==="__proto__")return nt;if(st=untilde(tt[lt++]),at=dt>lt,typeof nt[st]>"u"&&(Array.isArray(nt)&&st==="-"&&(st=nt.length),at&&(tt[lt]!==""&&tt[lt]<1/0||tt[lt]==="-"?nt[st]=[]:nt[st]={})),!at)break;nt=nt[st]}var yt=nt[st];return rt===void 0?delete nt[st]:nt[st]=rt,yt}function compilePointer(nt){if(typeof nt=="string"){if(nt=nt.split("/"),nt[0]==="")return nt;throw new Error("Invalid JSON pointer.")}else if(Array.isArray(nt)){for(const tt of nt)if(typeof tt!="string"&&typeof tt!="number")throw new Error("Invalid JSON pointer. Must be of type string or number.");return nt}throw new Error("Invalid JSON pointer.")}function get$1(nt,tt){if(typeof nt!="object")throw new Error("Invalid input object.");tt=compilePointer(tt);var rt=tt.length;if(rt===1)return nt;for(var st=1;st<rt;){if(nt=nt[untilde(tt[st++])],rt===st)return nt;if(typeof nt!="object"||nt===null)return}}function set$2(nt,tt,rt){if(typeof nt!="object")throw new Error("Invalid input object.");if(tt=compilePointer(tt),tt.length===0)throw new Error("Invalid JSON pointer for set.");return setter(nt,tt,rt)}function compile$3(nt){var tt=compilePointer(nt);return{get:function(rt){return get$1(rt,tt)},set:function(rt,st){return set$2(rt,tt,st)}}}jsonpointer.get=get$1;jsonpointer.set=set$2;jsonpointer.compile=compile$3;function arrayEach$3(nt,tt){for(var rt=-1,st=nt==null?0:nt.length;++rt<st&&tt(nt[rt],rt,nt)!==!1;);return nt}var _arrayEach=arrayEach$3,getNative=_getNative,defineProperty$2=function(){try{var nt=getNative(Object,"defineProperty");return nt({},"",{}),nt}catch{}}(),_defineProperty$1=defineProperty$2,defineProperty$1=_defineProperty$1;function baseAssignValue$3(nt,tt,rt){tt=="__proto__"&&defineProperty$1?defineProperty$1(nt,tt,{configurable:!0,enumerable:!0,value:rt,writable:!0}):nt[tt]=rt}var _baseAssignValue=baseAssignValue$3,baseAssignValue$2=_baseAssignValue,eq$3=eq_1,objectProto$4=Object.prototype,hasOwnProperty$6=objectProto$4.hasOwnProperty;function assignValue$3(nt,tt,rt){var st=nt[tt];(!(hasOwnProperty$6.call(nt,tt)&&eq$3(st,rt))||rt===void 0&&!(tt in nt))&&baseAssignValue$2(nt,tt,rt)}var _assignValue=assignValue$3,assignValue$2=_assignValue,baseAssignValue$1=_baseAssignValue;function copyObject$6(nt,tt,rt,st){var at=!rt;rt||(rt={});for(var lt=-1,dt=tt.length;++lt<dt;){var yt=tt[lt],vt=st?st(rt[yt],nt[yt],yt,rt,nt):void 0;vt===void 0&&(vt=nt[yt]),at?baseAssignValue$1(rt,yt,vt):assignValue$2(rt,yt,vt)}return rt}var _copyObject=copyObject$6,copyObject$5=_copyObject,keys$8=keys_1;function baseAssign$1(nt,tt){return nt&&copyObject$5(tt,keys$8(tt),nt)}var _baseAssign=baseAssign$1;function nativeKeysIn$1(nt){var tt=[];if(nt!=null)for(var rt in Object(nt))tt.push(rt);return tt}var _nativeKeysIn=nativeKeysIn$1,isObject$b=isObject_1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$3=Object.prototype,hasOwnProperty$5=objectProto$3.hasOwnProperty;function baseKeysIn$1(nt){if(!isObject$b(nt))return nativeKeysIn(nt);var tt=isPrototype$1(nt),rt=[];for(var st in nt)st=="constructor"&&(tt||!hasOwnProperty$5.call(nt,st))||rt.push(st);return rt}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike$4=isArrayLike_1;function keysIn$6(nt){return isArrayLike$4(nt)?arrayLikeKeys(nt,!0):baseKeysIn(nt)}var keysIn_1=keysIn$6,copyObject$4=_copyObject,keysIn$5=keysIn_1;function baseAssignIn$1(nt,tt){return nt&&copyObject$4(tt,keysIn$5(tt),nt)}var _baseAssignIn=baseAssignIn$1,_cloneBuffer={exports:{}};_cloneBuffer.exports;(function(nt,tt){var rt=_root,st=tt&&!tt.nodeType&&tt,at=st&&!0&&nt&&!nt.nodeType&&nt,lt=at&&at.exports===st,dt=lt?rt.Buffer:void 0,yt=dt?dt.allocUnsafe:void 0;function vt(_t,bt){if(bt)return _t.slice();var Mt=_t.length,Ct=yt?yt(Mt):new _t.constructor(Mt);return _t.copy(Ct),Ct}nt.exports=vt})(_cloneBuffer,_cloneBuffer.exports);var _cloneBufferExports=_cloneBuffer.exports;function copyArray$5(nt,tt){var rt=-1,st=nt.length;for(tt||(tt=Array(st));++rt<st;)tt[rt]=nt[rt];return tt}var _copyArray=copyArray$5,copyObject$3=_copyObject,getSymbols$1=_getSymbols;function copySymbols$1(nt,tt){return copyObject$3(nt,getSymbols$1(nt),tt)}var _copySymbols=copySymbols$1,arrayPush$1=_arrayPush,getPrototype$2=_getPrototype,getSymbols=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols?function(nt){for(var tt=[];nt;)arrayPush$1(tt,getSymbols(nt)),nt=getPrototype$2(nt);return tt}:stubArray,_getSymbolsIn=getSymbolsIn$2,copyObject$2=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(nt,tt){return copyObject$2(nt,getSymbolsIn$1(nt),tt)}var _copySymbolsIn=copySymbolsIn$1,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$4=keysIn_1;function getAllKeysIn$2(nt){return baseGetAllKeys(nt,keysIn$4,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$2,objectProto$2=Object.prototype,hasOwnProperty$4=objectProto$2.hasOwnProperty;function initCloneArray$1(nt){var tt=nt.length,rt=new nt.constructor(tt);return tt&&typeof nt[0]=="string"&&hasOwnProperty$4.call(nt,"index")&&(rt.index=nt.index,rt.input=nt.input),rt}var _initCloneArray=initCloneArray$1,Uint8Array$1=_Uint8Array;function cloneArrayBuffer$3(nt){var tt=new nt.constructor(nt.byteLength);return new Uint8Array$1(tt).set(new Uint8Array$1(nt)),tt}var _cloneArrayBuffer=cloneArrayBuffer$3,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneDataView$1(nt,tt){var rt=tt?cloneArrayBuffer$2(nt.buffer):nt.buffer;return new nt.constructor(rt,nt.byteOffset,nt.byteLength)}var _cloneDataView=cloneDataView$1,reFlags=/\w*$/;function cloneRegExp$1(nt){var tt=new nt.constructor(nt.source,reFlags.exec(nt));return tt.lastIndex=nt.lastIndex,tt}var _cloneRegExp=cloneRegExp$1,Symbol$2=_Symbol,symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol$1(nt){return symbolValueOf?Object(symbolValueOf.call(nt)):{}}var _cloneSymbol=cloneSymbol$1,cloneArrayBuffer$1=_cloneArrayBuffer;function cloneTypedArray$2(nt,tt){var rt=tt?cloneArrayBuffer$1(nt.buffer):nt.buffer;return new nt.constructor(rt,nt.byteOffset,nt.length)}var _cloneTypedArray=cloneTypedArray$2,cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray$1=_cloneTypedArray,boolTag$2="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$2="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag$1(nt,tt,rt){var st=nt.constructor;switch(tt){case arrayBufferTag$1:return cloneArrayBuffer(nt);case boolTag$2:case dateTag$1:return new st(+nt);case dataViewTag$1:return cloneDataView(nt,rt);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray$1(nt,rt);case mapTag$2:return new st;case numberTag$2:case stringTag$2:return new st(nt);case regexpTag$1:return cloneRegExp(nt);case setTag$2:return new st;case symbolTag$1:return cloneSymbol(nt)}}var _initCloneByTag=initCloneByTag$1,isObject$a=isObject_1,objectCreate=Object.create,baseCreate$2=function(){function nt(){}return function(tt){if(!isObject$a(tt))return{};if(objectCreate)return objectCreate(tt);nt.prototype=tt;var rt=new nt;return nt.prototype=void 0,rt}}(),_baseCreate=baseCreate$2,baseCreate$1=_baseCreate,getPrototype$1=_getPrototype,isPrototype=_isPrototype;function initCloneObject$2(nt){return typeof nt.constructor=="function"&&!isPrototype(nt)?baseCreate$1(getPrototype$1(nt)):{}}var _initCloneObject=initCloneObject$2,getTag$2=_getTag,isObjectLike$5=isObjectLike_1,mapTag$1="[object Map]";function baseIsMap$1(nt){return isObjectLike$5(nt)&&getTag$2(nt)==mapTag$1}var _baseIsMap=baseIsMap$1,baseIsMap=_baseIsMap,baseUnary$5=_baseUnary,nodeUtil$1=_nodeUtilExports,nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap?baseUnary$5(nodeIsMap):baseIsMap,isMap_1=isMap$1,getTag$1=_getTag,isObjectLike$4=isObjectLike_1,setTag$1="[object Set]";function baseIsSet$1(nt){return isObjectLike$4(nt)&&getTag$1(nt)==setTag$1}var _baseIsSet=baseIsSet$1,baseIsSet=_baseIsSet,baseUnary$4=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$1=nodeIsSet?baseUnary$4(nodeIsSet):baseIsSet,isSet_1=isSet$1,Stack$2=_Stack,arrayEach$2=_arrayEach,assignValue$1=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer$1=_cloneBufferExports,copyArray$4=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys=_getAllKeys,getAllKeysIn$1=_getAllKeysIn,getTag=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject$1=_initCloneObject,isArray$f=isArray_1,isBuffer$3=isBufferExports,isMap=isMap_1,isObject$9=isObject_1,isSet=isSet_1,keys$7=keys_1,keysIn$3=keysIn_1,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag$1="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag$1="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag$1]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag$1]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag$1]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone$2(nt,tt,rt,st,at,lt){var dt,yt=tt&CLONE_DEEP_FLAG$2,vt=tt&CLONE_FLAT_FLAG$1,_t=tt&CLONE_SYMBOLS_FLAG$2;if(rt&&(dt=at?rt(nt,st,at,lt):rt(nt)),dt!==void 0)return dt;if(!isObject$9(nt))return nt;var bt=isArray$f(nt);if(bt){if(dt=initCloneArray(nt),!yt)return copyArray$4(nt,dt)}else{var Mt=getTag(nt),Ct=Mt==funcTag||Mt==genTag;if(isBuffer$3(nt))return cloneBuffer$1(nt,yt);if(Mt==objectTag||Mt==argsTag||Ct&&!at){if(dt=vt||Ct?{}:initCloneObject$1(nt),!yt)return vt?copySymbolsIn(nt,baseAssignIn(dt,nt)):copySymbols(nt,baseAssign(dt,nt))}else{if(!cloneableTags[Mt])return at?nt:{};dt=initCloneByTag(nt,Mt,yt)}}lt||(lt=new Stack$2);var Tt=lt.get(nt);if(Tt)return Tt;lt.set(nt,dt),isSet(nt)?nt.forEach(function(Et){dt.add(baseClone$2(Et,tt,rt,Et,nt,lt))}):isMap(nt)&&nt.forEach(function(Et,wt){dt.set(wt,baseClone$2(Et,tt,rt,wt,nt,lt))});var $t=_t?vt?getAllKeysIn$1:getAllKeys:vt?keysIn$3:keys$7,Rt=bt?void 0:$t(nt);return arrayEach$2(Rt||nt,function(Et,wt){Rt&&(wt=Et,Et=nt[wt]),assignValue$1(dt,wt,baseClone$2(Et,tt,rt,wt,nt,lt))}),dt}var _baseClone=baseClone$2;function last$2(nt){var tt=nt==null?0:nt.length;return tt?nt[tt-1]:void 0}var last_1=last$2;function baseSlice$1(nt,tt,rt){var st=-1,at=nt.length;tt<0&&(tt=-tt>at?0:at+tt),rt=rt>at?at:rt,rt<0&&(rt+=at),at=tt>rt?0:rt-tt>>>0,tt>>>=0;for(var lt=Array(at);++st<at;)lt[st]=nt[st+tt];return lt}var _baseSlice=baseSlice$1,baseGet$3=_baseGet,baseSlice=_baseSlice;function parent$1(nt,tt){return tt.length<2?nt:baseGet$3(nt,baseSlice(tt,0,-1))}var _parent=parent$1,castPath$4=_castPath,last$1=last_1,parent=_parent,toKey$5=_toKey;function baseUnset$2(nt,tt){return tt=castPath$4(tt,nt),nt=parent(nt,tt),nt==null||delete nt[toKey$5(last$1(tt))]}var _baseUnset=baseUnset$2,isPlainObject$5=isPlainObject_1;function customOmitClone$1(nt){return isPlainObject$5(nt)?void 0:nt}var _customOmitClone=customOmitClone$1,Symbol$1=_Symbol,isArguments$2=isArguments_1,isArray$e=isArray_1,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable$1(nt){return isArray$e(nt)||isArguments$2(nt)||!!(spreadableSymbol&&nt&&nt[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$4(nt,tt,rt,st,at){var lt=-1,dt=nt.length;for(rt||(rt=isFlattenable),at||(at=[]);++lt<dt;){var yt=nt[lt];tt>0&&rt(yt)?tt>1?baseFlatten$4(yt,tt-1,rt,st,at):arrayPush(at,yt):st||(at[at.length]=yt)}return at}var _baseFlatten=baseFlatten$4,baseFlatten$3=_baseFlatten;function flatten$4(nt){var tt=nt==null?0:nt.length;return tt?baseFlatten$3(nt,1):[]}var flatten_1=flatten$4;function apply$2(nt,tt,rt){switch(rt.length){case 0:return nt.call(tt);case 1:return nt.call(tt,rt[0]);case 2:return nt.call(tt,rt[0],rt[1]);case 3:return nt.call(tt,rt[0],rt[1],rt[2])}return nt.apply(tt,rt)}var _apply=apply$2,apply$1=_apply,nativeMax=Math.max;function overRest$2(nt,tt,rt){return tt=nativeMax(tt===void 0?nt.length-1:tt,0),function(){for(var st=arguments,at=-1,lt=nativeMax(st.length-tt,0),dt=Array(lt);++at<lt;)dt[at]=st[tt+at];at=-1;for(var yt=Array(tt+1);++at<tt;)yt[at]=st[at];return yt[tt]=rt(dt),apply$1(nt,this,yt)}}var _overRest=overRest$2;function constant$2(nt){return function(){return nt}}var constant_1=constant$2;function identity$8(nt){return nt}var identity_1=identity$8,constant$1=constant_1,defineProperty=_defineProperty$1,identity$7=identity_1,baseSetToString$1=defineProperty?function(nt,tt){return defineProperty(nt,"toString",{configurable:!0,enumerable:!1,value:constant$1(tt),writable:!0})}:identity$7,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(nt){var tt=0,rt=0;return function(){var st=nativeNow(),at=HOT_SPAN-(st-rt);if(rt=st,at>0){if(++tt>=HOT_COUNT)return arguments[0]}else tt=0;return nt.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$2=shortOut(baseSetToString),_setToString=setToString$2,flatten$3=flatten_1,overRest$1=_overRest,setToString$1=_setToString;function flatRest$2(nt){return setToString$1(overRest$1(nt,void 0,flatten$3),nt+"")}var _flatRest=flatRest$2,arrayMap$7=_arrayMap,baseClone$1=_baseClone,baseUnset$1=_baseUnset,castPath$3=_castPath,copyObject$1=_copyObject,customOmitClone=_customOmitClone,flatRest$1=_flatRest,getAllKeysIn=_getAllKeysIn,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,omit=flatRest$1(function(nt,tt){var rt={};if(nt==null)return rt;var st=!1;tt=arrayMap$7(tt,function(lt){return lt=castPath$3(lt,nt),st||(st=lt.length>1),lt}),copyObject$1(nt,getAllKeysIn(nt),rt),st&&(rt=baseClone$1(rt,CLONE_DEEP_FLAG$1|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG$1,customOmitClone));for(var at=tt.length;at--;)baseUnset$1(rt,tt[at]);return rt}),omit_1=omit;const omit$1=getDefaultExportFromCjs(omit_1);function splitKeyElementFromObject(nt,tt){const rt=tt[nt];return[omit$1(tt,[nt]),rt]}function findSchemaDefinitionRecursive(nt,tt={},rt=[]){const st=nt||"";let at;if(st.startsWith("#"))at=decodeURIComponent(st.substring(1));else throw new Error(`Could not find a definition for ${nt}.`);const lt=jsonpointer.get(tt,at);if(lt===void 0)throw new Error(`Could not find a definition for ${nt}.`);const dt=lt[REF_KEY];if(dt){if(rt.includes(dt)){if(rt.length===1)throw new Error(`Definition for ${nt} is a circular reference`);const[bt,...Mt]=rt,Ct=[...Mt,st,bt].join(" -> ");throw new Error(`Definition for ${bt} contains a circular reference through ${Ct}`)}const[yt,vt]=splitKeyElementFromObject(REF_KEY,lt),_t=findSchemaDefinitionRecursive(vt,tt,[...rt,st]);return Object.keys(yt).length>0?{...yt,..._t}:_t}return lt}function findSchemaDefinition(nt,tt={}){return findSchemaDefinitionRecursive(nt,tt,[])}var objectProto$1=Object.prototype,hasOwnProperty$3=objectProto$1.hasOwnProperty;function baseHas$1(nt,tt){return nt!=null&&hasOwnProperty$3.call(nt,tt)}var _baseHas=baseHas$1,castPath$2=_castPath,isArguments$1=isArguments_1,isArray$d=isArray_1,isIndex$2=_isIndex,isLength=isLength_1,toKey$4=_toKey;function hasPath$2(nt,tt,rt){tt=castPath$2(tt,nt);for(var st=-1,at=tt.length,lt=!1;++st<at;){var dt=toKey$4(tt[st]);if(!(lt=nt!=null&&rt(nt,dt)))break;nt=nt[dt]}return lt||++st!=at?lt:(at=nt==null?0:nt.length,!!at&&isLength(at)&&isIndex$2(dt,at)&&(isArray$d(nt)||isArguments$1(nt)))}var _hasPath=hasPath$2,baseHas=_baseHas,hasPath$1=_hasPath;function has$3(nt,tt){return nt!=null&&hasPath$1(nt,tt,baseHas)}var has_1=has$3;const has$4=getDefaultExportFromCjs(has_1);var baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,numberTag="[object Number]";function isNumber$4(nt){return typeof nt=="number"||isObjectLike$3(nt)&&baseGetTag$2(nt)==numberTag}var isNumber_1=isNumber$4;const isNumber$5=getDefaultExportFromCjs(isNumber_1);var baseGetTag$1=_baseGetTag,isArray$c=isArray_1,isObjectLike$2=isObjectLike_1,stringTag="[object String]";function isString$1(nt){return typeof nt=="string"||!isArray$c(nt)&&isObjectLike$2(nt)&&baseGetTag$1(nt)==stringTag}var isString_1=isString$1;const isString$2=getDefaultExportFromCjs(isString_1);function arrayReduce$1(nt,tt,rt,st){var at=-1,lt=nt==null?0:nt.length;for(st&&lt&&(rt=nt[++at]);++at<lt;)rt=tt(rt,nt[at],at,nt);return rt}var _arrayReduce=arrayReduce$1;function createBaseFor$1(nt){return function(tt,rt,st){for(var at=-1,lt=Object(tt),dt=st(tt),yt=dt.length;yt--;){var vt=dt[nt?yt:++at];if(rt(lt[vt],vt,lt)===!1)break}return tt}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$2=createBaseFor(),_baseFor=baseFor$2,baseFor$1=_baseFor,keys$6=keys_1;function baseForOwn$2(nt,tt){return nt&&baseFor$1(nt,tt,keys$6)}var _baseForOwn=baseForOwn$2,isArrayLike$3=isArrayLike_1;function createBaseEach$1(nt,tt){return function(rt,st){if(rt==null)return rt;if(!isArrayLike$3(rt))return nt(rt,st);for(var at=rt.length,lt=tt?at:-1,dt=Object(rt);(tt?lt--:++lt<at)&&st(dt[lt],lt,dt)!==!1;);return rt}}var _createBaseEach=createBaseEach$1,baseForOwn$1=_baseForOwn,createBaseEach=_createBaseEach,baseEach$3=createBaseEach(baseForOwn$1),_baseEach=baseEach$3,Stack$1=_Stack,baseIsEqual$2=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(nt,tt,rt,st){var at=rt.length,lt=at,dt=!st;if(nt==null)return!lt;for(nt=Object(nt);at--;){var yt=rt[at];if(dt&&yt[2]?yt[1]!==nt[yt[0]]:!(yt[0]in nt))return!1}for(;++at<lt;){yt=rt[at];var vt=yt[0],_t=nt[vt],bt=yt[1];if(dt&&yt[2]){if(_t===void 0&&!(vt in nt))return!1}else{var Mt=new Stack$1;if(st)var Ct=st(_t,bt,vt,nt,tt,Mt);if(!(Ct===void 0?baseIsEqual$2(bt,_t,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,st,Mt):Ct))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$8=isObject_1;function isStrictComparable$2(nt){return nt===nt&&!isObject$8(nt)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$5=keys_1;function getMatchData$1(nt){for(var tt=keys$5(nt),rt=tt.length;rt--;){var st=tt[rt],at=nt[st];tt[rt]=[st,at,isStrictComparable$1(at)]}return tt}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(nt,tt){return function(rt){return rt==null?!1:rt[nt]===tt&&(tt!==void 0||nt in Object(rt))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(nt){var tt=getMatchData(nt);return tt.length==1&&tt[0][2]?matchesStrictComparable$1(tt[0][0],tt[0][1]):function(rt){return rt===nt||baseIsMatch(rt,nt,tt)}}var _baseMatches=baseMatches$1;function baseHasIn$1(nt,tt){return nt!=null&&tt in Object(nt)}var _baseHasIn=baseHasIn$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$2(nt,tt){return nt!=null&&hasPath(nt,tt,baseHasIn)}var hasIn_1=hasIn$2,baseIsEqual$1=_baseIsEqual,get=get_1,hasIn$1=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$3=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(nt,tt){return isKey$1(nt)&&isStrictComparable(tt)?matchesStrictComparable(toKey$3(nt),tt):function(rt){var st=get(rt,nt);return st===void 0&&st===tt?hasIn$1(rt,nt):baseIsEqual$1(tt,st,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function baseProperty$1(nt){return function(tt){return tt==null?void 0:tt[nt]}}var _baseProperty=baseProperty$1,baseGet$2=_baseGet;function basePropertyDeep$1(nt){return function(tt){return baseGet$2(tt,nt)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey$2=_toKey;function property$1(nt){return isKey(nt)?baseProperty(toKey$2(nt)):basePropertyDeep(nt)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$6=identity_1,isArray$b=isArray_1,property=property_1;function baseIteratee$3(nt){return typeof nt=="function"?nt:nt==null?identity$6:typeof nt=="object"?isArray$b(nt)?baseMatchesProperty(nt[0],nt[1]):baseMatches(nt):property(nt)}var _baseIteratee=baseIteratee$3;function baseReduce$1(nt,tt,rt,st,at){return at(nt,function(lt,dt,yt){rt=st?(st=!1,lt):tt(rt,lt,dt,yt)}),rt}var _baseReduce=baseReduce$1,arrayReduce=_arrayReduce,baseEach$2=_baseEach,baseIteratee$2=_baseIteratee,baseReduce=_baseReduce,isArray$a=isArray_1;function reduce(nt,tt,rt){var st=isArray$a(nt)?arrayReduce:baseReduce,at=arguments.length<3;return st(nt,baseIteratee$2(tt),rt,at,baseEach$2)}var reduce_1=reduce;const reduce$1=getDefaultExportFromCjs(reduce_1);var identity$5=identity_1;function castFunction$2(nt){return typeof nt=="function"?nt:identity$5}var _castFunction=castFunction$2,reWhitespace=/\s/;function trimmedEndIndex$1(nt){for(var tt=nt.length;tt--&&reWhitespace.test(nt.charAt(tt)););return tt}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(nt){return nt&&nt.slice(0,trimmedEndIndex(nt)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$7=isObject_1,isSymbol$2=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(nt){if(typeof nt=="number")return nt;if(isSymbol$2(nt))return NAN;if(isObject$7(nt)){var tt=typeof nt.valueOf=="function"?nt.valueOf():nt;nt=isObject$7(tt)?tt+"":tt}if(typeof nt!="string")return nt===0?nt:+nt;nt=baseTrim(nt);var rt=reIsBinary.test(nt);return rt||reIsOctal.test(nt)?freeParseInt(nt.slice(2),rt?2:8):reIsBadHex.test(nt)?NAN:+nt}var toNumber_1=toNumber$1,toNumber=toNumber_1,INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(nt){if(!nt)return nt===0?nt:0;if(nt=toNumber(nt),nt===INFINITY$2||nt===-1/0){var tt=nt<0?-1:1;return tt*MAX_INTEGER}return nt===nt?nt:0}var toFinite_1=toFinite$1,toFinite=toFinite_1;function toInteger$1(nt){var tt=toFinite(nt),rt=tt%1;return tt===tt?rt?tt-rt:tt:0}var toInteger_1=toInteger$1,baseTimes=_baseTimes,castFunction$1=_castFunction,toInteger=toInteger_1,MAX_SAFE_INTEGER=9007199254740991,MAX_ARRAY_LENGTH=4294967295,nativeMin$1=Math.min;function times(nt,tt){if(nt=toInteger(nt),nt<1||nt>MAX_SAFE_INTEGER)return[];var rt=MAX_ARRAY_LENGTH,st=nativeMin$1(nt,MAX_ARRAY_LENGTH);tt=castFunction$1(tt),nt-=MAX_ARRAY_LENGTH;for(var at=baseTimes(st,tt);++rt<nt;)tt(rt);return at}var times_1=times;const times$1=getDefaultExportFromCjs(times_1);function getOptionMatchingSimpleDiscriminator(nt,tt,rt){var st;if(nt&&rt){const at=_get(nt,rt);if(at===void 0)return;for(let lt=0;lt<tt.length;lt++){const dt=tt[lt],yt=_get(dt,[PROPERTIES_KEY,rt],{});if(!(yt.type==="object"||yt.type==="array")&&(yt.const===at||!((st=yt.enum)===null||st===void 0)&&st.includes(at)))return lt}}}function getMatchingOption(nt,tt,rt,st,at){if(tt===void 0)return 0;const lt=getOptionMatchingSimpleDiscriminator(tt,rt,at);if(isNumber$5(lt))return lt;for(let dt=0;dt<rt.length;dt++){const yt=rt[dt];if(at&&has$4(yt,[PROPERTIES_KEY,at])){const vt=_get(tt,at),_t=_get(yt,[PROPERTIES_KEY,at],{});if(nt.isValid(_t,vt,st))return dt}else if(yt[PROPERTIES_KEY]){const vt={anyOf:Object.keys(yt[PROPERTIES_KEY]).map(bt=>({required:[bt]}))};let _t;if(yt.anyOf){const{...bt}=yt;bt.allOf?bt.allOf=bt.allOf.slice():bt.allOf=[],bt.allOf.push(vt),_t=bt}else _t=Object.assign({},yt,vt);if(delete _t.required,nt.isValid(_t,tt,st))return dt}else if(nt.isValid(yt,tt,st))return dt}return 0}function getFirstMatchingOption(nt,tt,rt,st,at){return getMatchingOption(nt,tt,rt,st,at)}var baseIsEqual=_baseIsEqual;function isEqual$2(nt,tt){return baseIsEqual(nt,tt)}var isEqual_1=isEqual$2;const isEqual$3=getDefaultExportFromCjs(isEqual_1);var assignValue=_assignValue,castPath$1=_castPath,isIndex$1=_isIndex,isObject$6=isObject_1,toKey$1=_toKey;function baseSet$3(nt,tt,rt,st){if(!isObject$6(nt))return nt;tt=castPath$1(tt,nt);for(var at=-1,lt=tt.length,dt=lt-1,yt=nt;yt!=null&&++at<lt;){var vt=toKey$1(tt[at]),_t=rt;if(vt==="__proto__"||vt==="constructor"||vt==="prototype")return nt;if(at!=dt){var bt=yt[vt];_t=st?st(bt,vt,yt):void 0,_t===void 0&&(_t=isObject$6(bt)?bt:isIndex$1(tt[at+1])?[]:{})}assignValue(yt,vt,_t),yt=yt[vt]}return nt}var _baseSet=baseSet$3,baseSet$2=_baseSet;function set(nt,tt,rt){return nt==null?nt:baseSet$2(nt,tt,rt)}var set_1=set;const set$1=getDefaultExportFromCjs(set_1);var arrayEach$1=_arrayEach,baseCreate=_baseCreate,baseForOwn=_baseForOwn,baseIteratee$1=_baseIteratee,getPrototype=_getPrototype,isArray$9=isArray_1,isBuffer$2=isBufferExports,isFunction$5=isFunction_1,isObject$5=isObject_1,isTypedArray$3=isTypedArray_1;function transform(nt,tt,rt){var st=isArray$9(nt),at=st||isBuffer$2(nt)||isTypedArray$3(nt);if(tt=baseIteratee$1(tt),rt==null){var lt=nt&&nt.constructor;at?rt=st?new lt:[]:isObject$5(nt)?rt=isFunction$5(lt)?baseCreate(getPrototype(nt)):{}:rt={}}return(at?arrayEach$1:baseForOwn)(nt,function(dt,yt,vt){return tt(rt,dt,yt,vt)}),rt}var transform_1=transform;const transform$1=getDefaultExportFromCjs(transform_1);var baseAssignValue=_baseAssignValue,eq$2=eq_1;function assignMergeValue$2(nt,tt,rt){(rt!==void 0&&!eq$2(nt[tt],rt)||rt===void 0&&!(tt in nt))&&baseAssignValue(nt,tt,rt)}var _assignMergeValue=assignMergeValue$2,isArrayLike$2=isArrayLike_1,isObjectLike$1=isObjectLike_1;function isArrayLikeObject$4(nt){return isObjectLike$1(nt)&&isArrayLike$2(nt)}var isArrayLikeObject_1=isArrayLikeObject$4;function safeGet$2(nt,tt){if(!(tt==="constructor"&&typeof nt[tt]=="function")&&tt!="__proto__")return nt[tt]}var _safeGet=safeGet$2,copyObject=_copyObject,keysIn$2=keysIn_1;function toPlainObject$1(nt){return copyObject(nt,keysIn$2(nt))}var toPlainObject_1=toPlainObject$1,assignMergeValue$1=_assignMergeValue,cloneBuffer=_cloneBufferExports,cloneTypedArray=_cloneTypedArray,copyArray$3=_copyArray,initCloneObject=_initCloneObject,isArguments=isArguments_1,isArray$8=isArray_1,isArrayLikeObject$3=isArrayLikeObject_1,isBuffer$1=isBufferExports,isFunction$4=isFunction_1,isObject$4=isObject_1,isPlainObject$4=isPlainObject_1,isTypedArray$2=isTypedArray_1,safeGet$1=_safeGet,toPlainObject=toPlainObject_1;function baseMergeDeep$1(nt,tt,rt,st,at,lt,dt){var yt=safeGet$1(nt,rt),vt=safeGet$1(tt,rt),_t=dt.get(vt);if(_t){assignMergeValue$1(nt,rt,_t);return}var bt=lt?lt(yt,vt,rt+"",nt,tt,dt):void 0,Mt=bt===void 0;if(Mt){var Ct=isArray$8(vt),Tt=!Ct&&isBuffer$1(vt),$t=!Ct&&!Tt&&isTypedArray$2(vt);bt=vt,Ct||Tt||$t?isArray$8(yt)?bt=yt:isArrayLikeObject$3(yt)?bt=copyArray$3(yt):Tt?(Mt=!1,bt=cloneBuffer(vt,!0)):$t?(Mt=!1,bt=cloneTypedArray(vt,!0)):bt=[]:isPlainObject$4(vt)||isArguments(vt)?(bt=yt,isArguments(yt)?bt=toPlainObject(yt):(!isObject$4(yt)||isFunction$4(yt))&&(bt=initCloneObject(vt))):Mt=!1}Mt&&(dt.set(vt,bt),at(bt,vt,st,lt,dt),dt.delete(vt)),assignMergeValue$1(nt,rt,bt)}var _baseMergeDeep=baseMergeDeep$1,Stack=_Stack,assignMergeValue=_assignMergeValue,baseFor=_baseFor,baseMergeDeep=_baseMergeDeep,isObject$3=isObject_1,keysIn$1=keysIn_1,safeGet=_safeGet;function baseMerge$3(nt,tt,rt,st,at){nt!==tt&&baseFor(tt,function(lt,dt){if(at||(at=new Stack),isObject$3(lt))baseMergeDeep(nt,tt,dt,rt,baseMerge$3,st,at);else{var yt=st?st(safeGet(nt,dt),lt,dt+"",nt,tt,at):void 0;yt===void 0&&(yt=lt),assignMergeValue(nt,dt,yt)}},keysIn$1)}var _baseMerge=baseMerge$3,identity$4=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$8(nt,tt){return setToString(overRest(nt,tt,identity$4),nt+"")}var _baseRest=baseRest$8,eq$1=eq_1,isArrayLike$1=isArrayLike_1,isIndex=_isIndex,isObject$2=isObject_1;function isIterateeCall$3(nt,tt,rt){if(!isObject$2(rt))return!1;var st=typeof tt;return(st=="number"?isArrayLike$1(rt)&&isIndex(tt,rt.length):st=="string"&&tt in rt)?eq$1(rt[tt],nt):!1}var _isIterateeCall=isIterateeCall$3,baseRest$7=_baseRest,isIterateeCall$2=_isIterateeCall;function createAssigner$2(nt){return baseRest$7(function(tt,rt){var st=-1,at=rt.length,lt=at>1?rt[at-1]:void 0,dt=at>2?rt[2]:void 0;for(lt=nt.length>3&&typeof lt=="function"?(at--,lt):void 0,dt&&isIterateeCall$2(rt[0],rt[1],dt)&&(lt=at<3?void 0:lt,at=1),tt=Object(tt);++st<at;){var yt=rt[st];yt&&nt(tt,yt,st,lt)}return tt})}var _createAssigner=createAssigner$2,baseMerge$2=_baseMerge,createAssigner$1=_createAssigner,merge$1=createAssigner$1(function(nt,tt,rt){baseMerge$2(nt,tt,rt)}),merge_1=merge$1;const merge$2=getDefaultExportFromCjs(merge_1);var baseFlatten$2=_baseFlatten,INFINITY$1=1/0;function flattenDeep$2(nt){var tt=nt==null?0:nt.length;return tt?baseFlatten$2(nt,INFINITY$1):[]}var flattenDeep_1=flattenDeep$2;const flattenDeep$3=getDefaultExportFromCjs(flattenDeep_1);function baseFindIndex$1(nt,tt,rt,st){for(var at=nt.length,lt=rt+(st?1:-1);st?lt--:++lt<at;)if(tt(nt[lt],lt,nt))return lt;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(nt){return nt!==nt}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(nt,tt,rt){for(var st=rt-1,at=nt.length;++st<at;)if(nt[st]===tt)return st;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$2(nt,tt,rt){return tt===tt?strictIndexOf(nt,tt,rt):baseFindIndex(nt,baseIsNaN,rt)}var _baseIndexOf=baseIndexOf$2,baseIndexOf$1=_baseIndexOf;function arrayIncludes$3(nt,tt){var rt=nt==null?0:nt.length;return!!rt&&baseIndexOf$1(nt,tt,0)>-1}var _arrayIncludes=arrayIncludes$3;function arrayIncludesWith$3(nt,tt,rt){for(var st=-1,at=nt==null?0:nt.length;++st<at;)if(rt(tt,nt[st]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$3;function noop$2(){}var noop_1=noop$2,Set$1=_Set,noop$1=noop_1,setToArray$1=_setToArray,INFINITY=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY?function(nt){return new Set$1(nt)}:noop$1,_createSet=createSet$1,SetCache$2=_SetCache,arrayIncludes$2=_arrayIncludes,arrayIncludesWith$2=_arrayIncludesWith,cacheHas$2=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE$1=200;function baseUniq$3(nt,tt,rt){var st=-1,at=arrayIncludes$2,lt=nt.length,dt=!0,yt=[],vt=yt;if(rt)dt=!1,at=arrayIncludesWith$2;else if(lt>=LARGE_ARRAY_SIZE$1){var _t=tt?null:createSet(nt);if(_t)return setToArray(_t);dt=!1,at=cacheHas$2,vt=new SetCache$2}else vt=tt?[]:yt;e:for(;++st<lt;){var bt=nt[st],Mt=tt?tt(bt):bt;if(bt=rt||bt!==0?bt:0,dt&&Mt===Mt){for(var Ct=vt.length;Ct--;)if(vt[Ct]===Mt)continue e;tt&&vt.push(Mt),yt.push(bt)}else at(vt,Mt,rt)||(vt!==yt&&vt.push(Mt),yt.push(bt))}return yt}var _baseUniq=baseUniq$3,baseUniq$2=_baseUniq;function uniq$5(nt){return nt&&nt.length?baseUniq$2(nt):[]}var uniq_1=uniq$5;const uniq$6=getDefaultExportFromCjs(uniq_1);var baseClone=_baseClone,CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep$1(nt){return baseClone(nt,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var cloneDeep_1=cloneDeep$1;const cloneDeep$2=getDefaultExportFromCjs(cloneDeep_1);var baseEach$1=_baseEach,isArrayLike=isArrayLike_1;function baseMap$1(nt,tt){var rt=-1,st=isArrayLike(nt)?Array(nt.length):[];return baseEach$1(nt,function(at,lt,dt){st[++rt]=tt(at,lt,dt)}),st}var _baseMap=baseMap$1;function baseSortBy$1(nt,tt){var rt=nt.length;for(nt.sort(tt);rt--;)nt[rt]=nt[rt].value;return nt}var _baseSortBy=baseSortBy$1,isSymbol$1=isSymbol_1;function compareAscending$1(nt,tt){if(nt!==tt){var rt=nt!==void 0,st=nt===null,at=nt===nt,lt=isSymbol$1(nt),dt=tt!==void 0,yt=tt===null,vt=tt===tt,_t=isSymbol$1(tt);if(!yt&&!_t&&!lt&&nt>tt||lt&&dt&&vt&&!yt&&!_t||st&&dt&&vt||!rt&&vt||!at)return 1;if(!st&&!lt&&!_t&&nt<tt||_t&&rt&&at&&!st&&!lt||yt&&rt&&at||!dt&&at||!vt)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(nt,tt,rt){for(var st=-1,at=nt.criteria,lt=tt.criteria,dt=at.length,yt=rt.length;++st<dt;){var vt=compareAscending(at[st],lt[st]);if(vt){if(st>=yt)return vt;var _t=rt[st];return vt*(_t=="desc"?-1:1)}}return nt.index-tt.index}var _compareMultiple=compareMultiple$1,arrayMap$6=_arrayMap,baseGet$1=_baseGet,baseIteratee=_baseIteratee,baseMap=_baseMap,baseSortBy=_baseSortBy,baseUnary$3=_baseUnary,compareMultiple=_compareMultiple,identity$3=identity_1,isArray$7=isArray_1;function baseOrderBy$1(nt,tt,rt){tt.length?tt=arrayMap$6(tt,function(lt){return isArray$7(lt)?function(dt){return baseGet$1(dt,lt.length===1?lt[0]:lt)}:lt}):tt=[identity$3];var st=-1;tt=arrayMap$6(tt,baseUnary$3(baseIteratee));var at=baseMap(nt,function(lt,dt,yt){var vt=arrayMap$6(tt,function(_t){return _t(lt)});return{criteria:vt,index:++st,value:lt}});return baseSortBy(at,function(lt,dt){return compareMultiple(lt,dt,rt)})}var _baseOrderBy=baseOrderBy$1,baseFlatten$1=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest$6=_baseRest,isIterateeCall$1=_isIterateeCall,sortBy$2=baseRest$6(function(nt,tt){if(nt==null)return[];var rt=tt.length;return rt>1&&isIterateeCall$1(nt,tt[0],tt[1])?tt=[]:rt>2&&isIterateeCall$1(tt[0],tt[1],tt[2])&&(tt=[tt[0]]),baseOrderBy(nt,baseFlatten$1(tt,1),[])}),sortBy_1=sortBy$2,baseUniq$1=_baseUniq;function uniqWith$5(nt,tt){return tt=typeof tt=="function"?tt:void 0,nt&&nt.length?baseUniq$1(nt,void 0,tt):[]}var uniqWith_1=uniqWith$5,baseRest$5=_baseRest,eq=eq_1,isIterateeCall=_isIterateeCall,keysIn=keysIn_1,objectProto=Object.prototype,hasOwnProperty$2=objectProto.hasOwnProperty,defaults$3=baseRest$5(function(nt,tt){nt=Object(nt);var rt=-1,st=tt.length,at=st>2?tt[2]:void 0;for(at&&isIterateeCall(tt[0],tt[1],at)&&(st=1);++rt<st;)for(var lt=tt[rt],dt=keysIn(lt),yt=-1,vt=dt.length;++yt<vt;){var _t=dt[yt],bt=nt[_t];(bt===void 0||eq(bt,objectProto[_t])&&!hasOwnProperty$2.call(nt,_t))&&(nt[_t]=lt[_t])}return nt}),defaults_1$1=defaults$3,SetCache$1=_SetCache,arrayIncludes$1=_arrayIncludes,arrayIncludesWith$1=_arrayIncludesWith,arrayMap$5=_arrayMap,baseUnary$2=_baseUnary,cacheHas$1=_cacheHas,nativeMin=Math.min;function baseIntersection$2(nt,tt,rt){for(var st=rt?arrayIncludesWith$1:arrayIncludes$1,at=nt[0].length,lt=nt.length,dt=lt,yt=Array(lt),vt=1/0,_t=[];dt--;){var bt=nt[dt];dt&&tt&&(bt=arrayMap$5(bt,baseUnary$2(tt))),vt=nativeMin(bt.length,vt),yt[dt]=!rt&&(tt||at>=120&&bt.length>=120)?new SetCache$1(dt&&bt):void 0}bt=nt[0];var Mt=-1,Ct=yt[0];e:for(;++Mt<at&&_t.length<vt;){var Tt=bt[Mt],$t=tt?tt(Tt):Tt;if(Tt=rt||Tt!==0?Tt:0,!(Ct?cacheHas$1(Ct,$t):st(_t,$t,rt))){for(dt=lt;--dt;){var Rt=yt[dt];if(!(Rt?cacheHas$1(Rt,$t):st(nt[dt],$t,rt)))continue e}Ct&&Ct.push($t),_t.push(Tt)}}return _t}var _baseIntersection=baseIntersection$2,isArrayLikeObject$2=isArrayLikeObject_1;function castArrayLikeObject$2(nt){return isArrayLikeObject$2(nt)?nt:[]}var _castArrayLikeObject=castArrayLikeObject$2,arrayMap$4=_arrayMap,baseIntersection$1=_baseIntersection,baseRest$4=_baseRest,castArrayLikeObject$1=_castArrayLikeObject,last=last_1,intersectionWith$2=baseRest$4(function(nt){var tt=last(nt),rt=arrayMap$4(nt,castArrayLikeObject$1);return tt=typeof tt=="function"?tt:void 0,tt&&rt.pop(),rt.length&&rt[0]===nt[0]?baseIntersection$1(rt,void 0,tt):[]}),intersectionWith_1=intersectionWith$2,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,boolTag="[object Boolean]";function isBoolean$2(nt){return nt===!0||nt===!1||isObjectLike(nt)&&baseGetTag(nt)==boolTag}var isBoolean_1=isBoolean$2,isEqual$1=isEqual_1,sortBy$1=sortBy_1,uniq$4=uniq_1,uniqWith$4=uniqWith_1,defaults$2=defaults_1$1,intersectionWith$1=intersectionWith_1,isPlainObject$3=isPlainObject_1,isBoolean$1=isBoolean_1,normalizeArray=nt=>Array.isArray(nt)?nt:[nt],undef=nt=>nt===void 0,keys$4=nt=>isPlainObject$3(nt)||Array.isArray(nt)?Object.keys(nt):[],has$2=(nt,tt)=>nt.hasOwnProperty(tt),stringArray$1=nt=>sortBy$1(uniq$4(nt)),undefEmpty=nt=>undef(nt)||Array.isArray(nt)&&nt.length===0,keyValEqual=(nt,tt,rt,st)=>tt&&has$2(tt,rt)&&nt&&has$2(nt,rt)&&st(nt[rt],tt[rt]),undefAndZero=(nt,tt)=>undef(nt)&&tt===0||undef(tt)&&nt===0||isEqual$1(nt,tt),falseUndefined=(nt,tt)=>undef(nt)&&tt===!1||undef(tt)&&nt===!1||isEqual$1(nt,tt),emptySchema=nt=>undef(nt)||isEqual$1(nt,{})||nt===!0,emptyObjUndef=nt=>undef(nt)||isEqual$1(nt,{}),isSchema$3=nt=>undef(nt)||isPlainObject$3(nt)||nt===!0||nt===!1;function undefArrayEqual(nt,tt){return undefEmpty(nt)&&undefEmpty(tt)?!0:isEqual$1(stringArray$1(nt),stringArray$1(tt))}function unsortedNormalizedArray(nt,tt){return nt=normalizeArray(nt),tt=normalizeArray(tt),isEqual$1(stringArray$1(nt),stringArray$1(tt))}function schemaGroup(nt,tt,rt,st){var at=uniq$4(keys$4(nt).concat(keys$4(tt)));return emptyObjUndef(nt)&&emptyObjUndef(tt)?!0:emptyObjUndef(nt)&&keys$4(tt).length||emptyObjUndef(tt)&&keys$4(nt).length?!1:at.every(function(lt){var dt=nt[lt],yt=tt[lt];return Array.isArray(dt)&&Array.isArray(yt)?isEqual$1(stringArray$1(nt),stringArray$1(tt)):Array.isArray(dt)&&!Array.isArray(yt)||Array.isArray(yt)&&!Array.isArray(dt)?!1:keyValEqual(nt,tt,lt,st)})}function items$2(nt,tt,rt,st){return isPlainObject$3(nt)&&isPlainObject$3(tt)?st(nt,tt):Array.isArray(nt)&&Array.isArray(tt)?schemaGroup(nt,tt,rt,st):isEqual$1(nt,tt)}function unsortedArray(nt,tt,rt,st){var at=uniqWith$4(nt,st),lt=uniqWith$4(tt,st),dt=intersectionWith$1(at,lt,st);return dt.length===Math.max(at.length,lt.length)}var comparers={title:isEqual$1,uniqueItems:falseUndefined,minLength:undefAndZero,minItems:undefAndZero,minProperties:undefAndZero,required:undefArrayEqual,enum:undefArrayEqual,type:unsortedNormalizedArray,items:items$2,anyOf:unsortedArray,allOf:unsortedArray,oneOf:unsortedArray,properties:schemaGroup,patternProperties:schemaGroup,dependencies:schemaGroup},acceptsUndefined=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],schemaProps$1=["additionalProperties","additionalItems","contains","propertyNames","not"];function compare$3(nt,tt,rt){if(rt=defaults$2(rt,{ignore:[]}),emptySchema(nt)&&emptySchema(tt))return!0;if(!isSchema$3(nt)||!isSchema$3(tt))throw new Error("Either of the values are not a JSON schema.");if(nt===tt)return!0;if(isBoolean$1(nt)&&isBoolean$1(tt))return nt===tt;if(nt===void 0&&tt===!1||tt===void 0&&nt===!1||undef(nt)&&!undef(tt)||!undef(nt)&&undef(tt))return!1;var st=uniq$4(Object.keys(nt).concat(Object.keys(tt)));if(rt.ignore.length&&(st=st.filter(lt=>rt.ignore.indexOf(lt)===-1)),!st.length)return!0;function at(lt,dt){return compare$3(lt,dt,rt)}return st.every(function(lt){var dt=nt[lt],yt=tt[lt];if(schemaProps$1.indexOf(lt)!==-1)return compare$3(dt,yt,rt);var vt=comparers[lt];if(vt||(vt=isEqual$1),isEqual$1(dt,yt))return!0;if(acceptsUndefined.indexOf(lt)===-1&&(!has$2(nt,lt)&&has$2(tt,lt)||has$2(nt,lt)&&!has$2(tt,lt)))return dt===yt;var _t=vt(dt,yt,lt,at);if(!isBoolean$1(_t))throw new Error("Comparer must return true or false");return _t})}var src$1=compare$3;function isArray$6(nt){return Object.prototype.toString.call(nt)==="[object Array]"}var lib$6=Array.isArray||isArray$6;function isNumber$3(nt){return(typeof nt=="number"||Object.prototype.toString.call(nt)==="[object Number]")&&nt.valueOf()===nt.valueOf()}var lib$5=isNumber$3,isNumber$2=lib$5;function isInteger$1(nt){return isNumber$2(nt)&&nt%1===0}var lib$4=isInteger$1,isArray$5=lib$6,isInteger=lib$4;function isIntegerArray$2(nt){var tt;if(!isArray$5(nt)||(tt=nt.length,!tt))return!1;for(var rt=0;rt<tt;rt++)if(!isInteger(nt[rt]))return!1;return!0}var lib$3=isIntegerArray$2;function isFunction$3(nt){return typeof nt=="function"}var lib$2=isFunction$3,isArray$4=lib$6,isIntegerArray$1=lib$3,isFunction$2=lib$2,MAXINT=Math.pow(2,31)-1;function gcd$1(nt,tt){var rt=1,st;if(nt===0)return tt;if(tt===0)return nt;for(;nt%2===0&&tt%2===0;)nt=nt/2,tt=tt/2,rt=rt*2;for(;nt%2===0;)nt=nt/2;for(;tt;){for(;tt%2===0;)tt=tt/2;nt>tt&&(st=tt,tt=nt,nt=st),tt=tt-nt}return rt*nt}function bitwise(nt,tt){var rt=0,st;if(nt===0)return tt;if(tt===0)return nt;for(;!(nt&1)&&!(tt&1);)nt>>>=1,tt>>>=1,rt++;for(;!(nt&1);)nt>>>=1;for(;tt;){for(;!(tt&1);)tt>>>=1;nt>tt&&(st=tt,tt=nt,nt=st),tt=tt-nt}return nt<<rt}function compute(){var nt=arguments.length,tt,rt,st,at,lt,dt,yt;for(tt=new Array(nt),yt=0;yt<nt;yt++)tt[yt]=arguments[yt];if(isIntegerArray$1(tt)){if(nt===2)return lt=tt[0],dt=tt[1],lt<0&&(lt=-lt),dt<0&&(dt=-dt),lt<=MAXINT&&dt<=MAXINT?bitwise(lt,dt):gcd$1(lt,dt);st=tt}else if(isArray$4(tt[0]))if(nt>1){if(st=tt[0],rt=tt[1],!isFunction$2(rt))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+rt+"`.")}else st=tt[0];else throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+tt[0]+"`.");if(at=st.length,at<2)return null;if(rt){for(lt=new Array(at),yt=0;yt<at;yt++)lt[yt]=rt(st[yt],yt);st=lt}if(nt<3&&!isIntegerArray$1(st))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+st+"`.");for(yt=0;yt<at;yt++)lt=st[yt],lt<0&&(st[yt]=-lt);for(lt=st[0],yt=1;yt<at;yt++)dt=st[yt],dt<=MAXINT&&lt<=MAXINT?lt=bitwise(lt,dt):lt=gcd$1(lt,dt);return lt}var lib$1=compute,gcd=lib$1,isArray$3=lib$6,isIntegerArray=lib$3,isFunction$1=lib$2;function lcm(){var nt=arguments.length,tt,rt,st,at,lt,dt,yt;for(tt=new Array(nt),yt=0;yt<nt;yt++)tt[yt]=arguments[yt];if(isIntegerArray(tt)){if(nt===2)return lt=tt[0],dt=tt[1],lt<0&&(lt=-lt),dt<0&&(dt=-dt),lt===0||dt===0?0:lt/gcd(lt,dt)*dt;st=tt}else if(isArray$3(tt[0]))if(nt>1){if(st=tt[0],rt=tt[1],!isFunction$1(rt))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+rt+"`.")}else st=tt[0];else throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+tt[0]+"`.");if(at=st.length,at<2)return null;if(rt){for(lt=new Array(at),yt=0;yt<at;yt++)lt[yt]=rt(st[yt],yt);st=lt}if(nt<3&&!isIntegerArray(st))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+st+"`.");for(yt=0;yt<at;yt++)lt=st[yt],lt<0&&(st[yt]=-lt);for(lt=st[0],yt=1;yt<at;yt++){if(dt=st[yt],lt===0||dt===0)return 0;lt=lt/gcd(lt,dt)*dt}return lt}var lib=lcm,baseMerge$1=_baseMerge,isObject$1=isObject_1;function customDefaultsMerge$1(nt,tt,rt,st,at,lt){return isObject$1(nt)&&isObject$1(tt)&&(lt.set(tt,nt),baseMerge$1(nt,tt,void 0,customDefaultsMerge$1,lt),lt.delete(tt)),nt}var _customDefaultsMerge=customDefaultsMerge$1,baseMerge=_baseMerge,createAssigner=_createAssigner,mergeWith$1=createAssigner(function(nt,tt,rt,st){baseMerge(nt,tt,rt,st)}),mergeWith_1=mergeWith$1,apply=_apply,baseRest$3=_baseRest,customDefaultsMerge=_customDefaultsMerge,mergeWith=mergeWith_1,defaultsDeep$1=baseRest$3(function(nt){return nt.push(void 0,customDefaultsMerge),apply(mergeWith,void 0,nt)}),defaultsDeep_1=defaultsDeep$1,arrayMap$3=_arrayMap,baseIntersection=_baseIntersection,baseRest$2=_baseRest,castArrayLikeObject=_castArrayLikeObject,intersection$1=baseRest$2(function(nt){var tt=arrayMap$3(nt,castArrayLikeObject);return tt.length&&tt[0]===nt[0]?baseIntersection(tt):[]}),intersection_1=intersection$1;function baseIndexOfWith$1(nt,tt,rt,st){for(var at=rt-1,lt=nt.length;++at<lt;)if(st(nt[at],tt))return at;return-1}var _baseIndexOfWith=baseIndexOfWith$1,arrayMap$2=_arrayMap,baseIndexOf=_baseIndexOf,baseIndexOfWith=_baseIndexOfWith,baseUnary$1=_baseUnary,copyArray$2=_copyArray,arrayProto=Array.prototype,splice=arrayProto.splice;function basePullAll$1(nt,tt,rt,st){var at=st?baseIndexOfWith:baseIndexOf,lt=-1,dt=tt.length,yt=nt;for(nt===tt&&(tt=copyArray$2(tt)),rt&&(yt=arrayMap$2(nt,baseUnary$1(rt)));++lt<dt;)for(var vt=0,_t=tt[lt],bt=rt?rt(_t):_t;(vt=at(yt,bt,vt,st))>-1;)yt!==nt&&splice.call(yt,vt,1),splice.call(nt,vt,1);return nt}var _basePullAll=basePullAll$1,basePullAll=_basePullAll;function pullAll$1(nt,tt){return nt&&nt.length&&tt&&tt.length?basePullAll(nt,tt):nt}var pullAll_1=pullAll$1,arrayEach=_arrayEach,baseEach=_baseEach,castFunction=_castFunction,isArray$2=isArray_1;function forEach$3(nt,tt){var rt=isArray$2(nt)?arrayEach:baseEach;return rt(nt,castFunction(tt))}var forEach_1=forEach$3;const _forEach=getDefaultExportFromCjs(forEach_1);var SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,arrayMap$1=_arrayMap,baseUnary=_baseUnary,cacheHas=_cacheHas,LARGE_ARRAY_SIZE=200;function baseDifference$1(nt,tt,rt,st){var at=-1,lt=arrayIncludes,dt=!0,yt=nt.length,vt=[],_t=tt.length;if(!yt)return vt;rt&&(tt=arrayMap$1(tt,baseUnary(rt))),st?(lt=arrayIncludesWith,dt=!1):tt.length>=LARGE_ARRAY_SIZE&&(lt=cacheHas,dt=!1,tt=new SetCache(tt));e:for(;++at<yt;){var bt=nt[at],Mt=rt==null?bt:rt(bt);if(bt=st||bt!==0?bt:0,dt&&Mt===Mt){for(var Ct=_t;Ct--;)if(tt[Ct]===Mt)continue e;vt.push(bt)}else lt(tt,Mt,st)||vt.push(bt)}return vt}var _baseDifference=baseDifference$1,baseDifference=_baseDifference,baseRest$1=_baseRest,isArrayLikeObject$1=isArrayLikeObject_1,without$1=baseRest$1(function(nt,tt){return isArrayLikeObject$1(nt)?baseDifference(nt,tt):[]}),without_1=without$1;const flatten$2=flatten_1,flattenDeep$1=flattenDeep_1,isPlainObject$2=isPlainObject_1,uniq$3=uniq_1,uniqWith$3=uniqWith_1,without=without_1;function deleteUndefinedProps$2(nt){for(const tt in nt)has$1(nt,tt)&&isEmptySchema(nt[tt])&&delete nt[tt];return nt}const allUniqueKeys$3=nt=>uniq$3(flattenDeep$1(nt.map(keys$3))),getValues$2=(nt,tt)=>nt.map(rt=>rt&&rt[tt]),has$1=(nt,tt)=>Object.prototype.hasOwnProperty.call(nt,tt),keys$3=nt=>isPlainObject$2(nt)||Array.isArray(nt)?Object.keys(nt):[],notUndefined$3=nt=>nt!==void 0,isSchema$2=nt=>isPlainObject$2(nt)||nt===!0||nt===!1,isEmptySchema=nt=>!keys$3(nt).length&&nt!==!1&&nt!==!0,withoutArr$1=(nt,...tt)=>without.apply(null,[nt].concat(flatten$2(tt)));var common$1={allUniqueKeys:allUniqueKeys$3,deleteUndefinedProps:deleteUndefinedProps$2,getValues:getValues$2,has:has$1,isEmptySchema,isSchema:isSchema$2,keys:keys$3,notUndefined:notUndefined$3,uniqWith:uniqWith$3,withoutArr:withoutArr$1};const compare$2=src$1,forEach$2=forEach_1,{allUniqueKeys:allUniqueKeys$2,deleteUndefinedProps:deleteUndefinedProps$1,getValues:getValues$1,keys:keys$2,notUndefined:notUndefined$2,uniqWith:uniqWith$2,withoutArr}=common$1;function removeFalseSchemas(nt){forEach$2(nt,function(tt,rt){tt===!1&&delete nt[rt]})}function mergeSchemaGroup(nt,tt){return allUniqueKeys$2(nt).reduce(function(st,at){const lt=getValues$1(nt,at),dt=uniqWith$2(lt.filter(notUndefined$2),compare$2);return st[at]=tt(dt,at),st},{})}var properties$3={keywords:["properties","patternProperties","additionalProperties"],resolver(nt,tt,rt,st){st.ignoreAdditionalProperties||(nt.forEach(function(lt){const dt=nt.filter(bt=>bt!==lt),yt=keys$2(lt.properties),_t=keys$2(lt.patternProperties).map(bt=>new RegExp(bt));dt.forEach(function(bt){const Mt=keys$2(bt.properties),Ct=Mt.filter($t=>_t.some(Rt=>Rt.test($t)));withoutArr(Mt,yt,Ct).forEach(function($t){bt.properties[$t]=rt.properties([bt.properties[$t],lt.additionalProperties],$t)})})}),nt.forEach(function(lt){const dt=nt.filter(vt=>vt!==lt),yt=keys$2(lt.patternProperties);lt.additionalProperties===!1&&dt.forEach(function(vt){const _t=keys$2(vt.patternProperties);withoutArr(_t,yt).forEach(Mt=>delete vt.patternProperties[Mt])})}));const at={additionalProperties:rt.additionalProperties(nt.map(lt=>lt.additionalProperties)),patternProperties:mergeSchemaGroup(nt.map(lt=>lt.patternProperties),rt.patternProperties),properties:mergeSchemaGroup(nt.map(lt=>lt.properties),rt.properties)};return at.additionalProperties===!1&&removeFalseSchemas(at.properties),deleteUndefinedProps$1(at)}};const compare$1=src$1,forEach$1=forEach_1,{allUniqueKeys:allUniqueKeys$1,deleteUndefinedProps,has,isSchema:isSchema$1,notUndefined:notUndefined$1,uniqWith:uniqWith$1}=common$1;function removeFalseSchemasFromArray(nt){forEach$1(nt,function(tt,rt){tt===!1&&nt.splice(rt,1)})}function getItemSchemas(nt,tt){return nt.map(function(rt){if(rt)if(Array.isArray(rt.items)){const st=rt.items[tt];if(isSchema$1(st))return st;if(has(rt,"additionalItems"))return rt.additionalItems}else return rt.items})}function getAdditionalSchemas(nt){return nt.map(function(tt){if(tt)return Array.isArray(tt.items)?tt.additionalItems:tt.items})}function mergeItems(nt,tt,rt){return allUniqueKeys$1(rt).reduce(function(at,lt){const dt=getItemSchemas(nt,lt),yt=uniqWith$1(dt.filter(notUndefined$1),compare$1);return at[lt]=tt(yt,lt),at},[])}var items$1={keywords:["items","additionalItems"],resolver(nt,tt,rt){const st=nt.map(yt=>yt.items),at=st.filter(notUndefined$1),lt={};at.every(isSchema$1)?lt.items=rt.items(st):lt.items=mergeItems(nt,rt.items,st);let dt;return at.every(Array.isArray)?dt=nt.map(yt=>yt.additionalItems):at.some(Array.isArray)&&(dt=getAdditionalSchemas(nt)),dt&&(lt.additionalItems=rt.additionalItems(dt)),lt.additionalItems===!1&&Array.isArray(lt.items)&&removeFalseSchemasFromArray(lt.items),deleteUndefinedProps(lt)}};const cloneDeep=cloneDeep_1,compare=src$1,computeLcm=lib,defaultsDeep=defaultsDeep_1,flatten$1=flatten_1,flattenDeep=flattenDeep_1,intersection=intersection_1,intersectionWith=intersectionWith_1,isEqual=isEqual_1,isPlainObject$1=isPlainObject_1,pullAll=pullAll_1,sortBy=sortBy_1,uniq$2=uniq_1,uniqWith=uniqWith_1,propertiesResolver=properties$3,itemsResolver=items$1,contains$1=(nt,tt)=>nt.indexOf(tt)!==-1,isSchema=nt=>isPlainObject$1(nt)||nt===!0||nt===!1,isFalse=nt=>nt===!1,isTrue=nt=>nt===!0,schemaResolver=(nt,tt,rt)=>rt(nt),stringArray=nt=>sortBy(uniq$2(flattenDeep(nt))),notUndefined=nt=>nt!==void 0,allUniqueKeys=nt=>uniq$2(flattenDeep(nt.map(keys$1))),first=nt=>nt[0],required$2=nt=>stringArray(nt),maximumValue=nt=>Math.max.apply(Math,nt),minimumValue=nt=>Math.min.apply(Math,nt),uniqueItems$1=nt=>nt.some(isTrue),examples=nt=>uniqWith(flatten$1(nt),isEqual);function compareProp(nt){return function(tt,rt){return compare({[nt]:tt},{[nt]:rt})}}function getAllOf(nt){let{allOf:tt=[],...rt}=nt;return rt=isPlainObject$1(nt)?rt:nt,[rt,...tt.map(getAllOf)]}function getValues(nt,tt){return nt.map(rt=>rt&&rt[tt])}function tryMergeSchemaGroups(nt,tt){return nt.map(function(rt,st){try{return tt(rt,st)}catch{return}}).filter(notUndefined)}function keys$1(nt){return isPlainObject$1(nt)||Array.isArray(nt)?Object.keys(nt):[]}function getAnyOfCombinations(nt,tt){if(tt=tt||[],!nt.length)return tt;const rt=nt.slice(0).shift(),st=nt.slice(1);return tt.length?getAnyOfCombinations(st,flatten$1(tt.map(at=>rt.map(lt=>[lt].concat(at))))):getAnyOfCombinations(st,rt.map(at=>at))}function throwIncompatible(nt,tt){let rt;try{rt=nt.map(function(st){return JSON.stringify(st,null,2)}).join(`
`)}catch{rt=nt.join(", ")}throw new Error('Could not resolve values for path:"'+tt.join(".")+`". They are probably incompatible. Values: 
`+rt)}function callGroupResolver(nt,tt,rt,st,at,lt){if(nt.length){const dt=at.complexResolvers[tt];if(!dt||!dt.resolver)throw new Error("No resolver found for "+tt);const yt=rt.map(Mt=>nt.reduce((Ct,Tt)=>(Mt[Tt]!==void 0&&(Ct[Tt]=Mt[Tt]),Ct),{})),vt=uniqWith(yt,compare),_t=dt.keywords.reduce((Mt,Ct)=>({...Mt,[Ct]:(Tt,$t=[])=>st(Tt,null,lt.concat(Ct,$t))}),{}),bt=dt.resolver(vt,lt.concat(tt),_t,at);return isPlainObject$1(bt)||throwIncompatible(vt,lt.concat(tt)),bt}}function createRequiredMetaArray(nt){return{required:nt}}const schemaGroupProps=["properties","patternProperties","definitions","dependencies"],schemaArrays=["anyOf","oneOf"],schemaProps=["additionalProperties","additionalItems","contains","propertyNames","not","items"],defaultResolvers={type(nt){if(nt.some(Array.isArray)){const tt=nt.map(function(st){return Array.isArray(st)?st:[st]}),rt=intersection.apply(null,tt);if(rt.length===1)return rt[0];if(rt.length>1)return uniq$2(rt)}},dependencies(nt,tt,rt){return allUniqueKeys(nt).reduce(function(at,lt){const dt=getValues(nt,lt);let yt=uniqWith(dt.filter(notUndefined),isEqual);const vt=yt.filter(Array.isArray);if(vt.length){if(vt.length===yt.length)at[lt]=stringArray(yt);else{const _t=yt.filter(isSchema),bt=vt.map(createRequiredMetaArray);at[lt]=rt(_t.concat(bt),lt)}return at}return yt=uniqWith(yt,compare),at[lt]=rt(yt,lt),at},{})},oneOf(nt,tt,rt){const st=getAnyOfCombinations(cloneDeep(nt)),at=tryMergeSchemaGroups(st,rt),lt=uniqWith(at,compare);if(lt.length)return lt},not(nt){return{anyOf:nt}},pattern(nt){return nt.map(tt=>"(?="+tt+")").join("")},multipleOf(nt){let tt=nt.slice(0),rt=1;for(;tt.some(st=>!Number.isInteger(st));)tt=tt.map(st=>st*10),rt=rt*10;return computeLcm(tt)/rt},enum(nt){const tt=intersectionWith.apply(null,nt.concat(isEqual));if(tt.length)return sortBy(tt)}};defaultResolvers.$id=first;defaultResolvers.$ref=first;defaultResolvers.$schema=first;defaultResolvers.additionalItems=schemaResolver;defaultResolvers.additionalProperties=schemaResolver;defaultResolvers.anyOf=defaultResolvers.oneOf;defaultResolvers.contains=schemaResolver;defaultResolvers.default=first;defaultResolvers.definitions=defaultResolvers.dependencies;defaultResolvers.description=first;defaultResolvers.examples=examples;defaultResolvers.exclusiveMaximum=minimumValue;defaultResolvers.exclusiveMinimum=maximumValue;defaultResolvers.items=itemsResolver;defaultResolvers.maximum=minimumValue;defaultResolvers.maxItems=minimumValue;defaultResolvers.maxLength=minimumValue;defaultResolvers.maxProperties=minimumValue;defaultResolvers.minimum=maximumValue;defaultResolvers.minItems=maximumValue;defaultResolvers.minLength=maximumValue;defaultResolvers.minProperties=maximumValue;defaultResolvers.properties=propertiesResolver;defaultResolvers.propertyNames=schemaResolver;defaultResolvers.required=required$2;defaultResolvers.title=first;defaultResolvers.uniqueItems=uniqueItems$1;const defaultComplexResolvers={properties:propertiesResolver,items:itemsResolver};function merger(nt,tt,rt){tt=defaultsDeep(tt,{ignoreAdditionalProperties:!1,resolvers:defaultResolvers,complexResolvers:defaultComplexResolvers,deep:!0});const st=Object.entries(tt.complexResolvers);function at(yt,vt,_t){yt=cloneDeep(yt.filter(notUndefined)),_t=_t||[];const bt=isPlainObject$1(vt)?vt:{};if(!yt.length)return;if(yt.some(isFalse))return!1;if(yt.every(isTrue))return!0;yt=yt.filter(isPlainObject$1);const Mt=allUniqueKeys(yt);if(tt.deep&&contains$1(Mt,"allOf"))return merger({allOf:yt},tt);const Ct=st.map(([Tt,$t])=>Mt.filter(Rt=>$t.keywords.includes(Rt)));return Ct.forEach(Tt=>pullAll(Mt,Tt)),Mt.forEach(function(Tt){const $t=getValues(yt,Tt),Rt=uniqWith($t.filter(notUndefined),compareProp(Tt));if(Rt.length===1&&contains$1(schemaArrays,Tt))bt[Tt]=Rt[0].map(Et=>at([Et],Et));else if(Rt.length===1&&!contains$1(schemaGroupProps,Tt)&&!contains$1(schemaProps,Tt))bt[Tt]=Rt[0];else{const Et=tt.resolvers[Tt]||tt.resolvers.defaultResolver;if(!Et)throw new Error("No resolver found for key "+Tt+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const wt=(Pt,Ft=[])=>at(Pt,null,_t.concat(Tt,Ft));bt[Tt]=Et(Rt,_t.concat(Tt),wt,tt),bt[Tt]===void 0?throwIncompatible(Rt,_t.concat(Tt)):bt[Tt]===void 0&&delete bt[Tt]}}),st.reduce((Tt,[$t,Rt],Et)=>({...Tt,...callGroupResolver(Ct[Et],$t,yt,at,tt,_t)}),bt)}const lt=flattenDeep(getAllOf(nt));return at(lt)}merger.options={resolvers:defaultResolvers};var src=merger;const mergeAllOf=getDefaultExportFromCjs(src);function getDiscriminatorFieldFromSchema(nt){let tt;const rt=_get(nt,"discriminator.propertyName",void 0);return isString$2(rt)?tt=rt:rt!==void 0&&console.warn(`Expecting discriminator to be a string, got "${typeof rt}" instead`),tt}function guessType(nt){return Array.isArray(nt)?"array":typeof nt=="string"?"string":nt==null?"null":typeof nt=="boolean"?"boolean":isNaN(nt)?typeof nt=="object"?"object":"string":"number"}var baseFlatten=_baseFlatten,baseRest=_baseRest,baseUniq=_baseUniq,isArrayLikeObject=isArrayLikeObject_1,union=baseRest(function(nt){return baseUniq(baseFlatten(nt,1,isArrayLikeObject,!0))}),union_1=union;const union$1=getDefaultExportFromCjs(union_1);function getSchemaType(nt){let{type:tt}=nt;return!tt&&nt.const?guessType(nt.const):!tt&&nt.enum?"string":!tt&&(nt.properties||nt.additionalProperties)?"object":(Array.isArray(tt)&&(tt.length===2&&tt.includes("null")?tt=tt.find(rt=>rt!=="null"):tt=tt[0]),tt)}function mergeSchemas(nt,tt){const rt=Object.assign({},nt);return Object.keys(tt).reduce((st,at)=>{const lt=nt?nt[at]:{},dt=tt[at];return nt&&at in nt&&isObject$g(dt)?st[at]=mergeSchemas(lt,dt):nt&&tt&&(getSchemaType(nt)==="object"||getSchemaType(tt)==="object")&&at===REQUIRED_KEY&&Array.isArray(lt)&&Array.isArray(dt)?st[at]=union$1(lt,dt):st[at]=dt,st},rt)}function retrieveSchema(nt,tt,rt={},st,at){return retrieveSchemaInternal(nt,tt,rt,st,void 0,void 0,at)[0]}function resolveCondition(nt,tt,rt,st,at,lt,dt){const{if:yt,then:vt,else:_t,...bt}=tt,Mt=nt.isValid(yt,lt||{},rt);let Ct=[bt],Tt=[];if(st)vt&&typeof vt!="boolean"&&(Tt=Tt.concat(retrieveSchemaInternal(nt,vt,rt,lt,st,at,dt))),_t&&typeof _t!="boolean"&&(Tt=Tt.concat(retrieveSchemaInternal(nt,_t,rt,lt,st,at,dt)));else{const $t=Mt?vt:_t;$t&&typeof $t!="boolean"&&(Tt=Tt.concat(retrieveSchemaInternal(nt,$t,rt,lt,st,at,dt)))}return Tt.length&&(Ct=Tt.map($t=>mergeSchemas(bt,$t))),Ct.flatMap($t=>retrieveSchemaInternal(nt,$t,rt,lt,st,at,dt))}function getAllPermutationsOfXxxOf(nt){return nt.reduce((rt,st)=>st.length>1?st.flatMap(at=>times$1(rt.length,lt=>[...rt[lt]].concat(at))):(rt.forEach(at=>at.push(st[0])),rt),[[]])}function resolveSchema$1(nt,tt,rt,st,at,lt,dt){const yt=resolveReference(nt,tt,rt,st,at,lt);if(yt.length>1||yt[0]!==tt)return yt;if(DEPENDENCIES_KEY in tt)return resolveDependencies(nt,tt,rt,st,at,lt).flatMap(_t=>retrieveSchemaInternal(nt,_t,rt,lt,st,at,dt));if(ALL_OF_KEY in tt&&Array.isArray(tt.allOf)){const vt=tt.allOf.map(bt=>retrieveSchemaInternal(nt,bt,rt,lt,st,at,dt));return getAllPermutationsOfXxxOf(vt).map(bt=>({...tt,allOf:bt}))}return[tt]}function resolveReference(nt,tt,rt,st,at,lt,dt){const yt=resolveAllReferences(tt,rt,at);return yt!==tt?retrieveSchemaInternal(nt,yt,rt,lt,st,at,dt):[tt]}function resolveAllReferences(nt,tt,rt){if(!isObject$g(nt))return nt;let st=nt;if(REF_KEY in st){const{$ref:at,...lt}=st;if(rt.includes(at))return st;rt.push(at),st={...findSchemaDefinition(at,tt),...lt}}if(PROPERTIES_KEY in st){const at=[],lt=transform$1(st[PROPERTIES_KEY],(dt,yt,vt)=>{const _t=[...rt];dt[vt]=resolveAllReferences(yt,tt,_t),at.push(_t)},{});merge$2(rt,uniq$6(flattenDeep$3(at))),st={...st,[PROPERTIES_KEY]:lt}}return ITEMS_KEY in st&&!Array.isArray(st.items)&&typeof st.items!="boolean"&&(st={...st,items:resolveAllReferences(st.items,tt,rt)}),isEqual$3(nt,st)?nt:st}function stubExistingAdditionalProperties(nt,tt,rt,st,at){const lt={...tt,properties:{...tt.properties}},dt=st&&isObject$g(st)?st:{};return Object.keys(dt).forEach(yt=>{if(yt in lt.properties)return;let vt={};typeof lt.additionalProperties!="boolean"?REF_KEY in lt.additionalProperties?vt=retrieveSchema(nt,{$ref:_get(lt.additionalProperties,[REF_KEY])},rt,dt,at):"type"in lt.additionalProperties?vt={...lt.additionalProperties}:ANY_OF_KEY in lt.additionalProperties||ONE_OF_KEY in lt.additionalProperties?vt={type:"object",...lt.additionalProperties}:vt={type:guessType(_get(dt,[yt]))}:vt={type:guessType(_get(dt,[yt]))},lt.properties[yt]=vt,set$1(lt.properties,[yt,ADDITIONAL_PROPERTY_FLAG],!0)}),lt}function retrieveSchemaInternal(nt,tt,rt,st,at=!1,lt=[],dt){return isObject$g(tt)?resolveSchema$1(nt,tt,rt,at,lt,st,dt).flatMap(vt=>{var _t;let bt=vt;if(IF_KEY in bt)return resolveCondition(nt,bt,rt,at,lt,st,dt);if(ALL_OF_KEY in bt){if(at){const{allOf:Ct,...Tt}=bt;return[...Ct,Tt]}try{const Ct=[],Tt=[];(_t=bt.allOf)===null||_t===void 0||_t.forEach($t=>{typeof $t=="object"&&$t.contains?Ct.push($t):Tt.push($t)}),Ct.length&&(bt={...bt,allOf:Tt}),bt=dt?dt(bt):mergeAllOf(bt,{deep:!1}),Ct.length&&(bt.allOf=Ct)}catch(Ct){console.warn(`could not merge subschemas in allOf:
`,Ct);const{allOf:Tt,...$t}=bt;return $t}}return ADDITIONAL_PROPERTIES_KEY in bt&&bt.additionalProperties!==!1?stubExistingAdditionalProperties(nt,bt,rt,st,dt):bt}):[{}]}function resolveAnyOrOneOfSchemas(nt,tt,rt,st,at){let lt;const{oneOf:dt,anyOf:yt,...vt}=tt;if(Array.isArray(dt)?lt=dt:Array.isArray(yt)&&(lt=yt),lt){const _t=at===void 0&&st?{}:at,bt=getDiscriminatorFieldFromSchema(tt);lt=lt.map(Ct=>resolveAllReferences(Ct,rt,[]));const Mt=getFirstMatchingOption(nt,_t,lt,rt,bt);if(st)return lt.map(Ct=>mergeSchemas(vt,Ct));tt=mergeSchemas(vt,lt[Mt])}return[tt]}function resolveDependencies(nt,tt,rt,st,at,lt,dt){const{dependencies:yt,...vt}=tt;return resolveAnyOrOneOfSchemas(nt,vt,rt,st,lt).flatMap(bt=>processDependencies(nt,yt,bt,rt,st,at,lt,dt))}function processDependencies(nt,tt,rt,st,at,lt,dt,yt){let vt=[rt];for(const _t in tt){if(!at&&_get(dt,[_t])===void 0||rt.properties&&!(_t in rt.properties))continue;const[bt,Mt]=splitKeyElementFromObject(_t,tt);return Array.isArray(Mt)?vt[0]=withDependentProperties(rt,Mt):isObject$g(Mt)&&(vt=withDependentSchema(nt,rt,st,_t,Mt,at,lt,dt,yt)),vt.flatMap(Ct=>processDependencies(nt,bt,Ct,st,at,lt,dt,yt))}return vt}function withDependentProperties(nt,tt){if(!tt)return nt;const rt=Array.isArray(nt.required)?Array.from(new Set([...nt.required,...tt])):tt;return{...nt,required:rt}}function withDependentSchema(nt,tt,rt,st,at,lt,dt,yt,vt){return retrieveSchemaInternal(nt,at,rt,yt,lt,dt,vt).flatMap(bt=>{const{oneOf:Mt,...Ct}=bt;if(tt=mergeSchemas(tt,Ct),Mt===void 0)return tt;const Tt=Mt.map(Rt=>typeof Rt=="boolean"||!(REF_KEY in Rt)?[Rt]:resolveReference(nt,Rt,rt,lt,dt,yt));return getAllPermutationsOfXxxOf(Tt).flatMap(Rt=>withExactlyOneSubschema(nt,tt,rt,st,Rt,lt,dt,yt,vt))})}function withExactlyOneSubschema(nt,tt,rt,st,at,lt,dt,yt,vt){const _t=at.filter(bt=>{if(typeof bt=="boolean"||!bt||!bt.properties)return!1;const{[st]:Mt}=bt.properties;if(Mt){const Ct={type:"object",properties:{[st]:Mt}};return nt.isValid(Ct,yt,rt)||lt}return!1});return!lt&&_t.length!==1?(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[tt]):_t.flatMap(bt=>{const Mt=bt,[Ct]=splitKeyElementFromObject(st,Mt.properties),Tt={...Mt,properties:Ct};return retrieveSchemaInternal(nt,Tt,rt,yt,lt,dt,vt).map(Rt=>mergeSchemas(tt,Rt))})}const JUNK_OPTION={type:"object",$id:JUNK_OPTION_ID,properties:{__not_really_there__:{type:"number"}}};function calculateIndexScore(nt,tt,rt,st,at){let lt=0;return rt&&(isObject$f(rt.properties)?lt+=reduce$1(rt.properties,(dt,yt,vt)=>{const _t=_get(st,vt);if(typeof yt=="boolean")return dt;if(has$4(yt,REF_KEY)){const bt=retrieveSchema(nt,yt,tt,_t,at);return dt+calculateIndexScore(nt,tt,bt,_t||{},at)}if((has$4(yt,ONE_OF_KEY)||has$4(yt,ANY_OF_KEY))&&_t){const bt=has$4(yt,ONE_OF_KEY)?ONE_OF_KEY:ANY_OF_KEY,Mt=getDiscriminatorFieldFromSchema(yt);return dt+getClosestMatchingOption(nt,tt,_t,_get(yt,bt),-1,Mt,at)}if(yt.type==="object")return isObject$f(_t)&&(dt+=1),dt+calculateIndexScore(nt,tt,yt,_t,at);if(yt.type===guessType(_t)){let bt=dt+1;return yt.default?bt+=_t===yt.default?1:-1:yt.const&&(bt+=_t===yt.const?1:-1),bt}return dt},0):isString$2(rt.type)&&rt.type===guessType(st)&&(lt+=1)),lt}function getClosestMatchingOption(nt,tt,rt,st,at=-1,lt,dt){const yt=st.map(Ct=>resolveAllReferences(Ct,tt,[])),vt=getOptionMatchingSimpleDiscriminator(rt,st,lt);if(isNumber$5(vt))return vt;const _t=yt.reduce((Ct,Tt,$t)=>(getFirstMatchingOption(nt,rt,[JUNK_OPTION,Tt],tt,lt)===1&&Ct.push($t),Ct),[]);if(_t.length===1)return _t[0];_t.length||times$1(yt.length,Ct=>_t.push(Ct));const bt=new Set,{bestIndex:Mt}=_t.reduce((Ct,Tt)=>{const{bestScore:$t}=Ct,Rt=yt[Tt],Et=calculateIndexScore(nt,tt,Rt,rt,dt);return bt.add(Et),Et>$t?{bestIndex:Tt,bestScore:Et}:Ct},{bestIndex:at,bestScore:0});return bt.size===1&&at>=0?at:Mt}function isFixedItems(nt){return Array.isArray(nt.items)&&nt.items.length>0&&nt.items.every(tt=>isObject$g(tt))}function mergeDefaultsWithFormData(nt,tt,rt=!1,st=!1){if(Array.isArray(tt)){const at=Array.isArray(nt)?nt:[],lt=tt.map((dt,yt)=>at[yt]?mergeDefaultsWithFormData(at[yt],dt,rt,st):dt);return rt&&lt.length<at.length&&lt.push(...at.slice(lt.length)),lt}if(isObject$g(tt)){const at=Object.assign({},nt);return Object.keys(tt).reduce((lt,dt)=>(lt[dt]=mergeDefaultsWithFormData(nt?_get(nt,dt):{},_get(tt,dt),rt,st),lt),at)}return st&&tt===void 0?nt:tt}function mergeObjects(nt,tt,rt=!1){return Object.keys(tt).reduce((st,at)=>{const lt=nt?nt[at]:{},dt=tt[at];if(nt&&at in nt&&isObject$g(dt))st[at]=mergeObjects(lt,dt,rt);else if(rt&&Array.isArray(lt)&&Array.isArray(dt)){let yt=dt;rt==="preventDuplicates"&&(yt=dt.reduce((vt,_t)=>(lt.includes(_t)||vt.push(_t),vt),[])),st[at]=lt.concat(yt)}else st[at]=dt;return st},Object.assign({},nt))}function isConstant(nt){return Array.isArray(nt.enum)&&nt.enum.length===1||CONST_KEY in nt}function isSelect(nt,tt,rt={},st){const at=retrieveSchema(nt,tt,rt,void 0,st),lt=at.oneOf||at.anyOf;return Array.isArray(at.enum)?!0:Array.isArray(lt)?lt.every(dt=>typeof dt!="boolean"&&isConstant(dt)):!1}function isMultiSelect(nt,tt,rt,st){return!tt.uniqueItems||!tt.items||typeof tt.items=="boolean"?!1:isSelect(nt,tt.items,rt,st)}const PRIMITIVE_TYPES=["string","number","integer","boolean","null"];var AdditionalItemsHandling;(function(nt){nt[nt.Ignore=0]="Ignore",nt[nt.Invert=1]="Invert",nt[nt.Fallback=2]="Fallback"})(AdditionalItemsHandling||(AdditionalItemsHandling={}));function getInnerSchemaForArrayItem(nt,tt=AdditionalItemsHandling.Ignore,rt=-1){if(rt>=0){if(Array.isArray(nt.items)&&rt<nt.items.length){const st=nt.items[rt];if(typeof st!="boolean")return st}}else if(nt.items&&!Array.isArray(nt.items)&&typeof nt.items!="boolean")return nt.items;return tt!==AdditionalItemsHandling.Ignore&&isObject$g(nt.additionalItems)?nt.additionalItems:{}}function maybeAddDefaultToObject(nt,tt,rt,st,at,lt=[],dt={},yt=!1){const{emptyObjectFields:vt="populateAllDefaults"}=dt;if(st||yt)nt[tt]=rt;else if(vt!=="skipDefaults")if(isObject$g(rt)){const _t=at===void 0?lt.includes(tt):at;vt==="skipEmptyDefaults"?_isEmpty(rt)||(nt[tt]=rt):(!_isEmpty(rt)||lt.includes(tt))&&(_t||vt!=="populateRequiredDefaults")&&(nt[tt]=rt)}else rt!==void 0&&(vt==="populateAllDefaults"||vt==="skipEmptyDefaults"||lt.includes(tt))&&(nt[tt]=rt)}function computeDefaults(nt,tt,rt={}){const{parentDefaults:st,rawFormData:at,rootSchema:lt={},includeUndefinedValues:dt=!1,_recurseList:yt=[],experimental_defaultFormStateBehavior:vt=void 0,experimental_customMergeAllOf:_t=void 0,required:bt}=rt,Mt=isObject$g(at)?at:{},Ct=isObject$g(tt)?tt:{};let Tt=st,$t=null,Rt=vt,Et=yt;if(Ct[CONST_KEY]&&(vt==null?void 0:vt.constAsDefaults)!=="never")Tt=Ct.const;else if(isObject$g(Tt)&&isObject$g(Ct.default))Tt=mergeObjects(Tt,Ct.default);else if(DEFAULT_KEY in Ct)Tt=Ct.default;else if(REF_KEY in Ct){const Pt=Ct[REF_KEY];yt.includes(Pt)||(Et=yt.concat(Pt),$t=findSchemaDefinition(Pt,lt))}else if(DEPENDENCIES_KEY in Ct){const Pt={...getDefaultBasedOnSchemaType(nt,Ct,rt,Tt),...Mt};$t=resolveDependencies(nt,Ct,lt,!1,[],Pt,_t)[0]}else if(isFixedItems(Ct))Tt=Ct.items.map((Pt,Ft)=>computeDefaults(nt,Pt,{rootSchema:lt,includeUndefinedValues:dt,_recurseList:yt,experimental_defaultFormStateBehavior:vt,experimental_customMergeAllOf:_t,parentDefaults:Array.isArray(st)?st[Ft]:void 0,rawFormData:Mt,required:bt}));else if(ONE_OF_KEY in Ct){const{oneOf:Pt,...Ft}=Ct;if(Pt.length===0)return;const Nt=getDiscriminatorFieldFromSchema(Ct),{type:Ot="null"}=Ft;!Array.isArray(Ot)&&PRIMITIVE_TYPES.includes(Ot)&&(Rt==null?void 0:Rt.constAsDefaults)==="skipOneOf"&&(Rt={...Rt,constAsDefaults:"never"}),$t=Pt[getClosestMatchingOption(nt,lt,_isEmpty(Mt)?void 0:Mt,Pt,0,Nt,_t)],$t=mergeSchemas(Ft,$t)}else if(ANY_OF_KEY in Ct){const{anyOf:Pt,...Ft}=Ct;if(Pt.length===0)return;const Nt=getDiscriminatorFieldFromSchema(Ct);$t=Pt[getClosestMatchingOption(nt,lt,_isEmpty(Mt)?void 0:Mt,Pt,0,Nt,_t)],$t=mergeSchemas(Ft,$t)}if($t)return computeDefaults(nt,$t,{rootSchema:lt,includeUndefinedValues:dt,_recurseList:Et,experimental_defaultFormStateBehavior:Rt,experimental_customMergeAllOf:_t,parentDefaults:Tt,rawFormData:Mt,required:bt});Tt===void 0&&(Tt=Ct.default);const wt=getDefaultBasedOnSchemaType(nt,Ct,rt,Tt);return wt??Tt}function getObjectDefaults(nt,tt,{rawFormData:rt,rootSchema:st={},includeUndefinedValues:at=!1,_recurseList:lt=[],experimental_defaultFormStateBehavior:dt=void 0,experimental_customMergeAllOf:yt=void 0,required:vt}={},_t){{const bt=isObject$g(rt)?rt:{},Mt=tt,Ct=(dt==null?void 0:dt.allOf)==="populateDefaults"&&ALL_OF_KEY in Mt?retrieveSchema(nt,Mt,st,bt,yt):Mt,Tt=Ct[CONST_KEY],$t=Object.keys(Ct.properties||{}).reduce((Rt,Et)=>{var wt;const Pt=_get(Ct,[PROPERTIES_KEY,Et]),Ft=isObject$g(Tt)&&Tt[Et]!==void 0,Nt=(isObject$g(Pt)&&CONST_KEY in Pt||Ft)&&(dt==null?void 0:dt.constAsDefaults)!=="never",Ot=computeDefaults(nt,Pt,{rootSchema:st,_recurseList:lt,experimental_defaultFormStateBehavior:dt,experimental_customMergeAllOf:yt,includeUndefinedValues:at===!0,parentDefaults:_get(_t,[Et]),rawFormData:_get(bt,[Et]),required:(wt=Ct.required)===null||wt===void 0?void 0:wt.includes(Et)});return maybeAddDefaultToObject(Rt,Et,Ot,at,vt,Ct.required,dt,Nt),Rt},{});if(Ct.additionalProperties){const Rt=isObject$g(Ct.additionalProperties)?Ct.additionalProperties:{},Et=new Set;isObject$g(_t)&&Object.keys(_t).filter(Pt=>!Ct.properties||!Ct.properties[Pt]).forEach(Pt=>Et.add(Pt));const wt=[];Object.keys(bt).filter(Pt=>!Ct.properties||!Ct.properties[Pt]).forEach(Pt=>{Et.add(Pt),wt.push(Pt)}),Et.forEach(Pt=>{var Ft;const Nt=computeDefaults(nt,Rt,{rootSchema:st,_recurseList:lt,experimental_defaultFormStateBehavior:dt,experimental_customMergeAllOf:yt,includeUndefinedValues:at===!0,parentDefaults:_get(_t,[Pt]),rawFormData:_get(bt,[Pt]),required:(Ft=Ct.required)===null||Ft===void 0?void 0:Ft.includes(Pt)});maybeAddDefaultToObject($t,Pt,Nt,at,vt,wt)})}return $t}}function getArrayDefaults(nt,tt,{rawFormData:rt,rootSchema:st={},_recurseList:at=[],experimental_defaultFormStateBehavior:lt=void 0,experimental_customMergeAllOf:dt=void 0,required:yt}={},vt){var _t,bt;const Mt=tt,Ct=(_t=lt==null?void 0:lt.arrayMinItems)!==null&&_t!==void 0?_t:{},{populate:Tt,mergeExtraDefaults:$t}=Ct,Rt=Tt==="never",Et=Tt==="requiredOnly",wt=Tt==="all"||!Rt&&!Et,Pt=(bt=Ct==null?void 0:Ct.computeSkipPopulate)!==null&&bt!==void 0?bt:()=>!1,Nt=(lt==null?void 0:lt.emptyObjectFields)==="skipEmptyDefaults"?void 0:[];if(Array.isArray(vt)&&(vt=vt.map((nn,cn)=>{const an=getInnerSchemaForArrayItem(Mt,AdditionalItemsHandling.Fallback,cn);return computeDefaults(nt,an,{rootSchema:st,_recurseList:at,experimental_defaultFormStateBehavior:lt,experimental_customMergeAllOf:dt,parentDefaults:nn,required:yt})})),Array.isArray(rt)){const nn=getInnerSchemaForArrayItem(Mt);if(Rt)vt=rt;else{const cn=rt.map((mn,En)=>computeDefaults(nt,nn,{rootSchema:st,_recurseList:at,experimental_defaultFormStateBehavior:lt,experimental_customMergeAllOf:dt,rawFormData:mn,parentDefaults:_get(vt,[En]),required:yt}));vt=mergeDefaultsWithFormData(vt,cn,(Et&&yt||wt)&&$t)}}if((isObject$g(Mt)&&CONST_KEY in Mt&&(lt==null?void 0:lt.constAsDefaults)!=="never")===!1){if(Rt)return vt??Nt;if(Et&&!yt)return vt||void 0}const Bt=Array.isArray(vt)?vt.length:0;if(!Mt.minItems||isMultiSelect(nt,Mt,st,dt)||Pt(nt,Mt,st)||Mt.minItems<=Bt)return vt||Nt;const Xt=vt||[],Zt=getInnerSchemaForArrayItem(Mt,AdditionalItemsHandling.Invert),rn=Zt.default,Gt=new Array(Mt.minItems-Bt).fill(computeDefaults(nt,Zt,{parentDefaults:rn,rootSchema:st,_recurseList:at,experimental_defaultFormStateBehavior:lt,experimental_customMergeAllOf:dt,required:yt}));return Xt.concat(Gt)}function getDefaultBasedOnSchemaType(nt,tt,rt={},st){switch(getSchemaType(tt)){case"object":return getObjectDefaults(nt,tt,rt,st);case"array":return getArrayDefaults(nt,tt,rt,st)}}function getDefaultFormState(nt,tt,rt,st,at=!1,lt,dt){if(!isObject$g(tt))throw new Error("Invalid schema: "+tt);const yt=retrieveSchema(nt,tt,st,rt,dt),vt=computeDefaults(nt,yt,{rootSchema:st,includeUndefinedValues:at,experimental_defaultFormStateBehavior:lt,experimental_customMergeAllOf:dt,rawFormData:rt});if(rt==null||typeof rt=="number"&&isNaN(rt))return vt;const{mergeDefaultsIntoFormData:_t,arrayMinItems:bt={}}=lt||{},{mergeExtraDefaults:Mt}=bt,Ct=_t==="useDefaultIfFormDataUndefined";return isObject$g(rt)||Array.isArray(rt)?mergeDefaultsWithFormData(vt,rt,Mt,Ct):rt}function isCustomWidget(nt={}){return"widget"in getUiOptions(nt)&&getUiOptions(nt).widget!=="hidden"}function isFilesArray(nt,tt,rt={},st,at){if(rt[UI_WIDGET_KEY]==="files")return!0;if(tt.items){const lt=retrieveSchema(nt,tt.items,st,void 0,at);return lt.type==="string"&&lt.format==="data-url"}return!1}function getDisplayLabel(nt,tt,rt={},st,at,lt){const dt=getUiOptions(rt,at),{label:yt=!0}=dt;let vt=!!yt;const _t=getSchemaType(tt);return _t==="array"&&(vt=isMultiSelect(nt,tt,st,lt)||isFilesArray(nt,tt,rt,st,lt)||isCustomWidget(rt)),_t==="object"&&(vt=!1),_t==="boolean"&&!rt[UI_WIDGET_KEY]&&(vt=!1),rt[UI_FIELD_KEY]&&(vt=!1),vt}function mergeValidationData(nt,tt,rt){if(!rt)return tt;const{errors:st,errorSchema:at}=tt;let lt=nt.toErrorList(rt),dt=rt;return _isEmpty(at)||(dt=mergeObjects(at,rt,!0),lt=[...st].concat(lt)),{errorSchema:dt,errors:lt}}const NO_VALUE=Symbol("no Value");function sanitizeDataForNewSchema(nt,tt,rt,st,at={},lt){let dt;if(has$4(rt,PROPERTIES_KEY)){const yt={};if(has$4(st,PROPERTIES_KEY)){const bt=_get(st,PROPERTIES_KEY,{});Object.keys(bt).forEach(Mt=>{has$4(at,Mt)&&(yt[Mt]=void 0)})}const vt=Object.keys(_get(rt,PROPERTIES_KEY,{})),_t={};vt.forEach(bt=>{const Mt=_get(at,bt);let Ct=_get(st,[PROPERTIES_KEY,bt],{}),Tt=_get(rt,[PROPERTIES_KEY,bt],{});has$4(Ct,REF_KEY)&&(Ct=retrieveSchema(nt,Ct,tt,Mt,lt)),has$4(Tt,REF_KEY)&&(Tt=retrieveSchema(nt,Tt,tt,Mt,lt));const $t=_get(Ct,"type"),Rt=_get(Tt,"type");if(!$t||$t===Rt)if(has$4(yt,bt)&&delete yt[bt],Rt==="object"||Rt==="array"&&Array.isArray(Mt)){const Et=sanitizeDataForNewSchema(nt,tt,Tt,Ct,Mt,lt);(Et!==void 0||Rt==="array")&&(_t[bt]=Et)}else{const Et=_get(Tt,"default",NO_VALUE),wt=_get(Ct,"default",NO_VALUE);Et!==NO_VALUE&&Et!==Mt&&(wt===Mt?yt[bt]=Et:_get(Tt,"readOnly")===!0&&(yt[bt]=void 0));const Pt=_get(Tt,"const",NO_VALUE),Ft=_get(Ct,"const",NO_VALUE);Pt!==NO_VALUE&&Pt!==Mt&&(yt[bt]=Ft===Mt?Pt:void 0)}}),dt={...typeof at=="string"||Array.isArray(at)?void 0:at,...yt,..._t}}else if(_get(st,"type")==="array"&&_get(rt,"type")==="array"&&Array.isArray(at)){let yt=_get(st,"items"),vt=_get(rt,"items");if(typeof yt=="object"&&typeof vt=="object"&&!Array.isArray(yt)&&!Array.isArray(vt)){has$4(yt,REF_KEY)&&(yt=retrieveSchema(nt,yt,tt,at,lt)),has$4(vt,REF_KEY)&&(vt=retrieveSchema(nt,vt,tt,at,lt));const _t=_get(yt,"type"),bt=_get(vt,"type");if(!_t||_t===bt){const Mt=_get(rt,"maxItems",-1);bt==="object"?dt=at.reduce((Ct,Tt)=>{const $t=sanitizeDataForNewSchema(nt,tt,vt,yt,Tt,lt);return $t!==void 0&&(Mt<0||Ct.length<Mt)&&Ct.push($t),Ct},[]):dt=Mt>0&&at.length>Mt?at.slice(0,Mt):at}}else typeof yt=="boolean"&&typeof vt=="boolean"&&yt===vt&&(dt=at)}return dt}function toIdSchemaInternal(nt,tt,rt,st,at,lt,dt,yt=[],vt){if(REF_KEY in tt||DEPENDENCIES_KEY in tt||ALL_OF_KEY in tt){const Mt=retrieveSchema(nt,tt,lt,dt,vt);if(yt.findIndex(Tt=>isEqual$3(Tt,Mt))===-1)return toIdSchemaInternal(nt,Mt,rt,st,at,lt,dt,yt.concat(Mt),vt)}if(ITEMS_KEY in tt&&!_get(tt,[ITEMS_KEY,REF_KEY]))return toIdSchemaInternal(nt,_get(tt,ITEMS_KEY),rt,st,at,lt,dt,yt,vt);const bt={$id:at||rt};if(getSchemaType(tt)==="object"&&PROPERTIES_KEY in tt)for(const Mt in tt.properties){const Ct=_get(tt,[PROPERTIES_KEY,Mt]),Tt=bt[ID_KEY]+st+Mt;bt[Mt]=toIdSchemaInternal(nt,isObject$g(Ct)?Ct:{},rt,st,Tt,lt,_get(dt,[Mt]),yt,vt)}return bt}function toIdSchema(nt,tt,rt,st,at,lt="root",dt="_",yt){return toIdSchemaInternal(nt,tt,lt,dt,rt,st,at,void 0,yt)}function toPathSchemaInternal(nt,tt,rt,st,at,lt=[],dt){if(REF_KEY in tt||DEPENDENCIES_KEY in tt||ALL_OF_KEY in tt){const vt=retrieveSchema(nt,tt,st,at,dt);if(lt.findIndex(bt=>isEqual$3(bt,vt))===-1)return toPathSchemaInternal(nt,vt,rt,st,at,lt.concat(vt),dt)}let yt={[NAME_KEY]:rt.replace(/^\./,"")};if(ONE_OF_KEY in tt||ANY_OF_KEY in tt){const vt=ONE_OF_KEY in tt?tt.oneOf:tt.anyOf,_t=getDiscriminatorFieldFromSchema(tt),bt=getClosestMatchingOption(nt,st,at,vt,0,_t,dt),Mt=vt[bt];yt={...yt,...toPathSchemaInternal(nt,Mt,rt,st,at,lt,dt)}}if(ADDITIONAL_PROPERTIES_KEY in tt&&tt[ADDITIONAL_PROPERTIES_KEY]!==!1&&set$1(yt,RJSF_ADDITIONAL_PROPERTIES_FLAG,!0),ITEMS_KEY in tt&&Array.isArray(at)){const{items:vt,additionalItems:_t}=tt;Array.isArray(vt)?at.forEach((bt,Mt)=>{vt[Mt]?yt[Mt]=toPathSchemaInternal(nt,vt[Mt],`${rt}.${Mt}`,st,bt,lt,dt):_t?yt[Mt]=toPathSchemaInternal(nt,_t,`${rt}.${Mt}`,st,bt,lt,dt):console.warn(`Unable to generate path schema for "${rt}.${Mt}". No schema defined for it`)}):at.forEach((bt,Mt)=>{yt[Mt]=toPathSchemaInternal(nt,vt,`${rt}.${Mt}`,st,bt,lt,dt)})}else if(PROPERTIES_KEY in tt)for(const vt in tt.properties){const _t=_get(tt,[PROPERTIES_KEY,vt]);yt[vt]=toPathSchemaInternal(nt,_t,`${rt}.${vt}`,st,_get(at,[vt]),lt,dt)}return yt}function toPathSchema(nt,tt,rt="",st,at,lt){return toPathSchemaInternal(nt,tt,rt,st,at,void 0,lt)}class SchemaUtils{constructor(tt,rt,st,at){this.rootSchema=rt,this.validator=tt,this.experimental_defaultFormStateBehavior=st,this.experimental_customMergeAllOf=at}getValidator(){return this.validator}doesSchemaUtilsDiffer(tt,rt,st={},at){return!tt||!rt?!1:this.validator!==tt||!deepEquals(this.rootSchema,rt)||!deepEquals(this.experimental_defaultFormStateBehavior,st)||this.experimental_customMergeAllOf!==at}getDefaultFormState(tt,rt,st=!1){return getDefaultFormState(this.validator,tt,rt,this.rootSchema,st,this.experimental_defaultFormStateBehavior,this.experimental_customMergeAllOf)}getDisplayLabel(tt,rt,st){return getDisplayLabel(this.validator,tt,rt,this.rootSchema,st,this.experimental_customMergeAllOf)}getClosestMatchingOption(tt,rt,st,at){return getClosestMatchingOption(this.validator,this.rootSchema,tt,rt,st,at,this.experimental_customMergeAllOf)}getFirstMatchingOption(tt,rt,st){return getFirstMatchingOption(this.validator,tt,rt,this.rootSchema,st)}getMatchingOption(tt,rt,st){return getMatchingOption(this.validator,tt,rt,this.rootSchema,st)}isFilesArray(tt,rt){return isFilesArray(this.validator,tt,rt,this.rootSchema,this.experimental_customMergeAllOf)}isMultiSelect(tt){return isMultiSelect(this.validator,tt,this.rootSchema,this.experimental_customMergeAllOf)}isSelect(tt){return isSelect(this.validator,tt,this.rootSchema,this.experimental_customMergeAllOf)}mergeValidationData(tt,rt){return mergeValidationData(this.validator,tt,rt)}retrieveSchema(tt,rt){return retrieveSchema(this.validator,tt,this.rootSchema,rt,this.experimental_customMergeAllOf)}sanitizeDataForNewSchema(tt,rt,st){return sanitizeDataForNewSchema(this.validator,this.rootSchema,tt,rt,st,this.experimental_customMergeAllOf)}toIdSchema(tt,rt,st,at="root",lt="_"){return toIdSchema(this.validator,tt,rt,this.rootSchema,st,at,lt,this.experimental_customMergeAllOf)}toPathSchema(tt,rt,st){return toPathSchema(this.validator,tt,rt,this.rootSchema,st,this.experimental_customMergeAllOf)}}function createSchemaUtils(nt,tt,rt={},st){return new SchemaUtils(nt,tt,rt,st)}function dataURItoBlob(nt){var tt;if(nt.indexOf("data:")===-1)throw new Error("File is invalid: URI must be a dataURI");const st=nt.slice(5).split(";base64,");if(st.length!==2)throw new Error("File is invalid: dataURI must be base64");const[at,lt]=st,[dt,...yt]=at.split(";"),vt=dt||"",_t=decodeURI(((tt=yt.map(bt=>bt.split("=")).find(([bt])=>bt==="name"))===null||tt===void 0?void 0:tt[1])||"unknown");try{const bt=atob(lt),Mt=new Array(bt.length);for(let Tt=0;Tt<bt.length;Tt++)Mt[Tt]=bt.charCodeAt(Tt);return{blob:new window.Blob([new Uint8Array(Mt)],{type:vt}),name:_t}}catch(bt){throw new Error("File is invalid: "+bt.message)}}function pad(nt,tt){let rt=String(nt);for(;rt.length<tt;)rt="0"+rt;return rt}function dateRangeOptions(nt,tt){if(nt<=0&&tt<=0)nt=new Date().getFullYear()+nt,tt=new Date().getFullYear()+tt;else if(nt<0||tt<0)throw new Error(`Both start (${nt}) and stop (${tt}) must both be <= 0 or > 0, got one of each`);if(nt>tt)return dateRangeOptions(tt,nt).reverse();const rt=[];for(let st=nt;st<=tt;st++)rt.push({value:st,label:pad(st,2)});return rt}function replaceStringParameters(nt,tt){let rt=nt;if(Array.isArray(tt)){const st=rt.split(/(%\d)/);tt.forEach((at,lt)=>{const dt=st.findIndex(yt=>yt===`%${lt+1}`);dt>=0&&(st[dt]=at)}),rt=st.join("")}return rt}function englishStringTranslator(nt,tt){return replaceStringParameters(nt,tt)}function enumOptionsValueForIndex(nt,tt=[],rt){if(Array.isArray(nt))return nt.map(lt=>enumOptionsValueForIndex(lt,tt)).filter(lt=>lt!==rt);const st=nt===""||nt===null?-1:Number(nt),at=tt[st];return at?at.value:rt}function enumOptionsDeselectValue(nt,tt,rt=[]){const st=enumOptionsValueForIndex(nt,rt);return Array.isArray(tt)?tt.filter(at=>!isEqual$3(at,st)):isEqual$3(st,tt)?void 0:tt}function enumOptionsIsSelected(nt,tt){return Array.isArray(tt)?tt.some(rt=>isEqual$3(rt,nt)):isEqual$3(tt,nt)}function enumOptionsIndexForValue(nt,tt=[],rt=!1){const st=tt.map((at,lt)=>enumOptionsIsSelected(at.value,nt)?String(lt):void 0).filter(at=>typeof at<"u");return rt?st:st[0]}function isNil(nt){return nt==null}var isNil_1=isNil;const _isNil=getDefaultExportFromCjs(isNil_1);function enumOptionsSelectValue(nt,tt,rt=[]){const st=enumOptionsValueForIndex(nt,rt);if(!_isNil(st)){const at=rt.findIndex(yt=>st===yt.value),lt=rt.map(({value:yt})=>yt);return tt.slice(0,at).concat(st,tt.slice(at)).sort((yt,vt)=>+(lt.indexOf(yt)>lt.indexOf(vt)))}return tt}var baseSet$1=_baseSet;function setWith(nt,tt,rt,st){return st=typeof st=="function"?st:void 0,nt==null?nt:baseSet$1(nt,tt,rt,st)}var setWith_1=setWith;const setWith$1=getDefaultExportFromCjs(setWith_1);class ErrorSchemaBuilder{constructor(tt){this.errorSchema={},this.resetAllErrors(tt)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(tt){let st=Array.isArray(tt)&&tt.length>0||typeof tt=="string"?_get(this.errorSchema,tt):this.errorSchema;return!st&&tt&&(st={},setWith$1(this.errorSchema,tt,st,Object)),st}resetAllErrors(tt){return this.errorSchema=tt?cloneDeep$2(tt):{},this}addErrors(tt,rt){const st=this.getOrCreateErrorBlock(rt);let at=_get(st,ERRORS_KEY);return Array.isArray(at)||(at=[],st[ERRORS_KEY]=at),Array.isArray(tt)?set$1(st,ERRORS_KEY,[...new Set([...at,...tt])]):set$1(st,ERRORS_KEY,[...new Set([...at,tt])]),this}setErrors(tt,rt){const st=this.getOrCreateErrorBlock(rt),at=Array.isArray(tt)?[...new Set([...tt])]:[tt];return set$1(st,ERRORS_KEY,at),this}clearErrors(tt){const rt=this.getOrCreateErrorBlock(tt);return set$1(rt,ERRORS_KEY,[]),this}}function getDateElementProps(nt,tt,rt=[1900,new Date().getFullYear()+2],st="YMD"){const{day:at,month:lt,year:dt,hour:yt,minute:vt,second:_t}=nt,bt={type:"day",range:[1,31],value:at},Mt={type:"month",range:[1,12],value:lt},Ct={type:"year",range:rt,value:dt},Tt=[];switch(st){case"MDY":Tt.push(Mt,bt,Ct);break;case"DMY":Tt.push(bt,Mt,Ct);break;case"YMD":default:Tt.push(Ct,Mt,bt)}return tt&&Tt.push({type:"hour",range:[0,23],value:yt},{type:"minute",range:[0,59],value:vt},{type:"second",range:[0,59],value:_t}),Tt}function rangeSpec(nt){const tt={};return nt.multipleOf&&(tt.step=nt.multipleOf),(nt.minimum||nt.minimum===0)&&(tt.min=nt.minimum),(nt.maximum||nt.maximum===0)&&(tt.max=nt.maximum),tt}function getInputProps(nt,tt,rt={},st=!0){const at={type:tt||"text",...rangeSpec(nt)};return rt.inputType?at.type=rt.inputType:tt||(nt.type==="number"?(at.type="number",st&&at.step===void 0&&(at.step="any")):nt.type==="integer"&&(at.type="number",at.step===void 0&&(at.step=1))),rt.autocomplete&&(at.autoComplete=rt.autocomplete),at}const DEFAULT_OPTIONS={props:{disabled:!1},submitText:"Submit",norender:!1};function getSubmitButtonOptions(nt={}){const tt=getUiOptions(nt);if(tt&&tt[SUBMIT_BTN_OPTIONS_KEY]){const rt=tt[SUBMIT_BTN_OPTIONS_KEY];return{...DEFAULT_OPTIONS,...rt}}return DEFAULT_OPTIONS}function getTemplate(nt,tt,rt={}){const{templates:st}=tt;return nt==="ButtonTemplates"?st[nt]:rt[nt]||st[nt]}var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=Symbol.for("react.element"),c$3=Symbol.for("react.portal"),d$1=Symbol.for("react.fragment"),e$1=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$1=Symbol.for("react.provider"),h$3=Symbol.for("react.context"),k$2=Symbol.for("react.server_context"),l$2=Symbol.for("react.forward_ref"),m$2=Symbol.for("react.suspense"),n$3=Symbol.for("react.suspense_list"),p$3=Symbol.for("react.memo"),q$4=Symbol.for("react.lazy"),t$3=Symbol.for("react.offscreen"),u$3;u$3=Symbol.for("react.module.reference");function v$2(nt){if(typeof nt=="object"&&nt!==null){var tt=nt.$$typeof;switch(tt){case b$1:switch(nt=nt.type,nt){case d$1:case f$1:case e$1:case m$2:case n$3:return nt;default:switch(nt=nt&&nt.$$typeof,nt){case k$2:case h$3:case l$2:case q$4:case p$3:case g$1:return nt;default:return tt}}case c$3:return tt}}}reactIs_production_min.ContextConsumer=h$3;reactIs_production_min.ContextProvider=g$1;reactIs_production_min.Element=b$1;reactIs_production_min.ForwardRef=l$2;reactIs_production_min.Fragment=d$1;reactIs_production_min.Lazy=q$4;reactIs_production_min.Memo=p$3;reactIs_production_min.Portal=c$3;reactIs_production_min.Profiler=f$1;reactIs_production_min.StrictMode=e$1;reactIs_production_min.Suspense=m$2;reactIs_production_min.SuspenseList=n$3;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(nt){return v$2(nt)===h$3};reactIs_production_min.isContextProvider=function(nt){return v$2(nt)===g$1};reactIs_production_min.isElement=function(nt){return typeof nt=="object"&&nt!==null&&nt.$$typeof===b$1};reactIs_production_min.isForwardRef=function(nt){return v$2(nt)===l$2};reactIs_production_min.isFragment=function(nt){return v$2(nt)===d$1};reactIs_production_min.isLazy=function(nt){return v$2(nt)===q$4};reactIs_production_min.isMemo=function(nt){return v$2(nt)===p$3};reactIs_production_min.isPortal=function(nt){return v$2(nt)===c$3};reactIs_production_min.isProfiler=function(nt){return v$2(nt)===f$1};reactIs_production_min.isStrictMode=function(nt){return v$2(nt)===e$1};reactIs_production_min.isSuspense=function(nt){return v$2(nt)===m$2};reactIs_production_min.isSuspenseList=function(nt){return v$2(nt)===n$3};reactIs_production_min.isValidElementType=function(nt){return typeof nt=="string"||typeof nt=="function"||nt===d$1||nt===f$1||nt===e$1||nt===m$2||nt===n$3||nt===t$3||typeof nt=="object"&&nt!==null&&(nt.$$typeof===q$4||nt.$$typeof===p$3||nt.$$typeof===g$1||nt.$$typeof===h$3||nt.$$typeof===l$2||nt.$$typeof===u$3||nt.getModuleId!==void 0)};reactIs_production_min.typeOf=v$2;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports;const ReactIs=getDefaultExportFromCjs(reactIsExports),widgetMap={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function mergeWidgetOptions(nt){let tt=_get(nt,"MergedWidget");if(!tt){const rt=nt.defaultProps&&nt.defaultProps.options||{};tt=({options:st,...at})=>jsxRuntimeExports.jsx(nt,{options:{...rt,...st},...at}),set$1(nt,"MergedWidget",tt)}return tt}function getWidget(nt,tt,rt={}){const st=getSchemaType(nt);if(typeof tt=="function"||tt&&ReactIs.isForwardRef(reactExports.createElement(tt))||ReactIs.isMemo(tt))return mergeWidgetOptions(tt);if(typeof tt!="string")throw new Error(`Unsupported widget definition: ${typeof tt}`);if(tt in rt){const at=rt[tt];return getWidget(nt,at,rt)}if(typeof st=="string"){if(!(st in widgetMap))throw new Error(`No widget for type '${st}'`);if(tt in widgetMap[st]){const at=rt[widgetMap[st][tt]];return getWidget(nt,at,rt)}}throw new Error(`No widget '${tt}' for type '${st}'`)}function hashString(nt){let tt=0;for(let rt=0;rt<nt.length;rt+=1){const st=nt.charCodeAt(rt);tt=(tt<<5)-tt+st,tt=tt&tt}return tt.toString(16)}function hashForSchema(nt){const tt=new Set;return JSON.stringify(nt,(rt,st)=>(tt.add(rt),st)),hashString(JSON.stringify(nt,Array.from(tt).sort()))}function hasWidget(nt,tt,rt={}){try{return getWidget(nt,tt,rt),!0}catch(st){const at=st;if(at.message&&(at.message.startsWith("No widget")||at.message.startsWith("Unsupported widget")))return!1;throw st}}function idGenerator(nt,tt){return`${isString$2(nt)?nt:nt[ID_KEY]}__${tt}`}function descriptionId(nt){return idGenerator(nt,"description")}function errorId(nt){return idGenerator(nt,"error")}function examplesId(nt){return idGenerator(nt,"examples")}function helpId(nt){return idGenerator(nt,"help")}function titleId(nt){return idGenerator(nt,"title")}function ariaDescribedByIds(nt,tt=!1){const rt=tt?` ${examplesId(nt)}`:"";return`${errorId(nt)} ${descriptionId(nt)} ${helpId(nt)}${rt}`}function optionId(nt,tt){return`${nt}-${tt}`}function labelValue(nt,tt,rt){return tt?rt:nt}function localToUTC(nt){return nt?new Date(nt).toJSON():void 0}function toConstant(nt){if(ENUM_KEY in nt&&Array.isArray(nt.enum)&&nt.enum.length===1)return nt.enum[0];if(CONST_KEY in nt)return nt.const;throw new Error("schema cannot be inferred as a constant")}function optionsList(nt,tt){const rt=nt;if(nt.enum){let lt;if(tt){const{enumNames:dt}=getUiOptions(tt);lt=dt}return!lt&&rt.enumNames&&(lt=rt.enumNames),nt.enum.map((dt,yt)=>({label:(lt==null?void 0:lt[yt])||String(dt),value:dt}))}let st,at;return nt.anyOf?(st=nt.anyOf,at=tt==null?void 0:tt.anyOf):nt.oneOf&&(st=nt.oneOf,at=tt==null?void 0:tt.oneOf),st&&st.map((lt,dt)=>{const{title:yt}=getUiOptions(at==null?void 0:at[dt]),vt=lt,_t=toConstant(vt),bt=yt||vt.title||String(_t);return{schema:vt,label:bt,value:_t}})}function orderProperties(nt,tt){if(!Array.isArray(tt))return nt;const rt=bt=>bt.reduce((Mt,Ct)=>(Mt[Ct]=!0,Mt),{}),st=bt=>bt.length>1?`properties '${bt.join("', '")}'`:`property '${bt[0]}'`,at=rt(nt),lt=tt.filter(bt=>bt==="*"||at[bt]),dt=rt(lt),yt=nt.filter(bt=>!dt[bt]),vt=lt.indexOf("*");if(vt===-1){if(yt.length)throw new Error(`uiSchema order list does not contain ${st(yt)}`);return lt}if(vt!==lt.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const _t=[...lt];return _t.splice(vt,1,...yt),_t}function parseDateString(nt,tt=!0){if(!nt)return{year:-1,month:-1,day:-1,hour:tt?-1:0,minute:tt?-1:0,second:tt?-1:0};const rt=new Date(nt);if(Number.isNaN(rt.getTime()))throw new Error("Unable to parse date "+nt);return{year:rt.getUTCFullYear(),month:rt.getUTCMonth()+1,day:rt.getUTCDate(),hour:tt?rt.getUTCHours():0,minute:tt?rt.getUTCMinutes():0,second:tt?rt.getUTCSeconds():0}}function schemaRequiresTrueValue(nt){if(nt.const||nt.enum&&nt.enum.length===1&&nt.enum[0]===!0)return!0;if(nt.anyOf&&nt.anyOf.length===1)return schemaRequiresTrueValue(nt.anyOf[0]);if(nt.oneOf&&nt.oneOf.length===1)return schemaRequiresTrueValue(nt.oneOf[0]);if(nt.allOf){const tt=rt=>schemaRequiresTrueValue(rt);return nt.allOf.some(tt)}return!1}function shouldRender(nt,tt,rt){const{props:st,state:at}=nt;return!deepEquals(st,tt)||!deepEquals(at,rt)}function toDateString(nt,tt=!0){const{year:rt,month:st,day:at,hour:lt=0,minute:dt=0,second:yt=0}=nt,vt=Date.UTC(rt,st-1,at,lt,dt,yt),_t=new Date(vt).toJSON();return tt?_t:_t.slice(0,10)}function toErrorList(nt,tt=[]){if(!nt)return[];let rt=[];return ERRORS_KEY in nt&&(rt=rt.concat(nt[ERRORS_KEY].map(st=>{const at=`.${tt.join(".")}`;return{property:at,message:st,stack:`${at} ${st}`}}))),Object.keys(nt).reduce((st,at)=>{if(at!==ERRORS_KEY){const lt=nt[at];isPlainObject$7(lt)&&(st=st.concat(toErrorList(lt,[...tt,at])))}return st},rt)}var arrayMap=_arrayMap,copyArray$1=_copyArray,isArray$1=isArray_1,isSymbol=isSymbol_1,stringToPath=_stringToPath,toKey=_toKey,toString$2=toString_1;function toPath(nt){return isArray$1(nt)?arrayMap(nt,toKey):isSymbol(nt)?[nt]:copyArray$1(stringToPath(toString$2(nt)))}var toPath_1=toPath;const _toPath=getDefaultExportFromCjs(toPath_1);function toErrorSchema(nt){const tt=new ErrorSchemaBuilder;return nt.length&&nt.forEach(rt=>{const{property:st,message:at}=rt,lt=st==="."?[]:_toPath(st);lt.length>0&&lt[0]===""&&lt.splice(0,1),at&&tt.addErrors(at,lt)}),tt.ErrorSchema}function unwrapErrorHandler(nt){return Object.keys(nt).reduce((tt,rt)=>{if(rt==="addError")return tt;{const st=nt[rt];return isPlainObject$7(st)?{...tt,[rt]:unwrapErrorHandler(st)}:{...tt,[rt]:st}}},{})}function utcToLocal(nt){if(!nt)return"";const tt=new Date(nt),rt=pad(tt.getFullYear(),4),st=pad(tt.getMonth()+1,2),at=pad(tt.getDate(),2),lt=pad(tt.getHours(),2),dt=pad(tt.getMinutes(),2),yt=pad(tt.getSeconds(),2),vt=pad(tt.getMilliseconds(),3);return`${rt}-${st}-${at}T${lt}:${dt}:${yt}.${vt}`}function validationDataMerge(nt,tt){if(!tt)return nt;const{errors:rt,errorSchema:st}=nt;let at=toErrorList(tt),lt=tt;return _isEmpty(st)||(lt=mergeObjects(st,tt,!0),at=[...rt].concat(at)),{errorSchema:lt,errors:at}}function withIdRefPrefixObject(nt){for(const tt in nt){const rt=nt,st=rt[tt];tt===REF_KEY&&typeof st=="string"&&st.startsWith("#")?rt[tt]=ROOT_SCHEMA_PREFIX+st:rt[tt]=withIdRefPrefix(st)}return nt}function withIdRefPrefixArray(nt){for(let tt=0;tt<nt.length;tt++)nt[tt]=withIdRefPrefix(nt[tt]);return nt}function withIdRefPrefix(nt){return Array.isArray(nt)?withIdRefPrefixArray([...nt]):isObject$f(nt)?withIdRefPrefixObject({...nt}):nt}var TranslatableString;(function(nt){nt.ArrayItemTitle="Item",nt.MissingItems="Missing items definition",nt.YesLabel="Yes",nt.NoLabel="No",nt.CloseLabel="Close",nt.ErrorsLabel="Errors",nt.NewStringDefault="New Value",nt.AddButton="Add",nt.AddItemButton="Add Item",nt.CopyButton="Copy",nt.MoveDownButton="Move down",nt.MoveUpButton="Move up",nt.RemoveButton="Remove",nt.NowLabel="Now",nt.ClearLabel="Clear",nt.AriaDateLabel="Select a date",nt.PreviewLabel="Preview",nt.DecrementAriaLabel="Decrease value by 1",nt.IncrementAriaLabel="Increase value by 1",nt.UnknownFieldType="Unknown field type %1",nt.OptionPrefix="Option %1",nt.TitleOptionPrefix="%1 option %2",nt.KeyLabel="%1 Key",nt.InvalidObjectField='Invalid "%1" object field configuration: _%2_.',nt.UnsupportedField="Unsupported field schema.",nt.UnsupportedFieldWithId="Unsupported field schema for field `%1`.",nt.UnsupportedFieldWithReason="Unsupported field schema: _%1_.",nt.UnsupportedFieldWithIdAndReason="Unsupported field schema for field `%1`: _%2_.",nt.FilesInfo="**%1** (%2, %3 bytes)"})(TranslatableString||(TranslatableString={}));var ajv={exports:{}},core$2={},validate={},boolSchema={},errors={},codegen={},code$1={};(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.regexpCode=nt.getEsmExportName=nt.getProperty=nt.safeStringify=nt.stringify=nt.strConcat=nt.addCodeArg=nt.str=nt._=nt.nil=nt._Code=nt.Name=nt.IDENTIFIER=nt._CodeOrName=void 0;class tt{}nt._CodeOrName=tt,nt.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class rt extends tt{constructor(Pt){if(super(),!nt.IDENTIFIER.test(Pt))throw new Error("CodeGen: name must be a valid identifier");this.str=Pt}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}nt.Name=rt;class st extends tt{constructor(Pt){super(),this._items=typeof Pt=="string"?[Pt]:Pt}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const Pt=this._items[0];return Pt===""||Pt==='""'}get str(){var Pt;return(Pt=this._str)!==null&&Pt!==void 0?Pt:this._str=this._items.reduce((Ft,Nt)=>`${Ft}${Nt}`,"")}get names(){var Pt;return(Pt=this._names)!==null&&Pt!==void 0?Pt:this._names=this._items.reduce((Ft,Nt)=>(Nt instanceof rt&&(Ft[Nt.str]=(Ft[Nt.str]||0)+1),Ft),{})}}nt._Code=st,nt.nil=new st("");function at(wt,...Pt){const Ft=[wt[0]];let Nt=0;for(;Nt<Pt.length;)yt(Ft,Pt[Nt]),Ft.push(wt[++Nt]);return new st(Ft)}nt._=at;const lt=new st("+");function dt(wt,...Pt){const Ft=[Tt(wt[0])];let Nt=0;for(;Nt<Pt.length;)Ft.push(lt),yt(Ft,Pt[Nt]),Ft.push(lt,Tt(wt[++Nt]));return vt(Ft),new st(Ft)}nt.str=dt;function yt(wt,Pt){Pt instanceof st?wt.push(...Pt._items):Pt instanceof rt?wt.push(Pt):wt.push(Mt(Pt))}nt.addCodeArg=yt;function vt(wt){let Pt=1;for(;Pt<wt.length-1;){if(wt[Pt]===lt){const Ft=_t(wt[Pt-1],wt[Pt+1]);if(Ft!==void 0){wt.splice(Pt-1,3,Ft);continue}wt[Pt++]="+"}Pt++}}function _t(wt,Pt){if(Pt==='""')return wt;if(wt==='""')return Pt;if(typeof wt=="string")return Pt instanceof rt||wt[wt.length-1]!=='"'?void 0:typeof Pt!="string"?`${wt.slice(0,-1)}${Pt}"`:Pt[0]==='"'?wt.slice(0,-1)+Pt.slice(1):void 0;if(typeof Pt=="string"&&Pt[0]==='"'&&!(wt instanceof rt))return`"${wt}${Pt.slice(1)}`}function bt(wt,Pt){return Pt.emptyStr()?wt:wt.emptyStr()?Pt:dt`${wt}${Pt}`}nt.strConcat=bt;function Mt(wt){return typeof wt=="number"||typeof wt=="boolean"||wt===null?wt:Tt(Array.isArray(wt)?wt.join(","):wt)}function Ct(wt){return new st(Tt(wt))}nt.stringify=Ct;function Tt(wt){return JSON.stringify(wt).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}nt.safeStringify=Tt;function $t(wt){return typeof wt=="string"&&nt.IDENTIFIER.test(wt)?new st(`.${wt}`):at`[${wt}]`}nt.getProperty=$t;function Rt(wt){if(typeof wt=="string"&&nt.IDENTIFIER.test(wt))return new st(`${wt}`);throw new Error(`CodeGen: invalid export name: ${wt}, use explicit $id name mapping`)}nt.getEsmExportName=Rt;function Et(wt){return new st(wt.toString())}nt.regexpCode=Et})(code$1);var scope={};(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.ValueScope=nt.ValueScopeName=nt.Scope=nt.varKinds=nt.UsedValueState=void 0;const tt=code$1;class rt extends Error{constructor(_t){super(`CodeGen: "code" for ${_t} not defined`),this.value=_t.value}}var st;(function(vt){vt[vt.Started=0]="Started",vt[vt.Completed=1]="Completed"})(st||(nt.UsedValueState=st={})),nt.varKinds={const:new tt.Name("const"),let:new tt.Name("let"),var:new tt.Name("var")};class at{constructor({prefixes:_t,parent:bt}={}){this._names={},this._prefixes=_t,this._parent=bt}toName(_t){return _t instanceof tt.Name?_t:this.name(_t)}name(_t){return new tt.Name(this._newName(_t))}_newName(_t){const bt=this._names[_t]||this._nameGroup(_t);return`${_t}${bt.index++}`}_nameGroup(_t){var bt,Mt;if(!((Mt=(bt=this._parent)===null||bt===void 0?void 0:bt._prefixes)===null||Mt===void 0)&&Mt.has(_t)||this._prefixes&&!this._prefixes.has(_t))throw new Error(`CodeGen: prefix "${_t}" is not allowed in this scope`);return this._names[_t]={prefix:_t,index:0}}}nt.Scope=at;class lt extends tt.Name{constructor(_t,bt){super(bt),this.prefix=_t}setValue(_t,{property:bt,itemIndex:Mt}){this.value=_t,this.scopePath=(0,tt._)`.${new tt.Name(bt)}[${Mt}]`}}nt.ValueScopeName=lt;const dt=(0,tt._)`\n`;class yt extends at{constructor(_t){super(_t),this._values={},this._scope=_t.scope,this.opts={..._t,_n:_t.lines?dt:tt.nil}}get(){return this._scope}name(_t){return new lt(_t,this._newName(_t))}value(_t,bt){var Mt;if(bt.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const Ct=this.toName(_t),{prefix:Tt}=Ct,$t=(Mt=bt.key)!==null&&Mt!==void 0?Mt:bt.ref;let Rt=this._values[Tt];if(Rt){const Pt=Rt.get($t);if(Pt)return Pt}else Rt=this._values[Tt]=new Map;Rt.set($t,Ct);const Et=this._scope[Tt]||(this._scope[Tt]=[]),wt=Et.length;return Et[wt]=bt.ref,Ct.setValue(bt,{property:Tt,itemIndex:wt}),Ct}getValue(_t,bt){const Mt=this._values[_t];if(Mt)return Mt.get(bt)}scopeRefs(_t,bt=this._values){return this._reduceValues(bt,Mt=>{if(Mt.scopePath===void 0)throw new Error(`CodeGen: name "${Mt}" has no value`);return(0,tt._)`${_t}${Mt.scopePath}`})}scopeCode(_t=this._values,bt,Mt){return this._reduceValues(_t,Ct=>{if(Ct.value===void 0)throw new Error(`CodeGen: name "${Ct}" has no value`);return Ct.value.code},bt,Mt)}_reduceValues(_t,bt,Mt={},Ct){let Tt=tt.nil;for(const $t in _t){const Rt=_t[$t];if(!Rt)continue;const Et=Mt[$t]=Mt[$t]||new Map;Rt.forEach(wt=>{if(Et.has(wt))return;Et.set(wt,st.Started);let Pt=bt(wt);if(Pt){const Ft=this.opts.es5?nt.varKinds.var:nt.varKinds.const;Tt=(0,tt._)`${Tt}${Ft} ${wt} = ${Pt};${this.opts._n}`}else if(Pt=Ct==null?void 0:Ct(wt))Tt=(0,tt._)`${Tt}${Pt}${this.opts._n}`;else throw new rt(wt);Et.set(wt,st.Completed)})}return Tt}}nt.ValueScope=yt})(scope);(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.or=nt.and=nt.not=nt.CodeGen=nt.operators=nt.varKinds=nt.ValueScopeName=nt.ValueScope=nt.Scope=nt.Name=nt.regexpCode=nt.stringify=nt.getProperty=nt.nil=nt.strConcat=nt.str=nt._=void 0;const tt=code$1,rt=scope;var st=code$1;Object.defineProperty(nt,"_",{enumerable:!0,get:function(){return st._}}),Object.defineProperty(nt,"str",{enumerable:!0,get:function(){return st.str}}),Object.defineProperty(nt,"strConcat",{enumerable:!0,get:function(){return st.strConcat}}),Object.defineProperty(nt,"nil",{enumerable:!0,get:function(){return st.nil}}),Object.defineProperty(nt,"getProperty",{enumerable:!0,get:function(){return st.getProperty}}),Object.defineProperty(nt,"stringify",{enumerable:!0,get:function(){return st.stringify}}),Object.defineProperty(nt,"regexpCode",{enumerable:!0,get:function(){return st.regexpCode}}),Object.defineProperty(nt,"Name",{enumerable:!0,get:function(){return st.Name}});var at=scope;Object.defineProperty(nt,"Scope",{enumerable:!0,get:function(){return at.Scope}}),Object.defineProperty(nt,"ValueScope",{enumerable:!0,get:function(){return at.ValueScope}}),Object.defineProperty(nt,"ValueScopeName",{enumerable:!0,get:function(){return at.ValueScopeName}}),Object.defineProperty(nt,"varKinds",{enumerable:!0,get:function(){return at.varKinds}}),nt.operators={GT:new tt._Code(">"),GTE:new tt._Code(">="),LT:new tt._Code("<"),LTE:new tt._Code("<="),EQ:new tt._Code("==="),NEQ:new tt._Code("!=="),NOT:new tt._Code("!"),OR:new tt._Code("||"),AND:new tt._Code("&&"),ADD:new tt._Code("+")};class lt{optimizeNodes(){return this}optimizeNames(In,Wn){return this}}class dt extends lt{constructor(In,Wn,ar){super(),this.varKind=In,this.name=Wn,this.rhs=ar}render({es5:In,_n:Wn}){const ar=In?rt.varKinds.var:this.varKind,fr=this.rhs===void 0?"":` = ${this.rhs}`;return`${ar} ${this.name}${fr};`+Wn}optimizeNames(In,Wn){if(In[this.name.str])return this.rhs&&(this.rhs=mn(this.rhs,In,Wn)),this}get names(){return this.rhs instanceof tt._CodeOrName?this.rhs.names:{}}}class yt extends lt{constructor(In,Wn,ar){super(),this.lhs=In,this.rhs=Wn,this.sideEffects=ar}render({_n:In}){return`${this.lhs} = ${this.rhs};`+In}optimizeNames(In,Wn){if(!(this.lhs instanceof tt.Name&&!In[this.lhs.str]&&!this.sideEffects))return this.rhs=mn(this.rhs,In,Wn),this}get names(){const In=this.lhs instanceof tt.Name?{}:{...this.lhs.names};return an(In,this.rhs)}}class vt extends yt{constructor(In,Wn,ar,fr){super(In,ar,fr),this.op=Wn}render({_n:In}){return`${this.lhs} ${this.op}= ${this.rhs};`+In}}class _t extends lt{constructor(In){super(),this.label=In,this.names={}}render({_n:In}){return`${this.label}:`+In}}class bt extends lt{constructor(In){super(),this.label=In,this.names={}}render({_n:In}){return`break${this.label?` ${this.label}`:""};`+In}}class Mt extends lt{constructor(In){super(),this.error=In}render({_n:In}){return`throw ${this.error};`+In}get names(){return this.error.names}}class Ct extends lt{constructor(In){super(),this.code=In}render({_n:In}){return`${this.code};`+In}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(In,Wn){return this.code=mn(this.code,In,Wn),this}get names(){return this.code instanceof tt._CodeOrName?this.code.names:{}}}class Tt extends lt{constructor(In=[]){super(),this.nodes=In}render(In){return this.nodes.reduce((Wn,ar)=>Wn+ar.render(In),"")}optimizeNodes(){const{nodes:In}=this;let Wn=In.length;for(;Wn--;){const ar=In[Wn].optimizeNodes();Array.isArray(ar)?In.splice(Wn,1,...ar):ar?In[Wn]=ar:In.splice(Wn,1)}return In.length>0?this:void 0}optimizeNames(In,Wn){const{nodes:ar}=this;let fr=ar.length;for(;fr--;){const mr=ar[fr];mr.optimizeNames(In,Wn)||(En(In,mr.names),ar.splice(fr,1))}return ar.length>0?this:void 0}get names(){return this.nodes.reduce((In,Wn)=>cn(In,Wn.names),{})}}class $t extends Tt{render(In){return"{"+In._n+super.render(In)+"}"+In._n}}class Rt extends Tt{}class Et extends $t{}Et.kind="else";class wt extends $t{constructor(In,Wn){super(Wn),this.condition=In}render(In){let Wn=`if(${this.condition})`+super.render(In);return this.else&&(Wn+="else "+this.else.render(In)),Wn}optimizeNodes(){super.optimizeNodes();const In=this.condition;if(In===!0)return this.nodes;let Wn=this.else;if(Wn){const ar=Wn.optimizeNodes();Wn=this.else=Array.isArray(ar)?new Et(ar):ar}if(Wn)return In===!1?Wn instanceof wt?Wn:Wn.nodes:this.nodes.length?this:new wt(Cn(In),Wn instanceof wt?[Wn]:Wn.nodes);if(!(In===!1||!this.nodes.length))return this}optimizeNames(In,Wn){var ar;if(this.else=(ar=this.else)===null||ar===void 0?void 0:ar.optimizeNames(In,Wn),!!(super.optimizeNames(In,Wn)||this.else))return this.condition=mn(this.condition,In,Wn),this}get names(){const In=super.names;return an(In,this.condition),this.else&&cn(In,this.else.names),In}}wt.kind="if";class Pt extends $t{}Pt.kind="for";class Ft extends Pt{constructor(In){super(),this.iteration=In}render(In){return`for(${this.iteration})`+super.render(In)}optimizeNames(In,Wn){if(super.optimizeNames(In,Wn))return this.iteration=mn(this.iteration,In,Wn),this}get names(){return cn(super.names,this.iteration.names)}}class Nt extends Pt{constructor(In,Wn,ar,fr){super(),this.varKind=In,this.name=Wn,this.from=ar,this.to=fr}render(In){const Wn=In.es5?rt.varKinds.var:this.varKind,{name:ar,from:fr,to:mr}=this;return`for(${Wn} ${ar}=${fr}; ${ar}<${mr}; ${ar}++)`+super.render(In)}get names(){const In=an(super.names,this.from);return an(In,this.to)}}class Ot extends Pt{constructor(In,Wn,ar,fr){super(),this.loop=In,this.varKind=Wn,this.name=ar,this.iterable=fr}render(In){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(In)}optimizeNames(In,Wn){if(super.optimizeNames(In,Wn))return this.iterable=mn(this.iterable,In,Wn),this}get names(){return cn(super.names,this.iterable.names)}}class Bt extends $t{constructor(In,Wn,ar){super(),this.name=In,this.args=Wn,this.async=ar}render(In){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(In)}}Bt.kind="func";class Xt extends Tt{render(In){return"return "+super.render(In)}}Xt.kind="return";class Zt extends $t{render(In){let Wn="try"+super.render(In);return this.catch&&(Wn+=this.catch.render(In)),this.finally&&(Wn+=this.finally.render(In)),Wn}optimizeNodes(){var In,Wn;return super.optimizeNodes(),(In=this.catch)===null||In===void 0||In.optimizeNodes(),(Wn=this.finally)===null||Wn===void 0||Wn.optimizeNodes(),this}optimizeNames(In,Wn){var ar,fr;return super.optimizeNames(In,Wn),(ar=this.catch)===null||ar===void 0||ar.optimizeNames(In,Wn),(fr=this.finally)===null||fr===void 0||fr.optimizeNames(In,Wn),this}get names(){const In=super.names;return this.catch&&cn(In,this.catch.names),this.finally&&cn(In,this.finally.names),In}}class rn extends $t{constructor(In){super(),this.error=In}render(In){return`catch(${this.error})`+super.render(In)}}rn.kind="catch";class Gt extends $t{render(In){return"finally"+super.render(In)}}Gt.kind="finally";class nn{constructor(In,Wn={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Wn,_n:Wn.lines?`
`:""},this._extScope=In,this._scope=new rt.Scope({parent:In}),this._nodes=[new Rt]}toString(){return this._root.render(this.opts)}name(In){return this._scope.name(In)}scopeName(In){return this._extScope.name(In)}scopeValue(In,Wn){const ar=this._extScope.value(In,Wn);return(this._values[ar.prefix]||(this._values[ar.prefix]=new Set)).add(ar),ar}getScopeValue(In,Wn){return this._extScope.getValue(In,Wn)}scopeRefs(In){return this._extScope.scopeRefs(In,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(In,Wn,ar,fr){const mr=this._scope.toName(Wn);return ar!==void 0&&fr&&(this._constants[mr.str]=ar),this._leafNode(new dt(In,mr,ar)),mr}const(In,Wn,ar){return this._def(rt.varKinds.const,In,Wn,ar)}let(In,Wn,ar){return this._def(rt.varKinds.let,In,Wn,ar)}var(In,Wn,ar){return this._def(rt.varKinds.var,In,Wn,ar)}assign(In,Wn,ar){return this._leafNode(new yt(In,Wn,ar))}add(In,Wn){return this._leafNode(new vt(In,nt.operators.ADD,Wn))}code(In){return typeof In=="function"?In():In!==tt.nil&&this._leafNode(new Ct(In)),this}object(...In){const Wn=["{"];for(const[ar,fr]of In)Wn.length>1&&Wn.push(","),Wn.push(ar),(ar!==fr||this.opts.es5)&&(Wn.push(":"),(0,tt.addCodeArg)(Wn,fr));return Wn.push("}"),new tt._Code(Wn)}if(In,Wn,ar){if(this._blockNode(new wt(In)),Wn&&ar)this.code(Wn).else().code(ar).endIf();else if(Wn)this.code(Wn).endIf();else if(ar)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(In){return this._elseNode(new wt(In))}else(){return this._elseNode(new Et)}endIf(){return this._endBlockNode(wt,Et)}_for(In,Wn){return this._blockNode(In),Wn&&this.code(Wn).endFor(),this}for(In,Wn){return this._for(new Ft(In),Wn)}forRange(In,Wn,ar,fr,mr=this.opts.es5?rt.varKinds.var:rt.varKinds.let){const vr=this._scope.toName(In);return this._for(new Nt(mr,vr,Wn,ar),()=>fr(vr))}forOf(In,Wn,ar,fr=rt.varKinds.const){const mr=this._scope.toName(In);if(this.opts.es5){const vr=Wn instanceof tt.Name?Wn:this.var("_arr",Wn);return this.forRange("_i",0,(0,tt._)`${vr}.length`,Ar=>{this.var(mr,(0,tt._)`${vr}[${Ar}]`),ar(mr)})}return this._for(new Ot("of",fr,mr,Wn),()=>ar(mr))}forIn(In,Wn,ar,fr=this.opts.es5?rt.varKinds.var:rt.varKinds.const){if(this.opts.ownProperties)return this.forOf(In,(0,tt._)`Object.keys(${Wn})`,ar);const mr=this._scope.toName(In);return this._for(new Ot("in",fr,mr,Wn),()=>ar(mr))}endFor(){return this._endBlockNode(Pt)}label(In){return this._leafNode(new _t(In))}break(In){return this._leafNode(new bt(In))}return(In){const Wn=new Xt;if(this._blockNode(Wn),this.code(In),Wn.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Xt)}try(In,Wn,ar){if(!Wn&&!ar)throw new Error('CodeGen: "try" without "catch" and "finally"');const fr=new Zt;if(this._blockNode(fr),this.code(In),Wn){const mr=this.name("e");this._currNode=fr.catch=new rn(mr),Wn(mr)}return ar&&(this._currNode=fr.finally=new Gt,this.code(ar)),this._endBlockNode(rn,Gt)}throw(In){return this._leafNode(new Mt(In))}block(In,Wn){return this._blockStarts.push(this._nodes.length),In&&this.code(In).endBlock(Wn),this}endBlock(In){const Wn=this._blockStarts.pop();if(Wn===void 0)throw new Error("CodeGen: not in self-balancing block");const ar=this._nodes.length-Wn;if(ar<0||In!==void 0&&ar!==In)throw new Error(`CodeGen: wrong number of nodes: ${ar} vs ${In} expected`);return this._nodes.length=Wn,this}func(In,Wn=tt.nil,ar,fr){return this._blockNode(new Bt(In,Wn,ar)),fr&&this.code(fr).endFunc(),this}endFunc(){return this._endBlockNode(Bt)}optimize(In=1){for(;In-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(In){return this._currNode.nodes.push(In),this}_blockNode(In){this._currNode.nodes.push(In),this._nodes.push(In)}_endBlockNode(In,Wn){const ar=this._currNode;if(ar instanceof In||Wn&&ar instanceof Wn)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Wn?`${In.kind}/${Wn.kind}`:In.kind}"`)}_elseNode(In){const Wn=this._currNode;if(!(Wn instanceof wt))throw new Error('CodeGen: "else" without "if"');return this._currNode=Wn.else=In,this}get _root(){return this._nodes[0]}get _currNode(){const In=this._nodes;return In[In.length-1]}set _currNode(In){const Wn=this._nodes;Wn[Wn.length-1]=In}}nt.CodeGen=nn;function cn(qn,In){for(const Wn in In)qn[Wn]=(qn[Wn]||0)+(In[Wn]||0);return qn}function an(qn,In){return In instanceof tt._CodeOrName?cn(qn,In.names):qn}function mn(qn,In,Wn){if(qn instanceof tt.Name)return ar(qn);if(!fr(qn))return qn;return new tt._Code(qn._items.reduce((mr,vr)=>(vr instanceof tt.Name&&(vr=ar(vr)),vr instanceof tt._Code?mr.push(...vr._items):mr.push(vr),mr),[]));function ar(mr){const vr=Wn[mr.str];return vr===void 0||In[mr.str]!==1?mr:(delete In[mr.str],vr)}function fr(mr){return mr instanceof tt._Code&&mr._items.some(vr=>vr instanceof tt.Name&&In[vr.str]===1&&Wn[vr.str]!==void 0)}}function En(qn,In){for(const Wn in In)qn[Wn]=(qn[Wn]||0)-(In[Wn]||0)}function Cn(qn){return typeof qn=="boolean"||typeof qn=="number"||qn===null?!qn:(0,tt._)`!${Un(qn)}`}nt.not=Cn;const Mn=dn(nt.operators.AND);function un(...qn){return qn.reduce(Mn)}nt.and=un;const Tn=dn(nt.operators.OR);function Pn(...qn){return qn.reduce(Tn)}nt.or=Pn;function dn(qn){return(In,Wn)=>In===tt.nil?Wn:Wn===tt.nil?In:(0,tt._)`${Un(In)} ${qn} ${Un(Wn)}`}function Un(qn){return qn instanceof tt.Name?qn:(0,tt._)`(${qn})`}})(codegen);var util={};Object.defineProperty(util,"__esModule",{value:!0});util.checkStrictMode=util.getErrorPath=util.Type=util.useFunc=util.setEvaluated=util.evaluatedPropsToName=util.mergeEvaluated=util.eachItem=util.unescapeJsonPointer=util.escapeJsonPointer=util.escapeFragment=util.unescapeFragment=util.schemaRefOrVal=util.schemaHasRulesButRef=util.schemaHasRules=util.checkUnknownRules=util.alwaysValidSchema=util.toHash=void 0;const codegen_1$v=codegen,code_1$a=code$1;function toHash(nt){const tt={};for(const rt of nt)tt[rt]=!0;return tt}util.toHash=toHash;function alwaysValidSchema(nt,tt){return typeof tt=="boolean"?tt:Object.keys(tt).length===0?!0:(checkUnknownRules(nt,tt),!schemaHasRules(tt,nt.self.RULES.all))}util.alwaysValidSchema=alwaysValidSchema;function checkUnknownRules(nt,tt=nt.schema){const{opts:rt,self:st}=nt;if(!rt.strictSchema||typeof tt=="boolean")return;const at=st.RULES.keywords;for(const lt in tt)at[lt]||checkStrictMode(nt,`unknown keyword: "${lt}"`)}util.checkUnknownRules=checkUnknownRules;function schemaHasRules(nt,tt){if(typeof nt=="boolean")return!nt;for(const rt in nt)if(tt[rt])return!0;return!1}util.schemaHasRules=schemaHasRules;function schemaHasRulesButRef(nt,tt){if(typeof nt=="boolean")return!nt;for(const rt in nt)if(rt!=="$ref"&&tt.all[rt])return!0;return!1}util.schemaHasRulesButRef=schemaHasRulesButRef;function schemaRefOrVal({topSchemaRef:nt,schemaPath:tt},rt,st,at){if(!at){if(typeof rt=="number"||typeof rt=="boolean")return rt;if(typeof rt=="string")return(0,codegen_1$v._)`${rt}`}return(0,codegen_1$v._)`${nt}${tt}${(0,codegen_1$v.getProperty)(st)}`}util.schemaRefOrVal=schemaRefOrVal;function unescapeFragment(nt){return unescapeJsonPointer(decodeURIComponent(nt))}util.unescapeFragment=unescapeFragment;function escapeFragment(nt){return encodeURIComponent(escapeJsonPointer(nt))}util.escapeFragment=escapeFragment;function escapeJsonPointer(nt){return typeof nt=="number"?`${nt}`:nt.replace(/~/g,"~0").replace(/\//g,"~1")}util.escapeJsonPointer=escapeJsonPointer;function unescapeJsonPointer(nt){return nt.replace(/~1/g,"/").replace(/~0/g,"~")}util.unescapeJsonPointer=unescapeJsonPointer;function eachItem(nt,tt){if(Array.isArray(nt))for(const rt of nt)tt(rt);else tt(nt)}util.eachItem=eachItem;function makeMergeEvaluated({mergeNames:nt,mergeToName:tt,mergeValues:rt,resultToName:st}){return(at,lt,dt,yt)=>{const vt=dt===void 0?lt:dt instanceof codegen_1$v.Name?(lt instanceof codegen_1$v.Name?nt(at,lt,dt):tt(at,lt,dt),dt):lt instanceof codegen_1$v.Name?(tt(at,dt,lt),lt):rt(lt,dt);return yt===codegen_1$v.Name&&!(vt instanceof codegen_1$v.Name)?st(at,vt):vt}}util.mergeEvaluated={props:makeMergeEvaluated({mergeNames:(nt,tt,rt)=>nt.if((0,codegen_1$v._)`${rt} !== true && ${tt} !== undefined`,()=>{nt.if((0,codegen_1$v._)`${tt} === true`,()=>nt.assign(rt,!0),()=>nt.assign(rt,(0,codegen_1$v._)`${rt} || {}`).code((0,codegen_1$v._)`Object.assign(${rt}, ${tt})`))}),mergeToName:(nt,tt,rt)=>nt.if((0,codegen_1$v._)`${rt} !== true`,()=>{tt===!0?nt.assign(rt,!0):(nt.assign(rt,(0,codegen_1$v._)`${rt} || {}`),setEvaluated(nt,rt,tt))}),mergeValues:(nt,tt)=>nt===!0?!0:{...nt,...tt},resultToName:evaluatedPropsToName}),items:makeMergeEvaluated({mergeNames:(nt,tt,rt)=>nt.if((0,codegen_1$v._)`${rt} !== true && ${tt} !== undefined`,()=>nt.assign(rt,(0,codegen_1$v._)`${tt} === true ? true : ${rt} > ${tt} ? ${rt} : ${tt}`)),mergeToName:(nt,tt,rt)=>nt.if((0,codegen_1$v._)`${rt} !== true`,()=>nt.assign(rt,tt===!0?!0:(0,codegen_1$v._)`${rt} > ${tt} ? ${rt} : ${tt}`)),mergeValues:(nt,tt)=>nt===!0?!0:Math.max(nt,tt),resultToName:(nt,tt)=>nt.var("items",tt)})};function evaluatedPropsToName(nt,tt){if(tt===!0)return nt.var("props",!0);const rt=nt.var("props",(0,codegen_1$v._)`{}`);return tt!==void 0&&setEvaluated(nt,rt,tt),rt}util.evaluatedPropsToName=evaluatedPropsToName;function setEvaluated(nt,tt,rt){Object.keys(rt).forEach(st=>nt.assign((0,codegen_1$v._)`${tt}${(0,codegen_1$v.getProperty)(st)}`,!0))}util.setEvaluated=setEvaluated;const snippets={};function useFunc(nt,tt){return nt.scopeValue("func",{ref:tt,code:snippets[tt.code]||(snippets[tt.code]=new code_1$a._Code(tt.code))})}util.useFunc=useFunc;var Type;(function(nt){nt[nt.Num=0]="Num",nt[nt.Str=1]="Str"})(Type||(util.Type=Type={}));function getErrorPath(nt,tt,rt){if(nt instanceof codegen_1$v.Name){const st=tt===Type.Num;return rt?st?(0,codegen_1$v._)`"[" + ${nt} + "]"`:(0,codegen_1$v._)`"['" + ${nt} + "']"`:st?(0,codegen_1$v._)`"/" + ${nt}`:(0,codegen_1$v._)`"/" + ${nt}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return rt?(0,codegen_1$v.getProperty)(nt).toString():"/"+escapeJsonPointer(nt)}util.getErrorPath=getErrorPath;function checkStrictMode(nt,tt,rt=nt.opts.strictSchema){if(rt){if(tt=`strict mode: ${tt}`,rt===!0)throw new Error(tt);nt.self.logger.warn(tt)}}util.checkStrictMode=checkStrictMode;var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});const codegen_1$u=codegen,names={data:new codegen_1$u.Name("data"),valCxt:new codegen_1$u.Name("valCxt"),instancePath:new codegen_1$u.Name("instancePath"),parentData:new codegen_1$u.Name("parentData"),parentDataProperty:new codegen_1$u.Name("parentDataProperty"),rootData:new codegen_1$u.Name("rootData"),dynamicAnchors:new codegen_1$u.Name("dynamicAnchors"),vErrors:new codegen_1$u.Name("vErrors"),errors:new codegen_1$u.Name("errors"),this:new codegen_1$u.Name("this"),self:new codegen_1$u.Name("self"),scope:new codegen_1$u.Name("scope"),json:new codegen_1$u.Name("json"),jsonPos:new codegen_1$u.Name("jsonPos"),jsonLen:new codegen_1$u.Name("jsonLen"),jsonPart:new codegen_1$u.Name("jsonPart")};names$1.default=names;(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.extendErrors=nt.resetErrorsCount=nt.reportExtraError=nt.reportError=nt.keyword$DataError=nt.keywordError=void 0;const tt=codegen,rt=util,st=names$1;nt.keywordError={message:({keyword:Et})=>(0,tt.str)`must pass "${Et}" keyword validation`},nt.keyword$DataError={message:({keyword:Et,schemaType:wt})=>wt?(0,tt.str)`"${Et}" keyword must be ${wt} ($data)`:(0,tt.str)`"${Et}" keyword is invalid ($data)`};function at(Et,wt=nt.keywordError,Pt,Ft){const{it:Nt}=Et,{gen:Ot,compositeRule:Bt,allErrors:Xt}=Nt,Zt=Mt(Et,wt,Pt);Ft??(Bt||Xt)?vt(Ot,Zt):_t(Nt,(0,tt._)`[${Zt}]`)}nt.reportError=at;function lt(Et,wt=nt.keywordError,Pt){const{it:Ft}=Et,{gen:Nt,compositeRule:Ot,allErrors:Bt}=Ft,Xt=Mt(Et,wt,Pt);vt(Nt,Xt),Ot||Bt||_t(Ft,st.default.vErrors)}nt.reportExtraError=lt;function dt(Et,wt){Et.assign(st.default.errors,wt),Et.if((0,tt._)`${st.default.vErrors} !== null`,()=>Et.if(wt,()=>Et.assign((0,tt._)`${st.default.vErrors}.length`,wt),()=>Et.assign(st.default.vErrors,null)))}nt.resetErrorsCount=dt;function yt({gen:Et,keyword:wt,schemaValue:Pt,data:Ft,errsCount:Nt,it:Ot}){if(Nt===void 0)throw new Error("ajv implementation error");const Bt=Et.name("err");Et.forRange("i",Nt,st.default.errors,Xt=>{Et.const(Bt,(0,tt._)`${st.default.vErrors}[${Xt}]`),Et.if((0,tt._)`${Bt}.instancePath === undefined`,()=>Et.assign((0,tt._)`${Bt}.instancePath`,(0,tt.strConcat)(st.default.instancePath,Ot.errorPath))),Et.assign((0,tt._)`${Bt}.schemaPath`,(0,tt.str)`${Ot.errSchemaPath}/${wt}`),Ot.opts.verbose&&(Et.assign((0,tt._)`${Bt}.schema`,Pt),Et.assign((0,tt._)`${Bt}.data`,Ft))})}nt.extendErrors=yt;function vt(Et,wt){const Pt=Et.const("err",wt);Et.if((0,tt._)`${st.default.vErrors} === null`,()=>Et.assign(st.default.vErrors,(0,tt._)`[${Pt}]`),(0,tt._)`${st.default.vErrors}.push(${Pt})`),Et.code((0,tt._)`${st.default.errors}++`)}function _t(Et,wt){const{gen:Pt,validateName:Ft,schemaEnv:Nt}=Et;Nt.$async?Pt.throw((0,tt._)`new ${Et.ValidationError}(${wt})`):(Pt.assign((0,tt._)`${Ft}.errors`,wt),Pt.return(!1))}const bt={keyword:new tt.Name("keyword"),schemaPath:new tt.Name("schemaPath"),params:new tt.Name("params"),propertyName:new tt.Name("propertyName"),message:new tt.Name("message"),schema:new tt.Name("schema"),parentSchema:new tt.Name("parentSchema")};function Mt(Et,wt,Pt){const{createErrors:Ft}=Et.it;return Ft===!1?(0,tt._)`{}`:Ct(Et,wt,Pt)}function Ct(Et,wt,Pt={}){const{gen:Ft,it:Nt}=Et,Ot=[Tt(Nt,Pt),$t(Et,Pt)];return Rt(Et,wt,Ot),Ft.object(...Ot)}function Tt({errorPath:Et},{instancePath:wt}){const Pt=wt?(0,tt.str)`${Et}${(0,rt.getErrorPath)(wt,rt.Type.Str)}`:Et;return[st.default.instancePath,(0,tt.strConcat)(st.default.instancePath,Pt)]}function $t({keyword:Et,it:{errSchemaPath:wt}},{schemaPath:Pt,parentSchema:Ft}){let Nt=Ft?wt:(0,tt.str)`${wt}/${Et}`;return Pt&&(Nt=(0,tt.str)`${Nt}${(0,rt.getErrorPath)(Pt,rt.Type.Str)}`),[bt.schemaPath,Nt]}function Rt(Et,{params:wt,message:Pt},Ft){const{keyword:Nt,data:Ot,schemaValue:Bt,it:Xt}=Et,{opts:Zt,propertyName:rn,topSchemaRef:Gt,schemaPath:nn}=Xt;Ft.push([bt.keyword,Nt],[bt.params,typeof wt=="function"?wt(Et):wt||(0,tt._)`{}`]),Zt.messages&&Ft.push([bt.message,typeof Pt=="function"?Pt(Et):Pt]),Zt.verbose&&Ft.push([bt.schema,Bt],[bt.parentSchema,(0,tt._)`${Gt}${nn}`],[st.default.data,Ot]),rn&&Ft.push([bt.propertyName,rn])}})(errors);Object.defineProperty(boolSchema,"__esModule",{value:!0});boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const errors_1$3=errors,codegen_1$t=codegen,names_1$6=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(nt){const{gen:tt,schema:rt,validateName:st}=nt;rt===!1?falseSchemaError(nt,!1):typeof rt=="object"&&rt.$async===!0?tt.return(names_1$6.default.data):(tt.assign((0,codegen_1$t._)`${st}.errors`,null),tt.return(!0))}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(nt,tt){const{gen:rt,schema:st}=nt;st===!1?(rt.var(tt,!1),falseSchemaError(nt)):rt.var(tt,!0)}boolSchema.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(nt,tt){const{gen:rt,data:st}=nt,at={gen:rt,keyword:"false schema",data:st,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:nt};(0,errors_1$3.reportError)(at,boolError,void 0,tt)}var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0});rules.getRules=rules.isJSONType=void 0;const _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new Set(_jsonTypes);function isJSONType(nt){return typeof nt=="string"&&jsonTypes.has(nt)}rules.isJSONType=isJSONType;function getRules(){const nt={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...nt,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},nt.number,nt.string,nt.array,nt.object],post:{rules:[]},all:{},keywords:{}}}rules.getRules=getRules;var applicability={};Object.defineProperty(applicability,"__esModule",{value:!0});applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function schemaHasRulesForType({schema:nt,self:tt},rt){const st=tt.RULES.types[rt];return st&&st!==!0&&shouldUseGroup(nt,st)}applicability.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(nt,tt){return tt.rules.some(rt=>shouldUseRule(nt,rt))}applicability.shouldUseGroup=shouldUseGroup;function shouldUseRule(nt,tt){var rt;return nt[tt.keyword]!==void 0||((rt=tt.definition.implements)===null||rt===void 0?void 0:rt.some(st=>nt[st]!==void 0))}applicability.shouldUseRule=shouldUseRule;Object.defineProperty(dataType,"__esModule",{value:!0});dataType.reportTypeError=dataType.checkDataTypes=dataType.checkDataType=dataType.coerceAndCheckDataType=dataType.getJSONTypes=dataType.getSchemaTypes=dataType.DataType=void 0;const rules_1=rules,applicability_1$1=applicability,errors_1$2=errors,codegen_1$s=codegen,util_1$q=util;var DataType;(function(nt){nt[nt.Correct=0]="Correct",nt[nt.Wrong=1]="Wrong"})(DataType||(dataType.DataType=DataType={}));function getSchemaTypes(nt){const tt=getJSONTypes(nt.type);if(tt.includes("null")){if(nt.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!tt.length&&nt.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');nt.nullable===!0&&tt.push("null")}return tt}dataType.getSchemaTypes=getSchemaTypes;function getJSONTypes(nt){const tt=Array.isArray(nt)?nt:nt?[nt]:[];if(tt.every(rules_1.isJSONType))return tt;throw new Error("type must be JSONType or JSONType[]: "+tt.join(","))}dataType.getJSONTypes=getJSONTypes;function coerceAndCheckDataType(nt,tt){const{gen:rt,data:st,opts:at}=nt,lt=coerceToTypes(tt,at.coerceTypes),dt=tt.length>0&&!(lt.length===0&&tt.length===1&&(0,applicability_1$1.schemaHasRulesForType)(nt,tt[0]));if(dt){const yt=checkDataTypes(tt,st,at.strictNumbers,DataType.Wrong);rt.if(yt,()=>{lt.length?coerceData(nt,tt,lt):reportTypeError(nt)})}return dt}dataType.coerceAndCheckDataType=coerceAndCheckDataType;const COERCIBLE=new Set(["string","number","integer","boolean","null"]);function coerceToTypes(nt,tt){return tt?nt.filter(rt=>COERCIBLE.has(rt)||tt==="array"&&rt==="array"):[]}function coerceData(nt,tt,rt){const{gen:st,data:at,opts:lt}=nt,dt=st.let("dataType",(0,codegen_1$s._)`typeof ${at}`),yt=st.let("coerced",(0,codegen_1$s._)`undefined`);lt.coerceTypes==="array"&&st.if((0,codegen_1$s._)`${dt} == 'object' && Array.isArray(${at}) && ${at}.length == 1`,()=>st.assign(at,(0,codegen_1$s._)`${at}[0]`).assign(dt,(0,codegen_1$s._)`typeof ${at}`).if(checkDataTypes(tt,at,lt.strictNumbers),()=>st.assign(yt,at))),st.if((0,codegen_1$s._)`${yt} !== undefined`);for(const _t of rt)(COERCIBLE.has(_t)||_t==="array"&&lt.coerceTypes==="array")&&vt(_t);st.else(),reportTypeError(nt),st.endIf(),st.if((0,codegen_1$s._)`${yt} !== undefined`,()=>{st.assign(at,yt),assignParentData(nt,yt)});function vt(_t){switch(_t){case"string":st.elseIf((0,codegen_1$s._)`${dt} == "number" || ${dt} == "boolean"`).assign(yt,(0,codegen_1$s._)`"" + ${at}`).elseIf((0,codegen_1$s._)`${at} === null`).assign(yt,(0,codegen_1$s._)`""`);return;case"number":st.elseIf((0,codegen_1$s._)`${dt} == "boolean" || ${at} === null
              || (${dt} == "string" && ${at} && ${at} == +${at})`).assign(yt,(0,codegen_1$s._)`+${at}`);return;case"integer":st.elseIf((0,codegen_1$s._)`${dt} === "boolean" || ${at} === null
              || (${dt} === "string" && ${at} && ${at} == +${at} && !(${at} % 1))`).assign(yt,(0,codegen_1$s._)`+${at}`);return;case"boolean":st.elseIf((0,codegen_1$s._)`${at} === "false" || ${at} === 0 || ${at} === null`).assign(yt,!1).elseIf((0,codegen_1$s._)`${at} === "true" || ${at} === 1`).assign(yt,!0);return;case"null":st.elseIf((0,codegen_1$s._)`${at} === "" || ${at} === 0 || ${at} === false`),st.assign(yt,null);return;case"array":st.elseIf((0,codegen_1$s._)`${dt} === "string" || ${dt} === "number"
              || ${dt} === "boolean" || ${at} === null`).assign(yt,(0,codegen_1$s._)`[${at}]`)}}}function assignParentData({gen:nt,parentData:tt,parentDataProperty:rt},st){nt.if((0,codegen_1$s._)`${tt} !== undefined`,()=>nt.assign((0,codegen_1$s._)`${tt}[${rt}]`,st))}function checkDataType(nt,tt,rt,st=DataType.Correct){const at=st===DataType.Correct?codegen_1$s.operators.EQ:codegen_1$s.operators.NEQ;let lt;switch(nt){case"null":return(0,codegen_1$s._)`${tt} ${at} null`;case"array":lt=(0,codegen_1$s._)`Array.isArray(${tt})`;break;case"object":lt=(0,codegen_1$s._)`${tt} && typeof ${tt} == "object" && !Array.isArray(${tt})`;break;case"integer":lt=dt((0,codegen_1$s._)`!(${tt} % 1) && !isNaN(${tt})`);break;case"number":lt=dt();break;default:return(0,codegen_1$s._)`typeof ${tt} ${at} ${nt}`}return st===DataType.Correct?lt:(0,codegen_1$s.not)(lt);function dt(yt=codegen_1$s.nil){return(0,codegen_1$s.and)((0,codegen_1$s._)`typeof ${tt} == "number"`,yt,rt?(0,codegen_1$s._)`isFinite(${tt})`:codegen_1$s.nil)}}dataType.checkDataType=checkDataType;function checkDataTypes(nt,tt,rt,st){if(nt.length===1)return checkDataType(nt[0],tt,rt,st);let at;const lt=(0,util_1$q.toHash)(nt);if(lt.array&&lt.object){const dt=(0,codegen_1$s._)`typeof ${tt} != "object"`;at=lt.null?dt:(0,codegen_1$s._)`!${tt} || ${dt}`,delete lt.null,delete lt.array,delete lt.object}else at=codegen_1$s.nil;lt.number&&delete lt.integer;for(const dt in lt)at=(0,codegen_1$s.and)(at,checkDataType(dt,tt,rt,st));return at}dataType.checkDataTypes=checkDataTypes;const typeError={message:({schema:nt})=>`must be ${nt}`,params:({schema:nt,schemaValue:tt})=>typeof nt=="string"?(0,codegen_1$s._)`{type: ${nt}}`:(0,codegen_1$s._)`{type: ${tt}}`};function reportTypeError(nt){const tt=getTypeErrorContext(nt);(0,errors_1$2.reportError)(tt,typeError)}dataType.reportTypeError=reportTypeError;function getTypeErrorContext(nt){const{gen:tt,data:rt,schema:st}=nt,at=(0,util_1$q.schemaRefOrVal)(nt,st,"type");return{gen:tt,keyword:"type",data:rt,schema:st.type,schemaCode:at,schemaValue:at,parentSchema:st,params:{},it:nt}}var defaults$1={};Object.defineProperty(defaults$1,"__esModule",{value:!0});defaults$1.assignDefaults=void 0;const codegen_1$r=codegen,util_1$p=util;function assignDefaults(nt,tt){const{properties:rt,items:st}=nt.schema;if(tt==="object"&&rt)for(const at in rt)assignDefault(nt,at,rt[at].default);else tt==="array"&&Array.isArray(st)&&st.forEach((at,lt)=>assignDefault(nt,lt,at.default))}defaults$1.assignDefaults=assignDefaults;function assignDefault(nt,tt,rt){const{gen:st,compositeRule:at,data:lt,opts:dt}=nt;if(rt===void 0)return;const yt=(0,codegen_1$r._)`${lt}${(0,codegen_1$r.getProperty)(tt)}`;if(at){(0,util_1$p.checkStrictMode)(nt,`default is ignored for: ${yt}`);return}let vt=(0,codegen_1$r._)`${yt} === undefined`;dt.useDefaults==="empty"&&(vt=(0,codegen_1$r._)`${vt} || ${yt} === null || ${yt} === ""`),st.if(vt,(0,codegen_1$r._)`${yt} = ${(0,codegen_1$r.stringify)(rt)}`)}var keyword={},code={};Object.defineProperty(code,"__esModule",{value:!0});code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const codegen_1$q=codegen,util_1$o=util,names_1$5=names$1,util_2$1=util;function checkReportMissingProp(nt,tt){const{gen:rt,data:st,it:at}=nt;rt.if(noPropertyInData(rt,st,tt,at.opts.ownProperties),()=>{nt.setParams({missingProperty:(0,codegen_1$q._)`${tt}`},!0),nt.error()})}code.checkReportMissingProp=checkReportMissingProp;function checkMissingProp({gen:nt,data:tt,it:{opts:rt}},st,at){return(0,codegen_1$q.or)(...st.map(lt=>(0,codegen_1$q.and)(noPropertyInData(nt,tt,lt,rt.ownProperties),(0,codegen_1$q._)`${at} = ${lt}`)))}code.checkMissingProp=checkMissingProp;function reportMissingProp(nt,tt){nt.setParams({missingProperty:tt},!0),nt.error()}code.reportMissingProp=reportMissingProp;function hasPropFunc(nt){return nt.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,codegen_1$q._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=hasPropFunc;function isOwnProperty(nt,tt,rt){return(0,codegen_1$q._)`${hasPropFunc(nt)}.call(${tt}, ${rt})`}code.isOwnProperty=isOwnProperty;function propertyInData(nt,tt,rt,st){const at=(0,codegen_1$q._)`${tt}${(0,codegen_1$q.getProperty)(rt)} !== undefined`;return st?(0,codegen_1$q._)`${at} && ${isOwnProperty(nt,tt,rt)}`:at}code.propertyInData=propertyInData;function noPropertyInData(nt,tt,rt,st){const at=(0,codegen_1$q._)`${tt}${(0,codegen_1$q.getProperty)(rt)} === undefined`;return st?(0,codegen_1$q.or)(at,(0,codegen_1$q.not)(isOwnProperty(nt,tt,rt))):at}code.noPropertyInData=noPropertyInData;function allSchemaProperties(nt){return nt?Object.keys(nt).filter(tt=>tt!=="__proto__"):[]}code.allSchemaProperties=allSchemaProperties;function schemaProperties(nt,tt){return allSchemaProperties(tt).filter(rt=>!(0,util_1$o.alwaysValidSchema)(nt,tt[rt]))}code.schemaProperties=schemaProperties;function callValidateCode({schemaCode:nt,data:tt,it:{gen:rt,topSchemaRef:st,schemaPath:at,errorPath:lt},it:dt},yt,vt,_t){const bt=_t?(0,codegen_1$q._)`${nt}, ${tt}, ${st}${at}`:tt,Mt=[[names_1$5.default.instancePath,(0,codegen_1$q.strConcat)(names_1$5.default.instancePath,lt)],[names_1$5.default.parentData,dt.parentData],[names_1$5.default.parentDataProperty,dt.parentDataProperty],[names_1$5.default.rootData,names_1$5.default.rootData]];dt.opts.dynamicRef&&Mt.push([names_1$5.default.dynamicAnchors,names_1$5.default.dynamicAnchors]);const Ct=(0,codegen_1$q._)`${bt}, ${rt.object(...Mt)}`;return vt!==codegen_1$q.nil?(0,codegen_1$q._)`${yt}.call(${vt}, ${Ct})`:(0,codegen_1$q._)`${yt}(${Ct})`}code.callValidateCode=callValidateCode;const newRegExp=(0,codegen_1$q._)`new RegExp`;function usePattern({gen:nt,it:{opts:tt}},rt){const st=tt.unicodeRegExp?"u":"",{regExp:at}=tt.code,lt=at(rt,st);return nt.scopeValue("pattern",{key:lt.toString(),ref:lt,code:(0,codegen_1$q._)`${at.code==="new RegExp"?newRegExp:(0,util_2$1.useFunc)(nt,at)}(${rt}, ${st})`})}code.usePattern=usePattern;function validateArray(nt){const{gen:tt,data:rt,keyword:st,it:at}=nt,lt=tt.name("valid");if(at.allErrors){const yt=tt.let("valid",!0);return dt(()=>tt.assign(yt,!1)),yt}return tt.var(lt,!0),dt(()=>tt.break()),lt;function dt(yt){const vt=tt.const("len",(0,codegen_1$q._)`${rt}.length`);tt.forRange("i",0,vt,_t=>{nt.subschema({keyword:st,dataProp:_t,dataPropType:util_1$o.Type.Num},lt),tt.if((0,codegen_1$q.not)(lt),yt)})}}code.validateArray=validateArray;function validateUnion(nt){const{gen:tt,schema:rt,keyword:st,it:at}=nt;if(!Array.isArray(rt))throw new Error("ajv implementation error");if(rt.some(vt=>(0,util_1$o.alwaysValidSchema)(at,vt))&&!at.opts.unevaluated)return;const dt=tt.let("valid",!1),yt=tt.name("_valid");tt.block(()=>rt.forEach((vt,_t)=>{const bt=nt.subschema({keyword:st,schemaProp:_t,compositeRule:!0},yt);tt.assign(dt,(0,codegen_1$q._)`${dt} || ${yt}`),nt.mergeValidEvaluated(bt,yt)||tt.if((0,codegen_1$q.not)(dt))})),nt.result(dt,()=>nt.reset(),()=>nt.error(!0))}code.validateUnion=validateUnion;Object.defineProperty(keyword,"__esModule",{value:!0});keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const codegen_1$p=codegen,names_1$4=names$1,code_1$9=code,errors_1$1=errors;function macroKeywordCode(nt,tt){const{gen:rt,keyword:st,schema:at,parentSchema:lt,it:dt}=nt,yt=tt.macro.call(dt.self,at,lt,dt),vt=useKeyword(rt,st,yt);dt.opts.validateSchema!==!1&&dt.self.validateSchema(yt,!0);const _t=rt.name("valid");nt.subschema({schema:yt,schemaPath:codegen_1$p.nil,errSchemaPath:`${dt.errSchemaPath}/${st}`,topSchemaRef:vt,compositeRule:!0},_t),nt.pass(_t,()=>nt.error(!0))}keyword.macroKeywordCode=macroKeywordCode;function funcKeywordCode(nt,tt){var rt;const{gen:st,keyword:at,schema:lt,parentSchema:dt,$data:yt,it:vt}=nt;checkAsyncKeyword(vt,tt);const _t=!yt&&tt.compile?tt.compile.call(vt.self,lt,dt,vt):tt.validate,bt=useKeyword(st,at,_t),Mt=st.let("valid");nt.block$data(Mt,Ct),nt.ok((rt=tt.valid)!==null&&rt!==void 0?rt:Mt);function Ct(){if(tt.errors===!1)Rt(),tt.modifying&&modifyData(nt),Et(()=>nt.error());else{const wt=tt.async?Tt():$t();tt.modifying&&modifyData(nt),Et(()=>addErrs(nt,wt))}}function Tt(){const wt=st.let("ruleErrs",null);return st.try(()=>Rt((0,codegen_1$p._)`await `),Pt=>st.assign(Mt,!1).if((0,codegen_1$p._)`${Pt} instanceof ${vt.ValidationError}`,()=>st.assign(wt,(0,codegen_1$p._)`${Pt}.errors`),()=>st.throw(Pt))),wt}function $t(){const wt=(0,codegen_1$p._)`${bt}.errors`;return st.assign(wt,null),Rt(codegen_1$p.nil),wt}function Rt(wt=tt.async?(0,codegen_1$p._)`await `:codegen_1$p.nil){const Pt=vt.opts.passContext?names_1$4.default.this:names_1$4.default.self,Ft=!("compile"in tt&&!yt||tt.schema===!1);st.assign(Mt,(0,codegen_1$p._)`${wt}${(0,code_1$9.callValidateCode)(nt,bt,Pt,Ft)}`,tt.modifying)}function Et(wt){var Pt;st.if((0,codegen_1$p.not)((Pt=tt.valid)!==null&&Pt!==void 0?Pt:Mt),wt)}}keyword.funcKeywordCode=funcKeywordCode;function modifyData(nt){const{gen:tt,data:rt,it:st}=nt;tt.if(st.parentData,()=>tt.assign(rt,(0,codegen_1$p._)`${st.parentData}[${st.parentDataProperty}]`))}function addErrs(nt,tt){const{gen:rt}=nt;rt.if((0,codegen_1$p._)`Array.isArray(${tt})`,()=>{rt.assign(names_1$4.default.vErrors,(0,codegen_1$p._)`${names_1$4.default.vErrors} === null ? ${tt} : ${names_1$4.default.vErrors}.concat(${tt})`).assign(names_1$4.default.errors,(0,codegen_1$p._)`${names_1$4.default.vErrors}.length`),(0,errors_1$1.extendErrors)(nt)},()=>nt.error())}function checkAsyncKeyword({schemaEnv:nt},tt){if(tt.async&&!nt.$async)throw new Error("async keyword in sync schema")}function useKeyword(nt,tt,rt){if(rt===void 0)throw new Error(`keyword "${tt}" failed to compile`);return nt.scopeValue("keyword",typeof rt=="function"?{ref:rt}:{ref:rt,code:(0,codegen_1$p.stringify)(rt)})}function validSchemaType(nt,tt,rt=!1){return!tt.length||tt.some(st=>st==="array"?Array.isArray(nt):st==="object"?nt&&typeof nt=="object"&&!Array.isArray(nt):typeof nt==st||rt&&typeof nt>"u")}keyword.validSchemaType=validSchemaType;function validateKeywordUsage({schema:nt,opts:tt,self:rt,errSchemaPath:st},at,lt){if(Array.isArray(at.keyword)?!at.keyword.includes(lt):at.keyword!==lt)throw new Error("ajv implementation error");const dt=at.dependencies;if(dt!=null&&dt.some(yt=>!Object.prototype.hasOwnProperty.call(nt,yt)))throw new Error(`parent schema must have dependencies of ${lt}: ${dt.join(",")}`);if(at.validateSchema&&!at.validateSchema(nt[lt])){const vt=`keyword "${lt}" value is invalid at path "${st}": `+rt.errorsText(at.validateSchema.errors);if(tt.validateSchema==="log")rt.logger.error(vt);else throw new Error(vt)}}keyword.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0});subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const codegen_1$o=codegen,util_1$n=util;function getSubschema(nt,{keyword:tt,schemaProp:rt,schema:st,schemaPath:at,errSchemaPath:lt,topSchemaRef:dt}){if(tt!==void 0&&st!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(tt!==void 0){const yt=nt.schema[tt];return rt===void 0?{schema:yt,schemaPath:(0,codegen_1$o._)`${nt.schemaPath}${(0,codegen_1$o.getProperty)(tt)}`,errSchemaPath:`${nt.errSchemaPath}/${tt}`}:{schema:yt[rt],schemaPath:(0,codegen_1$o._)`${nt.schemaPath}${(0,codegen_1$o.getProperty)(tt)}${(0,codegen_1$o.getProperty)(rt)}`,errSchemaPath:`${nt.errSchemaPath}/${tt}/${(0,util_1$n.escapeFragment)(rt)}`}}if(st!==void 0){if(at===void 0||lt===void 0||dt===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:st,schemaPath:at,topSchemaRef:dt,errSchemaPath:lt}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=getSubschema;function extendSubschemaData(nt,tt,{dataProp:rt,dataPropType:st,data:at,dataTypes:lt,propertyName:dt}){if(at!==void 0&&rt!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:yt}=tt;if(rt!==void 0){const{errorPath:_t,dataPathArr:bt,opts:Mt}=tt,Ct=yt.let("data",(0,codegen_1$o._)`${tt.data}${(0,codegen_1$o.getProperty)(rt)}`,!0);vt(Ct),nt.errorPath=(0,codegen_1$o.str)`${_t}${(0,util_1$n.getErrorPath)(rt,st,Mt.jsPropertySyntax)}`,nt.parentDataProperty=(0,codegen_1$o._)`${rt}`,nt.dataPathArr=[...bt,nt.parentDataProperty]}if(at!==void 0){const _t=at instanceof codegen_1$o.Name?at:yt.let("data",at,!0);vt(_t),dt!==void 0&&(nt.propertyName=dt)}lt&&(nt.dataTypes=lt);function vt(_t){nt.data=_t,nt.dataLevel=tt.dataLevel+1,nt.dataTypes=[],tt.definedProperties=new Set,nt.parentData=tt.data,nt.dataNames=[...tt.dataNames,_t]}}subschema.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(nt,{jtdDiscriminator:tt,jtdMetadata:rt,compositeRule:st,createErrors:at,allErrors:lt}){st!==void 0&&(nt.compositeRule=st),at!==void 0&&(nt.createErrors=at),lt!==void 0&&(nt.allErrors=lt),nt.jtdDiscriminator=tt,nt.jtdMetadata=rt}subschema.extendSubschemaMode=extendSubschemaMode;var resolve$3={},fastDeepEqual=function nt(tt,rt){if(tt===rt)return!0;if(tt&&rt&&typeof tt=="object"&&typeof rt=="object"){if(tt.constructor!==rt.constructor)return!1;var st,at,lt;if(Array.isArray(tt)){if(st=tt.length,st!=rt.length)return!1;for(at=st;at--!==0;)if(!nt(tt[at],rt[at]))return!1;return!0}if(tt.constructor===RegExp)return tt.source===rt.source&&tt.flags===rt.flags;if(tt.valueOf!==Object.prototype.valueOf)return tt.valueOf()===rt.valueOf();if(tt.toString!==Object.prototype.toString)return tt.toString()===rt.toString();if(lt=Object.keys(tt),st=lt.length,st!==Object.keys(rt).length)return!1;for(at=st;at--!==0;)if(!Object.prototype.hasOwnProperty.call(rt,lt[at]))return!1;for(at=st;at--!==0;){var dt=lt[at];if(!nt(tt[dt],rt[dt]))return!1}return!0}return tt!==tt&&rt!==rt},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(nt,tt,rt){typeof tt=="function"&&(rt=tt,tt={}),rt=tt.cb||rt;var st=typeof rt=="function"?rt:rt.pre||function(){},at=rt.post||function(){};_traverse(tt,st,at,nt,"",nt)};traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _traverse(nt,tt,rt,st,at,lt,dt,yt,vt,_t){if(st&&typeof st=="object"&&!Array.isArray(st)){tt(st,at,lt,dt,yt,vt,_t);for(var bt in st){var Mt=st[bt];if(Array.isArray(Mt)){if(bt in traverse$1.arrayKeywords)for(var Ct=0;Ct<Mt.length;Ct++)_traverse(nt,tt,rt,Mt[Ct],at+"/"+bt+"/"+Ct,lt,at,bt,st,Ct)}else if(bt in traverse$1.propsKeywords){if(Mt&&typeof Mt=="object")for(var Tt in Mt)_traverse(nt,tt,rt,Mt[Tt],at+"/"+bt+"/"+escapeJsonPtr(Tt),lt,at,bt,st,Tt)}else(bt in traverse$1.keywords||nt.allKeys&&!(bt in traverse$1.skipKeywords))&&_traverse(nt,tt,rt,Mt,at+"/"+bt,lt,at,bt,st)}rt(st,at,lt,dt,yt,vt,_t)}}function escapeJsonPtr(nt){return nt.replace(/~/g,"~0").replace(/\//g,"~1")}var jsonSchemaTraverseExports=jsonSchemaTraverse.exports;Object.defineProperty(resolve$3,"__esModule",{value:!0});resolve$3.getSchemaRefs=resolve$3.resolveUrl=resolve$3.normalizeId=resolve$3._getFullPath=resolve$3.getFullPath=resolve$3.inlineRef=void 0;const util_1$m=util,equal$3=fastDeepEqual,traverse=jsonSchemaTraverseExports,SIMPLE_INLINED=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(nt,tt=!0){return typeof nt=="boolean"?!0:tt===!0?!hasRef(nt):tt?countKeys(nt)<=tt:!1}resolve$3.inlineRef=inlineRef;const REF_KEYWORDS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(nt){for(const tt in nt){if(REF_KEYWORDS.has(tt))return!0;const rt=nt[tt];if(Array.isArray(rt)&&rt.some(hasRef)||typeof rt=="object"&&hasRef(rt))return!0}return!1}function countKeys(nt){let tt=0;for(const rt in nt){if(rt==="$ref")return 1/0;if(tt++,!SIMPLE_INLINED.has(rt)&&(typeof nt[rt]=="object"&&(0,util_1$m.eachItem)(nt[rt],st=>tt+=countKeys(st)),tt===1/0))return 1/0}return tt}function getFullPath(nt,tt="",rt){rt!==!1&&(tt=normalizeId(tt));const st=nt.parse(tt);return _getFullPath(nt,st)}resolve$3.getFullPath=getFullPath;function _getFullPath(nt,tt){return nt.serialize(tt).split("#")[0]+"#"}resolve$3._getFullPath=_getFullPath;const TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(nt){return nt?nt.replace(TRAILING_SLASH_HASH,""):""}resolve$3.normalizeId=normalizeId;function resolveUrl(nt,tt,rt){return rt=normalizeId(rt),nt.resolve(tt,rt)}resolve$3.resolveUrl=resolveUrl;const ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(nt,tt){if(typeof nt=="boolean")return{};const{schemaId:rt,uriResolver:st}=this.opts,at=normalizeId(nt[rt]||tt),lt={"":at},dt=getFullPath(st,at,!1),yt={},vt=new Set;return traverse(nt,{allKeys:!0},(Mt,Ct,Tt,$t)=>{if($t===void 0)return;const Rt=dt+Ct;let Et=lt[$t];typeof Mt[rt]=="string"&&(Et=wt.call(this,Mt[rt])),Pt.call(this,Mt.$anchor),Pt.call(this,Mt.$dynamicAnchor),lt[Ct]=Et;function wt(Ft){const Nt=this.opts.uriResolver.resolve;if(Ft=normalizeId(Et?Nt(Et,Ft):Ft),vt.has(Ft))throw bt(Ft);vt.add(Ft);let Ot=this.refs[Ft];return typeof Ot=="string"&&(Ot=this.refs[Ot]),typeof Ot=="object"?_t(Mt,Ot.schema,Ft):Ft!==normalizeId(Rt)&&(Ft[0]==="#"?(_t(Mt,yt[Ft],Ft),yt[Ft]=Mt):this.refs[Ft]=Rt),Ft}function Pt(Ft){if(typeof Ft=="string"){if(!ANCHOR.test(Ft))throw new Error(`invalid anchor "${Ft}"`);wt.call(this,`#${Ft}`)}}}),yt;function _t(Mt,Ct,Tt){if(Ct!==void 0&&!equal$3(Mt,Ct))throw bt(Tt)}function bt(Mt){return new Error(`reference "${Mt}" resolves to more than one schema`)}}resolve$3.getSchemaRefs=getSchemaRefs;Object.defineProperty(validate,"__esModule",{value:!0});validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults$1,keyword_1=keyword,subschema_1=subschema,codegen_1$n=codegen,names_1$3=names$1,resolve_1$2=resolve$3,util_1$l=util,errors_1=errors;function validateFunctionCode(nt){if(isSchemaObj(nt)&&(checkKeywords(nt),schemaCxtHasRules(nt))){topSchemaObjCode(nt);return}validateFunction(nt,()=>(0,boolSchema_1.topBoolOrEmptySchema)(nt))}validate.validateFunctionCode=validateFunctionCode;function validateFunction({gen:nt,validateName:tt,schema:rt,schemaEnv:st,opts:at},lt){at.code.es5?nt.func(tt,(0,codegen_1$n._)`${names_1$3.default.data}, ${names_1$3.default.valCxt}`,st.$async,()=>{nt.code((0,codegen_1$n._)`"use strict"; ${funcSourceUrl(rt,at)}`),destructureValCxtES5(nt,at),nt.code(lt)}):nt.func(tt,(0,codegen_1$n._)`${names_1$3.default.data}, ${destructureValCxt(at)}`,st.$async,()=>nt.code(funcSourceUrl(rt,at)).code(lt))}function destructureValCxt(nt){return(0,codegen_1$n._)`{${names_1$3.default.instancePath}="", ${names_1$3.default.parentData}, ${names_1$3.default.parentDataProperty}, ${names_1$3.default.rootData}=${names_1$3.default.data}${nt.dynamicRef?(0,codegen_1$n._)`, ${names_1$3.default.dynamicAnchors}={}`:codegen_1$n.nil}}={}`}function destructureValCxtES5(nt,tt){nt.if(names_1$3.default.valCxt,()=>{nt.var(names_1$3.default.instancePath,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.instancePath}`),nt.var(names_1$3.default.parentData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentData}`),nt.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentDataProperty}`),nt.var(names_1$3.default.rootData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.rootData}`),tt.dynamicRef&&nt.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.dynamicAnchors}`)},()=>{nt.var(names_1$3.default.instancePath,(0,codegen_1$n._)`""`),nt.var(names_1$3.default.parentData,(0,codegen_1$n._)`undefined`),nt.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`undefined`),nt.var(names_1$3.default.rootData,names_1$3.default.data),tt.dynamicRef&&nt.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`{}`)})}function topSchemaObjCode(nt){const{schema:tt,opts:rt,gen:st}=nt;validateFunction(nt,()=>{rt.$comment&&tt.$comment&&commentKeyword(nt),checkNoDefault(nt),st.let(names_1$3.default.vErrors,null),st.let(names_1$3.default.errors,0),rt.unevaluated&&resetEvaluated(nt),typeAndKeywords(nt),returnResults(nt)})}function resetEvaluated(nt){const{gen:tt,validateName:rt}=nt;nt.evaluated=tt.const("evaluated",(0,codegen_1$n._)`${rt}.evaluated`),tt.if((0,codegen_1$n._)`${nt.evaluated}.dynamicProps`,()=>tt.assign((0,codegen_1$n._)`${nt.evaluated}.props`,(0,codegen_1$n._)`undefined`)),tt.if((0,codegen_1$n._)`${nt.evaluated}.dynamicItems`,()=>tt.assign((0,codegen_1$n._)`${nt.evaluated}.items`,(0,codegen_1$n._)`undefined`))}function funcSourceUrl(nt,tt){const rt=typeof nt=="object"&&nt[tt.schemaId];return rt&&(tt.code.source||tt.code.process)?(0,codegen_1$n._)`/*# sourceURL=${rt} */`:codegen_1$n.nil}function subschemaCode(nt,tt){if(isSchemaObj(nt)&&(checkKeywords(nt),schemaCxtHasRules(nt))){subSchemaObjCode(nt,tt);return}(0,boolSchema_1.boolOrEmptySchema)(nt,tt)}function schemaCxtHasRules({schema:nt,self:tt}){if(typeof nt=="boolean")return!nt;for(const rt in nt)if(tt.RULES.all[rt])return!0;return!1}function isSchemaObj(nt){return typeof nt.schema!="boolean"}function subSchemaObjCode(nt,tt){const{schema:rt,gen:st,opts:at}=nt;at.$comment&&rt.$comment&&commentKeyword(nt),updateContext(nt),checkAsyncSchema(nt);const lt=st.const("_errs",names_1$3.default.errors);typeAndKeywords(nt,lt),st.var(tt,(0,codegen_1$n._)`${lt} === ${names_1$3.default.errors}`)}function checkKeywords(nt){(0,util_1$l.checkUnknownRules)(nt),checkRefsAndKeywords(nt)}function typeAndKeywords(nt,tt){if(nt.opts.jtd)return schemaKeywords(nt,[],!1,tt);const rt=(0,dataType_1$1.getSchemaTypes)(nt.schema),st=(0,dataType_1$1.coerceAndCheckDataType)(nt,rt);schemaKeywords(nt,rt,!st,tt)}function checkRefsAndKeywords(nt){const{schema:tt,errSchemaPath:rt,opts:st,self:at}=nt;tt.$ref&&st.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(tt,at.RULES)&&at.logger.warn(`$ref: keywords ignored in schema at path "${rt}"`)}function checkNoDefault(nt){const{schema:tt,opts:rt}=nt;tt.default!==void 0&&rt.useDefaults&&rt.strictSchema&&(0,util_1$l.checkStrictMode)(nt,"default is ignored in the schema root")}function updateContext(nt){const tt=nt.schema[nt.opts.schemaId];tt&&(nt.baseId=(0,resolve_1$2.resolveUrl)(nt.opts.uriResolver,nt.baseId,tt))}function checkAsyncSchema(nt){if(nt.schema.$async&&!nt.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:nt,schemaEnv:tt,schema:rt,errSchemaPath:st,opts:at}){const lt=rt.$comment;if(at.$comment===!0)nt.code((0,codegen_1$n._)`${names_1$3.default.self}.logger.log(${lt})`);else if(typeof at.$comment=="function"){const dt=(0,codegen_1$n.str)`${st}/$comment`,yt=nt.scopeValue("root",{ref:tt.root});nt.code((0,codegen_1$n._)`${names_1$3.default.self}.opts.$comment(${lt}, ${dt}, ${yt}.schema)`)}}function returnResults(nt){const{gen:tt,schemaEnv:rt,validateName:st,ValidationError:at,opts:lt}=nt;rt.$async?tt.if((0,codegen_1$n._)`${names_1$3.default.errors} === 0`,()=>tt.return(names_1$3.default.data),()=>tt.throw((0,codegen_1$n._)`new ${at}(${names_1$3.default.vErrors})`)):(tt.assign((0,codegen_1$n._)`${st}.errors`,names_1$3.default.vErrors),lt.unevaluated&&assignEvaluated(nt),tt.return((0,codegen_1$n._)`${names_1$3.default.errors} === 0`))}function assignEvaluated({gen:nt,evaluated:tt,props:rt,items:st}){rt instanceof codegen_1$n.Name&&nt.assign((0,codegen_1$n._)`${tt}.props`,rt),st instanceof codegen_1$n.Name&&nt.assign((0,codegen_1$n._)`${tt}.items`,st)}function schemaKeywords(nt,tt,rt,st){const{gen:at,schema:lt,data:dt,allErrors:yt,opts:vt,self:_t}=nt,{RULES:bt}=_t;if(lt.$ref&&(vt.ignoreKeywordsWithRef||!(0,util_1$l.schemaHasRulesButRef)(lt,bt))){at.block(()=>keywordCode(nt,"$ref",bt.all.$ref.definition));return}vt.jtd||checkStrictTypes(nt,tt),at.block(()=>{for(const Ct of bt.rules)Mt(Ct);Mt(bt.post)});function Mt(Ct){(0,applicability_1.shouldUseGroup)(lt,Ct)&&(Ct.type?(at.if((0,dataType_2.checkDataType)(Ct.type,dt,vt.strictNumbers)),iterateKeywords(nt,Ct),tt.length===1&&tt[0]===Ct.type&&rt&&(at.else(),(0,dataType_2.reportTypeError)(nt)),at.endIf()):iterateKeywords(nt,Ct),yt||at.if((0,codegen_1$n._)`${names_1$3.default.errors} === ${st||0}`))}}function iterateKeywords(nt,tt){const{gen:rt,schema:st,opts:{useDefaults:at}}=nt;at&&(0,defaults_1.assignDefaults)(nt,tt.type),rt.block(()=>{for(const lt of tt.rules)(0,applicability_1.shouldUseRule)(st,lt)&&keywordCode(nt,lt.keyword,lt.definition,tt.type)})}function checkStrictTypes(nt,tt){nt.schemaEnv.meta||!nt.opts.strictTypes||(checkContextTypes(nt,tt),nt.opts.allowUnionTypes||checkMultipleTypes(nt,tt),checkKeywordTypes(nt,nt.dataTypes))}function checkContextTypes(nt,tt){if(tt.length){if(!nt.dataTypes.length){nt.dataTypes=tt;return}tt.forEach(rt=>{includesType(nt.dataTypes,rt)||strictTypesError(nt,`type "${rt}" not allowed by context "${nt.dataTypes.join(",")}"`)}),narrowSchemaTypes(nt,tt)}}function checkMultipleTypes(nt,tt){tt.length>1&&!(tt.length===2&&tt.includes("null"))&&strictTypesError(nt,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(nt,tt){const rt=nt.self.RULES.all;for(const st in rt){const at=rt[st];if(typeof at=="object"&&(0,applicability_1.shouldUseRule)(nt.schema,at)){const{type:lt}=at.definition;lt.length&&!lt.some(dt=>hasApplicableType(tt,dt))&&strictTypesError(nt,`missing type "${lt.join(",")}" for keyword "${st}"`)}}}function hasApplicableType(nt,tt){return nt.includes(tt)||tt==="number"&&nt.includes("integer")}function includesType(nt,tt){return nt.includes(tt)||tt==="integer"&&nt.includes("number")}function narrowSchemaTypes(nt,tt){const rt=[];for(const st of nt.dataTypes)includesType(tt,st)?rt.push(st):tt.includes("integer")&&st==="number"&&rt.push("integer");nt.dataTypes=rt}function strictTypesError(nt,tt){const rt=nt.schemaEnv.baseId+nt.errSchemaPath;tt+=` at "${rt}" (strictTypes)`,(0,util_1$l.checkStrictMode)(nt,tt,nt.opts.strictTypes)}class KeywordCxt{constructor(tt,rt,st){if((0,keyword_1.validateKeywordUsage)(tt,rt,st),this.gen=tt.gen,this.allErrors=tt.allErrors,this.keyword=st,this.data=tt.data,this.schema=tt.schema[st],this.$data=rt.$data&&tt.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$l.schemaRefOrVal)(tt,this.schema,st,this.$data),this.schemaType=rt.schemaType,this.parentSchema=tt.schema,this.params={},this.it=tt,this.def=rt,this.$data)this.schemaCode=tt.gen.const("vSchema",getData(this.$data,tt));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,rt.schemaType,rt.allowUndefined))throw new Error(`${st} value must be ${JSON.stringify(rt.schemaType)}`);("code"in rt?rt.trackErrors:rt.errors!==!1)&&(this.errsCount=tt.gen.const("_errs",names_1$3.default.errors))}result(tt,rt,st){this.failResult((0,codegen_1$n.not)(tt),rt,st)}failResult(tt,rt,st){this.gen.if(tt),st?st():this.error(),rt?(this.gen.else(),rt(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(tt,rt){this.failResult((0,codegen_1$n.not)(tt),void 0,rt)}fail(tt){if(tt===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(tt),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(tt){if(!this.$data)return this.fail(tt);const{schemaCode:rt}=this;this.fail((0,codegen_1$n._)`${rt} !== undefined && (${(0,codegen_1$n.or)(this.invalid$data(),tt)})`)}error(tt,rt,st){if(rt){this.setParams(rt),this._error(tt,st),this.setParams({});return}this._error(tt,st)}_error(tt,rt){(tt?errors_1.reportExtraError:errors_1.reportError)(this,this.def.error,rt)}$dataError(){(0,errors_1.reportError)(this,this.def.$dataError||errors_1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,errors_1.resetErrorsCount)(this.gen,this.errsCount)}ok(tt){this.allErrors||this.gen.if(tt)}setParams(tt,rt){rt?Object.assign(this.params,tt):this.params=tt}block$data(tt,rt,st=codegen_1$n.nil){this.gen.block(()=>{this.check$data(tt,st),rt()})}check$data(tt=codegen_1$n.nil,rt=codegen_1$n.nil){if(!this.$data)return;const{gen:st,schemaCode:at,schemaType:lt,def:dt}=this;st.if((0,codegen_1$n.or)((0,codegen_1$n._)`${at} === undefined`,rt)),tt!==codegen_1$n.nil&&st.assign(tt,!0),(lt.length||dt.validateSchema)&&(st.elseIf(this.invalid$data()),this.$dataError(),tt!==codegen_1$n.nil&&st.assign(tt,!1)),st.else()}invalid$data(){const{gen:tt,schemaCode:rt,schemaType:st,def:at,it:lt}=this;return(0,codegen_1$n.or)(dt(),yt());function dt(){if(st.length){if(!(rt instanceof codegen_1$n.Name))throw new Error("ajv implementation error");const vt=Array.isArray(st)?st:[st];return(0,codegen_1$n._)`${(0,dataType_2.checkDataTypes)(vt,rt,lt.opts.strictNumbers,dataType_2.DataType.Wrong)}`}return codegen_1$n.nil}function yt(){if(at.validateSchema){const vt=tt.scopeValue("validate$data",{ref:at.validateSchema});return(0,codegen_1$n._)`!${vt}(${rt})`}return codegen_1$n.nil}}subschema(tt,rt){const st=(0,subschema_1.getSubschema)(this.it,tt);(0,subschema_1.extendSubschemaData)(st,this.it,tt),(0,subschema_1.extendSubschemaMode)(st,tt);const at={...this.it,...st,items:void 0,props:void 0};return subschemaCode(at,rt),at}mergeEvaluated(tt,rt){const{it:st,gen:at}=this;st.opts.unevaluated&&(st.props!==!0&&tt.props!==void 0&&(st.props=util_1$l.mergeEvaluated.props(at,tt.props,st.props,rt)),st.items!==!0&&tt.items!==void 0&&(st.items=util_1$l.mergeEvaluated.items(at,tt.items,st.items,rt)))}mergeValidEvaluated(tt,rt){const{it:st,gen:at}=this;if(st.opts.unevaluated&&(st.props!==!0||st.items!==!0))return at.if(rt,()=>this.mergeEvaluated(tt,codegen_1$n.Name)),!0}}validate.KeywordCxt=KeywordCxt;function keywordCode(nt,tt,rt,st){const at=new KeywordCxt(nt,rt,tt);"code"in rt?rt.code(at,st):at.$data&&rt.validate?(0,keyword_1.funcKeywordCode)(at,rt):"macro"in rt?(0,keyword_1.macroKeywordCode)(at,rt):(rt.compile||rt.validate)&&(0,keyword_1.funcKeywordCode)(at,rt)}const JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(nt,{dataLevel:tt,dataNames:rt,dataPathArr:st}){let at,lt;if(nt==="")return names_1$3.default.rootData;if(nt[0]==="/"){if(!JSON_POINTER.test(nt))throw new Error(`Invalid JSON-pointer: ${nt}`);at=nt,lt=names_1$3.default.rootData}else{const _t=RELATIVE_JSON_POINTER.exec(nt);if(!_t)throw new Error(`Invalid JSON-pointer: ${nt}`);const bt=+_t[1];if(at=_t[2],at==="#"){if(bt>=tt)throw new Error(vt("property/index",bt));return st[tt-bt]}if(bt>tt)throw new Error(vt("data",bt));if(lt=rt[tt-bt],!at)return lt}let dt=lt;const yt=at.split("/");for(const _t of yt)_t&&(lt=(0,codegen_1$n._)`${lt}${(0,codegen_1$n.getProperty)((0,util_1$l.unescapeJsonPointer)(_t))}`,dt=(0,codegen_1$n._)`${dt} && ${lt}`);return dt;function vt(_t,bt){return`Cannot access ${_t} ${bt} levels up, current level is ${tt}`}}validate.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});class ValidationError extends Error{constructor(tt){super("validation failed"),this.errors=tt,this.ajv=this.validation=!0}}validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});const resolve_1$1=resolve$3;class MissingRefError extends Error{constructor(tt,rt,st,at){super(at||`can't resolve reference ${st} from id ${rt}`),this.missingRef=(0,resolve_1$1.resolveUrl)(tt,rt,st),this.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(tt,this.missingRef))}}ref_error.default=MissingRefError;var compile$2={};Object.defineProperty(compile$2,"__esModule",{value:!0});compile$2.resolveSchema=compile$2.getCompilingSchema=compile$2.resolveRef=compile$2.compileSchema=compile$2.SchemaEnv=void 0;const codegen_1$m=codegen,validation_error_1=validation_error,names_1$2=names$1,resolve_1=resolve$3,util_1$k=util,validate_1$1=validate;class SchemaEnv{constructor(tt){var rt;this.refs={},this.dynamicAnchors={};let st;typeof tt.schema=="object"&&(st=tt.schema),this.schema=tt.schema,this.schemaId=tt.schemaId,this.root=tt.root||this,this.baseId=(rt=tt.baseId)!==null&&rt!==void 0?rt:(0,resolve_1.normalizeId)(st==null?void 0:st[tt.schemaId||"$id"]),this.schemaPath=tt.schemaPath,this.localRefs=tt.localRefs,this.meta=tt.meta,this.$async=st==null?void 0:st.$async,this.refs={}}}compile$2.SchemaEnv=SchemaEnv;function compileSchema(nt){const tt=getCompilingSchema.call(this,nt);if(tt)return tt;const rt=(0,resolve_1.getFullPath)(this.opts.uriResolver,nt.root.baseId),{es5:st,lines:at}=this.opts.code,{ownProperties:lt}=this.opts,dt=new codegen_1$m.CodeGen(this.scope,{es5:st,lines:at,ownProperties:lt});let yt;nt.$async&&(yt=dt.scopeValue("Error",{ref:validation_error_1.default,code:(0,codegen_1$m._)`require("ajv/dist/runtime/validation_error").default`}));const vt=dt.scopeName("validate");nt.validateName=vt;const _t={gen:dt,allErrors:this.opts.allErrors,data:names_1$2.default.data,parentData:names_1$2.default.parentData,parentDataProperty:names_1$2.default.parentDataProperty,dataNames:[names_1$2.default.data],dataPathArr:[codegen_1$m.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:dt.scopeValue("schema",this.opts.code.source===!0?{ref:nt.schema,code:(0,codegen_1$m.stringify)(nt.schema)}:{ref:nt.schema}),validateName:vt,ValidationError:yt,schema:nt.schema,schemaEnv:nt,rootId:rt,baseId:nt.baseId||rt,schemaPath:codegen_1$m.nil,errSchemaPath:nt.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,codegen_1$m._)`""`,opts:this.opts,self:this};let bt;try{this._compilations.add(nt),(0,validate_1$1.validateFunctionCode)(_t),dt.optimize(this.opts.code.optimize);const Mt=dt.toString();bt=`${dt.scopeRefs(names_1$2.default.scope)}return ${Mt}`,this.opts.code.process&&(bt=this.opts.code.process(bt,nt));const Tt=new Function(`${names_1$2.default.self}`,`${names_1$2.default.scope}`,bt)(this,this.scope.get());if(this.scope.value(vt,{ref:Tt}),Tt.errors=null,Tt.schema=nt.schema,Tt.schemaEnv=nt,nt.$async&&(Tt.$async=!0),this.opts.code.source===!0&&(Tt.source={validateName:vt,validateCode:Mt,scopeValues:dt._values}),this.opts.unevaluated){const{props:$t,items:Rt}=_t;Tt.evaluated={props:$t instanceof codegen_1$m.Name?void 0:$t,items:Rt instanceof codegen_1$m.Name?void 0:Rt,dynamicProps:$t instanceof codegen_1$m.Name,dynamicItems:Rt instanceof codegen_1$m.Name},Tt.source&&(Tt.source.evaluated=(0,codegen_1$m.stringify)(Tt.evaluated))}return nt.validate=Tt,nt}catch(Mt){throw delete nt.validate,delete nt.validateName,bt&&this.logger.error("Error compiling schema, function code:",bt),Mt}finally{this._compilations.delete(nt)}}compile$2.compileSchema=compileSchema;function resolveRef(nt,tt,rt){var st;rt=(0,resolve_1.resolveUrl)(this.opts.uriResolver,tt,rt);const at=nt.refs[rt];if(at)return at;let lt=resolve$2.call(this,nt,rt);if(lt===void 0){const dt=(st=nt.localRefs)===null||st===void 0?void 0:st[rt],{schemaId:yt}=this.opts;dt&&(lt=new SchemaEnv({schema:dt,schemaId:yt,root:nt,baseId:tt}))}if(lt!==void 0)return nt.refs[rt]=inlineOrCompile.call(this,lt)}compile$2.resolveRef=resolveRef;function inlineOrCompile(nt){return(0,resolve_1.inlineRef)(nt.schema,this.opts.inlineRefs)?nt.schema:nt.validate?nt:compileSchema.call(this,nt)}function getCompilingSchema(nt){for(const tt of this._compilations)if(sameSchemaEnv(tt,nt))return tt}compile$2.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(nt,tt){return nt.schema===tt.schema&&nt.root===tt.root&&nt.baseId===tt.baseId}function resolve$2(nt,tt){let rt;for(;typeof(rt=this.refs[tt])=="string";)tt=rt;return rt||this.schemas[tt]||resolveSchema.call(this,nt,tt)}function resolveSchema(nt,tt){const rt=this.opts.uriResolver.parse(tt),st=(0,resolve_1._getFullPath)(this.opts.uriResolver,rt);let at=(0,resolve_1.getFullPath)(this.opts.uriResolver,nt.baseId,void 0);if(Object.keys(nt.schema).length>0&&st===at)return getJsonPointer.call(this,rt,nt);const lt=(0,resolve_1.normalizeId)(st),dt=this.refs[lt]||this.schemas[lt];if(typeof dt=="string"){const yt=resolveSchema.call(this,nt,dt);return typeof(yt==null?void 0:yt.schema)!="object"?void 0:getJsonPointer.call(this,rt,yt)}if(typeof(dt==null?void 0:dt.schema)=="object"){if(dt.validate||compileSchema.call(this,dt),lt===(0,resolve_1.normalizeId)(tt)){const{schema:yt}=dt,{schemaId:vt}=this.opts,_t=yt[vt];return _t&&(at=(0,resolve_1.resolveUrl)(this.opts.uriResolver,at,_t)),new SchemaEnv({schema:yt,schemaId:vt,root:nt,baseId:at})}return getJsonPointer.call(this,rt,dt)}}compile$2.resolveSchema=resolveSchema;const PREVENT_SCOPE_CHANGE=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(nt,{baseId:tt,schema:rt,root:st}){var at;if(((at=nt.fragment)===null||at===void 0?void 0:at[0])!=="/")return;for(const yt of nt.fragment.slice(1).split("/")){if(typeof rt=="boolean")return;const vt=rt[(0,util_1$k.unescapeFragment)(yt)];if(vt===void 0)return;rt=vt;const _t=typeof rt=="object"&&rt[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(yt)&&_t&&(tt=(0,resolve_1.resolveUrl)(this.opts.uriResolver,tt,_t))}let lt;if(typeof rt!="boolean"&&rt.$ref&&!(0,util_1$k.schemaHasRulesButRef)(rt,this.RULES)){const yt=(0,resolve_1.resolveUrl)(this.opts.uriResolver,tt,rt.$ref);lt=resolveSchema.call(this,st,yt)}const{schemaId:dt}=this.opts;if(lt=lt||new SchemaEnv({schema:rt,schemaId:dt,root:st,baseId:tt}),lt.schema!==lt.root.schema)return lt}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri$1={},fastUri$1={exports:{}};const HEX$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var scopedChars={HEX:HEX$1};const{HEX}=scopedChars,IPV4_REG=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function normalizeIPv4$1(nt){if(findToken(nt,".")<3)return{host:nt,isIPV4:!1};const tt=nt.match(IPV4_REG)||[],[rt]=tt;return rt?{host:stripLeadingZeros(rt,"."),isIPV4:!0}:{host:nt,isIPV4:!1}}function stringArrayToHexStripped(nt,tt=!1){let rt="",st=!0;for(const at of nt){if(HEX[at]===void 0)return;at!=="0"&&st===!0&&(st=!1),st||(rt+=at)}return tt&&rt.length===0&&(rt="0"),rt}function getIPV6(nt){let tt=0;const rt={error:!1,address:"",zone:""},st=[],at=[];let lt=!1,dt=!1,yt=!1;function vt(){if(at.length){if(lt===!1){const _t=stringArrayToHexStripped(at);if(_t!==void 0)st.push(_t);else return rt.error=!0,!1}at.length=0}return!0}for(let _t=0;_t<nt.length;_t++){const bt=nt[_t];if(!(bt==="["||bt==="]"))if(bt===":"){if(dt===!0&&(yt=!0),!vt())break;if(tt++,st.push(":"),tt>7){rt.error=!0;break}_t-1>=0&&nt[_t-1]===":"&&(dt=!0);continue}else if(bt==="%"){if(!vt())break;lt=!0}else{at.push(bt);continue}}return at.length&&(lt?rt.zone=at.join(""):yt?st.push(at.join("")):st.push(stringArrayToHexStripped(at))),rt.address=st.join(""),rt}function normalizeIPv6$1(nt){if(findToken(nt,":")<2)return{host:nt,isIPV6:!1};const tt=getIPV6(nt);if(tt.error)return{host:nt,isIPV6:!1};{let rt=tt.address,st=tt.address;return tt.zone&&(rt+="%"+tt.zone,st+="%25"+tt.zone),{host:rt,escapedHost:st,isIPV6:!0}}}function stripLeadingZeros(nt,tt){let rt="",st=!0;const at=nt.length;for(let lt=0;lt<at;lt++){const dt=nt[lt];dt==="0"&&st?(lt+1<=at&&nt[lt+1]===tt||lt+1===at)&&(rt+=dt,st=!1):(dt===tt?st=!0:st=!1,rt+=dt)}return rt}function findToken(nt,tt){let rt=0;for(let st=0;st<nt.length;st++)nt[st]===tt&&rt++;return rt}const RDS1=/^\.\.?\//u,RDS2=/^\/\.(?:\/|$)/u,RDS3=/^\/\.\.(?:\/|$)/u,RDS5=/^\/?(?:.|\n)*?(?=\/|$)/u;function removeDotSegments$1(nt){const tt=[];for(;nt.length;)if(nt.match(RDS1))nt=nt.replace(RDS1,"");else if(nt.match(RDS2))nt=nt.replace(RDS2,"/");else if(nt.match(RDS3))nt=nt.replace(RDS3,"/"),tt.pop();else if(nt==="."||nt==="..")nt="";else{const rt=nt.match(RDS5);if(rt){const st=rt[0];nt=nt.slice(st.length),tt.push(st)}else throw new Error("Unexpected dot segment condition")}return tt.join("")}function normalizeComponentEncoding$1(nt,tt){const rt=tt!==!0?escape:unescape;return nt.scheme!==void 0&&(nt.scheme=rt(nt.scheme)),nt.userinfo!==void 0&&(nt.userinfo=rt(nt.userinfo)),nt.host!==void 0&&(nt.host=rt(nt.host)),nt.path!==void 0&&(nt.path=rt(nt.path)),nt.query!==void 0&&(nt.query=rt(nt.query)),nt.fragment!==void 0&&(nt.fragment=rt(nt.fragment)),nt}function recomposeAuthority$1(nt){const tt=[];if(nt.userinfo!==void 0&&(tt.push(nt.userinfo),tt.push("@")),nt.host!==void 0){let rt=unescape(nt.host);const st=normalizeIPv4$1(rt);if(st.isIPV4)rt=st.host;else{const at=normalizeIPv6$1(st.host);at.isIPV6===!0?rt=`[${at.escapedHost}]`:rt=nt.host}tt.push(rt)}return(typeof nt.port=="number"||typeof nt.port=="string")&&(tt.push(":"),tt.push(String(nt.port))),tt.length?tt.join(""):void 0}var utils$2={recomposeAuthority:recomposeAuthority$1,normalizeComponentEncoding:normalizeComponentEncoding$1,removeDotSegments:removeDotSegments$1,normalizeIPv4:normalizeIPv4$1,normalizeIPv6:normalizeIPv6$1,stringArrayToHexStripped};const UUID_REG=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,URN_REG=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function isSecure(nt){return typeof nt.secure=="boolean"?nt.secure:String(nt.scheme).toLowerCase()==="wss"}function httpParse(nt){return nt.host||(nt.error=nt.error||"HTTP URIs must have a host."),nt}function httpSerialize(nt){const tt=String(nt.scheme).toLowerCase()==="https";return(nt.port===(tt?443:80)||nt.port==="")&&(nt.port=void 0),nt.path||(nt.path="/"),nt}function wsParse(nt){return nt.secure=isSecure(nt),nt.resourceName=(nt.path||"/")+(nt.query?"?"+nt.query:""),nt.path=void 0,nt.query=void 0,nt}function wsSerialize(nt){if((nt.port===(isSecure(nt)?443:80)||nt.port==="")&&(nt.port=void 0),typeof nt.secure=="boolean"&&(nt.scheme=nt.secure?"wss":"ws",nt.secure=void 0),nt.resourceName){const[tt,rt]=nt.resourceName.split("?");nt.path=tt&&tt!=="/"?tt:void 0,nt.query=rt,nt.resourceName=void 0}return nt.fragment=void 0,nt}function urnParse(nt,tt){if(!nt.path)return nt.error="URN can not be parsed",nt;const rt=nt.path.match(URN_REG);if(rt){const st=tt.scheme||nt.scheme||"urn";nt.nid=rt[1].toLowerCase(),nt.nss=rt[2];const at=`${st}:${tt.nid||nt.nid}`,lt=SCHEMES$1[at];nt.path=void 0,lt&&(nt=lt.parse(nt,tt))}else nt.error=nt.error||"URN can not be parsed.";return nt}function urnSerialize(nt,tt){const rt=tt.scheme||nt.scheme||"urn",st=nt.nid.toLowerCase(),at=`${rt}:${tt.nid||st}`,lt=SCHEMES$1[at];lt&&(nt=lt.serialize(nt,tt));const dt=nt,yt=nt.nss;return dt.path=`${st||tt.nid}:${yt}`,tt.skipEscape=!0,dt}function urnuuidParse(nt,tt){const rt=nt;return rt.uuid=rt.nss,rt.nss=void 0,!tt.tolerant&&(!rt.uuid||!UUID_REG.test(rt.uuid))&&(rt.error=rt.error||"UUID is not valid."),rt}function urnuuidSerialize(nt){const tt=nt;return tt.nss=(nt.uuid||"").toLowerCase(),tt}const http={scheme:"http",domainHost:!0,parse:httpParse,serialize:httpSerialize},https={scheme:"https",domainHost:http.domainHost,parse:httpParse,serialize:httpSerialize},ws$1={scheme:"ws",domainHost:!0,parse:wsParse,serialize:wsSerialize},wss={scheme:"wss",domainHost:ws$1.domainHost,parse:ws$1.parse,serialize:ws$1.serialize},urn={scheme:"urn",parse:urnParse,serialize:urnSerialize,skipNormalize:!0},urnuuid={scheme:"urn:uuid",parse:urnuuidParse,serialize:urnuuidSerialize,skipNormalize:!0},SCHEMES$1={http,https,ws:ws$1,wss,urn,"urn:uuid":urnuuid};var schemes=SCHEMES$1;const{normalizeIPv6,normalizeIPv4,removeDotSegments,recomposeAuthority,normalizeComponentEncoding}=utils$2,SCHEMES=schemes;function normalize$2(nt,tt){return typeof nt=="string"?nt=serialize(parse(nt,tt),tt):typeof nt=="object"&&(nt=parse(serialize(nt,tt),tt)),nt}function resolve$1(nt,tt,rt){const st=Object.assign({scheme:"null"},rt),at=resolveComponents(parse(nt,st),parse(tt,st),st,!0);return serialize(at,{...st,skipEscape:!0})}function resolveComponents(nt,tt,rt,st){const at={};return st||(nt=parse(serialize(nt,rt),rt),tt=parse(serialize(tt,rt),rt)),rt=rt||{},!rt.tolerant&&tt.scheme?(at.scheme=tt.scheme,at.userinfo=tt.userinfo,at.host=tt.host,at.port=tt.port,at.path=removeDotSegments(tt.path||""),at.query=tt.query):(tt.userinfo!==void 0||tt.host!==void 0||tt.port!==void 0?(at.userinfo=tt.userinfo,at.host=tt.host,at.port=tt.port,at.path=removeDotSegments(tt.path||""),at.query=tt.query):(tt.path?(tt.path.charAt(0)==="/"?at.path=removeDotSegments(tt.path):((nt.userinfo!==void 0||nt.host!==void 0||nt.port!==void 0)&&!nt.path?at.path="/"+tt.path:nt.path?at.path=nt.path.slice(0,nt.path.lastIndexOf("/")+1)+tt.path:at.path=tt.path,at.path=removeDotSegments(at.path)),at.query=tt.query):(at.path=nt.path,tt.query!==void 0?at.query=tt.query:at.query=nt.query),at.userinfo=nt.userinfo,at.host=nt.host,at.port=nt.port),at.scheme=nt.scheme),at.fragment=tt.fragment,at}function equal$2(nt,tt,rt){return typeof nt=="string"?(nt=unescape(nt),nt=serialize(normalizeComponentEncoding(parse(nt,rt),!0),{...rt,skipEscape:!0})):typeof nt=="object"&&(nt=serialize(normalizeComponentEncoding(nt,!0),{...rt,skipEscape:!0})),typeof tt=="string"?(tt=unescape(tt),tt=serialize(normalizeComponentEncoding(parse(tt,rt),!0),{...rt,skipEscape:!0})):typeof tt=="object"&&(tt=serialize(normalizeComponentEncoding(tt,!0),{...rt,skipEscape:!0})),nt.toLowerCase()===tt.toLowerCase()}function serialize(nt,tt){const rt={host:nt.host,scheme:nt.scheme,userinfo:nt.userinfo,port:nt.port,path:nt.path,query:nt.query,nid:nt.nid,nss:nt.nss,uuid:nt.uuid,fragment:nt.fragment,reference:nt.reference,resourceName:nt.resourceName,secure:nt.secure,error:""},st=Object.assign({},tt),at=[],lt=SCHEMES[(st.scheme||rt.scheme||"").toLowerCase()];lt&&lt.serialize&&lt.serialize(rt,st),rt.path!==void 0&&(st.skipEscape?rt.path=unescape(rt.path):(rt.path=escape(rt.path),rt.scheme!==void 0&&(rt.path=rt.path.split("%3A").join(":")))),st.reference!=="suffix"&&rt.scheme&&at.push(rt.scheme,":");const dt=recomposeAuthority(rt);if(dt!==void 0&&(st.reference!=="suffix"&&at.push("//"),at.push(dt),rt.path&&rt.path.charAt(0)!=="/"&&at.push("/")),rt.path!==void 0){let yt=rt.path;!st.absolutePath&&(!lt||!lt.absolutePath)&&(yt=removeDotSegments(yt)),dt===void 0&&(yt=yt.replace(/^\/\//u,"/%2F")),at.push(yt)}return rt.query!==void 0&&at.push("?",rt.query),rt.fragment!==void 0&&at.push("#",rt.fragment),at.join("")}const hexLookUp=Array.from({length:127},(nt,tt)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(tt)));function nonSimpleDomain(nt){let tt=0;for(let rt=0,st=nt.length;rt<st;++rt)if(tt=nt.charCodeAt(rt),tt>126||hexLookUp[tt])return!0;return!1}const URI_PARSE=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function parse(nt,tt){const rt=Object.assign({},tt),st={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},at=nt.indexOf("%")!==-1;let lt=!1;rt.reference==="suffix"&&(nt=(rt.scheme?rt.scheme+":":"")+"//"+nt);const dt=nt.match(URI_PARSE);if(dt){if(st.scheme=dt[1],st.userinfo=dt[3],st.host=dt[4],st.port=parseInt(dt[5],10),st.path=dt[6]||"",st.query=dt[7],st.fragment=dt[8],isNaN(st.port)&&(st.port=dt[5]),st.host){const vt=normalizeIPv4(st.host);if(vt.isIPV4===!1){const _t=normalizeIPv6(vt.host);st.host=_t.host.toLowerCase(),lt=_t.isIPV6}else st.host=vt.host,lt=!0}st.scheme===void 0&&st.userinfo===void 0&&st.host===void 0&&st.port===void 0&&!st.path&&st.query===void 0?st.reference="same-document":st.scheme===void 0?st.reference="relative":st.fragment===void 0?st.reference="absolute":st.reference="uri",rt.reference&&rt.reference!=="suffix"&&rt.reference!==st.reference&&(st.error=st.error||"URI is not a "+rt.reference+" reference.");const yt=SCHEMES[(rt.scheme||st.scheme||"").toLowerCase()];if(!rt.unicodeSupport&&(!yt||!yt.unicodeSupport)&&st.host&&(rt.domainHost||yt&&yt.domainHost)&&lt===!1&&nonSimpleDomain(st.host))try{st.host=URL.domainToASCII(st.host.toLowerCase())}catch(vt){st.error=st.error||"Host's domain name can not be converted to ASCII: "+vt}(!yt||yt&&!yt.skipNormalize)&&(at&&st.scheme!==void 0&&(st.scheme=unescape(st.scheme)),at&&st.host!==void 0&&(st.host=unescape(st.host)),st.path&&st.path.length&&(st.path=escape(unescape(st.path))),st.fragment&&st.fragment.length&&(st.fragment=encodeURI(decodeURIComponent(st.fragment)))),yt&&yt.parse&&yt.parse(st,rt)}else st.error=st.error||"URI can not be parsed.";return st}const fastUri={SCHEMES,normalize:normalize$2,resolve:resolve$1,resolveComponents,equal:equal$2,serialize,parse};fastUri$1.exports=fastUri;fastUri$1.exports.default=fastUri;fastUri$1.exports.fastUri=fastUri;var fastUriExports=fastUri$1.exports;Object.defineProperty(uri$1,"__esModule",{value:!0});const uri=fastUriExports;uri.code='require("ajv/dist/runtime/uri").default';uri$1.default=uri;(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.CodeGen=nt.Name=nt.nil=nt.stringify=nt.str=nt._=nt.KeywordCxt=void 0;var tt=validate;Object.defineProperty(nt,"KeywordCxt",{enumerable:!0,get:function(){return tt.KeywordCxt}});var rt=codegen;Object.defineProperty(nt,"_",{enumerable:!0,get:function(){return rt._}}),Object.defineProperty(nt,"str",{enumerable:!0,get:function(){return rt.str}}),Object.defineProperty(nt,"stringify",{enumerable:!0,get:function(){return rt.stringify}}),Object.defineProperty(nt,"nil",{enumerable:!0,get:function(){return rt.nil}}),Object.defineProperty(nt,"Name",{enumerable:!0,get:function(){return rt.Name}}),Object.defineProperty(nt,"CodeGen",{enumerable:!0,get:function(){return rt.CodeGen}});const st=validation_error,at=ref_error,lt=rules,dt=compile$2,yt=codegen,vt=resolve$3,_t=dataType,bt=util,Mt=require$$9,Ct=uri$1,Tt=(Pn,dn)=>new RegExp(Pn,dn);Tt.code="new RegExp";const $t=["removeAdditional","useDefaults","coerceTypes"],Rt=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Et={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},wt={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Pt=200;function Ft(Pn){var dn,Un,qn,In,Wn,ar,fr,mr,vr,Ar,$r,Mr,Jn,hr,wr,Nr,Fr,Yr,cs,cr,Qn,_r,Ir,pr,Tr;const Wr=Pn.strict,Kn=(dn=Pn.code)===null||dn===void 0?void 0:dn.optimize,rr=Kn===!0||Kn===void 0?1:Kn||0,ur=(qn=(Un=Pn.code)===null||Un===void 0?void 0:Un.regExp)!==null&&qn!==void 0?qn:Tt,Sr=(In=Pn.uriResolver)!==null&&In!==void 0?In:Ct.default;return{strictSchema:(ar=(Wn=Pn.strictSchema)!==null&&Wn!==void 0?Wn:Wr)!==null&&ar!==void 0?ar:!0,strictNumbers:(mr=(fr=Pn.strictNumbers)!==null&&fr!==void 0?fr:Wr)!==null&&mr!==void 0?mr:!0,strictTypes:(Ar=(vr=Pn.strictTypes)!==null&&vr!==void 0?vr:Wr)!==null&&Ar!==void 0?Ar:"log",strictTuples:(Mr=($r=Pn.strictTuples)!==null&&$r!==void 0?$r:Wr)!==null&&Mr!==void 0?Mr:"log",strictRequired:(hr=(Jn=Pn.strictRequired)!==null&&Jn!==void 0?Jn:Wr)!==null&&hr!==void 0?hr:!1,code:Pn.code?{...Pn.code,optimize:rr,regExp:ur}:{optimize:rr,regExp:ur},loopRequired:(wr=Pn.loopRequired)!==null&&wr!==void 0?wr:Pt,loopEnum:(Nr=Pn.loopEnum)!==null&&Nr!==void 0?Nr:Pt,meta:(Fr=Pn.meta)!==null&&Fr!==void 0?Fr:!0,messages:(Yr=Pn.messages)!==null&&Yr!==void 0?Yr:!0,inlineRefs:(cs=Pn.inlineRefs)!==null&&cs!==void 0?cs:!0,schemaId:(cr=Pn.schemaId)!==null&&cr!==void 0?cr:"$id",addUsedSchema:(Qn=Pn.addUsedSchema)!==null&&Qn!==void 0?Qn:!0,validateSchema:(_r=Pn.validateSchema)!==null&&_r!==void 0?_r:!0,validateFormats:(Ir=Pn.validateFormats)!==null&&Ir!==void 0?Ir:!0,unicodeRegExp:(pr=Pn.unicodeRegExp)!==null&&pr!==void 0?pr:!0,int32range:(Tr=Pn.int32range)!==null&&Tr!==void 0?Tr:!0,uriResolver:Sr}}class Nt{constructor(dn={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,dn=this.opts={...dn,...Ft(dn)};const{es5:Un,lines:qn}=this.opts.code;this.scope=new yt.ValueScope({scope:{},prefixes:Rt,es5:Un,lines:qn}),this.logger=cn(dn.logger);const In=dn.validateFormats;dn.validateFormats=!1,this.RULES=(0,lt.getRules)(),Ot.call(this,Et,dn,"NOT SUPPORTED"),Ot.call(this,wt,dn,"DEPRECATED","warn"),this._metaOpts=Gt.call(this),dn.formats&&Zt.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),dn.keywords&&rn.call(this,dn.keywords),typeof dn.meta=="object"&&this.addMetaSchema(dn.meta),Xt.call(this),dn.validateFormats=In}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:dn,meta:Un,schemaId:qn}=this.opts;let In=Mt;qn==="id"&&(In={...Mt},In.id=In.$id,delete In.$id),Un&&dn&&this.addMetaSchema(In,In[qn],!1)}defaultMeta(){const{meta:dn,schemaId:Un}=this.opts;return this.opts.defaultMeta=typeof dn=="object"?dn[Un]||dn:void 0}validate(dn,Un){let qn;if(typeof dn=="string"){if(qn=this.getSchema(dn),!qn)throw new Error(`no schema with key or ref "${dn}"`)}else qn=this.compile(dn);const In=qn(Un);return"$async"in qn||(this.errors=qn.errors),In}compile(dn,Un){const qn=this._addSchema(dn,Un);return qn.validate||this._compileSchemaEnv(qn)}compileAsync(dn,Un){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:qn}=this.opts;return In.call(this,dn,Un);async function In(Ar,$r){await Wn.call(this,Ar.$schema);const Mr=this._addSchema(Ar,$r);return Mr.validate||ar.call(this,Mr)}async function Wn(Ar){Ar&&!this.getSchema(Ar)&&await In.call(this,{$ref:Ar},!0)}async function ar(Ar){try{return this._compileSchemaEnv(Ar)}catch($r){if(!($r instanceof at.default))throw $r;return fr.call(this,$r),await mr.call(this,$r.missingSchema),ar.call(this,Ar)}}function fr({missingSchema:Ar,missingRef:$r}){if(this.refs[Ar])throw new Error(`AnySchema ${Ar} is loaded but ${$r} cannot be resolved`)}async function mr(Ar){const $r=await vr.call(this,Ar);this.refs[Ar]||await Wn.call(this,$r.$schema),this.refs[Ar]||this.addSchema($r,Ar,Un)}async function vr(Ar){const $r=this._loading[Ar];if($r)return $r;try{return await(this._loading[Ar]=qn(Ar))}finally{delete this._loading[Ar]}}}addSchema(dn,Un,qn,In=this.opts.validateSchema){if(Array.isArray(dn)){for(const ar of dn)this.addSchema(ar,void 0,qn,In);return this}let Wn;if(typeof dn=="object"){const{schemaId:ar}=this.opts;if(Wn=dn[ar],Wn!==void 0&&typeof Wn!="string")throw new Error(`schema ${ar} must be string`)}return Un=(0,vt.normalizeId)(Un||Wn),this._checkUnique(Un),this.schemas[Un]=this._addSchema(dn,qn,Un,In,!0),this}addMetaSchema(dn,Un,qn=this.opts.validateSchema){return this.addSchema(dn,Un,!0,qn),this}validateSchema(dn,Un){if(typeof dn=="boolean")return!0;let qn;if(qn=dn.$schema,qn!==void 0&&typeof qn!="string")throw new Error("$schema must be a string");if(qn=qn||this.opts.defaultMeta||this.defaultMeta(),!qn)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const In=this.validate(qn,dn);if(!In&&Un){const Wn="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Wn);else throw new Error(Wn)}return In}getSchema(dn){let Un;for(;typeof(Un=Bt.call(this,dn))=="string";)dn=Un;if(Un===void 0){const{schemaId:qn}=this.opts,In=new dt.SchemaEnv({schema:{},schemaId:qn});if(Un=dt.resolveSchema.call(this,In,dn),!Un)return;this.refs[dn]=Un}return Un.validate||this._compileSchemaEnv(Un)}removeSchema(dn){if(dn instanceof RegExp)return this._removeAllSchemas(this.schemas,dn),this._removeAllSchemas(this.refs,dn),this;switch(typeof dn){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Un=Bt.call(this,dn);return typeof Un=="object"&&this._cache.delete(Un.schema),delete this.schemas[dn],delete this.refs[dn],this}case"object":{const Un=dn;this._cache.delete(Un);let qn=dn[this.opts.schemaId];return qn&&(qn=(0,vt.normalizeId)(qn),delete this.schemas[qn],delete this.refs[qn]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(dn){for(const Un of dn)this.addKeyword(Un);return this}addKeyword(dn,Un){let qn;if(typeof dn=="string")qn=dn,typeof Un=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Un.keyword=qn);else if(typeof dn=="object"&&Un===void 0){if(Un=dn,qn=Un.keyword,Array.isArray(qn)&&!qn.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(mn.call(this,qn,Un),!Un)return(0,bt.eachItem)(qn,Wn=>En.call(this,Wn)),this;Mn.call(this,Un);const In={...Un,type:(0,_t.getJSONTypes)(Un.type),schemaType:(0,_t.getJSONTypes)(Un.schemaType)};return(0,bt.eachItem)(qn,In.type.length===0?Wn=>En.call(this,Wn,In):Wn=>In.type.forEach(ar=>En.call(this,Wn,In,ar))),this}getKeyword(dn){const Un=this.RULES.all[dn];return typeof Un=="object"?Un.definition:!!Un}removeKeyword(dn){const{RULES:Un}=this;delete Un.keywords[dn],delete Un.all[dn];for(const qn of Un.rules){const In=qn.rules.findIndex(Wn=>Wn.keyword===dn);In>=0&&qn.rules.splice(In,1)}return this}addFormat(dn,Un){return typeof Un=="string"&&(Un=new RegExp(Un)),this.formats[dn]=Un,this}errorsText(dn=this.errors,{separator:Un=", ",dataVar:qn="data"}={}){return!dn||dn.length===0?"No errors":dn.map(In=>`${qn}${In.instancePath} ${In.message}`).reduce((In,Wn)=>In+Un+Wn)}$dataMetaSchema(dn,Un){const qn=this.RULES.all;dn=JSON.parse(JSON.stringify(dn));for(const In of Un){const Wn=In.split("/").slice(1);let ar=dn;for(const fr of Wn)ar=ar[fr];for(const fr in qn){const mr=qn[fr];if(typeof mr!="object")continue;const{$data:vr}=mr.definition,Ar=ar[fr];vr&&Ar&&(ar[fr]=Tn(Ar))}}return dn}_removeAllSchemas(dn,Un){for(const qn in dn){const In=dn[qn];(!Un||Un.test(qn))&&(typeof In=="string"?delete dn[qn]:In&&!In.meta&&(this._cache.delete(In.schema),delete dn[qn]))}}_addSchema(dn,Un,qn,In=this.opts.validateSchema,Wn=this.opts.addUsedSchema){let ar;const{schemaId:fr}=this.opts;if(typeof dn=="object")ar=dn[fr];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof dn!="boolean")throw new Error("schema must be object or boolean")}let mr=this._cache.get(dn);if(mr!==void 0)return mr;qn=(0,vt.normalizeId)(ar||qn);const vr=vt.getSchemaRefs.call(this,dn,qn);return mr=new dt.SchemaEnv({schema:dn,schemaId:fr,meta:Un,baseId:qn,localRefs:vr}),this._cache.set(mr.schema,mr),Wn&&!qn.startsWith("#")&&(qn&&this._checkUnique(qn),this.refs[qn]=mr),In&&this.validateSchema(dn,!0),mr}_checkUnique(dn){if(this.schemas[dn]||this.refs[dn])throw new Error(`schema with key or id "${dn}" already exists`)}_compileSchemaEnv(dn){if(dn.meta?this._compileMetaSchema(dn):dt.compileSchema.call(this,dn),!dn.validate)throw new Error("ajv implementation error");return dn.validate}_compileMetaSchema(dn){const Un=this.opts;this.opts=this._metaOpts;try{dt.compileSchema.call(this,dn)}finally{this.opts=Un}}}Nt.ValidationError=st.default,Nt.MissingRefError=at.default,nt.default=Nt;function Ot(Pn,dn,Un,qn="error"){for(const In in Pn){const Wn=In;Wn in dn&&this.logger[qn](`${Un}: option ${In}. ${Pn[Wn]}`)}}function Bt(Pn){return Pn=(0,vt.normalizeId)(Pn),this.schemas[Pn]||this.refs[Pn]}function Xt(){const Pn=this.opts.schemas;if(Pn)if(Array.isArray(Pn))this.addSchema(Pn);else for(const dn in Pn)this.addSchema(Pn[dn],dn)}function Zt(){for(const Pn in this.opts.formats){const dn=this.opts.formats[Pn];dn&&this.addFormat(Pn,dn)}}function rn(Pn){if(Array.isArray(Pn)){this.addVocabulary(Pn);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const dn in Pn){const Un=Pn[dn];Un.keyword||(Un.keyword=dn),this.addKeyword(Un)}}function Gt(){const Pn={...this.opts};for(const dn of $t)delete Pn[dn];return Pn}const nn={log(){},warn(){},error(){}};function cn(Pn){if(Pn===!1)return nn;if(Pn===void 0)return console;if(Pn.log&&Pn.warn&&Pn.error)return Pn;throw new Error("logger must implement log, warn and error methods")}const an=/^[a-z_$][a-z0-9_$:-]*$/i;function mn(Pn,dn){const{RULES:Un}=this;if((0,bt.eachItem)(Pn,qn=>{if(Un.keywords[qn])throw new Error(`Keyword ${qn} is already defined`);if(!an.test(qn))throw new Error(`Keyword ${qn} has invalid name`)}),!!dn&&dn.$data&&!("code"in dn||"validate"in dn))throw new Error('$data keyword must have "code" or "validate" function')}function En(Pn,dn,Un){var qn;const In=dn==null?void 0:dn.post;if(Un&&In)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Wn}=this;let ar=In?Wn.post:Wn.rules.find(({type:mr})=>mr===Un);if(ar||(ar={type:Un,rules:[]},Wn.rules.push(ar)),Wn.keywords[Pn]=!0,!dn)return;const fr={keyword:Pn,definition:{...dn,type:(0,_t.getJSONTypes)(dn.type),schemaType:(0,_t.getJSONTypes)(dn.schemaType)}};dn.before?Cn.call(this,ar,fr,dn.before):ar.rules.push(fr),Wn.all[Pn]=fr,(qn=dn.implements)===null||qn===void 0||qn.forEach(mr=>this.addKeyword(mr))}function Cn(Pn,dn,Un){const qn=Pn.rules.findIndex(In=>In.keyword===Un);qn>=0?Pn.rules.splice(qn,0,dn):(Pn.rules.push(dn),this.logger.warn(`rule ${Un} is not defined`))}function Mn(Pn){let{metaSchema:dn}=Pn;dn!==void 0&&(Pn.$data&&this.opts.$data&&(dn=Tn(dn)),Pn.validateSchema=this.compile(dn,!0))}const un={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Tn(Pn){return{anyOf:[Pn,un]}}})(core$2);var draft7={},core$1={},id={};Object.defineProperty(id,"__esModule",{value:!0});const def$s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id.default=def$s;var ref={};Object.defineProperty(ref,"__esModule",{value:!0});ref.callRef=ref.getValidate=void 0;const ref_error_1$1=ref_error,code_1$8=code,codegen_1$l=codegen,names_1$1=names$1,compile_1$1=compile$2,util_1$j=util,def$r={keyword:"$ref",schemaType:"string",code(nt){const{gen:tt,schema:rt,it:st}=nt,{baseId:at,schemaEnv:lt,validateName:dt,opts:yt,self:vt}=st,{root:_t}=lt;if((rt==="#"||rt==="#/")&&at===_t.baseId)return Mt();const bt=compile_1$1.resolveRef.call(vt,_t,at,rt);if(bt===void 0)throw new ref_error_1$1.default(st.opts.uriResolver,at,rt);if(bt instanceof compile_1$1.SchemaEnv)return Ct(bt);return Tt(bt);function Mt(){if(lt===_t)return callRef(nt,dt,lt,lt.$async);const $t=tt.scopeValue("root",{ref:_t});return callRef(nt,(0,codegen_1$l._)`${$t}.validate`,_t,_t.$async)}function Ct($t){const Rt=getValidate(nt,$t);callRef(nt,Rt,$t,$t.$async)}function Tt($t){const Rt=tt.scopeValue("schema",yt.code.source===!0?{ref:$t,code:(0,codegen_1$l.stringify)($t)}:{ref:$t}),Et=tt.name("valid"),wt=nt.subschema({schema:$t,dataTypes:[],schemaPath:codegen_1$l.nil,topSchemaRef:Rt,errSchemaPath:rt},Et);nt.mergeEvaluated(wt),nt.ok(Et)}}};function getValidate(nt,tt){const{gen:rt}=nt;return tt.validate?rt.scopeValue("validate",{ref:tt.validate}):(0,codegen_1$l._)`${rt.scopeValue("wrapper",{ref:tt})}.validate`}ref.getValidate=getValidate;function callRef(nt,tt,rt,st){const{gen:at,it:lt}=nt,{allErrors:dt,schemaEnv:yt,opts:vt}=lt,_t=vt.passContext?names_1$1.default.this:codegen_1$l.nil;st?bt():Mt();function bt(){if(!yt.$async)throw new Error("async schema referenced by sync schema");const $t=at.let("valid");at.try(()=>{at.code((0,codegen_1$l._)`await ${(0,code_1$8.callValidateCode)(nt,tt,_t)}`),Tt(tt),dt||at.assign($t,!0)},Rt=>{at.if((0,codegen_1$l._)`!(${Rt} instanceof ${lt.ValidationError})`,()=>at.throw(Rt)),Ct(Rt),dt||at.assign($t,!1)}),nt.ok($t)}function Mt(){nt.result((0,code_1$8.callValidateCode)(nt,tt,_t),()=>Tt(tt),()=>Ct(tt))}function Ct($t){const Rt=(0,codegen_1$l._)`${$t}.errors`;at.assign(names_1$1.default.vErrors,(0,codegen_1$l._)`${names_1$1.default.vErrors} === null ? ${Rt} : ${names_1$1.default.vErrors}.concat(${Rt})`),at.assign(names_1$1.default.errors,(0,codegen_1$l._)`${names_1$1.default.vErrors}.length`)}function Tt($t){var Rt;if(!lt.opts.unevaluated)return;const Et=(Rt=rt==null?void 0:rt.validate)===null||Rt===void 0?void 0:Rt.evaluated;if(lt.props!==!0)if(Et&&!Et.dynamicProps)Et.props!==void 0&&(lt.props=util_1$j.mergeEvaluated.props(at,Et.props,lt.props));else{const wt=at.var("props",(0,codegen_1$l._)`${$t}.evaluated.props`);lt.props=util_1$j.mergeEvaluated.props(at,wt,lt.props,codegen_1$l.Name)}if(lt.items!==!0)if(Et&&!Et.dynamicItems)Et.items!==void 0&&(lt.items=util_1$j.mergeEvaluated.items(at,Et.items,lt.items));else{const wt=at.var("items",(0,codegen_1$l._)`${$t}.evaluated.items`);lt.items=util_1$j.mergeEvaluated.items(at,wt,lt.items,codegen_1$l.Name)}}}ref.callRef=callRef;ref.default=def$r;Object.defineProperty(core$1,"__esModule",{value:!0});const id_1=id,ref_1=ref,core=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1.default];core$1.default=core;var validation$1={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});const codegen_1$k=codegen,ops=codegen_1$k.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$j={message:({keyword:nt,schemaCode:tt})=>(0,codegen_1$k.str)`must be ${KWDs[nt].okStr} ${tt}`,params:({keyword:nt,schemaCode:tt})=>(0,codegen_1$k._)`{comparison: ${KWDs[nt].okStr}, limit: ${tt}}`},def$q={keyword:Object.keys(KWDs),type:"number",schemaType:"number",$data:!0,error:error$j,code(nt){const{keyword:tt,data:rt,schemaCode:st}=nt;nt.fail$data((0,codegen_1$k._)`${rt} ${KWDs[tt].fail} ${st} || isNaN(${rt})`)}};limitNumber.default=def$q;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});const codegen_1$j=codegen,error$i={message:({schemaCode:nt})=>(0,codegen_1$j.str)`must be multiple of ${nt}`,params:({schemaCode:nt})=>(0,codegen_1$j._)`{multipleOf: ${nt}}`},def$p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$i,code(nt){const{gen:tt,data:rt,schemaCode:st,it:at}=nt,lt=at.opts.multipleOfPrecision,dt=tt.let("res"),yt=lt?(0,codegen_1$j._)`Math.abs(Math.round(${dt}) - ${dt}) > 1e-${lt}`:(0,codegen_1$j._)`${dt} !== parseInt(${dt})`;nt.fail$data((0,codegen_1$j._)`(${st} === 0 || (${dt} = ${rt}/${st}, ${yt}))`)}};multipleOf.default=def$p;var limitLength={},ucs2length$1={};Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function ucs2length(nt){const tt=nt.length;let rt=0,st=0,at;for(;st<tt;)rt++,at=nt.charCodeAt(st++),at>=55296&&at<=56319&&st<tt&&(at=nt.charCodeAt(st),(at&64512)===56320&&st++);return rt}ucs2length$1.default=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(limitLength,"__esModule",{value:!0});const codegen_1$i=codegen,util_1$i=util,ucs2length_1=ucs2length$1,error$h={message({keyword:nt,schemaCode:tt}){const rt=nt==="maxLength"?"more":"fewer";return(0,codegen_1$i.str)`must NOT have ${rt} than ${tt} characters`},params:({schemaCode:nt})=>(0,codegen_1$i._)`{limit: ${nt}}`},def$o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$h,code(nt){const{keyword:tt,data:rt,schemaCode:st,it:at}=nt,lt=tt==="maxLength"?codegen_1$i.operators.GT:codegen_1$i.operators.LT,dt=at.opts.unicode===!1?(0,codegen_1$i._)`${rt}.length`:(0,codegen_1$i._)`${(0,util_1$i.useFunc)(nt.gen,ucs2length_1.default)}(${rt})`;nt.fail$data((0,codegen_1$i._)`${dt} ${lt} ${st}`)}};limitLength.default=def$o;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});const code_1$7=code,codegen_1$h=codegen,error$g={message:({schemaCode:nt})=>(0,codegen_1$h.str)`must match pattern "${nt}"`,params:({schemaCode:nt})=>(0,codegen_1$h._)`{pattern: ${nt}}`},def$n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$g,code(nt){const{data:tt,$data:rt,schema:st,schemaCode:at,it:lt}=nt,dt=lt.opts.unicodeRegExp?"u":"",yt=rt?(0,codegen_1$h._)`(new RegExp(${at}, ${dt}))`:(0,code_1$7.usePattern)(nt,st);nt.fail$data((0,codegen_1$h._)`!${yt}.test(${tt})`)}};pattern.default=def$n;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});const codegen_1$g=codegen,error$f={message({keyword:nt,schemaCode:tt}){const rt=nt==="maxProperties"?"more":"fewer";return(0,codegen_1$g.str)`must NOT have ${rt} than ${tt} properties`},params:({schemaCode:nt})=>(0,codegen_1$g._)`{limit: ${nt}}`},def$m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$f,code(nt){const{keyword:tt,data:rt,schemaCode:st}=nt,at=tt==="maxProperties"?codegen_1$g.operators.GT:codegen_1$g.operators.LT;nt.fail$data((0,codegen_1$g._)`Object.keys(${rt}).length ${at} ${st}`)}};limitProperties.default=def$m;var required={};Object.defineProperty(required,"__esModule",{value:!0});const code_1$6=code,codegen_1$f=codegen,util_1$h=util,error$e={message:({params:{missingProperty:nt}})=>(0,codegen_1$f.str)`must have required property '${nt}'`,params:({params:{missingProperty:nt}})=>(0,codegen_1$f._)`{missingProperty: ${nt}}`},def$l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$e,code(nt){const{gen:tt,schema:rt,schemaCode:st,data:at,$data:lt,it:dt}=nt,{opts:yt}=dt;if(!lt&&rt.length===0)return;const vt=rt.length>=yt.loopRequired;if(dt.allErrors?_t():bt(),yt.strictRequired){const Tt=nt.parentSchema.properties,{definedProperties:$t}=nt.it;for(const Rt of rt)if((Tt==null?void 0:Tt[Rt])===void 0&&!$t.has(Rt)){const Et=dt.schemaEnv.baseId+dt.errSchemaPath,wt=`required property "${Rt}" is not defined at "${Et}" (strictRequired)`;(0,util_1$h.checkStrictMode)(dt,wt,dt.opts.strictRequired)}}function _t(){if(vt||lt)nt.block$data(codegen_1$f.nil,Mt);else for(const Tt of rt)(0,code_1$6.checkReportMissingProp)(nt,Tt)}function bt(){const Tt=tt.let("missing");if(vt||lt){const $t=tt.let("valid",!0);nt.block$data($t,()=>Ct(Tt,$t)),nt.ok($t)}else tt.if((0,code_1$6.checkMissingProp)(nt,rt,Tt)),(0,code_1$6.reportMissingProp)(nt,Tt),tt.else()}function Mt(){tt.forOf("prop",st,Tt=>{nt.setParams({missingProperty:Tt}),tt.if((0,code_1$6.noPropertyInData)(tt,at,Tt,yt.ownProperties),()=>nt.error())})}function Ct(Tt,$t){nt.setParams({missingProperty:Tt}),tt.forOf(Tt,st,()=>{tt.assign($t,(0,code_1$6.propertyInData)(tt,at,Tt,yt.ownProperties)),tt.if((0,codegen_1$f.not)($t),()=>{nt.error(),tt.break()})},codegen_1$f.nil)}}};required.default=def$l;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});const codegen_1$e=codegen,error$d={message({keyword:nt,schemaCode:tt}){const rt=nt==="maxItems"?"more":"fewer";return(0,codegen_1$e.str)`must NOT have ${rt} than ${tt} items`},params:({schemaCode:nt})=>(0,codegen_1$e._)`{limit: ${nt}}`},def$k={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$d,code(nt){const{keyword:tt,data:rt,schemaCode:st}=nt,at=tt==="maxItems"?codegen_1$e.operators.GT:codegen_1$e.operators.LT;nt.fail$data((0,codegen_1$e._)`${rt}.length ${at} ${st}`)}};limitItems.default=def$k;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});const equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default';equal$1.default=equal;Object.defineProperty(uniqueItems,"__esModule",{value:!0});const dataType_1=dataType,codegen_1$d=codegen,util_1$g=util,equal_1$2=equal$1,error$c={message:({params:{i:nt,j:tt}})=>(0,codegen_1$d.str)`must NOT have duplicate items (items ## ${tt} and ${nt} are identical)`,params:({params:{i:nt,j:tt}})=>(0,codegen_1$d._)`{i: ${nt}, j: ${tt}}`},def$j={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$c,code(nt){const{gen:tt,data:rt,$data:st,schema:at,parentSchema:lt,schemaCode:dt,it:yt}=nt;if(!st&&!at)return;const vt=tt.let("valid"),_t=lt.items?(0,dataType_1.getSchemaTypes)(lt.items):[];nt.block$data(vt,bt,(0,codegen_1$d._)`${dt} === false`),nt.ok(vt);function bt(){const $t=tt.let("i",(0,codegen_1$d._)`${rt}.length`),Rt=tt.let("j");nt.setParams({i:$t,j:Rt}),tt.assign(vt,!0),tt.if((0,codegen_1$d._)`${$t} > 1`,()=>(Mt()?Ct:Tt)($t,Rt))}function Mt(){return _t.length>0&&!_t.some($t=>$t==="object"||$t==="array")}function Ct($t,Rt){const Et=tt.name("item"),wt=(0,dataType_1.checkDataTypes)(_t,Et,yt.opts.strictNumbers,dataType_1.DataType.Wrong),Pt=tt.const("indices",(0,codegen_1$d._)`{}`);tt.for((0,codegen_1$d._)`;${$t}--;`,()=>{tt.let(Et,(0,codegen_1$d._)`${rt}[${$t}]`),tt.if(wt,(0,codegen_1$d._)`continue`),_t.length>1&&tt.if((0,codegen_1$d._)`typeof ${Et} == "string"`,(0,codegen_1$d._)`${Et} += "_"`),tt.if((0,codegen_1$d._)`typeof ${Pt}[${Et}] == "number"`,()=>{tt.assign(Rt,(0,codegen_1$d._)`${Pt}[${Et}]`),nt.error(),tt.assign(vt,!1).break()}).code((0,codegen_1$d._)`${Pt}[${Et}] = ${$t}`)})}function Tt($t,Rt){const Et=(0,util_1$g.useFunc)(tt,equal_1$2.default),wt=tt.name("outer");tt.label(wt).for((0,codegen_1$d._)`;${$t}--;`,()=>tt.for((0,codegen_1$d._)`${Rt} = ${$t}; ${Rt}--;`,()=>tt.if((0,codegen_1$d._)`${Et}(${rt}[${$t}], ${rt}[${Rt}])`,()=>{nt.error(),tt.assign(vt,!1).break(wt)})))}}};uniqueItems.default=def$j;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});const codegen_1$c=codegen,util_1$f=util,equal_1$1=equal$1,error$b={message:"must be equal to constant",params:({schemaCode:nt})=>(0,codegen_1$c._)`{allowedValue: ${nt}}`},def$i={keyword:"const",$data:!0,error:error$b,code(nt){const{gen:tt,data:rt,$data:st,schemaCode:at,schema:lt}=nt;st||lt&&typeof lt=="object"?nt.fail$data((0,codegen_1$c._)`!${(0,util_1$f.useFunc)(tt,equal_1$1.default)}(${rt}, ${at})`):nt.fail((0,codegen_1$c._)`${lt} !== ${rt}`)}};_const.default=def$i;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});const codegen_1$b=codegen,util_1$e=util,equal_1=equal$1,error$a={message:"must be equal to one of the allowed values",params:({schemaCode:nt})=>(0,codegen_1$b._)`{allowedValues: ${nt}}`},def$h={keyword:"enum",schemaType:"array",$data:!0,error:error$a,code(nt){const{gen:tt,data:rt,$data:st,schema:at,schemaCode:lt,it:dt}=nt;if(!st&&at.length===0)throw new Error("enum must have non-empty array");const yt=at.length>=dt.opts.loopEnum;let vt;const _t=()=>vt??(vt=(0,util_1$e.useFunc)(tt,equal_1.default));let bt;if(yt||st)bt=tt.let("valid"),nt.block$data(bt,Mt);else{if(!Array.isArray(at))throw new Error("ajv implementation error");const Tt=tt.const("vSchema",lt);bt=(0,codegen_1$b.or)(...at.map(($t,Rt)=>Ct(Tt,Rt)))}nt.pass(bt);function Mt(){tt.assign(bt,!1),tt.forOf("v",lt,Tt=>tt.if((0,codegen_1$b._)`${_t()}(${rt}, ${Tt})`,()=>tt.assign(bt,!0).break()))}function Ct(Tt,$t){const Rt=at[$t];return typeof Rt=="object"&&Rt!==null?(0,codegen_1$b._)`${_t()}(${rt}, ${Tt}[${$t}])`:(0,codegen_1$b._)`${rt} === ${Rt}`}}};_enum.default=def$h;Object.defineProperty(validation$1,"__esModule",{value:!0});const limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$1.default=validation;var applicator={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0});additionalItems.validateAdditionalItems=void 0;const codegen_1$a=codegen,util_1$d=util,error$9={message:({params:{len:nt}})=>(0,codegen_1$a.str)`must NOT have more than ${nt} items`,params:({params:{len:nt}})=>(0,codegen_1$a._)`{limit: ${nt}}`},def$g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$9,code(nt){const{parentSchema:tt,it:rt}=nt,{items:st}=tt;if(!Array.isArray(st)){(0,util_1$d.checkStrictMode)(rt,'"additionalItems" is ignored when "items" is not an array of schemas');return}validateAdditionalItems(nt,st)}};function validateAdditionalItems(nt,tt){const{gen:rt,schema:st,data:at,keyword:lt,it:dt}=nt;dt.items=!0;const yt=rt.const("len",(0,codegen_1$a._)`${at}.length`);if(st===!1)nt.setParams({len:tt.length}),nt.pass((0,codegen_1$a._)`${yt} <= ${tt.length}`);else if(typeof st=="object"&&!(0,util_1$d.alwaysValidSchema)(dt,st)){const _t=rt.var("valid",(0,codegen_1$a._)`${yt} <= ${tt.length}`);rt.if((0,codegen_1$a.not)(_t),()=>vt(_t)),nt.ok(_t)}function vt(_t){rt.forRange("i",tt.length,yt,bt=>{nt.subschema({keyword:lt,dataProp:bt,dataPropType:util_1$d.Type.Num},_t),dt.allErrors||rt.if((0,codegen_1$a.not)(_t),()=>rt.break())})}}additionalItems.validateAdditionalItems=validateAdditionalItems;additionalItems.default=def$g;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0});items.validateTuple=void 0;const codegen_1$9=codegen,util_1$c=util,code_1$5=code,def$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(nt){const{schema:tt,it:rt}=nt;if(Array.isArray(tt))return validateTuple(nt,"additionalItems",tt);rt.items=!0,!(0,util_1$c.alwaysValidSchema)(rt,tt)&&nt.ok((0,code_1$5.validateArray)(nt))}};function validateTuple(nt,tt,rt=nt.schema){const{gen:st,parentSchema:at,data:lt,keyword:dt,it:yt}=nt;bt(at),yt.opts.unevaluated&&rt.length&&yt.items!==!0&&(yt.items=util_1$c.mergeEvaluated.items(st,rt.length,yt.items));const vt=st.name("valid"),_t=st.const("len",(0,codegen_1$9._)`${lt}.length`);rt.forEach((Mt,Ct)=>{(0,util_1$c.alwaysValidSchema)(yt,Mt)||(st.if((0,codegen_1$9._)`${_t} > ${Ct}`,()=>nt.subschema({keyword:dt,schemaProp:Ct,dataProp:Ct},vt)),nt.ok(vt))});function bt(Mt){const{opts:Ct,errSchemaPath:Tt}=yt,$t=rt.length,Rt=$t===Mt.minItems&&($t===Mt.maxItems||Mt[tt]===!1);if(Ct.strictTuples&&!Rt){const Et=`"${dt}" is ${$t}-tuple, but minItems or maxItems/${tt} are not specified or different at path "${Tt}"`;(0,util_1$c.checkStrictMode)(yt,Et,Ct.strictTuples)}}}items.validateTuple=validateTuple;items.default=def$f;Object.defineProperty(prefixItems,"__esModule",{value:!0});const items_1$1=items,def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:nt=>(0,items_1$1.validateTuple)(nt,"items")};prefixItems.default=def$e;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});const codegen_1$8=codegen,util_1$b=util,code_1$4=code,additionalItems_1$1=additionalItems,error$8={message:({params:{len:nt}})=>(0,codegen_1$8.str)`must NOT have more than ${nt} items`,params:({params:{len:nt}})=>(0,codegen_1$8._)`{limit: ${nt}}`},def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$8,code(nt){const{schema:tt,parentSchema:rt,it:st}=nt,{prefixItems:at}=rt;st.items=!0,!(0,util_1$b.alwaysValidSchema)(st,tt)&&(at?(0,additionalItems_1$1.validateAdditionalItems)(nt,at):nt.ok((0,code_1$4.validateArray)(nt)))}};items2020.default=def$d;var contains={};Object.defineProperty(contains,"__esModule",{value:!0});const codegen_1$7=codegen,util_1$a=util,error$7={message:({params:{min:nt,max:tt}})=>tt===void 0?(0,codegen_1$7.str)`must contain at least ${nt} valid item(s)`:(0,codegen_1$7.str)`must contain at least ${nt} and no more than ${tt} valid item(s)`,params:({params:{min:nt,max:tt}})=>tt===void 0?(0,codegen_1$7._)`{minContains: ${nt}}`:(0,codegen_1$7._)`{minContains: ${nt}, maxContains: ${tt}}`},def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$7,code(nt){const{gen:tt,schema:rt,parentSchema:st,data:at,it:lt}=nt;let dt,yt;const{minContains:vt,maxContains:_t}=st;lt.opts.next?(dt=vt===void 0?1:vt,yt=_t):dt=1;const bt=tt.const("len",(0,codegen_1$7._)`${at}.length`);if(nt.setParams({min:dt,max:yt}),yt===void 0&&dt===0){(0,util_1$a.checkStrictMode)(lt,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(yt!==void 0&&dt>yt){(0,util_1$a.checkStrictMode)(lt,'"minContains" > "maxContains" is always invalid'),nt.fail();return}if((0,util_1$a.alwaysValidSchema)(lt,rt)){let Rt=(0,codegen_1$7._)`${bt} >= ${dt}`;yt!==void 0&&(Rt=(0,codegen_1$7._)`${Rt} && ${bt} <= ${yt}`),nt.pass(Rt);return}lt.items=!0;const Mt=tt.name("valid");yt===void 0&&dt===1?Tt(Mt,()=>tt.if(Mt,()=>tt.break())):dt===0?(tt.let(Mt,!0),yt!==void 0&&tt.if((0,codegen_1$7._)`${at}.length > 0`,Ct)):(tt.let(Mt,!1),Ct()),nt.result(Mt,()=>nt.reset());function Ct(){const Rt=tt.name("_valid"),Et=tt.let("count",0);Tt(Rt,()=>tt.if(Rt,()=>$t(Et)))}function Tt(Rt,Et){tt.forRange("i",0,bt,wt=>{nt.subschema({keyword:"contains",dataProp:wt,dataPropType:util_1$a.Type.Num,compositeRule:!0},Rt),Et()})}function $t(Rt){tt.code((0,codegen_1$7._)`${Rt}++`),yt===void 0?tt.if((0,codegen_1$7._)`${Rt} >= ${dt}`,()=>tt.assign(Mt,!0).break()):(tt.if((0,codegen_1$7._)`${Rt} > ${yt}`,()=>tt.assign(Mt,!1).break()),dt===1?tt.assign(Mt,!0):tt.if((0,codegen_1$7._)`${Rt} >= ${dt}`,()=>tt.assign(Mt,!0)))}}};contains.default=def$c;var dependencies={};(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.validateSchemaDeps=nt.validatePropertyDeps=nt.error=void 0;const tt=codegen,rt=util,st=code;nt.error={message:({params:{property:vt,depsCount:_t,deps:bt}})=>{const Mt=_t===1?"property":"properties";return(0,tt.str)`must have ${Mt} ${bt} when property ${vt} is present`},params:({params:{property:vt,depsCount:_t,deps:bt,missingProperty:Mt}})=>(0,tt._)`{property: ${vt},
    missingProperty: ${Mt},
    depsCount: ${_t},
    deps: ${bt}}`};const at={keyword:"dependencies",type:"object",schemaType:"object",error:nt.error,code(vt){const[_t,bt]=lt(vt);dt(vt,_t),yt(vt,bt)}};function lt({schema:vt}){const _t={},bt={};for(const Mt in vt){if(Mt==="__proto__")continue;const Ct=Array.isArray(vt[Mt])?_t:bt;Ct[Mt]=vt[Mt]}return[_t,bt]}function dt(vt,_t=vt.schema){const{gen:bt,data:Mt,it:Ct}=vt;if(Object.keys(_t).length===0)return;const Tt=bt.let("missing");for(const $t in _t){const Rt=_t[$t];if(Rt.length===0)continue;const Et=(0,st.propertyInData)(bt,Mt,$t,Ct.opts.ownProperties);vt.setParams({property:$t,depsCount:Rt.length,deps:Rt.join(", ")}),Ct.allErrors?bt.if(Et,()=>{for(const wt of Rt)(0,st.checkReportMissingProp)(vt,wt)}):(bt.if((0,tt._)`${Et} && (${(0,st.checkMissingProp)(vt,Rt,Tt)})`),(0,st.reportMissingProp)(vt,Tt),bt.else())}}nt.validatePropertyDeps=dt;function yt(vt,_t=vt.schema){const{gen:bt,data:Mt,keyword:Ct,it:Tt}=vt,$t=bt.name("valid");for(const Rt in _t)(0,rt.alwaysValidSchema)(Tt,_t[Rt])||(bt.if((0,st.propertyInData)(bt,Mt,Rt,Tt.opts.ownProperties),()=>{const Et=vt.subschema({keyword:Ct,schemaProp:Rt},$t);vt.mergeValidEvaluated(Et,$t)},()=>bt.var($t,!0)),vt.ok($t))}nt.validateSchemaDeps=yt,nt.default=at})(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});const codegen_1$6=codegen,util_1$9=util,error$6={message:"property name must be valid",params:({params:nt})=>(0,codegen_1$6._)`{propertyName: ${nt.propertyName}}`},def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$6,code(nt){const{gen:tt,schema:rt,data:st,it:at}=nt;if((0,util_1$9.alwaysValidSchema)(at,rt))return;const lt=tt.name("valid");tt.forIn("key",st,dt=>{nt.setParams({propertyName:dt}),nt.subschema({keyword:"propertyNames",data:dt,dataTypes:["string"],propertyName:dt,compositeRule:!0},lt),tt.if((0,codegen_1$6.not)(lt),()=>{nt.error(!0),at.allErrors||tt.break()})}),nt.ok(lt)}};propertyNames.default=def$b;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});const code_1$3=code,codegen_1$5=codegen,names_1=names$1,util_1$8=util,error$5={message:"must NOT have additional properties",params:({params:nt})=>(0,codegen_1$5._)`{additionalProperty: ${nt.additionalProperty}}`},def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$5,code(nt){const{gen:tt,schema:rt,parentSchema:st,data:at,errsCount:lt,it:dt}=nt;if(!lt)throw new Error("ajv implementation error");const{allErrors:yt,opts:vt}=dt;if(dt.props=!0,vt.removeAdditional!=="all"&&(0,util_1$8.alwaysValidSchema)(dt,rt))return;const _t=(0,code_1$3.allSchemaProperties)(st.properties),bt=(0,code_1$3.allSchemaProperties)(st.patternProperties);Mt(),nt.ok((0,codegen_1$5._)`${lt} === ${names_1.default.errors}`);function Mt(){tt.forIn("key",at,Et=>{!_t.length&&!bt.length?$t(Et):tt.if(Ct(Et),()=>$t(Et))})}function Ct(Et){let wt;if(_t.length>8){const Pt=(0,util_1$8.schemaRefOrVal)(dt,st.properties,"properties");wt=(0,code_1$3.isOwnProperty)(tt,Pt,Et)}else _t.length?wt=(0,codegen_1$5.or)(..._t.map(Pt=>(0,codegen_1$5._)`${Et} === ${Pt}`)):wt=codegen_1$5.nil;return bt.length&&(wt=(0,codegen_1$5.or)(wt,...bt.map(Pt=>(0,codegen_1$5._)`${(0,code_1$3.usePattern)(nt,Pt)}.test(${Et})`))),(0,codegen_1$5.not)(wt)}function Tt(Et){tt.code((0,codegen_1$5._)`delete ${at}[${Et}]`)}function $t(Et){if(vt.removeAdditional==="all"||vt.removeAdditional&&rt===!1){Tt(Et);return}if(rt===!1){nt.setParams({additionalProperty:Et}),nt.error(),yt||tt.break();return}if(typeof rt=="object"&&!(0,util_1$8.alwaysValidSchema)(dt,rt)){const wt=tt.name("valid");vt.removeAdditional==="failing"?(Rt(Et,wt,!1),tt.if((0,codegen_1$5.not)(wt),()=>{nt.reset(),Tt(Et)})):(Rt(Et,wt),yt||tt.if((0,codegen_1$5.not)(wt),()=>tt.break()))}}function Rt(Et,wt,Pt){const Ft={keyword:"additionalProperties",dataProp:Et,dataPropType:util_1$8.Type.Str};Pt===!1&&Object.assign(Ft,{compositeRule:!0,createErrors:!1,allErrors:!1}),nt.subschema(Ft,wt)}}};additionalProperties.default=def$a;var properties$1={};Object.defineProperty(properties$1,"__esModule",{value:!0});const validate_1=validate,code_1$2=code,util_1$7=util,additionalProperties_1$1=additionalProperties,def$9={keyword:"properties",type:"object",schemaType:"object",code(nt){const{gen:tt,schema:rt,parentSchema:st,data:at,it:lt}=nt;lt.opts.removeAdditional==="all"&&st.additionalProperties===void 0&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(lt,additionalProperties_1$1.default,"additionalProperties"));const dt=(0,code_1$2.allSchemaProperties)(rt);for(const Mt of dt)lt.definedProperties.add(Mt);lt.opts.unevaluated&&dt.length&&lt.props!==!0&&(lt.props=util_1$7.mergeEvaluated.props(tt,(0,util_1$7.toHash)(dt),lt.props));const yt=dt.filter(Mt=>!(0,util_1$7.alwaysValidSchema)(lt,rt[Mt]));if(yt.length===0)return;const vt=tt.name("valid");for(const Mt of yt)_t(Mt)?bt(Mt):(tt.if((0,code_1$2.propertyInData)(tt,at,Mt,lt.opts.ownProperties)),bt(Mt),lt.allErrors||tt.else().var(vt,!0),tt.endIf()),nt.it.definedProperties.add(Mt),nt.ok(vt);function _t(Mt){return lt.opts.useDefaults&&!lt.compositeRule&&rt[Mt].default!==void 0}function bt(Mt){nt.subschema({keyword:"properties",schemaProp:Mt,dataProp:Mt},vt)}}};properties$1.default=def$9;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});const code_1$1=code,codegen_1$4=codegen,util_1$6=util,util_2=util,def$8={keyword:"patternProperties",type:"object",schemaType:"object",code(nt){const{gen:tt,schema:rt,data:st,parentSchema:at,it:lt}=nt,{opts:dt}=lt,yt=(0,code_1$1.allSchemaProperties)(rt),vt=yt.filter(Rt=>(0,util_1$6.alwaysValidSchema)(lt,rt[Rt]));if(yt.length===0||vt.length===yt.length&&(!lt.opts.unevaluated||lt.props===!0))return;const _t=dt.strictSchema&&!dt.allowMatchingProperties&&at.properties,bt=tt.name("valid");lt.props!==!0&&!(lt.props instanceof codegen_1$4.Name)&&(lt.props=(0,util_2.evaluatedPropsToName)(tt,lt.props));const{props:Mt}=lt;Ct();function Ct(){for(const Rt of yt)_t&&Tt(Rt),lt.allErrors?$t(Rt):(tt.var(bt,!0),$t(Rt),tt.if(bt))}function Tt(Rt){for(const Et in _t)new RegExp(Rt).test(Et)&&(0,util_1$6.checkStrictMode)(lt,`property ${Et} matches pattern ${Rt} (use allowMatchingProperties)`)}function $t(Rt){tt.forIn("key",st,Et=>{tt.if((0,codegen_1$4._)`${(0,code_1$1.usePattern)(nt,Rt)}.test(${Et})`,()=>{const wt=vt.includes(Rt);wt||nt.subschema({keyword:"patternProperties",schemaProp:Rt,dataProp:Et,dataPropType:util_2.Type.Str},bt),lt.opts.unevaluated&&Mt!==!0?tt.assign((0,codegen_1$4._)`${Mt}[${Et}]`,!0):!wt&&!lt.allErrors&&tt.if((0,codegen_1$4.not)(bt),()=>tt.break())})})}}};patternProperties.default=def$8;var not={};Object.defineProperty(not,"__esModule",{value:!0});const util_1$5=util,def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(nt){const{gen:tt,schema:rt,it:st}=nt;if((0,util_1$5.alwaysValidSchema)(st,rt)){nt.fail();return}const at=tt.name("valid");nt.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},at),nt.failResult(at,()=>nt.reset(),()=>nt.error())},error:{message:"must NOT be valid"}};not.default=def$7;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});const code_1=code,def$6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$6;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});const codegen_1$3=codegen,util_1$4=util,error$4={message:"must match exactly one schema in oneOf",params:({params:nt})=>(0,codegen_1$3._)`{passingSchemas: ${nt.passing}}`},def$5={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$4,code(nt){const{gen:tt,schema:rt,parentSchema:st,it:at}=nt;if(!Array.isArray(rt))throw new Error("ajv implementation error");if(at.opts.discriminator&&st.discriminator)return;const lt=rt,dt=tt.let("valid",!1),yt=tt.let("passing",null),vt=tt.name("_valid");nt.setParams({passing:yt}),tt.block(_t),nt.result(dt,()=>nt.reset(),()=>nt.error(!0));function _t(){lt.forEach((bt,Mt)=>{let Ct;(0,util_1$4.alwaysValidSchema)(at,bt)?tt.var(vt,!0):Ct=nt.subschema({keyword:"oneOf",schemaProp:Mt,compositeRule:!0},vt),Mt>0&&tt.if((0,codegen_1$3._)`${vt} && ${dt}`).assign(dt,!1).assign(yt,(0,codegen_1$3._)`[${yt}, ${Mt}]`).else(),tt.if(vt,()=>{tt.assign(dt,!0),tt.assign(yt,Mt),Ct&&nt.mergeEvaluated(Ct,codegen_1$3.Name)})})}}};oneOf.default=def$5;var allOf={};Object.defineProperty(allOf,"__esModule",{value:!0});const util_1$3=util,def$4={keyword:"allOf",schemaType:"array",code(nt){const{gen:tt,schema:rt,it:st}=nt;if(!Array.isArray(rt))throw new Error("ajv implementation error");const at=tt.name("valid");rt.forEach((lt,dt)=>{if((0,util_1$3.alwaysValidSchema)(st,lt))return;const yt=nt.subschema({keyword:"allOf",schemaProp:dt},at);nt.ok(at),nt.mergeEvaluated(yt)})}};allOf.default=def$4;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});const codegen_1$2=codegen,util_1$2=util,error$3={message:({params:nt})=>(0,codegen_1$2.str)`must match "${nt.ifClause}" schema`,params:({params:nt})=>(0,codegen_1$2._)`{failingKeyword: ${nt.ifClause}}`},def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$3,code(nt){const{gen:tt,parentSchema:rt,it:st}=nt;rt.then===void 0&&rt.else===void 0&&(0,util_1$2.checkStrictMode)(st,'"if" without "then" and "else" is ignored');const at=hasSchema(st,"then"),lt=hasSchema(st,"else");if(!at&&!lt)return;const dt=tt.let("valid",!0),yt=tt.name("_valid");if(vt(),nt.reset(),at&&lt){const bt=tt.let("ifClause");nt.setParams({ifClause:bt}),tt.if(yt,_t("then",bt),_t("else",bt))}else at?tt.if(yt,_t("then")):tt.if((0,codegen_1$2.not)(yt),_t("else"));nt.pass(dt,()=>nt.error(!0));function vt(){const bt=nt.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},yt);nt.mergeEvaluated(bt)}function _t(bt,Mt){return()=>{const Ct=nt.subschema({keyword:bt},yt);tt.assign(dt,yt),nt.mergeValidEvaluated(Ct,dt),Mt?tt.assign(Mt,(0,codegen_1$2._)`${bt}`):nt.setParams({ifClause:bt})}}}};function hasSchema(nt,tt){const rt=nt.schema[tt];return rt!==void 0&&!(0,util_1$2.alwaysValidSchema)(nt,rt)}_if.default=def$3;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});const util_1$1=util,def$2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:nt,parentSchema:tt,it:rt}){tt.if===void 0&&(0,util_1$1.checkStrictMode)(rt,`"${nt}" without "if" is ignored`)}};thenElse.default=def$2;Object.defineProperty(applicator,"__esModule",{value:!0});const additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains,dependencies_1=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$1,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf,if_1=_if,thenElse_1=thenElse;function getApplicator(nt=!1){const tt=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1.default,properties_1.default,patternProperties_1.default];return nt?tt.push(prefixItems_1.default,items2020_1.default):tt.push(additionalItems_1.default,items_1.default),tt.push(contains_1.default),tt}applicator.default=getApplicator;var format$3={},format$2={};Object.defineProperty(format$2,"__esModule",{value:!0});const codegen_1$1=codegen,error$2={message:({schemaCode:nt})=>(0,codegen_1$1.str)`must match format "${nt}"`,params:({schemaCode:nt})=>(0,codegen_1$1._)`{format: ${nt}}`},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$2,code(nt,tt){const{gen:rt,data:st,$data:at,schema:lt,schemaCode:dt,it:yt}=nt,{opts:vt,errSchemaPath:_t,schemaEnv:bt,self:Mt}=yt;if(!vt.validateFormats)return;at?Ct():Tt();function Ct(){const $t=rt.scopeValue("formats",{ref:Mt.formats,code:vt.code.formats}),Rt=rt.const("fDef",(0,codegen_1$1._)`${$t}[${dt}]`),Et=rt.let("fType"),wt=rt.let("format");rt.if((0,codegen_1$1._)`typeof ${Rt} == "object" && !(${Rt} instanceof RegExp)`,()=>rt.assign(Et,(0,codegen_1$1._)`${Rt}.type || "string"`).assign(wt,(0,codegen_1$1._)`${Rt}.validate`),()=>rt.assign(Et,(0,codegen_1$1._)`"string"`).assign(wt,Rt)),nt.fail$data((0,codegen_1$1.or)(Pt(),Ft()));function Pt(){return vt.strictSchema===!1?codegen_1$1.nil:(0,codegen_1$1._)`${dt} && !${wt}`}function Ft(){const Nt=bt.$async?(0,codegen_1$1._)`(${Rt}.async ? await ${wt}(${st}) : ${wt}(${st}))`:(0,codegen_1$1._)`${wt}(${st})`,Ot=(0,codegen_1$1._)`(typeof ${wt} == "function" ? ${Nt} : ${wt}.test(${st}))`;return(0,codegen_1$1._)`${wt} && ${wt} !== true && ${Et} === ${tt} && !${Ot}`}}function Tt(){const $t=Mt.formats[lt];if(!$t){Pt();return}if($t===!0)return;const[Rt,Et,wt]=Ft($t);Rt===tt&&nt.pass(Nt());function Pt(){if(vt.strictSchema===!1){Mt.logger.warn(Ot());return}throw new Error(Ot());function Ot(){return`unknown format "${lt}" ignored in schema at path "${_t}"`}}function Ft(Ot){const Bt=Ot instanceof RegExp?(0,codegen_1$1.regexpCode)(Ot):vt.code.formats?(0,codegen_1$1._)`${vt.code.formats}${(0,codegen_1$1.getProperty)(lt)}`:void 0,Xt=rt.scopeValue("formats",{key:lt,ref:Ot,code:Bt});return typeof Ot=="object"&&!(Ot instanceof RegExp)?[Ot.type||"string",Ot.validate,(0,codegen_1$1._)`${Xt}.validate`]:["string",Ot,Xt]}function Nt(){if(typeof $t=="object"&&!($t instanceof RegExp)&&$t.async){if(!bt.$async)throw new Error("async format in sync schema");return(0,codegen_1$1._)`await ${wt}(${st})`}return typeof Et=="function"?(0,codegen_1$1._)`${wt}(${st})`:(0,codegen_1$1._)`${wt}.test(${st})`}}}};format$2.default=def$1;Object.defineProperty(format$3,"__esModule",{value:!0});const format_1$1=format$2,format$1=[format_1$1.default];format$3.default=format$1;var metadata={};Object.defineProperty(metadata,"__esModule",{value:!0});metadata.contentVocabulary=metadata.metadataVocabulary=void 0;metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(draft7,"__esModule",{value:!0});const core_1=core$1,validation_1=validation$1,applicator_1=applicator,format_1=format$3,metadata_1=metadata,draft7Vocabularies=[core_1.default,validation_1.default,(0,applicator_1.default)(),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary];draft7.default=draft7Vocabularies;var discriminator={},types$1={};Object.defineProperty(types$1,"__esModule",{value:!0});types$1.DiscrError=void 0;var DiscrError;(function(nt){nt.Tag="tag",nt.Mapping="mapping"})(DiscrError||(types$1.DiscrError=DiscrError={}));Object.defineProperty(discriminator,"__esModule",{value:!0});const codegen_1=codegen,types_1=types$1,compile_1=compile$2,ref_error_1=ref_error,util_1=util,error$1={message:({params:{discrError:nt,tagName:tt}})=>nt===types_1.DiscrError.Tag?`tag "${tt}" must be string`:`value of tag "${tt}" must be in oneOf`,params:({params:{discrError:nt,tag:tt,tagName:rt}})=>(0,codegen_1._)`{error: ${nt}, tag: ${rt}, tagValue: ${tt}}`},def={keyword:"discriminator",type:"object",schemaType:"object",error:error$1,code(nt){const{gen:tt,data:rt,schema:st,parentSchema:at,it:lt}=nt,{oneOf:dt}=at;if(!lt.opts.discriminator)throw new Error("discriminator: requires discriminator option");const yt=st.propertyName;if(typeof yt!="string")throw new Error("discriminator: requires propertyName");if(st.mapping)throw new Error("discriminator: mapping is not supported");if(!dt)throw new Error("discriminator: requires oneOf keyword");const vt=tt.let("valid",!1),_t=tt.const("tag",(0,codegen_1._)`${rt}${(0,codegen_1.getProperty)(yt)}`);tt.if((0,codegen_1._)`typeof ${_t} == "string"`,()=>bt(),()=>nt.error(!1,{discrError:types_1.DiscrError.Tag,tag:_t,tagName:yt})),nt.ok(vt);function bt(){const Tt=Ct();tt.if(!1);for(const $t in Tt)tt.elseIf((0,codegen_1._)`${_t} === ${$t}`),tt.assign(vt,Mt(Tt[$t]));tt.else(),nt.error(!1,{discrError:types_1.DiscrError.Mapping,tag:_t,tagName:yt}),tt.endIf()}function Mt(Tt){const $t=tt.name("valid"),Rt=nt.subschema({keyword:"oneOf",schemaProp:Tt},$t);return nt.mergeEvaluated(Rt,codegen_1.Name),$t}function Ct(){var Tt;const $t={},Rt=wt(at);let Et=!0;for(let Nt=0;Nt<dt.length;Nt++){let Ot=dt[Nt];if(Ot!=null&&Ot.$ref&&!(0,util_1.schemaHasRulesButRef)(Ot,lt.self.RULES)){const Xt=Ot.$ref;if(Ot=compile_1.resolveRef.call(lt.self,lt.schemaEnv.root,lt.baseId,Xt),Ot instanceof compile_1.SchemaEnv&&(Ot=Ot.schema),Ot===void 0)throw new ref_error_1.default(lt.opts.uriResolver,lt.baseId,Xt)}const Bt=(Tt=Ot==null?void 0:Ot.properties)===null||Tt===void 0?void 0:Tt[yt];if(typeof Bt!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${yt}"`);Et=Et&&(Rt||wt(Ot)),Pt(Bt,Nt)}if(!Et)throw new Error(`discriminator: "${yt}" must be required`);return $t;function wt({required:Nt}){return Array.isArray(Nt)&&Nt.includes(yt)}function Pt(Nt,Ot){if(Nt.const)Ft(Nt.const,Ot);else if(Nt.enum)for(const Bt of Nt.enum)Ft(Bt,Ot);else throw new Error(`discriminator: "properties/${yt}" must have "const" or "enum"`)}function Ft(Nt,Ot){if(typeof Nt!="string"||Nt in $t)throw new Error(`discriminator: "${yt}" values must be unique strings`);$t[Nt]=Ot}}}};discriminator.default=def;const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type,properties,default:!0};(function(nt,tt){Object.defineProperty(tt,"__esModule",{value:!0}),tt.MissingRefError=tt.ValidationError=tt.CodeGen=tt.Name=tt.nil=tt.stringify=tt.str=tt._=tt.KeywordCxt=tt.Ajv=void 0;const rt=core$2,st=draft7,at=discriminator,lt=require$$3,dt=["/properties"],yt="http://json-schema.org/draft-07/schema";class vt extends rt.default{_addVocabularies(){super._addVocabularies(),st.default.forEach($t=>this.addVocabulary($t)),this.opts.discriminator&&this.addKeyword(at.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const $t=this.opts.$data?this.$dataMetaSchema(lt,dt):lt;this.addMetaSchema($t,yt,!1),this.refs["http://json-schema.org/schema"]=yt}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(yt)?yt:void 0)}}tt.Ajv=vt,nt.exports=tt=vt,nt.exports.Ajv=vt,Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=vt;var _t=validate;Object.defineProperty(tt,"KeywordCxt",{enumerable:!0,get:function(){return _t.KeywordCxt}});var bt=codegen;Object.defineProperty(tt,"_",{enumerable:!0,get:function(){return bt._}}),Object.defineProperty(tt,"str",{enumerable:!0,get:function(){return bt.str}}),Object.defineProperty(tt,"stringify",{enumerable:!0,get:function(){return bt.stringify}}),Object.defineProperty(tt,"nil",{enumerable:!0,get:function(){return bt.nil}}),Object.defineProperty(tt,"Name",{enumerable:!0,get:function(){return bt.Name}}),Object.defineProperty(tt,"CodeGen",{enumerable:!0,get:function(){return bt.CodeGen}});var Mt=validation_error;Object.defineProperty(tt,"ValidationError",{enumerable:!0,get:function(){return Mt.default}});var Ct=ref_error;Object.defineProperty(tt,"MissingRefError",{enumerable:!0,get:function(){return Ct.default}})})(ajv,ajv.exports);var ajvExports=ajv.exports;const Ajv=getDefaultExportFromCjs(ajvExports);var dist={exports:{}},formats={};(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.formatNames=nt.fastFormats=nt.fullFormats=void 0;function tt(rn,Gt){return{validate:rn,compare:Gt}}nt.fullFormats={date:tt(lt,dt),time:tt(vt,_t),"date-time":tt(Mt,Ct),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Rt,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Zt,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:wt,int32:{type:"number",validate:Nt},int64:{type:"number",validate:Ot},float:{type:"number",validate:Bt},double:{type:"number",validate:Bt},password:!0,binary:!0},nt.fastFormats={...nt.fullFormats,date:tt(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,dt),time:tt(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,_t),"date-time":tt(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Ct),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},nt.formatNames=Object.keys(nt.fullFormats);function rt(rn){return rn%4===0&&(rn%100!==0||rn%400===0)}const st=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,at=[0,31,28,31,30,31,30,31,31,30,31,30,31];function lt(rn){const Gt=st.exec(rn);if(!Gt)return!1;const nn=+Gt[1],cn=+Gt[2],an=+Gt[3];return cn>=1&&cn<=12&&an>=1&&an<=(cn===2&&rt(nn)?29:at[cn])}function dt(rn,Gt){if(rn&&Gt)return rn>Gt?1:rn<Gt?-1:0}const yt=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function vt(rn,Gt){const nn=yt.exec(rn);if(!nn)return!1;const cn=+nn[1],an=+nn[2],mn=+nn[3],En=nn[5];return(cn<=23&&an<=59&&mn<=59||cn===23&&an===59&&mn===60)&&(!Gt||En!=="")}function _t(rn,Gt){if(!(rn&&Gt))return;const nn=yt.exec(rn),cn=yt.exec(Gt);if(nn&&cn)return rn=nn[1]+nn[2]+nn[3]+(nn[4]||""),Gt=cn[1]+cn[2]+cn[3]+(cn[4]||""),rn>Gt?1:rn<Gt?-1:0}const bt=/t|\s/i;function Mt(rn){const Gt=rn.split(bt);return Gt.length===2&&lt(Gt[0])&&vt(Gt[1],!0)}function Ct(rn,Gt){if(!(rn&&Gt))return;const[nn,cn]=rn.split(bt),[an,mn]=Gt.split(bt),En=dt(nn,an);if(En!==void 0)return En||_t(cn,mn)}const Tt=/\/|:/,$t=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Rt(rn){return Tt.test(rn)&&$t.test(rn)}const Et=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function wt(rn){return Et.lastIndex=0,Et.test(rn)}const Pt=-2147483648,Ft=2**31-1;function Nt(rn){return Number.isInteger(rn)&&rn<=Ft&&rn>=Pt}function Ot(rn){return Number.isInteger(rn)}function Bt(){return!0}const Xt=/[^\\]\\Z/;function Zt(rn){if(Xt.test(rn))return!1;try{return new RegExp(rn),!0}catch{return!1}}})(formats);var limit={};(function(nt){Object.defineProperty(nt,"__esModule",{value:!0}),nt.formatLimitDefinition=void 0;const tt=ajvExports,rt=codegen,st=rt.operators,at={formatMaximum:{okStr:"<=",ok:st.LTE,fail:st.GT},formatMinimum:{okStr:">=",ok:st.GTE,fail:st.LT},formatExclusiveMaximum:{okStr:"<",ok:st.LT,fail:st.GTE},formatExclusiveMinimum:{okStr:">",ok:st.GT,fail:st.LTE}},lt={message:({keyword:yt,schemaCode:vt})=>rt.str`should be ${at[yt].okStr} ${vt}`,params:({keyword:yt,schemaCode:vt})=>rt._`{comparison: ${at[yt].okStr}, limit: ${vt}}`};nt.formatLimitDefinition={keyword:Object.keys(at),type:"string",schemaType:"string",$data:!0,error:lt,code(yt){const{gen:vt,data:_t,schemaCode:bt,keyword:Mt,it:Ct}=yt,{opts:Tt,self:$t}=Ct;if(!Tt.validateFormats)return;const Rt=new tt.KeywordCxt(Ct,$t.RULES.all.format.definition,"format");Rt.$data?Et():wt();function Et(){const Ft=vt.scopeValue("formats",{ref:$t.formats,code:Tt.code.formats}),Nt=vt.const("fmt",rt._`${Ft}[${Rt.schemaCode}]`);yt.fail$data(rt.or(rt._`typeof ${Nt} != "object"`,rt._`${Nt} instanceof RegExp`,rt._`typeof ${Nt}.compare != "function"`,Pt(Nt)))}function wt(){const Ft=Rt.schema,Nt=$t.formats[Ft];if(!Nt||Nt===!0)return;if(typeof Nt!="object"||Nt instanceof RegExp||typeof Nt.compare!="function")throw new Error(`"${Mt}": format "${Ft}" does not define "compare" function`);const Ot=vt.scopeValue("formats",{key:Ft,ref:Nt,code:Tt.code.formats?rt._`${Tt.code.formats}${rt.getProperty(Ft)}`:void 0});yt.fail$data(Pt(Ot))}function Pt(Ft){return rt._`${Ft}.compare(${_t}, ${bt}) ${at[Mt].fail} 0`}},dependencies:["format"]};const dt=yt=>(yt.addKeyword(nt.formatLimitDefinition),yt);nt.default=dt})(limit);(function(nt,tt){Object.defineProperty(tt,"__esModule",{value:!0});const rt=formats,st=limit,at=codegen,lt=new at.Name("fullFormats"),dt=new at.Name("fastFormats"),yt=(_t,bt={keywords:!0})=>{if(Array.isArray(bt))return vt(_t,bt,rt.fullFormats,lt),_t;const[Mt,Ct]=bt.mode==="fast"?[rt.fastFormats,dt]:[rt.fullFormats,lt],Tt=bt.formats||rt.formatNames;return vt(_t,Tt,Mt,Ct),bt.keywords&&st.default(_t),_t};yt.get=(_t,bt="full")=>{const Ct=(bt==="fast"?rt.fastFormats:rt.fullFormats)[_t];if(!Ct)throw new Error(`Unknown format "${_t}"`);return Ct};function vt(_t,bt,Mt,Ct){var Tt,$t;(Tt=($t=_t.opts.code).formats)!==null&&Tt!==void 0||($t.formats=at._`require("ajv-formats/dist/formats").${Ct}`);for(const Rt of bt)_t.addFormat(Rt,Mt[Rt])}nt.exports=tt=yt,Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=yt})(dist,dist.exports);var distExports=dist.exports;const addFormats=getDefaultExportFromCjs(distExports),AJV_CONFIG={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!1},COLOR_FORMAT_REGEX=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,DATA_URL_FORMAT_REGEX=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function createAjvInstance(nt,tt,rt={},st,at=Ajv){const lt=new at({...AJV_CONFIG,...rt});return st?addFormats(lt,st):st!==!1&&addFormats(lt),lt.addFormat("data-url",DATA_URL_FORMAT_REGEX),lt.addFormat("color",COLOR_FORMAT_REGEX),lt.addKeyword(ADDITIONAL_PROPERTY_FLAG),lt.addKeyword(RJSF_ADDITIONAL_PROPERTIES_FLAG),Array.isArray(nt)&&lt.addMetaSchema(nt),isObject$f(tt)&&Object.keys(tt).forEach(dt=>{lt.addFormat(dt,tt[dt])}),lt}function transformRJSFValidationErrors(nt=[],tt){return nt.map(rt=>{const{instancePath:st,keyword:at,params:lt,schemaPath:dt,parentSchema:yt,...vt}=rt;let{message:_t=""}=vt,bt=st.replace(/\//g,"."),Mt=`${bt} ${_t}`.trim();if("missingProperty"in lt){bt=bt?`${bt}.${lt.missingProperty}`:lt.missingProperty;const Ct=lt.missingProperty;let Tt=getUiOptions(_get(tt,`${bt.replace(/^\./,"")}`)).title;if(Tt===void 0){const $t=dt.replace(/\/properties\//g,"/").split("/").slice(1,-1).concat([Ct]);Tt=getUiOptions(_get(tt,$t)).title}if(Tt)_t=_t.replace(`'${Ct}'`,`'${Tt}'`);else{const $t=_get(yt,[PROPERTIES_KEY,Ct,"title"]);$t&&(_t=_t.replace(`'${Ct}'`,`'${$t}'`))}Mt=_t}else{const Ct=getUiOptions(_get(tt,`${bt.replace(/^\./,"")}`)).title;if(Ct)Mt=`'${Ct}' ${_t}`.trim();else{const Tt=yt==null?void 0:yt.title;Tt&&(Mt=`'${Tt}' ${_t}`.trim())}}return{name:at,property:bt,message:_t,params:lt,stack:Mt,schemaPath:dt}})}function processRawValidationErrors(nt,tt,rt,st,at,lt,dt){const{validationError:yt}=tt;let vt=transformRJSFValidationErrors(tt.errors,dt);yt&&(vt=[...vt,{stack:yt.message}]),typeof lt=="function"&&(vt=lt(vt,dt));let _t=toErrorSchema(vt);if(yt&&(_t={..._t,$schema:{__errors:[yt.message]}}),typeof at!="function")return{errors:vt,errorSchema:_t};const bt=getDefaultFormState(nt,st,rt,st,!0),Mt=at(bt,createErrorHandler(bt),dt),Ct=unwrapErrorHandler(Mt);return validationDataMerge({errors:vt,errorSchema:_t},Ct)}class AJV8Validator{constructor(tt,rt){const{additionalMetaSchemas:st,customFormats:at,ajvOptionsOverrides:lt,ajvFormatOptions:dt,AjvClass:yt}=tt;this.ajv=createAjvInstance(st,at,lt,dt,yt),this.localizer=rt}reset(){this.ajv.removeSchema()}toErrorList(tt,rt=[]){return toErrorList(tt,rt)}rawValidation(tt,rt){var st,at;let lt,dt;tt[ID_KEY]&&(dt=this.ajv.getSchema(tt[ID_KEY]));try{dt===void 0&&(dt=this.ajv.compile(tt)),dt(rt)}catch(vt){lt=vt}let yt;return dt&&(typeof this.localizer=="function"&&(((st=dt.errors)!==null&&st!==void 0?st:[]).forEach(vt=>{var _t;!((_t=vt.params)===null||_t===void 0)&&_t.missingProperty&&(vt.params.missingProperty=`'${vt.params.missingProperty}'`)}),this.localizer(dt.errors),((at=dt.errors)!==null&&at!==void 0?at:[]).forEach(vt=>{var _t;!((_t=vt.params)===null||_t===void 0)&&_t.missingProperty&&(vt.params.missingProperty=vt.params.missingProperty.slice(1,-1))})),yt=dt.errors||void 0,dt.errors=null),{errors:yt,validationError:lt}}validateFormData(tt,rt,st,at,lt){const dt=this.rawValidation(rt,tt);return processRawValidationErrors(this,dt,tt,rt,st,at,lt)}handleSchemaUpdate(tt){var rt,st;const at=(rt=tt[ID_KEY])!==null&&rt!==void 0?rt:ROOT_SCHEMA_PREFIX;this.ajv.getSchema(at)===void 0?this.ajv.addSchema(tt,at):deepEquals(tt,(st=this.ajv.getSchema(at))===null||st===void 0?void 0:st.schema)||(this.ajv.removeSchema(at),this.ajv.addSchema(tt,at))}isValid(tt,rt,st){var at;try{this.handleSchemaUpdate(st);const lt=withIdRefPrefix(tt),dt=(at=lt[ID_KEY])!==null&&at!==void 0?at:hashForSchema(lt);let yt;return yt=this.ajv.getSchema(dt),yt===void 0&&(yt=this.ajv.addSchema(lt,dt).getSchema(dt)||this.ajv.compile(lt)),yt(rt)}catch(lt){return console.warn("Error encountered compiling schema:",lt),!1}}}function customizeValidator(nt={},tt){return new AJV8Validator(nt,tt)}const validator$1=customizeValidator();var baseGet=_baseGet,baseSet=_baseSet,castPath=_castPath;function basePickBy$1(nt,tt,rt){for(var st=-1,at=tt.length,lt={};++st<at;){var dt=tt[st],yt=baseGet(nt,dt);rt(yt,dt)&&baseSet(lt,castPath(dt,nt),yt)}return lt}var _basePickBy=basePickBy$1,basePickBy=_basePickBy,hasIn=hasIn_1;function basePick$1(nt,tt){return basePickBy(nt,tt,function(rt,st){return hasIn(nt,st)})}var _basePick=basePick$1,basePick=_basePick,flatRest=_flatRest,pick=flatRest(function(nt,tt){return nt==null?{}:basePick(nt,tt)}),pick_1=pick;const _pick=getDefaultExportFromCjs(pick_1);let nanoid=(nt=21)=>crypto.getRandomValues(new Uint8Array(nt)).reduce((tt,rt)=>(rt&=63,rt<36?tt+=rt.toString(36):rt<62?tt+=(rt-26).toString(36).toUpperCase():rt>62?tt+="-":tt+="_",tt),"");function generateRowId(){return nanoid()}function generateKeyedFormData(nt){return Array.isArray(nt)?nt.map(tt=>({key:generateRowId(),item:tt})):[]}function keyedToPlainFormData(nt){return Array.isArray(nt)?nt.map(tt=>tt.item):[]}class ArrayField extends reactExports.Component{constructor(tt){super(tt),this._getNewFormDataRow=()=>{const{schema:at,registry:lt}=this.props,{schemaUtils:dt}=lt;let yt=at.items;return isFixedItems(at)&&allowAdditionalItems(at)&&(yt=at.additionalItems),dt.getDefaultFormState(yt)},this.onAddClick=at=>{this._handleAddClick(at)},this.onAddIndexClick=at=>lt=>{this._handleAddClick(lt,at)},this.onCopyIndexClick=at=>lt=>{lt&&lt.preventDefault();const{onChange:dt,errorSchema:yt}=this.props,{keyedFormData:vt}=this.state;let _t;if(yt){_t={};for(const Ct in yt){const Tt=parseInt(Ct);Tt<=at?set$1(_t,[Tt],yt[Ct]):Tt>at&&set$1(_t,[Tt+1],yt[Ct])}}const bt={key:generateRowId(),item:cloneDeep$2(vt[at].item)},Mt=[...vt];at!==void 0?Mt.splice(at+1,0,bt):Mt.push(bt),this.setState({keyedFormData:Mt,updatedKeyedFormData:!0},()=>dt(keyedToPlainFormData(Mt),_t))},this.onDropIndexClick=at=>lt=>{lt&&lt.preventDefault();const{onChange:dt,errorSchema:yt}=this.props,{keyedFormData:vt}=this.state;let _t;if(yt){_t={};for(const Mt in yt){const Ct=parseInt(Mt);Ct<at?set$1(_t,[Ct],yt[Mt]):Ct>at&&set$1(_t,[Ct-1],yt[Mt])}}const bt=vt.filter((Mt,Ct)=>Ct!==at);this.setState({keyedFormData:bt,updatedKeyedFormData:!0},()=>dt(keyedToPlainFormData(bt),_t))},this.onReorderClick=(at,lt)=>dt=>{dt&&(dt.preventDefault(),dt.currentTarget.blur());const{onChange:yt,errorSchema:vt}=this.props;let _t;if(vt){_t={};for(const Tt in vt){const $t=parseInt(Tt);$t==at?set$1(_t,[lt],vt[at]):$t==lt?set$1(_t,[at],vt[lt]):set$1(_t,[Tt],vt[$t])}}const{keyedFormData:bt}=this.state;function Mt(){const Tt=bt.slice();return Tt.splice(at,1),Tt.splice(lt,0,bt[at]),Tt}const Ct=Mt();this.setState({keyedFormData:Ct},()=>yt(keyedToPlainFormData(Ct),_t))},this.onChangeForIndex=at=>(lt,dt,yt)=>{const{formData:vt,onChange:_t,errorSchema:bt}=this.props,Ct=(Array.isArray(vt)?vt:[]).map((Tt,$t)=>at===$t?typeof lt>"u"?null:lt:Tt);_t(Ct,bt&&bt&&{...bt,[at]:dt},yt)},this.onSelectChange=at=>{const{onChange:lt,idSchema:dt}=this.props;lt(at,void 0,dt&&dt.$id)};const{formData:rt=[]}=tt,st=generateKeyedFormData(rt);this.state={keyedFormData:st,updatedKeyedFormData:!1}}static getDerivedStateFromProps(tt,rt){if(rt.updatedKeyedFormData)return{updatedKeyedFormData:!1};const st=Array.isArray(tt.formData)?tt.formData:[],at=rt.keyedFormData||[];return{keyedFormData:st.length===at.length?at.map((dt,yt)=>({key:dt.key,item:st[yt]})):generateKeyedFormData(st)}}get itemTitle(){const{schema:tt,registry:rt}=this.props,{translateString:st}=rt;return _get(tt,[ITEMS_KEY,"title"],_get(tt,[ITEMS_KEY,"description"],st(TranslatableString.ArrayItemTitle)))}isItemRequired(tt){return Array.isArray(tt.type)?!tt.type.includes("null"):tt.type!=="null"}canAddItem(tt){const{schema:rt,uiSchema:st,registry:at}=this.props;let{addable:lt}=getUiOptions(st,at.globalUiOptions);return lt!==!1&&(rt.maxItems!==void 0?lt=tt.length<rt.maxItems:lt=!0),lt}_handleAddClick(tt,rt){tt&&tt.preventDefault();const{onChange:st,errorSchema:at}=this.props,{keyedFormData:lt}=this.state;let dt;if(at){dt={};for(const _t in at){const bt=parseInt(_t);rt===void 0||bt<rt?set$1(dt,[bt],at[_t]):bt>=rt&&set$1(dt,[bt+1],at[_t])}}const yt={key:generateRowId(),item:this._getNewFormDataRow()},vt=[...lt];rt!==void 0?vt.splice(rt,0,yt):vt.push(yt),this.setState({keyedFormData:vt,updatedKeyedFormData:!0},()=>st(keyedToPlainFormData(vt),dt))}render(){const{schema:tt,uiSchema:rt,idSchema:st,registry:at}=this.props,{schemaUtils:lt,translateString:dt}=at;if(!(ITEMS_KEY in tt)){const yt=getUiOptions(rt),vt=getTemplate("UnsupportedFieldTemplate",at,yt);return jsxRuntimeExports.jsx(vt,{schema:tt,idSchema:st,reason:dt(TranslatableString.MissingItems),registry:at})}return lt.isMultiSelect(tt)?this.renderMultiSelect():isCustomWidget(rt)?this.renderCustomWidget():isFixedItems(tt)?this.renderFixedArray():lt.isFilesArray(tt,rt)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:tt,uiSchema:rt={},errorSchema:st,idSchema:at,name:lt,title:dt,disabled:yt=!1,readonly:vt=!1,autofocus:_t=!1,required:bt=!1,registry:Mt,onBlur:Ct,onFocus:Tt,idPrefix:$t,idSeparator:Rt="_",rawErrors:Et}=this.props,{keyedFormData:wt}=this.state,Pt=tt.title||dt||lt,{schemaUtils:Ft,formContext:Nt}=Mt,Ot=getUiOptions(rt),Bt=isObject$f(tt.items)?tt.items:{},Xt=Ft.retrieveSchema(Bt),Zt=keyedToPlainFormData(this.state.keyedFormData),rn=this.canAddItem(Zt),Gt={canAdd:rn,items:wt.map((cn,an)=>{const{key:mn,item:En}=cn,Cn=En,Mn=Ft.retrieveSchema(Bt,Cn),un=st?st[an]:void 0,Tn=at.$id+Rt+an,Pn=Ft.toIdSchema(Mn,Tn,Cn,$t,Rt);return this.renderArrayFieldItem({key:mn,index:an,name:lt&&`${lt}-${an}`,title:Pt?`${Pt}-${an+1}`:void 0,canAdd:rn,canMoveUp:an>0,canMoveDown:an<Zt.length-1,itemSchema:Mn,itemIdSchema:Pn,itemErrorSchema:un,itemData:Cn,itemUiSchema:rt.items,autofocus:_t&&an===0,onBlur:Ct,onFocus:Tt,rawErrors:Et,totalItems:wt.length})}),className:`field field-array field-array-of-${Xt.type}`,disabled:yt,idSchema:at,uiSchema:rt,onAddClick:this.onAddClick,readonly:vt,required:bt,schema:tt,title:Pt,formContext:Nt,formData:Zt,rawErrors:Et,registry:Mt},nn=getTemplate("ArrayFieldTemplate",Mt,Ot);return jsxRuntimeExports.jsx(nn,{...Gt})}renderCustomWidget(){var tt;const{schema:rt,idSchema:st,uiSchema:at,disabled:lt=!1,readonly:dt=!1,autofocus:yt=!1,required:vt=!1,hideError:_t,placeholder:bt,onBlur:Mt,onFocus:Ct,formData:Tt=[],registry:$t,rawErrors:Rt,name:Et}=this.props,{widgets:wt,formContext:Pt,globalUiOptions:Ft,schemaUtils:Nt}=$t,{widget:Ot,title:Bt,...Xt}=getUiOptions(at,Ft),Zt=getWidget(rt,Ot,wt),rn=(tt=Bt??rt.title)!==null&&tt!==void 0?tt:Et,Gt=Nt.getDisplayLabel(rt,at,Ft);return jsxRuntimeExports.jsx(Zt,{id:st.$id,name:Et,multiple:!0,onChange:this.onSelectChange,onBlur:Mt,onFocus:Ct,options:Xt,schema:rt,uiSchema:at,registry:$t,value:Tt,disabled:lt,readonly:dt,hideError:_t,required:vt,label:rn,hideLabel:!Gt,placeholder:bt,formContext:Pt,autofocus:yt,rawErrors:Rt})}renderMultiSelect(){var tt;const{schema:rt,idSchema:st,uiSchema:at,formData:lt=[],disabled:dt=!1,readonly:yt=!1,autofocus:vt=!1,required:_t=!1,placeholder:bt,onBlur:Mt,onFocus:Ct,registry:Tt,rawErrors:$t,name:Rt}=this.props,{widgets:Et,schemaUtils:wt,formContext:Pt,globalUiOptions:Ft}=Tt,Nt=wt.retrieveSchema(rt.items,lt),Ot=optionsList(Nt,at),{widget:Bt="select",title:Xt,...Zt}=getUiOptions(at,Ft),rn=getWidget(rt,Bt,Et),Gt=(tt=Xt??rt.title)!==null&&tt!==void 0?tt:Rt,nn=wt.getDisplayLabel(rt,at,Ft);return jsxRuntimeExports.jsx(rn,{id:st.$id,name:Rt,multiple:!0,onChange:this.onSelectChange,onBlur:Mt,onFocus:Ct,options:{...Zt,enumOptions:Ot},schema:rt,uiSchema:at,registry:Tt,value:lt,disabled:dt,readonly:yt,required:_t,label:Gt,hideLabel:!nn,placeholder:bt,formContext:Pt,autofocus:vt,rawErrors:$t})}renderFiles(){var tt;const{schema:rt,uiSchema:st,idSchema:at,name:lt,disabled:dt=!1,readonly:yt=!1,autofocus:vt=!1,required:_t=!1,onBlur:bt,onFocus:Mt,registry:Ct,formData:Tt=[],rawErrors:$t}=this.props,{widgets:Rt,formContext:Et,globalUiOptions:wt,schemaUtils:Pt}=Ct,{widget:Ft="files",title:Nt,...Ot}=getUiOptions(st,wt),Bt=getWidget(rt,Ft,Rt),Xt=(tt=Nt??rt.title)!==null&&tt!==void 0?tt:lt,Zt=Pt.getDisplayLabel(rt,st,wt);return jsxRuntimeExports.jsx(Bt,{options:Ot,id:at.$id,name:lt,multiple:!0,onChange:this.onSelectChange,onBlur:bt,onFocus:Mt,schema:rt,uiSchema:st,value:Tt,disabled:dt,readonly:yt,required:_t,registry:Ct,formContext:Et,autofocus:vt,rawErrors:$t,label:Xt,hideLabel:!Zt})}renderFixedArray(){const{schema:tt,uiSchema:rt={},formData:st=[],errorSchema:at,idPrefix:lt,idSeparator:dt="_",idSchema:yt,name:vt,title:_t,disabled:bt=!1,readonly:Mt=!1,autofocus:Ct=!1,required:Tt=!1,registry:$t,onBlur:Rt,onFocus:Et,rawErrors:wt}=this.props,{keyedFormData:Pt}=this.state;let{formData:Ft=[]}=this.props;const Nt=tt.title||_t||vt,Ot=getUiOptions(rt),{schemaUtils:Bt,formContext:Xt}=$t,rn=(isObject$f(tt.items)?tt.items:[]).map((mn,En)=>Bt.retrieveSchema(mn,st[En])),Gt=isObject$f(tt.additionalItems)?Bt.retrieveSchema(tt.additionalItems,st):null;(!Ft||Ft.length<rn.length)&&(Ft=Ft||[],Ft=Ft.concat(new Array(rn.length-Ft.length)));const nn=this.canAddItem(Ft)&&!!Gt,cn={canAdd:nn,className:"field field-array field-array-fixed-items",disabled:bt,idSchema:yt,formData:st,items:Pt.map((mn,En)=>{const{key:Cn,item:Mn}=mn,un=Mn,Tn=En>=rn.length,Pn=(Tn&&isObject$f(tt.additionalItems)?Bt.retrieveSchema(tt.additionalItems,un):rn[En])||{},dn=yt.$id+dt+En,Un=Bt.toIdSchema(Pn,dn,un,lt,dt),qn=Tn?rt.additionalItems||{}:Array.isArray(rt.items)?rt.items[En]:rt.items||{},In=at?at[En]:void 0;return this.renderArrayFieldItem({key:Cn,index:En,name:vt&&`${vt}-${En}`,title:Nt?`${Nt}-${En+1}`:void 0,canAdd:nn,canRemove:Tn,canMoveUp:En>=rn.length+1,canMoveDown:Tn&&En<Ft.length-1,itemSchema:Pn,itemData:un,itemUiSchema:qn,itemIdSchema:Un,itemErrorSchema:In,autofocus:Ct&&En===0,onBlur:Rt,onFocus:Et,rawErrors:wt,totalItems:Pt.length})}),onAddClick:this.onAddClick,readonly:Mt,required:Tt,registry:$t,schema:tt,uiSchema:rt,title:Nt,formContext:Xt,errorSchema:at,rawErrors:wt},an=getTemplate("ArrayFieldTemplate",$t,Ot);return jsxRuntimeExports.jsx(an,{...cn})}renderArrayFieldItem(tt){const{key:rt,index:st,name:at,canAdd:lt,canRemove:dt=!0,canMoveUp:yt,canMoveDown:vt,itemSchema:_t,itemData:bt,itemUiSchema:Mt,itemIdSchema:Ct,itemErrorSchema:Tt,autofocus:$t,onBlur:Rt,onFocus:Et,rawErrors:wt,totalItems:Pt,title:Ft}=tt,{disabled:Nt,hideError:Ot,idPrefix:Bt,idSeparator:Xt,readonly:Zt,uiSchema:rn,registry:Gt,formContext:nn}=this.props,{fields:{ArraySchemaField:cn,SchemaField:an},globalUiOptions:mn}=Gt,En=cn||an,{orderable:Cn=!0,removable:Mn=!0,copyable:un=!1}=getUiOptions(rn,mn),Tn={moveUp:Cn&&yt,moveDown:Cn&&vt,copy:un&&lt,remove:Mn&&dt,toolbar:!1};return Tn.toolbar=Object.keys(Tn).some(Pn=>Tn[Pn]),{children:jsxRuntimeExports.jsx(En,{name:at,title:Ft,index:st,schema:_t,uiSchema:Mt,formData:bt,formContext:nn,errorSchema:Tt,idPrefix:Bt,idSeparator:Xt,idSchema:Ct,required:this.isItemRequired(_t),onChange:this.onChangeForIndex(st),onBlur:Rt,onFocus:Et,registry:Gt,disabled:Nt,readonly:Zt,hideError:Ot,autofocus:$t,rawErrors:wt}),className:"array-item",disabled:Nt,canAdd:lt,hasCopy:Tn.copy,hasToolbar:Tn.toolbar,hasMoveUp:Tn.moveUp,hasMoveDown:Tn.moveDown,hasRemove:Tn.remove,index:st,totalItems:Pt,key:rt,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:Zt,registry:Gt,schema:_t,uiSchema:Mt}}}function BooleanField(nt){var tt,rt,st;const{schema:at,name:lt,uiSchema:dt,idSchema:yt,formData:vt,registry:_t,required:bt,disabled:Mt,readonly:Ct,hideError:Tt,autofocus:$t,title:Rt,onChange:Et,onFocus:wt,onBlur:Pt,rawErrors:Ft}=nt,{title:Nt}=at,{widgets:Ot,formContext:Bt,translateString:Xt,globalUiOptions:Zt}=_t,{widget:rn="checkbox",title:Gt,label:nn=!0,...cn}=getUiOptions(dt,Zt),an=getWidget(at,rn,Ot),mn=Xt(TranslatableString.YesLabel),En=Xt(TranslatableString.NoLabel);let Cn;const Mn=(rt=(tt=Gt??Nt)!==null&&tt!==void 0?tt:Rt)!==null&&rt!==void 0?rt:lt;if(Array.isArray(at.oneOf))Cn=optionsList({oneOf:at.oneOf.map(un=>{if(isObject$f(un))return{...un,title:un.title||(un.const===!0?mn:En)}}).filter(un=>un)},dt);else{const un=at,Tn=(st=at.enum)!==null&&st!==void 0?st:[!0,!1];!un.enumNames&&Tn.length===2&&Tn.every(Pn=>typeof Pn=="boolean")?Cn=[{value:Tn[0],label:Tn[0]?mn:En},{value:Tn[1],label:Tn[1]?mn:En}]:Cn=optionsList({enum:Tn,enumNames:un.enumNames},dt)}return jsxRuntimeExports.jsx(an,{options:{...cn,enumOptions:Cn},schema:at,uiSchema:dt,id:yt.$id,name:lt,onChange:Et,onFocus:wt,onBlur:Pt,label:Mn,hideLabel:!nn,value:vt,required:bt,disabled:Mt,readonly:Ct,hideError:Tt,registry:_t,formContext:Bt,autofocus:$t,rawErrors:Ft})}class AnyOfField extends reactExports.Component{constructor(tt){super(tt),this.onOptionChange=dt=>{const{selectedOption:yt,retrievedOptions:vt}=this.state,{formData:_t,onChange:bt,registry:Mt}=this.props,{schemaUtils:Ct}=Mt,Tt=dt!==void 0?parseInt(dt,10):-1;if(Tt===yt)return;const $t=Tt>=0?vt[Tt]:void 0,Rt=yt>=0?vt[yt]:void 0;let Et=Ct.sanitizeDataForNewSchema($t,Rt,_t);$t&&(Et=Ct.getDefaultFormState($t,Et,"excludeObjectChildren")),this.setState({selectedOption:Tt},()=>{bt(Et,void 0,this.getFieldId())})};const{formData:rt,options:st,registry:{schemaUtils:at}}=this.props,lt=st.map(dt=>at.retrieveSchema(dt,rt));this.state={retrievedOptions:lt,selectedOption:this.getMatchingOption(0,rt,lt)}}componentDidUpdate(tt,rt){const{formData:st,options:at,idSchema:lt}=this.props,{selectedOption:dt}=this.state;let yt=this.state;if(!deepEquals(tt.options,at)){const{registry:{schemaUtils:vt}}=this.props,_t=at.map(bt=>vt.retrieveSchema(bt,st));yt={selectedOption:dt,retrievedOptions:_t}}if(!deepEquals(st,tt.formData)&&lt.$id===tt.idSchema.$id){const{retrievedOptions:vt}=yt,_t=this.getMatchingOption(dt,st,vt);rt&&_t!==dt&&(yt={selectedOption:_t,retrievedOptions:vt})}yt!==this.state&&this.setState(yt)}getMatchingOption(tt,rt,st){const{schema:at,registry:{schemaUtils:lt}}=this.props,dt=getDiscriminatorFieldFromSchema(at);return lt.getClosestMatchingOption(rt,st,tt,dt)}getFieldId(){const{idSchema:tt,schema:rt}=this.props;return`${tt.$id}${rt.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:tt,disabled:rt=!1,errorSchema:st={},formContext:at,onBlur:lt,onFocus:dt,registry:yt,schema:vt,uiSchema:_t}=this.props,{widgets:bt,fields:Mt,translateString:Ct,globalUiOptions:Tt,schemaUtils:$t}=yt,{SchemaField:Rt}=Mt,{selectedOption:Et,retrievedOptions:wt}=this.state,{widget:Pt="select",placeholder:Ft,autofocus:Nt,autocomplete:Ot,title:Bt=vt.title,...Xt}=getUiOptions(_t,Tt),Zt=getWidget({type:"number"},Pt,bt),rn=_get(st,ERRORS_KEY,[]),Gt=omit$1(st,[ERRORS_KEY]),nn=$t.getDisplayLabel(vt,_t,Tt),cn=Et>=0&&wt[Et]||null;let an;if(cn){const{required:Tn}=vt;an=Tn?mergeSchemas({required:Tn},cn):cn}let mn=[];ONE_OF_KEY in vt&&_t&&ONE_OF_KEY in _t?Array.isArray(_t[ONE_OF_KEY])?mn=_t[ONE_OF_KEY]:console.warn(`uiSchema.oneOf is not an array for "${Bt||tt}"`):ANY_OF_KEY in vt&&_t&&ANY_OF_KEY in _t&&(Array.isArray(_t[ANY_OF_KEY])?mn=_t[ANY_OF_KEY]:console.warn(`uiSchema.anyOf is not an array for "${Bt||tt}"`));let En=_t;Et>=0&&mn.length>Et&&(En=mn[Et]);const Cn=Bt?TranslatableString.TitleOptionPrefix:TranslatableString.OptionPrefix,Mn=Bt?[Bt]:[],un=wt.map((Tn,Pn)=>{const{title:dn=Tn.title}=getUiOptions(mn[Pn]);return{label:dn||Ct(Cn,Mn.concat(String(Pn+1))),value:Pn}});return jsxRuntimeExports.jsxs("div",{className:"panel panel-default panel-body",children:[jsxRuntimeExports.jsx("div",{className:"form-group",children:jsxRuntimeExports.jsx(Zt,{id:this.getFieldId(),name:`${tt}${vt.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:lt,onFocus:dt,disabled:rt||_isEmpty(un),multiple:!1,rawErrors:rn,errorSchema:Gt,value:Et>=0?Et:void 0,options:{enumOptions:un,...Xt},registry:yt,formContext:at,placeholder:Ft,autocomplete:Ot,autofocus:Nt,label:Bt??tt,hideLabel:!nn})}),an&&jsxRuntimeExports.jsx(Rt,{...this.props,schema:an,uiSchema:En})]})}}const trailingCharMatcherWithPrefix=/\.([0-9]*0)*$/,trailingCharMatcher=/[0.]0*$/;function NumberField(nt){const{registry:tt,onChange:rt,formData:st,value:at}=nt,[lt,dt]=reactExports.useState(at),{StringField:yt}=tt.fields;let vt=st;const _t=reactExports.useCallback((bt,Mt,Ct)=>{dt(bt),`${bt}`.charAt(0)==="."&&(bt=`0${bt}`);const Tt=typeof bt=="string"&&bt.match(trailingCharMatcherWithPrefix)?asNumber(bt.replace(trailingCharMatcher,"")):asNumber(bt);rt(Tt,Mt,Ct)},[rt]);if(typeof lt=="string"&&typeof vt=="number"){const bt=new RegExp(`^(${String(vt).replace(".","\\.")})?\\.?0*$`);lt.match(bt)&&(vt=lt)}return jsxRuntimeExports.jsx(yt,{...nt,formData:vt,onChange:_t})}function t$2(){return t$2=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},t$2.apply(this,arguments)}const n$2=["children","options"],r$2={blockQuote:"0",breakLine:"1",breakThematic:"2",codeBlock:"3",codeFenced:"4",codeInline:"5",footnote:"6",footnoteReference:"7",gfmTask:"8",heading:"9",headingSetext:"10",htmlBlock:"11",htmlComment:"12",htmlSelfClosing:"13",image:"14",link:"15",linkAngleBraceStyleDetector:"16",linkBareUrlDetector:"17",linkMailtoDetector:"18",newlineCoalescer:"19",orderedList:"20",paragraph:"21",ref:"22",refImage:"23",refLink:"24",table:"25",tableSeparator:"26",text:"27",textBolded:"28",textEmphasized:"29",textEscaped:"30",textMarked:"31",textStrikethroughed:"32",unorderedList:"33"};var i$2;(function(nt){nt[nt.MAX=0]="MAX",nt[nt.HIGH=1]="HIGH",nt[nt.MED=2]="MED",nt[nt.LOW=3]="LOW",nt[nt.MIN=4]="MIN"})(i$2||(i$2={}));const l$1=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((nt,tt)=>(nt[tt.toLowerCase()]=tt,nt),{class:"className",for:"htmlFor"}),a={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"",quot:""},o=["style","script"],c$2=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,s=/mailto:/i,d=/\n{2,}$/,u$2=/^(\s*>[\s\S]*?)(?=\n\n|$)/,p$2=/^ *> ?/gm,f=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,h$2=/^ {2,}\n/,m$1=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,g=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,y=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,k$1=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,x=/^(?:\n *)*\n/,b=/\r\n?/g,v$1=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,C$1=/^\[\^([^\]]+)]/,$$1=/\f/g,S=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,w$1=/^\s*?\[(x|\s)\]/,E$1=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,z=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,L=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,A$1=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,T$1=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,B$1=/^<!--[\s\S]*?(?:-->)/,O=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,M=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,R=/^\{.*\}$/,I=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,U=/^<([^ >]+@[^ >]+)>/,D$1=/^<([^ >]+:\/[^ >]+)>/,N=/-([a-z])?/gi,j=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,H=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,P=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,F$1=/^\[([^\]]*)\] ?\[([^\]]*)\]/,_=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,G=/\t/g,W=/(^ *\||\| *$)/g,Z=/^ *:-+: *$/,q$3=/^ *:-+ *$/,Q$1=/^ *-+: *$/,V="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",X=new RegExp(`^([*_])\\1${V}\\1\\1(?!\\1)`),J=new RegExp(`^([*_])${V}\\1(?!\\1|\\w)`),K$1=new RegExp(`^==${V}==`),Y=new RegExp(`^~~${V}~~`),ee$1=/^\\([^0-9A-Za-z\s])/,te$1=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,ne=/^\n+/,re$1=/^([ \t]*)/,ie$1=/\\([^\\])/g,le=/ *\n+$/,ae=/(?:^|\n)( *)$/,oe$1="(?:\\d+\\.)",ce="(?:[*+-])";function se(nt){return"( *)("+(nt===1?oe$1:ce)+") +"}const de=se(1),ue=se(2);function pe$1(nt){return new RegExp("^"+(nt===1?de:ue))}const fe$1=pe$1(1),he=pe$1(2);function me$1(nt){return new RegExp("^"+(nt===1?de:ue)+"[^\\n]*(?:\\n(?!\\1"+(nt===1?oe$1:ce)+" )[^\\n]*)*(\\n|$)","gm")}const ge$1=me$1(1),ye=me$1(2);function ke$1(nt){const tt=nt===1?oe$1:ce;return new RegExp("^( *)("+tt+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+tt+" (?!"+tt+" ))\\n*|\\s*\\n*$)")}const xe=ke$1(1),be=ke$1(2);function ve(nt,tt){const rt=tt===1,st=rt?xe:be,at=rt?ge$1:ye,lt=rt?fe$1:he;return{match(dt,yt){const vt=ae.exec(yt.prevCapture);return vt&&(yt.list||!yt.inline&&!yt.simple)?st.exec(dt=vt[1]+dt):null},order:1,parse(dt,yt,vt){const _t=rt?+dt[2]:void 0,bt=dt[0].replace(d,`
`).match(at);let Mt=!1;return{items:bt.map(function(Ct,Tt){const $t=lt.exec(Ct)[0].length,Rt=new RegExp("^ {1,"+$t+"}","gm"),Et=Ct.replace(Rt,"").replace(lt,""),wt=Tt===bt.length-1,Pt=Et.indexOf(`

`)!==-1||wt&&Mt;Mt=Pt;const Ft=vt.inline,Nt=vt.list;let Ot;vt.list=!0,Pt?(vt.inline=!1,Ot=Et.replace(le,`

`)):(vt.inline=!0,Ot=Et.replace(le,""));const Bt=yt(Ot,vt);return vt.inline=Ft,vt.list=Nt,Bt}),ordered:rt,start:_t}},render:(dt,yt,vt)=>nt(dt.ordered?"ol":"ul",{key:vt.key,start:dt.type===r$2.orderedList?dt.start:void 0},dt.items.map(function(_t,bt){return nt("li",{key:bt},yt(_t,vt))}))}}const Ce$1=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),$e$1=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Se=[u$2,g,y,E$1,L,z,B$1,j,ge$1,xe,ye,be],we=[...Se,/^[^\n]+(?:  \n|\n{2,})/,A$1,M];function Ee(nt){return nt.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function ze(nt){return Q$1.test(nt)?"right":Z.test(nt)?"center":q$3.test(nt)?"left":null}function Le$1(nt,tt,rt,st){const at=rt.inTable;rt.inTable=!0;let lt=[[]],dt="";function yt(){if(!dt)return;const vt=lt[lt.length-1];vt.push.apply(vt,tt(dt,rt)),dt=""}return nt.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((vt,_t,bt)=>{vt.trim()==="|"&&(yt(),st)?_t!==0&&_t!==bt.length-1&&lt.push([]):dt+=vt}),yt(),rt.inTable=at,lt}function Ae$1(nt,tt,rt){rt.inline=!0;const st=nt[2]?nt[2].replace(W,"").split("|").map(ze):[],at=nt[3]?function(dt,yt,vt){return dt.trim().split(`
`).map(function(_t){return Le$1(_t,yt,vt,!0)})}(nt[3],tt,rt):[],lt=Le$1(nt[1],tt,rt,!!at.length);return rt.inline=!1,at.length?{align:st,cells:at,header:lt,type:r$2.table}:{children:lt,type:r$2.paragraph}}function Te$1(nt,tt){return nt.align[tt]==null?{}:{textAlign:nt.align[tt]}}function Be$1(nt){return function(tt,rt){return rt.inline?nt.exec(tt):null}}function Oe(nt){return function(tt,rt){return rt.inline||rt.simple?nt.exec(tt):null}}function Me$1(nt){return function(tt,rt){return rt.inline||rt.simple?null:nt.exec(tt)}}function Re$1(nt){return function(tt){return nt.exec(tt)}}function Ie$1(nt,tt){if(tt.inline||tt.simple)return null;let rt="";nt.split(`
`).every(at=>(at+=`
`,!Se.some(lt=>lt.test(at))&&(rt+=at,!!at.trim())));const st=rt.trimEnd();return st==""?null:[rt,st]}function Ue$1(nt){try{if(decodeURIComponent(nt).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return null}catch{return null}return nt}function De$1(nt){return nt.replace(ie$1,"$1")}function Ne$1(nt,tt,rt){const st=rt.inline||!1,at=rt.simple||!1;rt.inline=!0,rt.simple=!0;const lt=nt(tt,rt);return rt.inline=st,rt.simple=at,lt}function je$1(nt,tt,rt){const st=rt.inline||!1,at=rt.simple||!1;rt.inline=!1,rt.simple=!0;const lt=nt(tt,rt);return rt.inline=st,rt.simple=at,lt}function He$1(nt,tt,rt){const st=rt.inline||!1;rt.inline=!1;const at=nt(tt,rt);return rt.inline=st,at}const Pe$1=(nt,tt,rt)=>({children:Ne$1(tt,nt[1],rt)});function Fe$1(){return{}}function _e(){return null}function Ge(...nt){return nt.filter(Boolean).join(" ")}function We(nt,tt,rt){let st=nt;const at=tt.split(".");for(;at.length&&(st=st[at[0]],st!==void 0);)at.shift();return st||rt}function Ze(nt="",tt={}){function rt(Ct,Tt,...$t){const Rt=We(tt.overrides,`${Ct}.props`,{});return tt.createElement(function(Et,wt){const Pt=We(wt,Et);return Pt?typeof Pt=="function"||typeof Pt=="object"&&"render"in Pt?Pt:We(wt,`${Et}.component`,Et):Et}(Ct,tt.overrides),t$2({},Tt,Rt,{className:Ge(Tt==null?void 0:Tt.className,Rt.className)||void 0}),...$t)}function st(Ct){Ct=Ct.replace(S,"");let Tt=!1;tt.forceInline?Tt=!0:tt.forceBlock||(Tt=_.test(Ct)===!1);const $t=_t(vt(Tt?Ct:`${Ct.trimEnd().replace(ne,"")}

`,{inline:Tt}));for(;typeof $t[$t.length-1]=="string"&&!$t[$t.length-1].trim();)$t.pop();if(tt.wrapper===null)return $t;const Rt=tt.wrapper||(Tt?"span":"div");let Et;if($t.length>1||tt.forceWrapper)Et=$t;else{if($t.length===1)return Et=$t[0],typeof Et=="string"?rt("span",{key:"outer"},Et):Et;Et=null}return tt.createElement(Rt,{key:"outer"},Et)}function at(Ct,Tt){const $t=Tt.match(c$2);return $t?$t.reduce(function(Rt,Et){const wt=Et.indexOf("=");if(wt!==-1){const Pt=function(Bt){return Bt.indexOf("-")!==-1&&Bt.match(O)===null&&(Bt=Bt.replace(N,function(Xt,Zt){return Zt.toUpperCase()})),Bt}(Et.slice(0,wt)).trim(),Ft=function(Bt){const Xt=Bt[0];return(Xt==='"'||Xt==="'")&&Bt.length>=2&&Bt[Bt.length-1]===Xt?Bt.slice(1,-1):Bt}(Et.slice(wt+1).trim()),Nt=l$1[Pt]||Pt;if(Nt==="ref")return Rt;const Ot=Rt[Nt]=function(Bt,Xt,Zt,rn){return Xt==="style"?Zt.split(/;\s?/).reduce(function(Gt,nn){const cn=nn.slice(0,nn.indexOf(":"));return Gt[cn.trim().replace(/(-[a-z])/g,an=>an[1].toUpperCase())]=nn.slice(cn.length+1).trim(),Gt},{}):Xt==="href"||Xt==="src"?rn(Zt,Bt,Xt):(Zt.match(R)&&(Zt=Zt.slice(1,Zt.length-1)),Zt==="true"||Zt!=="false"&&Zt)}(Ct,Pt,Ft,tt.sanitizer);typeof Ot=="string"&&(A$1.test(Ot)||M.test(Ot))&&(Rt[Nt]=st(Ot.trim()))}else Et!=="style"&&(Rt[l$1[Et]||Et]=!0);return Rt},{}):null}tt.overrides=tt.overrides||{},tt.sanitizer=tt.sanitizer||Ue$1,tt.slugify=tt.slugify||Ee,tt.namedCodesToUnicode=tt.namedCodesToUnicode?t$2({},a,tt.namedCodesToUnicode):a,tt.createElement=tt.createElement||reactExports.createElement;const lt=[],dt={},yt={[r$2.blockQuote]:{match:Me$1(u$2),order:1,parse(Ct,Tt,$t){const[,Rt,Et]=Ct[0].replace(p$2,"").match(f);return{alert:Rt,children:Tt(Et,$t)}},render(Ct,Tt,$t){const Rt={key:$t.key};return Ct.alert&&(Rt.className="markdown-alert-"+tt.slugify(Ct.alert.toLowerCase(),Ee),Ct.children.unshift({attrs:{},children:[{type:r$2.text,text:Ct.alert}],noInnerParse:!0,type:r$2.htmlBlock,tag:"header"})),rt("blockquote",Rt,Tt(Ct.children,$t))}},[r$2.breakLine]:{match:Re$1(h$2),order:1,parse:Fe$1,render:(Ct,Tt,$t)=>rt("br",{key:$t.key})},[r$2.breakThematic]:{match:Me$1(m$1),order:1,parse:Fe$1,render:(Ct,Tt,$t)=>rt("hr",{key:$t.key})},[r$2.codeBlock]:{match:Me$1(y),order:0,parse:Ct=>({lang:void 0,text:Ct[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(Ct,Tt,$t)=>rt("pre",{key:$t.key},rt("code",t$2({},Ct.attrs,{className:Ct.lang?`lang-${Ct.lang}`:""}),Ct.text))},[r$2.codeFenced]:{match:Me$1(g),order:0,parse:Ct=>({attrs:at("code",Ct[3]||""),lang:Ct[2]||void 0,text:Ct[4],type:r$2.codeBlock})},[r$2.codeInline]:{match:Oe(k$1),order:3,parse:Ct=>({text:Ct[2]}),render:(Ct,Tt,$t)=>rt("code",{key:$t.key},Ct.text)},[r$2.footnote]:{match:Me$1(v$1),order:0,parse:Ct=>(lt.push({footnote:Ct[2],identifier:Ct[1]}),{}),render:_e},[r$2.footnoteReference]:{match:Be$1(C$1),order:1,parse:Ct=>({target:`#${tt.slugify(Ct[1],Ee)}`,text:Ct[1]}),render:(Ct,Tt,$t)=>rt("a",{key:$t.key,href:tt.sanitizer(Ct.target,"a","href")},rt("sup",{key:$t.key},Ct.text))},[r$2.gfmTask]:{match:Be$1(w$1),order:1,parse:Ct=>({completed:Ct[1].toLowerCase()==="x"}),render:(Ct,Tt,$t)=>rt("input",{checked:Ct.completed,key:$t.key,readOnly:!0,type:"checkbox"})},[r$2.heading]:{match:Me$1(tt.enforceAtxHeadings?z:E$1),order:1,parse:(Ct,Tt,$t)=>({children:Ne$1(Tt,Ct[2],$t),id:tt.slugify(Ct[2],Ee),level:Ct[1].length}),render:(Ct,Tt,$t)=>rt(`h${Ct.level}`,{id:Ct.id,key:$t.key},Tt(Ct.children,$t))},[r$2.headingSetext]:{match:Me$1(L),order:0,parse:(Ct,Tt,$t)=>({children:Ne$1(Tt,Ct[1],$t),level:Ct[2]==="="?1:2,type:r$2.heading})},[r$2.htmlBlock]:{match:Re$1(A$1),order:1,parse(Ct,Tt,$t){const[,Rt]=Ct[3].match(re$1),Et=new RegExp(`^${Rt}`,"gm"),wt=Ct[3].replace(Et,""),Pt=(Ft=wt,we.some(Zt=>Zt.test(Ft))?He$1:Ne$1);var Ft;const Nt=Ct[1].toLowerCase(),Ot=o.indexOf(Nt)!==-1,Bt=(Ot?Nt:Ct[1]).trim(),Xt={attrs:at(Bt,Ct[2]),noInnerParse:Ot,tag:Bt};return $t.inAnchor=$t.inAnchor||Nt==="a",Ot?Xt.text=Ct[3]:Xt.children=Pt(Tt,wt,$t),$t.inAnchor=!1,Xt},render:(Ct,Tt,$t)=>rt(Ct.tag,t$2({key:$t.key},Ct.attrs),Ct.text||(Ct.children?Tt(Ct.children,$t):""))},[r$2.htmlSelfClosing]:{match:Re$1(M),order:1,parse(Ct){const Tt=Ct[1].trim();return{attrs:at(Tt,Ct[2]||""),tag:Tt}},render:(Ct,Tt,$t)=>rt(Ct.tag,t$2({},Ct.attrs,{key:$t.key}))},[r$2.htmlComment]:{match:Re$1(B$1),order:1,parse:()=>({}),render:_e},[r$2.image]:{match:Oe($e$1),order:1,parse:Ct=>({alt:Ct[1],target:De$1(Ct[2]),title:Ct[3]}),render:(Ct,Tt,$t)=>rt("img",{key:$t.key,alt:Ct.alt||void 0,title:Ct.title||void 0,src:tt.sanitizer(Ct.target,"img","src")})},[r$2.link]:{match:Be$1(Ce$1),order:3,parse:(Ct,Tt,$t)=>({children:je$1(Tt,Ct[1],$t),target:De$1(Ct[2]),title:Ct[3]}),render:(Ct,Tt,$t)=>rt("a",{key:$t.key,href:tt.sanitizer(Ct.target,"a","href"),title:Ct.title},Tt(Ct.children,$t))},[r$2.linkAngleBraceStyleDetector]:{match:Be$1(D$1),order:0,parse:Ct=>({children:[{text:Ct[1],type:r$2.text}],target:Ct[1],type:r$2.link})},[r$2.linkBareUrlDetector]:{match:(Ct,Tt)=>Tt.inAnchor||tt.disableAutoLink?null:Be$1(I)(Ct,Tt),order:0,parse:Ct=>({children:[{text:Ct[1],type:r$2.text}],target:Ct[1],title:void 0,type:r$2.link})},[r$2.linkMailtoDetector]:{match:Be$1(U),order:0,parse(Ct){let Tt=Ct[1],$t=Ct[1];return s.test($t)||($t="mailto:"+$t),{children:[{text:Tt.replace("mailto:",""),type:r$2.text}],target:$t,type:r$2.link}}},[r$2.orderedList]:ve(rt,1),[r$2.unorderedList]:ve(rt,2),[r$2.newlineCoalescer]:{match:Me$1(x),order:3,parse:Fe$1,render:()=>`
`},[r$2.paragraph]:{match:Ie$1,order:3,parse:Pe$1,render:(Ct,Tt,$t)=>rt("p",{key:$t.key},Tt(Ct.children,$t))},[r$2.ref]:{match:Be$1(H),order:0,parse:Ct=>(dt[Ct[1]]={target:Ct[2],title:Ct[4]},{}),render:_e},[r$2.refImage]:{match:Oe(P),order:0,parse:Ct=>({alt:Ct[1]||void 0,ref:Ct[2]}),render:(Ct,Tt,$t)=>dt[Ct.ref]?rt("img",{key:$t.key,alt:Ct.alt,src:tt.sanitizer(dt[Ct.ref].target,"img","src"),title:dt[Ct.ref].title}):null},[r$2.refLink]:{match:Be$1(F$1),order:0,parse:(Ct,Tt,$t)=>({children:Tt(Ct[1],$t),fallbackChildren:Ct[0],ref:Ct[2]}),render:(Ct,Tt,$t)=>dt[Ct.ref]?rt("a",{key:$t.key,href:tt.sanitizer(dt[Ct.ref].target,"a","href"),title:dt[Ct.ref].title},Tt(Ct.children,$t)):rt("span",{key:$t.key},Ct.fallbackChildren)},[r$2.table]:{match:Me$1(j),order:1,parse:Ae$1,render(Ct,Tt,$t){const Rt=Ct;return rt("table",{key:$t.key},rt("thead",null,rt("tr",null,Rt.header.map(function(Et,wt){return rt("th",{key:wt,style:Te$1(Rt,wt)},Tt(Et,$t))}))),rt("tbody",null,Rt.cells.map(function(Et,wt){return rt("tr",{key:wt},Et.map(function(Pt,Ft){return rt("td",{key:Ft,style:Te$1(Rt,Ft)},Tt(Pt,$t))}))})))}},[r$2.text]:{match:Re$1(te$1),order:4,parse:Ct=>({text:Ct[0].replace(T$1,(Tt,$t)=>tt.namedCodesToUnicode[$t]?tt.namedCodesToUnicode[$t]:Tt)}),render:Ct=>Ct.text},[r$2.textBolded]:{match:Oe(X),order:2,parse:(Ct,Tt,$t)=>({children:Tt(Ct[2],$t)}),render:(Ct,Tt,$t)=>rt("strong",{key:$t.key},Tt(Ct.children,$t))},[r$2.textEmphasized]:{match:Oe(J),order:3,parse:(Ct,Tt,$t)=>({children:Tt(Ct[2],$t)}),render:(Ct,Tt,$t)=>rt("em",{key:$t.key},Tt(Ct.children,$t))},[r$2.textEscaped]:{match:Oe(ee$1),order:1,parse:Ct=>({text:Ct[1],type:r$2.text})},[r$2.textMarked]:{match:Oe(K$1),order:3,parse:Pe$1,render:(Ct,Tt,$t)=>rt("mark",{key:$t.key},Tt(Ct.children,$t))},[r$2.textStrikethroughed]:{match:Oe(Y),order:3,parse:Pe$1,render:(Ct,Tt,$t)=>rt("del",{key:$t.key},Tt(Ct.children,$t))}};tt.disableParsingRawHTML===!0&&(delete yt[r$2.htmlBlock],delete yt[r$2.htmlSelfClosing]);const vt=function(Ct){let Tt=Object.keys(Ct);function $t(Rt,Et){let wt=[];for(Et.prevCapture=Et.prevCapture||"";Rt;){let Pt=0;for(;Pt<Tt.length;){const Ft=Tt[Pt],Nt=Ct[Ft],Ot=Nt.match(Rt,Et);if(Ot){const Bt=Ot[0];Et.prevCapture+=Bt,Rt=Rt.substring(Bt.length);const Xt=Nt.parse(Ot,$t,Et);Xt.type==null&&(Xt.type=Ft),wt.push(Xt);break}Pt++}}return Et.prevCapture="",wt}return Tt.sort(function(Rt,Et){let wt=Ct[Rt].order,Pt=Ct[Et].order;return wt!==Pt?wt-Pt:Rt<Et?-1:1}),function(Rt,Et){return $t(function(wt){return wt.replace(b,`
`).replace($$1,"").replace(G,"    ")}(Rt),Et)}}(yt),_t=(bt=function(Ct,Tt){return function($t,Rt,Et){const wt=Ct[$t.type].render;return Tt?Tt(()=>wt($t,Rt,Et),$t,Rt,Et):wt($t,Rt,Et)}}(yt,tt.renderRule),function Ct(Tt,$t={}){if(Array.isArray(Tt)){const Rt=$t.key,Et=[];let wt=!1;for(let Pt=0;Pt<Tt.length;Pt++){$t.key=Pt;const Ft=Ct(Tt[Pt],$t),Nt=typeof Ft=="string";Nt&&wt?Et[Et.length-1]+=Ft:Ft!==null&&Et.push(Ft),wt=Nt}return $t.key=Rt,Et}return bt(Tt,Ct,$t)});var bt;const Mt=st(nt);return lt.length?rt("div",null,Mt,rt("footer",{key:"footer"},lt.map(function(Ct){return rt("div",{id:tt.slugify(Ct.identifier,Ee),key:Ct.identifier},Ct.identifier,_t(vt(Ct.footnote,{inline:!0})))}))):Mt}const Markdown=nt=>{let{children:tt="",options:rt}=nt,st=function(at,lt){if(at==null)return{};var dt,yt,vt={},_t=Object.keys(at);for(yt=0;yt<_t.length;yt++)lt.indexOf(dt=_t[yt])>=0||(vt[dt]=at[dt]);return vt}(nt,n$2);return reactExports.cloneElement(Ze(tt,rt),st)};var baseUnset=_baseUnset;function unset(nt,tt){return nt==null?!0:baseUnset(nt,tt)}var unset_1=unset;const unset$1=getDefaultExportFromCjs(unset_1);class ObjectField extends reactExports.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(tt,rt=!1)=>(st,at,lt)=>{const{formData:dt,onChange:yt,errorSchema:vt}=this.props;st===void 0&&rt&&(st="");const _t={...dt,[tt]:st};yt(_t,vt&&vt&&{...vt,[tt]:at},lt)},this.onDropPropertyClick=tt=>rt=>{rt.preventDefault();const{onChange:st,formData:at}=this.props,lt={...at};unset$1(lt,tt),st(lt)},this.getAvailableKey=(tt,rt)=>{const{uiSchema:st,registry:at}=this.props,{duplicateKeySuffixSeparator:lt="-"}=getUiOptions(st,at.globalUiOptions);let dt=0,yt=tt;for(;has$4(rt,yt);)yt=`${tt}${lt}${++dt}`;return yt},this.onKeyChange=tt=>(rt,st)=>{if(tt===rt)return;const{formData:at,onChange:lt,errorSchema:dt}=this.props;rt=this.getAvailableKey(rt,at);const yt={...at},vt={[tt]:rt},_t=Object.keys(yt).map(Mt=>({[vt[Mt]||Mt]:yt[Mt]})),bt=Object.assign({},..._t);this.setState({wasPropertyKeyModified:!0}),lt(bt,dt&&dt&&{...dt,[rt]:st})},this.handleAddClick=tt=>()=>{var rt;if(!tt.additionalProperties)return;const{formData:st,onChange:at,registry:lt}=this.props,dt={...st};let yt,vt,_t;if(isObject$f(tt.additionalProperties)){yt=tt.additionalProperties.type,vt=tt.additionalProperties.const,_t=tt.additionalProperties.default;let Ct=tt.additionalProperties;if(REF_KEY in Ct){const{schemaUtils:Tt}=lt;Ct=Tt.retrieveSchema({$ref:Ct[REF_KEY]},st),yt=Ct.type,vt=Ct.const,_t=Ct.default}!yt&&(ANY_OF_KEY in Ct||ONE_OF_KEY in Ct)&&(yt="object")}const bt=this.getAvailableKey("newKey",dt),Mt=(rt=vt??_t)!==null&&rt!==void 0?rt:this.getDefaultValue(yt);set$1(dt,bt,Mt),at(dt)}}isRequired(tt){const{schema:rt}=this.props;return Array.isArray(rt.required)&&rt.required.indexOf(tt)!==-1}getDefaultValue(tt){const{registry:{translateString:rt}}=this.props;switch(tt){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};case"string":default:return rt(TranslatableString.NewStringDefault)}}render(){var tt,rt,st,at;const{schema:lt,uiSchema:dt={},formData:yt,errorSchema:vt,idSchema:_t,name:bt,required:Mt=!1,disabled:Ct,readonly:Tt,hideError:$t,idPrefix:Rt,idSeparator:Et,onBlur:wt,onFocus:Pt,registry:Ft,title:Nt}=this.props,{fields:Ot,formContext:Bt,schemaUtils:Xt,translateString:Zt,globalUiOptions:rn}=Ft,{SchemaField:Gt}=Ot,nn=Xt.retrieveSchema(lt,yt),cn=getUiOptions(dt,rn),{properties:an={}}=nn,mn=(st=(rt=(tt=cn.title)!==null&&tt!==void 0?tt:nn.title)!==null&&rt!==void 0?rt:Nt)!==null&&st!==void 0?st:bt,En=(at=cn.description)!==null&&at!==void 0?at:nn.description;let Cn;try{const Tn=Object.keys(an);Cn=orderProperties(Tn,cn.order)}catch(Tn){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"config-error",style:{color:"red"},children:jsxRuntimeExports.jsx(Markdown,{options:{disableParsingRawHTML:!0},children:Zt(TranslatableString.InvalidObjectField,[bt||"root",Tn.message])})}),jsxRuntimeExports.jsx("pre",{children:JSON.stringify(nn)})]})}const Mn=getTemplate("ObjectFieldTemplate",Ft,cn),un={title:cn.label===!1?"":mn,description:cn.label===!1?void 0:En,properties:Cn.map(Tn=>{const Pn=has$4(nn,[PROPERTIES_KEY,Tn,ADDITIONAL_PROPERTY_FLAG]),dn=Pn?dt.additionalProperties:dt[Tn],Un=getUiOptions(dn).widget==="hidden",qn=_get(_t,[Tn],{});return{content:jsxRuntimeExports.jsx(Gt,{name:Tn,required:this.isRequired(Tn),schema:_get(nn,[PROPERTIES_KEY,Tn],{}),uiSchema:dn,errorSchema:_get(vt,Tn),idSchema:qn,idPrefix:Rt,idSeparator:Et,formData:_get(yt,Tn),formContext:Bt,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(Tn),onChange:this.onPropertyChange(Tn,Pn),onBlur:wt,onFocus:Pt,registry:Ft,disabled:Ct,readonly:Tt,hideError:$t,onDropPropertyClick:this.onDropPropertyClick},Tn),name:Tn,readonly:Tt,disabled:Ct,required:Mt,hidden:Un}}),readonly:Tt,disabled:Ct,required:Mt,idSchema:_t,uiSchema:dt,errorSchema:vt,schema:nn,formData:yt,formContext:Bt,registry:Ft};return jsxRuntimeExports.jsx(Mn,{...un,onAddClick:this.handleAddClick})}}const COMPONENT_TYPES={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function getFieldComponent(nt,tt,rt,st){const at=tt.field,{fields:lt,translateString:dt}=st;if(typeof at=="function")return at;if(typeof at=="string"&&at in lt)return lt[at];const yt=getSchemaType(nt),vt=Array.isArray(yt)?yt[0]:yt||"",_t=nt.$id;let bt=COMPONENT_TYPES[vt];return _t&&_t in lt&&(bt=_t),!bt&&(nt.anyOf||nt.oneOf)?()=>null:bt in lt?lt[bt]:()=>{const Mt=getTemplate("UnsupportedFieldTemplate",st,tt);return jsxRuntimeExports.jsx(Mt,{schema:nt,idSchema:rt,reason:dt(TranslatableString.UnknownFieldType,[String(nt.type)]),registry:st})}}function SchemaFieldRender(nt){var tt,rt,st;const{schema:at,idSchema:lt,uiSchema:dt,formData:yt,errorSchema:vt,idPrefix:_t,idSeparator:bt,name:Mt,onChange:Ct,onKeyChange:Tt,onDropPropertyClick:$t,required:Rt,registry:Et,wasPropertyKeyModified:wt=!1}=nt,{formContext:Pt,schemaUtils:Ft,globalUiOptions:Nt}=Et,Ot=getUiOptions(dt,Nt),Bt=getTemplate("FieldTemplate",Et,Ot),Xt=getTemplate("DescriptionFieldTemplate",Et,Ot),Zt=getTemplate("FieldHelpTemplate",Et,Ot),rn=getTemplate("FieldErrorTemplate",Et,Ot),Gt=Ft.retrieveSchema(at,yt),nn=lt[ID_KEY],cn=mergeObjects(Ft.toIdSchema(Gt,nn,yt,_t,bt),lt),an=reactExports.useCallback((Yr,cs,cr)=>Ct(Yr,cs,cr||nn),[nn,Ct]),mn=getFieldComponent(Gt,Ot,cn,Et),En=!!((tt=Ot.disabled)!==null&&tt!==void 0?tt:nt.disabled),Cn=!!((rt=Ot.readonly)!==null&&rt!==void 0?rt:nt.readonly||nt.schema.readOnly||Gt.readOnly),Mn=Ot.hideError,un=Mn===void 0?nt.hideError:!!Mn,Tn=!!((st=Ot.autofocus)!==null&&st!==void 0?st:nt.autofocus);if(Object.keys(Gt).length===0)return null;const Pn=Ft.getDisplayLabel(Gt,dt,Nt),{__errors:dn,...Un}=vt||{},qn=omit$1(dt,["ui:classNames","classNames","ui:style"]);UI_OPTIONS_KEY in qn&&(qn[UI_OPTIONS_KEY]=omit$1(qn[UI_OPTIONS_KEY],["classNames","style"]));const In=jsxRuntimeExports.jsx(mn,{...nt,onChange:an,idSchema:cn,schema:Gt,uiSchema:qn,disabled:En,readonly:Cn,hideError:un,autofocus:Tn,errorSchema:Un,formContext:Pt,rawErrors:dn}),Wn=cn[ID_KEY];let ar;wt?ar=Mt:ar=ADDITIONAL_PROPERTY_FLAG in Gt?Mt:Ot.title||nt.schema.title||Gt.title||nt.title||Mt;const fr=Ot.description||nt.schema.description||Gt.description||"",mr=Ot.enableMarkdownInDescription?jsxRuntimeExports.jsx(Markdown,{options:{disableParsingRawHTML:!0},children:fr}):fr,vr=Ot.help,Ar=Ot.widget==="hidden",$r=["form-group","field",`field-${getSchemaType(Gt)}`];!un&&dn&&dn.length>0&&$r.push("field-error has-error has-danger"),dt!=null&&dt.classNames&&$r.push(dt.classNames),Ot.classNames&&$r.push(Ot.classNames);const Mr=jsxRuntimeExports.jsx(Zt,{help:vr,idSchema:cn,schema:Gt,uiSchema:dt,hasErrors:!un&&dn&&dn.length>0,registry:Et}),Jn=un||(Gt.anyOf||Gt.oneOf)&&!Ft.isSelect(Gt)?void 0:jsxRuntimeExports.jsx(rn,{errors:dn,errorSchema:vt,idSchema:cn,schema:Gt,uiSchema:dt,registry:Et}),hr={description:jsxRuntimeExports.jsx(Xt,{id:descriptionId(Wn),description:mr,schema:Gt,uiSchema:dt,registry:Et}),rawDescription:fr,help:Mr,rawHelp:typeof vr=="string"?vr:void 0,errors:Jn,rawErrors:un?void 0:dn,id:Wn,label:ar,hidden:Ar,onChange:Ct,onKeyChange:Tt,onDropPropertyClick:$t,required:Rt,disabled:En,readonly:Cn,hideError:un,displayLabel:Pn,classNames:$r.join(" ").trim(),style:Ot.style,formContext:Pt,formData:yt,schema:Gt,uiSchema:dt,registry:Et},wr=Et.fields.AnyOfField,Nr=Et.fields.OneOfField,Fr=(dt==null?void 0:dt["ui:field"])&&(dt==null?void 0:dt["ui:fieldReplacesAnyOrOneOf"])===!0;return jsxRuntimeExports.jsx(Bt,{...hr,children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[In,Gt.anyOf&&!Fr&&!Ft.isSelect(Gt)&&jsxRuntimeExports.jsx(wr,{name:Mt,disabled:En,readonly:Cn,hideError:un,errorSchema:vt,formData:yt,formContext:Pt,idPrefix:_t,idSchema:cn,idSeparator:bt,onBlur:nt.onBlur,onChange:nt.onChange,onFocus:nt.onFocus,options:Gt.anyOf.map(Yr=>Ft.retrieveSchema(isObject$f(Yr)?Yr:{},yt)),registry:Et,required:Rt,schema:Gt,uiSchema:dt}),Gt.oneOf&&!Fr&&!Ft.isSelect(Gt)&&jsxRuntimeExports.jsx(Nr,{name:Mt,disabled:En,readonly:Cn,hideError:un,errorSchema:vt,formData:yt,formContext:Pt,idPrefix:_t,idSchema:cn,idSeparator:bt,onBlur:nt.onBlur,onChange:nt.onChange,onFocus:nt.onFocus,options:Gt.oneOf.map(Yr=>Ft.retrieveSchema(isObject$f(Yr)?Yr:{},yt)),registry:Et,required:Rt,schema:Gt,uiSchema:dt})]})})}class SchemaField extends reactExports.Component{shouldComponentUpdate(tt){return!deepEquals(this.props,tt)}render(){return jsxRuntimeExports.jsx(SchemaFieldRender,{...this.props})}}function StringField(nt){var tt;const{schema:rt,name:st,uiSchema:at,idSchema:lt,formData:dt,required:yt,disabled:vt=!1,readonly:_t=!1,autofocus:bt=!1,onChange:Mt,onBlur:Ct,onFocus:Tt,registry:$t,rawErrors:Rt,hideError:Et}=nt,{title:wt,format:Pt}=rt,{widgets:Ft,formContext:Nt,schemaUtils:Ot,globalUiOptions:Bt}=$t,Xt=Ot.isSelect(rt)?optionsList(rt,at):void 0;let Zt=Xt?"select":"text";Pt&&hasWidget(rt,Pt,Ft)&&(Zt=Pt);const{widget:rn=Zt,placeholder:Gt="",title:nn,...cn}=getUiOptions(at),an=Ot.getDisplayLabel(rt,at,Bt),mn=(tt=nn??wt)!==null&&tt!==void 0?tt:st,En=getWidget(rt,rn,Ft);return jsxRuntimeExports.jsx(En,{options:{...cn,enumOptions:Xt},schema:rt,uiSchema:at,id:lt.$id,name:st,label:mn,hideLabel:!an,hideError:Et,value:dt,onChange:Mt,onBlur:Ct,onFocus:Tt,required:yt,disabled:vt,readonly:_t,formContext:Nt,autofocus:bt,registry:$t,placeholder:Gt,rawErrors:Rt})}function NullField(nt){const{formData:tt,onChange:rt}=nt;return reactExports.useEffect(()=>{tt===void 0&&rt(null)},[tt,rt]),null}function fields(){return{AnyOfField,ArrayField,BooleanField,NumberField,ObjectField,OneOfField:AnyOfField,SchemaField,StringField,NullField}}function ArrayFieldDescriptionTemplate(nt){const{idSchema:tt,description:rt,registry:st,schema:at,uiSchema:lt}=nt,dt=getUiOptions(lt,st.globalUiOptions),{label:yt=!0}=dt;if(!rt||!yt)return null;const vt=getTemplate("DescriptionFieldTemplate",st,dt);return jsxRuntimeExports.jsx(vt,{id:descriptionId(tt),description:rt,schema:at,uiSchema:lt,registry:st})}function ArrayFieldItemTemplate$1(nt){const{children:tt,className:rt,disabled:st,hasToolbar:at,hasMoveDown:lt,hasMoveUp:dt,hasRemove:yt,hasCopy:vt,index:_t,onCopyIndexClick:bt,onDropIndexClick:Mt,onReorderClick:Ct,readonly:Tt,registry:$t,uiSchema:Rt}=nt,{CopyButton:Et,MoveDownButton:wt,MoveUpButton:Pt,RemoveButton:Ft}=$t.templates.ButtonTemplates,Nt={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return jsxRuntimeExports.jsxs("div",{className:rt,children:[jsxRuntimeExports.jsx("div",{className:at?"col-xs-9":"col-xs-12",children:tt}),at&&jsxRuntimeExports.jsx("div",{className:"col-xs-3 array-item-toolbox",children:jsxRuntimeExports.jsxs("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(dt||lt)&&jsxRuntimeExports.jsx(Pt,{style:Nt,disabled:st||Tt||!dt,onClick:Ct(_t,_t-1),uiSchema:Rt,registry:$t}),(dt||lt)&&jsxRuntimeExports.jsx(wt,{style:Nt,disabled:st||Tt||!lt,onClick:Ct(_t,_t+1),uiSchema:Rt,registry:$t}),vt&&jsxRuntimeExports.jsx(Et,{style:Nt,disabled:st||Tt,onClick:bt(_t),uiSchema:Rt,registry:$t}),yt&&jsxRuntimeExports.jsx(Ft,{style:Nt,disabled:st||Tt,onClick:Mt(_t),uiSchema:Rt,registry:$t})]})})]})}function ArrayFieldTemplate$1(nt){const{canAdd:tt,className:rt,disabled:st,idSchema:at,uiSchema:lt,items:dt,onAddClick:yt,readonly:vt,registry:_t,required:bt,schema:Mt,title:Ct}=nt,Tt=getUiOptions(lt),$t=getTemplate("ArrayFieldDescriptionTemplate",_t,Tt),Rt=getTemplate("ArrayFieldItemTemplate",_t,Tt),Et=getTemplate("ArrayFieldTitleTemplate",_t,Tt),{ButtonTemplates:{AddButton:wt}}=_t.templates;return jsxRuntimeExports.jsxs("fieldset",{className:rt,id:at.$id,children:[jsxRuntimeExports.jsx(Et,{idSchema:at,title:Tt.title||Ct,required:bt,schema:Mt,uiSchema:lt,registry:_t}),jsxRuntimeExports.jsx($t,{idSchema:at,description:Tt.description||Mt.description,schema:Mt,uiSchema:lt,registry:_t}),jsxRuntimeExports.jsx("div",{className:"row array-item-list",children:dt&&dt.map(({key:Pt,...Ft})=>jsxRuntimeExports.jsx(Rt,{...Ft},Pt))}),tt&&jsxRuntimeExports.jsx(wt,{className:"array-item-add",onClick:yt,disabled:st||vt,uiSchema:lt,registry:_t})]})}function ArrayFieldTitleTemplate(nt){const{idSchema:tt,title:rt,schema:st,uiSchema:at,required:lt,registry:dt}=nt,yt=getUiOptions(at,dt.globalUiOptions),{label:vt=!0}=yt;if(!rt||!vt)return null;const _t=getTemplate("TitleFieldTemplate",dt,yt);return jsxRuntimeExports.jsx(_t,{id:titleId(tt),title:rt,required:lt,schema:st,uiSchema:at,registry:dt})}function BaseInputTemplate$1(nt){const{id:tt,name:rt,value:st,readonly:at,disabled:lt,autofocus:dt,onBlur:yt,onFocus:vt,onChange:_t,onChangeOverride:bt,options:Mt,schema:Ct,uiSchema:Tt,formContext:$t,registry:Rt,rawErrors:Et,type:wt,hideLabel:Pt,hideError:Ft,...Nt}=nt;if(!tt)throw console.log("No id for",nt),new Error(`no id for props ${JSON.stringify(nt)}`);const Ot={...Nt,...getInputProps(Ct,wt,Mt)};let Bt;Ot.type==="number"||Ot.type==="integer"?Bt=st||st===0?st:"":Bt=st??"";const Xt=reactExports.useCallback(({target:{value:Gt}})=>_t(Gt===""?Mt.emptyValue:Gt),[_t,Mt]),Zt=reactExports.useCallback(({target:Gt})=>yt(tt,Gt&&Gt.value),[yt,tt]),rn=reactExports.useCallback(({target:Gt})=>vt(tt,Gt&&Gt.value),[vt,tt]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{id:tt,name:tt,className:"form-control",readOnly:at,disabled:lt,autoFocus:dt,value:Bt,...Ot,list:Ct.examples?examplesId(tt):void 0,onChange:bt||Xt,onBlur:Zt,onFocus:rn,"aria-describedby":ariaDescribedByIds(tt,!!Ct.examples)}),Array.isArray(Ct.examples)&&jsxRuntimeExports.jsx("datalist",{id:examplesId(tt),children:Ct.examples.concat(Ct.default&&!Ct.examples.includes(Ct.default)?[Ct.default]:[]).map(Gt=>jsxRuntimeExports.jsx("option",{value:Gt},Gt))},`datalist_${tt}`)]})}function SubmitButton$1({uiSchema:nt}){const{submitText:tt,norender:rt,props:st={}}=getSubmitButtonOptions(nt);return rt?null:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{type:"submit",...st,className:`btn btn-info ${st.className||""}`,children:tt})})}function IconButton(nt){const{iconType:tt="default",icon:rt,className:st,uiSchema:at,registry:lt,...dt}=nt;return jsxRuntimeExports.jsx("button",{type:"button",className:`btn btn-${tt} ${st}`,...dt,children:jsxRuntimeExports.jsx("i",{className:`glyphicon glyphicon-${rt}`})})}function CopyButton$1(nt){const{registry:{translateString:tt}}=nt;return jsxRuntimeExports.jsx(IconButton,{title:tt(TranslatableString.CopyButton),className:"array-item-copy",...nt,icon:"copy"})}function MoveDownButton$1(nt){const{registry:{translateString:tt}}=nt;return jsxRuntimeExports.jsx(IconButton,{title:tt(TranslatableString.MoveDownButton),className:"array-item-move-down",...nt,icon:"arrow-down"})}function MoveUpButton$1(nt){const{registry:{translateString:tt}}=nt;return jsxRuntimeExports.jsx(IconButton,{title:tt(TranslatableString.MoveUpButton),className:"array-item-move-up",...nt,icon:"arrow-up"})}function RemoveButton$1(nt){const{registry:{translateString:tt}}=nt;return jsxRuntimeExports.jsx(IconButton,{title:tt(TranslatableString.RemoveButton),className:"array-item-remove",...nt,iconType:"danger",icon:"remove"})}function AddButton$1({className:nt,onClick:tt,disabled:rt,registry:st}){const{translateString:at}=st;return jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx("p",{className:`col-xs-3 col-xs-offset-9 text-right ${nt}`,children:jsxRuntimeExports.jsx(IconButton,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:at(TranslatableString.AddButton),onClick:tt,disabled:rt,registry:st})})})}function buttonTemplates(){return{SubmitButton:SubmitButton$1,AddButton:AddButton$1,CopyButton:CopyButton$1,MoveDownButton:MoveDownButton$1,MoveUpButton:MoveUpButton$1,RemoveButton:RemoveButton$1}}function DescriptionField$1(nt){const{id:tt,description:rt}=nt;return rt?typeof rt=="string"?jsxRuntimeExports.jsx("p",{id:tt,className:"field-description",children:rt}):jsxRuntimeExports.jsx("div",{id:tt,className:"field-description",children:rt}):null}function ErrorList$1({errors:nt,registry:tt}){const{translateString:rt}=tt;return jsxRuntimeExports.jsxs("div",{className:"panel panel-danger errors",children:[jsxRuntimeExports.jsx("div",{className:"panel-heading",children:jsxRuntimeExports.jsx("h3",{className:"panel-title",children:rt(TranslatableString.ErrorsLabel)})}),jsxRuntimeExports.jsx("ul",{className:"list-group",children:nt.map((st,at)=>jsxRuntimeExports.jsx("li",{className:"list-group-item text-danger",children:st.stack},at))})]})}const REQUIRED_FIELD_SYMBOL$1="*";function Label(nt){const{label:tt,required:rt,id:st}=nt;return tt?jsxRuntimeExports.jsxs("label",{className:"control-label",htmlFor:st,children:[tt,rt&&jsxRuntimeExports.jsx("span",{className:"required",children:REQUIRED_FIELD_SYMBOL$1})]}):null}function FieldTemplate$1(nt){const{id:tt,label:rt,children:st,errors:at,help:lt,description:dt,hidden:yt,required:vt,displayLabel:_t,registry:bt,uiSchema:Mt}=nt,Ct=getUiOptions(Mt),Tt=getTemplate("WrapIfAdditionalTemplate",bt,Ct);return yt?jsxRuntimeExports.jsx("div",{className:"hidden",children:st}):jsxRuntimeExports.jsxs(Tt,{...nt,children:[_t&&jsxRuntimeExports.jsx(Label,{label:rt,required:vt,id:tt}),_t&&dt?dt:null,st,at,lt]})}function FieldErrorTemplate$1(nt){const{errors:tt=[],idSchema:rt}=nt;if(tt.length===0)return null;const st=errorId(rt);return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("ul",{id:st,className:"error-detail bs-callout bs-callout-info",children:tt.filter(at=>!!at).map((at,lt)=>jsxRuntimeExports.jsx("li",{className:"text-danger",children:at},lt))})})}function FieldHelpTemplate$1(nt){const{idSchema:tt,help:rt}=nt;if(!rt)return null;const st=helpId(tt);return typeof rt=="string"?jsxRuntimeExports.jsx("p",{id:st,className:"help-block",children:rt}):jsxRuntimeExports.jsx("div",{id:st,className:"help-block",children:rt})}function ObjectFieldTemplate$1(nt){const{description:tt,disabled:rt,formData:st,idSchema:at,onAddClick:lt,properties:dt,readonly:yt,registry:vt,required:_t,schema:bt,title:Mt,uiSchema:Ct}=nt,Tt=getUiOptions(Ct),$t=getTemplate("TitleFieldTemplate",vt,Tt),Rt=getTemplate("DescriptionFieldTemplate",vt,Tt),{ButtonTemplates:{AddButton:Et}}=vt.templates;return jsxRuntimeExports.jsxs("fieldset",{id:at.$id,children:[Mt&&jsxRuntimeExports.jsx($t,{id:titleId(at),title:Mt,required:_t,schema:bt,uiSchema:Ct,registry:vt}),tt&&jsxRuntimeExports.jsx(Rt,{id:descriptionId(at),description:tt,schema:bt,uiSchema:Ct,registry:vt}),dt.map(wt=>wt.content),canExpand(bt,Ct,st)&&jsxRuntimeExports.jsx(Et,{className:"object-property-expand",onClick:lt(bt),disabled:rt||yt,uiSchema:Ct,registry:vt})]})}const REQUIRED_FIELD_SYMBOL="*";function TitleField$1(nt){const{id:tt,title:rt,required:st}=nt;return jsxRuntimeExports.jsxs("legend",{id:tt,children:[rt,st&&jsxRuntimeExports.jsx("span",{className:"required",children:REQUIRED_FIELD_SYMBOL})]})}function UnsupportedField(nt){const{schema:tt,idSchema:rt,reason:st,registry:at}=nt,{translateString:lt}=at;let dt=TranslatableString.UnsupportedField;const yt=[];return rt&&rt.$id&&(dt=TranslatableString.UnsupportedFieldWithId,yt.push(rt.$id)),st&&(dt=dt===TranslatableString.UnsupportedField?TranslatableString.UnsupportedFieldWithReason:TranslatableString.UnsupportedFieldWithIdAndReason,yt.push(st)),jsxRuntimeExports.jsxs("div",{className:"unsupported-field",children:[jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(Markdown,{options:{disableParsingRawHTML:!0},children:lt(dt,yt)})}),tt&&jsxRuntimeExports.jsx("pre",{children:JSON.stringify(tt,null,2)})]})}function WrapIfAdditionalTemplate$1(nt){const{id:tt,classNames:rt,style:st,disabled:at,label:lt,onKeyChange:dt,onDropPropertyClick:yt,readonly:vt,required:_t,schema:bt,children:Mt,uiSchema:Ct,registry:Tt}=nt,{templates:$t,translateString:Rt}=Tt,{RemoveButton:Et}=$t.ButtonTemplates,wt=Rt(TranslatableString.KeyLabel,[lt]);return ADDITIONAL_PROPERTY_FLAG in bt?jsxRuntimeExports.jsx("div",{className:rt,style:st,children:jsxRuntimeExports.jsxs("div",{className:"row",children:[jsxRuntimeExports.jsx("div",{className:"col-xs-5 form-additional",children:jsxRuntimeExports.jsxs("div",{className:"form-group",children:[jsxRuntimeExports.jsx(Label,{label:wt,required:_t,id:`${tt}-key`}),jsxRuntimeExports.jsx("input",{className:"form-control",type:"text",id:`${tt}-key`,onBlur:({target:Ft})=>dt(Ft&&Ft.value),defaultValue:lt})]})}),jsxRuntimeExports.jsx("div",{className:"form-additional form-group col-xs-5",children:Mt}),jsxRuntimeExports.jsx("div",{className:"col-xs-2",children:jsxRuntimeExports.jsx(Et,{className:"array-item-remove btn-block",style:{border:"0"},disabled:at||vt,onClick:yt(lt),uiSchema:Ct,registry:Tt})})]})}):jsxRuntimeExports.jsx("div",{className:rt,style:st,children:Mt})}function templates(){return{ArrayFieldDescriptionTemplate,ArrayFieldItemTemplate:ArrayFieldItemTemplate$1,ArrayFieldTemplate:ArrayFieldTemplate$1,ArrayFieldTitleTemplate,ButtonTemplates:buttonTemplates(),BaseInputTemplate:BaseInputTemplate$1,DescriptionFieldTemplate:DescriptionField$1,ErrorListTemplate:ErrorList$1,FieldTemplate:FieldTemplate$1,FieldErrorTemplate:FieldErrorTemplate$1,FieldHelpTemplate:FieldHelpTemplate$1,ObjectFieldTemplate:ObjectFieldTemplate$1,TitleFieldTemplate:TitleField$1,UnsupportedFieldTemplate:UnsupportedField,WrapIfAdditionalTemplate:WrapIfAdditionalTemplate$1}}function readyForChange(nt){return Object.values(nt).every(tt=>tt!==-1)}function DateElement({type:nt,range:tt,value:rt,select:st,rootId:at,name:lt,disabled:dt,readonly:yt,autofocus:vt,registry:_t,onBlur:bt,onFocus:Mt}){const Ct=at+"_"+nt,{SelectWidget:Tt}=_t.widgets;return jsxRuntimeExports.jsx(Tt,{schema:{type:"integer"},id:Ct,name:lt,className:"form-control",options:{enumOptions:dateRangeOptions(tt[0],tt[1])},placeholder:nt,value:rt,disabled:dt,readonly:yt,autofocus:vt,onChange:$t=>st(nt,$t),onBlur:bt,onFocus:Mt,registry:_t,label:"","aria-describedby":ariaDescribedByIds(at)})}function AltDateWidget({time:nt=!1,disabled:tt=!1,readonly:rt=!1,autofocus:st=!1,options:at,id:lt,name:dt,registry:yt,onBlur:vt,onFocus:_t,onChange:bt,value:Mt}){const{translateString:Ct}=yt,[Tt,$t]=reactExports.useState(Mt),[Rt,Et]=reactExports.useReducer((Nt,Ot)=>({...Nt,...Ot}),parseDateString(Mt,nt));reactExports.useEffect(()=>{const Nt=toDateString(Rt,nt);readyForChange(Rt)&&Nt!==Mt?bt(Nt):Tt!==Mt&&($t(Mt),Et(parseDateString(Mt,nt)))},[nt,Mt,bt,Rt,Tt]);const wt=reactExports.useCallback((Nt,Ot)=>{Et({[Nt]:Ot})},[]),Pt=reactExports.useCallback(Nt=>{if(Nt.preventDefault(),tt||rt)return;const Ot=parseDateString(new Date().toJSON(),nt);bt(toDateString(Ot,nt))},[tt,rt,nt]),Ft=reactExports.useCallback(Nt=>{Nt.preventDefault(),!(tt||rt)&&bt(void 0)},[tt,rt,bt]);return jsxRuntimeExports.jsxs("ul",{className:"list-inline",children:[getDateElementProps(Rt,nt,at.yearsRange,at.format).map((Nt,Ot)=>jsxRuntimeExports.jsx("li",{className:"list-inline-item",children:jsxRuntimeExports.jsx(DateElement,{rootId:lt,name:dt,select:wt,...Nt,disabled:tt,readonly:rt,registry:yt,onBlur:vt,onFocus:_t,autofocus:st&&Ot===0})},Ot)),(at.hideNowButton!=="undefined"?!at.hideNowButton:!0)&&jsxRuntimeExports.jsx("li",{className:"list-inline-item",children:jsxRuntimeExports.jsx("a",{href:"#",className:"btn btn-info btn-now",onClick:Pt,children:Ct(TranslatableString.NowLabel)})}),(at.hideClearButton!=="undefined"?!at.hideClearButton:!0)&&jsxRuntimeExports.jsx("li",{className:"list-inline-item",children:jsxRuntimeExports.jsx("a",{href:"#",className:"btn btn-warning btn-clear",onClick:Ft,children:Ct(TranslatableString.ClearLabel)})})]})}function AltDateTimeWidget({time:nt=!0,...tt}){const{AltDateWidget:rt}=tt.registry.widgets;return jsxRuntimeExports.jsx(rt,{time:nt,...tt})}function CheckboxWidget$1({schema:nt,uiSchema:tt,options:rt,id:st,value:at,disabled:lt,readonly:dt,label:yt,hideLabel:vt,autofocus:_t=!1,onBlur:bt,onFocus:Mt,onChange:Ct,registry:Tt}){var $t;const Rt=getTemplate("DescriptionFieldTemplate",Tt,rt),Et=schemaRequiresTrueValue(nt),wt=reactExports.useCallback(Ot=>Ct(Ot.target.checked),[Ct]),Pt=reactExports.useCallback(Ot=>bt(st,Ot.target.checked),[bt,st]),Ft=reactExports.useCallback(Ot=>Mt(st,Ot.target.checked),[Mt,st]),Nt=($t=rt.description)!==null&&$t!==void 0?$t:nt.description;return jsxRuntimeExports.jsxs("div",{className:`checkbox ${lt||dt?"disabled":""}`,children:[!vt&&!!Nt&&jsxRuntimeExports.jsx(Rt,{id:descriptionId(st),description:Nt,schema:nt,uiSchema:tt,registry:Tt}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:st,name:st,checked:typeof at>"u"?!1:at,required:Et,disabled:lt||dt,autoFocus:_t,onChange:wt,onBlur:Pt,onFocus:Ft,"aria-describedby":ariaDescribedByIds(st)}),labelValue(jsxRuntimeExports.jsx("span",{children:yt}),vt)]})]})}function CheckboxesWidget$1({id:nt,disabled:tt,options:{inline:rt=!1,enumOptions:st,enumDisabled:at,emptyValue:lt},value:dt,autofocus:yt=!1,readonly:vt,onChange:_t,onBlur:bt,onFocus:Mt}){const Ct=Array.isArray(dt)?dt:[dt],Tt=reactExports.useCallback(({target:Rt})=>bt(nt,enumOptionsValueForIndex(Rt&&Rt.value,st,lt)),[bt,nt]),$t=reactExports.useCallback(({target:Rt})=>Mt(nt,enumOptionsValueForIndex(Rt&&Rt.value,st,lt)),[Mt,nt]);return jsxRuntimeExports.jsx("div",{className:"checkboxes",id:nt,children:Array.isArray(st)&&st.map((Rt,Et)=>{const wt=enumOptionsIsSelected(Rt.value,Ct),Pt=Array.isArray(at)&&at.indexOf(Rt.value)!==-1,Ft=tt||Pt||vt?"disabled":"",Nt=Bt=>{Bt.target.checked?_t(enumOptionsSelectValue(Et,Ct,st)):_t(enumOptionsDeselectValue(Et,Ct,st))},Ot=jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:optionId(nt,Et),name:nt,checked:wt,value:String(Et),disabled:tt||Pt||vt,autoFocus:yt&&Et===0,onChange:Nt,onBlur:Tt,onFocus:$t,"aria-describedby":ariaDescribedByIds(nt)}),jsxRuntimeExports.jsx("span",{children:Rt.label})]});return rt?jsxRuntimeExports.jsx("label",{className:`checkbox-inline ${Ft}`,children:Ot},Et):jsxRuntimeExports.jsx("div",{className:`checkbox ${Ft}`,children:jsxRuntimeExports.jsx("label",{children:Ot})},Et)})})}function ColorWidget(nt){const{disabled:tt,readonly:rt,options:st,registry:at}=nt,lt=getTemplate("BaseInputTemplate",at,st);return jsxRuntimeExports.jsx(lt,{type:"color",...nt,disabled:tt||rt})}function DateWidget(nt){const{onChange:tt,options:rt,registry:st}=nt,at=getTemplate("BaseInputTemplate",st,rt),lt=reactExports.useCallback(dt=>tt(dt||void 0),[tt]);return jsxRuntimeExports.jsx(at,{type:"date",...nt,onChange:lt})}function DateTimeWidget(nt){const{onChange:tt,value:rt,options:st,registry:at}=nt,lt=getTemplate("BaseInputTemplate",at,st);return jsxRuntimeExports.jsx(lt,{type:"datetime-local",...nt,value:utcToLocal(rt),onChange:dt=>tt(localToUTC(dt))})}function EmailWidget(nt){const{options:tt,registry:rt}=nt,st=getTemplate("BaseInputTemplate",rt,tt);return jsxRuntimeExports.jsx(st,{type:"email",...nt})}function addNameToDataURL(nt,tt){return nt===null?null:nt.replace(";base64",`;name=${encodeURIComponent(tt)};base64`)}function processFile(nt){const{name:tt,size:rt,type:st}=nt;return new Promise((at,lt)=>{const dt=new window.FileReader;dt.onerror=lt,dt.onload=yt=>{var vt;typeof((vt=yt.target)===null||vt===void 0?void 0:vt.result)=="string"?at({dataURL:addNameToDataURL(yt.target.result,tt),name:tt,size:rt,type:st}):at({dataURL:null,name:tt,size:rt,type:st})},dt.readAsDataURL(nt)})}function processFiles(nt){return Promise.all(Array.from(nt).map(processFile))}function FileInfoPreview({fileInfo:nt,registry:tt}){const{translateString:rt}=tt,{dataURL:st,type:at,name:lt}=nt;return st?["image/jpeg","image/png"].includes(at)?jsxRuntimeExports.jsx("img",{src:st,style:{maxWidth:"100%"},className:"file-preview"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[" ",jsxRuntimeExports.jsx("a",{download:`preview-${lt}`,href:st,className:"file-download",children:rt(TranslatableString.PreviewLabel)})]}):null}function FilesInfo({filesInfo:nt,registry:tt,preview:rt,onRemove:st,options:at}){if(nt.length===0)return null;const{translateString:lt}=tt,{RemoveButton:dt}=getTemplate("ButtonTemplates",tt,at);return jsxRuntimeExports.jsx("ul",{className:"file-info",children:nt.map((yt,vt)=>{const{name:_t,size:bt,type:Mt}=yt,Ct=()=>st(vt);return jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx(Markdown,{children:lt(TranslatableString.FilesInfo,[_t,Mt,String(bt)])}),rt&&jsxRuntimeExports.jsx(FileInfoPreview,{fileInfo:yt,registry:tt}),jsxRuntimeExports.jsx(dt,{onClick:Ct,registry:tt})]},vt)})})}function extractFileInfo(nt){return nt.reduce((tt,rt)=>{if(!rt)return tt;try{const{blob:st,name:at}=dataURItoBlob(rt);return[...tt,{dataURL:rt,name:at,size:st.size,type:st.type}]}catch{return tt}},[])}function FileWidget(nt){const{disabled:tt,readonly:rt,required:st,multiple:at,onChange:lt,value:dt,options:yt,registry:vt}=nt,_t=getTemplate("BaseInputTemplate",vt,yt),bt=reactExports.useCallback(Tt=>{Tt.target.files&&processFiles(Tt.target.files).then($t=>{const Rt=$t.map(Et=>Et.dataURL);lt(at?dt.concat(Rt):Rt[0])})},[at,dt,lt]),Mt=reactExports.useMemo(()=>extractFileInfo(Array.isArray(dt)?dt:[dt]),[dt]),Ct=reactExports.useCallback(Tt=>{if(at){const $t=dt.filter((Rt,Et)=>Et!==Tt);lt($t)}else lt(void 0)},[at,dt,lt]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(_t,{...nt,disabled:tt||rt,type:"file",required:dt?!1:st,onChangeOverride:bt,value:"",accept:yt.accept?String(yt.accept):void 0}),jsxRuntimeExports.jsx(FilesInfo,{filesInfo:Mt,onRemove:Ct,registry:vt,preview:yt.filePreview,options:yt})]})}function HiddenWidget({id:nt,value:tt}){return jsxRuntimeExports.jsx("input",{type:"hidden",id:nt,name:nt,value:typeof tt>"u"?"":tt})}function PasswordWidget(nt){const{options:tt,registry:rt}=nt,st=getTemplate("BaseInputTemplate",rt,tt);return jsxRuntimeExports.jsx(st,{type:"password",...nt})}function RadioWidget$1({options:nt,value:tt,required:rt,disabled:st,readonly:at,autofocus:lt=!1,onBlur:dt,onFocus:yt,onChange:vt,id:_t}){const{enumOptions:bt,enumDisabled:Mt,inline:Ct,emptyValue:Tt}=nt,$t=reactExports.useCallback(({target:Et})=>dt(_t,enumOptionsValueForIndex(Et&&Et.value,bt,Tt)),[dt,_t]),Rt=reactExports.useCallback(({target:Et})=>yt(_t,enumOptionsValueForIndex(Et&&Et.value,bt,Tt)),[yt,_t]);return jsxRuntimeExports.jsx("div",{className:"field-radio-group",id:_t,children:Array.isArray(bt)&&bt.map((Et,wt)=>{const Pt=enumOptionsIsSelected(Et.value,tt),Ft=Array.isArray(Mt)&&Mt.indexOf(Et.value)!==-1,Nt=st||Ft||at?"disabled":"",Ot=()=>vt(Et.value),Bt=jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("input",{type:"radio",id:optionId(_t,wt),checked:Pt,name:_t,required:rt,value:String(wt),disabled:st||Ft||at,autoFocus:lt&&wt===0,onChange:Ot,onBlur:$t,onFocus:Rt,"aria-describedby":ariaDescribedByIds(_t)}),jsxRuntimeExports.jsx("span",{children:Et.label})]});return Ct?jsxRuntimeExports.jsx("label",{className:`radio-inline ${Nt}`,children:Bt},wt):jsxRuntimeExports.jsx("div",{className:`radio ${Nt}`,children:jsxRuntimeExports.jsx("label",{children:Bt})},wt)})})}function RangeWidget$1(nt){const{value:tt,registry:{templates:{BaseInputTemplate:rt}}}=nt;return jsxRuntimeExports.jsxs("div",{className:"field-range-wrapper",children:[jsxRuntimeExports.jsx(rt,{type:"range",...nt}),jsxRuntimeExports.jsx("span",{className:"range-view",children:tt})]})}function getValue(nt,tt){return tt?Array.from(nt.target.options).slice().filter(rt=>rt.selected).map(rt=>rt.value):nt.target.value}function SelectWidget$1({schema:nt,id:tt,options:rt,value:st,required:at,disabled:lt,readonly:dt,multiple:yt=!1,autofocus:vt=!1,onChange:_t,onBlur:bt,onFocus:Mt,placeholder:Ct}){const{enumOptions:Tt,enumDisabled:$t,emptyValue:Rt}=rt,Et=yt?[]:"",wt=reactExports.useCallback(Bt=>{const Xt=getValue(Bt,yt);return Mt(tt,enumOptionsValueForIndex(Xt,Tt,Rt))},[Mt,tt,nt,yt,Tt,Rt]),Pt=reactExports.useCallback(Bt=>{const Xt=getValue(Bt,yt);return bt(tt,enumOptionsValueForIndex(Xt,Tt,Rt))},[bt,tt,nt,yt,Tt,Rt]),Ft=reactExports.useCallback(Bt=>{const Xt=getValue(Bt,yt);return _t(enumOptionsValueForIndex(Xt,Tt,Rt))},[_t,nt,yt,Tt,Rt]),Nt=enumOptionsIndexForValue(st,Tt,yt),Ot=!yt&&nt.default===void 0;return jsxRuntimeExports.jsxs("select",{id:tt,name:tt,multiple:yt,className:"form-control",value:typeof Nt>"u"?Et:Nt,required:at,disabled:lt||dt,autoFocus:vt,onBlur:Pt,onFocus:wt,onChange:Ft,"aria-describedby":ariaDescribedByIds(tt),children:[Ot&&jsxRuntimeExports.jsx("option",{value:"",children:Ct}),Array.isArray(Tt)&&Tt.map(({value:Bt,label:Xt},Zt)=>{const rn=$t&&$t.indexOf(Bt)!==-1;return jsxRuntimeExports.jsx("option",{value:String(Zt),disabled:rn,children:Xt},Zt)})]})}function TextareaWidget$1({id:nt,options:tt={},placeholder:rt,value:st,required:at,disabled:lt,readonly:dt,autofocus:yt=!1,onChange:vt,onBlur:_t,onFocus:bt}){const Mt=reactExports.useCallback(({target:{value:$t}})=>vt($t===""?tt.emptyValue:$t),[vt,tt.emptyValue]),Ct=reactExports.useCallback(({target:$t})=>_t(nt,$t&&$t.value),[_t,nt]),Tt=reactExports.useCallback(({target:$t})=>bt(nt,$t&&$t.value),[nt,bt]);return jsxRuntimeExports.jsx("textarea",{id:nt,name:nt,className:"form-control",value:st||"",placeholder:rt,required:at,disabled:lt,readOnly:dt,autoFocus:yt,rows:tt.rows,onBlur:Ct,onFocus:Tt,onChange:Mt,"aria-describedby":ariaDescribedByIds(nt)})}TextareaWidget$1.defaultProps={autofocus:!1,options:{}};function TextWidget(nt){const{options:tt,registry:rt}=nt,st=getTemplate("BaseInputTemplate",rt,tt);return jsxRuntimeExports.jsx(st,{...nt})}function TimeWidget(nt){const{onChange:tt,options:rt,registry:st}=nt,at=getTemplate("BaseInputTemplate",st,rt),lt=reactExports.useCallback(dt=>tt(dt?`${dt}:00`:void 0),[tt]);return jsxRuntimeExports.jsx(at,{type:"time",...nt,onChange:lt})}function URLWidget(nt){const{options:tt,registry:rt}=nt,st=getTemplate("BaseInputTemplate",rt,tt);return jsxRuntimeExports.jsx(st,{type:"url",...nt})}function UpDownWidget(nt){const{options:tt,registry:rt}=nt,st=getTemplate("BaseInputTemplate",rt,tt);return jsxRuntimeExports.jsx(st,{type:"number",...nt})}function widgets(){return{AltDateWidget,AltDateTimeWidget,CheckboxWidget:CheckboxWidget$1,CheckboxesWidget:CheckboxesWidget$1,ColorWidget,DateWidget,DateTimeWidget,EmailWidget,FileWidget,HiddenWidget,PasswordWidget,RadioWidget:RadioWidget$1,RangeWidget:RangeWidget$1,SelectWidget:SelectWidget$1,TextWidget,TextareaWidget:TextareaWidget$1,TimeWidget,UpDownWidget,URLWidget}}function getDefaultRegistry(){return{fields:fields(),templates:templates(),widgets:widgets(),rootSchema:{},formContext:{},translateString:englishStringTranslator}}let Form$1=class extends reactExports.Component{constructor(tt){if(super(tt),this.getUsedFormData=(rt,st)=>{if(st.length===0&&typeof rt!="object")return rt;const at=_pick(rt,st);return Array.isArray(rt)?Object.keys(at).map(lt=>at[lt]):at},this.getFieldNames=(rt,st)=>{const at=(lt,dt=[],yt=[[]])=>(Object.keys(lt).forEach(vt=>{if(typeof lt[vt]=="object"){const _t=yt.map(bt=>[...bt,vt]);lt[vt][RJSF_ADDITIONAL_PROPERTIES_FLAG]&&lt[vt][NAME_KEY]!==""?dt.push(lt[vt][NAME_KEY]):at(lt[vt],dt,_t)}else vt===NAME_KEY&&lt[vt]!==""&&yt.forEach(_t=>{const bt=_get(st,_t);(typeof bt!="object"||_isEmpty(bt)||Array.isArray(bt)&&bt.every(Mt=>typeof Mt!="object"))&&dt.push(_t)})}),dt);return at(rt)},this.omitExtraData=rt=>{const{schema:st,schemaUtils:at}=this.state,lt=at.retrieveSchema(st,rt),dt=at.toPathSchema(lt,"",rt),yt=this.getFieldNames(dt,rt);return this.getUsedFormData(rt,yt)},this.onChange=(rt,st,at)=>{const{extraErrors:lt,omitExtraData:dt,liveOmit:yt,noValidate:vt,liveValidate:_t,onChange:bt}=this.props,{schemaUtils:Mt,schema:Ct,retrievedSchema:Tt}=this.state;(isObject$g(rt)||Array.isArray(rt))&&(rt=this.getStateFromProps(this.props,rt,Tt).formData);const $t=!vt&&_t;let Rt={formData:rt,schema:Ct},Et=rt;if(dt===!0&&yt===!0&&(Et=this.omitExtraData(rt),Rt={formData:Et}),$t){const wt=this.validate(Et,Ct,Mt,Tt);let Pt=wt.errors,Ft=wt.errorSchema;const Nt=Pt,Ot=Ft;if(lt){const Bt=validationDataMerge(wt,lt);Ft=Bt.errorSchema,Pt=Bt.errors}if(st){const Bt=this.filterErrorsBasedOnSchema(st,Tt,Et);Ft=mergeObjects(Ft,Bt,"preventDuplicates")}Rt={formData:Et,errors:Pt,errorSchema:Ft,schemaValidationErrors:Nt,schemaValidationErrorSchema:Ot}}else if(!vt&&st){const wt=lt?mergeObjects(st,lt,"preventDuplicates"):st;Rt={formData:Et,errorSchema:wt,errors:toErrorList(wt)}}this.setState(Rt,()=>bt&&bt({...this.state,...Rt},at))},this.reset=()=>{const{onChange:rt}=this.props,lt={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(lt,()=>rt&&rt({...this.state,...lt}))},this.onBlur=(rt,st)=>{const{onBlur:at}=this.props;at&&at(rt,st)},this.onFocus=(rt,st)=>{const{onFocus:at}=this.props;at&&at(rt,st)},this.onSubmit=rt=>{if(rt.preventDefault(),rt.target!==rt.currentTarget)return;rt.persist();const{omitExtraData:st,extraErrors:at,noValidate:lt,onSubmit:dt}=this.props;let{formData:yt}=this.state;if(st===!0&&(yt=this.omitExtraData(yt)),lt||this.validateFormWithFormData(yt)){const vt=at||{},_t=at?toErrorList(at):[];this.setState({formData:yt,errors:_t,errorSchema:vt,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{dt&&dt({...this.state,formData:yt,status:"submitted"},rt)})}},this.submit=()=>{if(this.formElement.current){const rt=new CustomEvent("submit",{cancelable:!0});rt.preventDefault(),this.formElement.current.dispatchEvent(rt),this.formElement.current.requestSubmit()}},this.validateFormWithFormData=rt=>{const{extraErrors:st,extraErrorsBlockSubmit:at,focusOnFirstError:lt,onError:dt}=this.props,{errors:yt}=this.state,vt=this.validate(rt);let _t=vt.errors,bt=vt.errorSchema;const Mt=_t,Ct=bt,Tt=_t.length>0||st&&at;if(Tt){if(st){const $t=validationDataMerge(vt,st);bt=$t.errorSchema,_t=$t.errors}lt&&(typeof lt=="function"?lt(_t[0]):this.focusOnError(_t[0])),this.setState({errors:_t,errorSchema:bt,schemaValidationErrors:Mt,schemaValidationErrorSchema:Ct},()=>{dt?dt(_t):console.error("Form validation failed",_t)})}else yt.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!Tt},!tt.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(tt,tt.formData),this.props.onChange&&!deepEquals(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=reactExports.createRef()}getSnapshotBeforeUpdate(tt,rt){if(!deepEquals(this.props,tt)){const st=!deepEquals(tt.schema,this.props.schema),at=!deepEquals(tt.formData,this.props.formData),lt=this.getStateFromProps(this.props,this.props.formData,st||at?void 0:this.state.retrievedSchema,st),dt=!deepEquals(lt,rt);return{nextState:lt,shouldUpdate:dt}}return{shouldUpdate:!1}}componentDidUpdate(tt,rt,st){if(st.shouldUpdate){const{nextState:at}=st;!deepEquals(at.formData,this.props.formData)&&!deepEquals(at.formData,rt.formData)&&this.props.onChange&&this.props.onChange(at),this.setState(at)}}getStateFromProps(tt,rt,st,at=!1){var lt;const dt=this.state||{},yt="schema"in tt?tt.schema:this.props.schema,vt=("uiSchema"in tt?tt.uiSchema:this.props.uiSchema)||{},_t=typeof rt<"u",bt="liveValidate"in tt?tt.liveValidate:this.props.liveValidate,Mt=_t&&!tt.noValidate&&bt,Ct=yt,Tt="experimental_defaultFormStateBehavior"in tt?tt.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior,$t="experimental_customMergeAllOf"in tt?tt.experimental_customMergeAllOf:this.props.experimental_customMergeAllOf;let Rt=dt.schemaUtils;(!Rt||Rt.doesSchemaUtilsDiffer(tt.validator,Ct,Tt,$t))&&(Rt=createSchemaUtils(tt.validator,Ct,Tt,$t));const Et=Rt.getDefaultFormState(yt,rt),wt=st??Rt.retrieveSchema(yt,Et),Pt=()=>tt.noValidate||at?{errors:[],errorSchema:{}}:tt.liveValidate?{errors:dt.errors||[],errorSchema:dt.errorSchema||{}}:{errors:dt.schemaValidationErrors||[],errorSchema:dt.schemaValidationErrorSchema||{}};let Ft,Nt,Ot=dt.schemaValidationErrors,Bt=dt.schemaValidationErrorSchema;if(Mt){const rn=this.validate(Et,yt,Rt,wt);Ft=rn.errors,st===void 0?Nt=rn.errorSchema:Nt=mergeObjects((lt=this.state)===null||lt===void 0?void 0:lt.errorSchema,rn.errorSchema,"preventDuplicates"),Ot=Ft,Bt=Nt}else{const rn=Pt();Ft=rn.errors,Nt=rn.errorSchema}if(tt.extraErrors){const rn=validationDataMerge({errorSchema:Nt,errors:Ft},tt.extraErrors);Nt=rn.errorSchema,Ft=rn.errors}const Xt=Rt.toIdSchema(wt,vt["ui:rootFieldId"],Et,tt.idPrefix,tt.idSeparator);return{schemaUtils:Rt,schema:yt,uiSchema:vt,idSchema:Xt,formData:Et,edit:_t,errors:Ft,errorSchema:Nt,schemaValidationErrors:Ot,schemaValidationErrorSchema:Bt,retrievedSchema:wt}}shouldComponentUpdate(tt,rt){return shouldRender(this,tt,rt)}validate(tt,rt=this.props.schema,st,at){const lt=st||this.state.schemaUtils,{customValidate:dt,transformErrors:yt,uiSchema:vt}=this.props,_t=at??lt.retrieveSchema(rt,tt);return lt.getValidator().validateFormData(tt,_t,dt,yt,vt)}renderErrors(tt){const{errors:rt,errorSchema:st,schema:at,uiSchema:lt}=this.state,{formContext:dt}=this.props,yt=getUiOptions(lt),vt=getTemplate("ErrorListTemplate",tt,yt);return rt&&rt.length?jsxRuntimeExports.jsx(vt,{errors:rt,errorSchema:st||{},schema:at,uiSchema:lt,formContext:dt,registry:tt}):null}filterErrorsBasedOnSchema(tt,rt,st){const{retrievedSchema:at,schemaUtils:lt}=this.state,dt=rt??at,yt=lt.toPathSchema(dt,"",st),vt=this.getFieldNames(yt,st),_t=_pick(tt,vt);(rt==null?void 0:rt.type)!=="object"&&(rt==null?void 0:rt.type)!=="array"&&(_t.__errors=tt.__errors);const bt=Mt=>(_forEach(Mt,(Ct,Tt)=>{_isNil(Ct)?delete Mt[Tt]:typeof Ct=="object"&&!Array.isArray(Ct.__errors)&&bt(Ct)}),Mt);return bt(_t)}getRegistry(){var tt;const{translateString:rt,uiSchema:st={}}=this.props,{schemaUtils:at}=this.state,{fields:lt,templates:dt,widgets:yt,formContext:vt,translateString:_t}=getDefaultRegistry();return{fields:{...lt,...this.props.fields},templates:{...dt,...this.props.templates,ButtonTemplates:{...dt.ButtonTemplates,...(tt=this.props.templates)===null||tt===void 0?void 0:tt.ButtonTemplates}},widgets:{...yt,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||vt,schemaUtils:at,translateString:rt||_t,globalUiOptions:st[UI_GLOBAL_OPTIONS_KEY]}}focusOnError(tt){const{idPrefix:rt="root",idSeparator:st="_"}=this.props,{property:at}=tt,lt=_toPath(at);lt[0]===""?lt[0]=rt:lt.unshift(rt);const dt=lt.join(st);let yt=this.formElement.current.elements[dt];yt||(yt=this.formElement.current.querySelector(`input[id^="${dt}"`)),yt&&yt.length&&(yt=yt[0]),yt&&yt.focus()}validateForm(){const{omitExtraData:tt}=this.props;let{formData:rt}=this.state;return tt===!0&&(rt=this.omitExtraData(rt)),this.validateFormWithFormData(rt)}render(){const{children:tt,id:rt,idPrefix:st,idSeparator:at,className:lt="",tagName:dt,name:yt,method:vt,target:_t,action:bt,autoComplete:Mt,enctype:Ct,acceptcharset:Tt,acceptCharset:$t,noHtml5Validate:Rt=!1,disabled:Et,readonly:wt,formContext:Pt,showErrorList:Ft="top",_internalFormWrapper:Nt}=this.props,{schema:Ot,uiSchema:Bt,formData:Xt,errorSchema:Zt,idSchema:rn}=this.state,Gt=this.getRegistry(),{SchemaField:nn}=Gt.fields,{SubmitButton:cn}=Gt.templates.ButtonTemplates,an=Nt?dt:void 0,mn=Nt||dt||"form";let{[SUBMIT_BTN_OPTIONS_KEY]:En={}}=getUiOptions(Bt);Et&&(En={...En,props:{...En.props,disabled:!0}});const Cn={[UI_OPTIONS_KEY]:{[SUBMIT_BTN_OPTIONS_KEY]:En}};return jsxRuntimeExports.jsxs(mn,{className:lt||"rjsf",id:rt,name:yt,method:vt,target:_t,action:bt,autoComplete:Mt,encType:Ct,acceptCharset:$t||Tt,noValidate:Rt,onSubmit:this.onSubmit,as:an,ref:this.formElement,children:[Ft==="top"&&this.renderErrors(Gt),jsxRuntimeExports.jsx(nn,{name:"",schema:Ot,uiSchema:Bt,errorSchema:Zt,idSchema:rn,idPrefix:st,idSeparator:at,formContext:Pt,formData:Xt,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:Gt,disabled:Et,readonly:wt}),tt||jsxRuntimeExports.jsx(cn,{uiSchema:Cn,registry:Gt}),Ft==="bottom"&&this.renderErrors(Gt)]})}};function withTheme(nt){return reactExports.forwardRef(({fields:tt,widgets:rt,templates:st,...at},lt)=>{var dt;return tt={...nt==null?void 0:nt.fields,...tt},rt={...nt==null?void 0:nt.widgets,...rt},st={...nt==null?void 0:nt.templates,...st,ButtonTemplates:{...(dt=nt==null?void 0:nt.templates)===null||dt===void 0?void 0:dt.ButtonTemplates,...st==null?void 0:st.ButtonTemplates}},jsxRuntimeExports.jsx(Form$1,{...nt,...at,fields:tt,widgets:rt,templates:st,ref:lt})})}const AddIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");function AddButton({uiSchema:nt,registry:tt,...rt}){const{translateString:st}=tt;return jsxRuntimeExports.jsx(IconButton$1,{title:st(TranslatableString.AddItemButton),...rt,color:"primary",children:jsxRuntimeExports.jsx(AddIcon,{})})}function ArrayFieldItemTemplate(nt){const{children:tt,disabled:rt,hasToolbar:st,hasCopy:at,hasMoveDown:lt,hasMoveUp:dt,hasRemove:yt,index:vt,onCopyIndexClick:_t,onDropIndexClick:bt,onReorderClick:Mt,readonly:Ct,uiSchema:Tt,registry:$t}=nt,{CopyButton:Rt,MoveDownButton:Et,MoveUpButton:wt,RemoveButton:Pt}=$t.templates.ButtonTemplates,Ft={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold",minWidth:0};return jsxRuntimeExports.jsxs(Grid,{container:!0,alignItems:"center",children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:!0,style:{overflow:"auto"},children:jsxRuntimeExports.jsx(Box,{mb:2,children:jsxRuntimeExports.jsx(Paper,{elevation:2,children:jsxRuntimeExports.jsx(Box,{p:2,children:tt})})})}),st&&jsxRuntimeExports.jsxs(Grid,{item:!0,children:[(dt||lt)&&jsxRuntimeExports.jsx(wt,{style:Ft,disabled:rt||Ct||!dt,onClick:Mt(vt,vt-1),uiSchema:Tt,registry:$t}),(dt||lt)&&jsxRuntimeExports.jsx(Et,{style:Ft,disabled:rt||Ct||!lt,onClick:Mt(vt,vt+1),uiSchema:Tt,registry:$t}),at&&jsxRuntimeExports.jsx(Rt,{style:Ft,disabled:rt||Ct,onClick:_t(vt),uiSchema:Tt,registry:$t}),yt&&jsxRuntimeExports.jsx(Pt,{style:Ft,disabled:rt||Ct,onClick:bt(vt),uiSchema:Tt,registry:$t})]})]})}function ArrayFieldTemplate(nt){const{canAdd:tt,disabled:rt,idSchema:st,uiSchema:at,items:lt,onAddClick:dt,readonly:yt,registry:vt,required:_t,schema:bt,title:Mt}=nt,Ct=getUiOptions(at),Tt=getTemplate("ArrayFieldDescriptionTemplate",vt,Ct),$t=getTemplate("ArrayFieldItemTemplate",vt,Ct),Rt=getTemplate("ArrayFieldTitleTemplate",vt,Ct),{ButtonTemplates:{AddButton:Et}}=vt.templates;return jsxRuntimeExports.jsx(Paper,{elevation:2,children:jsxRuntimeExports.jsxs(Box,{p:2,children:[jsxRuntimeExports.jsx(Rt,{idSchema:st,title:Ct.title||Mt,schema:bt,uiSchema:at,required:_t,registry:vt}),jsxRuntimeExports.jsx(Tt,{idSchema:st,description:Ct.description||bt.description,schema:bt,uiSchema:at,registry:vt}),lt&&lt.map(({key:wt,...Pt})=>jsxRuntimeExports.jsx($t,{...Pt},wt)),tt&&jsxRuntimeExports.jsx(Grid,{container:!0,justifyContent:"flex-end",children:jsxRuntimeExports.jsx(Grid,{item:!0,children:jsxRuntimeExports.jsx(Box,{mt:2,children:jsxRuntimeExports.jsx(Et,{className:"array-item-add",onClick:dt,disabled:rt||yt,uiSchema:at,registry:vt})})})})]})})}const TYPES_THAT_SHRINK_LABEL=["date","datetime-local","file","time"];function BaseInputTemplate(nt){const{id:tt,name:rt,placeholder:st,required:at,readonly:lt,disabled:dt,type:yt,label:vt,hideLabel:_t,hideError:bt,value:Mt,onChange:Ct,onChangeOverride:Tt,onBlur:$t,onFocus:Rt,autofocus:Et,options:wt,schema:Pt,uiSchema:Ft,rawErrors:Nt=[],errorSchema:Ot,formContext:Bt,registry:Xt,InputLabelProps:Zt,...rn}=nt,Gt=getInputProps(Pt,yt,wt),{step:nn,min:cn,max:an,...mn}=Gt,En={inputProps:{step:nn,min:cn,max:an,...Pt.examples?{list:examplesId(tt)}:void 0},...mn},Cn=({target:{value:Pn}})=>Ct(Pn===""?wt.emptyValue:Pn),Mn=({target:Pn})=>$t(tt,Pn&&Pn.value),un=({target:Pn})=>Rt(tt,Pn&&Pn.value),Tn=TYPES_THAT_SHRINK_LABEL.includes(yt)?{...Zt,shrink:!0}:Zt;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TextField,{id:tt,name:tt,placeholder:st,label:labelValue(vt||void 0,_t,void 0),autoFocus:Et,required:at,disabled:dt||lt,...En,value:Mt||Mt===0?Mt:"",error:Nt.length>0,onChange:Tt||Cn,onBlur:Mn,onFocus:un,InputLabelProps:Tn,...rn,"aria-describedby":ariaDescribedByIds(tt,!!Pt.examples)}),Array.isArray(Pt.examples)&&jsxRuntimeExports.jsx("datalist",{id:examplesId(tt),children:Pt.examples.concat(Pt.default&&!Pt.examples.includes(Pt.default)?[Pt.default]:[]).map(Pn=>jsxRuntimeExports.jsx("option",{value:Pn},Pn))})]})}function DescriptionField(nt){const{id:tt,description:rt}=nt;return rt?jsxRuntimeExports.jsx(Typography,{id:tt,variant:"subtitle2",style:{marginTop:"5px"},children:rt}):null}const ErrorIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");function ErrorList({errors:nt,registry:tt}){const{translateString:rt}=tt;return jsxRuntimeExports.jsx(Paper,{elevation:2,children:jsxRuntimeExports.jsxs(Box,{mb:2,p:2,children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",children:rt(TranslatableString.ErrorsLabel)}),jsxRuntimeExports.jsx(List,{dense:!0,children:nt.map((st,at)=>jsxRuntimeExports.jsxs(ListItem,{children:[jsxRuntimeExports.jsx(ListItemIcon,{children:jsxRuntimeExports.jsx(ErrorIcon,{color:"error"})}),jsxRuntimeExports.jsx(ListItemText,{primary:st.stack})]},at))})]})})}const ArrowDownwardIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),ArrowUpwardIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),CopyIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),RemoveIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove");function MuiIconButton(nt){const{icon:tt,color:rt,uiSchema:st,registry:at,...lt}=nt;return jsxRuntimeExports.jsx(IconButton$1,{...lt,size:"small",color:rt,children:tt})}function CopyButton(nt){const{registry:{translateString:tt}}=nt;return jsxRuntimeExports.jsx(MuiIconButton,{title:tt(TranslatableString.CopyButton),...nt,icon:jsxRuntimeExports.jsx(CopyIcon,{fontSize:"small"})})}function MoveDownButton(nt){const{registry:{translateString:tt}}=nt;return jsxRuntimeExports.jsx(MuiIconButton,{title:tt(TranslatableString.MoveDownButton),...nt,icon:jsxRuntimeExports.jsx(ArrowDownwardIcon,{fontSize:"small"})})}function MoveUpButton(nt){const{registry:{translateString:tt}}=nt;return jsxRuntimeExports.jsx(MuiIconButton,{title:tt(TranslatableString.MoveUpButton),...nt,icon:jsxRuntimeExports.jsx(ArrowUpwardIcon,{fontSize:"small"})})}function RemoveButton(nt){const{iconType:tt,...rt}=nt,{registry:{translateString:st}}=rt;return jsxRuntimeExports.jsx(MuiIconButton,{title:st(TranslatableString.RemoveButton),...rt,color:"error",icon:jsxRuntimeExports.jsx(RemoveIcon,{fontSize:tt==="default"?void 0:"small"})})}function FieldErrorTemplate(nt){const{errors:tt=[],idSchema:rt}=nt;if(tt.length===0)return null;const st=errorId(rt);return jsxRuntimeExports.jsx(List,{id:st,dense:!0,disablePadding:!0,children:tt.map((at,lt)=>jsxRuntimeExports.jsx(ListItem,{disableGutters:!0,children:jsxRuntimeExports.jsx(FormHelperText,{component:"div",id:`${st}-${lt}`,children:at})},lt))})}function FieldHelpTemplate(nt){const{idSchema:tt,help:rt}=nt;if(!rt)return null;const st=helpId(tt);return jsxRuntimeExports.jsx(FormHelperText,{component:"div",id:st,children:rt})}function FieldTemplate(nt){const{id:tt,children:rt,classNames:st,style:at,disabled:lt,displayLabel:dt,hidden:yt,label:vt,onDropPropertyClick:_t,onKeyChange:bt,readonly:Mt,required:Ct,rawErrors:Tt=[],errors:$t,help:Rt,description:Et,rawDescription:wt,schema:Pt,uiSchema:Ft,registry:Nt}=nt,Ot=getUiOptions(Ft),Bt=getTemplate("WrapIfAdditionalTemplate",Nt,Ot);return yt?jsxRuntimeExports.jsx("div",{style:{display:"none"},children:rt}):jsxRuntimeExports.jsx(Bt,{classNames:st,style:at,disabled:lt,id:tt,label:vt,onDropPropertyClick:_t,onKeyChange:bt,readonly:Mt,required:Ct,schema:Pt,uiSchema:Ft,registry:Nt,children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,error:!!Tt.length,required:Ct,children:[rt,dt&&wt?jsxRuntimeExports.jsx(Typography,{variant:"caption",color:"textSecondary",children:Et}):null,$t,Rt]})})}function ObjectFieldTemplate(nt){const{description:tt,title:rt,properties:st,required:at,disabled:lt,readonly:dt,uiSchema:yt,idSchema:vt,schema:_t,formData:bt,onAddClick:Mt,registry:Ct}=nt,Tt=getUiOptions(yt),$t=getTemplate("TitleFieldTemplate",Ct,Tt),Rt=getTemplate("DescriptionFieldTemplate",Ct,Tt),{ButtonTemplates:{AddButton:Et}}=Ct.templates;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[rt&&jsxRuntimeExports.jsx($t,{id:titleId(vt),title:rt,required:at,schema:_t,uiSchema:yt,registry:Ct}),tt&&jsxRuntimeExports.jsx(Rt,{id:descriptionId(vt),description:tt,schema:_t,uiSchema:yt,registry:Ct}),jsxRuntimeExports.jsxs(Grid,{container:!0,spacing:2,style:{marginTop:"10px"},children:[st.map((wt,Pt)=>wt.hidden?wt.content:jsxRuntimeExports.jsx(Grid,{item:!0,xs:12,style:{marginBottom:"10px"},children:wt.content},Pt)),canExpand(_t,yt,bt)&&jsxRuntimeExports.jsx(Grid,{container:!0,justifyContent:"flex-end",children:jsxRuntimeExports.jsx(Grid,{item:!0,children:jsxRuntimeExports.jsx(Et,{className:"object-property-expand",onClick:Mt(_t),disabled:lt||dt,uiSchema:yt,registry:Ct})})})]})]})}function SubmitButton({uiSchema:nt}){const{submitText:tt,norender:rt,props:st={}}=getSubmitButtonOptions(nt);return rt?null:jsxRuntimeExports.jsx(Box,{marginTop:3,children:jsxRuntimeExports.jsx(Button,{type:"submit",variant:"contained",color:"primary",...st,children:tt})})}function TitleField({id:nt,title:tt}){return jsxRuntimeExports.jsxs(Box,{id:nt,mb:1,mt:1,children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",children:tt}),jsxRuntimeExports.jsx(Divider,{})]})}function WrapIfAdditionalTemplate(nt){const{children:tt,classNames:rt,style:st,disabled:at,id:lt,label:dt,onDropPropertyClick:yt,onKeyChange:vt,readonly:_t,required:bt,schema:Mt,uiSchema:Ct,registry:Tt}=nt,{templates:$t,translateString:Rt}=Tt,{RemoveButton:Et}=$t.ButtonTemplates,wt=Rt(TranslatableString.KeyLabel,[dt]),Pt=ADDITIONAL_PROPERTY_FLAG in Mt,Ft={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};if(!Pt)return jsxRuntimeExports.jsx("div",{className:rt,style:st,children:tt});const Nt=({target:Ot})=>vt(Ot&&Ot.value);return jsxRuntimeExports.jsxs(Grid,{container:!0,alignItems:"center",spacing:2,className:rt,style:st,children:[jsxRuntimeExports.jsx(Grid,{item:!0,xs:!0,children:jsxRuntimeExports.jsx(TextField,{fullWidth:!0,required:bt,label:wt,defaultValue:dt,disabled:at||_t,id:`${lt}-key`,name:`${lt}-key`,onBlur:_t?void 0:Nt,type:"text"})}),jsxRuntimeExports.jsx(Grid,{item:!0,xs:!0,children:tt}),jsxRuntimeExports.jsx(Grid,{item:!0,children:jsxRuntimeExports.jsx(Et,{iconType:"default",style:Ft,disabled:at||_t,onClick:yt(dt),uiSchema:Ct,registry:Tt})})]},`${lt}-key`)}function generateTemplates(){return{ArrayFieldItemTemplate,ArrayFieldTemplate,BaseInputTemplate,ButtonTemplates:{AddButton,CopyButton,MoveDownButton,MoveUpButton,RemoveButton,SubmitButton},DescriptionFieldTemplate:DescriptionField,ErrorListTemplate:ErrorList,FieldErrorTemplate,FieldHelpTemplate,FieldTemplate,ObjectFieldTemplate,TitleFieldTemplate:TitleField,WrapIfAdditionalTemplate}}function CheckboxWidget(nt){var tt;const{schema:rt,id:st,value:at,disabled:lt,readonly:dt,label:yt="",hideLabel:vt,autofocus:_t,onChange:bt,onBlur:Mt,onFocus:Ct,registry:Tt,options:$t,uiSchema:Rt}=nt,Et=getTemplate("DescriptionFieldTemplate",Tt,$t),wt=schemaRequiresTrueValue(rt),Pt=(Bt,Xt)=>bt(Xt),Ft=({target:Bt})=>Mt(st,Bt&&Bt.value),Nt=({target:Bt})=>Ct(st,Bt&&Bt.value),Ot=(tt=$t.description)!==null&&tt!==void 0?tt:rt.description;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!vt&&!!Ot&&jsxRuntimeExports.jsx(Et,{id:descriptionId(st),description:Ot,schema:rt,uiSchema:Rt,registry:Tt}),jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Checkbox,{id:st,name:st,checked:typeof at>"u"?!1:!!at,required:wt,disabled:lt||dt,autoFocus:_t,onChange:Pt,onBlur:Ft,onFocus:Nt,"aria-describedby":ariaDescribedByIds(st)}),label:labelValue(yt,vt,!1)})]})}function CheckboxesWidget({label:nt,hideLabel:tt,id:rt,disabled:st,options:at,value:lt,autofocus:dt,readonly:yt,required:vt,onChange:_t,onBlur:bt,onFocus:Mt}){const{enumOptions:Ct,enumDisabled:Tt,inline:$t,emptyValue:Rt}=at,Et=Array.isArray(lt)?lt:[lt],wt=Nt=>({target:{checked:Ot}})=>{_t(Ot?enumOptionsSelectValue(Nt,Et,Ct):enumOptionsDeselectValue(Nt,Et,Ct))},Pt=({target:Nt})=>bt(rt,enumOptionsValueForIndex(Nt&&Nt.value,Ct,Rt)),Ft=({target:Nt})=>Mt(rt,enumOptionsValueForIndex(Nt&&Nt.value,Ct,Rt));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[labelValue(jsxRuntimeExports.jsx(FormLabel,{required:vt,htmlFor:rt,children:nt||void 0}),tt),jsxRuntimeExports.jsx(FormGroup,{id:rt,row:!!$t,children:Array.isArray(Ct)&&Ct.map((Nt,Ot)=>{const Bt=enumOptionsIsSelected(Nt.value,Et),Xt=Array.isArray(Tt)&&Tt.indexOf(Nt.value)!==-1,Zt=jsxRuntimeExports.jsx(Checkbox,{id:optionId(rt,Ot),name:rt,checked:Bt,disabled:st||Xt||yt,autoFocus:dt&&Ot===0,onChange:wt(Ot),onBlur:Pt,onFocus:Ft,"aria-describedby":ariaDescribedByIds(rt)});return jsxRuntimeExports.jsx(FormControlLabel,{control:Zt,label:Nt.label},Ot)})})]})}function RadioWidget({id:nt,options:tt,value:rt,required:st,disabled:at,readonly:lt,label:dt,hideLabel:yt,onChange:vt,onBlur:_t,onFocus:bt}){var Mt;const{enumOptions:Ct,enumDisabled:Tt,emptyValue:$t}=tt,Rt=(Nt,Ot)=>vt(enumOptionsValueForIndex(Ot,Ct,$t)),Et=({target:Nt})=>_t(nt,enumOptionsValueForIndex(Nt&&Nt.value,Ct,$t)),wt=({target:Nt})=>bt(nt,enumOptionsValueForIndex(Nt&&Nt.value,Ct,$t)),Pt=tt?tt.inline:!1,Ft=(Mt=enumOptionsIndexForValue(rt,Ct))!==null&&Mt!==void 0?Mt:null;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[labelValue(jsxRuntimeExports.jsx(FormLabel,{required:st,htmlFor:nt,children:dt||void 0}),yt),jsxRuntimeExports.jsx(RadioGroup,{id:nt,name:nt,value:Ft,row:Pt,onChange:Rt,onBlur:Et,onFocus:wt,"aria-describedby":ariaDescribedByIds(nt),children:Array.isArray(Ct)&&Ct.map((Nt,Ot)=>{const Bt=Array.isArray(Tt)&&Tt.indexOf(Nt.value)!==-1;return jsxRuntimeExports.jsx(FormControlLabel,{control:jsxRuntimeExports.jsx(Radio,{name:nt,id:optionId(nt,Ot),color:"primary"}),label:Nt.label,value:String(Ot),disabled:at||Bt||lt},Ot)})})]})}function RangeWidget(nt){const{value:tt,readonly:rt,disabled:st,onBlur:at,onFocus:lt,options:dt,schema:yt,onChange:vt,required:_t,label:bt,hideLabel:Mt,id:Ct}=nt,Tt={value:tt,label:bt,id:Ct,name:Ct,...rangeSpec(yt)},$t=(wt,Pt)=>{vt(Pt??dt.emptyValue)},Rt=({target:wt})=>at(Ct,wt&&wt.value),Et=({target:wt})=>lt(Ct,wt&&wt.value);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[labelValue(jsxRuntimeExports.jsx(FormLabel,{required:_t,htmlFor:Ct,children:bt||void 0}),Mt),jsxRuntimeExports.jsx(Slider,{disabled:st||rt,onChange:$t,onBlur:Rt,onFocus:Et,valueLabelDisplay:"auto",...Tt,"aria-describedby":ariaDescribedByIds(Ct)})]})}function SelectWidget({schema:nt,id:tt,name:rt,options:st,label:at,hideLabel:lt,required:dt,disabled:yt,placeholder:vt,readonly:_t,value:bt,multiple:Mt,autofocus:Ct,onChange:Tt,onBlur:$t,onFocus:Rt,errorSchema:Et,rawErrors:wt=[],registry:Pt,uiSchema:Ft,hideError:Nt,formContext:Ot,...Bt}){const{enumOptions:Xt,enumDisabled:Zt,emptyValue:rn}=st;Mt=typeof Mt>"u"?!1:!!Mt;const Gt=Mt?[]:"",nn=typeof bt>"u"||Mt&&bt.length<1||!Mt&&bt===Gt,cn=({target:{value:dn}})=>Tt(enumOptionsValueForIndex(dn,Xt,rn)),an=({target:dn})=>$t(tt,enumOptionsValueForIndex(dn&&dn.value,Xt,rn)),mn=({target:dn})=>Rt(tt,enumOptionsValueForIndex(dn&&dn.value,Xt,rn)),En=enumOptionsIndexForValue(bt,Xt,Mt),{InputLabelProps:Cn,SelectProps:Mn,autocomplete:un,...Tn}=Bt,Pn=!Mt&&nt.default===void 0;return jsxRuntimeExports.jsxs(TextField,{id:tt,name:tt,label:labelValue(at||void 0,lt,void 0),value:!nn&&typeof En<"u"?En:Gt,required:dt,disabled:yt||_t,autoFocus:Ct,autoComplete:un,placeholder:vt,error:wt.length>0,onChange:cn,onBlur:an,onFocus:mn,...Tn,select:!0,InputLabelProps:{...Cn,shrink:!nn},SelectProps:{...Mn,multiple:Mt},"aria-describedby":ariaDescribedByIds(tt),children:[Pn&&jsxRuntimeExports.jsx(MenuItem,{value:"",children:vt}),Array.isArray(Xt)&&Xt.map(({value:dn,label:Un},qn)=>{const In=Array.isArray(Zt)&&Zt.indexOf(dn)!==-1;return jsxRuntimeExports.jsx(MenuItem,{value:String(qn),disabled:In,children:Un},qn)})]})}function TextareaWidget(nt){const{options:tt,registry:rt}=nt,st=getTemplate("BaseInputTemplate",rt,tt);let at=5;return(typeof tt.rows=="string"||typeof tt.rows=="number")&&(at=tt.rows),jsxRuntimeExports.jsx(st,{...nt,multiline:!0,rows:at})}function generateWidgets(){return{CheckboxWidget,CheckboxesWidget,RadioWidget,RangeWidget,SelectWidget,TextareaWidget}}function generateTheme(){return{templates:generateTemplates(),widgets:generateWidgets()}}function generateForm(){return withTheme(generateTheme())}const Form=generateForm();function OrbitalPage(){const[nt,tt]=reactExports.useState("#3465A4"),[rt,st]=reactExports.useState("Stick"),[at,lt]=reactExports.useState(null),[dt,yt]=reactExports.useState({positiveColor:"#FF0000",negativeColor:"#0000FF",positiveMin:.01,positiveMax:.1,negativeMin:.01,negativeMax:.1,isosurface:!1}),vt=Ct=>{if(!Ct.target.files)return;const Tt=Ct.target.files[0];if(console.log(Tt.name),Tt.name.endsWith(".cube")){const $t=new FileReader;console.log("To load"),$t.onload=function(){const Rt=$t.result;lt(Rt)},$t.readAsText(Tt)}},_t={title:"Orbital Transfer Function",type:"object",properties:{positiveColor:{title:"Positive Color",type:"string",default:dt.positiveColor},negativeColor:{title:"Negative Color",type:"string",default:dt.negativeColor},positiveMin:{title:"Positive Min",type:"number",default:dt.positiveMin},positiveMax:{title:"Positive Max",type:"number",default:dt.positiveMax},negativeMin:{title:"Negative Min",type:"number",default:dt.negativeMin},negativeMax:{title:"Negative Max",type:"number",default:dt.negativeMax},isosurface:{title:"Show as Surface",type:"boolean",default:dt.isosurface}}},bt={positiveColor:{"ui:widget":"color"},negativeColor:{"ui:widget":"color"}},Mt=Ct=>yt(Ct);return jsxRuntimeExports.jsxs(Stack$5,{direction:"row",alignItems:"center",spacing:2,height:"100%",children:[jsxRuntimeExports.jsxs(Stack$5,{children:[jsxRuntimeExports.jsxs(Button,{variant:"contained",role:void 0,tabIndex:-1,component:"label",children:["Upload Cube File",jsxRuntimeExports.jsx(VisuallyHiddenInput,{type:"file",name:"file1",onChange:vt})]}),jsxRuntimeExports.jsx(Form,{schema:_t,uiSchema:bt,validator:validator$1,onSubmit:Ct=>Mt(Ct.formData),children:jsxRuntimeExports.jsx(Box,{textAlign:"center",children:jsxRuntimeExports.jsx(Button,{variant:"contained",size:"medium",type:"submit",children:"Update"})})})]}),jsxRuntimeExports.jsxs(Stack$5,{height:"100%",width:"100%",children:[jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center"},children:[jsxRuntimeExports.jsx(Tooltip$1,{title:"Change Background Colour",arrow:!0,children:jsxRuntimeExports.jsx("input",{style:{margin:"50px"},type:"color",value:nt,onChange:Ct=>{tt(Ct.target.value)}})}),jsxRuntimeExports.jsx(StyleToggle,{style:rt,setStyle:st})]}),jsxRuntimeExports.jsx(Molecule3D,{color:nt,moleculedata:null,orbital:at==null?null:{cubeData:at,transferfn:dt},style:rt},nt)]})]})}function useSyncedRef(nt){const tt=reactExports.useRef(nt);return tt.current=nt,reactExports.useMemo(()=>Object.freeze({get current(){return tt.current}}),[])}function useUnmountEffect(nt){const tt=useSyncedRef(nt);reactExports.useEffect(()=>()=>{tt.current()},[])}const isBrowser$1=typeof window<"u"&&typeof navigator<"u"&&typeof document<"u";function useRafCallback(nt){const tt=useSyncedRef(nt),rt=reactExports.useRef(0),st=reactExports.useCallback(()=>{isBrowser$1&&rt.current&&(cancelAnimationFrame(rt.current),rt.current=0)},[]);return useUnmountEffect(st),[reactExports.useMemo(()=>{const at=(...lt)=>{isBrowser$1&&(st(),rt.current=requestAnimationFrame(()=>{tt.current(...lt),rt.current=0}))};return Object.defineProperties(at,{length:{value:nt.length},name:{value:`${nt.name||"anonymous"}__raf`}}),at},[]),st]}function useThrottledCallback(nt,tt,rt,st=!1){const at=reactExports.useRef(),lt=reactExports.useRef();return useUnmountEffect(()=>{at.current&&(clearTimeout(at.current),at.current=void 0)}),reactExports.useMemo(()=>{const dt=(vt,_t)=>{lt.current=void 0,nt.apply(vt,_t),at.current=setTimeout(()=>{at.current=void 0,!st&&lt.current&&(dt(lt.current.this,lt.current.args),lt.current=void 0)},rt)},yt=function(...vt){if(at.current){lt.current={args:vt,this:this};return}dt(this,vt)};return Object.defineProperties(yt,{length:{value:nt.length},name:{value:`${nt.name||"anonymous"}__throttled__${rt}`}}),yt},[rt,st,...tt])}function on(nt,...tt){var rt;(rt=nt==null?void 0:nt.addEventListener)==null||rt.call(nt,...tt)}function off(nt,...tt){var rt;(rt=nt==null?void 0:nt.removeEventListener)==null||rt.call(nt,...tt)}const hasOwnProperty$1=(nt,tt)=>Object.prototype.hasOwnProperty.call(nt,tt);function useIsMounted(nt=!1){const tt=reactExports.useRef(nt),rt=reactExports.useCallback(()=>tt.current,[]);return reactExports.useEffect(()=>(tt.current=!0,()=>{tt.current=!1}),[]),rt}const stateChanger=nt=>(nt+1)%Number.MAX_SAFE_INTEGER;function useRerender(){const[,nt]=reactExports.useState(0);return reactExports.useCallback(()=>{nt(stateChanger)},[])}function resolveHookState(nt,tt){return typeof nt=="function"?nt(tt):nt}function usePrevious(nt){const tt=reactExports.useRef();return reactExports.useEffect(()=>{tt.current=nt}),tt.current}function useRafState(nt){const[tt,rt]=reactExports.useState(nt),[st,at]=useRafCallback(rt);return useUnmountEffect(at),[tt,st]}function useToggle(nt=!1,tt=!0){const[rt,st]=reactExports.useState(nt),at=useSyncedRef(tt);return[rt,reactExports.useCallback(lt=>{st(dt=>lt===void 0||at.current&&typeof lt=="object"&&(lt.constructor.name==="SyntheticBaseEvent"||typeof lt._reactName=="string")?!dt:!!resolveHookState(lt,dt))},[])]}function useEventListener(nt,...tt){const rt=useIsMounted(),st=useSyncedRef(tt[1]),at=reactExports.useMemo(()=>function(...lt){rt()&&(typeof st.current=="function"?st.current.apply(this,lt):typeof st.current.handleEvent=="function"&&st.current.handleEvent.apply(this,lt))},[]);reactExports.useEffect(()=>{const lt=isRefObject(nt)?nt.current:nt;if(!lt)return;const dt=tt.slice(2);return on(lt,tt[0],at,...dt),()=>{off(lt,tt[0],at,...dt)}},[nt,tt[0]])}function isRefObject(nt){return nt!==null&&typeof nt=="object"&&hasOwnProperty$1(nt,"current")}const createKeyPredicate=nt=>tt=>tt.key===nt,WINDOW_OR_NULL=isBrowser$1?window:null;function useKeyboardEvent(nt,tt,rt=[],st={}){const{event:at="keydown",target:lt=WINDOW_OR_NULL,eventOptions:dt}=st,yt=useSyncedRef(tt),vt=reactExports.useMemo(()=>{const _t=createKeyPredicate(nt);return function(bt){_t(bt)&&yt.current.call(this,bt)}},rt);useEventListener(lt,at,vt,dt)}function ascending(nt,tt){return nt==null||tt==null?NaN:nt<tt?-1:nt>tt?1:nt>=tt?0:NaN}function descending(nt,tt){return nt==null||tt==null?NaN:tt<nt?-1:tt>nt?1:tt>=nt?0:NaN}function bisector(nt){let tt,rt,st;nt.length!==2?(tt=ascending,rt=(yt,vt)=>ascending(nt(yt),vt),st=(yt,vt)=>nt(yt)-vt):(tt=nt===ascending||nt===descending?nt:zero$1,rt=nt,st=nt);function at(yt,vt,_t=0,bt=yt.length){if(_t<bt){if(tt(vt,vt)!==0)return bt;do{const Mt=_t+bt>>>1;rt(yt[Mt],vt)<0?_t=Mt+1:bt=Mt}while(_t<bt)}return _t}function lt(yt,vt,_t=0,bt=yt.length){if(_t<bt){if(tt(vt,vt)!==0)return bt;do{const Mt=_t+bt>>>1;rt(yt[Mt],vt)<=0?_t=Mt+1:bt=Mt}while(_t<bt)}return _t}function dt(yt,vt,_t=0,bt=yt.length){const Mt=at(yt,vt,_t,bt-1);return Mt>_t&&st(yt[Mt-1],vt)>-st(yt[Mt],vt)?Mt-1:Mt}return{left:at,center:dt,right:lt}}function zero$1(){return 0}function number$1(nt){return nt===null?NaN:+nt}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$1).center;const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(nt,tt,rt){const st=(tt-nt)/Math.max(0,rt),at=Math.floor(Math.log10(st)),lt=st/Math.pow(10,at),dt=lt>=e10?10:lt>=e5?5:lt>=e2?2:1;let yt,vt,_t;return at<0?(_t=Math.pow(10,-at)/dt,yt=Math.round(nt*_t),vt=Math.round(tt*_t),yt/_t<nt&&++yt,vt/_t>tt&&--vt,_t=-_t):(_t=Math.pow(10,at)*dt,yt=Math.round(nt/_t),vt=Math.round(tt/_t),yt*_t<nt&&++yt,vt*_t>tt&&--vt),vt<yt&&.5<=rt&&rt<2?tickSpec(nt,tt,rt*2):[yt,vt,_t]}function ticks(nt,tt,rt){if(tt=+tt,nt=+nt,rt=+rt,!(rt>0))return[];if(nt===tt)return[nt];const st=tt<nt,[at,lt,dt]=st?tickSpec(tt,nt,rt):tickSpec(nt,tt,rt);if(!(lt>=at))return[];const yt=lt-at+1,vt=new Array(yt);if(st)if(dt<0)for(let _t=0;_t<yt;++_t)vt[_t]=(lt-_t)/-dt;else for(let _t=0;_t<yt;++_t)vt[_t]=(lt-_t)*dt;else if(dt<0)for(let _t=0;_t<yt;++_t)vt[_t]=(at+_t)/-dt;else for(let _t=0;_t<yt;++_t)vt[_t]=(at+_t)*dt;return vt}function tickIncrement(nt,tt,rt){return tt=+tt,nt=+nt,rt=+rt,tickSpec(nt,tt,rt)[2]}function tickStep(nt,tt,rt){tt=+tt,nt=+nt,rt=+rt;const st=tt<nt,at=st?tickIncrement(tt,nt,rt):tickIncrement(nt,tt,rt);return(st?-1:1)*(at<0?1/-at:at)}function range$2(nt,tt,rt){nt=+nt,tt=+tt,rt=(at=arguments.length)<2?(tt=nt,nt=0,1):at<3?1:+rt;for(var st=-1,at=Math.max(0,Math.ceil((tt-nt)/rt))|0,lt=new Array(at);++st<at;)lt[st]=nt+st*rt;return lt}function formatDecimal(nt){return Math.abs(nt=Math.round(nt))>=1e21?nt.toLocaleString("en").replace(/,/g,""):nt.toString(10)}function formatDecimalParts(nt,tt){if((rt=(nt=tt?nt.toExponential(tt-1):nt.toExponential()).indexOf("e"))<0)return null;var rt,st=nt.slice(0,rt);return[st.length>1?st[0]+st.slice(2):st,+nt.slice(rt+1)]}function exponent(nt){return nt=formatDecimalParts(Math.abs(nt)),nt?nt[1]:NaN}function formatGroup(nt,tt){return function(rt,st){for(var at=rt.length,lt=[],dt=0,yt=nt[0],vt=0;at>0&&yt>0&&(vt+yt+1>st&&(yt=Math.max(1,st-vt)),lt.push(rt.substring(at-=yt,at+yt)),!((vt+=yt+1)>st));)yt=nt[dt=(dt+1)%nt.length];return lt.reverse().join(tt)}}function formatNumerals(nt){return function(tt){return tt.replace(/[0-9]/g,function(rt){return nt[+rt]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(nt){if(!(tt=re.exec(nt)))throw new Error("invalid format: "+nt);var tt;return new FormatSpecifier({fill:tt[1],align:tt[2],sign:tt[3],symbol:tt[4],zero:tt[5],width:tt[6],comma:tt[7],precision:tt[8]&&tt[8].slice(1),trim:tt[9],type:tt[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(nt){this.fill=nt.fill===void 0?" ":nt.fill+"",this.align=nt.align===void 0?">":nt.align+"",this.sign=nt.sign===void 0?"-":nt.sign+"",this.symbol=nt.symbol===void 0?"":nt.symbol+"",this.zero=!!nt.zero,this.width=nt.width===void 0?void 0:+nt.width,this.comma=!!nt.comma,this.precision=nt.precision===void 0?void 0:+nt.precision,this.trim=!!nt.trim,this.type=nt.type===void 0?"":nt.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(nt){e:for(var tt=nt.length,rt=1,st=-1,at;rt<tt;++rt)switch(nt[rt]){case".":st=at=rt;break;case"0":st===0&&(st=rt),at=rt;break;default:if(!+nt[rt])break e;st>0&&(st=0);break}return st>0?nt.slice(0,st)+nt.slice(at+1):nt}var prefixExponent;function formatPrefixAuto(nt,tt){var rt=formatDecimalParts(nt,tt);if(!rt)return nt+"";var st=rt[0],at=rt[1],lt=at-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(at/3)))*3)+1,dt=st.length;return lt===dt?st:lt>dt?st+new Array(lt-dt+1).join("0"):lt>0?st.slice(0,lt)+"."+st.slice(lt):"0."+new Array(1-lt).join("0")+formatDecimalParts(nt,Math.max(0,tt+lt-1))[0]}function formatRounded(nt,tt){var rt=formatDecimalParts(nt,tt);if(!rt)return nt+"";var st=rt[0],at=rt[1];return at<0?"0."+new Array(-at).join("0")+st:st.length>at+1?st.slice(0,at+1)+"."+st.slice(at+1):st+new Array(at-st.length+2).join("0")}const formatTypes={"%":(nt,tt)=>(nt*100).toFixed(tt),b:nt=>Math.round(nt).toString(2),c:nt=>nt+"",d:formatDecimal,e:(nt,tt)=>nt.toExponential(tt),f:(nt,tt)=>nt.toFixed(tt),g:(nt,tt)=>nt.toPrecision(tt),o:nt=>Math.round(nt).toString(8),p:(nt,tt)=>formatRounded(nt*100,tt),r:formatRounded,s:formatPrefixAuto,X:nt=>Math.round(nt).toString(16).toUpperCase(),x:nt=>Math.round(nt).toString(16)};function identity$2(nt){return nt}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(nt){var tt=nt.grouping===void 0||nt.thousands===void 0?identity$2:formatGroup(map.call(nt.grouping,Number),nt.thousands+""),rt=nt.currency===void 0?"":nt.currency[0]+"",st=nt.currency===void 0?"":nt.currency[1]+"",at=nt.decimal===void 0?".":nt.decimal+"",lt=nt.numerals===void 0?identity$2:formatNumerals(map.call(nt.numerals,String)),dt=nt.percent===void 0?"%":nt.percent+"",yt=nt.minus===void 0?"":nt.minus+"",vt=nt.nan===void 0?"NaN":nt.nan+"";function _t(Mt){Mt=formatSpecifier(Mt);var Ct=Mt.fill,Tt=Mt.align,$t=Mt.sign,Rt=Mt.symbol,Et=Mt.zero,wt=Mt.width,Pt=Mt.comma,Ft=Mt.precision,Nt=Mt.trim,Ot=Mt.type;Ot==="n"?(Pt=!0,Ot="g"):formatTypes[Ot]||(Ft===void 0&&(Ft=12),Nt=!0,Ot="g"),(Et||Ct==="0"&&Tt==="=")&&(Et=!0,Ct="0",Tt="=");var Bt=Rt==="$"?rt:Rt==="#"&&/[boxX]/.test(Ot)?"0"+Ot.toLowerCase():"",Xt=Rt==="$"?st:/[%p]/.test(Ot)?dt:"",Zt=formatTypes[Ot],rn=/[defgprs%]/.test(Ot);Ft=Ft===void 0?6:/[gprs]/.test(Ot)?Math.max(1,Math.min(21,Ft)):Math.max(0,Math.min(20,Ft));function Gt(nn){var cn=Bt,an=Xt,mn,En,Cn;if(Ot==="c")an=Zt(nn)+an,nn="";else{nn=+nn;var Mn=nn<0||1/nn<0;if(nn=isNaN(nn)?vt:Zt(Math.abs(nn),Ft),Nt&&(nn=formatTrim(nn)),Mn&&+nn==0&&$t!=="+"&&(Mn=!1),cn=(Mn?$t==="("?$t:yt:$t==="-"||$t==="("?"":$t)+cn,an=(Ot==="s"?prefixes[8+prefixExponent/3]:"")+an+(Mn&&$t==="("?")":""),rn){for(mn=-1,En=nn.length;++mn<En;)if(Cn=nn.charCodeAt(mn),48>Cn||Cn>57){an=(Cn===46?at+nn.slice(mn+1):nn.slice(mn))+an,nn=nn.slice(0,mn);break}}}Pt&&!Et&&(nn=tt(nn,1/0));var un=cn.length+nn.length+an.length,Tn=un<wt?new Array(wt-un+1).join(Ct):"";switch(Pt&&Et&&(nn=tt(Tn+nn,Tn.length?wt-an.length:1/0),Tn=""),Tt){case"<":nn=cn+nn+an+Tn;break;case"=":nn=cn+Tn+nn+an;break;case"^":nn=Tn.slice(0,un=Tn.length>>1)+cn+nn+an+Tn.slice(un);break;default:nn=Tn+cn+nn+an;break}return lt(nn)}return Gt.toString=function(){return Mt+""},Gt}function bt(Mt,Ct){var Tt=_t((Mt=formatSpecifier(Mt),Mt.type="f",Mt)),$t=Math.max(-8,Math.min(8,Math.floor(exponent(Ct)/3)))*3,Rt=Math.pow(10,-$t),Et=prefixes[8+$t/3];return function(wt){return Tt(Rt*wt)+Et}}return{format:_t,formatPrefix:bt}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(nt){return locale=formatLocale(nt),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(nt){return Math.max(0,-exponent(Math.abs(nt)))}function precisionPrefix(nt,tt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(tt)/3)))*3-exponent(Math.abs(nt)))}function precisionRound(nt,tt){return nt=Math.abs(nt),tt=Math.abs(tt)-nt,Math.max(0,exponent(tt)-exponent(nt))+1}var ndarrayOps={};function unique_pred(nt,tt){for(var rt=1,st=nt.length,at=nt[0],lt=nt[0],dt=1;dt<st;++dt)if(lt=at,at=nt[dt],tt(at,lt)){if(dt===rt){rt++;continue}nt[rt++]=at}return nt.length=rt,nt}function unique_eq(nt){for(var tt=1,rt=nt.length,st=nt[0],at=nt[0],lt=1;lt<rt;++lt,at=st)if(at=st,st=nt[lt],st!==at){if(lt===tt){tt++;continue}nt[tt++]=st}return nt.length=tt,nt}function unique(nt,tt,rt){return nt.length===0?nt:tt?(rt||nt.sort(tt),unique_pred(nt,tt)):(rt||nt.sort(),unique_eq(nt))}var uniq$1=unique,uniq=uniq$1;function innerFill(nt,tt,rt){var st=nt.length,at=tt.arrayArgs.length,lt=tt.indexArgs.length>0,dt=[],yt=[],vt=0,_t=0,bt,Mt;for(bt=0;bt<st;++bt)yt.push(["i",bt,"=0"].join(""));for(Mt=0;Mt<at;++Mt)for(bt=0;bt<st;++bt)_t=vt,vt=nt[bt],bt===0?yt.push(["d",Mt,"s",bt,"=t",Mt,"p",vt].join("")):yt.push(["d",Mt,"s",bt,"=(t",Mt,"p",vt,"-s",_t,"*t",Mt,"p",_t,")"].join(""));for(yt.length>0&&dt.push("var "+yt.join(",")),bt=st-1;bt>=0;--bt)vt=nt[bt],dt.push(["for(i",bt,"=0;i",bt,"<s",vt,";++i",bt,"){"].join(""));for(dt.push(rt),bt=0;bt<st;++bt){for(_t=vt,vt=nt[bt],Mt=0;Mt<at;++Mt)dt.push(["p",Mt,"+=d",Mt,"s",bt].join(""));lt&&(bt>0&&dt.push(["index[",_t,"]-=s",_t].join("")),dt.push(["++index[",vt,"]"].join(""))),dt.push("}")}return dt.join(`
`)}function outerFill(nt,tt,rt,st){for(var at=tt.length,lt=rt.arrayArgs.length,dt=rt.blockSize,yt=rt.indexArgs.length>0,vt=[],_t=0;_t<lt;++_t)vt.push(["var offset",_t,"=p",_t].join(""));for(var _t=nt;_t<at;++_t)vt.push(["for(var j"+_t+"=SS[",tt[_t],"]|0;j",_t,">0;){"].join("")),vt.push(["if(j",_t,"<",dt,"){"].join("")),vt.push(["s",tt[_t],"=j",_t].join("")),vt.push(["j",_t,"=0"].join("")),vt.push(["}else{s",tt[_t],"=",dt].join("")),vt.push(["j",_t,"-=",dt,"}"].join("")),yt&&vt.push(["index[",tt[_t],"]=j",_t].join(""));for(var _t=0;_t<lt;++_t){for(var bt=["offset"+_t],Mt=nt;Mt<at;++Mt)bt.push(["j",Mt,"*t",_t,"p",tt[Mt]].join(""));vt.push(["p",_t,"=(",bt.join("+"),")"].join(""))}vt.push(innerFill(tt,rt,st));for(var _t=nt;_t<at;++_t)vt.push("}");return vt.join(`
`)}function countMatches(nt){for(var tt=0,rt=nt[0].length;tt<rt;){for(var st=1;st<nt.length;++st)if(nt[st][tt]!==nt[0][tt])return tt;++tt}return tt}function processBlock(nt,tt,rt){for(var st=nt.body,at=[],lt=[],dt=0;dt<nt.args.length;++dt){var yt=nt.args[dt];if(!(yt.count<=0)){var vt=new RegExp(yt.name,"g"),_t="",bt=tt.arrayArgs.indexOf(dt);switch(tt.argTypes[dt]){case"offset":var Mt=tt.offsetArgIndex.indexOf(dt),Ct=tt.offsetArgs[Mt];bt=Ct.array,_t="+q"+Mt;case"array":_t="p"+bt+_t;var Tt="l"+dt,$t="a"+bt;if(tt.arrayBlockIndices[bt]===0)yt.count===1?rt[bt]==="generic"?yt.lvalue?(at.push(["var ",Tt,"=",$t,".get(",_t,")"].join("")),st=st.replace(vt,Tt),lt.push([$t,".set(",_t,",",Tt,")"].join(""))):st=st.replace(vt,[$t,".get(",_t,")"].join("")):st=st.replace(vt,[$t,"[",_t,"]"].join("")):rt[bt]==="generic"?(at.push(["var ",Tt,"=",$t,".get(",_t,")"].join("")),st=st.replace(vt,Tt),yt.lvalue&&lt.push([$t,".set(",_t,",",Tt,")"].join(""))):(at.push(["var ",Tt,"=",$t,"[",_t,"]"].join("")),st=st.replace(vt,Tt),yt.lvalue&&lt.push([$t,"[",_t,"]=",Tt].join("")));else{for(var Rt=[yt.name],Et=[_t],wt=0;wt<Math.abs(tt.arrayBlockIndices[bt]);wt++)Rt.push("\\s*\\[([^\\]]+)\\]"),Et.push("$"+(wt+1)+"*t"+bt+"b"+wt);if(vt=new RegExp(Rt.join(""),"g"),_t=Et.join("+"),rt[bt]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");st=st.replace(vt,[$t,"[",_t,"]"].join(""))}break;case"scalar":st=st.replace(vt,"Y"+tt.scalarArgs.indexOf(dt));break;case"index":st=st.replace(vt,"index");break;case"shape":st=st.replace(vt,"shape");break}}}return[at.join(`
`),st,lt.join(`
`)].join(`
`).trim()}function typeSummary(nt){for(var tt=new Array(nt.length),rt=!0,st=0;st<nt.length;++st){var at=nt[st],lt=at.match(/\d+/);lt?lt=lt[0]:lt="",at.charAt(0)===0?tt[st]="u"+at.charAt(1)+lt:tt[st]=at.charAt(0)+lt,st>0&&(rt=rt&&tt[st]===tt[st-1])}return rt?tt[0]:tt.join("")}function generateCWiseOp(nt,tt){for(var rt=tt[1].length-Math.abs(nt.arrayBlockIndices[0])|0,st=new Array(nt.arrayArgs.length),at=new Array(nt.arrayArgs.length),lt=0;lt<nt.arrayArgs.length;++lt)at[lt]=tt[2*lt],st[lt]=tt[2*lt+1];for(var dt=[],yt=[],vt=[],_t=[],bt=[],lt=0;lt<nt.arrayArgs.length;++lt){nt.arrayBlockIndices[lt]<0?(vt.push(0),_t.push(rt),dt.push(rt),yt.push(rt+nt.arrayBlockIndices[lt])):(vt.push(nt.arrayBlockIndices[lt]),_t.push(nt.arrayBlockIndices[lt]+rt),dt.push(0),yt.push(nt.arrayBlockIndices[lt]));for(var Mt=[],Ct=0;Ct<st[lt].length;Ct++)vt[lt]<=st[lt][Ct]&&st[lt][Ct]<_t[lt]&&Mt.push(st[lt][Ct]-vt[lt]);bt.push(Mt)}for(var Tt=["SS"],$t=["'use strict'"],Rt=[],Ct=0;Ct<rt;++Ct)Rt.push(["s",Ct,"=SS[",Ct,"]"].join(""));for(var lt=0;lt<nt.arrayArgs.length;++lt){Tt.push("a"+lt),Tt.push("t"+lt),Tt.push("p"+lt);for(var Ct=0;Ct<rt;++Ct)Rt.push(["t",lt,"p",Ct,"=t",lt,"[",vt[lt]+Ct,"]"].join(""));for(var Ct=0;Ct<Math.abs(nt.arrayBlockIndices[lt]);++Ct)Rt.push(["t",lt,"b",Ct,"=t",lt,"[",dt[lt]+Ct,"]"].join(""))}for(var lt=0;lt<nt.scalarArgs.length;++lt)Tt.push("Y"+lt);if(nt.shapeArgs.length>0&&Rt.push("shape=SS.slice(0)"),nt.indexArgs.length>0){for(var Et=new Array(rt),lt=0;lt<rt;++lt)Et[lt]="0";Rt.push(["index=[",Et.join(","),"]"].join(""))}for(var lt=0;lt<nt.offsetArgs.length;++lt){for(var wt=nt.offsetArgs[lt],Pt=[],Ct=0;Ct<wt.offset.length;++Ct)wt.offset[Ct]!==0&&(wt.offset[Ct]===1?Pt.push(["t",wt.array,"p",Ct].join("")):Pt.push([wt.offset[Ct],"*t",wt.array,"p",Ct].join("")));Pt.length===0?Rt.push("q"+lt+"=0"):Rt.push(["q",lt,"=",Pt.join("+")].join(""))}var Ft=uniq([].concat(nt.pre.thisVars).concat(nt.body.thisVars).concat(nt.post.thisVars));Rt=Rt.concat(Ft),Rt.length>0&&$t.push("var "+Rt.join(","));for(var lt=0;lt<nt.arrayArgs.length;++lt)$t.push("p"+lt+"|=0");nt.pre.body.length>3&&$t.push(processBlock(nt.pre,nt,at));var Nt=processBlock(nt.body,nt,at),Ot=countMatches(bt);Ot<rt?$t.push(outerFill(Ot,bt[0],nt,Nt)):$t.push(innerFill(bt[0],nt,Nt)),nt.post.body.length>3&&$t.push(processBlock(nt.post,nt,at)),nt.debug&&console.log("-----Generated cwise routine for ",tt,`:
`+$t.join(`
`)+`
----------`);var Bt=[nt.funcName||"unnamed","_cwise_loop_",st[0].join("s"),"m",Ot,typeSummary(at)].join(""),Xt=new Function(["function ",Bt,"(",Tt.join(","),"){",$t.join(`
`),"} return ",Bt].join(""));return Xt()}var compile$1=generateCWiseOp,compile=compile$1;function createThunk$1(nt){var tt=["'use strict'","var CACHED={}"],rt=[],st=nt.funcName+"_cwise_thunk";tt.push(["return function ",st,"(",nt.shimArgs.join(","),"){"].join(""));for(var at=[],lt=[],dt=[["array",nt.arrayArgs[0],".shape.slice(",Math.max(0,nt.arrayBlockIndices[0]),nt.arrayBlockIndices[0]<0?","+nt.arrayBlockIndices[0]+")":")"].join("")],yt=[],vt=[],_t=0;_t<nt.arrayArgs.length;++_t){var bt=nt.arrayArgs[_t];rt.push(["t",bt,"=array",bt,".dtype,","r",bt,"=array",bt,".order"].join("")),at.push("t"+bt),at.push("r"+bt),lt.push("t"+bt),lt.push("r"+bt+".join()"),dt.push("array"+bt+".data"),dt.push("array"+bt+".stride"),dt.push("array"+bt+".offset|0"),_t>0&&(yt.push("array"+nt.arrayArgs[0]+".shape.length===array"+bt+".shape.length+"+(Math.abs(nt.arrayBlockIndices[0])-Math.abs(nt.arrayBlockIndices[_t]))),vt.push("array"+nt.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,nt.arrayBlockIndices[0])+"]===array"+bt+".shape[shapeIndex+"+Math.max(0,nt.arrayBlockIndices[_t])+"]"))}nt.arrayArgs.length>1&&(tt.push("if (!("+yt.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),tt.push("for(var shapeIndex=array"+nt.arrayArgs[0]+".shape.length-"+Math.abs(nt.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),tt.push("if (!("+vt.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),tt.push("}"));for(var _t=0;_t<nt.scalarArgs.length;++_t)dt.push("scalar"+nt.scalarArgs[_t]);rt.push(["type=[",lt.join(","),"].join()"].join("")),rt.push("proc=CACHED[type]"),tt.push("var "+rt.join(",")),tt.push(["if(!proc){","CACHED[type]=proc=compile([",at.join(","),"])}","return proc(",dt.join(","),")}"].join("")),nt.debug&&console.log(`-----Generated thunk:
`+tt.join(`
`)+`
----------`);var Mt=new Function("compile",tt.join(`
`));return Mt(compile.bind(void 0,nt))}var thunk=createThunk$1,createThunk=thunk;function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(nt){var tt=new Procedure;tt.pre=nt.pre,tt.body=nt.body,tt.post=nt.post;var rt=nt.args.slice(0);tt.argTypes=rt;for(var st=0;st<rt.length;++st){var at=rt[st];if(at==="array"||typeof at=="object"&&at.blockIndices){if(tt.argTypes[st]="array",tt.arrayArgs.push(st),tt.arrayBlockIndices.push(at.blockIndices?at.blockIndices:0),tt.shimArgs.push("array"+st),st<tt.pre.args.length&&tt.pre.args[st].count>0)throw new Error("cwise: pre() block may not reference array args");if(st<tt.post.args.length&&tt.post.args[st].count>0)throw new Error("cwise: post() block may not reference array args")}else if(at==="scalar")tt.scalarArgs.push(st),tt.shimArgs.push("scalar"+st);else if(at==="index"){if(tt.indexArgs.push(st),st<tt.pre.args.length&&tt.pre.args[st].count>0)throw new Error("cwise: pre() block may not reference array index");if(st<tt.body.args.length&&tt.body.args[st].lvalue)throw new Error("cwise: body() block may not write to array index");if(st<tt.post.args.length&&tt.post.args[st].count>0)throw new Error("cwise: post() block may not reference array index")}else if(at==="shape"){if(tt.shapeArgs.push(st),st<tt.pre.args.length&&tt.pre.args[st].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(st<tt.body.args.length&&tt.body.args[st].lvalue)throw new Error("cwise: body() block may not write to array shape");if(st<tt.post.args.length&&tt.post.args[st].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof at=="object"&&at.offset)tt.argTypes[st]="offset",tt.offsetArgs.push({array:at.array,offset:at.offset}),tt.offsetArgIndex.push(st);else throw new Error("cwise: Unknown argument type "+rt[st])}if(tt.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(tt.pre.args.length>rt.length)throw new Error("cwise: Too many arguments in pre() block");if(tt.body.args.length>rt.length)throw new Error("cwise: Too many arguments in body() block");if(tt.post.args.length>rt.length)throw new Error("cwise: Too many arguments in post() block");return tt.debug=!!nt.printCode||!!nt.debug,tt.funcName=nt.funcName||"cwise",tt.blockSize=nt.blockSize||64,createThunk(tt)}var compiler=compileCwise;(function(nt){var tt=compiler,rt={body:"",args:[],thisVars:[],localVars:[]};function st(Ct){if(!Ct)return rt;for(var Tt=0;Tt<Ct.args.length;++Tt){var $t=Ct.args[Tt];Tt===0?Ct.args[Tt]={name:$t,lvalue:!0,rvalue:!!Ct.rvalue,count:Ct.count||1}:Ct.args[Tt]={name:$t,lvalue:!1,rvalue:!0,count:1}}return Ct.thisVars||(Ct.thisVars=[]),Ct.localVars||(Ct.localVars=[]),Ct}function at(Ct){return tt({args:Ct.args,pre:st(Ct.pre),body:st(Ct.body),post:st(Ct.proc),funcName:Ct.funcName})}function lt(Ct){for(var Tt=[],$t=0;$t<Ct.args.length;++$t)Tt.push("a"+$t);var Rt=new Function("P",["return function ",Ct.funcName,"_ndarrayops(",Tt.join(","),") {P(",Tt.join(","),");return a0}"].join(""));return Rt(at(Ct))}var dt={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var Ct in dt){var Tt=dt[Ct];nt[Ct]=lt({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+Tt+"c"},funcName:Ct}),nt[Ct+"eq"]=lt({args:["array","array"],body:{args:["a","b"],body:"a"+Tt+"=b"},rvalue:!0,funcName:Ct+"eq"}),nt[Ct+"s"]=lt({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+Tt+"s"},funcName:Ct+"s"}),nt[Ct+"seq"]=lt({args:["array","scalar"],body:{args:["a","s"],body:"a"+Tt+"=s"},rvalue:!0,funcName:Ct+"seq"})}})();var yt={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var Ct in yt){var Tt=yt[Ct];nt[Ct]=lt({args:["array","array"],body:{args:["a","b"],body:"a="+Tt+"b"},funcName:Ct}),nt[Ct+"eq"]=lt({args:["array"],body:{args:["a"],body:"a="+Tt+"a"},rvalue:!0,count:2,funcName:Ct+"eq"})}})();var vt={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var Ct in vt){var Tt=vt[Ct];nt[Ct]=lt({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+Tt+"c"},funcName:Ct}),nt[Ct+"s"]=lt({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+Tt+"s"},funcName:Ct+"s"}),nt[Ct+"eq"]=lt({args:["array","array"],body:{args:["a","b"],body:"a=a"+Tt+"b"},rvalue:!0,count:2,funcName:Ct+"eq"}),nt[Ct+"seq"]=lt({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+Tt+"s"},rvalue:!0,count:2,funcName:Ct+"seq"})}})();var _t=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var Ct=0;Ct<_t.length;++Ct){var Tt=_t[Ct];nt[Tt]=lt({args:["array","array"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:Tt}),nt[Tt+"eq"]=lt({args:["array"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:Tt+"eq"})}})();var bt=["max","min","atan2","pow"];(function(){for(var Ct=0;Ct<bt.length;++Ct){var Tt=bt[Ct];nt[Tt]=lt({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:Tt}),nt[Tt+"s"]=lt({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:Tt+"s"}),nt[Tt+"eq"]=lt({args:["array","array"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:Tt+"eq"}),nt[Tt+"seq"]=lt({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:Tt+"seq"})}})();var Mt=["atan2","pow"];(function(){for(var Ct=0;Ct<Mt.length;++Ct){var Tt=Mt[Ct];nt[Tt+"op"]=lt({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:Tt+"op"}),nt[Tt+"ops"]=lt({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:Tt+"ops"}),nt[Tt+"opeq"]=lt({args:["array","array"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:Tt+"opeq"}),nt[Tt+"opseq"]=lt({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+Tt,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:Tt+"opseq"})}})(),nt.any=tt({args:["array"],pre:rt,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),nt.all=tt({args:["array"],pre:rt,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),nt.sum=tt({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),nt.prod=tt({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),nt.norm2squared=tt({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),nt.norm2=tt({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),nt.norminf=tt({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),nt.norm1=tt({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),nt.sup=tt({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),nt.inf=tt({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),nt.argmin=tt({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),nt.argmax=tt({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),nt.random=lt({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),nt.assign=lt({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),nt.assigns=lt({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),nt.equals=tt({args:["array","array"],pre:rt,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(ndarrayOps);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="169",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",LinearTransfer="linear",SRGBTransfer="srgb",Rec709Primaries="rec709",P3Primaries="p3",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(tt,rt){this._listeners===void 0&&(this._listeners={});const st=this._listeners;st[tt]===void 0&&(st[tt]=[]),st[tt].indexOf(rt)===-1&&st[tt].push(rt)}hasEventListener(tt,rt){if(this._listeners===void 0)return!1;const st=this._listeners;return st[tt]!==void 0&&st[tt].indexOf(rt)!==-1}removeEventListener(tt,rt){if(this._listeners===void 0)return;const at=this._listeners[tt];if(at!==void 0){const lt=at.indexOf(rt);lt!==-1&&at.splice(lt,1)}}dispatchEvent(tt){if(this._listeners===void 0)return;const st=this._listeners[tt.type];if(st!==void 0){tt.target=this;const at=st.slice(0);for(let lt=0,dt=at.length;lt<dt;lt++)at[lt].call(this,tt);tt.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const nt=Math.random()*4294967295|0,tt=Math.random()*4294967295|0,rt=Math.random()*4294967295|0,st=Math.random()*4294967295|0;return(_lut[nt&255]+_lut[nt>>8&255]+_lut[nt>>16&255]+_lut[nt>>24&255]+"-"+_lut[tt&255]+_lut[tt>>8&255]+"-"+_lut[tt>>16&15|64]+_lut[tt>>24&255]+"-"+_lut[rt&63|128]+_lut[rt>>8&255]+"-"+_lut[rt>>16&255]+_lut[rt>>24&255]+_lut[st&255]+_lut[st>>8&255]+_lut[st>>16&255]+_lut[st>>24&255]).toLowerCase()}function clamp(nt,tt,rt){return Math.max(tt,Math.min(rt,nt))}function euclideanModulo(nt,tt){return(nt%tt+tt)%tt}function mapLinear(nt,tt,rt,st,at){return st+(nt-tt)*(at-st)/(rt-tt)}function inverseLerp(nt,tt,rt){return nt!==tt?(rt-nt)/(tt-nt):0}function lerp(nt,tt,rt){return(1-rt)*nt+rt*tt}function damp(nt,tt,rt,st){return lerp(nt,tt,1-Math.exp(-rt*st))}function pingpong(nt,tt=1){return tt-Math.abs(euclideanModulo(nt,tt*2)-tt)}function smoothstep(nt,tt,rt){return nt<=tt?0:nt>=rt?1:(nt=(nt-tt)/(rt-tt),nt*nt*(3-2*nt))}function smootherstep(nt,tt,rt){return nt<=tt?0:nt>=rt?1:(nt=(nt-tt)/(rt-tt),nt*nt*nt*(nt*(nt*6-15)+10))}function randInt(nt,tt){return nt+Math.floor(Math.random()*(tt-nt+1))}function randFloat(nt,tt){return nt+Math.random()*(tt-nt)}function randFloatSpread(nt){return nt*(.5-Math.random())}function seededRandom(nt){nt!==void 0&&(_seed=nt);let tt=_seed+=1831565813;return tt=Math.imul(tt^tt>>>15,tt|1),tt^=tt+Math.imul(tt^tt>>>7,tt|61),((tt^tt>>>14)>>>0)/4294967296}function degToRad(nt){return nt*DEG2RAD}function radToDeg(nt){return nt*RAD2DEG}function isPowerOfTwo(nt){return(nt&nt-1)===0&&nt!==0}function ceilPowerOfTwo(nt){return Math.pow(2,Math.ceil(Math.log(nt)/Math.LN2))}function floorPowerOfTwo(nt){return Math.pow(2,Math.floor(Math.log(nt)/Math.LN2))}function setQuaternionFromProperEuler(nt,tt,rt,st,at){const lt=Math.cos,dt=Math.sin,yt=lt(rt/2),vt=dt(rt/2),_t=lt((tt+st)/2),bt=dt((tt+st)/2),Mt=lt((tt-st)/2),Ct=dt((tt-st)/2),Tt=lt((st-tt)/2),$t=dt((st-tt)/2);switch(at){case"XYX":nt.set(yt*bt,vt*Mt,vt*Ct,yt*_t);break;case"YZY":nt.set(vt*Ct,yt*bt,vt*Mt,yt*_t);break;case"ZXZ":nt.set(vt*Mt,vt*Ct,yt*bt,yt*_t);break;case"XZX":nt.set(yt*bt,vt*$t,vt*Tt,yt*_t);break;case"YXY":nt.set(vt*Tt,yt*bt,vt*$t,yt*_t);break;case"ZYZ":nt.set(vt*$t,vt*Tt,yt*bt,yt*_t);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+at)}}function denormalize(nt,tt){switch(tt.constructor){case Float32Array:return nt;case Uint32Array:return nt/4294967295;case Uint16Array:return nt/65535;case Uint8Array:return nt/255;case Int32Array:return Math.max(nt/2147483647,-1);case Int16Array:return Math.max(nt/32767,-1);case Int8Array:return Math.max(nt/127,-1);default:throw new Error("Invalid component type.")}}function normalize$1(nt,tt){switch(tt.constructor){case Float32Array:return nt;case Uint32Array:return Math.round(nt*4294967295);case Uint16Array:return Math.round(nt*65535);case Uint8Array:return Math.round(nt*255);case Int32Array:return Math.round(nt*2147483647);case Int16Array:return Math.round(nt*32767);case Int8Array:return Math.round(nt*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize:normalize$1,denormalize};class Vector2{constructor(tt=0,rt=0){Vector2.prototype.isVector2=!0,this.x=tt,this.y=rt}get width(){return this.x}set width(tt){this.x=tt}get height(){return this.y}set height(tt){this.y=tt}set(tt,rt){return this.x=tt,this.y=rt,this}setScalar(tt){return this.x=tt,this.y=tt,this}setX(tt){return this.x=tt,this}setY(tt){return this.y=tt,this}setComponent(tt,rt){switch(tt){case 0:this.x=rt;break;case 1:this.y=rt;break;default:throw new Error("index is out of range: "+tt)}return this}getComponent(tt){switch(tt){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+tt)}}clone(){return new this.constructor(this.x,this.y)}copy(tt){return this.x=tt.x,this.y=tt.y,this}add(tt){return this.x+=tt.x,this.y+=tt.y,this}addScalar(tt){return this.x+=tt,this.y+=tt,this}addVectors(tt,rt){return this.x=tt.x+rt.x,this.y=tt.y+rt.y,this}addScaledVector(tt,rt){return this.x+=tt.x*rt,this.y+=tt.y*rt,this}sub(tt){return this.x-=tt.x,this.y-=tt.y,this}subScalar(tt){return this.x-=tt,this.y-=tt,this}subVectors(tt,rt){return this.x=tt.x-rt.x,this.y=tt.y-rt.y,this}multiply(tt){return this.x*=tt.x,this.y*=tt.y,this}multiplyScalar(tt){return this.x*=tt,this.y*=tt,this}divide(tt){return this.x/=tt.x,this.y/=tt.y,this}divideScalar(tt){return this.multiplyScalar(1/tt)}applyMatrix3(tt){const rt=this.x,st=this.y,at=tt.elements;return this.x=at[0]*rt+at[3]*st+at[6],this.y=at[1]*rt+at[4]*st+at[7],this}min(tt){return this.x=Math.min(this.x,tt.x),this.y=Math.min(this.y,tt.y),this}max(tt){return this.x=Math.max(this.x,tt.x),this.y=Math.max(this.y,tt.y),this}clamp(tt,rt){return this.x=Math.max(tt.x,Math.min(rt.x,this.x)),this.y=Math.max(tt.y,Math.min(rt.y,this.y)),this}clampScalar(tt,rt){return this.x=Math.max(tt,Math.min(rt,this.x)),this.y=Math.max(tt,Math.min(rt,this.y)),this}clampLength(tt,rt){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(tt,Math.min(rt,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(tt){return this.x*tt.x+this.y*tt.y}cross(tt){return this.x*tt.y-this.y*tt.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(tt){const rt=Math.sqrt(this.lengthSq()*tt.lengthSq());if(rt===0)return Math.PI/2;const st=this.dot(tt)/rt;return Math.acos(clamp(st,-1,1))}distanceTo(tt){return Math.sqrt(this.distanceToSquared(tt))}distanceToSquared(tt){const rt=this.x-tt.x,st=this.y-tt.y;return rt*rt+st*st}manhattanDistanceTo(tt){return Math.abs(this.x-tt.x)+Math.abs(this.y-tt.y)}setLength(tt){return this.normalize().multiplyScalar(tt)}lerp(tt,rt){return this.x+=(tt.x-this.x)*rt,this.y+=(tt.y-this.y)*rt,this}lerpVectors(tt,rt,st){return this.x=tt.x+(rt.x-tt.x)*st,this.y=tt.y+(rt.y-tt.y)*st,this}equals(tt){return tt.x===this.x&&tt.y===this.y}fromArray(tt,rt=0){return this.x=tt[rt],this.y=tt[rt+1],this}toArray(tt=[],rt=0){return tt[rt]=this.x,tt[rt+1]=this.y,tt}fromBufferAttribute(tt,rt){return this.x=tt.getX(rt),this.y=tt.getY(rt),this}rotateAround(tt,rt){const st=Math.cos(rt),at=Math.sin(rt),lt=this.x-tt.x,dt=this.y-tt.y;return this.x=lt*st-dt*at+tt.x,this.y=lt*at+dt*st+tt.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(tt,rt,st,at,lt,dt,yt,vt,_t){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],tt!==void 0&&this.set(tt,rt,st,at,lt,dt,yt,vt,_t)}set(tt,rt,st,at,lt,dt,yt,vt,_t){const bt=this.elements;return bt[0]=tt,bt[1]=at,bt[2]=yt,bt[3]=rt,bt[4]=lt,bt[5]=vt,bt[6]=st,bt[7]=dt,bt[8]=_t,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(tt){const rt=this.elements,st=tt.elements;return rt[0]=st[0],rt[1]=st[1],rt[2]=st[2],rt[3]=st[3],rt[4]=st[4],rt[5]=st[5],rt[6]=st[6],rt[7]=st[7],rt[8]=st[8],this}extractBasis(tt,rt,st){return tt.setFromMatrix3Column(this,0),rt.setFromMatrix3Column(this,1),st.setFromMatrix3Column(this,2),this}setFromMatrix4(tt){const rt=tt.elements;return this.set(rt[0],rt[4],rt[8],rt[1],rt[5],rt[9],rt[2],rt[6],rt[10]),this}multiply(tt){return this.multiplyMatrices(this,tt)}premultiply(tt){return this.multiplyMatrices(tt,this)}multiplyMatrices(tt,rt){const st=tt.elements,at=rt.elements,lt=this.elements,dt=st[0],yt=st[3],vt=st[6],_t=st[1],bt=st[4],Mt=st[7],Ct=st[2],Tt=st[5],$t=st[8],Rt=at[0],Et=at[3],wt=at[6],Pt=at[1],Ft=at[4],Nt=at[7],Ot=at[2],Bt=at[5],Xt=at[8];return lt[0]=dt*Rt+yt*Pt+vt*Ot,lt[3]=dt*Et+yt*Ft+vt*Bt,lt[6]=dt*wt+yt*Nt+vt*Xt,lt[1]=_t*Rt+bt*Pt+Mt*Ot,lt[4]=_t*Et+bt*Ft+Mt*Bt,lt[7]=_t*wt+bt*Nt+Mt*Xt,lt[2]=Ct*Rt+Tt*Pt+$t*Ot,lt[5]=Ct*Et+Tt*Ft+$t*Bt,lt[8]=Ct*wt+Tt*Nt+$t*Xt,this}multiplyScalar(tt){const rt=this.elements;return rt[0]*=tt,rt[3]*=tt,rt[6]*=tt,rt[1]*=tt,rt[4]*=tt,rt[7]*=tt,rt[2]*=tt,rt[5]*=tt,rt[8]*=tt,this}determinant(){const tt=this.elements,rt=tt[0],st=tt[1],at=tt[2],lt=tt[3],dt=tt[4],yt=tt[5],vt=tt[6],_t=tt[7],bt=tt[8];return rt*dt*bt-rt*yt*_t-st*lt*bt+st*yt*vt+at*lt*_t-at*dt*vt}invert(){const tt=this.elements,rt=tt[0],st=tt[1],at=tt[2],lt=tt[3],dt=tt[4],yt=tt[5],vt=tt[6],_t=tt[7],bt=tt[8],Mt=bt*dt-yt*_t,Ct=yt*vt-bt*lt,Tt=_t*lt-dt*vt,$t=rt*Mt+st*Ct+at*Tt;if($t===0)return this.set(0,0,0,0,0,0,0,0,0);const Rt=1/$t;return tt[0]=Mt*Rt,tt[1]=(at*_t-bt*st)*Rt,tt[2]=(yt*st-at*dt)*Rt,tt[3]=Ct*Rt,tt[4]=(bt*rt-at*vt)*Rt,tt[5]=(at*lt-yt*rt)*Rt,tt[6]=Tt*Rt,tt[7]=(st*vt-_t*rt)*Rt,tt[8]=(dt*rt-st*lt)*Rt,this}transpose(){let tt;const rt=this.elements;return tt=rt[1],rt[1]=rt[3],rt[3]=tt,tt=rt[2],rt[2]=rt[6],rt[6]=tt,tt=rt[5],rt[5]=rt[7],rt[7]=tt,this}getNormalMatrix(tt){return this.setFromMatrix4(tt).invert().transpose()}transposeIntoArray(tt){const rt=this.elements;return tt[0]=rt[0],tt[1]=rt[3],tt[2]=rt[6],tt[3]=rt[1],tt[4]=rt[4],tt[5]=rt[7],tt[6]=rt[2],tt[7]=rt[5],tt[8]=rt[8],this}setUvTransform(tt,rt,st,at,lt,dt,yt){const vt=Math.cos(lt),_t=Math.sin(lt);return this.set(st*vt,st*_t,-st*(vt*dt+_t*yt)+dt+tt,-at*_t,at*vt,-at*(-_t*dt+vt*yt)+yt+rt,0,0,1),this}scale(tt,rt){return this.premultiply(_m3.makeScale(tt,rt)),this}rotate(tt){return this.premultiply(_m3.makeRotation(-tt)),this}translate(tt,rt){return this.premultiply(_m3.makeTranslation(tt,rt)),this}makeTranslation(tt,rt){return tt.isVector2?this.set(1,0,tt.x,0,1,tt.y,0,0,1):this.set(1,0,tt,0,1,rt,0,0,1),this}makeRotation(tt){const rt=Math.cos(tt),st=Math.sin(tt);return this.set(rt,-st,0,st,rt,0,0,0,1),this}makeScale(tt,rt){return this.set(tt,0,0,0,rt,0,0,0,1),this}equals(tt){const rt=this.elements,st=tt.elements;for(let at=0;at<9;at++)if(rt[at]!==st[at])return!1;return!0}fromArray(tt,rt=0){for(let st=0;st<9;st++)this.elements[st]=tt[st+rt];return this}toArray(tt=[],rt=0){const st=this.elements;return tt[rt]=st[0],tt[rt+1]=st[1],tt[rt+2]=st[2],tt[rt+3]=st[3],tt[rt+4]=st[4],tt[rt+5]=st[5],tt[rt+6]=st[6],tt[rt+7]=st[7],tt[rt+8]=st[8],tt}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(nt){for(let tt=nt.length-1;tt>=0;--tt)if(nt[tt]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(nt,tt){return new TYPED_ARRAYS[nt](tt)}function createElementNS(nt){return document.createElementNS("http://www.w3.org/1999/xhtml",nt)}function createCanvasElement(){const nt=createElementNS("canvas");return nt.style.display="block",nt}const _cache={};function warnOnce(nt){nt in _cache||(_cache[nt]=!0,console.warn(nt))}function probeAsync(nt,tt,rt){return new Promise(function(st,at){function lt(){switch(nt.clientWaitSync(tt,nt.SYNC_FLUSH_COMMANDS_BIT,0)){case nt.WAIT_FAILED:at();break;case nt.TIMEOUT_EXPIRED:setTimeout(lt,rt);break;default:st()}}setTimeout(lt,rt)})}function toNormalizedProjectionMatrix(nt){const tt=nt.elements;tt[2]=.5*tt[2]+.5*tt[3],tt[6]=.5*tt[6]+.5*tt[7],tt[10]=.5*tt[10]+.5*tt[11],tt[14]=.5*tt[14]+.5*tt[15]}function toReversedProjectionMatrix(nt){const tt=nt.elements;tt[11]===-1?(tt[10]=-tt[10]-1,tt[14]=-tt[14]):(tt[10]=-tt[10],tt[14]=-tt[14]+1)}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),COLOR_SPACES={[LinearSRGBColorSpace]:{transfer:LinearTransfer,primaries:Rec709Primaries,luminanceCoefficients:[.2126,.7152,.0722],toReference:nt=>nt,fromReference:nt=>nt},[SRGBColorSpace]:{transfer:SRGBTransfer,primaries:Rec709Primaries,luminanceCoefficients:[.2126,.7152,.0722],toReference:nt=>nt.convertSRGBToLinear(),fromReference:nt=>nt.convertLinearToSRGB()},[LinearDisplayP3ColorSpace]:{transfer:LinearTransfer,primaries:P3Primaries,luminanceCoefficients:[.2289,.6917,.0793],toReference:nt=>nt.applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:nt=>nt.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3)},[DisplayP3ColorSpace]:{transfer:SRGBTransfer,primaries:P3Primaries,luminanceCoefficients:[.2289,.6917,.0793],toReference:nt=>nt.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:nt=>nt.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}},SUPPORTED_WORKING_COLOR_SPACES=new Set([LinearSRGBColorSpace,LinearDisplayP3ColorSpace]),ColorManagement={enabled:!0,_workingColorSpace:LinearSRGBColorSpace,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(nt){if(!SUPPORTED_WORKING_COLOR_SPACES.has(nt))throw new Error(`Unsupported working color space, "${nt}".`);this._workingColorSpace=nt},convert:function(nt,tt,rt){if(this.enabled===!1||tt===rt||!tt||!rt)return nt;const st=COLOR_SPACES[tt].toReference,at=COLOR_SPACES[rt].fromReference;return at(st(nt))},fromWorkingColorSpace:function(nt,tt){return this.convert(nt,this._workingColorSpace,tt)},toWorkingColorSpace:function(nt,tt){return this.convert(nt,tt,this._workingColorSpace)},getPrimaries:function(nt){return COLOR_SPACES[nt].primaries},getTransfer:function(nt){return nt===NoColorSpace?LinearTransfer:COLOR_SPACES[nt].transfer},getLuminanceCoefficients:function(nt,tt=this._workingColorSpace){return nt.fromArray(COLOR_SPACES[tt].luminanceCoefficients)}};function SRGBToLinear(nt){return nt<.04045?nt*.0773993808:Math.pow(nt*.9478672986+.0521327014,2.4)}function LinearToSRGB(nt){return nt<.0031308?nt*12.92:1.055*Math.pow(nt,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(tt){if(/^data:/i.test(tt.src)||typeof HTMLCanvasElement>"u")return tt.src;let rt;if(tt instanceof HTMLCanvasElement)rt=tt;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=tt.width,_canvas.height=tt.height;const st=_canvas.getContext("2d");tt instanceof ImageData?st.putImageData(tt,0,0):st.drawImage(tt,0,0,tt.width,tt.height),rt=_canvas}return rt.width>2048||rt.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",tt),rt.toDataURL("image/jpeg",.6)):rt.toDataURL("image/png")}static sRGBToLinear(tt){if(typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&tt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&tt instanceof ImageBitmap){const rt=createElementNS("canvas");rt.width=tt.width,rt.height=tt.height;const st=rt.getContext("2d");st.drawImage(tt,0,0,tt.width,tt.height);const at=st.getImageData(0,0,tt.width,tt.height),lt=at.data;for(let dt=0;dt<lt.length;dt++)lt[dt]=SRGBToLinear(lt[dt]/255)*255;return st.putImageData(at,0,0),rt}else if(tt.data){const rt=tt.data.slice(0);for(let st=0;st<rt.length;st++)rt instanceof Uint8Array||rt instanceof Uint8ClampedArray?rt[st]=Math.floor(SRGBToLinear(rt[st]/255)*255):rt[st]=SRGBToLinear(rt[st]);return{data:rt,width:tt.width,height:tt.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),tt}}let _sourceId=0;class Source{constructor(tt=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=tt,this.dataReady=!0,this.version=0}set needsUpdate(tt){tt===!0&&this.version++}toJSON(tt){const rt=tt===void 0||typeof tt=="string";if(!rt&&tt.images[this.uuid]!==void 0)return tt.images[this.uuid];const st={uuid:this.uuid,url:""},at=this.data;if(at!==null){let lt;if(Array.isArray(at)){lt=[];for(let dt=0,yt=at.length;dt<yt;dt++)at[dt].isDataTexture?lt.push(serializeImage(at[dt].image)):lt.push(serializeImage(at[dt]))}else lt=serializeImage(at);st.url=lt}return rt||(tt.images[this.uuid]=st),st}}function serializeImage(nt){return typeof HTMLImageElement<"u"&&nt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&nt instanceof ImageBitmap?ImageUtils.getDataURL(nt):nt.data?{data:Array.from(nt.data),width:nt.width,height:nt.height,type:nt.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(tt=Texture.DEFAULT_IMAGE,rt=Texture.DEFAULT_MAPPING,st=ClampToEdgeWrapping,at=ClampToEdgeWrapping,lt=LinearFilter,dt=LinearMipmapLinearFilter,yt=RGBAFormat,vt=UnsignedByteType,_t=Texture.DEFAULT_ANISOTROPY,bt=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(tt),this.mipmaps=[],this.mapping=rt,this.channel=0,this.wrapS=st,this.wrapT=at,this.magFilter=lt,this.minFilter=dt,this.anisotropy=_t,this.format=yt,this.internalFormat=null,this.type=vt,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=bt,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(tt=null){this.source.data=tt}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(tt){return this.name=tt.name,this.source=tt.source,this.mipmaps=tt.mipmaps.slice(0),this.mapping=tt.mapping,this.channel=tt.channel,this.wrapS=tt.wrapS,this.wrapT=tt.wrapT,this.magFilter=tt.magFilter,this.minFilter=tt.minFilter,this.anisotropy=tt.anisotropy,this.format=tt.format,this.internalFormat=tt.internalFormat,this.type=tt.type,this.offset.copy(tt.offset),this.repeat.copy(tt.repeat),this.center.copy(tt.center),this.rotation=tt.rotation,this.matrixAutoUpdate=tt.matrixAutoUpdate,this.matrix.copy(tt.matrix),this.generateMipmaps=tt.generateMipmaps,this.premultiplyAlpha=tt.premultiplyAlpha,this.flipY=tt.flipY,this.unpackAlignment=tt.unpackAlignment,this.colorSpace=tt.colorSpace,this.userData=JSON.parse(JSON.stringify(tt.userData)),this.needsUpdate=!0,this}toJSON(tt){const rt=tt===void 0||typeof tt=="string";if(!rt&&tt.textures[this.uuid]!==void 0)return tt.textures[this.uuid];const st={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(tt).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(st.userData=this.userData),rt||(tt.textures[this.uuid]=st),st}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(tt){if(this.mapping!==UVMapping)return tt;if(tt.applyMatrix3(this.matrix),tt.x<0||tt.x>1)switch(this.wrapS){case RepeatWrapping:tt.x=tt.x-Math.floor(tt.x);break;case ClampToEdgeWrapping:tt.x=tt.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(tt.x)%2)===1?tt.x=Math.ceil(tt.x)-tt.x:tt.x=tt.x-Math.floor(tt.x);break}if(tt.y<0||tt.y>1)switch(this.wrapT){case RepeatWrapping:tt.y=tt.y-Math.floor(tt.y);break;case ClampToEdgeWrapping:tt.y=tt.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(tt.y)%2)===1?tt.y=Math.ceil(tt.y)-tt.y:tt.y=tt.y-Math.floor(tt.y);break}return this.flipY&&(tt.y=1-tt.y),tt}set needsUpdate(tt){tt===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(tt){tt===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(tt=0,rt=0,st=0,at=1){Vector4.prototype.isVector4=!0,this.x=tt,this.y=rt,this.z=st,this.w=at}get width(){return this.z}set width(tt){this.z=tt}get height(){return this.w}set height(tt){this.w=tt}set(tt,rt,st,at){return this.x=tt,this.y=rt,this.z=st,this.w=at,this}setScalar(tt){return this.x=tt,this.y=tt,this.z=tt,this.w=tt,this}setX(tt){return this.x=tt,this}setY(tt){return this.y=tt,this}setZ(tt){return this.z=tt,this}setW(tt){return this.w=tt,this}setComponent(tt,rt){switch(tt){case 0:this.x=rt;break;case 1:this.y=rt;break;case 2:this.z=rt;break;case 3:this.w=rt;break;default:throw new Error("index is out of range: "+tt)}return this}getComponent(tt){switch(tt){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+tt)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(tt){return this.x=tt.x,this.y=tt.y,this.z=tt.z,this.w=tt.w!==void 0?tt.w:1,this}add(tt){return this.x+=tt.x,this.y+=tt.y,this.z+=tt.z,this.w+=tt.w,this}addScalar(tt){return this.x+=tt,this.y+=tt,this.z+=tt,this.w+=tt,this}addVectors(tt,rt){return this.x=tt.x+rt.x,this.y=tt.y+rt.y,this.z=tt.z+rt.z,this.w=tt.w+rt.w,this}addScaledVector(tt,rt){return this.x+=tt.x*rt,this.y+=tt.y*rt,this.z+=tt.z*rt,this.w+=tt.w*rt,this}sub(tt){return this.x-=tt.x,this.y-=tt.y,this.z-=tt.z,this.w-=tt.w,this}subScalar(tt){return this.x-=tt,this.y-=tt,this.z-=tt,this.w-=tt,this}subVectors(tt,rt){return this.x=tt.x-rt.x,this.y=tt.y-rt.y,this.z=tt.z-rt.z,this.w=tt.w-rt.w,this}multiply(tt){return this.x*=tt.x,this.y*=tt.y,this.z*=tt.z,this.w*=tt.w,this}multiplyScalar(tt){return this.x*=tt,this.y*=tt,this.z*=tt,this.w*=tt,this}applyMatrix4(tt){const rt=this.x,st=this.y,at=this.z,lt=this.w,dt=tt.elements;return this.x=dt[0]*rt+dt[4]*st+dt[8]*at+dt[12]*lt,this.y=dt[1]*rt+dt[5]*st+dt[9]*at+dt[13]*lt,this.z=dt[2]*rt+dt[6]*st+dt[10]*at+dt[14]*lt,this.w=dt[3]*rt+dt[7]*st+dt[11]*at+dt[15]*lt,this}divideScalar(tt){return this.multiplyScalar(1/tt)}setAxisAngleFromQuaternion(tt){this.w=2*Math.acos(tt.w);const rt=Math.sqrt(1-tt.w*tt.w);return rt<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=tt.x/rt,this.y=tt.y/rt,this.z=tt.z/rt),this}setAxisAngleFromRotationMatrix(tt){let rt,st,at,lt;const vt=tt.elements,_t=vt[0],bt=vt[4],Mt=vt[8],Ct=vt[1],Tt=vt[5],$t=vt[9],Rt=vt[2],Et=vt[6],wt=vt[10];if(Math.abs(bt-Ct)<.01&&Math.abs(Mt-Rt)<.01&&Math.abs($t-Et)<.01){if(Math.abs(bt+Ct)<.1&&Math.abs(Mt+Rt)<.1&&Math.abs($t+Et)<.1&&Math.abs(_t+Tt+wt-3)<.1)return this.set(1,0,0,0),this;rt=Math.PI;const Ft=(_t+1)/2,Nt=(Tt+1)/2,Ot=(wt+1)/2,Bt=(bt+Ct)/4,Xt=(Mt+Rt)/4,Zt=($t+Et)/4;return Ft>Nt&&Ft>Ot?Ft<.01?(st=0,at=.707106781,lt=.707106781):(st=Math.sqrt(Ft),at=Bt/st,lt=Xt/st):Nt>Ot?Nt<.01?(st=.707106781,at=0,lt=.707106781):(at=Math.sqrt(Nt),st=Bt/at,lt=Zt/at):Ot<.01?(st=.707106781,at=.707106781,lt=0):(lt=Math.sqrt(Ot),st=Xt/lt,at=Zt/lt),this.set(st,at,lt,rt),this}let Pt=Math.sqrt((Et-$t)*(Et-$t)+(Mt-Rt)*(Mt-Rt)+(Ct-bt)*(Ct-bt));return Math.abs(Pt)<.001&&(Pt=1),this.x=(Et-$t)/Pt,this.y=(Mt-Rt)/Pt,this.z=(Ct-bt)/Pt,this.w=Math.acos((_t+Tt+wt-1)/2),this}setFromMatrixPosition(tt){const rt=tt.elements;return this.x=rt[12],this.y=rt[13],this.z=rt[14],this.w=rt[15],this}min(tt){return this.x=Math.min(this.x,tt.x),this.y=Math.min(this.y,tt.y),this.z=Math.min(this.z,tt.z),this.w=Math.min(this.w,tt.w),this}max(tt){return this.x=Math.max(this.x,tt.x),this.y=Math.max(this.y,tt.y),this.z=Math.max(this.z,tt.z),this.w=Math.max(this.w,tt.w),this}clamp(tt,rt){return this.x=Math.max(tt.x,Math.min(rt.x,this.x)),this.y=Math.max(tt.y,Math.min(rt.y,this.y)),this.z=Math.max(tt.z,Math.min(rt.z,this.z)),this.w=Math.max(tt.w,Math.min(rt.w,this.w)),this}clampScalar(tt,rt){return this.x=Math.max(tt,Math.min(rt,this.x)),this.y=Math.max(tt,Math.min(rt,this.y)),this.z=Math.max(tt,Math.min(rt,this.z)),this.w=Math.max(tt,Math.min(rt,this.w)),this}clampLength(tt,rt){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(tt,Math.min(rt,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(tt){return this.x*tt.x+this.y*tt.y+this.z*tt.z+this.w*tt.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(tt){return this.normalize().multiplyScalar(tt)}lerp(tt,rt){return this.x+=(tt.x-this.x)*rt,this.y+=(tt.y-this.y)*rt,this.z+=(tt.z-this.z)*rt,this.w+=(tt.w-this.w)*rt,this}lerpVectors(tt,rt,st){return this.x=tt.x+(rt.x-tt.x)*st,this.y=tt.y+(rt.y-tt.y)*st,this.z=tt.z+(rt.z-tt.z)*st,this.w=tt.w+(rt.w-tt.w)*st,this}equals(tt){return tt.x===this.x&&tt.y===this.y&&tt.z===this.z&&tt.w===this.w}fromArray(tt,rt=0){return this.x=tt[rt],this.y=tt[rt+1],this.z=tt[rt+2],this.w=tt[rt+3],this}toArray(tt=[],rt=0){return tt[rt]=this.x,tt[rt+1]=this.y,tt[rt+2]=this.z,tt[rt+3]=this.w,tt}fromBufferAttribute(tt,rt){return this.x=tt.getX(rt),this.y=tt.getY(rt),this.z=tt.getZ(rt),this.w=tt.getW(rt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(tt=1,rt=1,st={}){super(),this.isRenderTarget=!0,this.width=tt,this.height=rt,this.depth=1,this.scissor=new Vector4(0,0,tt,rt),this.scissorTest=!1,this.viewport=new Vector4(0,0,tt,rt);const at={width:tt,height:rt,depth:1};st=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},st);const lt=new Texture(at,st.mapping,st.wrapS,st.wrapT,st.magFilter,st.minFilter,st.format,st.type,st.anisotropy,st.colorSpace);lt.flipY=!1,lt.generateMipmaps=st.generateMipmaps,lt.internalFormat=st.internalFormat,this.textures=[];const dt=st.count;for(let yt=0;yt<dt;yt++)this.textures[yt]=lt.clone(),this.textures[yt].isRenderTargetTexture=!0;this.depthBuffer=st.depthBuffer,this.stencilBuffer=st.stencilBuffer,this.resolveDepthBuffer=st.resolveDepthBuffer,this.resolveStencilBuffer=st.resolveStencilBuffer,this.depthTexture=st.depthTexture,this.samples=st.samples}get texture(){return this.textures[0]}set texture(tt){this.textures[0]=tt}setSize(tt,rt,st=1){if(this.width!==tt||this.height!==rt||this.depth!==st){this.width=tt,this.height=rt,this.depth=st;for(let at=0,lt=this.textures.length;at<lt;at++)this.textures[at].image.width=tt,this.textures[at].image.height=rt,this.textures[at].image.depth=st;this.dispose()}this.viewport.set(0,0,tt,rt),this.scissor.set(0,0,tt,rt)}clone(){return new this.constructor().copy(this)}copy(tt){this.width=tt.width,this.height=tt.height,this.depth=tt.depth,this.scissor.copy(tt.scissor),this.scissorTest=tt.scissorTest,this.viewport.copy(tt.viewport),this.textures.length=0;for(let st=0,at=tt.textures.length;st<at;st++)this.textures[st]=tt.textures[st].clone(),this.textures[st].isRenderTargetTexture=!0;const rt=Object.assign({},tt.texture.image);return this.texture.source=new Source(rt),this.depthBuffer=tt.depthBuffer,this.stencilBuffer=tt.stencilBuffer,this.resolveDepthBuffer=tt.resolveDepthBuffer,this.resolveStencilBuffer=tt.resolveStencilBuffer,tt.depthTexture!==null&&(this.depthTexture=tt.depthTexture.clone()),this.samples=tt.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(tt=1,rt=1,st={}){super(tt,rt,st),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(tt=null,rt=1,st=1,at=1){super(null),this.isDataArrayTexture=!0,this.image={data:tt,width:rt,height:st,depth:at},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(tt){this.layerUpdates.add(tt)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(tt=1,rt=1,st=1,at={}){super(tt,rt,at),this.isWebGLArrayRenderTarget=!0,this.depth=st,this.texture=new DataArrayTexture(null,tt,rt,st),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(tt=null,rt=1,st=1,at=1){super(null),this.isData3DTexture=!0,this.image={data:tt,width:rt,height:st,depth:at},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(tt=1,rt=1,st=1,at={}){super(tt,rt,at),this.isWebGL3DRenderTarget=!0,this.depth=st,this.texture=new Data3DTexture(null,tt,rt,st),this.texture.isRenderTargetTexture=!0}}class Quaternion{constructor(tt=0,rt=0,st=0,at=1){this.isQuaternion=!0,this._x=tt,this._y=rt,this._z=st,this._w=at}static slerpFlat(tt,rt,st,at,lt,dt,yt){let vt=st[at+0],_t=st[at+1],bt=st[at+2],Mt=st[at+3];const Ct=lt[dt+0],Tt=lt[dt+1],$t=lt[dt+2],Rt=lt[dt+3];if(yt===0){tt[rt+0]=vt,tt[rt+1]=_t,tt[rt+2]=bt,tt[rt+3]=Mt;return}if(yt===1){tt[rt+0]=Ct,tt[rt+1]=Tt,tt[rt+2]=$t,tt[rt+3]=Rt;return}if(Mt!==Rt||vt!==Ct||_t!==Tt||bt!==$t){let Et=1-yt;const wt=vt*Ct+_t*Tt+bt*$t+Mt*Rt,Pt=wt>=0?1:-1,Ft=1-wt*wt;if(Ft>Number.EPSILON){const Ot=Math.sqrt(Ft),Bt=Math.atan2(Ot,wt*Pt);Et=Math.sin(Et*Bt)/Ot,yt=Math.sin(yt*Bt)/Ot}const Nt=yt*Pt;if(vt=vt*Et+Ct*Nt,_t=_t*Et+Tt*Nt,bt=bt*Et+$t*Nt,Mt=Mt*Et+Rt*Nt,Et===1-yt){const Ot=1/Math.sqrt(vt*vt+_t*_t+bt*bt+Mt*Mt);vt*=Ot,_t*=Ot,bt*=Ot,Mt*=Ot}}tt[rt]=vt,tt[rt+1]=_t,tt[rt+2]=bt,tt[rt+3]=Mt}static multiplyQuaternionsFlat(tt,rt,st,at,lt,dt){const yt=st[at],vt=st[at+1],_t=st[at+2],bt=st[at+3],Mt=lt[dt],Ct=lt[dt+1],Tt=lt[dt+2],$t=lt[dt+3];return tt[rt]=yt*$t+bt*Mt+vt*Tt-_t*Ct,tt[rt+1]=vt*$t+bt*Ct+_t*Mt-yt*Tt,tt[rt+2]=_t*$t+bt*Tt+yt*Ct-vt*Mt,tt[rt+3]=bt*$t-yt*Mt-vt*Ct-_t*Tt,tt}get x(){return this._x}set x(tt){this._x=tt,this._onChangeCallback()}get y(){return this._y}set y(tt){this._y=tt,this._onChangeCallback()}get z(){return this._z}set z(tt){this._z=tt,this._onChangeCallback()}get w(){return this._w}set w(tt){this._w=tt,this._onChangeCallback()}set(tt,rt,st,at){return this._x=tt,this._y=rt,this._z=st,this._w=at,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(tt){return this._x=tt.x,this._y=tt.y,this._z=tt.z,this._w=tt.w,this._onChangeCallback(),this}setFromEuler(tt,rt=!0){const st=tt._x,at=tt._y,lt=tt._z,dt=tt._order,yt=Math.cos,vt=Math.sin,_t=yt(st/2),bt=yt(at/2),Mt=yt(lt/2),Ct=vt(st/2),Tt=vt(at/2),$t=vt(lt/2);switch(dt){case"XYZ":this._x=Ct*bt*Mt+_t*Tt*$t,this._y=_t*Tt*Mt-Ct*bt*$t,this._z=_t*bt*$t+Ct*Tt*Mt,this._w=_t*bt*Mt-Ct*Tt*$t;break;case"YXZ":this._x=Ct*bt*Mt+_t*Tt*$t,this._y=_t*Tt*Mt-Ct*bt*$t,this._z=_t*bt*$t-Ct*Tt*Mt,this._w=_t*bt*Mt+Ct*Tt*$t;break;case"ZXY":this._x=Ct*bt*Mt-_t*Tt*$t,this._y=_t*Tt*Mt+Ct*bt*$t,this._z=_t*bt*$t+Ct*Tt*Mt,this._w=_t*bt*Mt-Ct*Tt*$t;break;case"ZYX":this._x=Ct*bt*Mt-_t*Tt*$t,this._y=_t*Tt*Mt+Ct*bt*$t,this._z=_t*bt*$t-Ct*Tt*Mt,this._w=_t*bt*Mt+Ct*Tt*$t;break;case"YZX":this._x=Ct*bt*Mt+_t*Tt*$t,this._y=_t*Tt*Mt+Ct*bt*$t,this._z=_t*bt*$t-Ct*Tt*Mt,this._w=_t*bt*Mt-Ct*Tt*$t;break;case"XZY":this._x=Ct*bt*Mt-_t*Tt*$t,this._y=_t*Tt*Mt-Ct*bt*$t,this._z=_t*bt*$t+Ct*Tt*Mt,this._w=_t*bt*Mt+Ct*Tt*$t;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+dt)}return rt===!0&&this._onChangeCallback(),this}setFromAxisAngle(tt,rt){const st=rt/2,at=Math.sin(st);return this._x=tt.x*at,this._y=tt.y*at,this._z=tt.z*at,this._w=Math.cos(st),this._onChangeCallback(),this}setFromRotationMatrix(tt){const rt=tt.elements,st=rt[0],at=rt[4],lt=rt[8],dt=rt[1],yt=rt[5],vt=rt[9],_t=rt[2],bt=rt[6],Mt=rt[10],Ct=st+yt+Mt;if(Ct>0){const Tt=.5/Math.sqrt(Ct+1);this._w=.25/Tt,this._x=(bt-vt)*Tt,this._y=(lt-_t)*Tt,this._z=(dt-at)*Tt}else if(st>yt&&st>Mt){const Tt=2*Math.sqrt(1+st-yt-Mt);this._w=(bt-vt)/Tt,this._x=.25*Tt,this._y=(at+dt)/Tt,this._z=(lt+_t)/Tt}else if(yt>Mt){const Tt=2*Math.sqrt(1+yt-st-Mt);this._w=(lt-_t)/Tt,this._x=(at+dt)/Tt,this._y=.25*Tt,this._z=(vt+bt)/Tt}else{const Tt=2*Math.sqrt(1+Mt-st-yt);this._w=(dt-at)/Tt,this._x=(lt+_t)/Tt,this._y=(vt+bt)/Tt,this._z=.25*Tt}return this._onChangeCallback(),this}setFromUnitVectors(tt,rt){let st=tt.dot(rt)+1;return st<Number.EPSILON?(st=0,Math.abs(tt.x)>Math.abs(tt.z)?(this._x=-tt.y,this._y=tt.x,this._z=0,this._w=st):(this._x=0,this._y=-tt.z,this._z=tt.y,this._w=st)):(this._x=tt.y*rt.z-tt.z*rt.y,this._y=tt.z*rt.x-tt.x*rt.z,this._z=tt.x*rt.y-tt.y*rt.x,this._w=st),this.normalize()}angleTo(tt){return 2*Math.acos(Math.abs(clamp(this.dot(tt),-1,1)))}rotateTowards(tt,rt){const st=this.angleTo(tt);if(st===0)return this;const at=Math.min(1,rt/st);return this.slerp(tt,at),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(tt){return this._x*tt._x+this._y*tt._y+this._z*tt._z+this._w*tt._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let tt=this.length();return tt===0?(this._x=0,this._y=0,this._z=0,this._w=1):(tt=1/tt,this._x=this._x*tt,this._y=this._y*tt,this._z=this._z*tt,this._w=this._w*tt),this._onChangeCallback(),this}multiply(tt){return this.multiplyQuaternions(this,tt)}premultiply(tt){return this.multiplyQuaternions(tt,this)}multiplyQuaternions(tt,rt){const st=tt._x,at=tt._y,lt=tt._z,dt=tt._w,yt=rt._x,vt=rt._y,_t=rt._z,bt=rt._w;return this._x=st*bt+dt*yt+at*_t-lt*vt,this._y=at*bt+dt*vt+lt*yt-st*_t,this._z=lt*bt+dt*_t+st*vt-at*yt,this._w=dt*bt-st*yt-at*vt-lt*_t,this._onChangeCallback(),this}slerp(tt,rt){if(rt===0)return this;if(rt===1)return this.copy(tt);const st=this._x,at=this._y,lt=this._z,dt=this._w;let yt=dt*tt._w+st*tt._x+at*tt._y+lt*tt._z;if(yt<0?(this._w=-tt._w,this._x=-tt._x,this._y=-tt._y,this._z=-tt._z,yt=-yt):this.copy(tt),yt>=1)return this._w=dt,this._x=st,this._y=at,this._z=lt,this;const vt=1-yt*yt;if(vt<=Number.EPSILON){const Tt=1-rt;return this._w=Tt*dt+rt*this._w,this._x=Tt*st+rt*this._x,this._y=Tt*at+rt*this._y,this._z=Tt*lt+rt*this._z,this.normalize(),this}const _t=Math.sqrt(vt),bt=Math.atan2(_t,yt),Mt=Math.sin((1-rt)*bt)/_t,Ct=Math.sin(rt*bt)/_t;return this._w=dt*Mt+this._w*Ct,this._x=st*Mt+this._x*Ct,this._y=at*Mt+this._y*Ct,this._z=lt*Mt+this._z*Ct,this._onChangeCallback(),this}slerpQuaternions(tt,rt,st){return this.copy(tt).slerp(rt,st)}random(){const tt=2*Math.PI*Math.random(),rt=2*Math.PI*Math.random(),st=Math.random(),at=Math.sqrt(1-st),lt=Math.sqrt(st);return this.set(at*Math.sin(tt),at*Math.cos(tt),lt*Math.sin(rt),lt*Math.cos(rt))}equals(tt){return tt._x===this._x&&tt._y===this._y&&tt._z===this._z&&tt._w===this._w}fromArray(tt,rt=0){return this._x=tt[rt],this._y=tt[rt+1],this._z=tt[rt+2],this._w=tt[rt+3],this._onChangeCallback(),this}toArray(tt=[],rt=0){return tt[rt]=this._x,tt[rt+1]=this._y,tt[rt+2]=this._z,tt[rt+3]=this._w,tt}fromBufferAttribute(tt,rt){return this._x=tt.getX(rt),this._y=tt.getY(rt),this._z=tt.getZ(rt),this._w=tt.getW(rt),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(tt){return this._onChangeCallback=tt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(tt=0,rt=0,st=0){Vector3.prototype.isVector3=!0,this.x=tt,this.y=rt,this.z=st}set(tt,rt,st){return st===void 0&&(st=this.z),this.x=tt,this.y=rt,this.z=st,this}setScalar(tt){return this.x=tt,this.y=tt,this.z=tt,this}setX(tt){return this.x=tt,this}setY(tt){return this.y=tt,this}setZ(tt){return this.z=tt,this}setComponent(tt,rt){switch(tt){case 0:this.x=rt;break;case 1:this.y=rt;break;case 2:this.z=rt;break;default:throw new Error("index is out of range: "+tt)}return this}getComponent(tt){switch(tt){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+tt)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(tt){return this.x=tt.x,this.y=tt.y,this.z=tt.z,this}add(tt){return this.x+=tt.x,this.y+=tt.y,this.z+=tt.z,this}addScalar(tt){return this.x+=tt,this.y+=tt,this.z+=tt,this}addVectors(tt,rt){return this.x=tt.x+rt.x,this.y=tt.y+rt.y,this.z=tt.z+rt.z,this}addScaledVector(tt,rt){return this.x+=tt.x*rt,this.y+=tt.y*rt,this.z+=tt.z*rt,this}sub(tt){return this.x-=tt.x,this.y-=tt.y,this.z-=tt.z,this}subScalar(tt){return this.x-=tt,this.y-=tt,this.z-=tt,this}subVectors(tt,rt){return this.x=tt.x-rt.x,this.y=tt.y-rt.y,this.z=tt.z-rt.z,this}multiply(tt){return this.x*=tt.x,this.y*=tt.y,this.z*=tt.z,this}multiplyScalar(tt){return this.x*=tt,this.y*=tt,this.z*=tt,this}multiplyVectors(tt,rt){return this.x=tt.x*rt.x,this.y=tt.y*rt.y,this.z=tt.z*rt.z,this}applyEuler(tt){return this.applyQuaternion(_quaternion$4.setFromEuler(tt))}applyAxisAngle(tt,rt){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(tt,rt))}applyMatrix3(tt){const rt=this.x,st=this.y,at=this.z,lt=tt.elements;return this.x=lt[0]*rt+lt[3]*st+lt[6]*at,this.y=lt[1]*rt+lt[4]*st+lt[7]*at,this.z=lt[2]*rt+lt[5]*st+lt[8]*at,this}applyNormalMatrix(tt){return this.applyMatrix3(tt).normalize()}applyMatrix4(tt){const rt=this.x,st=this.y,at=this.z,lt=tt.elements,dt=1/(lt[3]*rt+lt[7]*st+lt[11]*at+lt[15]);return this.x=(lt[0]*rt+lt[4]*st+lt[8]*at+lt[12])*dt,this.y=(lt[1]*rt+lt[5]*st+lt[9]*at+lt[13])*dt,this.z=(lt[2]*rt+lt[6]*st+lt[10]*at+lt[14])*dt,this}applyQuaternion(tt){const rt=this.x,st=this.y,at=this.z,lt=tt.x,dt=tt.y,yt=tt.z,vt=tt.w,_t=2*(dt*at-yt*st),bt=2*(yt*rt-lt*at),Mt=2*(lt*st-dt*rt);return this.x=rt+vt*_t+dt*Mt-yt*bt,this.y=st+vt*bt+yt*_t-lt*Mt,this.z=at+vt*Mt+lt*bt-dt*_t,this}project(tt){return this.applyMatrix4(tt.matrixWorldInverse).applyMatrix4(tt.projectionMatrix)}unproject(tt){return this.applyMatrix4(tt.projectionMatrixInverse).applyMatrix4(tt.matrixWorld)}transformDirection(tt){const rt=this.x,st=this.y,at=this.z,lt=tt.elements;return this.x=lt[0]*rt+lt[4]*st+lt[8]*at,this.y=lt[1]*rt+lt[5]*st+lt[9]*at,this.z=lt[2]*rt+lt[6]*st+lt[10]*at,this.normalize()}divide(tt){return this.x/=tt.x,this.y/=tt.y,this.z/=tt.z,this}divideScalar(tt){return this.multiplyScalar(1/tt)}min(tt){return this.x=Math.min(this.x,tt.x),this.y=Math.min(this.y,tt.y),this.z=Math.min(this.z,tt.z),this}max(tt){return this.x=Math.max(this.x,tt.x),this.y=Math.max(this.y,tt.y),this.z=Math.max(this.z,tt.z),this}clamp(tt,rt){return this.x=Math.max(tt.x,Math.min(rt.x,this.x)),this.y=Math.max(tt.y,Math.min(rt.y,this.y)),this.z=Math.max(tt.z,Math.min(rt.z,this.z)),this}clampScalar(tt,rt){return this.x=Math.max(tt,Math.min(rt,this.x)),this.y=Math.max(tt,Math.min(rt,this.y)),this.z=Math.max(tt,Math.min(rt,this.z)),this}clampLength(tt,rt){const st=this.length();return this.divideScalar(st||1).multiplyScalar(Math.max(tt,Math.min(rt,st)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(tt){return this.x*tt.x+this.y*tt.y+this.z*tt.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(tt){return this.normalize().multiplyScalar(tt)}lerp(tt,rt){return this.x+=(tt.x-this.x)*rt,this.y+=(tt.y-this.y)*rt,this.z+=(tt.z-this.z)*rt,this}lerpVectors(tt,rt,st){return this.x=tt.x+(rt.x-tt.x)*st,this.y=tt.y+(rt.y-tt.y)*st,this.z=tt.z+(rt.z-tt.z)*st,this}cross(tt){return this.crossVectors(this,tt)}crossVectors(tt,rt){const st=tt.x,at=tt.y,lt=tt.z,dt=rt.x,yt=rt.y,vt=rt.z;return this.x=at*vt-lt*yt,this.y=lt*dt-st*vt,this.z=st*yt-at*dt,this}projectOnVector(tt){const rt=tt.lengthSq();if(rt===0)return this.set(0,0,0);const st=tt.dot(this)/rt;return this.copy(tt).multiplyScalar(st)}projectOnPlane(tt){return _vector$c.copy(this).projectOnVector(tt),this.sub(_vector$c)}reflect(tt){return this.sub(_vector$c.copy(tt).multiplyScalar(2*this.dot(tt)))}angleTo(tt){const rt=Math.sqrt(this.lengthSq()*tt.lengthSq());if(rt===0)return Math.PI/2;const st=this.dot(tt)/rt;return Math.acos(clamp(st,-1,1))}distanceTo(tt){return Math.sqrt(this.distanceToSquared(tt))}distanceToSquared(tt){const rt=this.x-tt.x,st=this.y-tt.y,at=this.z-tt.z;return rt*rt+st*st+at*at}manhattanDistanceTo(tt){return Math.abs(this.x-tt.x)+Math.abs(this.y-tt.y)+Math.abs(this.z-tt.z)}setFromSpherical(tt){return this.setFromSphericalCoords(tt.radius,tt.phi,tt.theta)}setFromSphericalCoords(tt,rt,st){const at=Math.sin(rt)*tt;return this.x=at*Math.sin(st),this.y=Math.cos(rt)*tt,this.z=at*Math.cos(st),this}setFromCylindrical(tt){return this.setFromCylindricalCoords(tt.radius,tt.theta,tt.y)}setFromCylindricalCoords(tt,rt,st){return this.x=tt*Math.sin(rt),this.y=st,this.z=tt*Math.cos(rt),this}setFromMatrixPosition(tt){const rt=tt.elements;return this.x=rt[12],this.y=rt[13],this.z=rt[14],this}setFromMatrixScale(tt){const rt=this.setFromMatrixColumn(tt,0).length(),st=this.setFromMatrixColumn(tt,1).length(),at=this.setFromMatrixColumn(tt,2).length();return this.x=rt,this.y=st,this.z=at,this}setFromMatrixColumn(tt,rt){return this.fromArray(tt.elements,rt*4)}setFromMatrix3Column(tt,rt){return this.fromArray(tt.elements,rt*3)}setFromEuler(tt){return this.x=tt._x,this.y=tt._y,this.z=tt._z,this}setFromColor(tt){return this.x=tt.r,this.y=tt.g,this.z=tt.b,this}equals(tt){return tt.x===this.x&&tt.y===this.y&&tt.z===this.z}fromArray(tt,rt=0){return this.x=tt[rt],this.y=tt[rt+1],this.z=tt[rt+2],this}toArray(tt=[],rt=0){return tt[rt]=this.x,tt[rt+1]=this.y,tt[rt+2]=this.z,tt}fromBufferAttribute(tt,rt){return this.x=tt.getX(rt),this.y=tt.getY(rt),this.z=tt.getZ(rt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const tt=Math.random()*Math.PI*2,rt=Math.random()*2-1,st=Math.sqrt(1-rt*rt);return this.x=st*Math.cos(tt),this.y=rt,this.z=st*Math.sin(tt),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(tt=new Vector3(1/0,1/0,1/0),rt=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=tt,this.max=rt}set(tt,rt){return this.min.copy(tt),this.max.copy(rt),this}setFromArray(tt){this.makeEmpty();for(let rt=0,st=tt.length;rt<st;rt+=3)this.expandByPoint(_vector$b.fromArray(tt,rt));return this}setFromBufferAttribute(tt){this.makeEmpty();for(let rt=0,st=tt.count;rt<st;rt++)this.expandByPoint(_vector$b.fromBufferAttribute(tt,rt));return this}setFromPoints(tt){this.makeEmpty();for(let rt=0,st=tt.length;rt<st;rt++)this.expandByPoint(tt[rt]);return this}setFromCenterAndSize(tt,rt){const st=_vector$b.copy(rt).multiplyScalar(.5);return this.min.copy(tt).sub(st),this.max.copy(tt).add(st),this}setFromObject(tt,rt=!1){return this.makeEmpty(),this.expandByObject(tt,rt)}clone(){return new this.constructor().copy(this)}copy(tt){return this.min.copy(tt.min),this.max.copy(tt.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(tt){return this.isEmpty()?tt.set(0,0,0):tt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(tt){return this.isEmpty()?tt.set(0,0,0):tt.subVectors(this.max,this.min)}expandByPoint(tt){return this.min.min(tt),this.max.max(tt),this}expandByVector(tt){return this.min.sub(tt),this.max.add(tt),this}expandByScalar(tt){return this.min.addScalar(-tt),this.max.addScalar(tt),this}expandByObject(tt,rt=!1){tt.updateWorldMatrix(!1,!1);const st=tt.geometry;if(st!==void 0){const lt=st.getAttribute("position");if(rt===!0&&lt!==void 0&&tt.isInstancedMesh!==!0)for(let dt=0,yt=lt.count;dt<yt;dt++)tt.isMesh===!0?tt.getVertexPosition(dt,_vector$b):_vector$b.fromBufferAttribute(lt,dt),_vector$b.applyMatrix4(tt.matrixWorld),this.expandByPoint(_vector$b);else tt.boundingBox!==void 0?(tt.boundingBox===null&&tt.computeBoundingBox(),_box$4.copy(tt.boundingBox)):(st.boundingBox===null&&st.computeBoundingBox(),_box$4.copy(st.boundingBox)),_box$4.applyMatrix4(tt.matrixWorld),this.union(_box$4)}const at=tt.children;for(let lt=0,dt=at.length;lt<dt;lt++)this.expandByObject(at[lt],rt);return this}containsPoint(tt){return tt.x>=this.min.x&&tt.x<=this.max.x&&tt.y>=this.min.y&&tt.y<=this.max.y&&tt.z>=this.min.z&&tt.z<=this.max.z}containsBox(tt){return this.min.x<=tt.min.x&&tt.max.x<=this.max.x&&this.min.y<=tt.min.y&&tt.max.y<=this.max.y&&this.min.z<=tt.min.z&&tt.max.z<=this.max.z}getParameter(tt,rt){return rt.set((tt.x-this.min.x)/(this.max.x-this.min.x),(tt.y-this.min.y)/(this.max.y-this.min.y),(tt.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(tt){return tt.max.x>=this.min.x&&tt.min.x<=this.max.x&&tt.max.y>=this.min.y&&tt.min.y<=this.max.y&&tt.max.z>=this.min.z&&tt.min.z<=this.max.z}intersectsSphere(tt){return this.clampPoint(tt.center,_vector$b),_vector$b.distanceToSquared(tt.center)<=tt.radius*tt.radius}intersectsPlane(tt){let rt,st;return tt.normal.x>0?(rt=tt.normal.x*this.min.x,st=tt.normal.x*this.max.x):(rt=tt.normal.x*this.max.x,st=tt.normal.x*this.min.x),tt.normal.y>0?(rt+=tt.normal.y*this.min.y,st+=tt.normal.y*this.max.y):(rt+=tt.normal.y*this.max.y,st+=tt.normal.y*this.min.y),tt.normal.z>0?(rt+=tt.normal.z*this.min.z,st+=tt.normal.z*this.max.z):(rt+=tt.normal.z*this.max.z,st+=tt.normal.z*this.min.z),rt<=-tt.constant&&st>=-tt.constant}intersectsTriangle(tt){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$3.subVectors(tt.a,_center),_v1$7.subVectors(tt.b,_center),_v2$4.subVectors(tt.c,_center),_f0.subVectors(_v1$7,_v0$3),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$3,_v2$4);let rt=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(rt,_v0$3,_v1$7,_v2$4,_extents)||(rt=[1,0,0,0,1,0,0,0,1],!satForAxes(rt,_v0$3,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),rt=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(rt,_v0$3,_v1$7,_v2$4,_extents))}clampPoint(tt,rt){return rt.copy(tt).clamp(this.min,this.max)}distanceToPoint(tt){return this.clampPoint(tt,_vector$b).distanceTo(tt)}getBoundingSphere(tt){return this.isEmpty()?tt.makeEmpty():(this.getCenter(tt.center),tt.radius=this.getSize(_vector$b).length()*.5),tt}intersect(tt){return this.min.max(tt.min),this.max.min(tt.max),this.isEmpty()&&this.makeEmpty(),this}union(tt){return this.min.min(tt.min),this.max.max(tt.max),this}applyMatrix4(tt){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(tt),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(tt),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(tt),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(tt),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(tt),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(tt),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(tt),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(tt),this.setFromPoints(_points),this)}translate(tt){return this.min.add(tt),this.max.add(tt),this}equals(tt){return tt.min.equals(this.min)&&tt.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$3=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(nt,tt,rt,st,at){for(let lt=0,dt=nt.length-3;lt<=dt;lt+=3){_testAxis.fromArray(nt,lt);const yt=at.x*Math.abs(_testAxis.x)+at.y*Math.abs(_testAxis.y)+at.z*Math.abs(_testAxis.z),vt=tt.dot(_testAxis),_t=rt.dot(_testAxis),bt=st.dot(_testAxis);if(Math.max(-Math.max(vt,_t,bt),Math.min(vt,_t,bt))>yt)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(tt=new Vector3,rt=-1){this.isSphere=!0,this.center=tt,this.radius=rt}set(tt,rt){return this.center.copy(tt),this.radius=rt,this}setFromPoints(tt,rt){const st=this.center;rt!==void 0?st.copy(rt):_box$3.setFromPoints(tt).getCenter(st);let at=0;for(let lt=0,dt=tt.length;lt<dt;lt++)at=Math.max(at,st.distanceToSquared(tt[lt]));return this.radius=Math.sqrt(at),this}copy(tt){return this.center.copy(tt.center),this.radius=tt.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(tt){return tt.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(tt){return tt.distanceTo(this.center)-this.radius}intersectsSphere(tt){const rt=this.radius+tt.radius;return tt.center.distanceToSquared(this.center)<=rt*rt}intersectsBox(tt){return tt.intersectsSphere(this)}intersectsPlane(tt){return Math.abs(tt.distanceToPoint(this.center))<=this.radius}clampPoint(tt,rt){const st=this.center.distanceToSquared(tt);return rt.copy(tt),st>this.radius*this.radius&&(rt.sub(this.center).normalize(),rt.multiplyScalar(this.radius).add(this.center)),rt}getBoundingBox(tt){return this.isEmpty()?(tt.makeEmpty(),tt):(tt.set(this.center,this.center),tt.expandByScalar(this.radius),tt)}applyMatrix4(tt){return this.center.applyMatrix4(tt),this.radius=this.radius*tt.getMaxScaleOnAxis(),this}translate(tt){return this.center.add(tt),this}expandByPoint(tt){if(this.isEmpty())return this.center.copy(tt),this.radius=0,this;_v1$6.subVectors(tt,this.center);const rt=_v1$6.lengthSq();if(rt>this.radius*this.radius){const st=Math.sqrt(rt),at=(st-this.radius)*.5;this.center.addScaledVector(_v1$6,at/st),this.radius+=at}return this}union(tt){return tt.isEmpty()?this:this.isEmpty()?(this.copy(tt),this):(this.center.equals(tt.center)===!0?this.radius=Math.max(this.radius,tt.radius):(_v2$3.subVectors(tt.center,this.center).setLength(tt.radius),this.expandByPoint(_v1$6.copy(tt.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(tt.center).sub(_v2$3))),this)}equals(tt){return tt.center.equals(this.center)&&tt.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(tt=new Vector3,rt=new Vector3(0,0,-1)){this.origin=tt,this.direction=rt}set(tt,rt){return this.origin.copy(tt),this.direction.copy(rt),this}copy(tt){return this.origin.copy(tt.origin),this.direction.copy(tt.direction),this}at(tt,rt){return rt.copy(this.origin).addScaledVector(this.direction,tt)}lookAt(tt){return this.direction.copy(tt).sub(this.origin).normalize(),this}recast(tt){return this.origin.copy(this.at(tt,_vector$a)),this}closestPointToPoint(tt,rt){rt.subVectors(tt,this.origin);const st=rt.dot(this.direction);return st<0?rt.copy(this.origin):rt.copy(this.origin).addScaledVector(this.direction,st)}distanceToPoint(tt){return Math.sqrt(this.distanceSqToPoint(tt))}distanceSqToPoint(tt){const rt=_vector$a.subVectors(tt,this.origin).dot(this.direction);return rt<0?this.origin.distanceToSquared(tt):(_vector$a.copy(this.origin).addScaledVector(this.direction,rt),_vector$a.distanceToSquared(tt))}distanceSqToSegment(tt,rt,st,at){_segCenter.copy(tt).add(rt).multiplyScalar(.5),_segDir.copy(rt).sub(tt).normalize(),_diff.copy(this.origin).sub(_segCenter);const lt=tt.distanceTo(rt)*.5,dt=-this.direction.dot(_segDir),yt=_diff.dot(this.direction),vt=-_diff.dot(_segDir),_t=_diff.lengthSq(),bt=Math.abs(1-dt*dt);let Mt,Ct,Tt,$t;if(bt>0)if(Mt=dt*vt-yt,Ct=dt*yt-vt,$t=lt*bt,Mt>=0)if(Ct>=-$t)if(Ct<=$t){const Rt=1/bt;Mt*=Rt,Ct*=Rt,Tt=Mt*(Mt+dt*Ct+2*yt)+Ct*(dt*Mt+Ct+2*vt)+_t}else Ct=lt,Mt=Math.max(0,-(dt*Ct+yt)),Tt=-Mt*Mt+Ct*(Ct+2*vt)+_t;else Ct=-lt,Mt=Math.max(0,-(dt*Ct+yt)),Tt=-Mt*Mt+Ct*(Ct+2*vt)+_t;else Ct<=-$t?(Mt=Math.max(0,-(-dt*lt+yt)),Ct=Mt>0?-lt:Math.min(Math.max(-lt,-vt),lt),Tt=-Mt*Mt+Ct*(Ct+2*vt)+_t):Ct<=$t?(Mt=0,Ct=Math.min(Math.max(-lt,-vt),lt),Tt=Ct*(Ct+2*vt)+_t):(Mt=Math.max(0,-(dt*lt+yt)),Ct=Mt>0?lt:Math.min(Math.max(-lt,-vt),lt),Tt=-Mt*Mt+Ct*(Ct+2*vt)+_t);else Ct=dt>0?-lt:lt,Mt=Math.max(0,-(dt*Ct+yt)),Tt=-Mt*Mt+Ct*(Ct+2*vt)+_t;return st&&st.copy(this.origin).addScaledVector(this.direction,Mt),at&&at.copy(_segCenter).addScaledVector(_segDir,Ct),Tt}intersectSphere(tt,rt){_vector$a.subVectors(tt.center,this.origin);const st=_vector$a.dot(this.direction),at=_vector$a.dot(_vector$a)-st*st,lt=tt.radius*tt.radius;if(at>lt)return null;const dt=Math.sqrt(lt-at),yt=st-dt,vt=st+dt;return vt<0?null:yt<0?this.at(vt,rt):this.at(yt,rt)}intersectsSphere(tt){return this.distanceSqToPoint(tt.center)<=tt.radius*tt.radius}distanceToPlane(tt){const rt=tt.normal.dot(this.direction);if(rt===0)return tt.distanceToPoint(this.origin)===0?0:null;const st=-(this.origin.dot(tt.normal)+tt.constant)/rt;return st>=0?st:null}intersectPlane(tt,rt){const st=this.distanceToPlane(tt);return st===null?null:this.at(st,rt)}intersectsPlane(tt){const rt=tt.distanceToPoint(this.origin);return rt===0||tt.normal.dot(this.direction)*rt<0}intersectBox(tt,rt){let st,at,lt,dt,yt,vt;const _t=1/this.direction.x,bt=1/this.direction.y,Mt=1/this.direction.z,Ct=this.origin;return _t>=0?(st=(tt.min.x-Ct.x)*_t,at=(tt.max.x-Ct.x)*_t):(st=(tt.max.x-Ct.x)*_t,at=(tt.min.x-Ct.x)*_t),bt>=0?(lt=(tt.min.y-Ct.y)*bt,dt=(tt.max.y-Ct.y)*bt):(lt=(tt.max.y-Ct.y)*bt,dt=(tt.min.y-Ct.y)*bt),st>dt||lt>at||((lt>st||isNaN(st))&&(st=lt),(dt<at||isNaN(at))&&(at=dt),Mt>=0?(yt=(tt.min.z-Ct.z)*Mt,vt=(tt.max.z-Ct.z)*Mt):(yt=(tt.max.z-Ct.z)*Mt,vt=(tt.min.z-Ct.z)*Mt),st>vt||yt>at)||((yt>st||st!==st)&&(st=yt),(vt<at||at!==at)&&(at=vt),at<0)?null:this.at(st>=0?st:at,rt)}intersectsBox(tt){return this.intersectBox(tt,_vector$a)!==null}intersectTriangle(tt,rt,st,at,lt){_edge1.subVectors(rt,tt),_edge2.subVectors(st,tt),_normal$1.crossVectors(_edge1,_edge2);let dt=this.direction.dot(_normal$1),yt;if(dt>0){if(at)return null;yt=1}else if(dt<0)yt=-1,dt=-dt;else return null;_diff.subVectors(this.origin,tt);const vt=yt*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(vt<0)return null;const _t=yt*this.direction.dot(_edge1.cross(_diff));if(_t<0||vt+_t>dt)return null;const bt=-yt*_diff.dot(_normal$1);return bt<0?null:this.at(bt/dt,lt)}applyMatrix4(tt){return this.origin.applyMatrix4(tt),this.direction.transformDirection(tt),this}equals(tt){return tt.origin.equals(this.origin)&&tt.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(tt,rt,st,at,lt,dt,yt,vt,_t,bt,Mt,Ct,Tt,$t,Rt,Et){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],tt!==void 0&&this.set(tt,rt,st,at,lt,dt,yt,vt,_t,bt,Mt,Ct,Tt,$t,Rt,Et)}set(tt,rt,st,at,lt,dt,yt,vt,_t,bt,Mt,Ct,Tt,$t,Rt,Et){const wt=this.elements;return wt[0]=tt,wt[4]=rt,wt[8]=st,wt[12]=at,wt[1]=lt,wt[5]=dt,wt[9]=yt,wt[13]=vt,wt[2]=_t,wt[6]=bt,wt[10]=Mt,wt[14]=Ct,wt[3]=Tt,wt[7]=$t,wt[11]=Rt,wt[15]=Et,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(tt){const rt=this.elements,st=tt.elements;return rt[0]=st[0],rt[1]=st[1],rt[2]=st[2],rt[3]=st[3],rt[4]=st[4],rt[5]=st[5],rt[6]=st[6],rt[7]=st[7],rt[8]=st[8],rt[9]=st[9],rt[10]=st[10],rt[11]=st[11],rt[12]=st[12],rt[13]=st[13],rt[14]=st[14],rt[15]=st[15],this}copyPosition(tt){const rt=this.elements,st=tt.elements;return rt[12]=st[12],rt[13]=st[13],rt[14]=st[14],this}setFromMatrix3(tt){const rt=tt.elements;return this.set(rt[0],rt[3],rt[6],0,rt[1],rt[4],rt[7],0,rt[2],rt[5],rt[8],0,0,0,0,1),this}extractBasis(tt,rt,st){return tt.setFromMatrixColumn(this,0),rt.setFromMatrixColumn(this,1),st.setFromMatrixColumn(this,2),this}makeBasis(tt,rt,st){return this.set(tt.x,rt.x,st.x,0,tt.y,rt.y,st.y,0,tt.z,rt.z,st.z,0,0,0,0,1),this}extractRotation(tt){const rt=this.elements,st=tt.elements,at=1/_v1$5.setFromMatrixColumn(tt,0).length(),lt=1/_v1$5.setFromMatrixColumn(tt,1).length(),dt=1/_v1$5.setFromMatrixColumn(tt,2).length();return rt[0]=st[0]*at,rt[1]=st[1]*at,rt[2]=st[2]*at,rt[3]=0,rt[4]=st[4]*lt,rt[5]=st[5]*lt,rt[6]=st[6]*lt,rt[7]=0,rt[8]=st[8]*dt,rt[9]=st[9]*dt,rt[10]=st[10]*dt,rt[11]=0,rt[12]=0,rt[13]=0,rt[14]=0,rt[15]=1,this}makeRotationFromEuler(tt){const rt=this.elements,st=tt.x,at=tt.y,lt=tt.z,dt=Math.cos(st),yt=Math.sin(st),vt=Math.cos(at),_t=Math.sin(at),bt=Math.cos(lt),Mt=Math.sin(lt);if(tt.order==="XYZ"){const Ct=dt*bt,Tt=dt*Mt,$t=yt*bt,Rt=yt*Mt;rt[0]=vt*bt,rt[4]=-vt*Mt,rt[8]=_t,rt[1]=Tt+$t*_t,rt[5]=Ct-Rt*_t,rt[9]=-yt*vt,rt[2]=Rt-Ct*_t,rt[6]=$t+Tt*_t,rt[10]=dt*vt}else if(tt.order==="YXZ"){const Ct=vt*bt,Tt=vt*Mt,$t=_t*bt,Rt=_t*Mt;rt[0]=Ct+Rt*yt,rt[4]=$t*yt-Tt,rt[8]=dt*_t,rt[1]=dt*Mt,rt[5]=dt*bt,rt[9]=-yt,rt[2]=Tt*yt-$t,rt[6]=Rt+Ct*yt,rt[10]=dt*vt}else if(tt.order==="ZXY"){const Ct=vt*bt,Tt=vt*Mt,$t=_t*bt,Rt=_t*Mt;rt[0]=Ct-Rt*yt,rt[4]=-dt*Mt,rt[8]=$t+Tt*yt,rt[1]=Tt+$t*yt,rt[5]=dt*bt,rt[9]=Rt-Ct*yt,rt[2]=-dt*_t,rt[6]=yt,rt[10]=dt*vt}else if(tt.order==="ZYX"){const Ct=dt*bt,Tt=dt*Mt,$t=yt*bt,Rt=yt*Mt;rt[0]=vt*bt,rt[4]=$t*_t-Tt,rt[8]=Ct*_t+Rt,rt[1]=vt*Mt,rt[5]=Rt*_t+Ct,rt[9]=Tt*_t-$t,rt[2]=-_t,rt[6]=yt*vt,rt[10]=dt*vt}else if(tt.order==="YZX"){const Ct=dt*vt,Tt=dt*_t,$t=yt*vt,Rt=yt*_t;rt[0]=vt*bt,rt[4]=Rt-Ct*Mt,rt[8]=$t*Mt+Tt,rt[1]=Mt,rt[5]=dt*bt,rt[9]=-yt*bt,rt[2]=-_t*bt,rt[6]=Tt*Mt+$t,rt[10]=Ct-Rt*Mt}else if(tt.order==="XZY"){const Ct=dt*vt,Tt=dt*_t,$t=yt*vt,Rt=yt*_t;rt[0]=vt*bt,rt[4]=-Mt,rt[8]=_t*bt,rt[1]=Ct*Mt+Rt,rt[5]=dt*bt,rt[9]=Tt*Mt-$t,rt[2]=$t*Mt-Tt,rt[6]=yt*bt,rt[10]=Rt*Mt+Ct}return rt[3]=0,rt[7]=0,rt[11]=0,rt[12]=0,rt[13]=0,rt[14]=0,rt[15]=1,this}makeRotationFromQuaternion(tt){return this.compose(_zero,tt,_one)}lookAt(tt,rt,st){const at=this.elements;return _z.subVectors(tt,rt),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(st,_z),_x.lengthSq()===0&&(Math.abs(st.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(st,_z)),_x.normalize(),_y.crossVectors(_z,_x),at[0]=_x.x,at[4]=_y.x,at[8]=_z.x,at[1]=_x.y,at[5]=_y.y,at[9]=_z.y,at[2]=_x.z,at[6]=_y.z,at[10]=_z.z,this}multiply(tt){return this.multiplyMatrices(this,tt)}premultiply(tt){return this.multiplyMatrices(tt,this)}multiplyMatrices(tt,rt){const st=tt.elements,at=rt.elements,lt=this.elements,dt=st[0],yt=st[4],vt=st[8],_t=st[12],bt=st[1],Mt=st[5],Ct=st[9],Tt=st[13],$t=st[2],Rt=st[6],Et=st[10],wt=st[14],Pt=st[3],Ft=st[7],Nt=st[11],Ot=st[15],Bt=at[0],Xt=at[4],Zt=at[8],rn=at[12],Gt=at[1],nn=at[5],cn=at[9],an=at[13],mn=at[2],En=at[6],Cn=at[10],Mn=at[14],un=at[3],Tn=at[7],Pn=at[11],dn=at[15];return lt[0]=dt*Bt+yt*Gt+vt*mn+_t*un,lt[4]=dt*Xt+yt*nn+vt*En+_t*Tn,lt[8]=dt*Zt+yt*cn+vt*Cn+_t*Pn,lt[12]=dt*rn+yt*an+vt*Mn+_t*dn,lt[1]=bt*Bt+Mt*Gt+Ct*mn+Tt*un,lt[5]=bt*Xt+Mt*nn+Ct*En+Tt*Tn,lt[9]=bt*Zt+Mt*cn+Ct*Cn+Tt*Pn,lt[13]=bt*rn+Mt*an+Ct*Mn+Tt*dn,lt[2]=$t*Bt+Rt*Gt+Et*mn+wt*un,lt[6]=$t*Xt+Rt*nn+Et*En+wt*Tn,lt[10]=$t*Zt+Rt*cn+Et*Cn+wt*Pn,lt[14]=$t*rn+Rt*an+Et*Mn+wt*dn,lt[3]=Pt*Bt+Ft*Gt+Nt*mn+Ot*un,lt[7]=Pt*Xt+Ft*nn+Nt*En+Ot*Tn,lt[11]=Pt*Zt+Ft*cn+Nt*Cn+Ot*Pn,lt[15]=Pt*rn+Ft*an+Nt*Mn+Ot*dn,this}multiplyScalar(tt){const rt=this.elements;return rt[0]*=tt,rt[4]*=tt,rt[8]*=tt,rt[12]*=tt,rt[1]*=tt,rt[5]*=tt,rt[9]*=tt,rt[13]*=tt,rt[2]*=tt,rt[6]*=tt,rt[10]*=tt,rt[14]*=tt,rt[3]*=tt,rt[7]*=tt,rt[11]*=tt,rt[15]*=tt,this}determinant(){const tt=this.elements,rt=tt[0],st=tt[4],at=tt[8],lt=tt[12],dt=tt[1],yt=tt[5],vt=tt[9],_t=tt[13],bt=tt[2],Mt=tt[6],Ct=tt[10],Tt=tt[14],$t=tt[3],Rt=tt[7],Et=tt[11],wt=tt[15];return $t*(+lt*vt*Mt-at*_t*Mt-lt*yt*Ct+st*_t*Ct+at*yt*Tt-st*vt*Tt)+Rt*(+rt*vt*Tt-rt*_t*Ct+lt*dt*Ct-at*dt*Tt+at*_t*bt-lt*vt*bt)+Et*(+rt*_t*Mt-rt*yt*Tt-lt*dt*Mt+st*dt*Tt+lt*yt*bt-st*_t*bt)+wt*(-at*yt*bt-rt*vt*Mt+rt*yt*Ct+at*dt*Mt-st*dt*Ct+st*vt*bt)}transpose(){const tt=this.elements;let rt;return rt=tt[1],tt[1]=tt[4],tt[4]=rt,rt=tt[2],tt[2]=tt[8],tt[8]=rt,rt=tt[6],tt[6]=tt[9],tt[9]=rt,rt=tt[3],tt[3]=tt[12],tt[12]=rt,rt=tt[7],tt[7]=tt[13],tt[13]=rt,rt=tt[11],tt[11]=tt[14],tt[14]=rt,this}setPosition(tt,rt,st){const at=this.elements;return tt.isVector3?(at[12]=tt.x,at[13]=tt.y,at[14]=tt.z):(at[12]=tt,at[13]=rt,at[14]=st),this}invert(){const tt=this.elements,rt=tt[0],st=tt[1],at=tt[2],lt=tt[3],dt=tt[4],yt=tt[5],vt=tt[6],_t=tt[7],bt=tt[8],Mt=tt[9],Ct=tt[10],Tt=tt[11],$t=tt[12],Rt=tt[13],Et=tt[14],wt=tt[15],Pt=Mt*Et*_t-Rt*Ct*_t+Rt*vt*Tt-yt*Et*Tt-Mt*vt*wt+yt*Ct*wt,Ft=$t*Ct*_t-bt*Et*_t-$t*vt*Tt+dt*Et*Tt+bt*vt*wt-dt*Ct*wt,Nt=bt*Rt*_t-$t*Mt*_t+$t*yt*Tt-dt*Rt*Tt-bt*yt*wt+dt*Mt*wt,Ot=$t*Mt*vt-bt*Rt*vt-$t*yt*Ct+dt*Rt*Ct+bt*yt*Et-dt*Mt*Et,Bt=rt*Pt+st*Ft+at*Nt+lt*Ot;if(Bt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Xt=1/Bt;return tt[0]=Pt*Xt,tt[1]=(Rt*Ct*lt-Mt*Et*lt-Rt*at*Tt+st*Et*Tt+Mt*at*wt-st*Ct*wt)*Xt,tt[2]=(yt*Et*lt-Rt*vt*lt+Rt*at*_t-st*Et*_t-yt*at*wt+st*vt*wt)*Xt,tt[3]=(Mt*vt*lt-yt*Ct*lt-Mt*at*_t+st*Ct*_t+yt*at*Tt-st*vt*Tt)*Xt,tt[4]=Ft*Xt,tt[5]=(bt*Et*lt-$t*Ct*lt+$t*at*Tt-rt*Et*Tt-bt*at*wt+rt*Ct*wt)*Xt,tt[6]=($t*vt*lt-dt*Et*lt-$t*at*_t+rt*Et*_t+dt*at*wt-rt*vt*wt)*Xt,tt[7]=(dt*Ct*lt-bt*vt*lt+bt*at*_t-rt*Ct*_t-dt*at*Tt+rt*vt*Tt)*Xt,tt[8]=Nt*Xt,tt[9]=($t*Mt*lt-bt*Rt*lt-$t*st*Tt+rt*Rt*Tt+bt*st*wt-rt*Mt*wt)*Xt,tt[10]=(dt*Rt*lt-$t*yt*lt+$t*st*_t-rt*Rt*_t-dt*st*wt+rt*yt*wt)*Xt,tt[11]=(bt*yt*lt-dt*Mt*lt-bt*st*_t+rt*Mt*_t+dt*st*Tt-rt*yt*Tt)*Xt,tt[12]=Ot*Xt,tt[13]=(bt*Rt*at-$t*Mt*at+$t*st*Ct-rt*Rt*Ct-bt*st*Et+rt*Mt*Et)*Xt,tt[14]=($t*yt*at-dt*Rt*at-$t*st*vt+rt*Rt*vt+dt*st*Et-rt*yt*Et)*Xt,tt[15]=(dt*Mt*at-bt*yt*at+bt*st*vt-rt*Mt*vt-dt*st*Ct+rt*yt*Ct)*Xt,this}scale(tt){const rt=this.elements,st=tt.x,at=tt.y,lt=tt.z;return rt[0]*=st,rt[4]*=at,rt[8]*=lt,rt[1]*=st,rt[5]*=at,rt[9]*=lt,rt[2]*=st,rt[6]*=at,rt[10]*=lt,rt[3]*=st,rt[7]*=at,rt[11]*=lt,this}getMaxScaleOnAxis(){const tt=this.elements,rt=tt[0]*tt[0]+tt[1]*tt[1]+tt[2]*tt[2],st=tt[4]*tt[4]+tt[5]*tt[5]+tt[6]*tt[6],at=tt[8]*tt[8]+tt[9]*tt[9]+tt[10]*tt[10];return Math.sqrt(Math.max(rt,st,at))}makeTranslation(tt,rt,st){return tt.isVector3?this.set(1,0,0,tt.x,0,1,0,tt.y,0,0,1,tt.z,0,0,0,1):this.set(1,0,0,tt,0,1,0,rt,0,0,1,st,0,0,0,1),this}makeRotationX(tt){const rt=Math.cos(tt),st=Math.sin(tt);return this.set(1,0,0,0,0,rt,-st,0,0,st,rt,0,0,0,0,1),this}makeRotationY(tt){const rt=Math.cos(tt),st=Math.sin(tt);return this.set(rt,0,st,0,0,1,0,0,-st,0,rt,0,0,0,0,1),this}makeRotationZ(tt){const rt=Math.cos(tt),st=Math.sin(tt);return this.set(rt,-st,0,0,st,rt,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(tt,rt){const st=Math.cos(rt),at=Math.sin(rt),lt=1-st,dt=tt.x,yt=tt.y,vt=tt.z,_t=lt*dt,bt=lt*yt;return this.set(_t*dt+st,_t*yt-at*vt,_t*vt+at*yt,0,_t*yt+at*vt,bt*yt+st,bt*vt-at*dt,0,_t*vt-at*yt,bt*vt+at*dt,lt*vt*vt+st,0,0,0,0,1),this}makeScale(tt,rt,st){return this.set(tt,0,0,0,0,rt,0,0,0,0,st,0,0,0,0,1),this}makeShear(tt,rt,st,at,lt,dt){return this.set(1,st,lt,0,tt,1,dt,0,rt,at,1,0,0,0,0,1),this}compose(tt,rt,st){const at=this.elements,lt=rt._x,dt=rt._y,yt=rt._z,vt=rt._w,_t=lt+lt,bt=dt+dt,Mt=yt+yt,Ct=lt*_t,Tt=lt*bt,$t=lt*Mt,Rt=dt*bt,Et=dt*Mt,wt=yt*Mt,Pt=vt*_t,Ft=vt*bt,Nt=vt*Mt,Ot=st.x,Bt=st.y,Xt=st.z;return at[0]=(1-(Rt+wt))*Ot,at[1]=(Tt+Nt)*Ot,at[2]=($t-Ft)*Ot,at[3]=0,at[4]=(Tt-Nt)*Bt,at[5]=(1-(Ct+wt))*Bt,at[6]=(Et+Pt)*Bt,at[7]=0,at[8]=($t+Ft)*Xt,at[9]=(Et-Pt)*Xt,at[10]=(1-(Ct+Rt))*Xt,at[11]=0,at[12]=tt.x,at[13]=tt.y,at[14]=tt.z,at[15]=1,this}decompose(tt,rt,st){const at=this.elements;let lt=_v1$5.set(at[0],at[1],at[2]).length();const dt=_v1$5.set(at[4],at[5],at[6]).length(),yt=_v1$5.set(at[8],at[9],at[10]).length();this.determinant()<0&&(lt=-lt),tt.x=at[12],tt.y=at[13],tt.z=at[14],_m1$4.copy(this);const _t=1/lt,bt=1/dt,Mt=1/yt;return _m1$4.elements[0]*=_t,_m1$4.elements[1]*=_t,_m1$4.elements[2]*=_t,_m1$4.elements[4]*=bt,_m1$4.elements[5]*=bt,_m1$4.elements[6]*=bt,_m1$4.elements[8]*=Mt,_m1$4.elements[9]*=Mt,_m1$4.elements[10]*=Mt,rt.setFromRotationMatrix(_m1$4),st.x=lt,st.y=dt,st.z=yt,this}makePerspective(tt,rt,st,at,lt,dt,yt=WebGLCoordinateSystem){const vt=this.elements,_t=2*lt/(rt-tt),bt=2*lt/(st-at),Mt=(rt+tt)/(rt-tt),Ct=(st+at)/(st-at);let Tt,$t;if(yt===WebGLCoordinateSystem)Tt=-(dt+lt)/(dt-lt),$t=-2*dt*lt/(dt-lt);else if(yt===WebGPUCoordinateSystem)Tt=-dt/(dt-lt),$t=-dt*lt/(dt-lt);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+yt);return vt[0]=_t,vt[4]=0,vt[8]=Mt,vt[12]=0,vt[1]=0,vt[5]=bt,vt[9]=Ct,vt[13]=0,vt[2]=0,vt[6]=0,vt[10]=Tt,vt[14]=$t,vt[3]=0,vt[7]=0,vt[11]=-1,vt[15]=0,this}makeOrthographic(tt,rt,st,at,lt,dt,yt=WebGLCoordinateSystem){const vt=this.elements,_t=1/(rt-tt),bt=1/(st-at),Mt=1/(dt-lt),Ct=(rt+tt)*_t,Tt=(st+at)*bt;let $t,Rt;if(yt===WebGLCoordinateSystem)$t=(dt+lt)*Mt,Rt=-2*Mt;else if(yt===WebGPUCoordinateSystem)$t=lt*Mt,Rt=-1*Mt;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+yt);return vt[0]=2*_t,vt[4]=0,vt[8]=0,vt[12]=-Ct,vt[1]=0,vt[5]=2*bt,vt[9]=0,vt[13]=-Tt,vt[2]=0,vt[6]=0,vt[10]=Rt,vt[14]=-$t,vt[3]=0,vt[7]=0,vt[11]=0,vt[15]=1,this}equals(tt){const rt=this.elements,st=tt.elements;for(let at=0;at<16;at++)if(rt[at]!==st[at])return!1;return!0}fromArray(tt,rt=0){for(let st=0;st<16;st++)this.elements[st]=tt[st+rt];return this}toArray(tt=[],rt=0){const st=this.elements;return tt[rt]=st[0],tt[rt+1]=st[1],tt[rt+2]=st[2],tt[rt+3]=st[3],tt[rt+4]=st[4],tt[rt+5]=st[5],tt[rt+6]=st[6],tt[rt+7]=st[7],tt[rt+8]=st[8],tt[rt+9]=st[9],tt[rt+10]=st[10],tt[rt+11]=st[11],tt[rt+12]=st[12],tt[rt+13]=st[13],tt[rt+14]=st[14],tt[rt+15]=st[15],tt}}const _v1$5=new Vector3,_m1$4=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(tt=0,rt=0,st=0,at=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=tt,this._y=rt,this._z=st,this._order=at}get x(){return this._x}set x(tt){this._x=tt,this._onChangeCallback()}get y(){return this._y}set y(tt){this._y=tt,this._onChangeCallback()}get z(){return this._z}set z(tt){this._z=tt,this._onChangeCallback()}get order(){return this._order}set order(tt){this._order=tt,this._onChangeCallback()}set(tt,rt,st,at=this._order){return this._x=tt,this._y=rt,this._z=st,this._order=at,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(tt){return this._x=tt._x,this._y=tt._y,this._z=tt._z,this._order=tt._order,this._onChangeCallback(),this}setFromRotationMatrix(tt,rt=this._order,st=!0){const at=tt.elements,lt=at[0],dt=at[4],yt=at[8],vt=at[1],_t=at[5],bt=at[9],Mt=at[2],Ct=at[6],Tt=at[10];switch(rt){case"XYZ":this._y=Math.asin(clamp(yt,-1,1)),Math.abs(yt)<.9999999?(this._x=Math.atan2(-bt,Tt),this._z=Math.atan2(-dt,lt)):(this._x=Math.atan2(Ct,_t),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(bt,-1,1)),Math.abs(bt)<.9999999?(this._y=Math.atan2(yt,Tt),this._z=Math.atan2(vt,_t)):(this._y=Math.atan2(-Mt,lt),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(Ct,-1,1)),Math.abs(Ct)<.9999999?(this._y=Math.atan2(-Mt,Tt),this._z=Math.atan2(-dt,_t)):(this._y=0,this._z=Math.atan2(vt,lt));break;case"ZYX":this._y=Math.asin(-clamp(Mt,-1,1)),Math.abs(Mt)<.9999999?(this._x=Math.atan2(Ct,Tt),this._z=Math.atan2(vt,lt)):(this._x=0,this._z=Math.atan2(-dt,_t));break;case"YZX":this._z=Math.asin(clamp(vt,-1,1)),Math.abs(vt)<.9999999?(this._x=Math.atan2(-bt,_t),this._y=Math.atan2(-Mt,lt)):(this._x=0,this._y=Math.atan2(yt,Tt));break;case"XZY":this._z=Math.asin(-clamp(dt,-1,1)),Math.abs(dt)<.9999999?(this._x=Math.atan2(Ct,_t),this._y=Math.atan2(yt,lt)):(this._x=Math.atan2(-bt,Tt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+rt)}return this._order=rt,st===!0&&this._onChangeCallback(),this}setFromQuaternion(tt,rt,st){return _matrix$2.makeRotationFromQuaternion(tt),this.setFromRotationMatrix(_matrix$2,rt,st)}setFromVector3(tt,rt=this._order){return this.set(tt.x,tt.y,tt.z,rt)}reorder(tt){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,tt)}equals(tt){return tt._x===this._x&&tt._y===this._y&&tt._z===this._z&&tt._order===this._order}fromArray(tt){return this._x=tt[0],this._y=tt[1],this._z=tt[2],tt[3]!==void 0&&(this._order=tt[3]),this._onChangeCallback(),this}toArray(tt=[],rt=0){return tt[rt]=this._x,tt[rt+1]=this._y,tt[rt+2]=this._z,tt[rt+3]=this._order,tt}_onChange(tt){return this._onChangeCallback=tt,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(tt){this.mask=(1<<tt|0)>>>0}enable(tt){this.mask|=1<<tt|0}enableAll(){this.mask=-1}toggle(tt){this.mask^=1<<tt|0}disable(tt){this.mask&=~(1<<tt|0)}disableAll(){this.mask=0}test(tt){return(this.mask&tt.mask)!==0}isEnabled(tt){return(this.mask&(1<<tt|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$3=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const tt=new Vector3,rt=new Euler,st=new Quaternion,at=new Vector3(1,1,1);function lt(){st.setFromEuler(rt,!1)}function dt(){rt.setFromQuaternion(st,void 0,!1)}rt._onChange(lt),st._onChange(dt),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:tt},rotation:{configurable:!0,enumerable:!0,value:rt},quaternion:{configurable:!0,enumerable:!0,value:st},scale:{configurable:!0,enumerable:!0,value:at},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(tt){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(tt),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(tt){return this.quaternion.premultiply(tt),this}setRotationFromAxisAngle(tt,rt){this.quaternion.setFromAxisAngle(tt,rt)}setRotationFromEuler(tt){this.quaternion.setFromEuler(tt,!0)}setRotationFromMatrix(tt){this.quaternion.setFromRotationMatrix(tt)}setRotationFromQuaternion(tt){this.quaternion.copy(tt)}rotateOnAxis(tt,rt){return _q1.setFromAxisAngle(tt,rt),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(tt,rt){return _q1.setFromAxisAngle(tt,rt),this.quaternion.premultiply(_q1),this}rotateX(tt){return this.rotateOnAxis(_xAxis,tt)}rotateY(tt){return this.rotateOnAxis(_yAxis,tt)}rotateZ(tt){return this.rotateOnAxis(_zAxis,tt)}translateOnAxis(tt,rt){return _v1$4.copy(tt).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(rt)),this}translateX(tt){return this.translateOnAxis(_xAxis,tt)}translateY(tt){return this.translateOnAxis(_yAxis,tt)}translateZ(tt){return this.translateOnAxis(_zAxis,tt)}localToWorld(tt){return this.updateWorldMatrix(!0,!1),tt.applyMatrix4(this.matrixWorld)}worldToLocal(tt){return this.updateWorldMatrix(!0,!1),tt.applyMatrix4(_m1$3.copy(this.matrixWorld).invert())}lookAt(tt,rt,st){tt.isVector3?_target.copy(tt):_target.set(tt,rt,st);const at=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$3.lookAt(_position$3,_target,this.up):_m1$3.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$3),at&&(_m1$3.extractRotation(at.matrixWorld),_q1.setFromRotationMatrix(_m1$3),this.quaternion.premultiply(_q1.invert()))}add(tt){if(arguments.length>1){for(let rt=0;rt<arguments.length;rt++)this.add(arguments[rt]);return this}return tt===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",tt),this):(tt&&tt.isObject3D?(tt.removeFromParent(),tt.parent=this,this.children.push(tt),tt.dispatchEvent(_addedEvent),_childaddedEvent.child=tt,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",tt),this)}remove(tt){if(arguments.length>1){for(let st=0;st<arguments.length;st++)this.remove(arguments[st]);return this}const rt=this.children.indexOf(tt);return rt!==-1&&(tt.parent=null,this.children.splice(rt,1),tt.dispatchEvent(_removedEvent),_childremovedEvent.child=tt,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const tt=this.parent;return tt!==null&&tt.remove(this),this}clear(){return this.remove(...this.children)}attach(tt){return this.updateWorldMatrix(!0,!1),_m1$3.copy(this.matrixWorld).invert(),tt.parent!==null&&(tt.parent.updateWorldMatrix(!0,!1),_m1$3.multiply(tt.parent.matrixWorld)),tt.applyMatrix4(_m1$3),tt.removeFromParent(),tt.parent=this,this.children.push(tt),tt.updateWorldMatrix(!1,!0),tt.dispatchEvent(_addedEvent),_childaddedEvent.child=tt,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(tt){return this.getObjectByProperty("id",tt)}getObjectByName(tt){return this.getObjectByProperty("name",tt)}getObjectByProperty(tt,rt){if(this[tt]===rt)return this;for(let st=0,at=this.children.length;st<at;st++){const dt=this.children[st].getObjectByProperty(tt,rt);if(dt!==void 0)return dt}}getObjectsByProperty(tt,rt,st=[]){this[tt]===rt&&st.push(this);const at=this.children;for(let lt=0,dt=at.length;lt<dt;lt++)at[lt].getObjectsByProperty(tt,rt,st);return st}getWorldPosition(tt){return this.updateWorldMatrix(!0,!1),tt.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(tt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,tt,_scale$2),tt}getWorldScale(tt){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,tt),tt}getWorldDirection(tt){this.updateWorldMatrix(!0,!1);const rt=this.matrixWorld.elements;return tt.set(rt[8],rt[9],rt[10]).normalize()}raycast(){}traverse(tt){tt(this);const rt=this.children;for(let st=0,at=rt.length;st<at;st++)rt[st].traverse(tt)}traverseVisible(tt){if(this.visible===!1)return;tt(this);const rt=this.children;for(let st=0,at=rt.length;st<at;st++)rt[st].traverseVisible(tt)}traverseAncestors(tt){const rt=this.parent;rt!==null&&(tt(rt),rt.traverseAncestors(tt))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(tt){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||tt)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,tt=!0);const rt=this.children;for(let st=0,at=rt.length;st<at;st++)rt[st].updateMatrixWorld(tt)}updateWorldMatrix(tt,rt){const st=this.parent;if(tt===!0&&st!==null&&st.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),rt===!0){const at=this.children;for(let lt=0,dt=at.length;lt<dt;lt++)at[lt].updateWorldMatrix(!1,!0)}}toJSON(tt){const rt=tt===void 0||typeof tt=="string",st={};rt&&(tt={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},st.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const at={};at.uuid=this.uuid,at.type=this.type,this.name!==""&&(at.name=this.name),this.castShadow===!0&&(at.castShadow=!0),this.receiveShadow===!0&&(at.receiveShadow=!0),this.visible===!1&&(at.visible=!1),this.frustumCulled===!1&&(at.frustumCulled=!1),this.renderOrder!==0&&(at.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(at.userData=this.userData),at.layers=this.layers.mask,at.matrix=this.matrix.toArray(),at.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(at.matrixAutoUpdate=!1),this.isInstancedMesh&&(at.type="InstancedMesh",at.count=this.count,at.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(at.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(at.type="BatchedMesh",at.perObjectFrustumCulled=this.perObjectFrustumCulled,at.sortObjects=this.sortObjects,at.drawRanges=this._drawRanges,at.reservedRanges=this._reservedRanges,at.visibility=this._visibility,at.active=this._active,at.bounds=this._bounds.map(yt=>({boxInitialized:yt.boxInitialized,boxMin:yt.box.min.toArray(),boxMax:yt.box.max.toArray(),sphereInitialized:yt.sphereInitialized,sphereRadius:yt.sphere.radius,sphereCenter:yt.sphere.center.toArray()})),at.maxInstanceCount=this._maxInstanceCount,at.maxVertexCount=this._maxVertexCount,at.maxIndexCount=this._maxIndexCount,at.geometryInitialized=this._geometryInitialized,at.geometryCount=this._geometryCount,at.matricesTexture=this._matricesTexture.toJSON(tt),this._colorsTexture!==null&&(at.colorsTexture=this._colorsTexture.toJSON(tt)),this.boundingSphere!==null&&(at.boundingSphere={center:at.boundingSphere.center.toArray(),radius:at.boundingSphere.radius}),this.boundingBox!==null&&(at.boundingBox={min:at.boundingBox.min.toArray(),max:at.boundingBox.max.toArray()}));function lt(yt,vt){return yt[vt.uuid]===void 0&&(yt[vt.uuid]=vt.toJSON(tt)),vt.uuid}if(this.isScene)this.background&&(this.background.isColor?at.background=this.background.toJSON():this.background.isTexture&&(at.background=this.background.toJSON(tt).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(at.environment=this.environment.toJSON(tt).uuid);else if(this.isMesh||this.isLine||this.isPoints){at.geometry=lt(tt.geometries,this.geometry);const yt=this.geometry.parameters;if(yt!==void 0&&yt.shapes!==void 0){const vt=yt.shapes;if(Array.isArray(vt))for(let _t=0,bt=vt.length;_t<bt;_t++){const Mt=vt[_t];lt(tt.shapes,Mt)}else lt(tt.shapes,vt)}}if(this.isSkinnedMesh&&(at.bindMode=this.bindMode,at.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(lt(tt.skeletons,this.skeleton),at.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const yt=[];for(let vt=0,_t=this.material.length;vt<_t;vt++)yt.push(lt(tt.materials,this.material[vt]));at.material=yt}else at.material=lt(tt.materials,this.material);if(this.children.length>0){at.children=[];for(let yt=0;yt<this.children.length;yt++)at.children.push(this.children[yt].toJSON(tt).object)}if(this.animations.length>0){at.animations=[];for(let yt=0;yt<this.animations.length;yt++){const vt=this.animations[yt];at.animations.push(lt(tt.animations,vt))}}if(rt){const yt=dt(tt.geometries),vt=dt(tt.materials),_t=dt(tt.textures),bt=dt(tt.images),Mt=dt(tt.shapes),Ct=dt(tt.skeletons),Tt=dt(tt.animations),$t=dt(tt.nodes);yt.length>0&&(st.geometries=yt),vt.length>0&&(st.materials=vt),_t.length>0&&(st.textures=_t),bt.length>0&&(st.images=bt),Mt.length>0&&(st.shapes=Mt),Ct.length>0&&(st.skeletons=Ct),Tt.length>0&&(st.animations=Tt),$t.length>0&&(st.nodes=$t)}return st.object=at,st;function dt(yt){const vt=[];for(const _t in yt){const bt=yt[_t];delete bt.metadata,vt.push(bt)}return vt}}clone(tt){return new this.constructor().copy(this,tt)}copy(tt,rt=!0){if(this.name=tt.name,this.up.copy(tt.up),this.position.copy(tt.position),this.rotation.order=tt.rotation.order,this.quaternion.copy(tt.quaternion),this.scale.copy(tt.scale),this.matrix.copy(tt.matrix),this.matrixWorld.copy(tt.matrixWorld),this.matrixAutoUpdate=tt.matrixAutoUpdate,this.matrixWorldAutoUpdate=tt.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=tt.matrixWorldNeedsUpdate,this.layers.mask=tt.layers.mask,this.visible=tt.visible,this.castShadow=tt.castShadow,this.receiveShadow=tt.receiveShadow,this.frustumCulled=tt.frustumCulled,this.renderOrder=tt.renderOrder,this.animations=tt.animations.slice(),this.userData=JSON.parse(JSON.stringify(tt.userData)),rt===!0)for(let st=0;st<tt.children.length;st++){const at=tt.children[st];this.add(at.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$2=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(tt=new Vector3,rt=new Vector3,st=new Vector3){this.a=tt,this.b=rt,this.c=st}static getNormal(tt,rt,st,at){at.subVectors(st,rt),_v0$2.subVectors(tt,rt),at.cross(_v0$2);const lt=at.lengthSq();return lt>0?at.multiplyScalar(1/Math.sqrt(lt)):at.set(0,0,0)}static getBarycoord(tt,rt,st,at,lt){_v0$2.subVectors(at,rt),_v1$3.subVectors(st,rt),_v2$2.subVectors(tt,rt);const dt=_v0$2.dot(_v0$2),yt=_v0$2.dot(_v1$3),vt=_v0$2.dot(_v2$2),_t=_v1$3.dot(_v1$3),bt=_v1$3.dot(_v2$2),Mt=dt*_t-yt*yt;if(Mt===0)return lt.set(0,0,0),null;const Ct=1/Mt,Tt=(_t*vt-yt*bt)*Ct,$t=(dt*bt-yt*vt)*Ct;return lt.set(1-Tt-$t,$t,Tt)}static containsPoint(tt,rt,st,at){return this.getBarycoord(tt,rt,st,at,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(tt,rt,st,at,lt,dt,yt,vt){return this.getBarycoord(tt,rt,st,at,_v3$2)===null?(vt.x=0,vt.y=0,"z"in vt&&(vt.z=0),"w"in vt&&(vt.w=0),null):(vt.setScalar(0),vt.addScaledVector(lt,_v3$2.x),vt.addScaledVector(dt,_v3$2.y),vt.addScaledVector(yt,_v3$2.z),vt)}static getInterpolatedAttribute(tt,rt,st,at,lt,dt){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(tt,rt),_v41.fromBufferAttribute(tt,st),_v42.fromBufferAttribute(tt,at),dt.setScalar(0),dt.addScaledVector(_v40,lt.x),dt.addScaledVector(_v41,lt.y),dt.addScaledVector(_v42,lt.z),dt}static isFrontFacing(tt,rt,st,at){return _v0$2.subVectors(st,rt),_v1$3.subVectors(tt,rt),_v0$2.cross(_v1$3).dot(at)<0}set(tt,rt,st){return this.a.copy(tt),this.b.copy(rt),this.c.copy(st),this}setFromPointsAndIndices(tt,rt,st,at){return this.a.copy(tt[rt]),this.b.copy(tt[st]),this.c.copy(tt[at]),this}setFromAttributeAndIndices(tt,rt,st,at){return this.a.fromBufferAttribute(tt,rt),this.b.fromBufferAttribute(tt,st),this.c.fromBufferAttribute(tt,at),this}clone(){return new this.constructor().copy(this)}copy(tt){return this.a.copy(tt.a),this.b.copy(tt.b),this.c.copy(tt.c),this}getArea(){return _v0$2.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$2.cross(_v1$3).length()*.5}getMidpoint(tt){return tt.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(tt){return Triangle.getNormal(this.a,this.b,this.c,tt)}getPlane(tt){return tt.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(tt,rt){return Triangle.getBarycoord(tt,this.a,this.b,this.c,rt)}getInterpolation(tt,rt,st,at,lt){return Triangle.getInterpolation(tt,this.a,this.b,this.c,rt,st,at,lt)}containsPoint(tt){return Triangle.containsPoint(tt,this.a,this.b,this.c)}isFrontFacing(tt){return Triangle.isFrontFacing(this.a,this.b,this.c,tt)}intersectsBox(tt){return tt.intersectsTriangle(this)}closestPointToPoint(tt,rt){const st=this.a,at=this.b,lt=this.c;let dt,yt;_vab.subVectors(at,st),_vac.subVectors(lt,st),_vap.subVectors(tt,st);const vt=_vab.dot(_vap),_t=_vac.dot(_vap);if(vt<=0&&_t<=0)return rt.copy(st);_vbp.subVectors(tt,at);const bt=_vab.dot(_vbp),Mt=_vac.dot(_vbp);if(bt>=0&&Mt<=bt)return rt.copy(at);const Ct=vt*Mt-bt*_t;if(Ct<=0&&vt>=0&&bt<=0)return dt=vt/(vt-bt),rt.copy(st).addScaledVector(_vab,dt);_vcp.subVectors(tt,lt);const Tt=_vab.dot(_vcp),$t=_vac.dot(_vcp);if($t>=0&&Tt<=$t)return rt.copy(lt);const Rt=Tt*_t-vt*$t;if(Rt<=0&&_t>=0&&$t<=0)return yt=_t/(_t-$t),rt.copy(st).addScaledVector(_vac,yt);const Et=bt*$t-Tt*Mt;if(Et<=0&&Mt-bt>=0&&Tt-$t>=0)return _vbc.subVectors(lt,at),yt=(Mt-bt)/(Mt-bt+(Tt-$t)),rt.copy(at).addScaledVector(_vbc,yt);const wt=1/(Et+Rt+Ct);return dt=Rt*wt,yt=Ct*wt,rt.copy(st).addScaledVector(_vab,dt).addScaledVector(_vac,yt)}equals(tt){return tt.a.equals(this.a)&&tt.b.equals(this.b)&&tt.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(nt,tt,rt){return rt<0&&(rt+=1),rt>1&&(rt-=1),rt<1/6?nt+(tt-nt)*6*rt:rt<1/2?tt:rt<2/3?nt+(tt-nt)*6*(2/3-rt):nt}let Color$1=class{constructor(tt,rt,st){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(tt,rt,st)}set(tt,rt,st){if(rt===void 0&&st===void 0){const at=tt;at&&at.isColor?this.copy(at):typeof at=="number"?this.setHex(at):typeof at=="string"&&this.setStyle(at)}else this.setRGB(tt,rt,st);return this}setScalar(tt){return this.r=tt,this.g=tt,this.b=tt,this}setHex(tt,rt=SRGBColorSpace){return tt=Math.floor(tt),this.r=(tt>>16&255)/255,this.g=(tt>>8&255)/255,this.b=(tt&255)/255,ColorManagement.toWorkingColorSpace(this,rt),this}setRGB(tt,rt,st,at=ColorManagement.workingColorSpace){return this.r=tt,this.g=rt,this.b=st,ColorManagement.toWorkingColorSpace(this,at),this}setHSL(tt,rt,st,at=ColorManagement.workingColorSpace){if(tt=euclideanModulo(tt,1),rt=clamp(rt,0,1),st=clamp(st,0,1),rt===0)this.r=this.g=this.b=st;else{const lt=st<=.5?st*(1+rt):st+rt-st*rt,dt=2*st-lt;this.r=hue2rgb(dt,lt,tt+1/3),this.g=hue2rgb(dt,lt,tt),this.b=hue2rgb(dt,lt,tt-1/3)}return ColorManagement.toWorkingColorSpace(this,at),this}setStyle(tt,rt=SRGBColorSpace){function st(lt){lt!==void 0&&parseFloat(lt)<1&&console.warn("THREE.Color: Alpha component of "+tt+" will be ignored.")}let at;if(at=/^(\w+)\(([^\)]*)\)/.exec(tt)){let lt;const dt=at[1],yt=at[2];switch(dt){case"rgb":case"rgba":if(lt=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(yt))return st(lt[4]),this.setRGB(Math.min(255,parseInt(lt[1],10))/255,Math.min(255,parseInt(lt[2],10))/255,Math.min(255,parseInt(lt[3],10))/255,rt);if(lt=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(yt))return st(lt[4]),this.setRGB(Math.min(100,parseInt(lt[1],10))/100,Math.min(100,parseInt(lt[2],10))/100,Math.min(100,parseInt(lt[3],10))/100,rt);break;case"hsl":case"hsla":if(lt=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(yt))return st(lt[4]),this.setHSL(parseFloat(lt[1])/360,parseFloat(lt[2])/100,parseFloat(lt[3])/100,rt);break;default:console.warn("THREE.Color: Unknown color model "+tt)}}else if(at=/^\#([A-Fa-f\d]+)$/.exec(tt)){const lt=at[1],dt=lt.length;if(dt===3)return this.setRGB(parseInt(lt.charAt(0),16)/15,parseInt(lt.charAt(1),16)/15,parseInt(lt.charAt(2),16)/15,rt);if(dt===6)return this.setHex(parseInt(lt,16),rt);console.warn("THREE.Color: Invalid hex color "+tt)}else if(tt&&tt.length>0)return this.setColorName(tt,rt);return this}setColorName(tt,rt=SRGBColorSpace){const st=_colorKeywords[tt.toLowerCase()];return st!==void 0?this.setHex(st,rt):console.warn("THREE.Color: Unknown color "+tt),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(tt){return this.r=tt.r,this.g=tt.g,this.b=tt.b,this}copySRGBToLinear(tt){return this.r=SRGBToLinear(tt.r),this.g=SRGBToLinear(tt.g),this.b=SRGBToLinear(tt.b),this}copyLinearToSRGB(tt){return this.r=LinearToSRGB(tt.r),this.g=LinearToSRGB(tt.g),this.b=LinearToSRGB(tt.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(tt=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),tt),Math.round(clamp(_color.r*255,0,255))*65536+Math.round(clamp(_color.g*255,0,255))*256+Math.round(clamp(_color.b*255,0,255))}getHexString(tt=SRGBColorSpace){return("000000"+this.getHex(tt).toString(16)).slice(-6)}getHSL(tt,rt=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),rt);const st=_color.r,at=_color.g,lt=_color.b,dt=Math.max(st,at,lt),yt=Math.min(st,at,lt);let vt,_t;const bt=(yt+dt)/2;if(yt===dt)vt=0,_t=0;else{const Mt=dt-yt;switch(_t=bt<=.5?Mt/(dt+yt):Mt/(2-dt-yt),dt){case st:vt=(at-lt)/Mt+(at<lt?6:0);break;case at:vt=(lt-st)/Mt+2;break;case lt:vt=(st-at)/Mt+4;break}vt/=6}return tt.h=vt,tt.s=_t,tt.l=bt,tt}getRGB(tt,rt=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),rt),tt.r=_color.r,tt.g=_color.g,tt.b=_color.b,tt}getStyle(tt=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),tt);const rt=_color.r,st=_color.g,at=_color.b;return tt!==SRGBColorSpace?`color(${tt} ${rt.toFixed(3)} ${st.toFixed(3)} ${at.toFixed(3)})`:`rgb(${Math.round(rt*255)},${Math.round(st*255)},${Math.round(at*255)})`}offsetHSL(tt,rt,st){return this.getHSL(_hslA),this.setHSL(_hslA.h+tt,_hslA.s+rt,_hslA.l+st)}add(tt){return this.r+=tt.r,this.g+=tt.g,this.b+=tt.b,this}addColors(tt,rt){return this.r=tt.r+rt.r,this.g=tt.g+rt.g,this.b=tt.b+rt.b,this}addScalar(tt){return this.r+=tt,this.g+=tt,this.b+=tt,this}sub(tt){return this.r=Math.max(0,this.r-tt.r),this.g=Math.max(0,this.g-tt.g),this.b=Math.max(0,this.b-tt.b),this}multiply(tt){return this.r*=tt.r,this.g*=tt.g,this.b*=tt.b,this}multiplyScalar(tt){return this.r*=tt,this.g*=tt,this.b*=tt,this}lerp(tt,rt){return this.r+=(tt.r-this.r)*rt,this.g+=(tt.g-this.g)*rt,this.b+=(tt.b-this.b)*rt,this}lerpColors(tt,rt,st){return this.r=tt.r+(rt.r-tt.r)*st,this.g=tt.g+(rt.g-tt.g)*st,this.b=tt.b+(rt.b-tt.b)*st,this}lerpHSL(tt,rt){this.getHSL(_hslA),tt.getHSL(_hslB);const st=lerp(_hslA.h,_hslB.h,rt),at=lerp(_hslA.s,_hslB.s,rt),lt=lerp(_hslA.l,_hslB.l,rt);return this.setHSL(st,at,lt),this}setFromVector3(tt){return this.r=tt.x,this.g=tt.y,this.b=tt.z,this}applyMatrix3(tt){const rt=this.r,st=this.g,at=this.b,lt=tt.elements;return this.r=lt[0]*rt+lt[3]*st+lt[6]*at,this.g=lt[1]*rt+lt[4]*st+lt[7]*at,this.b=lt[2]*rt+lt[5]*st+lt[8]*at,this}equals(tt){return tt.r===this.r&&tt.g===this.g&&tt.b===this.b}fromArray(tt,rt=0){return this.r=tt[rt],this.g=tt[rt+1],this.b=tt[rt+2],this}toArray(tt=[],rt=0){return tt[rt]=this.r,tt[rt+1]=this.g,tt[rt+2]=this.b,tt}fromBufferAttribute(tt,rt){return this.r=tt.getX(rt),this.g=tt.getY(rt),this.b=tt.getZ(rt),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _color=new Color$1;Color$1.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color$1(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(tt){this._alphaTest>0!=tt>0&&this.version++,this._alphaTest=tt}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(tt){if(tt!==void 0)for(const rt in tt){const st=tt[rt];if(st===void 0){console.warn(`THREE.Material: parameter '${rt}' has value of undefined.`);continue}const at=this[rt];if(at===void 0){console.warn(`THREE.Material: '${rt}' is not a property of THREE.${this.type}.`);continue}at&&at.isColor?at.set(st):at&&at.isVector3&&st&&st.isVector3?at.copy(st):this[rt]=st}}toJSON(tt){const rt=tt===void 0||typeof tt=="string";rt&&(tt={textures:{},images:{}});const st={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};st.uuid=this.uuid,st.type=this.type,this.name!==""&&(st.name=this.name),this.color&&this.color.isColor&&(st.color=this.color.getHex()),this.roughness!==void 0&&(st.roughness=this.roughness),this.metalness!==void 0&&(st.metalness=this.metalness),this.sheen!==void 0&&(st.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(st.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(st.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(st.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(st.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(st.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(st.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(st.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(st.shininess=this.shininess),this.clearcoat!==void 0&&(st.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(st.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(st.clearcoatMap=this.clearcoatMap.toJSON(tt).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(st.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(tt).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(st.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(tt).uuid,st.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(st.dispersion=this.dispersion),this.iridescence!==void 0&&(st.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(st.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(st.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(st.iridescenceMap=this.iridescenceMap.toJSON(tt).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(st.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(tt).uuid),this.anisotropy!==void 0&&(st.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(st.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(st.anisotropyMap=this.anisotropyMap.toJSON(tt).uuid),this.map&&this.map.isTexture&&(st.map=this.map.toJSON(tt).uuid),this.matcap&&this.matcap.isTexture&&(st.matcap=this.matcap.toJSON(tt).uuid),this.alphaMap&&this.alphaMap.isTexture&&(st.alphaMap=this.alphaMap.toJSON(tt).uuid),this.lightMap&&this.lightMap.isTexture&&(st.lightMap=this.lightMap.toJSON(tt).uuid,st.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(st.aoMap=this.aoMap.toJSON(tt).uuid,st.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(st.bumpMap=this.bumpMap.toJSON(tt).uuid,st.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(st.normalMap=this.normalMap.toJSON(tt).uuid,st.normalMapType=this.normalMapType,st.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(st.displacementMap=this.displacementMap.toJSON(tt).uuid,st.displacementScale=this.displacementScale,st.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(st.roughnessMap=this.roughnessMap.toJSON(tt).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(st.metalnessMap=this.metalnessMap.toJSON(tt).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(st.emissiveMap=this.emissiveMap.toJSON(tt).uuid),this.specularMap&&this.specularMap.isTexture&&(st.specularMap=this.specularMap.toJSON(tt).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(st.specularIntensityMap=this.specularIntensityMap.toJSON(tt).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(st.specularColorMap=this.specularColorMap.toJSON(tt).uuid),this.envMap&&this.envMap.isTexture&&(st.envMap=this.envMap.toJSON(tt).uuid,this.combine!==void 0&&(st.combine=this.combine)),this.envMapRotation!==void 0&&(st.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(st.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(st.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(st.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(st.gradientMap=this.gradientMap.toJSON(tt).uuid),this.transmission!==void 0&&(st.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(st.transmissionMap=this.transmissionMap.toJSON(tt).uuid),this.thickness!==void 0&&(st.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(st.thicknessMap=this.thicknessMap.toJSON(tt).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(st.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(st.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(st.size=this.size),this.shadowSide!==null&&(st.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(st.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(st.blending=this.blending),this.side!==FrontSide&&(st.side=this.side),this.vertexColors===!0&&(st.vertexColors=!0),this.opacity<1&&(st.opacity=this.opacity),this.transparent===!0&&(st.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(st.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(st.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(st.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(st.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(st.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(st.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(st.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(st.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(st.depthFunc=this.depthFunc),this.depthTest===!1&&(st.depthTest=this.depthTest),this.depthWrite===!1&&(st.depthWrite=this.depthWrite),this.colorWrite===!1&&(st.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(st.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(st.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(st.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(st.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(st.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(st.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(st.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(st.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(st.rotation=this.rotation),this.polygonOffset===!0&&(st.polygonOffset=!0),this.polygonOffsetFactor!==0&&(st.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(st.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(st.linewidth=this.linewidth),this.dashSize!==void 0&&(st.dashSize=this.dashSize),this.gapSize!==void 0&&(st.gapSize=this.gapSize),this.scale!==void 0&&(st.scale=this.scale),this.dithering===!0&&(st.dithering=!0),this.alphaTest>0&&(st.alphaTest=this.alphaTest),this.alphaHash===!0&&(st.alphaHash=!0),this.alphaToCoverage===!0&&(st.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(st.premultipliedAlpha=!0),this.forceSinglePass===!0&&(st.forceSinglePass=!0),this.wireframe===!0&&(st.wireframe=!0),this.wireframeLinewidth>1&&(st.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(st.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(st.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(st.flatShading=!0),this.visible===!1&&(st.visible=!1),this.toneMapped===!1&&(st.toneMapped=!1),this.fog===!1&&(st.fog=!1),Object.keys(this.userData).length>0&&(st.userData=this.userData);function at(lt){const dt=[];for(const yt in lt){const vt=lt[yt];delete vt.metadata,dt.push(vt)}return dt}if(rt){const lt=at(tt.textures),dt=at(tt.images);lt.length>0&&(st.textures=lt),dt.length>0&&(st.images=dt)}return st}clone(){return new this.constructor().copy(this)}copy(tt){this.name=tt.name,this.blending=tt.blending,this.side=tt.side,this.vertexColors=tt.vertexColors,this.opacity=tt.opacity,this.transparent=tt.transparent,this.blendSrc=tt.blendSrc,this.blendDst=tt.blendDst,this.blendEquation=tt.blendEquation,this.blendSrcAlpha=tt.blendSrcAlpha,this.blendDstAlpha=tt.blendDstAlpha,this.blendEquationAlpha=tt.blendEquationAlpha,this.blendColor.copy(tt.blendColor),this.blendAlpha=tt.blendAlpha,this.depthFunc=tt.depthFunc,this.depthTest=tt.depthTest,this.depthWrite=tt.depthWrite,this.stencilWriteMask=tt.stencilWriteMask,this.stencilFunc=tt.stencilFunc,this.stencilRef=tt.stencilRef,this.stencilFuncMask=tt.stencilFuncMask,this.stencilFail=tt.stencilFail,this.stencilZFail=tt.stencilZFail,this.stencilZPass=tt.stencilZPass,this.stencilWrite=tt.stencilWrite;const rt=tt.clippingPlanes;let st=null;if(rt!==null){const at=rt.length;st=new Array(at);for(let lt=0;lt!==at;++lt)st[lt]=rt[lt].clone()}return this.clippingPlanes=st,this.clipIntersection=tt.clipIntersection,this.clipShadows=tt.clipShadows,this.shadowSide=tt.shadowSide,this.colorWrite=tt.colorWrite,this.precision=tt.precision,this.polygonOffset=tt.polygonOffset,this.polygonOffsetFactor=tt.polygonOffsetFactor,this.polygonOffsetUnits=tt.polygonOffsetUnits,this.dithering=tt.dithering,this.alphaTest=tt.alphaTest,this.alphaHash=tt.alphaHash,this.alphaToCoverage=tt.alphaToCoverage,this.premultipliedAlpha=tt.premultipliedAlpha,this.forceSinglePass=tt.forceSinglePass,this.visible=tt.visible,this.toneMapped=tt.toneMapped,this.userData=JSON.parse(JSON.stringify(tt.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(tt){tt===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class MeshBasicMaterial extends Material{constructor(tt){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.map=tt.map,this.lightMap=tt.lightMap,this.lightMapIntensity=tt.lightMapIntensity,this.aoMap=tt.aoMap,this.aoMapIntensity=tt.aoMapIntensity,this.specularMap=tt.specularMap,this.alphaMap=tt.alphaMap,this.envMap=tt.envMap,this.envMapRotation.copy(tt.envMapRotation),this.combine=tt.combine,this.reflectivity=tt.reflectivity,this.refractionRatio=tt.refractionRatio,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.wireframeLinecap=tt.wireframeLinecap,this.wireframeLinejoin=tt.wireframeLinejoin,this.fog=tt.fog,this}}const _tables=_generateTables();function _generateTables(){const nt=new ArrayBuffer(4),tt=new Float32Array(nt),rt=new Uint32Array(nt),st=new Uint32Array(512),at=new Uint32Array(512);for(let vt=0;vt<256;++vt){const _t=vt-127;_t<-27?(st[vt]=0,st[vt|256]=32768,at[vt]=24,at[vt|256]=24):_t<-14?(st[vt]=1024>>-_t-14,st[vt|256]=1024>>-_t-14|32768,at[vt]=-_t-1,at[vt|256]=-_t-1):_t<=15?(st[vt]=_t+15<<10,st[vt|256]=_t+15<<10|32768,at[vt]=13,at[vt|256]=13):_t<128?(st[vt]=31744,st[vt|256]=64512,at[vt]=24,at[vt|256]=24):(st[vt]=31744,st[vt|256]=64512,at[vt]=13,at[vt|256]=13)}const lt=new Uint32Array(2048),dt=new Uint32Array(64),yt=new Uint32Array(64);for(let vt=1;vt<1024;++vt){let _t=vt<<13,bt=0;for(;!(_t&8388608);)_t<<=1,bt-=8388608;_t&=-8388609,bt+=947912704,lt[vt]=_t|bt}for(let vt=1024;vt<2048;++vt)lt[vt]=939524096+(vt-1024<<13);for(let vt=1;vt<31;++vt)dt[vt]=vt<<23;dt[31]=1199570944,dt[32]=2147483648;for(let vt=33;vt<63;++vt)dt[vt]=2147483648+(vt-32<<23);dt[63]=3347054592;for(let vt=1;vt<64;++vt)vt!==32&&(yt[vt]=1024);return{floatView:tt,uint32View:rt,baseTable:st,shiftTable:at,mantissaTable:lt,exponentTable:dt,offsetTable:yt}}function toHalfFloat(nt){Math.abs(nt)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),nt=clamp(nt,-65504,65504),_tables.floatView[0]=nt;const tt=_tables.uint32View[0],rt=tt>>23&511;return _tables.baseTable[rt]+((tt&8388607)>>_tables.shiftTable[rt])}function fromHalfFloat(nt){const tt=nt>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[tt]+(nt&1023)]+_tables.exponentTable[tt],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat},_vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(tt,rt,st=!1){if(Array.isArray(tt))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=tt,this.itemSize=rt,this.count=tt!==void 0?tt.length/rt:0,this.normalized=st,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(tt){tt===!0&&this.version++}setUsage(tt){return this.usage=tt,this}addUpdateRange(tt,rt){this.updateRanges.push({start:tt,count:rt})}clearUpdateRanges(){this.updateRanges.length=0}copy(tt){return this.name=tt.name,this.array=new tt.array.constructor(tt.array),this.itemSize=tt.itemSize,this.count=tt.count,this.normalized=tt.normalized,this.usage=tt.usage,this.gpuType=tt.gpuType,this}copyAt(tt,rt,st){tt*=this.itemSize,st*=rt.itemSize;for(let at=0,lt=this.itemSize;at<lt;at++)this.array[tt+at]=rt.array[st+at];return this}copyArray(tt){return this.array.set(tt),this}applyMatrix3(tt){if(this.itemSize===2)for(let rt=0,st=this.count;rt<st;rt++)_vector2$1.fromBufferAttribute(this,rt),_vector2$1.applyMatrix3(tt),this.setXY(rt,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let rt=0,st=this.count;rt<st;rt++)_vector$9.fromBufferAttribute(this,rt),_vector$9.applyMatrix3(tt),this.setXYZ(rt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(tt){for(let rt=0,st=this.count;rt<st;rt++)_vector$9.fromBufferAttribute(this,rt),_vector$9.applyMatrix4(tt),this.setXYZ(rt,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(tt){for(let rt=0,st=this.count;rt<st;rt++)_vector$9.fromBufferAttribute(this,rt),_vector$9.applyNormalMatrix(tt),this.setXYZ(rt,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(tt){for(let rt=0,st=this.count;rt<st;rt++)_vector$9.fromBufferAttribute(this,rt),_vector$9.transformDirection(tt),this.setXYZ(rt,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(tt,rt=0){return this.array.set(tt,rt),this}getComponent(tt,rt){let st=this.array[tt*this.itemSize+rt];return this.normalized&&(st=denormalize(st,this.array)),st}setComponent(tt,rt,st){return this.normalized&&(st=normalize$1(st,this.array)),this.array[tt*this.itemSize+rt]=st,this}getX(tt){let rt=this.array[tt*this.itemSize];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setX(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.array[tt*this.itemSize]=rt,this}getY(tt){let rt=this.array[tt*this.itemSize+1];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setY(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.array[tt*this.itemSize+1]=rt,this}getZ(tt){let rt=this.array[tt*this.itemSize+2];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setZ(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.array[tt*this.itemSize+2]=rt,this}getW(tt){let rt=this.array[tt*this.itemSize+3];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setW(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.array[tt*this.itemSize+3]=rt,this}setXY(tt,rt,st){return tt*=this.itemSize,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array)),this.array[tt+0]=rt,this.array[tt+1]=st,this}setXYZ(tt,rt,st,at){return tt*=this.itemSize,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array),at=normalize$1(at,this.array)),this.array[tt+0]=rt,this.array[tt+1]=st,this.array[tt+2]=at,this}setXYZW(tt,rt,st,at,lt){return tt*=this.itemSize,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array),at=normalize$1(at,this.array),lt=normalize$1(lt,this.array)),this.array[tt+0]=rt,this.array[tt+1]=st,this.array[tt+2]=at,this.array[tt+3]=lt,this}onUpload(tt){return this.onUploadCallback=tt,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const tt={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(tt.name=this.name),this.usage!==StaticDrawUsage&&(tt.usage=this.usage),tt}}class Int8BufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Int8Array(tt),rt,st)}}class Uint8BufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Uint8Array(tt),rt,st)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Uint8ClampedArray(tt),rt,st)}}class Int16BufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Int16Array(tt),rt,st)}}class Uint16BufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Uint16Array(tt),rt,st)}}class Int32BufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Int32Array(tt),rt,st)}}class Uint32BufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Uint32Array(tt),rt,st)}}class Float16BufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Uint16Array(tt),rt,st),this.isFloat16BufferAttribute=!0}getX(tt){let rt=fromHalfFloat(this.array[tt*this.itemSize]);return this.normalized&&(rt=denormalize(rt,this.array)),rt}setX(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.array[tt*this.itemSize]=toHalfFloat(rt),this}getY(tt){let rt=fromHalfFloat(this.array[tt*this.itemSize+1]);return this.normalized&&(rt=denormalize(rt,this.array)),rt}setY(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.array[tt*this.itemSize+1]=toHalfFloat(rt),this}getZ(tt){let rt=fromHalfFloat(this.array[tt*this.itemSize+2]);return this.normalized&&(rt=denormalize(rt,this.array)),rt}setZ(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.array[tt*this.itemSize+2]=toHalfFloat(rt),this}getW(tt){let rt=fromHalfFloat(this.array[tt*this.itemSize+3]);return this.normalized&&(rt=denormalize(rt,this.array)),rt}setW(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.array[tt*this.itemSize+3]=toHalfFloat(rt),this}setXY(tt,rt,st){return tt*=this.itemSize,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array)),this.array[tt+0]=toHalfFloat(rt),this.array[tt+1]=toHalfFloat(st),this}setXYZ(tt,rt,st,at){return tt*=this.itemSize,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array),at=normalize$1(at,this.array)),this.array[tt+0]=toHalfFloat(rt),this.array[tt+1]=toHalfFloat(st),this.array[tt+2]=toHalfFloat(at),this}setXYZW(tt,rt,st,at,lt){return tt*=this.itemSize,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array),at=normalize$1(at,this.array),lt=normalize$1(lt,this.array)),this.array[tt+0]=toHalfFloat(rt),this.array[tt+1]=toHalfFloat(st),this.array[tt+2]=toHalfFloat(at),this.array[tt+3]=toHalfFloat(lt),this}}class Float32BufferAttribute extends BufferAttribute{constructor(tt,rt,st){super(new Float32Array(tt),rt,st)}}let _id$2=0;const _m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(tt){return Array.isArray(tt)?this.index=new(arrayNeedsUint32(tt)?Uint32BufferAttribute:Uint16BufferAttribute)(tt,1):this.index=tt,this}getAttribute(tt){return this.attributes[tt]}setAttribute(tt,rt){return this.attributes[tt]=rt,this}deleteAttribute(tt){return delete this.attributes[tt],this}hasAttribute(tt){return this.attributes[tt]!==void 0}addGroup(tt,rt,st=0){this.groups.push({start:tt,count:rt,materialIndex:st})}clearGroups(){this.groups=[]}setDrawRange(tt,rt){this.drawRange.start=tt,this.drawRange.count=rt}applyMatrix4(tt){const rt=this.attributes.position;rt!==void 0&&(rt.applyMatrix4(tt),rt.needsUpdate=!0);const st=this.attributes.normal;if(st!==void 0){const lt=new Matrix3().getNormalMatrix(tt);st.applyNormalMatrix(lt),st.needsUpdate=!0}const at=this.attributes.tangent;return at!==void 0&&(at.transformDirection(tt),at.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(tt){return _m1$2.makeRotationFromQuaternion(tt),this.applyMatrix4(_m1$2),this}rotateX(tt){return _m1$2.makeRotationX(tt),this.applyMatrix4(_m1$2),this}rotateY(tt){return _m1$2.makeRotationY(tt),this.applyMatrix4(_m1$2),this}rotateZ(tt){return _m1$2.makeRotationZ(tt),this.applyMatrix4(_m1$2),this}translate(tt,rt,st){return _m1$2.makeTranslation(tt,rt,st),this.applyMatrix4(_m1$2),this}scale(tt,rt,st){return _m1$2.makeScale(tt,rt,st),this.applyMatrix4(_m1$2),this}lookAt(tt){return _obj.lookAt(tt),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(tt){const rt=[];for(let st=0,at=tt.length;st<at;st++){const lt=tt[st];rt.push(lt.x,lt.y,lt.z||0)}return this.setAttribute("position",new Float32BufferAttribute(rt,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const tt=this.attributes.position,rt=this.morphAttributes.position;if(tt&&tt.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(tt!==void 0){if(this.boundingBox.setFromBufferAttribute(tt),rt)for(let st=0,at=rt.length;st<at;st++){const lt=rt[st];_box$2.setFromBufferAttribute(lt),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const tt=this.attributes.position,rt=this.morphAttributes.position;if(tt&&tt.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(tt){const st=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(tt),rt)for(let lt=0,dt=rt.length;lt<dt;lt++){const yt=rt[lt];_boxMorphTargets.setFromBufferAttribute(yt),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(st);let at=0;for(let lt=0,dt=tt.count;lt<dt;lt++)_vector$8.fromBufferAttribute(tt,lt),at=Math.max(at,st.distanceToSquared(_vector$8));if(rt)for(let lt=0,dt=rt.length;lt<dt;lt++){const yt=rt[lt],vt=this.morphTargetsRelative;for(let _t=0,bt=yt.count;_t<bt;_t++)_vector$8.fromBufferAttribute(yt,_t),vt&&(_offset.fromBufferAttribute(tt,_t),_vector$8.add(_offset)),at=Math.max(at,st.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(at),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const tt=this.index,rt=this.attributes;if(tt===null||rt.position===void 0||rt.normal===void 0||rt.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const st=rt.position,at=rt.normal,lt=rt.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*st.count),4));const dt=this.getAttribute("tangent"),yt=[],vt=[];for(let Zt=0;Zt<st.count;Zt++)yt[Zt]=new Vector3,vt[Zt]=new Vector3;const _t=new Vector3,bt=new Vector3,Mt=new Vector3,Ct=new Vector2,Tt=new Vector2,$t=new Vector2,Rt=new Vector3,Et=new Vector3;function wt(Zt,rn,Gt){_t.fromBufferAttribute(st,Zt),bt.fromBufferAttribute(st,rn),Mt.fromBufferAttribute(st,Gt),Ct.fromBufferAttribute(lt,Zt),Tt.fromBufferAttribute(lt,rn),$t.fromBufferAttribute(lt,Gt),bt.sub(_t),Mt.sub(_t),Tt.sub(Ct),$t.sub(Ct);const nn=1/(Tt.x*$t.y-$t.x*Tt.y);isFinite(nn)&&(Rt.copy(bt).multiplyScalar($t.y).addScaledVector(Mt,-Tt.y).multiplyScalar(nn),Et.copy(Mt).multiplyScalar(Tt.x).addScaledVector(bt,-$t.x).multiplyScalar(nn),yt[Zt].add(Rt),yt[rn].add(Rt),yt[Gt].add(Rt),vt[Zt].add(Et),vt[rn].add(Et),vt[Gt].add(Et))}let Pt=this.groups;Pt.length===0&&(Pt=[{start:0,count:tt.count}]);for(let Zt=0,rn=Pt.length;Zt<rn;++Zt){const Gt=Pt[Zt],nn=Gt.start,cn=Gt.count;for(let an=nn,mn=nn+cn;an<mn;an+=3)wt(tt.getX(an+0),tt.getX(an+1),tt.getX(an+2))}const Ft=new Vector3,Nt=new Vector3,Ot=new Vector3,Bt=new Vector3;function Xt(Zt){Ot.fromBufferAttribute(at,Zt),Bt.copy(Ot);const rn=yt[Zt];Ft.copy(rn),Ft.sub(Ot.multiplyScalar(Ot.dot(rn))).normalize(),Nt.crossVectors(Bt,rn);const nn=Nt.dot(vt[Zt])<0?-1:1;dt.setXYZW(Zt,Ft.x,Ft.y,Ft.z,nn)}for(let Zt=0,rn=Pt.length;Zt<rn;++Zt){const Gt=Pt[Zt],nn=Gt.start,cn=Gt.count;for(let an=nn,mn=nn+cn;an<mn;an+=3)Xt(tt.getX(an+0)),Xt(tt.getX(an+1)),Xt(tt.getX(an+2))}}computeVertexNormals(){const tt=this.index,rt=this.getAttribute("position");if(rt!==void 0){let st=this.getAttribute("normal");if(st===void 0)st=new BufferAttribute(new Float32Array(rt.count*3),3),this.setAttribute("normal",st);else for(let Ct=0,Tt=st.count;Ct<Tt;Ct++)st.setXYZ(Ct,0,0,0);const at=new Vector3,lt=new Vector3,dt=new Vector3,yt=new Vector3,vt=new Vector3,_t=new Vector3,bt=new Vector3,Mt=new Vector3;if(tt)for(let Ct=0,Tt=tt.count;Ct<Tt;Ct+=3){const $t=tt.getX(Ct+0),Rt=tt.getX(Ct+1),Et=tt.getX(Ct+2);at.fromBufferAttribute(rt,$t),lt.fromBufferAttribute(rt,Rt),dt.fromBufferAttribute(rt,Et),bt.subVectors(dt,lt),Mt.subVectors(at,lt),bt.cross(Mt),yt.fromBufferAttribute(st,$t),vt.fromBufferAttribute(st,Rt),_t.fromBufferAttribute(st,Et),yt.add(bt),vt.add(bt),_t.add(bt),st.setXYZ($t,yt.x,yt.y,yt.z),st.setXYZ(Rt,vt.x,vt.y,vt.z),st.setXYZ(Et,_t.x,_t.y,_t.z)}else for(let Ct=0,Tt=rt.count;Ct<Tt;Ct+=3)at.fromBufferAttribute(rt,Ct+0),lt.fromBufferAttribute(rt,Ct+1),dt.fromBufferAttribute(rt,Ct+2),bt.subVectors(dt,lt),Mt.subVectors(at,lt),bt.cross(Mt),st.setXYZ(Ct+0,bt.x,bt.y,bt.z),st.setXYZ(Ct+1,bt.x,bt.y,bt.z),st.setXYZ(Ct+2,bt.x,bt.y,bt.z);this.normalizeNormals(),st.needsUpdate=!0}}normalizeNormals(){const tt=this.attributes.normal;for(let rt=0,st=tt.count;rt<st;rt++)_vector$8.fromBufferAttribute(tt,rt),_vector$8.normalize(),tt.setXYZ(rt,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function tt(yt,vt){const _t=yt.array,bt=yt.itemSize,Mt=yt.normalized,Ct=new _t.constructor(vt.length*bt);let Tt=0,$t=0;for(let Rt=0,Et=vt.length;Rt<Et;Rt++){yt.isInterleavedBufferAttribute?Tt=vt[Rt]*yt.data.stride+yt.offset:Tt=vt[Rt]*bt;for(let wt=0;wt<bt;wt++)Ct[$t++]=_t[Tt++]}return new BufferAttribute(Ct,bt,Mt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const rt=new BufferGeometry,st=this.index.array,at=this.attributes;for(const yt in at){const vt=at[yt],_t=tt(vt,st);rt.setAttribute(yt,_t)}const lt=this.morphAttributes;for(const yt in lt){const vt=[],_t=lt[yt];for(let bt=0,Mt=_t.length;bt<Mt;bt++){const Ct=_t[bt],Tt=tt(Ct,st);vt.push(Tt)}rt.morphAttributes[yt]=vt}rt.morphTargetsRelative=this.morphTargetsRelative;const dt=this.groups;for(let yt=0,vt=dt.length;yt<vt;yt++){const _t=dt[yt];rt.addGroup(_t.start,_t.count,_t.materialIndex)}return rt}toJSON(){const tt={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(tt.uuid=this.uuid,tt.type=this.type,this.name!==""&&(tt.name=this.name),Object.keys(this.userData).length>0&&(tt.userData=this.userData),this.parameters!==void 0){const vt=this.parameters;for(const _t in vt)vt[_t]!==void 0&&(tt[_t]=vt[_t]);return tt}tt.data={attributes:{}};const rt=this.index;rt!==null&&(tt.data.index={type:rt.array.constructor.name,array:Array.prototype.slice.call(rt.array)});const st=this.attributes;for(const vt in st){const _t=st[vt];tt.data.attributes[vt]=_t.toJSON(tt.data)}const at={};let lt=!1;for(const vt in this.morphAttributes){const _t=this.morphAttributes[vt],bt=[];for(let Mt=0,Ct=_t.length;Mt<Ct;Mt++){const Tt=_t[Mt];bt.push(Tt.toJSON(tt.data))}bt.length>0&&(at[vt]=bt,lt=!0)}lt&&(tt.data.morphAttributes=at,tt.data.morphTargetsRelative=this.morphTargetsRelative);const dt=this.groups;dt.length>0&&(tt.data.groups=JSON.parse(JSON.stringify(dt)));const yt=this.boundingSphere;return yt!==null&&(tt.data.boundingSphere={center:yt.center.toArray(),radius:yt.radius}),tt}clone(){return new this.constructor().copy(this)}copy(tt){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const rt={};this.name=tt.name;const st=tt.index;st!==null&&this.setIndex(st.clone(rt));const at=tt.attributes;for(const _t in at){const bt=at[_t];this.setAttribute(_t,bt.clone(rt))}const lt=tt.morphAttributes;for(const _t in lt){const bt=[],Mt=lt[_t];for(let Ct=0,Tt=Mt.length;Ct<Tt;Ct++)bt.push(Mt[Ct].clone(rt));this.morphAttributes[_t]=bt}this.morphTargetsRelative=tt.morphTargetsRelative;const dt=tt.groups;for(let _t=0,bt=dt.length;_t<bt;_t++){const Mt=dt[_t];this.addGroup(Mt.start,Mt.count,Mt.materialIndex)}const yt=tt.boundingBox;yt!==null&&(this.boundingBox=yt.clone());const vt=tt.boundingSphere;return vt!==null&&(this.boundingSphere=vt.clone()),this.drawRange.start=tt.drawRange.start,this.drawRange.count=tt.drawRange.count,this.userData=tt.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(tt=new BufferGeometry,rt=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=tt,this.material=rt,this.updateMorphTargets()}copy(tt,rt){return super.copy(tt,rt),tt.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=tt.morphTargetInfluences.slice()),tt.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},tt.morphTargetDictionary)),this.material=Array.isArray(tt.material)?tt.material.slice():tt.material,this.geometry=tt.geometry,this}updateMorphTargets(){const rt=this.geometry.morphAttributes,st=Object.keys(rt);if(st.length>0){const at=rt[st[0]];if(at!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let lt=0,dt=at.length;lt<dt;lt++){const yt=at[lt].name||String(lt);this.morphTargetInfluences.push(0),this.morphTargetDictionary[yt]=lt}}}}getVertexPosition(tt,rt){const st=this.geometry,at=st.attributes.position,lt=st.morphAttributes.position,dt=st.morphTargetsRelative;rt.fromBufferAttribute(at,tt);const yt=this.morphTargetInfluences;if(lt&&yt){_morphA.set(0,0,0);for(let vt=0,_t=lt.length;vt<_t;vt++){const bt=yt[vt],Mt=lt[vt];bt!==0&&(_tempA.fromBufferAttribute(Mt,tt),dt?_morphA.addScaledVector(_tempA,bt):_morphA.addScaledVector(_tempA.sub(rt),bt))}rt.add(_morphA)}return rt}raycast(tt,rt){const st=this.geometry,at=this.material,lt=this.matrixWorld;at!==void 0&&(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere$6.copy(st.boundingSphere),_sphere$6.applyMatrix4(lt),_ray$3.copy(tt.ray).recast(tt.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(tt.far-tt.near)**2))&&(_inverseMatrix$3.copy(lt).invert(),_ray$3.copy(tt.ray).applyMatrix4(_inverseMatrix$3),!(st.boundingBox!==null&&_ray$3.intersectsBox(st.boundingBox)===!1)&&this._computeIntersections(tt,rt,_ray$3)))}_computeIntersections(tt,rt,st){let at;const lt=this.geometry,dt=this.material,yt=lt.index,vt=lt.attributes.position,_t=lt.attributes.uv,bt=lt.attributes.uv1,Mt=lt.attributes.normal,Ct=lt.groups,Tt=lt.drawRange;if(yt!==null)if(Array.isArray(dt))for(let $t=0,Rt=Ct.length;$t<Rt;$t++){const Et=Ct[$t],wt=dt[Et.materialIndex],Pt=Math.max(Et.start,Tt.start),Ft=Math.min(yt.count,Math.min(Et.start+Et.count,Tt.start+Tt.count));for(let Nt=Pt,Ot=Ft;Nt<Ot;Nt+=3){const Bt=yt.getX(Nt),Xt=yt.getX(Nt+1),Zt=yt.getX(Nt+2);at=checkGeometryIntersection(this,wt,tt,st,_t,bt,Mt,Bt,Xt,Zt),at&&(at.faceIndex=Math.floor(Nt/3),at.face.materialIndex=Et.materialIndex,rt.push(at))}}else{const $t=Math.max(0,Tt.start),Rt=Math.min(yt.count,Tt.start+Tt.count);for(let Et=$t,wt=Rt;Et<wt;Et+=3){const Pt=yt.getX(Et),Ft=yt.getX(Et+1),Nt=yt.getX(Et+2);at=checkGeometryIntersection(this,dt,tt,st,_t,bt,Mt,Pt,Ft,Nt),at&&(at.faceIndex=Math.floor(Et/3),rt.push(at))}}else if(vt!==void 0)if(Array.isArray(dt))for(let $t=0,Rt=Ct.length;$t<Rt;$t++){const Et=Ct[$t],wt=dt[Et.materialIndex],Pt=Math.max(Et.start,Tt.start),Ft=Math.min(vt.count,Math.min(Et.start+Et.count,Tt.start+Tt.count));for(let Nt=Pt,Ot=Ft;Nt<Ot;Nt+=3){const Bt=Nt,Xt=Nt+1,Zt=Nt+2;at=checkGeometryIntersection(this,wt,tt,st,_t,bt,Mt,Bt,Xt,Zt),at&&(at.faceIndex=Math.floor(Nt/3),at.face.materialIndex=Et.materialIndex,rt.push(at))}}else{const $t=Math.max(0,Tt.start),Rt=Math.min(vt.count,Tt.start+Tt.count);for(let Et=$t,wt=Rt;Et<wt;Et+=3){const Pt=Et,Ft=Et+1,Nt=Et+2;at=checkGeometryIntersection(this,dt,tt,st,_t,bt,Mt,Pt,Ft,Nt),at&&(at.faceIndex=Math.floor(Et/3),rt.push(at))}}}}function checkIntersection$1(nt,tt,rt,st,at,lt,dt,yt){let vt;if(tt.side===BackSide?vt=st.intersectTriangle(dt,lt,at,!0,yt):vt=st.intersectTriangle(at,lt,dt,tt.side===FrontSide,yt),vt===null)return null;_intersectionPointWorld.copy(yt),_intersectionPointWorld.applyMatrix4(nt.matrixWorld);const _t=rt.ray.origin.distanceTo(_intersectionPointWorld);return _t<rt.near||_t>rt.far?null:{distance:_t,point:_intersectionPointWorld.clone(),object:nt}}function checkGeometryIntersection(nt,tt,rt,st,at,lt,dt,yt,vt,_t){nt.getVertexPosition(yt,_vA$1),nt.getVertexPosition(vt,_vB$1),nt.getVertexPosition(_t,_vC$1);const bt=checkIntersection$1(nt,tt,rt,st,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(bt){const Mt=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,Mt),at&&(bt.uv=Triangle.getInterpolatedAttribute(at,yt,vt,_t,Mt,new Vector2)),lt&&(bt.uv1=Triangle.getInterpolatedAttribute(lt,yt,vt,_t,Mt,new Vector2)),dt&&(bt.normal=Triangle.getInterpolatedAttribute(dt,yt,vt,_t,Mt,new Vector3),bt.normal.dot(st.direction)>0&&bt.normal.multiplyScalar(-1));const Ct={a:yt,b:vt,c:_t,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,Ct.normal),bt.face=Ct,bt.barycoord=Mt}return bt}class BoxGeometry extends BufferGeometry{constructor(tt=1,rt=1,st=1,at=1,lt=1,dt=1){super(),this.type="BoxGeometry",this.parameters={width:tt,height:rt,depth:st,widthSegments:at,heightSegments:lt,depthSegments:dt};const yt=this;at=Math.floor(at),lt=Math.floor(lt),dt=Math.floor(dt);const vt=[],_t=[],bt=[],Mt=[];let Ct=0,Tt=0;$t("z","y","x",-1,-1,st,rt,tt,dt,lt,0),$t("z","y","x",1,-1,st,rt,-tt,dt,lt,1),$t("x","z","y",1,1,tt,st,rt,at,dt,2),$t("x","z","y",1,-1,tt,st,-rt,at,dt,3),$t("x","y","z",1,-1,tt,rt,st,at,lt,4),$t("x","y","z",-1,-1,tt,rt,-st,at,lt,5),this.setIndex(vt),this.setAttribute("position",new Float32BufferAttribute(_t,3)),this.setAttribute("normal",new Float32BufferAttribute(bt,3)),this.setAttribute("uv",new Float32BufferAttribute(Mt,2));function $t(Rt,Et,wt,Pt,Ft,Nt,Ot,Bt,Xt,Zt,rn){const Gt=Nt/Xt,nn=Ot/Zt,cn=Nt/2,an=Ot/2,mn=Bt/2,En=Xt+1,Cn=Zt+1;let Mn=0,un=0;const Tn=new Vector3;for(let Pn=0;Pn<Cn;Pn++){const dn=Pn*nn-an;for(let Un=0;Un<En;Un++){const qn=Un*Gt-cn;Tn[Rt]=qn*Pt,Tn[Et]=dn*Ft,Tn[wt]=mn,_t.push(Tn.x,Tn.y,Tn.z),Tn[Rt]=0,Tn[Et]=0,Tn[wt]=Bt>0?1:-1,bt.push(Tn.x,Tn.y,Tn.z),Mt.push(Un/Xt),Mt.push(1-Pn/Zt),Mn+=1}}for(let Pn=0;Pn<Zt;Pn++)for(let dn=0;dn<Xt;dn++){const Un=Ct+dn+En*Pn,qn=Ct+dn+En*(Pn+1),In=Ct+(dn+1)+En*(Pn+1),Wn=Ct+(dn+1)+En*Pn;vt.push(Un,qn,Wn),vt.push(qn,In,Wn),un+=6}yt.addGroup(Tt,un,rn),Tt+=un,Ct+=Mn}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new BoxGeometry(tt.width,tt.height,tt.depth,tt.widthSegments,tt.heightSegments,tt.depthSegments)}}function cloneUniforms(nt){const tt={};for(const rt in nt){tt[rt]={};for(const st in nt[rt]){const at=nt[rt][st];at&&(at.isColor||at.isMatrix3||at.isMatrix4||at.isVector2||at.isVector3||at.isVector4||at.isTexture||at.isQuaternion)?at.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),tt[rt][st]=null):tt[rt][st]=at.clone():Array.isArray(at)?tt[rt][st]=at.slice():tt[rt][st]=at}}return tt}function mergeUniforms(nt){const tt={};for(let rt=0;rt<nt.length;rt++){const st=cloneUniforms(nt[rt]);for(const at in st)tt[at]=st[at]}return tt}function cloneUniformsGroups(nt){const tt=[];for(let rt=0;rt<nt.length;rt++)tt.push(nt[rt].clone());return tt}function getUnlitUniformColorSpace(nt){const tt=nt.getRenderTarget();return tt===null?nt.outputColorSpace:tt.isXRRenderTarget===!0?tt.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(tt){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,tt!==void 0&&this.setValues(tt)}copy(tt){return super.copy(tt),this.fragmentShader=tt.fragmentShader,this.vertexShader=tt.vertexShader,this.uniforms=cloneUniforms(tt.uniforms),this.uniformsGroups=cloneUniformsGroups(tt.uniformsGroups),this.defines=Object.assign({},tt.defines),this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.fog=tt.fog,this.lights=tt.lights,this.clipping=tt.clipping,this.extensions=Object.assign({},tt.extensions),this.glslVersion=tt.glslVersion,this}toJSON(tt){const rt=super.toJSON(tt);rt.glslVersion=this.glslVersion,rt.uniforms={};for(const at in this.uniforms){const dt=this.uniforms[at].value;dt&&dt.isTexture?rt.uniforms[at]={type:"t",value:dt.toJSON(tt).uuid}:dt&&dt.isColor?rt.uniforms[at]={type:"c",value:dt.getHex()}:dt&&dt.isVector2?rt.uniforms[at]={type:"v2",value:dt.toArray()}:dt&&dt.isVector3?rt.uniforms[at]={type:"v3",value:dt.toArray()}:dt&&dt.isVector4?rt.uniforms[at]={type:"v4",value:dt.toArray()}:dt&&dt.isMatrix3?rt.uniforms[at]={type:"m3",value:dt.toArray()}:dt&&dt.isMatrix4?rt.uniforms[at]={type:"m4",value:dt.toArray()}:rt.uniforms[at]={value:dt}}Object.keys(this.defines).length>0&&(rt.defines=this.defines),rt.vertexShader=this.vertexShader,rt.fragmentShader=this.fragmentShader,rt.lights=this.lights,rt.clipping=this.clipping;const st={};for(const at in this.extensions)this.extensions[at]===!0&&(st[at]=!0);return Object.keys(st).length>0&&(rt.extensions=st),rt}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(tt,rt){return super.copy(tt,rt),this.matrixWorldInverse.copy(tt.matrixWorldInverse),this.projectionMatrix.copy(tt.projectionMatrix),this.projectionMatrixInverse.copy(tt.projectionMatrixInverse),this.coordinateSystem=tt.coordinateSystem,this}getWorldDirection(tt){return super.getWorldDirection(tt).negate()}updateMatrixWorld(tt){super.updateMatrixWorld(tt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(tt,rt){super.updateWorldMatrix(tt,rt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(tt=50,rt=1,st=.1,at=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=tt,this.zoom=1,this.near=st,this.far=at,this.focus=10,this.aspect=rt,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(tt,rt){return super.copy(tt,rt),this.fov=tt.fov,this.zoom=tt.zoom,this.near=tt.near,this.far=tt.far,this.focus=tt.focus,this.aspect=tt.aspect,this.view=tt.view===null?null:Object.assign({},tt.view),this.filmGauge=tt.filmGauge,this.filmOffset=tt.filmOffset,this}setFocalLength(tt){const rt=.5*this.getFilmHeight()/tt;this.fov=RAD2DEG*2*Math.atan(rt),this.updateProjectionMatrix()}getFocalLength(){const tt=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/tt}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(tt,rt,st){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),rt.set(_v3$1.x,_v3$1.y).multiplyScalar(-tt/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),st.set(_v3$1.x,_v3$1.y).multiplyScalar(-tt/_v3$1.z)}getViewSize(tt,rt){return this.getViewBounds(tt,_minTarget,_maxTarget),rt.subVectors(_maxTarget,_minTarget)}setViewOffset(tt,rt,st,at,lt,dt){this.aspect=tt/rt,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=tt,this.view.fullHeight=rt,this.view.offsetX=st,this.view.offsetY=at,this.view.width=lt,this.view.height=dt,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const tt=this.near;let rt=tt*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,st=2*rt,at=this.aspect*st,lt=-.5*at;const dt=this.view;if(this.view!==null&&this.view.enabled){const vt=dt.fullWidth,_t=dt.fullHeight;lt+=dt.offsetX*at/vt,rt-=dt.offsetY*st/_t,at*=dt.width/vt,st*=dt.height/_t}const yt=this.filmOffset;yt!==0&&(lt+=tt*yt/this.getFilmWidth()),this.projectionMatrix.makePerspective(lt,lt+at,rt,rt-st,tt,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(tt){const rt=super.toJSON(tt);return rt.object.fov=this.fov,rt.object.zoom=this.zoom,rt.object.near=this.near,rt.object.far=this.far,rt.object.focus=this.focus,rt.object.aspect=this.aspect,this.view!==null&&(rt.object.view=Object.assign({},this.view)),rt.object.filmGauge=this.filmGauge,rt.object.filmOffset=this.filmOffset,rt}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(tt,rt,st){super(),this.type="CubeCamera",this.renderTarget=st,this.coordinateSystem=null,this.activeMipmapLevel=0;const at=new PerspectiveCamera(fov,aspect,tt,rt);at.layers=this.layers,this.add(at);const lt=new PerspectiveCamera(fov,aspect,tt,rt);lt.layers=this.layers,this.add(lt);const dt=new PerspectiveCamera(fov,aspect,tt,rt);dt.layers=this.layers,this.add(dt);const yt=new PerspectiveCamera(fov,aspect,tt,rt);yt.layers=this.layers,this.add(yt);const vt=new PerspectiveCamera(fov,aspect,tt,rt);vt.layers=this.layers,this.add(vt);const _t=new PerspectiveCamera(fov,aspect,tt,rt);_t.layers=this.layers,this.add(_t)}updateCoordinateSystem(){const tt=this.coordinateSystem,rt=this.children.concat(),[st,at,lt,dt,yt,vt]=rt;for(const _t of rt)this.remove(_t);if(tt===WebGLCoordinateSystem)st.up.set(0,1,0),st.lookAt(1,0,0),at.up.set(0,1,0),at.lookAt(-1,0,0),lt.up.set(0,0,-1),lt.lookAt(0,1,0),dt.up.set(0,0,1),dt.lookAt(0,-1,0),yt.up.set(0,1,0),yt.lookAt(0,0,1),vt.up.set(0,1,0),vt.lookAt(0,0,-1);else if(tt===WebGPUCoordinateSystem)st.up.set(0,-1,0),st.lookAt(-1,0,0),at.up.set(0,-1,0),at.lookAt(1,0,0),lt.up.set(0,0,1),lt.lookAt(0,1,0),dt.up.set(0,0,-1),dt.lookAt(0,-1,0),yt.up.set(0,-1,0),yt.lookAt(0,0,1),vt.up.set(0,-1,0),vt.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+tt);for(const _t of rt)this.add(_t),_t.updateMatrixWorld()}update(tt,rt){this.parent===null&&this.updateMatrixWorld();const{renderTarget:st,activeMipmapLevel:at}=this;this.coordinateSystem!==tt.coordinateSystem&&(this.coordinateSystem=tt.coordinateSystem,this.updateCoordinateSystem());const[lt,dt,yt,vt,_t,bt]=this.children,Mt=tt.getRenderTarget(),Ct=tt.getActiveCubeFace(),Tt=tt.getActiveMipmapLevel(),$t=tt.xr.enabled;tt.xr.enabled=!1;const Rt=st.texture.generateMipmaps;st.texture.generateMipmaps=!1,tt.setRenderTarget(st,0,at),tt.render(rt,lt),tt.setRenderTarget(st,1,at),tt.render(rt,dt),tt.setRenderTarget(st,2,at),tt.render(rt,yt),tt.setRenderTarget(st,3,at),tt.render(rt,vt),tt.setRenderTarget(st,4,at),tt.render(rt,_t),st.texture.generateMipmaps=Rt,tt.setRenderTarget(st,5,at),tt.render(rt,bt),tt.setRenderTarget(Mt,Ct,Tt),tt.xr.enabled=$t,st.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(tt,rt,st,at,lt,dt,yt,vt,_t,bt){tt=tt!==void 0?tt:[],rt=rt!==void 0?rt:CubeReflectionMapping,super(tt,rt,st,at,lt,dt,yt,vt,_t,bt),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(tt){this.image=tt}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(tt=1,rt={}){super(tt,tt,rt),this.isWebGLCubeRenderTarget=!0;const st={width:tt,height:tt,depth:1},at=[st,st,st,st,st,st];this.texture=new CubeTexture(at,rt.mapping,rt.wrapS,rt.wrapT,rt.magFilter,rt.minFilter,rt.format,rt.type,rt.anisotropy,rt.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=rt.generateMipmaps!==void 0?rt.generateMipmaps:!1,this.texture.minFilter=rt.minFilter!==void 0?rt.minFilter:LinearFilter}fromEquirectangularTexture(tt,rt){this.texture.type=rt.type,this.texture.colorSpace=rt.colorSpace,this.texture.generateMipmaps=rt.generateMipmaps,this.texture.minFilter=rt.minFilter,this.texture.magFilter=rt.magFilter;const st={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},at=new BoxGeometry(5,5,5),lt=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(st.uniforms),vertexShader:st.vertexShader,fragmentShader:st.fragmentShader,side:BackSide,blending:NoBlending});lt.uniforms.tEquirect.value=rt;const dt=new Mesh(at,lt),yt=rt.minFilter;return rt.minFilter===LinearMipmapLinearFilter&&(rt.minFilter=LinearFilter),new CubeCamera(1,10,this).update(tt,dt),rt.minFilter=yt,dt.geometry.dispose(),dt.material.dispose(),this}clear(tt,rt,st,at){const lt=tt.getRenderTarget();for(let dt=0;dt<6;dt++)tt.setRenderTarget(this,dt),tt.clear(rt,st,at);tt.setRenderTarget(lt)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(tt=new Vector3(1,0,0),rt=0){this.isPlane=!0,this.normal=tt,this.constant=rt}set(tt,rt){return this.normal.copy(tt),this.constant=rt,this}setComponents(tt,rt,st,at){return this.normal.set(tt,rt,st),this.constant=at,this}setFromNormalAndCoplanarPoint(tt,rt){return this.normal.copy(tt),this.constant=-rt.dot(this.normal),this}setFromCoplanarPoints(tt,rt,st){const at=_vector1.subVectors(st,rt).cross(_vector2.subVectors(tt,rt)).normalize();return this.setFromNormalAndCoplanarPoint(at,tt),this}copy(tt){return this.normal.copy(tt.normal),this.constant=tt.constant,this}normalize(){const tt=1/this.normal.length();return this.normal.multiplyScalar(tt),this.constant*=tt,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(tt){return this.normal.dot(tt)+this.constant}distanceToSphere(tt){return this.distanceToPoint(tt.center)-tt.radius}projectPoint(tt,rt){return rt.copy(tt).addScaledVector(this.normal,-this.distanceToPoint(tt))}intersectLine(tt,rt){const st=tt.delta(_vector1),at=this.normal.dot(st);if(at===0)return this.distanceToPoint(tt.start)===0?rt.copy(tt.start):null;const lt=-(tt.start.dot(this.normal)+this.constant)/at;return lt<0||lt>1?null:rt.copy(tt.start).addScaledVector(st,lt)}intersectsLine(tt){const rt=this.distanceToPoint(tt.start),st=this.distanceToPoint(tt.end);return rt<0&&st>0||st<0&&rt>0}intersectsBox(tt){return tt.intersectsPlane(this)}intersectsSphere(tt){return tt.intersectsPlane(this)}coplanarPoint(tt){return tt.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(tt,rt){const st=rt||_normalMatrix.getNormalMatrix(tt),at=this.coplanarPoint(_vector1).applyMatrix4(tt),lt=this.normal.applyMatrix3(st).normalize();return this.constant=-at.dot(lt),this}translate(tt){return this.constant-=tt.dot(this.normal),this}equals(tt){return tt.normal.equals(this.normal)&&tt.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$5=new Sphere,_vector$7=new Vector3;class Frustum{constructor(tt=new Plane,rt=new Plane,st=new Plane,at=new Plane,lt=new Plane,dt=new Plane){this.planes=[tt,rt,st,at,lt,dt]}set(tt,rt,st,at,lt,dt){const yt=this.planes;return yt[0].copy(tt),yt[1].copy(rt),yt[2].copy(st),yt[3].copy(at),yt[4].copy(lt),yt[5].copy(dt),this}copy(tt){const rt=this.planes;for(let st=0;st<6;st++)rt[st].copy(tt.planes[st]);return this}setFromProjectionMatrix(tt,rt=WebGLCoordinateSystem){const st=this.planes,at=tt.elements,lt=at[0],dt=at[1],yt=at[2],vt=at[3],_t=at[4],bt=at[5],Mt=at[6],Ct=at[7],Tt=at[8],$t=at[9],Rt=at[10],Et=at[11],wt=at[12],Pt=at[13],Ft=at[14],Nt=at[15];if(st[0].setComponents(vt-lt,Ct-_t,Et-Tt,Nt-wt).normalize(),st[1].setComponents(vt+lt,Ct+_t,Et+Tt,Nt+wt).normalize(),st[2].setComponents(vt+dt,Ct+bt,Et+$t,Nt+Pt).normalize(),st[3].setComponents(vt-dt,Ct-bt,Et-$t,Nt-Pt).normalize(),st[4].setComponents(vt-yt,Ct-Mt,Et-Rt,Nt-Ft).normalize(),rt===WebGLCoordinateSystem)st[5].setComponents(vt+yt,Ct+Mt,Et+Rt,Nt+Ft).normalize();else if(rt===WebGPUCoordinateSystem)st[5].setComponents(yt,Mt,Rt,Ft).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+rt);return this}intersectsObject(tt){if(tt.boundingSphere!==void 0)tt.boundingSphere===null&&tt.computeBoundingSphere(),_sphere$5.copy(tt.boundingSphere).applyMatrix4(tt.matrixWorld);else{const rt=tt.geometry;rt.boundingSphere===null&&rt.computeBoundingSphere(),_sphere$5.copy(rt.boundingSphere).applyMatrix4(tt.matrixWorld)}return this.intersectsSphere(_sphere$5)}intersectsSprite(tt){return _sphere$5.center.set(0,0,0),_sphere$5.radius=.7071067811865476,_sphere$5.applyMatrix4(tt.matrixWorld),this.intersectsSphere(_sphere$5)}intersectsSphere(tt){const rt=this.planes,st=tt.center,at=-tt.radius;for(let lt=0;lt<6;lt++)if(rt[lt].distanceToPoint(st)<at)return!1;return!0}intersectsBox(tt){const rt=this.planes;for(let st=0;st<6;st++){const at=rt[st];if(_vector$7.x=at.normal.x>0?tt.max.x:tt.min.x,_vector$7.y=at.normal.y>0?tt.max.y:tt.min.y,_vector$7.z=at.normal.z>0?tt.max.z:tt.min.z,at.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(tt){const rt=this.planes;for(let st=0;st<6;st++)if(rt[st].distanceToPoint(tt)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let nt=null,tt=!1,rt=null,st=null;function at(lt,dt){rt(lt,dt),st=nt.requestAnimationFrame(at)}return{start:function(){tt!==!0&&rt!==null&&(st=nt.requestAnimationFrame(at),tt=!0)},stop:function(){nt.cancelAnimationFrame(st),tt=!1},setAnimationLoop:function(lt){rt=lt},setContext:function(lt){nt=lt}}}function WebGLAttributes(nt){const tt=new WeakMap;function rt(yt,vt){const _t=yt.array,bt=yt.usage,Mt=_t.byteLength,Ct=nt.createBuffer();nt.bindBuffer(vt,Ct),nt.bufferData(vt,_t,bt),yt.onUploadCallback();let Tt;if(_t instanceof Float32Array)Tt=nt.FLOAT;else if(_t instanceof Uint16Array)yt.isFloat16BufferAttribute?Tt=nt.HALF_FLOAT:Tt=nt.UNSIGNED_SHORT;else if(_t instanceof Int16Array)Tt=nt.SHORT;else if(_t instanceof Uint32Array)Tt=nt.UNSIGNED_INT;else if(_t instanceof Int32Array)Tt=nt.INT;else if(_t instanceof Int8Array)Tt=nt.BYTE;else if(_t instanceof Uint8Array)Tt=nt.UNSIGNED_BYTE;else if(_t instanceof Uint8ClampedArray)Tt=nt.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_t);return{buffer:Ct,type:Tt,bytesPerElement:_t.BYTES_PER_ELEMENT,version:yt.version,size:Mt}}function st(yt,vt,_t){const bt=vt.array,Mt=vt.updateRanges;if(nt.bindBuffer(_t,yt),Mt.length===0)nt.bufferSubData(_t,0,bt);else{Mt.sort((Tt,$t)=>Tt.start-$t.start);let Ct=0;for(let Tt=1;Tt<Mt.length;Tt++){const $t=Mt[Ct],Rt=Mt[Tt];Rt.start<=$t.start+$t.count+1?$t.count=Math.max($t.count,Rt.start+Rt.count-$t.start):(++Ct,Mt[Ct]=Rt)}Mt.length=Ct+1;for(let Tt=0,$t=Mt.length;Tt<$t;Tt++){const Rt=Mt[Tt];nt.bufferSubData(_t,Rt.start*bt.BYTES_PER_ELEMENT,bt,Rt.start,Rt.count)}vt.clearUpdateRanges()}vt.onUploadCallback()}function at(yt){return yt.isInterleavedBufferAttribute&&(yt=yt.data),tt.get(yt)}function lt(yt){yt.isInterleavedBufferAttribute&&(yt=yt.data);const vt=tt.get(yt);vt&&(nt.deleteBuffer(vt.buffer),tt.delete(yt))}function dt(yt,vt){if(yt.isInterleavedBufferAttribute&&(yt=yt.data),yt.isGLBufferAttribute){const bt=tt.get(yt);(!bt||bt.version<yt.version)&&tt.set(yt,{buffer:yt.buffer,type:yt.type,bytesPerElement:yt.elementSize,version:yt.version});return}const _t=tt.get(yt);if(_t===void 0)tt.set(yt,rt(yt,vt));else if(_t.version<yt.version){if(_t.size!==yt.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");st(_t.buffer,yt,vt),_t.version=yt.version}}return{get:at,remove:lt,update:dt}}class PlaneGeometry extends BufferGeometry{constructor(tt=1,rt=1,st=1,at=1){super(),this.type="PlaneGeometry",this.parameters={width:tt,height:rt,widthSegments:st,heightSegments:at};const lt=tt/2,dt=rt/2,yt=Math.floor(st),vt=Math.floor(at),_t=yt+1,bt=vt+1,Mt=tt/yt,Ct=rt/vt,Tt=[],$t=[],Rt=[],Et=[];for(let wt=0;wt<bt;wt++){const Pt=wt*Ct-dt;for(let Ft=0;Ft<_t;Ft++){const Nt=Ft*Mt-lt;$t.push(Nt,-Pt,0),Rt.push(0,0,1),Et.push(Ft/yt),Et.push(1-wt/vt)}}for(let wt=0;wt<vt;wt++)for(let Pt=0;Pt<yt;Pt++){const Ft=Pt+_t*wt,Nt=Pt+_t*(wt+1),Ot=Pt+1+_t*(wt+1),Bt=Pt+1+_t*wt;Tt.push(Ft,Nt,Bt),Tt.push(Nt,Ot,Bt)}this.setIndex(Tt),this.setAttribute("position",new Float32BufferAttribute($t,3)),this.setAttribute("normal",new Float32BufferAttribute(Rt,3)),this.setAttribute("uv",new Float32BufferAttribute(Et,2))}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new PlaneGeometry(tt.width,tt.height,tt.widthSegments,tt.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color$1(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},specular:{value:new Color$1(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color$1(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color$1(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color$1(0)},specularColor:{value:new Color$1(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(nt,tt,rt,st,at,lt,dt){const yt=new Color$1(0);let vt=lt===!0?0:1,_t,bt,Mt=null,Ct=0,Tt=null;function $t(Pt){let Ft=Pt.isScene===!0?Pt.background:null;return Ft&&Ft.isTexture&&(Ft=(Pt.backgroundBlurriness>0?rt:tt).get(Ft)),Ft}function Rt(Pt){let Ft=!1;const Nt=$t(Pt);Nt===null?wt(yt,vt):Nt&&Nt.isColor&&(wt(Nt,1),Ft=!0);const Ot=nt.xr.getEnvironmentBlendMode();Ot==="additive"?st.buffers.color.setClear(0,0,0,1,dt):Ot==="alpha-blend"&&st.buffers.color.setClear(0,0,0,0,dt),(nt.autoClear||Ft)&&(st.buffers.depth.setTest(!0),st.buffers.depth.setMask(!0),st.buffers.color.setMask(!0),nt.clear(nt.autoClearColor,nt.autoClearDepth,nt.autoClearStencil))}function Et(Pt,Ft){const Nt=$t(Ft);Nt&&(Nt.isCubeTexture||Nt.mapping===CubeUVReflectionMapping)?(bt===void 0&&(bt=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),bt.geometry.deleteAttribute("normal"),bt.geometry.deleteAttribute("uv"),bt.onBeforeRender=function(Ot,Bt,Xt){this.matrixWorld.copyPosition(Xt.matrixWorld)},Object.defineProperty(bt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),at.update(bt)),_e1$1.copy(Ft.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,Nt.isCubeTexture&&Nt.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),bt.material.uniforms.envMap.value=Nt,bt.material.uniforms.flipEnvMap.value=Nt.isCubeTexture&&Nt.isRenderTargetTexture===!1?-1:1,bt.material.uniforms.backgroundBlurriness.value=Ft.backgroundBlurriness,bt.material.uniforms.backgroundIntensity.value=Ft.backgroundIntensity,bt.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),bt.material.toneMapped=ColorManagement.getTransfer(Nt.colorSpace)!==SRGBTransfer,(Mt!==Nt||Ct!==Nt.version||Tt!==nt.toneMapping)&&(bt.material.needsUpdate=!0,Mt=Nt,Ct=Nt.version,Tt=nt.toneMapping),bt.layers.enableAll(),Pt.unshift(bt,bt.geometry,bt.material,0,0,null)):Nt&&Nt.isTexture&&(_t===void 0&&(_t=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),_t.geometry.deleteAttribute("normal"),Object.defineProperty(_t.material,"map",{get:function(){return this.uniforms.t2D.value}}),at.update(_t)),_t.material.uniforms.t2D.value=Nt,_t.material.uniforms.backgroundIntensity.value=Ft.backgroundIntensity,_t.material.toneMapped=ColorManagement.getTransfer(Nt.colorSpace)!==SRGBTransfer,Nt.matrixAutoUpdate===!0&&Nt.updateMatrix(),_t.material.uniforms.uvTransform.value.copy(Nt.matrix),(Mt!==Nt||Ct!==Nt.version||Tt!==nt.toneMapping)&&(_t.material.needsUpdate=!0,Mt=Nt,Ct=Nt.version,Tt=nt.toneMapping),_t.layers.enableAll(),Pt.unshift(_t,_t.geometry,_t.material,0,0,null))}function wt(Pt,Ft){Pt.getRGB(_rgb,getUnlitUniformColorSpace(nt)),st.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,Ft,dt)}return{getClearColor:function(){return yt},setClearColor:function(Pt,Ft=1){yt.set(Pt),vt=Ft,wt(yt,vt)},getClearAlpha:function(){return vt},setClearAlpha:function(Pt){vt=Pt,wt(yt,vt)},render:Rt,addToRenderList:Et}}function WebGLBindingStates(nt,tt){const rt=nt.getParameter(nt.MAX_VERTEX_ATTRIBS),st={},at=Ct(null);let lt=at,dt=!1;function yt(Gt,nn,cn,an,mn){let En=!1;const Cn=Mt(an,cn,nn);lt!==Cn&&(lt=Cn,_t(lt.object)),En=Tt(Gt,an,cn,mn),En&&$t(Gt,an,cn,mn),mn!==null&&tt.update(mn,nt.ELEMENT_ARRAY_BUFFER),(En||dt)&&(dt=!1,Nt(Gt,nn,cn,an),mn!==null&&nt.bindBuffer(nt.ELEMENT_ARRAY_BUFFER,tt.get(mn).buffer))}function vt(){return nt.createVertexArray()}function _t(Gt){return nt.bindVertexArray(Gt)}function bt(Gt){return nt.deleteVertexArray(Gt)}function Mt(Gt,nn,cn){const an=cn.wireframe===!0;let mn=st[Gt.id];mn===void 0&&(mn={},st[Gt.id]=mn);let En=mn[nn.id];En===void 0&&(En={},mn[nn.id]=En);let Cn=En[an];return Cn===void 0&&(Cn=Ct(vt()),En[an]=Cn),Cn}function Ct(Gt){const nn=[],cn=[],an=[];for(let mn=0;mn<rt;mn++)nn[mn]=0,cn[mn]=0,an[mn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:nn,enabledAttributes:cn,attributeDivisors:an,object:Gt,attributes:{},index:null}}function Tt(Gt,nn,cn,an){const mn=lt.attributes,En=nn.attributes;let Cn=0;const Mn=cn.getAttributes();for(const un in Mn)if(Mn[un].location>=0){const Pn=mn[un];let dn=En[un];if(dn===void 0&&(un==="instanceMatrix"&&Gt.instanceMatrix&&(dn=Gt.instanceMatrix),un==="instanceColor"&&Gt.instanceColor&&(dn=Gt.instanceColor)),Pn===void 0||Pn.attribute!==dn||dn&&Pn.data!==dn.data)return!0;Cn++}return lt.attributesNum!==Cn||lt.index!==an}function $t(Gt,nn,cn,an){const mn={},En=nn.attributes;let Cn=0;const Mn=cn.getAttributes();for(const un in Mn)if(Mn[un].location>=0){let Pn=En[un];Pn===void 0&&(un==="instanceMatrix"&&Gt.instanceMatrix&&(Pn=Gt.instanceMatrix),un==="instanceColor"&&Gt.instanceColor&&(Pn=Gt.instanceColor));const dn={};dn.attribute=Pn,Pn&&Pn.data&&(dn.data=Pn.data),mn[un]=dn,Cn++}lt.attributes=mn,lt.attributesNum=Cn,lt.index=an}function Rt(){const Gt=lt.newAttributes;for(let nn=0,cn=Gt.length;nn<cn;nn++)Gt[nn]=0}function Et(Gt){wt(Gt,0)}function wt(Gt,nn){const cn=lt.newAttributes,an=lt.enabledAttributes,mn=lt.attributeDivisors;cn[Gt]=1,an[Gt]===0&&(nt.enableVertexAttribArray(Gt),an[Gt]=1),mn[Gt]!==nn&&(nt.vertexAttribDivisor(Gt,nn),mn[Gt]=nn)}function Pt(){const Gt=lt.newAttributes,nn=lt.enabledAttributes;for(let cn=0,an=nn.length;cn<an;cn++)nn[cn]!==Gt[cn]&&(nt.disableVertexAttribArray(cn),nn[cn]=0)}function Ft(Gt,nn,cn,an,mn,En,Cn){Cn===!0?nt.vertexAttribIPointer(Gt,nn,cn,mn,En):nt.vertexAttribPointer(Gt,nn,cn,an,mn,En)}function Nt(Gt,nn,cn,an){Rt();const mn=an.attributes,En=cn.getAttributes(),Cn=nn.defaultAttributeValues;for(const Mn in En){const un=En[Mn];if(un.location>=0){let Tn=mn[Mn];if(Tn===void 0&&(Mn==="instanceMatrix"&&Gt.instanceMatrix&&(Tn=Gt.instanceMatrix),Mn==="instanceColor"&&Gt.instanceColor&&(Tn=Gt.instanceColor)),Tn!==void 0){const Pn=Tn.normalized,dn=Tn.itemSize,Un=tt.get(Tn);if(Un===void 0)continue;const qn=Un.buffer,In=Un.type,Wn=Un.bytesPerElement,ar=In===nt.INT||In===nt.UNSIGNED_INT||Tn.gpuType===IntType;if(Tn.isInterleavedBufferAttribute){const fr=Tn.data,mr=fr.stride,vr=Tn.offset;if(fr.isInstancedInterleavedBuffer){for(let Ar=0;Ar<un.locationSize;Ar++)wt(un.location+Ar,fr.meshPerAttribute);Gt.isInstancedMesh!==!0&&an._maxInstanceCount===void 0&&(an._maxInstanceCount=fr.meshPerAttribute*fr.count)}else for(let Ar=0;Ar<un.locationSize;Ar++)Et(un.location+Ar);nt.bindBuffer(nt.ARRAY_BUFFER,qn);for(let Ar=0;Ar<un.locationSize;Ar++)Ft(un.location+Ar,dn/un.locationSize,In,Pn,mr*Wn,(vr+dn/un.locationSize*Ar)*Wn,ar)}else{if(Tn.isInstancedBufferAttribute){for(let fr=0;fr<un.locationSize;fr++)wt(un.location+fr,Tn.meshPerAttribute);Gt.isInstancedMesh!==!0&&an._maxInstanceCount===void 0&&(an._maxInstanceCount=Tn.meshPerAttribute*Tn.count)}else for(let fr=0;fr<un.locationSize;fr++)Et(un.location+fr);nt.bindBuffer(nt.ARRAY_BUFFER,qn);for(let fr=0;fr<un.locationSize;fr++)Ft(un.location+fr,dn/un.locationSize,In,Pn,dn*Wn,dn/un.locationSize*fr*Wn,ar)}}else if(Cn!==void 0){const Pn=Cn[Mn];if(Pn!==void 0)switch(Pn.length){case 2:nt.vertexAttrib2fv(un.location,Pn);break;case 3:nt.vertexAttrib3fv(un.location,Pn);break;case 4:nt.vertexAttrib4fv(un.location,Pn);break;default:nt.vertexAttrib1fv(un.location,Pn)}}}}Pt()}function Ot(){Zt();for(const Gt in st){const nn=st[Gt];for(const cn in nn){const an=nn[cn];for(const mn in an)bt(an[mn].object),delete an[mn];delete nn[cn]}delete st[Gt]}}function Bt(Gt){if(st[Gt.id]===void 0)return;const nn=st[Gt.id];for(const cn in nn){const an=nn[cn];for(const mn in an)bt(an[mn].object),delete an[mn];delete nn[cn]}delete st[Gt.id]}function Xt(Gt){for(const nn in st){const cn=st[nn];if(cn[Gt.id]===void 0)continue;const an=cn[Gt.id];for(const mn in an)bt(an[mn].object),delete an[mn];delete cn[Gt.id]}}function Zt(){rn(),dt=!0,lt!==at&&(lt=at,_t(lt.object))}function rn(){at.geometry=null,at.program=null,at.wireframe=!1}return{setup:yt,reset:Zt,resetDefaultState:rn,dispose:Ot,releaseStatesOfGeometry:Bt,releaseStatesOfProgram:Xt,initAttributes:Rt,enableAttribute:Et,disableUnusedAttributes:Pt}}function WebGLBufferRenderer(nt,tt,rt){let st;function at(_t){st=_t}function lt(_t,bt){nt.drawArrays(st,_t,bt),rt.update(bt,st,1)}function dt(_t,bt,Mt){Mt!==0&&(nt.drawArraysInstanced(st,_t,bt,Mt),rt.update(bt,st,Mt))}function yt(_t,bt,Mt){if(Mt===0)return;tt.get("WEBGL_multi_draw").multiDrawArraysWEBGL(st,_t,0,bt,0,Mt);let Tt=0;for(let $t=0;$t<Mt;$t++)Tt+=bt[$t];rt.update(Tt,st,1)}function vt(_t,bt,Mt,Ct){if(Mt===0)return;const Tt=tt.get("WEBGL_multi_draw");if(Tt===null)for(let $t=0;$t<_t.length;$t++)dt(_t[$t],bt[$t],Ct[$t]);else{Tt.multiDrawArraysInstancedWEBGL(st,_t,0,bt,0,Ct,0,Mt);let $t=0;for(let Rt=0;Rt<Mt;Rt++)$t+=bt[Rt];for(let Rt=0;Rt<Ct.length;Rt++)rt.update($t,st,Ct[Rt])}}this.setMode=at,this.render=lt,this.renderInstances=dt,this.renderMultiDraw=yt,this.renderMultiDrawInstances=vt}function WebGLCapabilities(nt,tt,rt,st){let at;function lt(){if(at!==void 0)return at;if(tt.has("EXT_texture_filter_anisotropic")===!0){const Xt=tt.get("EXT_texture_filter_anisotropic");at=nt.getParameter(Xt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else at=0;return at}function dt(Xt){return!(Xt!==RGBAFormat&&st.convert(Xt)!==nt.getParameter(nt.IMPLEMENTATION_COLOR_READ_FORMAT))}function yt(Xt){const Zt=Xt===HalfFloatType&&(tt.has("EXT_color_buffer_half_float")||tt.has("EXT_color_buffer_float"));return!(Xt!==UnsignedByteType&&st.convert(Xt)!==nt.getParameter(nt.IMPLEMENTATION_COLOR_READ_TYPE)&&Xt!==FloatType&&!Zt)}function vt(Xt){if(Xt==="highp"){if(nt.getShaderPrecisionFormat(nt.VERTEX_SHADER,nt.HIGH_FLOAT).precision>0&&nt.getShaderPrecisionFormat(nt.FRAGMENT_SHADER,nt.HIGH_FLOAT).precision>0)return"highp";Xt="mediump"}return Xt==="mediump"&&nt.getShaderPrecisionFormat(nt.VERTEX_SHADER,nt.MEDIUM_FLOAT).precision>0&&nt.getShaderPrecisionFormat(nt.FRAGMENT_SHADER,nt.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let _t=rt.precision!==void 0?rt.precision:"highp";const bt=vt(_t);bt!==_t&&(console.warn("THREE.WebGLRenderer:",_t,"not supported, using",bt,"instead."),_t=bt);const Mt=rt.logarithmicDepthBuffer===!0,Ct=rt.reverseDepthBuffer===!0&&tt.has("EXT_clip_control");if(Ct===!0){const Xt=tt.get("EXT_clip_control");Xt.clipControlEXT(Xt.LOWER_LEFT_EXT,Xt.ZERO_TO_ONE_EXT)}const Tt=nt.getParameter(nt.MAX_TEXTURE_IMAGE_UNITS),$t=nt.getParameter(nt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Rt=nt.getParameter(nt.MAX_TEXTURE_SIZE),Et=nt.getParameter(nt.MAX_CUBE_MAP_TEXTURE_SIZE),wt=nt.getParameter(nt.MAX_VERTEX_ATTRIBS),Pt=nt.getParameter(nt.MAX_VERTEX_UNIFORM_VECTORS),Ft=nt.getParameter(nt.MAX_VARYING_VECTORS),Nt=nt.getParameter(nt.MAX_FRAGMENT_UNIFORM_VECTORS),Ot=$t>0,Bt=nt.getParameter(nt.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:lt,getMaxPrecision:vt,textureFormatReadable:dt,textureTypeReadable:yt,precision:_t,logarithmicDepthBuffer:Mt,reverseDepthBuffer:Ct,maxTextures:Tt,maxVertexTextures:$t,maxTextureSize:Rt,maxCubemapSize:Et,maxAttributes:wt,maxVertexUniforms:Pt,maxVaryings:Ft,maxFragmentUniforms:Nt,vertexTextures:Ot,maxSamples:Bt}}function WebGLClipping(nt){const tt=this;let rt=null,st=0,at=!1,lt=!1;const dt=new Plane,yt=new Matrix3,vt={value:null,needsUpdate:!1};this.uniform=vt,this.numPlanes=0,this.numIntersection=0,this.init=function(Mt,Ct){const Tt=Mt.length!==0||Ct||st!==0||at;return at=Ct,st=Mt.length,Tt},this.beginShadows=function(){lt=!0,bt(null)},this.endShadows=function(){lt=!1},this.setGlobalState=function(Mt,Ct){rt=bt(Mt,Ct,0)},this.setState=function(Mt,Ct,Tt){const $t=Mt.clippingPlanes,Rt=Mt.clipIntersection,Et=Mt.clipShadows,wt=nt.get(Mt);if(!at||$t===null||$t.length===0||lt&&!Et)lt?bt(null):_t();else{const Pt=lt?0:st,Ft=Pt*4;let Nt=wt.clippingState||null;vt.value=Nt,Nt=bt($t,Ct,Ft,Tt);for(let Ot=0;Ot!==Ft;++Ot)Nt[Ot]=rt[Ot];wt.clippingState=Nt,this.numIntersection=Rt?this.numPlanes:0,this.numPlanes+=Pt}};function _t(){vt.value!==rt&&(vt.value=rt,vt.needsUpdate=st>0),tt.numPlanes=st,tt.numIntersection=0}function bt(Mt,Ct,Tt,$t){const Rt=Mt!==null?Mt.length:0;let Et=null;if(Rt!==0){if(Et=vt.value,$t!==!0||Et===null){const wt=Tt+Rt*4,Pt=Ct.matrixWorldInverse;yt.getNormalMatrix(Pt),(Et===null||Et.length<wt)&&(Et=new Float32Array(wt));for(let Ft=0,Nt=Tt;Ft!==Rt;++Ft,Nt+=4)dt.copy(Mt[Ft]).applyMatrix4(Pt,yt),dt.normal.toArray(Et,Nt),Et[Nt+3]=dt.constant}vt.value=Et,vt.needsUpdate=!0}return tt.numPlanes=Rt,tt.numIntersection=0,Et}}function WebGLCubeMaps(nt){let tt=new WeakMap;function rt(dt,yt){return yt===EquirectangularReflectionMapping?dt.mapping=CubeReflectionMapping:yt===EquirectangularRefractionMapping&&(dt.mapping=CubeRefractionMapping),dt}function st(dt){if(dt&&dt.isTexture){const yt=dt.mapping;if(yt===EquirectangularReflectionMapping||yt===EquirectangularRefractionMapping)if(tt.has(dt)){const vt=tt.get(dt).texture;return rt(vt,dt.mapping)}else{const vt=dt.image;if(vt&&vt.height>0){const _t=new WebGLCubeRenderTarget(vt.height);return _t.fromEquirectangularTexture(nt,dt),tt.set(dt,_t),dt.addEventListener("dispose",at),rt(_t.texture,dt.mapping)}else return null}}return dt}function at(dt){const yt=dt.target;yt.removeEventListener("dispose",at);const vt=tt.get(yt);vt!==void 0&&(tt.delete(yt),vt.dispose())}function lt(){tt=new WeakMap}return{get:st,dispose:lt}}class OrthographicCamera extends Camera{constructor(tt=-1,rt=1,st=1,at=-1,lt=.1,dt=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=tt,this.right=rt,this.top=st,this.bottom=at,this.near=lt,this.far=dt,this.updateProjectionMatrix()}copy(tt,rt){return super.copy(tt,rt),this.left=tt.left,this.right=tt.right,this.top=tt.top,this.bottom=tt.bottom,this.near=tt.near,this.far=tt.far,this.zoom=tt.zoom,this.view=tt.view===null?null:Object.assign({},tt.view),this}setViewOffset(tt,rt,st,at,lt,dt){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=tt,this.view.fullHeight=rt,this.view.offsetX=st,this.view.offsetY=at,this.view.width=lt,this.view.height=dt,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const tt=(this.right-this.left)/(2*this.zoom),rt=(this.top-this.bottom)/(2*this.zoom),st=(this.right+this.left)/2,at=(this.top+this.bottom)/2;let lt=st-tt,dt=st+tt,yt=at+rt,vt=at-rt;if(this.view!==null&&this.view.enabled){const _t=(this.right-this.left)/this.view.fullWidth/this.zoom,bt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;lt+=_t*this.view.offsetX,dt=lt+_t*this.view.width,yt-=bt*this.view.offsetY,vt=yt-bt*this.view.height}this.projectionMatrix.makeOrthographic(lt,dt,yt,vt,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(tt){const rt=super.toJSON(tt);return rt.object.zoom=this.zoom,rt.object.left=this.left,rt.object.right=this.right,rt.object.top=this.top,rt.object.bottom=this.bottom,rt.object.near=this.near,rt.object.far=this.far,this.view!==null&&(rt.object.view=Object.assign({},this.view)),rt}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color$1;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)];class PMREMGenerator{constructor(tt){this._renderer=tt,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(tt,rt=0,st=.1,at=100){_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const lt=this._allocateTargets();return lt.depthBuffer=!0,this._sceneToCubeUV(tt,st,at,lt),rt>0&&this._blur(lt,0,0,rt),this._applyPMREM(lt),this._cleanup(lt),lt}fromEquirectangular(tt,rt=null){return this._fromTexture(tt,rt)}fromCubemap(tt,rt=null){return this._fromTexture(tt,rt)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(tt){this._lodMax=Math.floor(Math.log2(tt)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let tt=0;tt<this._lodPlanes.length;tt++)this._lodPlanes[tt].dispose()}_cleanup(tt){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,tt.scissorTest=!1,_setViewport(tt,0,0,tt.width,tt.height)}_fromTexture(tt,rt){tt.mapping===CubeReflectionMapping||tt.mapping===CubeRefractionMapping?this._setSize(tt.image.length===0?16:tt.image[0].width||tt.image[0].image.width):this._setSize(tt.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const st=rt||this._allocateTargets();return this._textureToCubeUV(tt,st),this._applyPMREM(st),this._cleanup(st),st}_allocateTargets(){const tt=3*Math.max(this._cubeSize,112),rt=4*this._cubeSize,st={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},at=_createRenderTarget(tt,rt,st);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==tt||this._pingPongRenderTarget.height!==rt){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(tt,rt,st);const{_lodMax:lt}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(lt)),this._blurMaterial=_getBlurShader(lt,tt,rt)}return at}_compileMaterial(tt){const rt=new Mesh(this._lodPlanes[0],tt);this._renderer.compile(rt,_flatCamera)}_sceneToCubeUV(tt,rt,st,at){const yt=new PerspectiveCamera(90,1,rt,st),vt=[1,-1,1,1,1,1],_t=[1,1,1,-1,-1,-1],bt=this._renderer,Mt=bt.autoClear,Ct=bt.toneMapping;bt.getClearColor(_clearColor),bt.toneMapping=NoToneMapping,bt.autoClear=!1;const Tt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),$t=new Mesh(new BoxGeometry,Tt);let Rt=!1;const Et=tt.background;Et?Et.isColor&&(Tt.color.copy(Et),tt.background=null,Rt=!0):(Tt.color.copy(_clearColor),Rt=!0);for(let wt=0;wt<6;wt++){const Pt=wt%3;Pt===0?(yt.up.set(0,vt[wt],0),yt.lookAt(_t[wt],0,0)):Pt===1?(yt.up.set(0,0,vt[wt]),yt.lookAt(0,_t[wt],0)):(yt.up.set(0,vt[wt],0),yt.lookAt(0,0,_t[wt]));const Ft=this._cubeSize;_setViewport(at,Pt*Ft,wt>2?Ft:0,Ft,Ft),bt.setRenderTarget(at),Rt&&bt.render($t,yt),bt.render(tt,yt)}$t.geometry.dispose(),$t.material.dispose(),bt.toneMapping=Ct,bt.autoClear=Mt,tt.background=Et}_textureToCubeUV(tt,rt){const st=this._renderer,at=tt.mapping===CubeReflectionMapping||tt.mapping===CubeRefractionMapping;at?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=tt.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const lt=at?this._cubemapMaterial:this._equirectMaterial,dt=new Mesh(this._lodPlanes[0],lt),yt=lt.uniforms;yt.envMap.value=tt;const vt=this._cubeSize;_setViewport(rt,0,0,3*vt,2*vt),st.setRenderTarget(rt),st.render(dt,_flatCamera)}_applyPMREM(tt){const rt=this._renderer,st=rt.autoClear;rt.autoClear=!1;const at=this._lodPlanes.length;for(let lt=1;lt<at;lt++){const dt=Math.sqrt(this._sigmas[lt]*this._sigmas[lt]-this._sigmas[lt-1]*this._sigmas[lt-1]),yt=_axisDirections[(at-lt-1)%_axisDirections.length];this._blur(tt,lt-1,lt,dt,yt)}rt.autoClear=st}_blur(tt,rt,st,at,lt){const dt=this._pingPongRenderTarget;this._halfBlur(tt,dt,rt,st,at,"latitudinal",lt),this._halfBlur(dt,tt,st,st,at,"longitudinal",lt)}_halfBlur(tt,rt,st,at,lt,dt,yt){const vt=this._renderer,_t=this._blurMaterial;dt!=="latitudinal"&&dt!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const bt=3,Mt=new Mesh(this._lodPlanes[at],_t),Ct=_t.uniforms,Tt=this._sizeLods[st]-1,$t=isFinite(lt)?Math.PI/(2*Tt):2*Math.PI/(2*MAX_SAMPLES-1),Rt=lt/$t,Et=isFinite(lt)?1+Math.floor(bt*Rt):MAX_SAMPLES;Et>MAX_SAMPLES&&console.warn(`sigmaRadians, ${lt}, is too large and will clip, as it requested ${Et} samples when the maximum is set to ${MAX_SAMPLES}`);const wt=[];let Pt=0;for(let Xt=0;Xt<MAX_SAMPLES;++Xt){const Zt=Xt/Rt,rn=Math.exp(-Zt*Zt/2);wt.push(rn),Xt===0?Pt+=rn:Xt<Et&&(Pt+=2*rn)}for(let Xt=0;Xt<wt.length;Xt++)wt[Xt]=wt[Xt]/Pt;Ct.envMap.value=tt.texture,Ct.samples.value=Et,Ct.weights.value=wt,Ct.latitudinal.value=dt==="latitudinal",yt&&(Ct.poleAxis.value=yt);const{_lodMax:Ft}=this;Ct.dTheta.value=$t,Ct.mipInt.value=Ft-st;const Nt=this._sizeLods[at],Ot=3*Nt*(at>Ft-LOD_MIN?at-Ft+LOD_MIN:0),Bt=4*(this._cubeSize-Nt);_setViewport(rt,Ot,Bt,3*Nt,2*Nt),vt.setRenderTarget(rt),vt.render(Mt,_flatCamera)}}function _createPlanes(nt){const tt=[],rt=[],st=[];let at=nt;const lt=nt-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let dt=0;dt<lt;dt++){const yt=Math.pow(2,at);rt.push(yt);let vt=1/yt;dt>nt-LOD_MIN?vt=EXTRA_LOD_SIGMA[dt-nt+LOD_MIN-1]:dt===0&&(vt=0),st.push(vt);const _t=1/(yt-2),bt=-_t,Mt=1+_t,Ct=[bt,bt,Mt,bt,Mt,Mt,bt,bt,Mt,Mt,bt,Mt],Tt=6,$t=6,Rt=3,Et=2,wt=1,Pt=new Float32Array(Rt*$t*Tt),Ft=new Float32Array(Et*$t*Tt),Nt=new Float32Array(wt*$t*Tt);for(let Bt=0;Bt<Tt;Bt++){const Xt=Bt%3*2/3-1,Zt=Bt>2?0:-1,rn=[Xt,Zt,0,Xt+2/3,Zt,0,Xt+2/3,Zt+1,0,Xt,Zt,0,Xt+2/3,Zt+1,0,Xt,Zt+1,0];Pt.set(rn,Rt*$t*Bt),Ft.set(Ct,Et*$t*Bt);const Gt=[Bt,Bt,Bt,Bt,Bt,Bt];Nt.set(Gt,wt*$t*Bt)}const Ot=new BufferGeometry;Ot.setAttribute("position",new BufferAttribute(Pt,Rt)),Ot.setAttribute("uv",new BufferAttribute(Ft,Et)),Ot.setAttribute("faceIndex",new BufferAttribute(Nt,wt)),tt.push(Ot),at>LOD_MIN&&at--}return{lodPlanes:tt,sizeLods:rt,sigmas:st}}function _createRenderTarget(nt,tt,rt){const st=new WebGLRenderTarget(nt,tt,rt);return st.texture.mapping=CubeUVReflectionMapping,st.texture.name="PMREM.cubeUv",st.scissorTest=!0,st}function _setViewport(nt,tt,rt,st,at){nt.viewport.set(tt,rt,st,at),nt.scissor.set(tt,rt,st,at)}function _getBlurShader(nt,tt,rt){const st=new Float32Array(MAX_SAMPLES),at=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/tt,CUBEUV_TEXEL_HEIGHT:1/rt,CUBEUV_MAX_MIP:`${nt}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:st},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:at}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(nt){let tt=new WeakMap,rt=null;function st(yt){if(yt&&yt.isTexture){const vt=yt.mapping,_t=vt===EquirectangularReflectionMapping||vt===EquirectangularRefractionMapping,bt=vt===CubeReflectionMapping||vt===CubeRefractionMapping;if(_t||bt){let Mt=tt.get(yt);const Ct=Mt!==void 0?Mt.texture.pmremVersion:0;if(yt.isRenderTargetTexture&&yt.pmremVersion!==Ct)return rt===null&&(rt=new PMREMGenerator(nt)),Mt=_t?rt.fromEquirectangular(yt,Mt):rt.fromCubemap(yt,Mt),Mt.texture.pmremVersion=yt.pmremVersion,tt.set(yt,Mt),Mt.texture;if(Mt!==void 0)return Mt.texture;{const Tt=yt.image;return _t&&Tt&&Tt.height>0||bt&&Tt&&at(Tt)?(rt===null&&(rt=new PMREMGenerator(nt)),Mt=_t?rt.fromEquirectangular(yt):rt.fromCubemap(yt),Mt.texture.pmremVersion=yt.pmremVersion,tt.set(yt,Mt),yt.addEventListener("dispose",lt),Mt.texture):null}}}return yt}function at(yt){let vt=0;const _t=6;for(let bt=0;bt<_t;bt++)yt[bt]!==void 0&&vt++;return vt===_t}function lt(yt){const vt=yt.target;vt.removeEventListener("dispose",lt);const _t=tt.get(vt);_t!==void 0&&(tt.delete(vt),_t.dispose())}function dt(){tt=new WeakMap,rt!==null&&(rt.dispose(),rt=null)}return{get:st,dispose:dt}}function WebGLExtensions(nt){const tt={};function rt(st){if(tt[st]!==void 0)return tt[st];let at;switch(st){case"WEBGL_depth_texture":at=nt.getExtension("WEBGL_depth_texture")||nt.getExtension("MOZ_WEBGL_depth_texture")||nt.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":at=nt.getExtension("EXT_texture_filter_anisotropic")||nt.getExtension("MOZ_EXT_texture_filter_anisotropic")||nt.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":at=nt.getExtension("WEBGL_compressed_texture_s3tc")||nt.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||nt.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":at=nt.getExtension("WEBGL_compressed_texture_pvrtc")||nt.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:at=nt.getExtension(st)}return tt[st]=at,at}return{has:function(st){return rt(st)!==null},init:function(){rt("EXT_color_buffer_float"),rt("WEBGL_clip_cull_distance"),rt("OES_texture_float_linear"),rt("EXT_color_buffer_half_float"),rt("WEBGL_multisampled_render_to_texture"),rt("WEBGL_render_shared_exponent")},get:function(st){const at=rt(st);return at===null&&warnOnce("THREE.WebGLRenderer: "+st+" extension not supported."),at}}}function WebGLGeometries(nt,tt,rt,st){const at={},lt=new WeakMap;function dt(Mt){const Ct=Mt.target;Ct.index!==null&&tt.remove(Ct.index);for(const $t in Ct.attributes)tt.remove(Ct.attributes[$t]);for(const $t in Ct.morphAttributes){const Rt=Ct.morphAttributes[$t];for(let Et=0,wt=Rt.length;Et<wt;Et++)tt.remove(Rt[Et])}Ct.removeEventListener("dispose",dt),delete at[Ct.id];const Tt=lt.get(Ct);Tt&&(tt.remove(Tt),lt.delete(Ct)),st.releaseStatesOfGeometry(Ct),Ct.isInstancedBufferGeometry===!0&&delete Ct._maxInstanceCount,rt.memory.geometries--}function yt(Mt,Ct){return at[Ct.id]===!0||(Ct.addEventListener("dispose",dt),at[Ct.id]=!0,rt.memory.geometries++),Ct}function vt(Mt){const Ct=Mt.attributes;for(const $t in Ct)tt.update(Ct[$t],nt.ARRAY_BUFFER);const Tt=Mt.morphAttributes;for(const $t in Tt){const Rt=Tt[$t];for(let Et=0,wt=Rt.length;Et<wt;Et++)tt.update(Rt[Et],nt.ARRAY_BUFFER)}}function _t(Mt){const Ct=[],Tt=Mt.index,$t=Mt.attributes.position;let Rt=0;if(Tt!==null){const Pt=Tt.array;Rt=Tt.version;for(let Ft=0,Nt=Pt.length;Ft<Nt;Ft+=3){const Ot=Pt[Ft+0],Bt=Pt[Ft+1],Xt=Pt[Ft+2];Ct.push(Ot,Bt,Bt,Xt,Xt,Ot)}}else if($t!==void 0){const Pt=$t.array;Rt=$t.version;for(let Ft=0,Nt=Pt.length/3-1;Ft<Nt;Ft+=3){const Ot=Ft+0,Bt=Ft+1,Xt=Ft+2;Ct.push(Ot,Bt,Bt,Xt,Xt,Ot)}}else return;const Et=new(arrayNeedsUint32(Ct)?Uint32BufferAttribute:Uint16BufferAttribute)(Ct,1);Et.version=Rt;const wt=lt.get(Mt);wt&&tt.remove(wt),lt.set(Mt,Et)}function bt(Mt){const Ct=lt.get(Mt);if(Ct){const Tt=Mt.index;Tt!==null&&Ct.version<Tt.version&&_t(Mt)}else _t(Mt);return lt.get(Mt)}return{get:yt,update:vt,getWireframeAttribute:bt}}function WebGLIndexedBufferRenderer(nt,tt,rt){let st;function at(Ct){st=Ct}let lt,dt;function yt(Ct){lt=Ct.type,dt=Ct.bytesPerElement}function vt(Ct,Tt){nt.drawElements(st,Tt,lt,Ct*dt),rt.update(Tt,st,1)}function _t(Ct,Tt,$t){$t!==0&&(nt.drawElementsInstanced(st,Tt,lt,Ct*dt,$t),rt.update(Tt,st,$t))}function bt(Ct,Tt,$t){if($t===0)return;tt.get("WEBGL_multi_draw").multiDrawElementsWEBGL(st,Tt,0,lt,Ct,0,$t);let Et=0;for(let wt=0;wt<$t;wt++)Et+=Tt[wt];rt.update(Et,st,1)}function Mt(Ct,Tt,$t,Rt){if($t===0)return;const Et=tt.get("WEBGL_multi_draw");if(Et===null)for(let wt=0;wt<Ct.length;wt++)_t(Ct[wt]/dt,Tt[wt],Rt[wt]);else{Et.multiDrawElementsInstancedWEBGL(st,Tt,0,lt,Ct,0,Rt,0,$t);let wt=0;for(let Pt=0;Pt<$t;Pt++)wt+=Tt[Pt];for(let Pt=0;Pt<Rt.length;Pt++)rt.update(wt,st,Rt[Pt])}}this.setMode=at,this.setIndex=yt,this.render=vt,this.renderInstances=_t,this.renderMultiDraw=bt,this.renderMultiDrawInstances=Mt}function WebGLInfo(nt){const tt={geometries:0,textures:0},rt={frame:0,calls:0,triangles:0,points:0,lines:0};function st(lt,dt,yt){switch(rt.calls++,dt){case nt.TRIANGLES:rt.triangles+=yt*(lt/3);break;case nt.LINES:rt.lines+=yt*(lt/2);break;case nt.LINE_STRIP:rt.lines+=yt*(lt-1);break;case nt.LINE_LOOP:rt.lines+=yt*lt;break;case nt.POINTS:rt.points+=yt*lt;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",dt);break}}function at(){rt.calls=0,rt.triangles=0,rt.points=0,rt.lines=0}return{memory:tt,render:rt,programs:null,autoReset:!0,reset:at,update:st}}function WebGLMorphtargets(nt,tt,rt){const st=new WeakMap,at=new Vector4;function lt(dt,yt,vt){const _t=dt.morphTargetInfluences,bt=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,Mt=bt!==void 0?bt.length:0;let Ct=st.get(yt);if(Ct===void 0||Ct.count!==Mt){let Gt=function(){Zt.dispose(),st.delete(yt),yt.removeEventListener("dispose",Gt)};var Tt=Gt;Ct!==void 0&&Ct.texture.dispose();const $t=yt.morphAttributes.position!==void 0,Rt=yt.morphAttributes.normal!==void 0,Et=yt.morphAttributes.color!==void 0,wt=yt.morphAttributes.position||[],Pt=yt.morphAttributes.normal||[],Ft=yt.morphAttributes.color||[];let Nt=0;$t===!0&&(Nt=1),Rt===!0&&(Nt=2),Et===!0&&(Nt=3);let Ot=yt.attributes.position.count*Nt,Bt=1;Ot>tt.maxTextureSize&&(Bt=Math.ceil(Ot/tt.maxTextureSize),Ot=tt.maxTextureSize);const Xt=new Float32Array(Ot*Bt*4*Mt),Zt=new DataArrayTexture(Xt,Ot,Bt,Mt);Zt.type=FloatType,Zt.needsUpdate=!0;const rn=Nt*4;for(let nn=0;nn<Mt;nn++){const cn=wt[nn],an=Pt[nn],mn=Ft[nn],En=Ot*Bt*4*nn;for(let Cn=0;Cn<cn.count;Cn++){const Mn=Cn*rn;$t===!0&&(at.fromBufferAttribute(cn,Cn),Xt[En+Mn+0]=at.x,Xt[En+Mn+1]=at.y,Xt[En+Mn+2]=at.z,Xt[En+Mn+3]=0),Rt===!0&&(at.fromBufferAttribute(an,Cn),Xt[En+Mn+4]=at.x,Xt[En+Mn+5]=at.y,Xt[En+Mn+6]=at.z,Xt[En+Mn+7]=0),Et===!0&&(at.fromBufferAttribute(mn,Cn),Xt[En+Mn+8]=at.x,Xt[En+Mn+9]=at.y,Xt[En+Mn+10]=at.z,Xt[En+Mn+11]=mn.itemSize===4?at.w:1)}}Ct={count:Mt,texture:Zt,size:new Vector2(Ot,Bt)},st.set(yt,Ct),yt.addEventListener("dispose",Gt)}if(dt.isInstancedMesh===!0&&dt.morphTexture!==null)vt.getUniforms().setValue(nt,"morphTexture",dt.morphTexture,rt);else{let $t=0;for(let Et=0;Et<_t.length;Et++)$t+=_t[Et];const Rt=yt.morphTargetsRelative?1:1-$t;vt.getUniforms().setValue(nt,"morphTargetBaseInfluence",Rt),vt.getUniforms().setValue(nt,"morphTargetInfluences",_t)}vt.getUniforms().setValue(nt,"morphTargetsTexture",Ct.texture,rt),vt.getUniforms().setValue(nt,"morphTargetsTextureSize",Ct.size)}return{update:lt}}function WebGLObjects(nt,tt,rt,st){let at=new WeakMap;function lt(vt){const _t=st.render.frame,bt=vt.geometry,Mt=tt.get(vt,bt);if(at.get(Mt)!==_t&&(tt.update(Mt),at.set(Mt,_t)),vt.isInstancedMesh&&(vt.hasEventListener("dispose",yt)===!1&&vt.addEventListener("dispose",yt),at.get(vt)!==_t&&(rt.update(vt.instanceMatrix,nt.ARRAY_BUFFER),vt.instanceColor!==null&&rt.update(vt.instanceColor,nt.ARRAY_BUFFER),at.set(vt,_t))),vt.isSkinnedMesh){const Ct=vt.skeleton;at.get(Ct)!==_t&&(Ct.update(),at.set(Ct,_t))}return Mt}function dt(){at=new WeakMap}function yt(vt){const _t=vt.target;_t.removeEventListener("dispose",yt),rt.remove(_t.instanceMatrix),_t.instanceColor!==null&&rt.remove(_t.instanceColor)}return{update:lt,dispose:dt}}class DepthTexture extends Texture{constructor(tt,rt,st,at,lt,dt,yt,vt,_t,bt=DepthFormat){if(bt!==DepthFormat&&bt!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");st===void 0&&bt===DepthFormat&&(st=UnsignedIntType),st===void 0&&bt===DepthStencilFormat&&(st=UnsignedInt248Type),super(null,at,lt,dt,yt,vt,bt,st,_t),this.isDepthTexture=!0,this.image={width:tt,height:rt},this.magFilter=yt!==void 0?yt:NearestFilter,this.minFilter=vt!==void 0?vt:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(tt){return super.copy(tt),this.compareFunction=tt.compareFunction,this}toJSON(tt){const rt=super.toJSON(tt);return this.compareFunction!==null&&(rt.compareFunction=this.compareFunction),rt}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(nt,tt,rt){const st=nt[0];if(st<=0||st>0)return nt;const at=tt*rt;let lt=arrayCacheF32[at];if(lt===void 0&&(lt=new Float32Array(at),arrayCacheF32[at]=lt),tt!==0){st.toArray(lt,0);for(let dt=1,yt=0;dt!==tt;++dt)yt+=rt,nt[dt].toArray(lt,yt)}return lt}function arraysEqual(nt,tt){if(nt.length!==tt.length)return!1;for(let rt=0,st=nt.length;rt<st;rt++)if(nt[rt]!==tt[rt])return!1;return!0}function copyArray(nt,tt){for(let rt=0,st=tt.length;rt<st;rt++)nt[rt]=tt[rt]}function allocTexUnits(nt,tt){let rt=arrayCacheI32[tt];rt===void 0&&(rt=new Int32Array(tt),arrayCacheI32[tt]=rt);for(let st=0;st!==tt;++st)rt[st]=nt.allocateTextureUnit();return rt}function setValueV1f(nt,tt){const rt=this.cache;rt[0]!==tt&&(nt.uniform1f(this.addr,tt),rt[0]=tt)}function setValueV2f(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y)&&(nt.uniform2f(this.addr,tt.x,tt.y),rt[0]=tt.x,rt[1]=tt.y);else{if(arraysEqual(rt,tt))return;nt.uniform2fv(this.addr,tt),copyArray(rt,tt)}}function setValueV3f(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z)&&(nt.uniform3f(this.addr,tt.x,tt.y,tt.z),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z);else if(tt.r!==void 0)(rt[0]!==tt.r||rt[1]!==tt.g||rt[2]!==tt.b)&&(nt.uniform3f(this.addr,tt.r,tt.g,tt.b),rt[0]=tt.r,rt[1]=tt.g,rt[2]=tt.b);else{if(arraysEqual(rt,tt))return;nt.uniform3fv(this.addr,tt),copyArray(rt,tt)}}function setValueV4f(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z||rt[3]!==tt.w)&&(nt.uniform4f(this.addr,tt.x,tt.y,tt.z,tt.w),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z,rt[3]=tt.w);else{if(arraysEqual(rt,tt))return;nt.uniform4fv(this.addr,tt),copyArray(rt,tt)}}function setValueM2(nt,tt){const rt=this.cache,st=tt.elements;if(st===void 0){if(arraysEqual(rt,tt))return;nt.uniformMatrix2fv(this.addr,!1,tt),copyArray(rt,tt)}else{if(arraysEqual(rt,st))return;mat2array.set(st),nt.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(rt,st)}}function setValueM3(nt,tt){const rt=this.cache,st=tt.elements;if(st===void 0){if(arraysEqual(rt,tt))return;nt.uniformMatrix3fv(this.addr,!1,tt),copyArray(rt,tt)}else{if(arraysEqual(rt,st))return;mat3array.set(st),nt.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(rt,st)}}function setValueM4(nt,tt){const rt=this.cache,st=tt.elements;if(st===void 0){if(arraysEqual(rt,tt))return;nt.uniformMatrix4fv(this.addr,!1,tt),copyArray(rt,tt)}else{if(arraysEqual(rt,st))return;mat4array.set(st),nt.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(rt,st)}}function setValueV1i(nt,tt){const rt=this.cache;rt[0]!==tt&&(nt.uniform1i(this.addr,tt),rt[0]=tt)}function setValueV2i(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y)&&(nt.uniform2i(this.addr,tt.x,tt.y),rt[0]=tt.x,rt[1]=tt.y);else{if(arraysEqual(rt,tt))return;nt.uniform2iv(this.addr,tt),copyArray(rt,tt)}}function setValueV3i(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z)&&(nt.uniform3i(this.addr,tt.x,tt.y,tt.z),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z);else{if(arraysEqual(rt,tt))return;nt.uniform3iv(this.addr,tt),copyArray(rt,tt)}}function setValueV4i(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z||rt[3]!==tt.w)&&(nt.uniform4i(this.addr,tt.x,tt.y,tt.z,tt.w),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z,rt[3]=tt.w);else{if(arraysEqual(rt,tt))return;nt.uniform4iv(this.addr,tt),copyArray(rt,tt)}}function setValueV1ui(nt,tt){const rt=this.cache;rt[0]!==tt&&(nt.uniform1ui(this.addr,tt),rt[0]=tt)}function setValueV2ui(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y)&&(nt.uniform2ui(this.addr,tt.x,tt.y),rt[0]=tt.x,rt[1]=tt.y);else{if(arraysEqual(rt,tt))return;nt.uniform2uiv(this.addr,tt),copyArray(rt,tt)}}function setValueV3ui(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z)&&(nt.uniform3ui(this.addr,tt.x,tt.y,tt.z),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z);else{if(arraysEqual(rt,tt))return;nt.uniform3uiv(this.addr,tt),copyArray(rt,tt)}}function setValueV4ui(nt,tt){const rt=this.cache;if(tt.x!==void 0)(rt[0]!==tt.x||rt[1]!==tt.y||rt[2]!==tt.z||rt[3]!==tt.w)&&(nt.uniform4ui(this.addr,tt.x,tt.y,tt.z,tt.w),rt[0]=tt.x,rt[1]=tt.y,rt[2]=tt.z,rt[3]=tt.w);else{if(arraysEqual(rt,tt))return;nt.uniform4uiv(this.addr,tt),copyArray(rt,tt)}}function setValueT1(nt,tt,rt){const st=this.cache,at=rt.allocateTextureUnit();st[0]!==at&&(nt.uniform1i(this.addr,at),st[0]=at);let lt;this.type===nt.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,lt=emptyShadowTexture):lt=emptyTexture,rt.setTexture2D(tt||lt,at)}function setValueT3D1(nt,tt,rt){const st=this.cache,at=rt.allocateTextureUnit();st[0]!==at&&(nt.uniform1i(this.addr,at),st[0]=at),rt.setTexture3D(tt||empty3dTexture,at)}function setValueT6(nt,tt,rt){const st=this.cache,at=rt.allocateTextureUnit();st[0]!==at&&(nt.uniform1i(this.addr,at),st[0]=at),rt.setTextureCube(tt||emptyCubeTexture,at)}function setValueT2DArray1(nt,tt,rt){const st=this.cache,at=rt.allocateTextureUnit();st[0]!==at&&(nt.uniform1i(this.addr,at),st[0]=at),rt.setTexture2DArray(tt||emptyArrayTexture,at)}function getSingularSetter(nt){switch(nt){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(nt,tt){nt.uniform1fv(this.addr,tt)}function setValueV2fArray(nt,tt){const rt=flatten(tt,this.size,2);nt.uniform2fv(this.addr,rt)}function setValueV3fArray(nt,tt){const rt=flatten(tt,this.size,3);nt.uniform3fv(this.addr,rt)}function setValueV4fArray(nt,tt){const rt=flatten(tt,this.size,4);nt.uniform4fv(this.addr,rt)}function setValueM2Array(nt,tt){const rt=flatten(tt,this.size,4);nt.uniformMatrix2fv(this.addr,!1,rt)}function setValueM3Array(nt,tt){const rt=flatten(tt,this.size,9);nt.uniformMatrix3fv(this.addr,!1,rt)}function setValueM4Array(nt,tt){const rt=flatten(tt,this.size,16);nt.uniformMatrix4fv(this.addr,!1,rt)}function setValueV1iArray(nt,tt){nt.uniform1iv(this.addr,tt)}function setValueV2iArray(nt,tt){nt.uniform2iv(this.addr,tt)}function setValueV3iArray(nt,tt){nt.uniform3iv(this.addr,tt)}function setValueV4iArray(nt,tt){nt.uniform4iv(this.addr,tt)}function setValueV1uiArray(nt,tt){nt.uniform1uiv(this.addr,tt)}function setValueV2uiArray(nt,tt){nt.uniform2uiv(this.addr,tt)}function setValueV3uiArray(nt,tt){nt.uniform3uiv(this.addr,tt)}function setValueV4uiArray(nt,tt){nt.uniform4uiv(this.addr,tt)}function setValueT1Array(nt,tt,rt){const st=this.cache,at=tt.length,lt=allocTexUnits(rt,at);arraysEqual(st,lt)||(nt.uniform1iv(this.addr,lt),copyArray(st,lt));for(let dt=0;dt!==at;++dt)rt.setTexture2D(tt[dt]||emptyTexture,lt[dt])}function setValueT3DArray(nt,tt,rt){const st=this.cache,at=tt.length,lt=allocTexUnits(rt,at);arraysEqual(st,lt)||(nt.uniform1iv(this.addr,lt),copyArray(st,lt));for(let dt=0;dt!==at;++dt)rt.setTexture3D(tt[dt]||empty3dTexture,lt[dt])}function setValueT6Array(nt,tt,rt){const st=this.cache,at=tt.length,lt=allocTexUnits(rt,at);arraysEqual(st,lt)||(nt.uniform1iv(this.addr,lt),copyArray(st,lt));for(let dt=0;dt!==at;++dt)rt.setTextureCube(tt[dt]||emptyCubeTexture,lt[dt])}function setValueT2DArrayArray(nt,tt,rt){const st=this.cache,at=tt.length,lt=allocTexUnits(rt,at);arraysEqual(st,lt)||(nt.uniform1iv(this.addr,lt),copyArray(st,lt));for(let dt=0;dt!==at;++dt)rt.setTexture2DArray(tt[dt]||emptyArrayTexture,lt[dt])}function getPureArraySetter(nt){switch(nt){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(tt,rt,st){this.id=tt,this.addr=st,this.cache=[],this.type=rt.type,this.setValue=getSingularSetter(rt.type)}}class PureArrayUniform{constructor(tt,rt,st){this.id=tt,this.addr=st,this.cache=[],this.type=rt.type,this.size=rt.size,this.setValue=getPureArraySetter(rt.type)}}class StructuredUniform{constructor(tt){this.id=tt,this.seq=[],this.map={}}setValue(tt,rt,st){const at=this.seq;for(let lt=0,dt=at.length;lt!==dt;++lt){const yt=at[lt];yt.setValue(tt,rt[yt.id],st)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(nt,tt){nt.seq.push(tt),nt.map[tt.id]=tt}function parseUniform(nt,tt,rt){const st=nt.name,at=st.length;for(RePathPart.lastIndex=0;;){const lt=RePathPart.exec(st),dt=RePathPart.lastIndex;let yt=lt[1];const vt=lt[2]==="]",_t=lt[3];if(vt&&(yt=yt|0),_t===void 0||_t==="["&&dt+2===at){addUniform(rt,_t===void 0?new SingleUniform(yt,nt,tt):new PureArrayUniform(yt,nt,tt));break}else{let Mt=rt.map[yt];Mt===void 0&&(Mt=new StructuredUniform(yt),addUniform(rt,Mt)),rt=Mt}}}class WebGLUniforms{constructor(tt,rt){this.seq=[],this.map={};const st=tt.getProgramParameter(rt,tt.ACTIVE_UNIFORMS);for(let at=0;at<st;++at){const lt=tt.getActiveUniform(rt,at),dt=tt.getUniformLocation(rt,lt.name);parseUniform(lt,dt,this)}}setValue(tt,rt,st,at){const lt=this.map[rt];lt!==void 0&&lt.setValue(tt,st,at)}setOptional(tt,rt,st){const at=rt[st];at!==void 0&&this.setValue(tt,st,at)}static upload(tt,rt,st,at){for(let lt=0,dt=rt.length;lt!==dt;++lt){const yt=rt[lt],vt=st[yt.id];vt.needsUpdate!==!1&&yt.setValue(tt,vt.value,at)}}static seqWithValue(tt,rt){const st=[];for(let at=0,lt=tt.length;at!==lt;++at){const dt=tt[at];dt.id in rt&&st.push(dt)}return st}}function WebGLShader(nt,tt,rt){const st=nt.createShader(tt);return nt.shaderSource(st,rt),nt.compileShader(st),st}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(nt,tt){const rt=nt.split(`
`),st=[],at=Math.max(tt-6,0),lt=Math.min(tt+6,rt.length);for(let dt=at;dt<lt;dt++){const yt=dt+1;st.push(`${yt===tt?">":" "} ${yt}: ${rt[dt]}`)}return st.join(`
`)}function getEncodingComponents(nt){const tt=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),rt=ColorManagement.getPrimaries(nt);let st;switch(tt===rt?st="":tt===P3Primaries&&rt===Rec709Primaries?st="LinearDisplayP3ToLinearSRGB":tt===Rec709Primaries&&rt===P3Primaries&&(st="LinearSRGBToLinearDisplayP3"),nt){case LinearSRGBColorSpace:case LinearDisplayP3ColorSpace:return[st,"LinearTransferOETF"];case SRGBColorSpace:case DisplayP3ColorSpace:return[st,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",nt),[st,"LinearTransferOETF"]}}function getShaderErrors(nt,tt,rt){const st=nt.getShaderParameter(tt,nt.COMPILE_STATUS),at=nt.getShaderInfoLog(tt).trim();if(st&&at==="")return"";const lt=/ERROR: 0:(\d+)/.exec(at);if(lt){const dt=parseInt(lt[1]);return rt.toUpperCase()+`

`+at+`

`+handleSource(nt.getShaderSource(tt),dt)}else return at}function getTexelEncodingFunction(nt,tt){const rt=getEncodingComponents(tt);return`vec4 ${nt}( vec4 value ) { return ${rt[0]}( ${rt[1]}( value ) ); }`}function getToneMappingFunction(nt,tt){let rt;switch(tt){case LinearToneMapping:rt="Linear";break;case ReinhardToneMapping:rt="Reinhard";break;case CineonToneMapping:rt="Cineon";break;case ACESFilmicToneMapping:rt="ACESFilmic";break;case AgXToneMapping:rt="AgX";break;case NeutralToneMapping:rt="Neutral";break;case CustomToneMapping:rt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",tt),rt="Linear"}return"vec3 "+nt+"( vec3 color ) { return "+rt+"ToneMapping( color ); }"}const _v0$1=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0$1);const nt=_v0$1.x.toFixed(4),tt=_v0$1.y.toFixed(4),rt=_v0$1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${nt}, ${tt}, ${rt} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(nt){return[nt.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",nt.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(nt){const tt=[];for(const rt in nt){const st=nt[rt];st!==!1&&tt.push("#define "+rt+" "+st)}return tt.join(`
`)}function fetchAttributeLocations(nt,tt){const rt={},st=nt.getProgramParameter(tt,nt.ACTIVE_ATTRIBUTES);for(let at=0;at<st;at++){const lt=nt.getActiveAttrib(tt,at),dt=lt.name;let yt=1;lt.type===nt.FLOAT_MAT2&&(yt=2),lt.type===nt.FLOAT_MAT3&&(yt=3),lt.type===nt.FLOAT_MAT4&&(yt=4),rt[dt]={type:lt.type,location:nt.getAttribLocation(tt,dt),locationSize:yt}}return rt}function filterEmptyLine(nt){return nt!==""}function replaceLightNums(nt,tt){const rt=tt.numSpotLightShadows+tt.numSpotLightMaps-tt.numSpotLightShadowsWithMaps;return nt.replace(/NUM_DIR_LIGHTS/g,tt.numDirLights).replace(/NUM_SPOT_LIGHTS/g,tt.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,tt.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,rt).replace(/NUM_RECT_AREA_LIGHTS/g,tt.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,tt.numPointLights).replace(/NUM_HEMI_LIGHTS/g,tt.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,tt.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,tt.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,tt.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,tt.numPointLightShadows)}function replaceClippingPlaneNums(nt,tt){return nt.replace(/NUM_CLIPPING_PLANES/g,tt.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,tt.numClippingPlanes-tt.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(nt){return nt.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(nt,tt){let rt=ShaderChunk[tt];if(rt===void 0){const st=shaderChunkMap.get(tt);if(st!==void 0)rt=ShaderChunk[st],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',tt,st);else throw new Error("Can not resolve #include <"+tt+">")}return resolveIncludes(rt)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(nt){return nt.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(nt,tt,rt,st){let at="";for(let lt=parseInt(tt);lt<parseInt(rt);lt++)at+=st.replace(/\[\s*i\s*\]/g,"[ "+lt+" ]").replace(/UNROLLED_LOOP_INDEX/g,lt);return at}function generatePrecision(nt){let tt=`precision ${nt.precision} float;
	precision ${nt.precision} int;
	precision ${nt.precision} sampler2D;
	precision ${nt.precision} samplerCube;
	precision ${nt.precision} sampler3D;
	precision ${nt.precision} sampler2DArray;
	precision ${nt.precision} sampler2DShadow;
	precision ${nt.precision} samplerCubeShadow;
	precision ${nt.precision} sampler2DArrayShadow;
	precision ${nt.precision} isampler2D;
	precision ${nt.precision} isampler3D;
	precision ${nt.precision} isamplerCube;
	precision ${nt.precision} isampler2DArray;
	precision ${nt.precision} usampler2D;
	precision ${nt.precision} usampler3D;
	precision ${nt.precision} usamplerCube;
	precision ${nt.precision} usampler2DArray;
	`;return nt.precision==="highp"?tt+=`
#define HIGH_PRECISION`:nt.precision==="mediump"?tt+=`
#define MEDIUM_PRECISION`:nt.precision==="lowp"&&(tt+=`
#define LOW_PRECISION`),tt}function generateShadowMapTypeDefine(nt){let tt="SHADOWMAP_TYPE_BASIC";return nt.shadowMapType===PCFShadowMap?tt="SHADOWMAP_TYPE_PCF":nt.shadowMapType===PCFSoftShadowMap?tt="SHADOWMAP_TYPE_PCF_SOFT":nt.shadowMapType===VSMShadowMap&&(tt="SHADOWMAP_TYPE_VSM"),tt}function generateEnvMapTypeDefine(nt){let tt="ENVMAP_TYPE_CUBE";if(nt.envMap)switch(nt.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:tt="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:tt="ENVMAP_TYPE_CUBE_UV";break}return tt}function generateEnvMapModeDefine(nt){let tt="ENVMAP_MODE_REFLECTION";if(nt.envMap)switch(nt.envMapMode){case CubeRefractionMapping:tt="ENVMAP_MODE_REFRACTION";break}return tt}function generateEnvMapBlendingDefine(nt){let tt="ENVMAP_BLENDING_NONE";if(nt.envMap)switch(nt.combine){case MultiplyOperation:tt="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:tt="ENVMAP_BLENDING_MIX";break;case AddOperation:tt="ENVMAP_BLENDING_ADD";break}return tt}function generateCubeUVSize(nt){const tt=nt.envMapCubeUVHeight;if(tt===null)return null;const rt=Math.log2(tt)-2,st=1/tt;return{texelWidth:1/(3*Math.max(Math.pow(2,rt),7*16)),texelHeight:st,maxMip:rt}}function WebGLProgram(nt,tt,rt,st){const at=nt.getContext(),lt=rt.defines;let dt=rt.vertexShader,yt=rt.fragmentShader;const vt=generateShadowMapTypeDefine(rt),_t=generateEnvMapTypeDefine(rt),bt=generateEnvMapModeDefine(rt),Mt=generateEnvMapBlendingDefine(rt),Ct=generateCubeUVSize(rt),Tt=generateVertexExtensions(rt),$t=generateDefines(lt),Rt=at.createProgram();let Et,wt,Pt=rt.glslVersion?"#version "+rt.glslVersion+`
`:"";rt.isRawShaderMaterial?(Et=["#define SHADER_TYPE "+rt.shaderType,"#define SHADER_NAME "+rt.shaderName,$t].filter(filterEmptyLine).join(`
`),Et.length>0&&(Et+=`
`),wt=["#define SHADER_TYPE "+rt.shaderType,"#define SHADER_NAME "+rt.shaderName,$t].filter(filterEmptyLine).join(`
`),wt.length>0&&(wt+=`
`)):(Et=[generatePrecision(rt),"#define SHADER_TYPE "+rt.shaderType,"#define SHADER_NAME "+rt.shaderName,$t,rt.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",rt.batching?"#define USE_BATCHING":"",rt.batchingColor?"#define USE_BATCHING_COLOR":"",rt.instancing?"#define USE_INSTANCING":"",rt.instancingColor?"#define USE_INSTANCING_COLOR":"",rt.instancingMorph?"#define USE_INSTANCING_MORPH":"",rt.useFog&&rt.fog?"#define USE_FOG":"",rt.useFog&&rt.fogExp2?"#define FOG_EXP2":"",rt.map?"#define USE_MAP":"",rt.envMap?"#define USE_ENVMAP":"",rt.envMap?"#define "+bt:"",rt.lightMap?"#define USE_LIGHTMAP":"",rt.aoMap?"#define USE_AOMAP":"",rt.bumpMap?"#define USE_BUMPMAP":"",rt.normalMap?"#define USE_NORMALMAP":"",rt.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",rt.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",rt.displacementMap?"#define USE_DISPLACEMENTMAP":"",rt.emissiveMap?"#define USE_EMISSIVEMAP":"",rt.anisotropy?"#define USE_ANISOTROPY":"",rt.anisotropyMap?"#define USE_ANISOTROPYMAP":"",rt.clearcoatMap?"#define USE_CLEARCOATMAP":"",rt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",rt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",rt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",rt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",rt.specularMap?"#define USE_SPECULARMAP":"",rt.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",rt.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",rt.roughnessMap?"#define USE_ROUGHNESSMAP":"",rt.metalnessMap?"#define USE_METALNESSMAP":"",rt.alphaMap?"#define USE_ALPHAMAP":"",rt.alphaHash?"#define USE_ALPHAHASH":"",rt.transmission?"#define USE_TRANSMISSION":"",rt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",rt.thicknessMap?"#define USE_THICKNESSMAP":"",rt.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",rt.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",rt.mapUv?"#define MAP_UV "+rt.mapUv:"",rt.alphaMapUv?"#define ALPHAMAP_UV "+rt.alphaMapUv:"",rt.lightMapUv?"#define LIGHTMAP_UV "+rt.lightMapUv:"",rt.aoMapUv?"#define AOMAP_UV "+rt.aoMapUv:"",rt.emissiveMapUv?"#define EMISSIVEMAP_UV "+rt.emissiveMapUv:"",rt.bumpMapUv?"#define BUMPMAP_UV "+rt.bumpMapUv:"",rt.normalMapUv?"#define NORMALMAP_UV "+rt.normalMapUv:"",rt.displacementMapUv?"#define DISPLACEMENTMAP_UV "+rt.displacementMapUv:"",rt.metalnessMapUv?"#define METALNESSMAP_UV "+rt.metalnessMapUv:"",rt.roughnessMapUv?"#define ROUGHNESSMAP_UV "+rt.roughnessMapUv:"",rt.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+rt.anisotropyMapUv:"",rt.clearcoatMapUv?"#define CLEARCOATMAP_UV "+rt.clearcoatMapUv:"",rt.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+rt.clearcoatNormalMapUv:"",rt.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+rt.clearcoatRoughnessMapUv:"",rt.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+rt.iridescenceMapUv:"",rt.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+rt.iridescenceThicknessMapUv:"",rt.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+rt.sheenColorMapUv:"",rt.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+rt.sheenRoughnessMapUv:"",rt.specularMapUv?"#define SPECULARMAP_UV "+rt.specularMapUv:"",rt.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+rt.specularColorMapUv:"",rt.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+rt.specularIntensityMapUv:"",rt.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+rt.transmissionMapUv:"",rt.thicknessMapUv?"#define THICKNESSMAP_UV "+rt.thicknessMapUv:"",rt.vertexTangents&&rt.flatShading===!1?"#define USE_TANGENT":"",rt.vertexColors?"#define USE_COLOR":"",rt.vertexAlphas?"#define USE_COLOR_ALPHA":"",rt.vertexUv1s?"#define USE_UV1":"",rt.vertexUv2s?"#define USE_UV2":"",rt.vertexUv3s?"#define USE_UV3":"",rt.pointsUvs?"#define USE_POINTS_UV":"",rt.flatShading?"#define FLAT_SHADED":"",rt.skinning?"#define USE_SKINNING":"",rt.morphTargets?"#define USE_MORPHTARGETS":"",rt.morphNormals&&rt.flatShading===!1?"#define USE_MORPHNORMALS":"",rt.morphColors?"#define USE_MORPHCOLORS":"",rt.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+rt.morphTextureStride:"",rt.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+rt.morphTargetsCount:"",rt.doubleSided?"#define DOUBLE_SIDED":"",rt.flipSided?"#define FLIP_SIDED":"",rt.shadowMapEnabled?"#define USE_SHADOWMAP":"",rt.shadowMapEnabled?"#define "+vt:"",rt.sizeAttenuation?"#define USE_SIZEATTENUATION":"",rt.numLightProbes>0?"#define USE_LIGHT_PROBES":"",rt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",rt.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),wt=[generatePrecision(rt),"#define SHADER_TYPE "+rt.shaderType,"#define SHADER_NAME "+rt.shaderName,$t,rt.useFog&&rt.fog?"#define USE_FOG":"",rt.useFog&&rt.fogExp2?"#define FOG_EXP2":"",rt.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",rt.map?"#define USE_MAP":"",rt.matcap?"#define USE_MATCAP":"",rt.envMap?"#define USE_ENVMAP":"",rt.envMap?"#define "+_t:"",rt.envMap?"#define "+bt:"",rt.envMap?"#define "+Mt:"",Ct?"#define CUBEUV_TEXEL_WIDTH "+Ct.texelWidth:"",Ct?"#define CUBEUV_TEXEL_HEIGHT "+Ct.texelHeight:"",Ct?"#define CUBEUV_MAX_MIP "+Ct.maxMip+".0":"",rt.lightMap?"#define USE_LIGHTMAP":"",rt.aoMap?"#define USE_AOMAP":"",rt.bumpMap?"#define USE_BUMPMAP":"",rt.normalMap?"#define USE_NORMALMAP":"",rt.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",rt.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",rt.emissiveMap?"#define USE_EMISSIVEMAP":"",rt.anisotropy?"#define USE_ANISOTROPY":"",rt.anisotropyMap?"#define USE_ANISOTROPYMAP":"",rt.clearcoat?"#define USE_CLEARCOAT":"",rt.clearcoatMap?"#define USE_CLEARCOATMAP":"",rt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",rt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",rt.dispersion?"#define USE_DISPERSION":"",rt.iridescence?"#define USE_IRIDESCENCE":"",rt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",rt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",rt.specularMap?"#define USE_SPECULARMAP":"",rt.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",rt.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",rt.roughnessMap?"#define USE_ROUGHNESSMAP":"",rt.metalnessMap?"#define USE_METALNESSMAP":"",rt.alphaMap?"#define USE_ALPHAMAP":"",rt.alphaTest?"#define USE_ALPHATEST":"",rt.alphaHash?"#define USE_ALPHAHASH":"",rt.sheen?"#define USE_SHEEN":"",rt.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",rt.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",rt.transmission?"#define USE_TRANSMISSION":"",rt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",rt.thicknessMap?"#define USE_THICKNESSMAP":"",rt.vertexTangents&&rt.flatShading===!1?"#define USE_TANGENT":"",rt.vertexColors||rt.instancingColor||rt.batchingColor?"#define USE_COLOR":"",rt.vertexAlphas?"#define USE_COLOR_ALPHA":"",rt.vertexUv1s?"#define USE_UV1":"",rt.vertexUv2s?"#define USE_UV2":"",rt.vertexUv3s?"#define USE_UV3":"",rt.pointsUvs?"#define USE_POINTS_UV":"",rt.gradientMap?"#define USE_GRADIENTMAP":"",rt.flatShading?"#define FLAT_SHADED":"",rt.doubleSided?"#define DOUBLE_SIDED":"",rt.flipSided?"#define FLIP_SIDED":"",rt.shadowMapEnabled?"#define USE_SHADOWMAP":"",rt.shadowMapEnabled?"#define "+vt:"",rt.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",rt.numLightProbes>0?"#define USE_LIGHT_PROBES":"",rt.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",rt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",rt.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",rt.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",rt.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",rt.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",rt.toneMapping):"",rt.dithering?"#define DITHERING":"",rt.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",rt.outputColorSpace),getLuminanceFunction(),rt.useDepthPacking?"#define DEPTH_PACKING "+rt.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),dt=resolveIncludes(dt),dt=replaceLightNums(dt,rt),dt=replaceClippingPlaneNums(dt,rt),yt=resolveIncludes(yt),yt=replaceLightNums(yt,rt),yt=replaceClippingPlaneNums(yt,rt),dt=unrollLoops(dt),yt=unrollLoops(yt),rt.isRawShaderMaterial!==!0&&(Pt=`#version 300 es
`,Et=[Tt,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Et,wt=["#define varying in",rt.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",rt.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+wt);const Ft=Pt+Et+dt,Nt=Pt+wt+yt,Ot=WebGLShader(at,at.VERTEX_SHADER,Ft),Bt=WebGLShader(at,at.FRAGMENT_SHADER,Nt);at.attachShader(Rt,Ot),at.attachShader(Rt,Bt),rt.index0AttributeName!==void 0?at.bindAttribLocation(Rt,0,rt.index0AttributeName):rt.morphTargets===!0&&at.bindAttribLocation(Rt,0,"position"),at.linkProgram(Rt);function Xt(nn){if(nt.debug.checkShaderErrors){const cn=at.getProgramInfoLog(Rt).trim(),an=at.getShaderInfoLog(Ot).trim(),mn=at.getShaderInfoLog(Bt).trim();let En=!0,Cn=!0;if(at.getProgramParameter(Rt,at.LINK_STATUS)===!1)if(En=!1,typeof nt.debug.onShaderError=="function")nt.debug.onShaderError(at,Rt,Ot,Bt);else{const Mn=getShaderErrors(at,Ot,"vertex"),un=getShaderErrors(at,Bt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+at.getError()+" - VALIDATE_STATUS "+at.getProgramParameter(Rt,at.VALIDATE_STATUS)+`

Material Name: `+nn.name+`
Material Type: `+nn.type+`

Program Info Log: `+cn+`
`+Mn+`
`+un)}else cn!==""?console.warn("THREE.WebGLProgram: Program Info Log:",cn):(an===""||mn==="")&&(Cn=!1);Cn&&(nn.diagnostics={runnable:En,programLog:cn,vertexShader:{log:an,prefix:Et},fragmentShader:{log:mn,prefix:wt}})}at.deleteShader(Ot),at.deleteShader(Bt),Zt=new WebGLUniforms(at,Rt),rn=fetchAttributeLocations(at,Rt)}let Zt;this.getUniforms=function(){return Zt===void 0&&Xt(this),Zt};let rn;this.getAttributes=function(){return rn===void 0&&Xt(this),rn};let Gt=rt.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Gt===!1&&(Gt=at.getProgramParameter(Rt,COMPLETION_STATUS_KHR)),Gt},this.destroy=function(){st.releaseStatesOfProgram(this),at.deleteProgram(Rt),this.program=void 0},this.type=rt.shaderType,this.name=rt.shaderName,this.id=programIdCount++,this.cacheKey=tt,this.usedTimes=1,this.program=Rt,this.vertexShader=Ot,this.fragmentShader=Bt,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(tt){const rt=tt.vertexShader,st=tt.fragmentShader,at=this._getShaderStage(rt),lt=this._getShaderStage(st),dt=this._getShaderCacheForMaterial(tt);return dt.has(at)===!1&&(dt.add(at),at.usedTimes++),dt.has(lt)===!1&&(dt.add(lt),lt.usedTimes++),this}remove(tt){const rt=this.materialCache.get(tt);for(const st of rt)st.usedTimes--,st.usedTimes===0&&this.shaderCache.delete(st.code);return this.materialCache.delete(tt),this}getVertexShaderID(tt){return this._getShaderStage(tt.vertexShader).id}getFragmentShaderID(tt){return this._getShaderStage(tt.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(tt){const rt=this.materialCache;let st=rt.get(tt);return st===void 0&&(st=new Set,rt.set(tt,st)),st}_getShaderStage(tt){const rt=this.shaderCache;let st=rt.get(tt);return st===void 0&&(st=new WebGLShaderStage(tt),rt.set(tt,st)),st}}class WebGLShaderStage{constructor(tt){this.id=_id$1++,this.code=tt,this.usedTimes=0}}function WebGLPrograms(nt,tt,rt,st,at,lt,dt){const yt=new Layers,vt=new WebGLShaderCache,_t=new Set,bt=[],Mt=at.logarithmicDepthBuffer,Ct=at.reverseDepthBuffer,Tt=at.vertexTextures;let $t=at.precision;const Rt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Et(Gt){return _t.add(Gt),Gt===0?"uv":`uv${Gt}`}function wt(Gt,nn,cn,an,mn){const En=an.fog,Cn=mn.geometry,Mn=Gt.isMeshStandardMaterial?an.environment:null,un=(Gt.isMeshStandardMaterial?rt:tt).get(Gt.envMap||Mn),Tn=un&&un.mapping===CubeUVReflectionMapping?un.image.height:null,Pn=Rt[Gt.type];Gt.precision!==null&&($t=at.getMaxPrecision(Gt.precision),$t!==Gt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Gt.precision,"not supported, using",$t,"instead."));const dn=Cn.morphAttributes.position||Cn.morphAttributes.normal||Cn.morphAttributes.color,Un=dn!==void 0?dn.length:0;let qn=0;Cn.morphAttributes.position!==void 0&&(qn=1),Cn.morphAttributes.normal!==void 0&&(qn=2),Cn.morphAttributes.color!==void 0&&(qn=3);let In,Wn,ar,fr;if(Pn){const hs=ShaderLib[Pn];In=hs.vertexShader,Wn=hs.fragmentShader}else In=Gt.vertexShader,Wn=Gt.fragmentShader,vt.update(Gt),ar=vt.getVertexShaderID(Gt),fr=vt.getFragmentShaderID(Gt);const mr=nt.getRenderTarget(),vr=mn.isInstancedMesh===!0,Ar=mn.isBatchedMesh===!0,$r=!!Gt.map,Mr=!!Gt.matcap,Jn=!!un,hr=!!Gt.aoMap,wr=!!Gt.lightMap,Nr=!!Gt.bumpMap,Fr=!!Gt.normalMap,Yr=!!Gt.displacementMap,cs=!!Gt.emissiveMap,cr=!!Gt.metalnessMap,Qn=!!Gt.roughnessMap,_r=Gt.anisotropy>0,Ir=Gt.clearcoat>0,pr=Gt.dispersion>0,Tr=Gt.iridescence>0,Wr=Gt.sheen>0,Kn=Gt.transmission>0,rr=_r&&!!Gt.anisotropyMap,ur=Ir&&!!Gt.clearcoatMap,Sr=Ir&&!!Gt.clearcoatNormalMap,gr=Ir&&!!Gt.clearcoatRoughnessMap,Gr=Tr&&!!Gt.iridescenceMap,jr=Tr&&!!Gt.iridescenceThicknessMap,er=Wr&&!!Gt.sheenColorMap,yr=Wr&&!!Gt.sheenRoughnessMap,Er=!!Gt.specularMap,Hr=!!Gt.specularColorMap,lr=!!Gt.specularIntensityMap,Br=Kn&&!!Gt.transmissionMap,Hn=Kn&&!!Gt.thicknessMap,kr=!!Gt.gradientMap,Cs=!!Gt.alphaMap,Fn=Gt.alphaTest>0,Ur=!!Gt.alphaHash,Vr=!!Gt.extensions;let dr=NoToneMapping;Gt.toneMapped&&(mr===null||mr.isXRRenderTarget===!0)&&(dr=nt.toneMapping);const Cr={shaderID:Pn,shaderType:Gt.type,shaderName:Gt.name,vertexShader:In,fragmentShader:Wn,defines:Gt.defines,customVertexShaderID:ar,customFragmentShaderID:fr,isRawShaderMaterial:Gt.isRawShaderMaterial===!0,glslVersion:Gt.glslVersion,precision:$t,batching:Ar,batchingColor:Ar&&mn._colorsTexture!==null,instancing:vr,instancingColor:vr&&mn.instanceColor!==null,instancingMorph:vr&&mn.morphTexture!==null,supportsVertexTextures:Tt,outputColorSpace:mr===null?nt.outputColorSpace:mr.isXRRenderTarget===!0?mr.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!Gt.alphaToCoverage,map:$r,matcap:Mr,envMap:Jn,envMapMode:Jn&&un.mapping,envMapCubeUVHeight:Tn,aoMap:hr,lightMap:wr,bumpMap:Nr,normalMap:Fr,displacementMap:Tt&&Yr,emissiveMap:cs,normalMapObjectSpace:Fr&&Gt.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:Fr&&Gt.normalMapType===TangentSpaceNormalMap,metalnessMap:cr,roughnessMap:Qn,anisotropy:_r,anisotropyMap:rr,clearcoat:Ir,clearcoatMap:ur,clearcoatNormalMap:Sr,clearcoatRoughnessMap:gr,dispersion:pr,iridescence:Tr,iridescenceMap:Gr,iridescenceThicknessMap:jr,sheen:Wr,sheenColorMap:er,sheenRoughnessMap:yr,specularMap:Er,specularColorMap:Hr,specularIntensityMap:lr,transmission:Kn,transmissionMap:Br,thicknessMap:Hn,gradientMap:kr,opaque:Gt.transparent===!1&&Gt.blending===NormalBlending&&Gt.alphaToCoverage===!1,alphaMap:Cs,alphaTest:Fn,alphaHash:Ur,combine:Gt.combine,mapUv:$r&&Et(Gt.map.channel),aoMapUv:hr&&Et(Gt.aoMap.channel),lightMapUv:wr&&Et(Gt.lightMap.channel),bumpMapUv:Nr&&Et(Gt.bumpMap.channel),normalMapUv:Fr&&Et(Gt.normalMap.channel),displacementMapUv:Yr&&Et(Gt.displacementMap.channel),emissiveMapUv:cs&&Et(Gt.emissiveMap.channel),metalnessMapUv:cr&&Et(Gt.metalnessMap.channel),roughnessMapUv:Qn&&Et(Gt.roughnessMap.channel),anisotropyMapUv:rr&&Et(Gt.anisotropyMap.channel),clearcoatMapUv:ur&&Et(Gt.clearcoatMap.channel),clearcoatNormalMapUv:Sr&&Et(Gt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:gr&&Et(Gt.clearcoatRoughnessMap.channel),iridescenceMapUv:Gr&&Et(Gt.iridescenceMap.channel),iridescenceThicknessMapUv:jr&&Et(Gt.iridescenceThicknessMap.channel),sheenColorMapUv:er&&Et(Gt.sheenColorMap.channel),sheenRoughnessMapUv:yr&&Et(Gt.sheenRoughnessMap.channel),specularMapUv:Er&&Et(Gt.specularMap.channel),specularColorMapUv:Hr&&Et(Gt.specularColorMap.channel),specularIntensityMapUv:lr&&Et(Gt.specularIntensityMap.channel),transmissionMapUv:Br&&Et(Gt.transmissionMap.channel),thicknessMapUv:Hn&&Et(Gt.thicknessMap.channel),alphaMapUv:Cs&&Et(Gt.alphaMap.channel),vertexTangents:!!Cn.attributes.tangent&&(Fr||_r),vertexColors:Gt.vertexColors,vertexAlphas:Gt.vertexColors===!0&&!!Cn.attributes.color&&Cn.attributes.color.itemSize===4,pointsUvs:mn.isPoints===!0&&!!Cn.attributes.uv&&($r||Cs),fog:!!En,useFog:Gt.fog===!0,fogExp2:!!En&&En.isFogExp2,flatShading:Gt.flatShading===!0,sizeAttenuation:Gt.sizeAttenuation===!0,logarithmicDepthBuffer:Mt,reverseDepthBuffer:Ct,skinning:mn.isSkinnedMesh===!0,morphTargets:Cn.morphAttributes.position!==void 0,morphNormals:Cn.morphAttributes.normal!==void 0,morphColors:Cn.morphAttributes.color!==void 0,morphTargetsCount:Un,morphTextureStride:qn,numDirLights:nn.directional.length,numPointLights:nn.point.length,numSpotLights:nn.spot.length,numSpotLightMaps:nn.spotLightMap.length,numRectAreaLights:nn.rectArea.length,numHemiLights:nn.hemi.length,numDirLightShadows:nn.directionalShadowMap.length,numPointLightShadows:nn.pointShadowMap.length,numSpotLightShadows:nn.spotShadowMap.length,numSpotLightShadowsWithMaps:nn.numSpotLightShadowsWithMaps,numLightProbes:nn.numLightProbes,numClippingPlanes:dt.numPlanes,numClipIntersection:dt.numIntersection,dithering:Gt.dithering,shadowMapEnabled:nt.shadowMap.enabled&&cn.length>0,shadowMapType:nt.shadowMap.type,toneMapping:dr,decodeVideoTexture:$r&&Gt.map.isVideoTexture===!0&&ColorManagement.getTransfer(Gt.map.colorSpace)===SRGBTransfer,premultipliedAlpha:Gt.premultipliedAlpha,doubleSided:Gt.side===DoubleSide,flipSided:Gt.side===BackSide,useDepthPacking:Gt.depthPacking>=0,depthPacking:Gt.depthPacking||0,index0AttributeName:Gt.index0AttributeName,extensionClipCullDistance:Vr&&Gt.extensions.clipCullDistance===!0&&st.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Vr&&Gt.extensions.multiDraw===!0||Ar)&&st.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:st.has("KHR_parallel_shader_compile"),customProgramCacheKey:Gt.customProgramCacheKey()};return Cr.vertexUv1s=_t.has(1),Cr.vertexUv2s=_t.has(2),Cr.vertexUv3s=_t.has(3),_t.clear(),Cr}function Pt(Gt){const nn=[];if(Gt.shaderID?nn.push(Gt.shaderID):(nn.push(Gt.customVertexShaderID),nn.push(Gt.customFragmentShaderID)),Gt.defines!==void 0)for(const cn in Gt.defines)nn.push(cn),nn.push(Gt.defines[cn]);return Gt.isRawShaderMaterial===!1&&(Ft(nn,Gt),Nt(nn,Gt),nn.push(nt.outputColorSpace)),nn.push(Gt.customProgramCacheKey),nn.join()}function Ft(Gt,nn){Gt.push(nn.precision),Gt.push(nn.outputColorSpace),Gt.push(nn.envMapMode),Gt.push(nn.envMapCubeUVHeight),Gt.push(nn.mapUv),Gt.push(nn.alphaMapUv),Gt.push(nn.lightMapUv),Gt.push(nn.aoMapUv),Gt.push(nn.bumpMapUv),Gt.push(nn.normalMapUv),Gt.push(nn.displacementMapUv),Gt.push(nn.emissiveMapUv),Gt.push(nn.metalnessMapUv),Gt.push(nn.roughnessMapUv),Gt.push(nn.anisotropyMapUv),Gt.push(nn.clearcoatMapUv),Gt.push(nn.clearcoatNormalMapUv),Gt.push(nn.clearcoatRoughnessMapUv),Gt.push(nn.iridescenceMapUv),Gt.push(nn.iridescenceThicknessMapUv),Gt.push(nn.sheenColorMapUv),Gt.push(nn.sheenRoughnessMapUv),Gt.push(nn.specularMapUv),Gt.push(nn.specularColorMapUv),Gt.push(nn.specularIntensityMapUv),Gt.push(nn.transmissionMapUv),Gt.push(nn.thicknessMapUv),Gt.push(nn.combine),Gt.push(nn.fogExp2),Gt.push(nn.sizeAttenuation),Gt.push(nn.morphTargetsCount),Gt.push(nn.morphAttributeCount),Gt.push(nn.numDirLights),Gt.push(nn.numPointLights),Gt.push(nn.numSpotLights),Gt.push(nn.numSpotLightMaps),Gt.push(nn.numHemiLights),Gt.push(nn.numRectAreaLights),Gt.push(nn.numDirLightShadows),Gt.push(nn.numPointLightShadows),Gt.push(nn.numSpotLightShadows),Gt.push(nn.numSpotLightShadowsWithMaps),Gt.push(nn.numLightProbes),Gt.push(nn.shadowMapType),Gt.push(nn.toneMapping),Gt.push(nn.numClippingPlanes),Gt.push(nn.numClipIntersection),Gt.push(nn.depthPacking)}function Nt(Gt,nn){yt.disableAll(),nn.supportsVertexTextures&&yt.enable(0),nn.instancing&&yt.enable(1),nn.instancingColor&&yt.enable(2),nn.instancingMorph&&yt.enable(3),nn.matcap&&yt.enable(4),nn.envMap&&yt.enable(5),nn.normalMapObjectSpace&&yt.enable(6),nn.normalMapTangentSpace&&yt.enable(7),nn.clearcoat&&yt.enable(8),nn.iridescence&&yt.enable(9),nn.alphaTest&&yt.enable(10),nn.vertexColors&&yt.enable(11),nn.vertexAlphas&&yt.enable(12),nn.vertexUv1s&&yt.enable(13),nn.vertexUv2s&&yt.enable(14),nn.vertexUv3s&&yt.enable(15),nn.vertexTangents&&yt.enable(16),nn.anisotropy&&yt.enable(17),nn.alphaHash&&yt.enable(18),nn.batching&&yt.enable(19),nn.dispersion&&yt.enable(20),nn.batchingColor&&yt.enable(21),Gt.push(yt.mask),yt.disableAll(),nn.fog&&yt.enable(0),nn.useFog&&yt.enable(1),nn.flatShading&&yt.enable(2),nn.logarithmicDepthBuffer&&yt.enable(3),nn.reverseDepthBuffer&&yt.enable(4),nn.skinning&&yt.enable(5),nn.morphTargets&&yt.enable(6),nn.morphNormals&&yt.enable(7),nn.morphColors&&yt.enable(8),nn.premultipliedAlpha&&yt.enable(9),nn.shadowMapEnabled&&yt.enable(10),nn.doubleSided&&yt.enable(11),nn.flipSided&&yt.enable(12),nn.useDepthPacking&&yt.enable(13),nn.dithering&&yt.enable(14),nn.transmission&&yt.enable(15),nn.sheen&&yt.enable(16),nn.opaque&&yt.enable(17),nn.pointsUvs&&yt.enable(18),nn.decodeVideoTexture&&yt.enable(19),nn.alphaToCoverage&&yt.enable(20),Gt.push(yt.mask)}function Ot(Gt){const nn=Rt[Gt.type];let cn;if(nn){const an=ShaderLib[nn];cn=UniformsUtils.clone(an.uniforms)}else cn=Gt.uniforms;return cn}function Bt(Gt,nn){let cn;for(let an=0,mn=bt.length;an<mn;an++){const En=bt[an];if(En.cacheKey===nn){cn=En,++cn.usedTimes;break}}return cn===void 0&&(cn=new WebGLProgram(nt,nn,Gt,lt),bt.push(cn)),cn}function Xt(Gt){if(--Gt.usedTimes===0){const nn=bt.indexOf(Gt);bt[nn]=bt[bt.length-1],bt.pop(),Gt.destroy()}}function Zt(Gt){vt.remove(Gt)}function rn(){vt.dispose()}return{getParameters:wt,getProgramCacheKey:Pt,getUniforms:Ot,acquireProgram:Bt,releaseProgram:Xt,releaseShaderCache:Zt,programs:bt,dispose:rn}}function WebGLProperties(){let nt=new WeakMap;function tt(dt){return nt.has(dt)}function rt(dt){let yt=nt.get(dt);return yt===void 0&&(yt={},nt.set(dt,yt)),yt}function st(dt){nt.delete(dt)}function at(dt,yt,vt){nt.get(dt)[yt]=vt}function lt(){nt=new WeakMap}return{has:tt,get:rt,remove:st,update:at,dispose:lt}}function painterSortStable(nt,tt){return nt.groupOrder!==tt.groupOrder?nt.groupOrder-tt.groupOrder:nt.renderOrder!==tt.renderOrder?nt.renderOrder-tt.renderOrder:nt.material.id!==tt.material.id?nt.material.id-tt.material.id:nt.z!==tt.z?nt.z-tt.z:nt.id-tt.id}function reversePainterSortStable(nt,tt){return nt.groupOrder!==tt.groupOrder?nt.groupOrder-tt.groupOrder:nt.renderOrder!==tt.renderOrder?nt.renderOrder-tt.renderOrder:nt.z!==tt.z?tt.z-nt.z:nt.id-tt.id}function WebGLRenderList(){const nt=[];let tt=0;const rt=[],st=[],at=[];function lt(){tt=0,rt.length=0,st.length=0,at.length=0}function dt(Mt,Ct,Tt,$t,Rt,Et){let wt=nt[tt];return wt===void 0?(wt={id:Mt.id,object:Mt,geometry:Ct,material:Tt,groupOrder:$t,renderOrder:Mt.renderOrder,z:Rt,group:Et},nt[tt]=wt):(wt.id=Mt.id,wt.object=Mt,wt.geometry=Ct,wt.material=Tt,wt.groupOrder=$t,wt.renderOrder=Mt.renderOrder,wt.z=Rt,wt.group=Et),tt++,wt}function yt(Mt,Ct,Tt,$t,Rt,Et){const wt=dt(Mt,Ct,Tt,$t,Rt,Et);Tt.transmission>0?st.push(wt):Tt.transparent===!0?at.push(wt):rt.push(wt)}function vt(Mt,Ct,Tt,$t,Rt,Et){const wt=dt(Mt,Ct,Tt,$t,Rt,Et);Tt.transmission>0?st.unshift(wt):Tt.transparent===!0?at.unshift(wt):rt.unshift(wt)}function _t(Mt,Ct){rt.length>1&&rt.sort(Mt||painterSortStable),st.length>1&&st.sort(Ct||reversePainterSortStable),at.length>1&&at.sort(Ct||reversePainterSortStable)}function bt(){for(let Mt=tt,Ct=nt.length;Mt<Ct;Mt++){const Tt=nt[Mt];if(Tt.id===null)break;Tt.id=null,Tt.object=null,Tt.geometry=null,Tt.material=null,Tt.group=null}}return{opaque:rt,transmissive:st,transparent:at,init:lt,push:yt,unshift:vt,finish:bt,sort:_t}}function WebGLRenderLists(){let nt=new WeakMap;function tt(st,at){const lt=nt.get(st);let dt;return lt===void 0?(dt=new WebGLRenderList,nt.set(st,[dt])):at>=lt.length?(dt=new WebGLRenderList,lt.push(dt)):dt=lt[at],dt}function rt(){nt=new WeakMap}return{get:tt,dispose:rt}}function UniformsCache(){const nt={};return{get:function(tt){if(nt[tt.id]!==void 0)return nt[tt.id];let rt;switch(tt.type){case"DirectionalLight":rt={direction:new Vector3,color:new Color$1};break;case"SpotLight":rt={position:new Vector3,direction:new Vector3,color:new Color$1,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":rt={position:new Vector3,color:new Color$1,distance:0,decay:0};break;case"HemisphereLight":rt={direction:new Vector3,skyColor:new Color$1,groundColor:new Color$1};break;case"RectAreaLight":rt={color:new Color$1,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return nt[tt.id]=rt,rt}}}function ShadowUniformsCache(){const nt={};return{get:function(tt){if(nt[tt.id]!==void 0)return nt[tt.id];let rt;switch(tt.type){case"DirectionalLight":rt={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":rt={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":rt={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return nt[tt.id]=rt,rt}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(nt,tt){return(tt.castShadow?2:0)-(nt.castShadow?2:0)+(tt.map?1:0)-(nt.map?1:0)}function WebGLLights(nt){const tt=new UniformsCache,rt=ShadowUniformsCache(),st={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let _t=0;_t<9;_t++)st.probe.push(new Vector3);const at=new Vector3,lt=new Matrix4,dt=new Matrix4;function yt(_t){let bt=0,Mt=0,Ct=0;for(let rn=0;rn<9;rn++)st.probe[rn].set(0,0,0);let Tt=0,$t=0,Rt=0,Et=0,wt=0,Pt=0,Ft=0,Nt=0,Ot=0,Bt=0,Xt=0;_t.sort(shadowCastingAndTexturingLightsFirst);for(let rn=0,Gt=_t.length;rn<Gt;rn++){const nn=_t[rn],cn=nn.color,an=nn.intensity,mn=nn.distance,En=nn.shadow&&nn.shadow.map?nn.shadow.map.texture:null;if(nn.isAmbientLight)bt+=cn.r*an,Mt+=cn.g*an,Ct+=cn.b*an;else if(nn.isLightProbe){for(let Cn=0;Cn<9;Cn++)st.probe[Cn].addScaledVector(nn.sh.coefficients[Cn],an);Xt++}else if(nn.isDirectionalLight){const Cn=tt.get(nn);if(Cn.color.copy(nn.color).multiplyScalar(nn.intensity),nn.castShadow){const Mn=nn.shadow,un=rt.get(nn);un.shadowIntensity=Mn.intensity,un.shadowBias=Mn.bias,un.shadowNormalBias=Mn.normalBias,un.shadowRadius=Mn.radius,un.shadowMapSize=Mn.mapSize,st.directionalShadow[Tt]=un,st.directionalShadowMap[Tt]=En,st.directionalShadowMatrix[Tt]=nn.shadow.matrix,Pt++}st.directional[Tt]=Cn,Tt++}else if(nn.isSpotLight){const Cn=tt.get(nn);Cn.position.setFromMatrixPosition(nn.matrixWorld),Cn.color.copy(cn).multiplyScalar(an),Cn.distance=mn,Cn.coneCos=Math.cos(nn.angle),Cn.penumbraCos=Math.cos(nn.angle*(1-nn.penumbra)),Cn.decay=nn.decay,st.spot[Rt]=Cn;const Mn=nn.shadow;if(nn.map&&(st.spotLightMap[Ot]=nn.map,Ot++,Mn.updateMatrices(nn),nn.castShadow&&Bt++),st.spotLightMatrix[Rt]=Mn.matrix,nn.castShadow){const un=rt.get(nn);un.shadowIntensity=Mn.intensity,un.shadowBias=Mn.bias,un.shadowNormalBias=Mn.normalBias,un.shadowRadius=Mn.radius,un.shadowMapSize=Mn.mapSize,st.spotShadow[Rt]=un,st.spotShadowMap[Rt]=En,Nt++}Rt++}else if(nn.isRectAreaLight){const Cn=tt.get(nn);Cn.color.copy(cn).multiplyScalar(an),Cn.halfWidth.set(nn.width*.5,0,0),Cn.halfHeight.set(0,nn.height*.5,0),st.rectArea[Et]=Cn,Et++}else if(nn.isPointLight){const Cn=tt.get(nn);if(Cn.color.copy(nn.color).multiplyScalar(nn.intensity),Cn.distance=nn.distance,Cn.decay=nn.decay,nn.castShadow){const Mn=nn.shadow,un=rt.get(nn);un.shadowIntensity=Mn.intensity,un.shadowBias=Mn.bias,un.shadowNormalBias=Mn.normalBias,un.shadowRadius=Mn.radius,un.shadowMapSize=Mn.mapSize,un.shadowCameraNear=Mn.camera.near,un.shadowCameraFar=Mn.camera.far,st.pointShadow[$t]=un,st.pointShadowMap[$t]=En,st.pointShadowMatrix[$t]=nn.shadow.matrix,Ft++}st.point[$t]=Cn,$t++}else if(nn.isHemisphereLight){const Cn=tt.get(nn);Cn.skyColor.copy(nn.color).multiplyScalar(an),Cn.groundColor.copy(nn.groundColor).multiplyScalar(an),st.hemi[wt]=Cn,wt++}}Et>0&&(nt.has("OES_texture_float_linear")===!0?(st.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,st.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(st.rectAreaLTC1=UniformsLib.LTC_HALF_1,st.rectAreaLTC2=UniformsLib.LTC_HALF_2)),st.ambient[0]=bt,st.ambient[1]=Mt,st.ambient[2]=Ct;const Zt=st.hash;(Zt.directionalLength!==Tt||Zt.pointLength!==$t||Zt.spotLength!==Rt||Zt.rectAreaLength!==Et||Zt.hemiLength!==wt||Zt.numDirectionalShadows!==Pt||Zt.numPointShadows!==Ft||Zt.numSpotShadows!==Nt||Zt.numSpotMaps!==Ot||Zt.numLightProbes!==Xt)&&(st.directional.length=Tt,st.spot.length=Rt,st.rectArea.length=Et,st.point.length=$t,st.hemi.length=wt,st.directionalShadow.length=Pt,st.directionalShadowMap.length=Pt,st.pointShadow.length=Ft,st.pointShadowMap.length=Ft,st.spotShadow.length=Nt,st.spotShadowMap.length=Nt,st.directionalShadowMatrix.length=Pt,st.pointShadowMatrix.length=Ft,st.spotLightMatrix.length=Nt+Ot-Bt,st.spotLightMap.length=Ot,st.numSpotLightShadowsWithMaps=Bt,st.numLightProbes=Xt,Zt.directionalLength=Tt,Zt.pointLength=$t,Zt.spotLength=Rt,Zt.rectAreaLength=Et,Zt.hemiLength=wt,Zt.numDirectionalShadows=Pt,Zt.numPointShadows=Ft,Zt.numSpotShadows=Nt,Zt.numSpotMaps=Ot,Zt.numLightProbes=Xt,st.version=nextVersion++)}function vt(_t,bt){let Mt=0,Ct=0,Tt=0,$t=0,Rt=0;const Et=bt.matrixWorldInverse;for(let wt=0,Pt=_t.length;wt<Pt;wt++){const Ft=_t[wt];if(Ft.isDirectionalLight){const Nt=st.directional[Mt];Nt.direction.setFromMatrixPosition(Ft.matrixWorld),at.setFromMatrixPosition(Ft.target.matrixWorld),Nt.direction.sub(at),Nt.direction.transformDirection(Et),Mt++}else if(Ft.isSpotLight){const Nt=st.spot[Tt];Nt.position.setFromMatrixPosition(Ft.matrixWorld),Nt.position.applyMatrix4(Et),Nt.direction.setFromMatrixPosition(Ft.matrixWorld),at.setFromMatrixPosition(Ft.target.matrixWorld),Nt.direction.sub(at),Nt.direction.transformDirection(Et),Tt++}else if(Ft.isRectAreaLight){const Nt=st.rectArea[$t];Nt.position.setFromMatrixPosition(Ft.matrixWorld),Nt.position.applyMatrix4(Et),dt.identity(),lt.copy(Ft.matrixWorld),lt.premultiply(Et),dt.extractRotation(lt),Nt.halfWidth.set(Ft.width*.5,0,0),Nt.halfHeight.set(0,Ft.height*.5,0),Nt.halfWidth.applyMatrix4(dt),Nt.halfHeight.applyMatrix4(dt),$t++}else if(Ft.isPointLight){const Nt=st.point[Ct];Nt.position.setFromMatrixPosition(Ft.matrixWorld),Nt.position.applyMatrix4(Et),Ct++}else if(Ft.isHemisphereLight){const Nt=st.hemi[Rt];Nt.direction.setFromMatrixPosition(Ft.matrixWorld),Nt.direction.transformDirection(Et),Rt++}}}return{setup:yt,setupView:vt,state:st}}function WebGLRenderState(nt){const tt=new WebGLLights(nt),rt=[],st=[];function at(bt){_t.camera=bt,rt.length=0,st.length=0}function lt(bt){rt.push(bt)}function dt(bt){st.push(bt)}function yt(){tt.setup(rt)}function vt(bt){tt.setupView(rt,bt)}const _t={lightsArray:rt,shadowsArray:st,camera:null,lights:tt,transmissionRenderTarget:{}};return{init:at,state:_t,setupLights:yt,setupLightsView:vt,pushLight:lt,pushShadow:dt}}function WebGLRenderStates(nt){let tt=new WeakMap;function rt(at,lt=0){const dt=tt.get(at);let yt;return dt===void 0?(yt=new WebGLRenderState(nt),tt.set(at,[yt])):lt>=dt.length?(yt=new WebGLRenderState(nt),dt.push(yt)):yt=dt[lt],yt}function st(){tt=new WeakMap}return{get:rt,dispose:st}}class MeshDepthMaterial extends Material{constructor(tt){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(tt)}copy(tt){return super.copy(tt),this.depthPacking=tt.depthPacking,this.map=tt.map,this.alphaMap=tt.alphaMap,this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(tt){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(tt)}copy(tt){return super.copy(tt),this.map=tt.map,this.alphaMap=tt.alphaMap,this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(nt,tt,rt){let st=new Frustum;const at=new Vector2,lt=new Vector2,dt=new Vector4,yt=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),vt=new MeshDistanceMaterial,_t={},bt=rt.maxTextureSize,Mt={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},Ct=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),Tt=Ct.clone();Tt.defines.HORIZONTAL_PASS=1;const $t=new BufferGeometry;$t.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Rt=new Mesh($t,Ct),Et=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let wt=this.type;this.render=function(Bt,Xt,Zt){if(Et.enabled===!1||Et.autoUpdate===!1&&Et.needsUpdate===!1||Bt.length===0)return;const rn=nt.getRenderTarget(),Gt=nt.getActiveCubeFace(),nn=nt.getActiveMipmapLevel(),cn=nt.state;cn.setBlending(NoBlending),cn.buffers.color.setClear(1,1,1,1),cn.buffers.depth.setTest(!0),cn.setScissorTest(!1);const an=wt!==VSMShadowMap&&this.type===VSMShadowMap,mn=wt===VSMShadowMap&&this.type!==VSMShadowMap;for(let En=0,Cn=Bt.length;En<Cn;En++){const Mn=Bt[En],un=Mn.shadow;if(un===void 0){console.warn("THREE.WebGLShadowMap:",Mn,"has no shadow.");continue}if(un.autoUpdate===!1&&un.needsUpdate===!1)continue;at.copy(un.mapSize);const Tn=un.getFrameExtents();if(at.multiply(Tn),lt.copy(un.mapSize),(at.x>bt||at.y>bt)&&(at.x>bt&&(lt.x=Math.floor(bt/Tn.x),at.x=lt.x*Tn.x,un.mapSize.x=lt.x),at.y>bt&&(lt.y=Math.floor(bt/Tn.y),at.y=lt.y*Tn.y,un.mapSize.y=lt.y)),un.map===null||an===!0||mn===!0){const dn=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};un.map!==null&&un.map.dispose(),un.map=new WebGLRenderTarget(at.x,at.y,dn),un.map.texture.name=Mn.name+".shadowMap",un.camera.updateProjectionMatrix()}nt.setRenderTarget(un.map),nt.clear();const Pn=un.getViewportCount();for(let dn=0;dn<Pn;dn++){const Un=un.getViewport(dn);dt.set(lt.x*Un.x,lt.y*Un.y,lt.x*Un.z,lt.y*Un.w),cn.viewport(dt),un.updateMatrices(Mn,dn),st=un.getFrustum(),Nt(Xt,Zt,un.camera,Mn,this.type)}un.isPointLightShadow!==!0&&this.type===VSMShadowMap&&Pt(un,Zt),un.needsUpdate=!1}wt=this.type,Et.needsUpdate=!1,nt.setRenderTarget(rn,Gt,nn)};function Pt(Bt,Xt){const Zt=tt.update(Rt);Ct.defines.VSM_SAMPLES!==Bt.blurSamples&&(Ct.defines.VSM_SAMPLES=Bt.blurSamples,Tt.defines.VSM_SAMPLES=Bt.blurSamples,Ct.needsUpdate=!0,Tt.needsUpdate=!0),Bt.mapPass===null&&(Bt.mapPass=new WebGLRenderTarget(at.x,at.y)),Ct.uniforms.shadow_pass.value=Bt.map.texture,Ct.uniforms.resolution.value=Bt.mapSize,Ct.uniforms.radius.value=Bt.radius,nt.setRenderTarget(Bt.mapPass),nt.clear(),nt.renderBufferDirect(Xt,null,Zt,Ct,Rt,null),Tt.uniforms.shadow_pass.value=Bt.mapPass.texture,Tt.uniforms.resolution.value=Bt.mapSize,Tt.uniforms.radius.value=Bt.radius,nt.setRenderTarget(Bt.map),nt.clear(),nt.renderBufferDirect(Xt,null,Zt,Tt,Rt,null)}function Ft(Bt,Xt,Zt,rn){let Gt=null;const nn=Zt.isPointLight===!0?Bt.customDistanceMaterial:Bt.customDepthMaterial;if(nn!==void 0)Gt=nn;else if(Gt=Zt.isPointLight===!0?vt:yt,nt.localClippingEnabled&&Xt.clipShadows===!0&&Array.isArray(Xt.clippingPlanes)&&Xt.clippingPlanes.length!==0||Xt.displacementMap&&Xt.displacementScale!==0||Xt.alphaMap&&Xt.alphaTest>0||Xt.map&&Xt.alphaTest>0){const cn=Gt.uuid,an=Xt.uuid;let mn=_t[cn];mn===void 0&&(mn={},_t[cn]=mn);let En=mn[an];En===void 0&&(En=Gt.clone(),mn[an]=En,Xt.addEventListener("dispose",Ot)),Gt=En}if(Gt.visible=Xt.visible,Gt.wireframe=Xt.wireframe,rn===VSMShadowMap?Gt.side=Xt.shadowSide!==null?Xt.shadowSide:Xt.side:Gt.side=Xt.shadowSide!==null?Xt.shadowSide:Mt[Xt.side],Gt.alphaMap=Xt.alphaMap,Gt.alphaTest=Xt.alphaTest,Gt.map=Xt.map,Gt.clipShadows=Xt.clipShadows,Gt.clippingPlanes=Xt.clippingPlanes,Gt.clipIntersection=Xt.clipIntersection,Gt.displacementMap=Xt.displacementMap,Gt.displacementScale=Xt.displacementScale,Gt.displacementBias=Xt.displacementBias,Gt.wireframeLinewidth=Xt.wireframeLinewidth,Gt.linewidth=Xt.linewidth,Zt.isPointLight===!0&&Gt.isMeshDistanceMaterial===!0){const cn=nt.properties.get(Gt);cn.light=Zt}return Gt}function Nt(Bt,Xt,Zt,rn,Gt){if(Bt.visible===!1)return;if(Bt.layers.test(Xt.layers)&&(Bt.isMesh||Bt.isLine||Bt.isPoints)&&(Bt.castShadow||Bt.receiveShadow&&Gt===VSMShadowMap)&&(!Bt.frustumCulled||st.intersectsObject(Bt))){Bt.modelViewMatrix.multiplyMatrices(Zt.matrixWorldInverse,Bt.matrixWorld);const an=tt.update(Bt),mn=Bt.material;if(Array.isArray(mn)){const En=an.groups;for(let Cn=0,Mn=En.length;Cn<Mn;Cn++){const un=En[Cn],Tn=mn[un.materialIndex];if(Tn&&Tn.visible){const Pn=Ft(Bt,Tn,rn,Gt);Bt.onBeforeShadow(nt,Bt,Xt,Zt,an,Pn,un),nt.renderBufferDirect(Zt,null,an,Pn,Bt,un),Bt.onAfterShadow(nt,Bt,Xt,Zt,an,Pn,un)}}}else if(mn.visible){const En=Ft(Bt,mn,rn,Gt);Bt.onBeforeShadow(nt,Bt,Xt,Zt,an,En,null),nt.renderBufferDirect(Zt,null,an,En,Bt,null),Bt.onAfterShadow(nt,Bt,Xt,Zt,an,En,null)}}const cn=Bt.children;for(let an=0,mn=cn.length;an<mn;an++)Nt(cn[an],Xt,Zt,rn,Gt)}function Ot(Bt){Bt.target.removeEventListener("dispose",Ot);for(const Zt in _t){const rn=_t[Zt],Gt=Bt.target.uuid;Gt in rn&&(rn[Gt].dispose(),delete rn[Gt])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(nt){function tt(){let lr=!1;const Br=new Vector4;let Hn=null;const kr=new Vector4(0,0,0,0);return{setMask:function(Cs){Hn!==Cs&&!lr&&(nt.colorMask(Cs,Cs,Cs,Cs),Hn=Cs)},setLocked:function(Cs){lr=Cs},setClear:function(Cs,Fn,Ur,Vr,dr){dr===!0&&(Cs*=Vr,Fn*=Vr,Ur*=Vr),Br.set(Cs,Fn,Ur,Vr),kr.equals(Br)===!1&&(nt.clearColor(Cs,Fn,Ur,Vr),kr.copy(Br))},reset:function(){lr=!1,Hn=null,kr.set(-1,0,0,0)}}}function rt(){let lr=!1,Br=!1,Hn=null,kr=null,Cs=null;return{setReversed:function(Fn){Br=Fn},setTest:function(Fn){Fn?ar(nt.DEPTH_TEST):fr(nt.DEPTH_TEST)},setMask:function(Fn){Hn!==Fn&&!lr&&(nt.depthMask(Fn),Hn=Fn)},setFunc:function(Fn){if(Br&&(Fn=reversedFuncs[Fn]),kr!==Fn){switch(Fn){case NeverDepth:nt.depthFunc(nt.NEVER);break;case AlwaysDepth:nt.depthFunc(nt.ALWAYS);break;case LessDepth:nt.depthFunc(nt.LESS);break;case LessEqualDepth:nt.depthFunc(nt.LEQUAL);break;case EqualDepth:nt.depthFunc(nt.EQUAL);break;case GreaterEqualDepth:nt.depthFunc(nt.GEQUAL);break;case GreaterDepth:nt.depthFunc(nt.GREATER);break;case NotEqualDepth:nt.depthFunc(nt.NOTEQUAL);break;default:nt.depthFunc(nt.LEQUAL)}kr=Fn}},setLocked:function(Fn){lr=Fn},setClear:function(Fn){Cs!==Fn&&(nt.clearDepth(Fn),Cs=Fn)},reset:function(){lr=!1,Hn=null,kr=null,Cs=null}}}function st(){let lr=!1,Br=null,Hn=null,kr=null,Cs=null,Fn=null,Ur=null,Vr=null,dr=null;return{setTest:function(Cr){lr||(Cr?ar(nt.STENCIL_TEST):fr(nt.STENCIL_TEST))},setMask:function(Cr){Br!==Cr&&!lr&&(nt.stencilMask(Cr),Br=Cr)},setFunc:function(Cr,hs,ro){(Hn!==Cr||kr!==hs||Cs!==ro)&&(nt.stencilFunc(Cr,hs,ro),Hn=Cr,kr=hs,Cs=ro)},setOp:function(Cr,hs,ro){(Fn!==Cr||Ur!==hs||Vr!==ro)&&(nt.stencilOp(Cr,hs,ro),Fn=Cr,Ur=hs,Vr=ro)},setLocked:function(Cr){lr=Cr},setClear:function(Cr){dr!==Cr&&(nt.clearStencil(Cr),dr=Cr)},reset:function(){lr=!1,Br=null,Hn=null,kr=null,Cs=null,Fn=null,Ur=null,Vr=null,dr=null}}}const at=new tt,lt=new rt,dt=new st,yt=new WeakMap,vt=new WeakMap;let _t={},bt={},Mt=new WeakMap,Ct=[],Tt=null,$t=!1,Rt=null,Et=null,wt=null,Pt=null,Ft=null,Nt=null,Ot=null,Bt=new Color$1(0,0,0),Xt=0,Zt=!1,rn=null,Gt=null,nn=null,cn=null,an=null;const mn=nt.getParameter(nt.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let En=!1,Cn=0;const Mn=nt.getParameter(nt.VERSION);Mn.indexOf("WebGL")!==-1?(Cn=parseFloat(/^WebGL (\d)/.exec(Mn)[1]),En=Cn>=1):Mn.indexOf("OpenGL ES")!==-1&&(Cn=parseFloat(/^OpenGL ES (\d)/.exec(Mn)[1]),En=Cn>=2);let un=null,Tn={};const Pn=nt.getParameter(nt.SCISSOR_BOX),dn=nt.getParameter(nt.VIEWPORT),Un=new Vector4().fromArray(Pn),qn=new Vector4().fromArray(dn);function In(lr,Br,Hn,kr){const Cs=new Uint8Array(4),Fn=nt.createTexture();nt.bindTexture(lr,Fn),nt.texParameteri(lr,nt.TEXTURE_MIN_FILTER,nt.NEAREST),nt.texParameteri(lr,nt.TEXTURE_MAG_FILTER,nt.NEAREST);for(let Ur=0;Ur<Hn;Ur++)lr===nt.TEXTURE_3D||lr===nt.TEXTURE_2D_ARRAY?nt.texImage3D(Br,0,nt.RGBA,1,1,kr,0,nt.RGBA,nt.UNSIGNED_BYTE,Cs):nt.texImage2D(Br+Ur,0,nt.RGBA,1,1,0,nt.RGBA,nt.UNSIGNED_BYTE,Cs);return Fn}const Wn={};Wn[nt.TEXTURE_2D]=In(nt.TEXTURE_2D,nt.TEXTURE_2D,1),Wn[nt.TEXTURE_CUBE_MAP]=In(nt.TEXTURE_CUBE_MAP,nt.TEXTURE_CUBE_MAP_POSITIVE_X,6),Wn[nt.TEXTURE_2D_ARRAY]=In(nt.TEXTURE_2D_ARRAY,nt.TEXTURE_2D_ARRAY,1,1),Wn[nt.TEXTURE_3D]=In(nt.TEXTURE_3D,nt.TEXTURE_3D,1,1),at.setClear(0,0,0,1),lt.setClear(1),dt.setClear(0),ar(nt.DEPTH_TEST),lt.setFunc(LessEqualDepth),wr(!1),Nr(CullFaceBack),ar(nt.CULL_FACE),Jn(NoBlending);function ar(lr){_t[lr]!==!0&&(nt.enable(lr),_t[lr]=!0)}function fr(lr){_t[lr]!==!1&&(nt.disable(lr),_t[lr]=!1)}function mr(lr,Br){return bt[lr]!==Br?(nt.bindFramebuffer(lr,Br),bt[lr]=Br,lr===nt.DRAW_FRAMEBUFFER&&(bt[nt.FRAMEBUFFER]=Br),lr===nt.FRAMEBUFFER&&(bt[nt.DRAW_FRAMEBUFFER]=Br),!0):!1}function vr(lr,Br){let Hn=Ct,kr=!1;if(lr){Hn=Mt.get(Br),Hn===void 0&&(Hn=[],Mt.set(Br,Hn));const Cs=lr.textures;if(Hn.length!==Cs.length||Hn[0]!==nt.COLOR_ATTACHMENT0){for(let Fn=0,Ur=Cs.length;Fn<Ur;Fn++)Hn[Fn]=nt.COLOR_ATTACHMENT0+Fn;Hn.length=Cs.length,kr=!0}}else Hn[0]!==nt.BACK&&(Hn[0]=nt.BACK,kr=!0);kr&&nt.drawBuffers(Hn)}function Ar(lr){return Tt!==lr?(nt.useProgram(lr),Tt=lr,!0):!1}const $r={[AddEquation]:nt.FUNC_ADD,[SubtractEquation]:nt.FUNC_SUBTRACT,[ReverseSubtractEquation]:nt.FUNC_REVERSE_SUBTRACT};$r[MinEquation]=nt.MIN,$r[MaxEquation]=nt.MAX;const Mr={[ZeroFactor]:nt.ZERO,[OneFactor]:nt.ONE,[SrcColorFactor]:nt.SRC_COLOR,[SrcAlphaFactor]:nt.SRC_ALPHA,[SrcAlphaSaturateFactor]:nt.SRC_ALPHA_SATURATE,[DstColorFactor]:nt.DST_COLOR,[DstAlphaFactor]:nt.DST_ALPHA,[OneMinusSrcColorFactor]:nt.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:nt.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:nt.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:nt.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:nt.CONSTANT_COLOR,[OneMinusConstantColorFactor]:nt.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:nt.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:nt.ONE_MINUS_CONSTANT_ALPHA};function Jn(lr,Br,Hn,kr,Cs,Fn,Ur,Vr,dr,Cr){if(lr===NoBlending){$t===!0&&(fr(nt.BLEND),$t=!1);return}if($t===!1&&(ar(nt.BLEND),$t=!0),lr!==CustomBlending){if(lr!==Rt||Cr!==Zt){if((Et!==AddEquation||Ft!==AddEquation)&&(nt.blendEquation(nt.FUNC_ADD),Et=AddEquation,Ft=AddEquation),Cr)switch(lr){case NormalBlending:nt.blendFuncSeparate(nt.ONE,nt.ONE_MINUS_SRC_ALPHA,nt.ONE,nt.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:nt.blendFunc(nt.ONE,nt.ONE);break;case SubtractiveBlending:nt.blendFuncSeparate(nt.ZERO,nt.ONE_MINUS_SRC_COLOR,nt.ZERO,nt.ONE);break;case MultiplyBlending:nt.blendFuncSeparate(nt.ZERO,nt.SRC_COLOR,nt.ZERO,nt.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",lr);break}else switch(lr){case NormalBlending:nt.blendFuncSeparate(nt.SRC_ALPHA,nt.ONE_MINUS_SRC_ALPHA,nt.ONE,nt.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:nt.blendFunc(nt.SRC_ALPHA,nt.ONE);break;case SubtractiveBlending:nt.blendFuncSeparate(nt.ZERO,nt.ONE_MINUS_SRC_COLOR,nt.ZERO,nt.ONE);break;case MultiplyBlending:nt.blendFunc(nt.ZERO,nt.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",lr);break}wt=null,Pt=null,Nt=null,Ot=null,Bt.set(0,0,0),Xt=0,Rt=lr,Zt=Cr}return}Cs=Cs||Br,Fn=Fn||Hn,Ur=Ur||kr,(Br!==Et||Cs!==Ft)&&(nt.blendEquationSeparate($r[Br],$r[Cs]),Et=Br,Ft=Cs),(Hn!==wt||kr!==Pt||Fn!==Nt||Ur!==Ot)&&(nt.blendFuncSeparate(Mr[Hn],Mr[kr],Mr[Fn],Mr[Ur]),wt=Hn,Pt=kr,Nt=Fn,Ot=Ur),(Vr.equals(Bt)===!1||dr!==Xt)&&(nt.blendColor(Vr.r,Vr.g,Vr.b,dr),Bt.copy(Vr),Xt=dr),Rt=lr,Zt=!1}function hr(lr,Br){lr.side===DoubleSide?fr(nt.CULL_FACE):ar(nt.CULL_FACE);let Hn=lr.side===BackSide;Br&&(Hn=!Hn),wr(Hn),lr.blending===NormalBlending&&lr.transparent===!1?Jn(NoBlending):Jn(lr.blending,lr.blendEquation,lr.blendSrc,lr.blendDst,lr.blendEquationAlpha,lr.blendSrcAlpha,lr.blendDstAlpha,lr.blendColor,lr.blendAlpha,lr.premultipliedAlpha),lt.setFunc(lr.depthFunc),lt.setTest(lr.depthTest),lt.setMask(lr.depthWrite),at.setMask(lr.colorWrite);const kr=lr.stencilWrite;dt.setTest(kr),kr&&(dt.setMask(lr.stencilWriteMask),dt.setFunc(lr.stencilFunc,lr.stencilRef,lr.stencilFuncMask),dt.setOp(lr.stencilFail,lr.stencilZFail,lr.stencilZPass)),Yr(lr.polygonOffset,lr.polygonOffsetFactor,lr.polygonOffsetUnits),lr.alphaToCoverage===!0?ar(nt.SAMPLE_ALPHA_TO_COVERAGE):fr(nt.SAMPLE_ALPHA_TO_COVERAGE)}function wr(lr){rn!==lr&&(lr?nt.frontFace(nt.CW):nt.frontFace(nt.CCW),rn=lr)}function Nr(lr){lr!==CullFaceNone?(ar(nt.CULL_FACE),lr!==Gt&&(lr===CullFaceBack?nt.cullFace(nt.BACK):lr===CullFaceFront?nt.cullFace(nt.FRONT):nt.cullFace(nt.FRONT_AND_BACK))):fr(nt.CULL_FACE),Gt=lr}function Fr(lr){lr!==nn&&(En&&nt.lineWidth(lr),nn=lr)}function Yr(lr,Br,Hn){lr?(ar(nt.POLYGON_OFFSET_FILL),(cn!==Br||an!==Hn)&&(nt.polygonOffset(Br,Hn),cn=Br,an=Hn)):fr(nt.POLYGON_OFFSET_FILL)}function cs(lr){lr?ar(nt.SCISSOR_TEST):fr(nt.SCISSOR_TEST)}function cr(lr){lr===void 0&&(lr=nt.TEXTURE0+mn-1),un!==lr&&(nt.activeTexture(lr),un=lr)}function Qn(lr,Br,Hn){Hn===void 0&&(un===null?Hn=nt.TEXTURE0+mn-1:Hn=un);let kr=Tn[Hn];kr===void 0&&(kr={type:void 0,texture:void 0},Tn[Hn]=kr),(kr.type!==lr||kr.texture!==Br)&&(un!==Hn&&(nt.activeTexture(Hn),un=Hn),nt.bindTexture(lr,Br||Wn[lr]),kr.type=lr,kr.texture=Br)}function _r(){const lr=Tn[un];lr!==void 0&&lr.type!==void 0&&(nt.bindTexture(lr.type,null),lr.type=void 0,lr.texture=void 0)}function Ir(){try{nt.compressedTexImage2D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function pr(){try{nt.compressedTexImage3D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function Tr(){try{nt.texSubImage2D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function Wr(){try{nt.texSubImage3D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function Kn(){try{nt.compressedTexSubImage2D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function rr(){try{nt.compressedTexSubImage3D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function ur(){try{nt.texStorage2D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function Sr(){try{nt.texStorage3D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function gr(){try{nt.texImage2D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function Gr(){try{nt.texImage3D.apply(nt,arguments)}catch(lr){console.error("THREE.WebGLState:",lr)}}function jr(lr){Un.equals(lr)===!1&&(nt.scissor(lr.x,lr.y,lr.z,lr.w),Un.copy(lr))}function er(lr){qn.equals(lr)===!1&&(nt.viewport(lr.x,lr.y,lr.z,lr.w),qn.copy(lr))}function yr(lr,Br){let Hn=vt.get(Br);Hn===void 0&&(Hn=new WeakMap,vt.set(Br,Hn));let kr=Hn.get(lr);kr===void 0&&(kr=nt.getUniformBlockIndex(Br,lr.name),Hn.set(lr,kr))}function Er(lr,Br){const kr=vt.get(Br).get(lr);yt.get(Br)!==kr&&(nt.uniformBlockBinding(Br,kr,lr.__bindingPointIndex),yt.set(Br,kr))}function Hr(){nt.disable(nt.BLEND),nt.disable(nt.CULL_FACE),nt.disable(nt.DEPTH_TEST),nt.disable(nt.POLYGON_OFFSET_FILL),nt.disable(nt.SCISSOR_TEST),nt.disable(nt.STENCIL_TEST),nt.disable(nt.SAMPLE_ALPHA_TO_COVERAGE),nt.blendEquation(nt.FUNC_ADD),nt.blendFunc(nt.ONE,nt.ZERO),nt.blendFuncSeparate(nt.ONE,nt.ZERO,nt.ONE,nt.ZERO),nt.blendColor(0,0,0,0),nt.colorMask(!0,!0,!0,!0),nt.clearColor(0,0,0,0),nt.depthMask(!0),nt.depthFunc(nt.LESS),nt.clearDepth(1),nt.stencilMask(4294967295),nt.stencilFunc(nt.ALWAYS,0,4294967295),nt.stencilOp(nt.KEEP,nt.KEEP,nt.KEEP),nt.clearStencil(0),nt.cullFace(nt.BACK),nt.frontFace(nt.CCW),nt.polygonOffset(0,0),nt.activeTexture(nt.TEXTURE0),nt.bindFramebuffer(nt.FRAMEBUFFER,null),nt.bindFramebuffer(nt.DRAW_FRAMEBUFFER,null),nt.bindFramebuffer(nt.READ_FRAMEBUFFER,null),nt.useProgram(null),nt.lineWidth(1),nt.scissor(0,0,nt.canvas.width,nt.canvas.height),nt.viewport(0,0,nt.canvas.width,nt.canvas.height),_t={},un=null,Tn={},bt={},Mt=new WeakMap,Ct=[],Tt=null,$t=!1,Rt=null,Et=null,wt=null,Pt=null,Ft=null,Nt=null,Ot=null,Bt=new Color$1(0,0,0),Xt=0,Zt=!1,rn=null,Gt=null,nn=null,cn=null,an=null,Un.set(0,0,nt.canvas.width,nt.canvas.height),qn.set(0,0,nt.canvas.width,nt.canvas.height),at.reset(),lt.reset(),dt.reset()}return{buffers:{color:at,depth:lt,stencil:dt},enable:ar,disable:fr,bindFramebuffer:mr,drawBuffers:vr,useProgram:Ar,setBlending:Jn,setMaterial:hr,setFlipSided:wr,setCullFace:Nr,setLineWidth:Fr,setPolygonOffset:Yr,setScissorTest:cs,activeTexture:cr,bindTexture:Qn,unbindTexture:_r,compressedTexImage2D:Ir,compressedTexImage3D:pr,texImage2D:gr,texImage3D:Gr,updateUBOMapping:yr,uniformBlockBinding:Er,texStorage2D:ur,texStorage3D:Sr,texSubImage2D:Tr,texSubImage3D:Wr,compressedTexSubImage2D:Kn,compressedTexSubImage3D:rr,scissor:jr,viewport:er,reset:Hr}}function contain(nt,tt){const rt=nt.image&&nt.image.width?nt.image.width/nt.image.height:1;return rt>tt?(nt.repeat.x=1,nt.repeat.y=rt/tt,nt.offset.x=0,nt.offset.y=(1-nt.repeat.y)/2):(nt.repeat.x=tt/rt,nt.repeat.y=1,nt.offset.x=(1-nt.repeat.x)/2,nt.offset.y=0),nt}function cover(nt,tt){const rt=nt.image&&nt.image.width?nt.image.width/nt.image.height:1;return rt>tt?(nt.repeat.x=tt/rt,nt.repeat.y=1,nt.offset.x=(1-nt.repeat.x)/2,nt.offset.y=0):(nt.repeat.x=1,nt.repeat.y=rt/tt,nt.offset.x=0,nt.offset.y=(1-nt.repeat.y)/2),nt}function fill(nt){return nt.repeat.x=1,nt.repeat.y=1,nt.offset.x=0,nt.offset.y=0,nt}function getByteLength(nt,tt,rt,st){const at=getTextureTypeByteLength(st);switch(rt){case AlphaFormat:return nt*tt;case LuminanceFormat:return nt*tt;case LuminanceAlphaFormat:return nt*tt*2;case RedFormat:return nt*tt/at.components*at.byteLength;case RedIntegerFormat:return nt*tt/at.components*at.byteLength;case RGFormat:return nt*tt*2/at.components*at.byteLength;case RGIntegerFormat:return nt*tt*2/at.components*at.byteLength;case RGBFormat:return nt*tt*3/at.components*at.byteLength;case RGBAFormat:return nt*tt*4/at.components*at.byteLength;case RGBAIntegerFormat:return nt*tt*4/at.components*at.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((nt+3)/4)*Math.floor((tt+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((nt+3)/4)*Math.floor((tt+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(nt,16)*Math.max(tt,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(nt,8)*Math.max(tt,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((nt+3)/4)*Math.floor((tt+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((nt+3)/4)*Math.floor((tt+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((nt+3)/4)*Math.floor((tt+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((nt+4)/5)*Math.floor((tt+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((nt+4)/5)*Math.floor((tt+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((nt+5)/6)*Math.floor((tt+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((nt+5)/6)*Math.floor((tt+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((nt+7)/8)*Math.floor((tt+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((nt+7)/8)*Math.floor((tt+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((nt+7)/8)*Math.floor((tt+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((nt+9)/10)*Math.floor((tt+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((nt+9)/10)*Math.floor((tt+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((nt+9)/10)*Math.floor((tt+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((nt+9)/10)*Math.floor((tt+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((nt+11)/12)*Math.floor((tt+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((nt+11)/12)*Math.floor((tt+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(nt/4)*Math.ceil(tt/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(nt/4)*Math.ceil(tt/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(nt/4)*Math.ceil(tt/4)*16}throw new Error(`Unable to determine texture byte length for ${rt} format.`)}function getTextureTypeByteLength(nt){switch(nt){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${nt}.`)}const TextureUtils={contain,cover,fill,getByteLength};function WebGLTextures(nt,tt,rt,st,at,lt,dt){const yt=tt.has("WEBGL_multisampled_render_to_texture")?tt.get("WEBGL_multisampled_render_to_texture"):null,vt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),_t=new Vector2,bt=new WeakMap;let Mt;const Ct=new WeakMap;let Tt=!1;try{Tt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function $t(cr,Qn){return Tt?new OffscreenCanvas(cr,Qn):createElementNS("canvas")}function Rt(cr,Qn,_r){let Ir=1;const pr=cs(cr);if((pr.width>_r||pr.height>_r)&&(Ir=_r/Math.max(pr.width,pr.height)),Ir<1)if(typeof HTMLImageElement<"u"&&cr instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&cr instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&cr instanceof ImageBitmap||typeof VideoFrame<"u"&&cr instanceof VideoFrame){const Tr=Math.floor(Ir*pr.width),Wr=Math.floor(Ir*pr.height);Mt===void 0&&(Mt=$t(Tr,Wr));const Kn=Qn?$t(Tr,Wr):Mt;return Kn.width=Tr,Kn.height=Wr,Kn.getContext("2d").drawImage(cr,0,0,Tr,Wr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pr.width+"x"+pr.height+") to ("+Tr+"x"+Wr+")."),Kn}else return"data"in cr&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pr.width+"x"+pr.height+")."),cr;return cr}function Et(cr){return cr.generateMipmaps&&cr.minFilter!==NearestFilter&&cr.minFilter!==LinearFilter}function wt(cr){nt.generateMipmap(cr)}function Pt(cr,Qn,_r,Ir,pr=!1){if(cr!==null){if(nt[cr]!==void 0)return nt[cr];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+cr+"'")}let Tr=Qn;if(Qn===nt.RED&&(_r===nt.FLOAT&&(Tr=nt.R32F),_r===nt.HALF_FLOAT&&(Tr=nt.R16F),_r===nt.UNSIGNED_BYTE&&(Tr=nt.R8)),Qn===nt.RED_INTEGER&&(_r===nt.UNSIGNED_BYTE&&(Tr=nt.R8UI),_r===nt.UNSIGNED_SHORT&&(Tr=nt.R16UI),_r===nt.UNSIGNED_INT&&(Tr=nt.R32UI),_r===nt.BYTE&&(Tr=nt.R8I),_r===nt.SHORT&&(Tr=nt.R16I),_r===nt.INT&&(Tr=nt.R32I)),Qn===nt.RG&&(_r===nt.FLOAT&&(Tr=nt.RG32F),_r===nt.HALF_FLOAT&&(Tr=nt.RG16F),_r===nt.UNSIGNED_BYTE&&(Tr=nt.RG8)),Qn===nt.RG_INTEGER&&(_r===nt.UNSIGNED_BYTE&&(Tr=nt.RG8UI),_r===nt.UNSIGNED_SHORT&&(Tr=nt.RG16UI),_r===nt.UNSIGNED_INT&&(Tr=nt.RG32UI),_r===nt.BYTE&&(Tr=nt.RG8I),_r===nt.SHORT&&(Tr=nt.RG16I),_r===nt.INT&&(Tr=nt.RG32I)),Qn===nt.RGB_INTEGER&&(_r===nt.UNSIGNED_BYTE&&(Tr=nt.RGB8UI),_r===nt.UNSIGNED_SHORT&&(Tr=nt.RGB16UI),_r===nt.UNSIGNED_INT&&(Tr=nt.RGB32UI),_r===nt.BYTE&&(Tr=nt.RGB8I),_r===nt.SHORT&&(Tr=nt.RGB16I),_r===nt.INT&&(Tr=nt.RGB32I)),Qn===nt.RGBA_INTEGER&&(_r===nt.UNSIGNED_BYTE&&(Tr=nt.RGBA8UI),_r===nt.UNSIGNED_SHORT&&(Tr=nt.RGBA16UI),_r===nt.UNSIGNED_INT&&(Tr=nt.RGBA32UI),_r===nt.BYTE&&(Tr=nt.RGBA8I),_r===nt.SHORT&&(Tr=nt.RGBA16I),_r===nt.INT&&(Tr=nt.RGBA32I)),Qn===nt.RGB&&_r===nt.UNSIGNED_INT_5_9_9_9_REV&&(Tr=nt.RGB9_E5),Qn===nt.RGBA){const Wr=pr?LinearTransfer:ColorManagement.getTransfer(Ir);_r===nt.FLOAT&&(Tr=nt.RGBA32F),_r===nt.HALF_FLOAT&&(Tr=nt.RGBA16F),_r===nt.UNSIGNED_BYTE&&(Tr=Wr===SRGBTransfer?nt.SRGB8_ALPHA8:nt.RGBA8),_r===nt.UNSIGNED_SHORT_4_4_4_4&&(Tr=nt.RGBA4),_r===nt.UNSIGNED_SHORT_5_5_5_1&&(Tr=nt.RGB5_A1)}return(Tr===nt.R16F||Tr===nt.R32F||Tr===nt.RG16F||Tr===nt.RG32F||Tr===nt.RGBA16F||Tr===nt.RGBA32F)&&tt.get("EXT_color_buffer_float"),Tr}function Ft(cr,Qn){let _r;return cr?Qn===null||Qn===UnsignedIntType||Qn===UnsignedInt248Type?_r=nt.DEPTH24_STENCIL8:Qn===FloatType?_r=nt.DEPTH32F_STENCIL8:Qn===UnsignedShortType&&(_r=nt.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Qn===null||Qn===UnsignedIntType||Qn===UnsignedInt248Type?_r=nt.DEPTH_COMPONENT24:Qn===FloatType?_r=nt.DEPTH_COMPONENT32F:Qn===UnsignedShortType&&(_r=nt.DEPTH_COMPONENT16),_r}function Nt(cr,Qn){return Et(cr)===!0||cr.isFramebufferTexture&&cr.minFilter!==NearestFilter&&cr.minFilter!==LinearFilter?Math.log2(Math.max(Qn.width,Qn.height))+1:cr.mipmaps!==void 0&&cr.mipmaps.length>0?cr.mipmaps.length:cr.isCompressedTexture&&Array.isArray(cr.image)?Qn.mipmaps.length:1}function Ot(cr){const Qn=cr.target;Qn.removeEventListener("dispose",Ot),Xt(Qn),Qn.isVideoTexture&&bt.delete(Qn)}function Bt(cr){const Qn=cr.target;Qn.removeEventListener("dispose",Bt),rn(Qn)}function Xt(cr){const Qn=st.get(cr);if(Qn.__webglInit===void 0)return;const _r=cr.source,Ir=Ct.get(_r);if(Ir){const pr=Ir[Qn.__cacheKey];pr.usedTimes--,pr.usedTimes===0&&Zt(cr),Object.keys(Ir).length===0&&Ct.delete(_r)}st.remove(cr)}function Zt(cr){const Qn=st.get(cr);nt.deleteTexture(Qn.__webglTexture);const _r=cr.source,Ir=Ct.get(_r);delete Ir[Qn.__cacheKey],dt.memory.textures--}function rn(cr){const Qn=st.get(cr);if(cr.depthTexture&&cr.depthTexture.dispose(),cr.isWebGLCubeRenderTarget)for(let Ir=0;Ir<6;Ir++){if(Array.isArray(Qn.__webglFramebuffer[Ir]))for(let pr=0;pr<Qn.__webglFramebuffer[Ir].length;pr++)nt.deleteFramebuffer(Qn.__webglFramebuffer[Ir][pr]);else nt.deleteFramebuffer(Qn.__webglFramebuffer[Ir]);Qn.__webglDepthbuffer&&nt.deleteRenderbuffer(Qn.__webglDepthbuffer[Ir])}else{if(Array.isArray(Qn.__webglFramebuffer))for(let Ir=0;Ir<Qn.__webglFramebuffer.length;Ir++)nt.deleteFramebuffer(Qn.__webglFramebuffer[Ir]);else nt.deleteFramebuffer(Qn.__webglFramebuffer);if(Qn.__webglDepthbuffer&&nt.deleteRenderbuffer(Qn.__webglDepthbuffer),Qn.__webglMultisampledFramebuffer&&nt.deleteFramebuffer(Qn.__webglMultisampledFramebuffer),Qn.__webglColorRenderbuffer)for(let Ir=0;Ir<Qn.__webglColorRenderbuffer.length;Ir++)Qn.__webglColorRenderbuffer[Ir]&&nt.deleteRenderbuffer(Qn.__webglColorRenderbuffer[Ir]);Qn.__webglDepthRenderbuffer&&nt.deleteRenderbuffer(Qn.__webglDepthRenderbuffer)}const _r=cr.textures;for(let Ir=0,pr=_r.length;Ir<pr;Ir++){const Tr=st.get(_r[Ir]);Tr.__webglTexture&&(nt.deleteTexture(Tr.__webglTexture),dt.memory.textures--),st.remove(_r[Ir])}st.remove(cr)}let Gt=0;function nn(){Gt=0}function cn(){const cr=Gt;return cr>=at.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+cr+" texture units while this GPU supports only "+at.maxTextures),Gt+=1,cr}function an(cr){const Qn=[];return Qn.push(cr.wrapS),Qn.push(cr.wrapT),Qn.push(cr.wrapR||0),Qn.push(cr.magFilter),Qn.push(cr.minFilter),Qn.push(cr.anisotropy),Qn.push(cr.internalFormat),Qn.push(cr.format),Qn.push(cr.type),Qn.push(cr.generateMipmaps),Qn.push(cr.premultiplyAlpha),Qn.push(cr.flipY),Qn.push(cr.unpackAlignment),Qn.push(cr.colorSpace),Qn.join()}function mn(cr,Qn){const _r=st.get(cr);if(cr.isVideoTexture&&Fr(cr),cr.isRenderTargetTexture===!1&&cr.version>0&&_r.__version!==cr.version){const Ir=cr.image;if(Ir===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ir.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{qn(_r,cr,Qn);return}}rt.bindTexture(nt.TEXTURE_2D,_r.__webglTexture,nt.TEXTURE0+Qn)}function En(cr,Qn){const _r=st.get(cr);if(cr.version>0&&_r.__version!==cr.version){qn(_r,cr,Qn);return}rt.bindTexture(nt.TEXTURE_2D_ARRAY,_r.__webglTexture,nt.TEXTURE0+Qn)}function Cn(cr,Qn){const _r=st.get(cr);if(cr.version>0&&_r.__version!==cr.version){qn(_r,cr,Qn);return}rt.bindTexture(nt.TEXTURE_3D,_r.__webglTexture,nt.TEXTURE0+Qn)}function Mn(cr,Qn){const _r=st.get(cr);if(cr.version>0&&_r.__version!==cr.version){In(_r,cr,Qn);return}rt.bindTexture(nt.TEXTURE_CUBE_MAP,_r.__webglTexture,nt.TEXTURE0+Qn)}const un={[RepeatWrapping]:nt.REPEAT,[ClampToEdgeWrapping]:nt.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:nt.MIRRORED_REPEAT},Tn={[NearestFilter]:nt.NEAREST,[NearestMipmapNearestFilter]:nt.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:nt.NEAREST_MIPMAP_LINEAR,[LinearFilter]:nt.LINEAR,[LinearMipmapNearestFilter]:nt.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:nt.LINEAR_MIPMAP_LINEAR},Pn={[NeverCompare]:nt.NEVER,[AlwaysCompare]:nt.ALWAYS,[LessCompare]:nt.LESS,[LessEqualCompare]:nt.LEQUAL,[EqualCompare]:nt.EQUAL,[GreaterEqualCompare]:nt.GEQUAL,[GreaterCompare]:nt.GREATER,[NotEqualCompare]:nt.NOTEQUAL};function dn(cr,Qn){if(Qn.type===FloatType&&tt.has("OES_texture_float_linear")===!1&&(Qn.magFilter===LinearFilter||Qn.magFilter===LinearMipmapNearestFilter||Qn.magFilter===NearestMipmapLinearFilter||Qn.magFilter===LinearMipmapLinearFilter||Qn.minFilter===LinearFilter||Qn.minFilter===LinearMipmapNearestFilter||Qn.minFilter===NearestMipmapLinearFilter||Qn.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),nt.texParameteri(cr,nt.TEXTURE_WRAP_S,un[Qn.wrapS]),nt.texParameteri(cr,nt.TEXTURE_WRAP_T,un[Qn.wrapT]),(cr===nt.TEXTURE_3D||cr===nt.TEXTURE_2D_ARRAY)&&nt.texParameteri(cr,nt.TEXTURE_WRAP_R,un[Qn.wrapR]),nt.texParameteri(cr,nt.TEXTURE_MAG_FILTER,Tn[Qn.magFilter]),nt.texParameteri(cr,nt.TEXTURE_MIN_FILTER,Tn[Qn.minFilter]),Qn.compareFunction&&(nt.texParameteri(cr,nt.TEXTURE_COMPARE_MODE,nt.COMPARE_REF_TO_TEXTURE),nt.texParameteri(cr,nt.TEXTURE_COMPARE_FUNC,Pn[Qn.compareFunction])),tt.has("EXT_texture_filter_anisotropic")===!0){if(Qn.magFilter===NearestFilter||Qn.minFilter!==NearestMipmapLinearFilter&&Qn.minFilter!==LinearMipmapLinearFilter||Qn.type===FloatType&&tt.has("OES_texture_float_linear")===!1)return;if(Qn.anisotropy>1||st.get(Qn).__currentAnisotropy){const _r=tt.get("EXT_texture_filter_anisotropic");nt.texParameterf(cr,_r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Qn.anisotropy,at.getMaxAnisotropy())),st.get(Qn).__currentAnisotropy=Qn.anisotropy}}}function Un(cr,Qn){let _r=!1;cr.__webglInit===void 0&&(cr.__webglInit=!0,Qn.addEventListener("dispose",Ot));const Ir=Qn.source;let pr=Ct.get(Ir);pr===void 0&&(pr={},Ct.set(Ir,pr));const Tr=an(Qn);if(Tr!==cr.__cacheKey){pr[Tr]===void 0&&(pr[Tr]={texture:nt.createTexture(),usedTimes:0},dt.memory.textures++,_r=!0),pr[Tr].usedTimes++;const Wr=pr[cr.__cacheKey];Wr!==void 0&&(pr[cr.__cacheKey].usedTimes--,Wr.usedTimes===0&&Zt(Qn)),cr.__cacheKey=Tr,cr.__webglTexture=pr[Tr].texture}return _r}function qn(cr,Qn,_r){let Ir=nt.TEXTURE_2D;(Qn.isDataArrayTexture||Qn.isCompressedArrayTexture)&&(Ir=nt.TEXTURE_2D_ARRAY),Qn.isData3DTexture&&(Ir=nt.TEXTURE_3D);const pr=Un(cr,Qn),Tr=Qn.source;rt.bindTexture(Ir,cr.__webglTexture,nt.TEXTURE0+_r);const Wr=st.get(Tr);if(Tr.version!==Wr.__version||pr===!0){rt.activeTexture(nt.TEXTURE0+_r);const Kn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),rr=Qn.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Qn.colorSpace),ur=Qn.colorSpace===NoColorSpace||Kn===rr?nt.NONE:nt.BROWSER_DEFAULT_WEBGL;nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,Qn.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Qn.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,Qn.unpackAlignment),nt.pixelStorei(nt.UNPACK_COLORSPACE_CONVERSION_WEBGL,ur);let Sr=Rt(Qn.image,!1,at.maxTextureSize);Sr=Yr(Qn,Sr);const gr=lt.convert(Qn.format,Qn.colorSpace),Gr=lt.convert(Qn.type);let jr=Pt(Qn.internalFormat,gr,Gr,Qn.colorSpace,Qn.isVideoTexture);dn(Ir,Qn);let er;const yr=Qn.mipmaps,Er=Qn.isVideoTexture!==!0,Hr=Wr.__version===void 0||pr===!0,lr=Tr.dataReady,Br=Nt(Qn,Sr);if(Qn.isDepthTexture)jr=Ft(Qn.format===DepthStencilFormat,Qn.type),Hr&&(Er?rt.texStorage2D(nt.TEXTURE_2D,1,jr,Sr.width,Sr.height):rt.texImage2D(nt.TEXTURE_2D,0,jr,Sr.width,Sr.height,0,gr,Gr,null));else if(Qn.isDataTexture)if(yr.length>0){Er&&Hr&&rt.texStorage2D(nt.TEXTURE_2D,Br,jr,yr[0].width,yr[0].height);for(let Hn=0,kr=yr.length;Hn<kr;Hn++)er=yr[Hn],Er?lr&&rt.texSubImage2D(nt.TEXTURE_2D,Hn,0,0,er.width,er.height,gr,Gr,er.data):rt.texImage2D(nt.TEXTURE_2D,Hn,jr,er.width,er.height,0,gr,Gr,er.data);Qn.generateMipmaps=!1}else Er?(Hr&&rt.texStorage2D(nt.TEXTURE_2D,Br,jr,Sr.width,Sr.height),lr&&rt.texSubImage2D(nt.TEXTURE_2D,0,0,0,Sr.width,Sr.height,gr,Gr,Sr.data)):rt.texImage2D(nt.TEXTURE_2D,0,jr,Sr.width,Sr.height,0,gr,Gr,Sr.data);else if(Qn.isCompressedTexture)if(Qn.isCompressedArrayTexture){Er&&Hr&&rt.texStorage3D(nt.TEXTURE_2D_ARRAY,Br,jr,yr[0].width,yr[0].height,Sr.depth);for(let Hn=0,kr=yr.length;Hn<kr;Hn++)if(er=yr[Hn],Qn.format!==RGBAFormat)if(gr!==null)if(Er){if(lr)if(Qn.layerUpdates.size>0){const Cs=getByteLength(er.width,er.height,Qn.format,Qn.type);for(const Fn of Qn.layerUpdates){const Ur=er.data.subarray(Fn*Cs/er.data.BYTES_PER_ELEMENT,(Fn+1)*Cs/er.data.BYTES_PER_ELEMENT);rt.compressedTexSubImage3D(nt.TEXTURE_2D_ARRAY,Hn,0,0,Fn,er.width,er.height,1,gr,Ur,0,0)}Qn.clearLayerUpdates()}else rt.compressedTexSubImage3D(nt.TEXTURE_2D_ARRAY,Hn,0,0,0,er.width,er.height,Sr.depth,gr,er.data,0,0)}else rt.compressedTexImage3D(nt.TEXTURE_2D_ARRAY,Hn,jr,er.width,er.height,Sr.depth,0,er.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Er?lr&&rt.texSubImage3D(nt.TEXTURE_2D_ARRAY,Hn,0,0,0,er.width,er.height,Sr.depth,gr,Gr,er.data):rt.texImage3D(nt.TEXTURE_2D_ARRAY,Hn,jr,er.width,er.height,Sr.depth,0,gr,Gr,er.data)}else{Er&&Hr&&rt.texStorage2D(nt.TEXTURE_2D,Br,jr,yr[0].width,yr[0].height);for(let Hn=0,kr=yr.length;Hn<kr;Hn++)er=yr[Hn],Qn.format!==RGBAFormat?gr!==null?Er?lr&&rt.compressedTexSubImage2D(nt.TEXTURE_2D,Hn,0,0,er.width,er.height,gr,er.data):rt.compressedTexImage2D(nt.TEXTURE_2D,Hn,jr,er.width,er.height,0,er.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Er?lr&&rt.texSubImage2D(nt.TEXTURE_2D,Hn,0,0,er.width,er.height,gr,Gr,er.data):rt.texImage2D(nt.TEXTURE_2D,Hn,jr,er.width,er.height,0,gr,Gr,er.data)}else if(Qn.isDataArrayTexture)if(Er){if(Hr&&rt.texStorage3D(nt.TEXTURE_2D_ARRAY,Br,jr,Sr.width,Sr.height,Sr.depth),lr)if(Qn.layerUpdates.size>0){const Hn=getByteLength(Sr.width,Sr.height,Qn.format,Qn.type);for(const kr of Qn.layerUpdates){const Cs=Sr.data.subarray(kr*Hn/Sr.data.BYTES_PER_ELEMENT,(kr+1)*Hn/Sr.data.BYTES_PER_ELEMENT);rt.texSubImage3D(nt.TEXTURE_2D_ARRAY,0,0,0,kr,Sr.width,Sr.height,1,gr,Gr,Cs)}Qn.clearLayerUpdates()}else rt.texSubImage3D(nt.TEXTURE_2D_ARRAY,0,0,0,0,Sr.width,Sr.height,Sr.depth,gr,Gr,Sr.data)}else rt.texImage3D(nt.TEXTURE_2D_ARRAY,0,jr,Sr.width,Sr.height,Sr.depth,0,gr,Gr,Sr.data);else if(Qn.isData3DTexture)Er?(Hr&&rt.texStorage3D(nt.TEXTURE_3D,Br,jr,Sr.width,Sr.height,Sr.depth),lr&&rt.texSubImage3D(nt.TEXTURE_3D,0,0,0,0,Sr.width,Sr.height,Sr.depth,gr,Gr,Sr.data)):rt.texImage3D(nt.TEXTURE_3D,0,jr,Sr.width,Sr.height,Sr.depth,0,gr,Gr,Sr.data);else if(Qn.isFramebufferTexture){if(Hr)if(Er)rt.texStorage2D(nt.TEXTURE_2D,Br,jr,Sr.width,Sr.height);else{let Hn=Sr.width,kr=Sr.height;for(let Cs=0;Cs<Br;Cs++)rt.texImage2D(nt.TEXTURE_2D,Cs,jr,Hn,kr,0,gr,Gr,null),Hn>>=1,kr>>=1}}else if(yr.length>0){if(Er&&Hr){const Hn=cs(yr[0]);rt.texStorage2D(nt.TEXTURE_2D,Br,jr,Hn.width,Hn.height)}for(let Hn=0,kr=yr.length;Hn<kr;Hn++)er=yr[Hn],Er?lr&&rt.texSubImage2D(nt.TEXTURE_2D,Hn,0,0,gr,Gr,er):rt.texImage2D(nt.TEXTURE_2D,Hn,jr,gr,Gr,er);Qn.generateMipmaps=!1}else if(Er){if(Hr){const Hn=cs(Sr);rt.texStorage2D(nt.TEXTURE_2D,Br,jr,Hn.width,Hn.height)}lr&&rt.texSubImage2D(nt.TEXTURE_2D,0,0,0,gr,Gr,Sr)}else rt.texImage2D(nt.TEXTURE_2D,0,jr,gr,Gr,Sr);Et(Qn)&&wt(Ir),Wr.__version=Tr.version,Qn.onUpdate&&Qn.onUpdate(Qn)}cr.__version=Qn.version}function In(cr,Qn,_r){if(Qn.image.length!==6)return;const Ir=Un(cr,Qn),pr=Qn.source;rt.bindTexture(nt.TEXTURE_CUBE_MAP,cr.__webglTexture,nt.TEXTURE0+_r);const Tr=st.get(pr);if(pr.version!==Tr.__version||Ir===!0){rt.activeTexture(nt.TEXTURE0+_r);const Wr=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Kn=Qn.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Qn.colorSpace),rr=Qn.colorSpace===NoColorSpace||Wr===Kn?nt.NONE:nt.BROWSER_DEFAULT_WEBGL;nt.pixelStorei(nt.UNPACK_FLIP_Y_WEBGL,Qn.flipY),nt.pixelStorei(nt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Qn.premultiplyAlpha),nt.pixelStorei(nt.UNPACK_ALIGNMENT,Qn.unpackAlignment),nt.pixelStorei(nt.UNPACK_COLORSPACE_CONVERSION_WEBGL,rr);const ur=Qn.isCompressedTexture||Qn.image[0].isCompressedTexture,Sr=Qn.image[0]&&Qn.image[0].isDataTexture,gr=[];for(let kr=0;kr<6;kr++)!ur&&!Sr?gr[kr]=Rt(Qn.image[kr],!0,at.maxCubemapSize):gr[kr]=Sr?Qn.image[kr].image:Qn.image[kr],gr[kr]=Yr(Qn,gr[kr]);const Gr=gr[0],jr=lt.convert(Qn.format,Qn.colorSpace),er=lt.convert(Qn.type),yr=Pt(Qn.internalFormat,jr,er,Qn.colorSpace),Er=Qn.isVideoTexture!==!0,Hr=Tr.__version===void 0||Ir===!0,lr=pr.dataReady;let Br=Nt(Qn,Gr);dn(nt.TEXTURE_CUBE_MAP,Qn);let Hn;if(ur){Er&&Hr&&rt.texStorage2D(nt.TEXTURE_CUBE_MAP,Br,yr,Gr.width,Gr.height);for(let kr=0;kr<6;kr++){Hn=gr[kr].mipmaps;for(let Cs=0;Cs<Hn.length;Cs++){const Fn=Hn[Cs];Qn.format!==RGBAFormat?jr!==null?Er?lr&&rt.compressedTexSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,Cs,0,0,Fn.width,Fn.height,jr,Fn.data):rt.compressedTexImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,Cs,yr,Fn.width,Fn.height,0,Fn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Er?lr&&rt.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,Cs,0,0,Fn.width,Fn.height,jr,er,Fn.data):rt.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,Cs,yr,Fn.width,Fn.height,0,jr,er,Fn.data)}}}else{if(Hn=Qn.mipmaps,Er&&Hr){Hn.length>0&&Br++;const kr=cs(gr[0]);rt.texStorage2D(nt.TEXTURE_CUBE_MAP,Br,yr,kr.width,kr.height)}for(let kr=0;kr<6;kr++)if(Sr){Er?lr&&rt.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,0,0,0,gr[kr].width,gr[kr].height,jr,er,gr[kr].data):rt.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,0,yr,gr[kr].width,gr[kr].height,0,jr,er,gr[kr].data);for(let Cs=0;Cs<Hn.length;Cs++){const Ur=Hn[Cs].image[kr].image;Er?lr&&rt.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,Cs+1,0,0,Ur.width,Ur.height,jr,er,Ur.data):rt.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,Cs+1,yr,Ur.width,Ur.height,0,jr,er,Ur.data)}}else{Er?lr&&rt.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,0,0,0,jr,er,gr[kr]):rt.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,0,yr,jr,er,gr[kr]);for(let Cs=0;Cs<Hn.length;Cs++){const Fn=Hn[Cs];Er?lr&&rt.texSubImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,Cs+1,0,0,jr,er,Fn.image[kr]):rt.texImage2D(nt.TEXTURE_CUBE_MAP_POSITIVE_X+kr,Cs+1,yr,jr,er,Fn.image[kr])}}}Et(Qn)&&wt(nt.TEXTURE_CUBE_MAP),Tr.__version=pr.version,Qn.onUpdate&&Qn.onUpdate(Qn)}cr.__version=Qn.version}function Wn(cr,Qn,_r,Ir,pr,Tr){const Wr=lt.convert(_r.format,_r.colorSpace),Kn=lt.convert(_r.type),rr=Pt(_r.internalFormat,Wr,Kn,_r.colorSpace);if(!st.get(Qn).__hasExternalTextures){const Sr=Math.max(1,Qn.width>>Tr),gr=Math.max(1,Qn.height>>Tr);pr===nt.TEXTURE_3D||pr===nt.TEXTURE_2D_ARRAY?rt.texImage3D(pr,Tr,rr,Sr,gr,Qn.depth,0,Wr,Kn,null):rt.texImage2D(pr,Tr,rr,Sr,gr,0,Wr,Kn,null)}rt.bindFramebuffer(nt.FRAMEBUFFER,cr),Nr(Qn)?yt.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,Ir,pr,st.get(_r).__webglTexture,0,wr(Qn)):(pr===nt.TEXTURE_2D||pr>=nt.TEXTURE_CUBE_MAP_POSITIVE_X&&pr<=nt.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&nt.framebufferTexture2D(nt.FRAMEBUFFER,Ir,pr,st.get(_r).__webglTexture,Tr),rt.bindFramebuffer(nt.FRAMEBUFFER,null)}function ar(cr,Qn,_r){if(nt.bindRenderbuffer(nt.RENDERBUFFER,cr),Qn.depthBuffer){const Ir=Qn.depthTexture,pr=Ir&&Ir.isDepthTexture?Ir.type:null,Tr=Ft(Qn.stencilBuffer,pr),Wr=Qn.stencilBuffer?nt.DEPTH_STENCIL_ATTACHMENT:nt.DEPTH_ATTACHMENT,Kn=wr(Qn);Nr(Qn)?yt.renderbufferStorageMultisampleEXT(nt.RENDERBUFFER,Kn,Tr,Qn.width,Qn.height):_r?nt.renderbufferStorageMultisample(nt.RENDERBUFFER,Kn,Tr,Qn.width,Qn.height):nt.renderbufferStorage(nt.RENDERBUFFER,Tr,Qn.width,Qn.height),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,Wr,nt.RENDERBUFFER,cr)}else{const Ir=Qn.textures;for(let pr=0;pr<Ir.length;pr++){const Tr=Ir[pr],Wr=lt.convert(Tr.format,Tr.colorSpace),Kn=lt.convert(Tr.type),rr=Pt(Tr.internalFormat,Wr,Kn,Tr.colorSpace),ur=wr(Qn);_r&&Nr(Qn)===!1?nt.renderbufferStorageMultisample(nt.RENDERBUFFER,ur,rr,Qn.width,Qn.height):Nr(Qn)?yt.renderbufferStorageMultisampleEXT(nt.RENDERBUFFER,ur,rr,Qn.width,Qn.height):nt.renderbufferStorage(nt.RENDERBUFFER,rr,Qn.width,Qn.height)}}nt.bindRenderbuffer(nt.RENDERBUFFER,null)}function fr(cr,Qn){if(Qn&&Qn.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(rt.bindFramebuffer(nt.FRAMEBUFFER,cr),!(Qn.depthTexture&&Qn.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!st.get(Qn.depthTexture).__webglTexture||Qn.depthTexture.image.width!==Qn.width||Qn.depthTexture.image.height!==Qn.height)&&(Qn.depthTexture.image.width=Qn.width,Qn.depthTexture.image.height=Qn.height,Qn.depthTexture.needsUpdate=!0),mn(Qn.depthTexture,0);const Ir=st.get(Qn.depthTexture).__webglTexture,pr=wr(Qn);if(Qn.depthTexture.format===DepthFormat)Nr(Qn)?yt.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.TEXTURE_2D,Ir,0,pr):nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.TEXTURE_2D,Ir,0);else if(Qn.depthTexture.format===DepthStencilFormat)Nr(Qn)?yt.framebufferTexture2DMultisampleEXT(nt.FRAMEBUFFER,nt.DEPTH_STENCIL_ATTACHMENT,nt.TEXTURE_2D,Ir,0,pr):nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.DEPTH_STENCIL_ATTACHMENT,nt.TEXTURE_2D,Ir,0);else throw new Error("Unknown depthTexture format")}function mr(cr){const Qn=st.get(cr),_r=cr.isWebGLCubeRenderTarget===!0;if(Qn.__boundDepthTexture!==cr.depthTexture){const Ir=cr.depthTexture;if(Qn.__depthDisposeCallback&&Qn.__depthDisposeCallback(),Ir){const pr=()=>{delete Qn.__boundDepthTexture,delete Qn.__depthDisposeCallback,Ir.removeEventListener("dispose",pr)};Ir.addEventListener("dispose",pr),Qn.__depthDisposeCallback=pr}Qn.__boundDepthTexture=Ir}if(cr.depthTexture&&!Qn.__autoAllocateDepthBuffer){if(_r)throw new Error("target.depthTexture not supported in Cube render targets");fr(Qn.__webglFramebuffer,cr)}else if(_r){Qn.__webglDepthbuffer=[];for(let Ir=0;Ir<6;Ir++)if(rt.bindFramebuffer(nt.FRAMEBUFFER,Qn.__webglFramebuffer[Ir]),Qn.__webglDepthbuffer[Ir]===void 0)Qn.__webglDepthbuffer[Ir]=nt.createRenderbuffer(),ar(Qn.__webglDepthbuffer[Ir],cr,!1);else{const pr=cr.stencilBuffer?nt.DEPTH_STENCIL_ATTACHMENT:nt.DEPTH_ATTACHMENT,Tr=Qn.__webglDepthbuffer[Ir];nt.bindRenderbuffer(nt.RENDERBUFFER,Tr),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,pr,nt.RENDERBUFFER,Tr)}}else if(rt.bindFramebuffer(nt.FRAMEBUFFER,Qn.__webglFramebuffer),Qn.__webglDepthbuffer===void 0)Qn.__webglDepthbuffer=nt.createRenderbuffer(),ar(Qn.__webglDepthbuffer,cr,!1);else{const Ir=cr.stencilBuffer?nt.DEPTH_STENCIL_ATTACHMENT:nt.DEPTH_ATTACHMENT,pr=Qn.__webglDepthbuffer;nt.bindRenderbuffer(nt.RENDERBUFFER,pr),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,Ir,nt.RENDERBUFFER,pr)}rt.bindFramebuffer(nt.FRAMEBUFFER,null)}function vr(cr,Qn,_r){const Ir=st.get(cr);Qn!==void 0&&Wn(Ir.__webglFramebuffer,cr,cr.texture,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,0),_r!==void 0&&mr(cr)}function Ar(cr){const Qn=cr.texture,_r=st.get(cr),Ir=st.get(Qn);cr.addEventListener("dispose",Bt);const pr=cr.textures,Tr=cr.isWebGLCubeRenderTarget===!0,Wr=pr.length>1;if(Wr||(Ir.__webglTexture===void 0&&(Ir.__webglTexture=nt.createTexture()),Ir.__version=Qn.version,dt.memory.textures++),Tr){_r.__webglFramebuffer=[];for(let Kn=0;Kn<6;Kn++)if(Qn.mipmaps&&Qn.mipmaps.length>0){_r.__webglFramebuffer[Kn]=[];for(let rr=0;rr<Qn.mipmaps.length;rr++)_r.__webglFramebuffer[Kn][rr]=nt.createFramebuffer()}else _r.__webglFramebuffer[Kn]=nt.createFramebuffer()}else{if(Qn.mipmaps&&Qn.mipmaps.length>0){_r.__webglFramebuffer=[];for(let Kn=0;Kn<Qn.mipmaps.length;Kn++)_r.__webglFramebuffer[Kn]=nt.createFramebuffer()}else _r.__webglFramebuffer=nt.createFramebuffer();if(Wr)for(let Kn=0,rr=pr.length;Kn<rr;Kn++){const ur=st.get(pr[Kn]);ur.__webglTexture===void 0&&(ur.__webglTexture=nt.createTexture(),dt.memory.textures++)}if(cr.samples>0&&Nr(cr)===!1){_r.__webglMultisampledFramebuffer=nt.createFramebuffer(),_r.__webglColorRenderbuffer=[],rt.bindFramebuffer(nt.FRAMEBUFFER,_r.__webglMultisampledFramebuffer);for(let Kn=0;Kn<pr.length;Kn++){const rr=pr[Kn];_r.__webglColorRenderbuffer[Kn]=nt.createRenderbuffer(),nt.bindRenderbuffer(nt.RENDERBUFFER,_r.__webglColorRenderbuffer[Kn]);const ur=lt.convert(rr.format,rr.colorSpace),Sr=lt.convert(rr.type),gr=Pt(rr.internalFormat,ur,Sr,rr.colorSpace,cr.isXRRenderTarget===!0),Gr=wr(cr);nt.renderbufferStorageMultisample(nt.RENDERBUFFER,Gr,gr,cr.width,cr.height),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+Kn,nt.RENDERBUFFER,_r.__webglColorRenderbuffer[Kn])}nt.bindRenderbuffer(nt.RENDERBUFFER,null),cr.depthBuffer&&(_r.__webglDepthRenderbuffer=nt.createRenderbuffer(),ar(_r.__webglDepthRenderbuffer,cr,!0)),rt.bindFramebuffer(nt.FRAMEBUFFER,null)}}if(Tr){rt.bindTexture(nt.TEXTURE_CUBE_MAP,Ir.__webglTexture),dn(nt.TEXTURE_CUBE_MAP,Qn);for(let Kn=0;Kn<6;Kn++)if(Qn.mipmaps&&Qn.mipmaps.length>0)for(let rr=0;rr<Qn.mipmaps.length;rr++)Wn(_r.__webglFramebuffer[Kn][rr],cr,Qn,nt.COLOR_ATTACHMENT0,nt.TEXTURE_CUBE_MAP_POSITIVE_X+Kn,rr);else Wn(_r.__webglFramebuffer[Kn],cr,Qn,nt.COLOR_ATTACHMENT0,nt.TEXTURE_CUBE_MAP_POSITIVE_X+Kn,0);Et(Qn)&&wt(nt.TEXTURE_CUBE_MAP),rt.unbindTexture()}else if(Wr){for(let Kn=0,rr=pr.length;Kn<rr;Kn++){const ur=pr[Kn],Sr=st.get(ur);rt.bindTexture(nt.TEXTURE_2D,Sr.__webglTexture),dn(nt.TEXTURE_2D,ur),Wn(_r.__webglFramebuffer,cr,ur,nt.COLOR_ATTACHMENT0+Kn,nt.TEXTURE_2D,0),Et(ur)&&wt(nt.TEXTURE_2D)}rt.unbindTexture()}else{let Kn=nt.TEXTURE_2D;if((cr.isWebGL3DRenderTarget||cr.isWebGLArrayRenderTarget)&&(Kn=cr.isWebGL3DRenderTarget?nt.TEXTURE_3D:nt.TEXTURE_2D_ARRAY),rt.bindTexture(Kn,Ir.__webglTexture),dn(Kn,Qn),Qn.mipmaps&&Qn.mipmaps.length>0)for(let rr=0;rr<Qn.mipmaps.length;rr++)Wn(_r.__webglFramebuffer[rr],cr,Qn,nt.COLOR_ATTACHMENT0,Kn,rr);else Wn(_r.__webglFramebuffer,cr,Qn,nt.COLOR_ATTACHMENT0,Kn,0);Et(Qn)&&wt(Kn),rt.unbindTexture()}cr.depthBuffer&&mr(cr)}function $r(cr){const Qn=cr.textures;for(let _r=0,Ir=Qn.length;_r<Ir;_r++){const pr=Qn[_r];if(Et(pr)){const Tr=cr.isWebGLCubeRenderTarget?nt.TEXTURE_CUBE_MAP:nt.TEXTURE_2D,Wr=st.get(pr).__webglTexture;rt.bindTexture(Tr,Wr),wt(Tr),rt.unbindTexture()}}}const Mr=[],Jn=[];function hr(cr){if(cr.samples>0){if(Nr(cr)===!1){const Qn=cr.textures,_r=cr.width,Ir=cr.height;let pr=nt.COLOR_BUFFER_BIT;const Tr=cr.stencilBuffer?nt.DEPTH_STENCIL_ATTACHMENT:nt.DEPTH_ATTACHMENT,Wr=st.get(cr),Kn=Qn.length>1;if(Kn)for(let rr=0;rr<Qn.length;rr++)rt.bindFramebuffer(nt.FRAMEBUFFER,Wr.__webglMultisampledFramebuffer),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+rr,nt.RENDERBUFFER,null),rt.bindFramebuffer(nt.FRAMEBUFFER,Wr.__webglFramebuffer),nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0+rr,nt.TEXTURE_2D,null,0);rt.bindFramebuffer(nt.READ_FRAMEBUFFER,Wr.__webglMultisampledFramebuffer),rt.bindFramebuffer(nt.DRAW_FRAMEBUFFER,Wr.__webglFramebuffer);for(let rr=0;rr<Qn.length;rr++){if(cr.resolveDepthBuffer&&(cr.depthBuffer&&(pr|=nt.DEPTH_BUFFER_BIT),cr.stencilBuffer&&cr.resolveStencilBuffer&&(pr|=nt.STENCIL_BUFFER_BIT)),Kn){nt.framebufferRenderbuffer(nt.READ_FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.RENDERBUFFER,Wr.__webglColorRenderbuffer[rr]);const ur=st.get(Qn[rr]).__webglTexture;nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,ur,0)}nt.blitFramebuffer(0,0,_r,Ir,0,0,_r,Ir,pr,nt.NEAREST),vt===!0&&(Mr.length=0,Jn.length=0,Mr.push(nt.COLOR_ATTACHMENT0+rr),cr.depthBuffer&&cr.resolveDepthBuffer===!1&&(Mr.push(Tr),Jn.push(Tr),nt.invalidateFramebuffer(nt.DRAW_FRAMEBUFFER,Jn)),nt.invalidateFramebuffer(nt.READ_FRAMEBUFFER,Mr))}if(rt.bindFramebuffer(nt.READ_FRAMEBUFFER,null),rt.bindFramebuffer(nt.DRAW_FRAMEBUFFER,null),Kn)for(let rr=0;rr<Qn.length;rr++){rt.bindFramebuffer(nt.FRAMEBUFFER,Wr.__webglMultisampledFramebuffer),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+rr,nt.RENDERBUFFER,Wr.__webglColorRenderbuffer[rr]);const ur=st.get(Qn[rr]).__webglTexture;rt.bindFramebuffer(nt.FRAMEBUFFER,Wr.__webglFramebuffer),nt.framebufferTexture2D(nt.DRAW_FRAMEBUFFER,nt.COLOR_ATTACHMENT0+rr,nt.TEXTURE_2D,ur,0)}rt.bindFramebuffer(nt.DRAW_FRAMEBUFFER,Wr.__webglMultisampledFramebuffer)}else if(cr.depthBuffer&&cr.resolveDepthBuffer===!1&&vt){const Qn=cr.stencilBuffer?nt.DEPTH_STENCIL_ATTACHMENT:nt.DEPTH_ATTACHMENT;nt.invalidateFramebuffer(nt.DRAW_FRAMEBUFFER,[Qn])}}}function wr(cr){return Math.min(at.maxSamples,cr.samples)}function Nr(cr){const Qn=st.get(cr);return cr.samples>0&&tt.has("WEBGL_multisampled_render_to_texture")===!0&&Qn.__useRenderToTexture!==!1}function Fr(cr){const Qn=dt.render.frame;bt.get(cr)!==Qn&&(bt.set(cr,Qn),cr.update())}function Yr(cr,Qn){const _r=cr.colorSpace,Ir=cr.format,pr=cr.type;return cr.isCompressedTexture===!0||cr.isVideoTexture===!0||_r!==LinearSRGBColorSpace&&_r!==NoColorSpace&&(ColorManagement.getTransfer(_r)===SRGBTransfer?(Ir!==RGBAFormat||pr!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_r)),Qn}function cs(cr){return typeof HTMLImageElement<"u"&&cr instanceof HTMLImageElement?(_t.width=cr.naturalWidth||cr.width,_t.height=cr.naturalHeight||cr.height):typeof VideoFrame<"u"&&cr instanceof VideoFrame?(_t.width=cr.displayWidth,_t.height=cr.displayHeight):(_t.width=cr.width,_t.height=cr.height),_t}this.allocateTextureUnit=cn,this.resetTextureUnits=nn,this.setTexture2D=mn,this.setTexture2DArray=En,this.setTexture3D=Cn,this.setTextureCube=Mn,this.rebindTextures=vr,this.setupRenderTarget=Ar,this.updateRenderTargetMipmap=$r,this.updateMultisampleRenderTarget=hr,this.setupDepthRenderbuffer=mr,this.setupFrameBufferTexture=Wn,this.useMultisampledRTT=Nr}function WebGLUtils(nt,tt){function rt(st,at=NoColorSpace){let lt;const dt=ColorManagement.getTransfer(at);if(st===UnsignedByteType)return nt.UNSIGNED_BYTE;if(st===UnsignedShort4444Type)return nt.UNSIGNED_SHORT_4_4_4_4;if(st===UnsignedShort5551Type)return nt.UNSIGNED_SHORT_5_5_5_1;if(st===UnsignedInt5999Type)return nt.UNSIGNED_INT_5_9_9_9_REV;if(st===ByteType)return nt.BYTE;if(st===ShortType)return nt.SHORT;if(st===UnsignedShortType)return nt.UNSIGNED_SHORT;if(st===IntType)return nt.INT;if(st===UnsignedIntType)return nt.UNSIGNED_INT;if(st===FloatType)return nt.FLOAT;if(st===HalfFloatType)return nt.HALF_FLOAT;if(st===AlphaFormat)return nt.ALPHA;if(st===RGBFormat)return nt.RGB;if(st===RGBAFormat)return nt.RGBA;if(st===LuminanceFormat)return nt.LUMINANCE;if(st===LuminanceAlphaFormat)return nt.LUMINANCE_ALPHA;if(st===DepthFormat)return nt.DEPTH_COMPONENT;if(st===DepthStencilFormat)return nt.DEPTH_STENCIL;if(st===RedFormat)return nt.RED;if(st===RedIntegerFormat)return nt.RED_INTEGER;if(st===RGFormat)return nt.RG;if(st===RGIntegerFormat)return nt.RG_INTEGER;if(st===RGBAIntegerFormat)return nt.RGBA_INTEGER;if(st===RGB_S3TC_DXT1_Format||st===RGBA_S3TC_DXT1_Format||st===RGBA_S3TC_DXT3_Format||st===RGBA_S3TC_DXT5_Format)if(dt===SRGBTransfer)if(lt=tt.get("WEBGL_compressed_texture_s3tc_srgb"),lt!==null){if(st===RGB_S3TC_DXT1_Format)return lt.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(st===RGBA_S3TC_DXT1_Format)return lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(st===RGBA_S3TC_DXT3_Format)return lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(st===RGBA_S3TC_DXT5_Format)return lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(lt=tt.get("WEBGL_compressed_texture_s3tc"),lt!==null){if(st===RGB_S3TC_DXT1_Format)return lt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(st===RGBA_S3TC_DXT1_Format)return lt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(st===RGBA_S3TC_DXT3_Format)return lt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(st===RGBA_S3TC_DXT5_Format)return lt.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(st===RGB_PVRTC_4BPPV1_Format||st===RGB_PVRTC_2BPPV1_Format||st===RGBA_PVRTC_4BPPV1_Format||st===RGBA_PVRTC_2BPPV1_Format)if(lt=tt.get("WEBGL_compressed_texture_pvrtc"),lt!==null){if(st===RGB_PVRTC_4BPPV1_Format)return lt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(st===RGB_PVRTC_2BPPV1_Format)return lt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(st===RGBA_PVRTC_4BPPV1_Format)return lt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(st===RGBA_PVRTC_2BPPV1_Format)return lt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(st===RGB_ETC1_Format||st===RGB_ETC2_Format||st===RGBA_ETC2_EAC_Format)if(lt=tt.get("WEBGL_compressed_texture_etc"),lt!==null){if(st===RGB_ETC1_Format||st===RGB_ETC2_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ETC2:lt.COMPRESSED_RGB8_ETC2;if(st===RGBA_ETC2_EAC_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:lt.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(st===RGBA_ASTC_4x4_Format||st===RGBA_ASTC_5x4_Format||st===RGBA_ASTC_5x5_Format||st===RGBA_ASTC_6x5_Format||st===RGBA_ASTC_6x6_Format||st===RGBA_ASTC_8x5_Format||st===RGBA_ASTC_8x6_Format||st===RGBA_ASTC_8x8_Format||st===RGBA_ASTC_10x5_Format||st===RGBA_ASTC_10x6_Format||st===RGBA_ASTC_10x8_Format||st===RGBA_ASTC_10x10_Format||st===RGBA_ASTC_12x10_Format||st===RGBA_ASTC_12x12_Format)if(lt=tt.get("WEBGL_compressed_texture_astc"),lt!==null){if(st===RGBA_ASTC_4x4_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:lt.COMPRESSED_RGBA_ASTC_4x4_KHR;if(st===RGBA_ASTC_5x4_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:lt.COMPRESSED_RGBA_ASTC_5x4_KHR;if(st===RGBA_ASTC_5x5_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:lt.COMPRESSED_RGBA_ASTC_5x5_KHR;if(st===RGBA_ASTC_6x5_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:lt.COMPRESSED_RGBA_ASTC_6x5_KHR;if(st===RGBA_ASTC_6x6_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:lt.COMPRESSED_RGBA_ASTC_6x6_KHR;if(st===RGBA_ASTC_8x5_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:lt.COMPRESSED_RGBA_ASTC_8x5_KHR;if(st===RGBA_ASTC_8x6_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:lt.COMPRESSED_RGBA_ASTC_8x6_KHR;if(st===RGBA_ASTC_8x8_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:lt.COMPRESSED_RGBA_ASTC_8x8_KHR;if(st===RGBA_ASTC_10x5_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:lt.COMPRESSED_RGBA_ASTC_10x5_KHR;if(st===RGBA_ASTC_10x6_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:lt.COMPRESSED_RGBA_ASTC_10x6_KHR;if(st===RGBA_ASTC_10x8_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:lt.COMPRESSED_RGBA_ASTC_10x8_KHR;if(st===RGBA_ASTC_10x10_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:lt.COMPRESSED_RGBA_ASTC_10x10_KHR;if(st===RGBA_ASTC_12x10_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:lt.COMPRESSED_RGBA_ASTC_12x10_KHR;if(st===RGBA_ASTC_12x12_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:lt.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(st===RGBA_BPTC_Format||st===RGB_BPTC_SIGNED_Format||st===RGB_BPTC_UNSIGNED_Format)if(lt=tt.get("EXT_texture_compression_bptc"),lt!==null){if(st===RGBA_BPTC_Format)return dt===SRGBTransfer?lt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:lt.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(st===RGB_BPTC_SIGNED_Format)return lt.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(st===RGB_BPTC_UNSIGNED_Format)return lt.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(st===RED_RGTC1_Format||st===SIGNED_RED_RGTC1_Format||st===RED_GREEN_RGTC2_Format||st===SIGNED_RED_GREEN_RGTC2_Format)if(lt=tt.get("EXT_texture_compression_rgtc"),lt!==null){if(st===RGBA_BPTC_Format)return lt.COMPRESSED_RED_RGTC1_EXT;if(st===SIGNED_RED_RGTC1_Format)return lt.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(st===RED_GREEN_RGTC2_Format)return lt.COMPRESSED_RED_GREEN_RGTC2_EXT;if(st===SIGNED_RED_GREEN_RGTC2_Format)return lt.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return st===UnsignedInt248Type?nt.UNSIGNED_INT_24_8:nt[st]!==void 0?nt[st]:null}return{convert:rt}}class ArrayCamera extends PerspectiveCamera{constructor(tt=[]){super(),this.isArrayCamera=!0,this.cameras=tt}}let Group$1=class extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}};const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group$1,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group$1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group$1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(tt){return this._targetRay!==null&&this._targetRay.dispatchEvent(tt),this._grip!==null&&this._grip.dispatchEvent(tt),this._hand!==null&&this._hand.dispatchEvent(tt),this}connect(tt){if(tt&&tt.hand){const rt=this._hand;if(rt)for(const st of tt.hand.values())this._getHandJoint(rt,st)}return this.dispatchEvent({type:"connected",data:tt}),this}disconnect(tt){return this.dispatchEvent({type:"disconnected",data:tt}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(tt,rt,st){let at=null,lt=null,dt=null;const yt=this._targetRay,vt=this._grip,_t=this._hand;if(tt&&rt.session.visibilityState!=="visible-blurred"){if(_t&&tt.hand){dt=!0;for(const Rt of tt.hand.values()){const Et=rt.getJointPose(Rt,st),wt=this._getHandJoint(_t,Rt);Et!==null&&(wt.matrix.fromArray(Et.transform.matrix),wt.matrix.decompose(wt.position,wt.rotation,wt.scale),wt.matrixWorldNeedsUpdate=!0,wt.jointRadius=Et.radius),wt.visible=Et!==null}const bt=_t.joints["index-finger-tip"],Mt=_t.joints["thumb-tip"],Ct=bt.position.distanceTo(Mt.position),Tt=.02,$t=.005;_t.inputState.pinching&&Ct>Tt+$t?(_t.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:tt.handedness,target:this})):!_t.inputState.pinching&&Ct<=Tt-$t&&(_t.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:tt.handedness,target:this}))}else vt!==null&&tt.gripSpace&&(lt=rt.getPose(tt.gripSpace,st),lt!==null&&(vt.matrix.fromArray(lt.transform.matrix),vt.matrix.decompose(vt.position,vt.rotation,vt.scale),vt.matrixWorldNeedsUpdate=!0,lt.linearVelocity?(vt.hasLinearVelocity=!0,vt.linearVelocity.copy(lt.linearVelocity)):vt.hasLinearVelocity=!1,lt.angularVelocity?(vt.hasAngularVelocity=!0,vt.angularVelocity.copy(lt.angularVelocity)):vt.hasAngularVelocity=!1));yt!==null&&(at=rt.getPose(tt.targetRaySpace,st),at===null&&lt!==null&&(at=lt),at!==null&&(yt.matrix.fromArray(at.transform.matrix),yt.matrix.decompose(yt.position,yt.rotation,yt.scale),yt.matrixWorldNeedsUpdate=!0,at.linearVelocity?(yt.hasLinearVelocity=!0,yt.linearVelocity.copy(at.linearVelocity)):yt.hasLinearVelocity=!1,at.angularVelocity?(yt.hasAngularVelocity=!0,yt.angularVelocity.copy(at.angularVelocity)):yt.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return yt!==null&&(yt.visible=at!==null),vt!==null&&(vt.visible=lt!==null),_t!==null&&(_t.visible=dt!==null),this}_getHandJoint(tt,rt){if(tt.joints[rt.jointName]===void 0){const st=new Group$1;st.matrixAutoUpdate=!1,st.visible=!1,tt.joints[rt.jointName]=st,tt.add(st)}return tt.joints[rt.jointName]}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(tt,rt,st){if(this.texture===null){const at=new Texture,lt=tt.properties.get(at);lt.__webglTexture=rt.texture,(rt.depthNear!=st.depthNear||rt.depthFar!=st.depthFar)&&(this.depthNear=rt.depthNear,this.depthFar=rt.depthFar),this.texture=at}}getMesh(tt){if(this.texture!==null&&this.mesh===null){const rt=tt.cameras[0].viewport,st=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:rt.z},depthHeight:{value:rt.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),st)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher{constructor(tt,rt){super();const st=this;let at=null,lt=1,dt=null,yt="local-floor",vt=1,_t=null,bt=null,Mt=null,Ct=null,Tt=null,$t=null;const Rt=new WebXRDepthSensing,Et=rt.getContextAttributes();let wt=null,Pt=null;const Ft=[],Nt=[],Ot=new Vector2;let Bt=null;const Xt=new PerspectiveCamera;Xt.layers.enable(1),Xt.viewport=new Vector4;const Zt=new PerspectiveCamera;Zt.layers.enable(2),Zt.viewport=new Vector4;const rn=[Xt,Zt],Gt=new ArrayCamera;Gt.layers.enable(1),Gt.layers.enable(2);let nn=null,cn=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(In){let Wn=Ft[In];return Wn===void 0&&(Wn=new WebXRController,Ft[In]=Wn),Wn.getTargetRaySpace()},this.getControllerGrip=function(In){let Wn=Ft[In];return Wn===void 0&&(Wn=new WebXRController,Ft[In]=Wn),Wn.getGripSpace()},this.getHand=function(In){let Wn=Ft[In];return Wn===void 0&&(Wn=new WebXRController,Ft[In]=Wn),Wn.getHandSpace()};function an(In){const Wn=Nt.indexOf(In.inputSource);if(Wn===-1)return;const ar=Ft[Wn];ar!==void 0&&(ar.update(In.inputSource,In.frame,_t||dt),ar.dispatchEvent({type:In.type,data:In.inputSource}))}function mn(){at.removeEventListener("select",an),at.removeEventListener("selectstart",an),at.removeEventListener("selectend",an),at.removeEventListener("squeeze",an),at.removeEventListener("squeezestart",an),at.removeEventListener("squeezeend",an),at.removeEventListener("end",mn),at.removeEventListener("inputsourceschange",En);for(let In=0;In<Ft.length;In++){const Wn=Nt[In];Wn!==null&&(Nt[In]=null,Ft[In].disconnect(Wn))}nn=null,cn=null,Rt.reset(),tt.setRenderTarget(wt),Tt=null,Ct=null,Mt=null,at=null,Pt=null,qn.stop(),st.isPresenting=!1,tt.setPixelRatio(Bt),tt.setSize(Ot.width,Ot.height,!1),st.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(In){lt=In,st.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(In){yt=In,st.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return _t||dt},this.setReferenceSpace=function(In){_t=In},this.getBaseLayer=function(){return Ct!==null?Ct:Tt},this.getBinding=function(){return Mt},this.getFrame=function(){return $t},this.getSession=function(){return at},this.setSession=async function(In){if(at=In,at!==null){if(wt=tt.getRenderTarget(),at.addEventListener("select",an),at.addEventListener("selectstart",an),at.addEventListener("selectend",an),at.addEventListener("squeeze",an),at.addEventListener("squeezestart",an),at.addEventListener("squeezeend",an),at.addEventListener("end",mn),at.addEventListener("inputsourceschange",En),Et.xrCompatible!==!0&&await rt.makeXRCompatible(),Bt=tt.getPixelRatio(),tt.getSize(Ot),at.renderState.layers===void 0){const Wn={antialias:Et.antialias,alpha:!0,depth:Et.depth,stencil:Et.stencil,framebufferScaleFactor:lt};Tt=new XRWebGLLayer(at,rt,Wn),at.updateRenderState({baseLayer:Tt}),tt.setPixelRatio(1),tt.setSize(Tt.framebufferWidth,Tt.framebufferHeight,!1),Pt=new WebGLRenderTarget(Tt.framebufferWidth,Tt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:tt.outputColorSpace,stencilBuffer:Et.stencil})}else{let Wn=null,ar=null,fr=null;Et.depth&&(fr=Et.stencil?rt.DEPTH24_STENCIL8:rt.DEPTH_COMPONENT24,Wn=Et.stencil?DepthStencilFormat:DepthFormat,ar=Et.stencil?UnsignedInt248Type:UnsignedIntType);const mr={colorFormat:rt.RGBA8,depthFormat:fr,scaleFactor:lt};Mt=new XRWebGLBinding(at,rt),Ct=Mt.createProjectionLayer(mr),at.updateRenderState({layers:[Ct]}),tt.setPixelRatio(1),tt.setSize(Ct.textureWidth,Ct.textureHeight,!1),Pt=new WebGLRenderTarget(Ct.textureWidth,Ct.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(Ct.textureWidth,Ct.textureHeight,ar,void 0,void 0,void 0,void 0,void 0,void 0,Wn),stencilBuffer:Et.stencil,colorSpace:tt.outputColorSpace,samples:Et.antialias?4:0,resolveDepthBuffer:Ct.ignoreDepthValues===!1})}Pt.isXRRenderTarget=!0,this.setFoveation(vt),_t=null,dt=await at.requestReferenceSpace(yt),qn.setContext(at),qn.start(),st.isPresenting=!0,st.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(at!==null)return at.environmentBlendMode},this.getDepthTexture=function(){return Rt.getDepthTexture()};function En(In){for(let Wn=0;Wn<In.removed.length;Wn++){const ar=In.removed[Wn],fr=Nt.indexOf(ar);fr>=0&&(Nt[fr]=null,Ft[fr].disconnect(ar))}for(let Wn=0;Wn<In.added.length;Wn++){const ar=In.added[Wn];let fr=Nt.indexOf(ar);if(fr===-1){for(let vr=0;vr<Ft.length;vr++)if(vr>=Nt.length){Nt.push(ar),fr=vr;break}else if(Nt[vr]===null){Nt[vr]=ar,fr=vr;break}if(fr===-1)break}const mr=Ft[fr];mr&&mr.connect(ar)}}const Cn=new Vector3,Mn=new Vector3;function un(In,Wn,ar){Cn.setFromMatrixPosition(Wn.matrixWorld),Mn.setFromMatrixPosition(ar.matrixWorld);const fr=Cn.distanceTo(Mn),mr=Wn.projectionMatrix.elements,vr=ar.projectionMatrix.elements,Ar=mr[14]/(mr[10]-1),$r=mr[14]/(mr[10]+1),Mr=(mr[9]+1)/mr[5],Jn=(mr[9]-1)/mr[5],hr=(mr[8]-1)/mr[0],wr=(vr[8]+1)/vr[0],Nr=Ar*hr,Fr=Ar*wr,Yr=fr/(-hr+wr),cs=Yr*-hr;if(Wn.matrixWorld.decompose(In.position,In.quaternion,In.scale),In.translateX(cs),In.translateZ(Yr),In.matrixWorld.compose(In.position,In.quaternion,In.scale),In.matrixWorldInverse.copy(In.matrixWorld).invert(),mr[10]===-1)In.projectionMatrix.copy(Wn.projectionMatrix),In.projectionMatrixInverse.copy(Wn.projectionMatrixInverse);else{const cr=Ar+Yr,Qn=$r+Yr,_r=Nr-cs,Ir=Fr+(fr-cs),pr=Mr*$r/Qn*cr,Tr=Jn*$r/Qn*cr;In.projectionMatrix.makePerspective(_r,Ir,pr,Tr,cr,Qn),In.projectionMatrixInverse.copy(In.projectionMatrix).invert()}}function Tn(In,Wn){Wn===null?In.matrixWorld.copy(In.matrix):In.matrixWorld.multiplyMatrices(Wn.matrixWorld,In.matrix),In.matrixWorldInverse.copy(In.matrixWorld).invert()}this.updateCamera=function(In){if(at===null)return;let Wn=In.near,ar=In.far;Rt.texture!==null&&(Rt.depthNear>0&&(Wn=Rt.depthNear),Rt.depthFar>0&&(ar=Rt.depthFar)),Gt.near=Zt.near=Xt.near=Wn,Gt.far=Zt.far=Xt.far=ar,(nn!==Gt.near||cn!==Gt.far)&&(at.updateRenderState({depthNear:Gt.near,depthFar:Gt.far}),nn=Gt.near,cn=Gt.far);const fr=In.parent,mr=Gt.cameras;Tn(Gt,fr);for(let vr=0;vr<mr.length;vr++)Tn(mr[vr],fr);mr.length===2?un(Gt,Xt,Zt):Gt.projectionMatrix.copy(Xt.projectionMatrix),Pn(In,Gt,fr)};function Pn(In,Wn,ar){ar===null?In.matrix.copy(Wn.matrixWorld):(In.matrix.copy(ar.matrixWorld),In.matrix.invert(),In.matrix.multiply(Wn.matrixWorld)),In.matrix.decompose(In.position,In.quaternion,In.scale),In.updateMatrixWorld(!0),In.projectionMatrix.copy(Wn.projectionMatrix),In.projectionMatrixInverse.copy(Wn.projectionMatrixInverse),In.isPerspectiveCamera&&(In.fov=RAD2DEG*2*Math.atan(1/In.projectionMatrix.elements[5]),In.zoom=1)}this.getCamera=function(){return Gt},this.getFoveation=function(){if(!(Ct===null&&Tt===null))return vt},this.setFoveation=function(In){vt=In,Ct!==null&&(Ct.fixedFoveation=In),Tt!==null&&Tt.fixedFoveation!==void 0&&(Tt.fixedFoveation=In)},this.hasDepthSensing=function(){return Rt.texture!==null},this.getDepthSensingMesh=function(){return Rt.getMesh(Gt)};let dn=null;function Un(In,Wn){if(bt=Wn.getViewerPose(_t||dt),$t=Wn,bt!==null){const ar=bt.views;Tt!==null&&(tt.setRenderTargetFramebuffer(Pt,Tt.framebuffer),tt.setRenderTarget(Pt));let fr=!1;ar.length!==Gt.cameras.length&&(Gt.cameras.length=0,fr=!0);for(let vr=0;vr<ar.length;vr++){const Ar=ar[vr];let $r=null;if(Tt!==null)$r=Tt.getViewport(Ar);else{const Jn=Mt.getViewSubImage(Ct,Ar);$r=Jn.viewport,vr===0&&(tt.setRenderTargetTextures(Pt,Jn.colorTexture,Ct.ignoreDepthValues?void 0:Jn.depthStencilTexture),tt.setRenderTarget(Pt))}let Mr=rn[vr];Mr===void 0&&(Mr=new PerspectiveCamera,Mr.layers.enable(vr),Mr.viewport=new Vector4,rn[vr]=Mr),Mr.matrix.fromArray(Ar.transform.matrix),Mr.matrix.decompose(Mr.position,Mr.quaternion,Mr.scale),Mr.projectionMatrix.fromArray(Ar.projectionMatrix),Mr.projectionMatrixInverse.copy(Mr.projectionMatrix).invert(),Mr.viewport.set($r.x,$r.y,$r.width,$r.height),vr===0&&(Gt.matrix.copy(Mr.matrix),Gt.matrix.decompose(Gt.position,Gt.quaternion,Gt.scale)),fr===!0&&Gt.cameras.push(Mr)}const mr=at.enabledFeatures;if(mr&&mr.includes("depth-sensing")){const vr=Mt.getDepthInformation(ar[0]);vr&&vr.isValid&&vr.texture&&Rt.init(tt,vr,at.renderState)}}for(let ar=0;ar<Ft.length;ar++){const fr=Nt[ar],mr=Ft[ar];fr!==null&&mr!==void 0&&mr.update(fr,Wn,_t||dt)}dn&&dn(In,Wn),Wn.detectedPlanes&&st.dispatchEvent({type:"planesdetected",data:Wn}),$t=null}const qn=new WebGLAnimation;qn.setAnimationLoop(Un),this.setAnimationLoop=function(In){dn=In},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(nt,tt){function rt(Et,wt){Et.matrixAutoUpdate===!0&&Et.updateMatrix(),wt.value.copy(Et.matrix)}function st(Et,wt){wt.color.getRGB(Et.fogColor.value,getUnlitUniformColorSpace(nt)),wt.isFog?(Et.fogNear.value=wt.near,Et.fogFar.value=wt.far):wt.isFogExp2&&(Et.fogDensity.value=wt.density)}function at(Et,wt,Pt,Ft,Nt){wt.isMeshBasicMaterial||wt.isMeshLambertMaterial?lt(Et,wt):wt.isMeshToonMaterial?(lt(Et,wt),Mt(Et,wt)):wt.isMeshPhongMaterial?(lt(Et,wt),bt(Et,wt)):wt.isMeshStandardMaterial?(lt(Et,wt),Ct(Et,wt),wt.isMeshPhysicalMaterial&&Tt(Et,wt,Nt)):wt.isMeshMatcapMaterial?(lt(Et,wt),$t(Et,wt)):wt.isMeshDepthMaterial?lt(Et,wt):wt.isMeshDistanceMaterial?(lt(Et,wt),Rt(Et,wt)):wt.isMeshNormalMaterial?lt(Et,wt):wt.isLineBasicMaterial?(dt(Et,wt),wt.isLineDashedMaterial&&yt(Et,wt)):wt.isPointsMaterial?vt(Et,wt,Pt,Ft):wt.isSpriteMaterial?_t(Et,wt):wt.isShadowMaterial?(Et.color.value.copy(wt.color),Et.opacity.value=wt.opacity):wt.isShaderMaterial&&(wt.uniformsNeedUpdate=!1)}function lt(Et,wt){Et.opacity.value=wt.opacity,wt.color&&Et.diffuse.value.copy(wt.color),wt.emissive&&Et.emissive.value.copy(wt.emissive).multiplyScalar(wt.emissiveIntensity),wt.map&&(Et.map.value=wt.map,rt(wt.map,Et.mapTransform)),wt.alphaMap&&(Et.alphaMap.value=wt.alphaMap,rt(wt.alphaMap,Et.alphaMapTransform)),wt.bumpMap&&(Et.bumpMap.value=wt.bumpMap,rt(wt.bumpMap,Et.bumpMapTransform),Et.bumpScale.value=wt.bumpScale,wt.side===BackSide&&(Et.bumpScale.value*=-1)),wt.normalMap&&(Et.normalMap.value=wt.normalMap,rt(wt.normalMap,Et.normalMapTransform),Et.normalScale.value.copy(wt.normalScale),wt.side===BackSide&&Et.normalScale.value.negate()),wt.displacementMap&&(Et.displacementMap.value=wt.displacementMap,rt(wt.displacementMap,Et.displacementMapTransform),Et.displacementScale.value=wt.displacementScale,Et.displacementBias.value=wt.displacementBias),wt.emissiveMap&&(Et.emissiveMap.value=wt.emissiveMap,rt(wt.emissiveMap,Et.emissiveMapTransform)),wt.specularMap&&(Et.specularMap.value=wt.specularMap,rt(wt.specularMap,Et.specularMapTransform)),wt.alphaTest>0&&(Et.alphaTest.value=wt.alphaTest);const Pt=tt.get(wt),Ft=Pt.envMap,Nt=Pt.envMapRotation;Ft&&(Et.envMap.value=Ft,_e1.copy(Nt),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,Ft.isCubeTexture&&Ft.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),Et.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),Et.flipEnvMap.value=Ft.isCubeTexture&&Ft.isRenderTargetTexture===!1?-1:1,Et.reflectivity.value=wt.reflectivity,Et.ior.value=wt.ior,Et.refractionRatio.value=wt.refractionRatio),wt.lightMap&&(Et.lightMap.value=wt.lightMap,Et.lightMapIntensity.value=wt.lightMapIntensity,rt(wt.lightMap,Et.lightMapTransform)),wt.aoMap&&(Et.aoMap.value=wt.aoMap,Et.aoMapIntensity.value=wt.aoMapIntensity,rt(wt.aoMap,Et.aoMapTransform))}function dt(Et,wt){Et.diffuse.value.copy(wt.color),Et.opacity.value=wt.opacity,wt.map&&(Et.map.value=wt.map,rt(wt.map,Et.mapTransform))}function yt(Et,wt){Et.dashSize.value=wt.dashSize,Et.totalSize.value=wt.dashSize+wt.gapSize,Et.scale.value=wt.scale}function vt(Et,wt,Pt,Ft){Et.diffuse.value.copy(wt.color),Et.opacity.value=wt.opacity,Et.size.value=wt.size*Pt,Et.scale.value=Ft*.5,wt.map&&(Et.map.value=wt.map,rt(wt.map,Et.uvTransform)),wt.alphaMap&&(Et.alphaMap.value=wt.alphaMap,rt(wt.alphaMap,Et.alphaMapTransform)),wt.alphaTest>0&&(Et.alphaTest.value=wt.alphaTest)}function _t(Et,wt){Et.diffuse.value.copy(wt.color),Et.opacity.value=wt.opacity,Et.rotation.value=wt.rotation,wt.map&&(Et.map.value=wt.map,rt(wt.map,Et.mapTransform)),wt.alphaMap&&(Et.alphaMap.value=wt.alphaMap,rt(wt.alphaMap,Et.alphaMapTransform)),wt.alphaTest>0&&(Et.alphaTest.value=wt.alphaTest)}function bt(Et,wt){Et.specular.value.copy(wt.specular),Et.shininess.value=Math.max(wt.shininess,1e-4)}function Mt(Et,wt){wt.gradientMap&&(Et.gradientMap.value=wt.gradientMap)}function Ct(Et,wt){Et.metalness.value=wt.metalness,wt.metalnessMap&&(Et.metalnessMap.value=wt.metalnessMap,rt(wt.metalnessMap,Et.metalnessMapTransform)),Et.roughness.value=wt.roughness,wt.roughnessMap&&(Et.roughnessMap.value=wt.roughnessMap,rt(wt.roughnessMap,Et.roughnessMapTransform)),wt.envMap&&(Et.envMapIntensity.value=wt.envMapIntensity)}function Tt(Et,wt,Pt){Et.ior.value=wt.ior,wt.sheen>0&&(Et.sheenColor.value.copy(wt.sheenColor).multiplyScalar(wt.sheen),Et.sheenRoughness.value=wt.sheenRoughness,wt.sheenColorMap&&(Et.sheenColorMap.value=wt.sheenColorMap,rt(wt.sheenColorMap,Et.sheenColorMapTransform)),wt.sheenRoughnessMap&&(Et.sheenRoughnessMap.value=wt.sheenRoughnessMap,rt(wt.sheenRoughnessMap,Et.sheenRoughnessMapTransform))),wt.clearcoat>0&&(Et.clearcoat.value=wt.clearcoat,Et.clearcoatRoughness.value=wt.clearcoatRoughness,wt.clearcoatMap&&(Et.clearcoatMap.value=wt.clearcoatMap,rt(wt.clearcoatMap,Et.clearcoatMapTransform)),wt.clearcoatRoughnessMap&&(Et.clearcoatRoughnessMap.value=wt.clearcoatRoughnessMap,rt(wt.clearcoatRoughnessMap,Et.clearcoatRoughnessMapTransform)),wt.clearcoatNormalMap&&(Et.clearcoatNormalMap.value=wt.clearcoatNormalMap,rt(wt.clearcoatNormalMap,Et.clearcoatNormalMapTransform),Et.clearcoatNormalScale.value.copy(wt.clearcoatNormalScale),wt.side===BackSide&&Et.clearcoatNormalScale.value.negate())),wt.dispersion>0&&(Et.dispersion.value=wt.dispersion),wt.iridescence>0&&(Et.iridescence.value=wt.iridescence,Et.iridescenceIOR.value=wt.iridescenceIOR,Et.iridescenceThicknessMinimum.value=wt.iridescenceThicknessRange[0],Et.iridescenceThicknessMaximum.value=wt.iridescenceThicknessRange[1],wt.iridescenceMap&&(Et.iridescenceMap.value=wt.iridescenceMap,rt(wt.iridescenceMap,Et.iridescenceMapTransform)),wt.iridescenceThicknessMap&&(Et.iridescenceThicknessMap.value=wt.iridescenceThicknessMap,rt(wt.iridescenceThicknessMap,Et.iridescenceThicknessMapTransform))),wt.transmission>0&&(Et.transmission.value=wt.transmission,Et.transmissionSamplerMap.value=Pt.texture,Et.transmissionSamplerSize.value.set(Pt.width,Pt.height),wt.transmissionMap&&(Et.transmissionMap.value=wt.transmissionMap,rt(wt.transmissionMap,Et.transmissionMapTransform)),Et.thickness.value=wt.thickness,wt.thicknessMap&&(Et.thicknessMap.value=wt.thicknessMap,rt(wt.thicknessMap,Et.thicknessMapTransform)),Et.attenuationDistance.value=wt.attenuationDistance,Et.attenuationColor.value.copy(wt.attenuationColor)),wt.anisotropy>0&&(Et.anisotropyVector.value.set(wt.anisotropy*Math.cos(wt.anisotropyRotation),wt.anisotropy*Math.sin(wt.anisotropyRotation)),wt.anisotropyMap&&(Et.anisotropyMap.value=wt.anisotropyMap,rt(wt.anisotropyMap,Et.anisotropyMapTransform))),Et.specularIntensity.value=wt.specularIntensity,Et.specularColor.value.copy(wt.specularColor),wt.specularColorMap&&(Et.specularColorMap.value=wt.specularColorMap,rt(wt.specularColorMap,Et.specularColorMapTransform)),wt.specularIntensityMap&&(Et.specularIntensityMap.value=wt.specularIntensityMap,rt(wt.specularIntensityMap,Et.specularIntensityMapTransform))}function $t(Et,wt){wt.matcap&&(Et.matcap.value=wt.matcap)}function Rt(Et,wt){const Pt=tt.get(wt).light;Et.referencePosition.value.setFromMatrixPosition(Pt.matrixWorld),Et.nearDistance.value=Pt.shadow.camera.near,Et.farDistance.value=Pt.shadow.camera.far}return{refreshFogUniforms:st,refreshMaterialUniforms:at}}function WebGLUniformsGroups(nt,tt,rt,st){let at={},lt={},dt=[];const yt=nt.getParameter(nt.MAX_UNIFORM_BUFFER_BINDINGS);function vt(Pt,Ft){const Nt=Ft.program;st.uniformBlockBinding(Pt,Nt)}function _t(Pt,Ft){let Nt=at[Pt.id];Nt===void 0&&($t(Pt),Nt=bt(Pt),at[Pt.id]=Nt,Pt.addEventListener("dispose",Et));const Ot=Ft.program;st.updateUBOMapping(Pt,Ot);const Bt=tt.render.frame;lt[Pt.id]!==Bt&&(Ct(Pt),lt[Pt.id]=Bt)}function bt(Pt){const Ft=Mt();Pt.__bindingPointIndex=Ft;const Nt=nt.createBuffer(),Ot=Pt.__size,Bt=Pt.usage;return nt.bindBuffer(nt.UNIFORM_BUFFER,Nt),nt.bufferData(nt.UNIFORM_BUFFER,Ot,Bt),nt.bindBuffer(nt.UNIFORM_BUFFER,null),nt.bindBufferBase(nt.UNIFORM_BUFFER,Ft,Nt),Nt}function Mt(){for(let Pt=0;Pt<yt;Pt++)if(dt.indexOf(Pt)===-1)return dt.push(Pt),Pt;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Ct(Pt){const Ft=at[Pt.id],Nt=Pt.uniforms,Ot=Pt.__cache;nt.bindBuffer(nt.UNIFORM_BUFFER,Ft);for(let Bt=0,Xt=Nt.length;Bt<Xt;Bt++){const Zt=Array.isArray(Nt[Bt])?Nt[Bt]:[Nt[Bt]];for(let rn=0,Gt=Zt.length;rn<Gt;rn++){const nn=Zt[rn];if(Tt(nn,Bt,rn,Ot)===!0){const cn=nn.__offset,an=Array.isArray(nn.value)?nn.value:[nn.value];let mn=0;for(let En=0;En<an.length;En++){const Cn=an[En],Mn=Rt(Cn);typeof Cn=="number"||typeof Cn=="boolean"?(nn.__data[0]=Cn,nt.bufferSubData(nt.UNIFORM_BUFFER,cn+mn,nn.__data)):Cn.isMatrix3?(nn.__data[0]=Cn.elements[0],nn.__data[1]=Cn.elements[1],nn.__data[2]=Cn.elements[2],nn.__data[3]=0,nn.__data[4]=Cn.elements[3],nn.__data[5]=Cn.elements[4],nn.__data[6]=Cn.elements[5],nn.__data[7]=0,nn.__data[8]=Cn.elements[6],nn.__data[9]=Cn.elements[7],nn.__data[10]=Cn.elements[8],nn.__data[11]=0):(Cn.toArray(nn.__data,mn),mn+=Mn.storage/Float32Array.BYTES_PER_ELEMENT)}nt.bufferSubData(nt.UNIFORM_BUFFER,cn,nn.__data)}}}nt.bindBuffer(nt.UNIFORM_BUFFER,null)}function Tt(Pt,Ft,Nt,Ot){const Bt=Pt.value,Xt=Ft+"_"+Nt;if(Ot[Xt]===void 0)return typeof Bt=="number"||typeof Bt=="boolean"?Ot[Xt]=Bt:Ot[Xt]=Bt.clone(),!0;{const Zt=Ot[Xt];if(typeof Bt=="number"||typeof Bt=="boolean"){if(Zt!==Bt)return Ot[Xt]=Bt,!0}else if(Zt.equals(Bt)===!1)return Zt.copy(Bt),!0}return!1}function $t(Pt){const Ft=Pt.uniforms;let Nt=0;const Ot=16;for(let Xt=0,Zt=Ft.length;Xt<Zt;Xt++){const rn=Array.isArray(Ft[Xt])?Ft[Xt]:[Ft[Xt]];for(let Gt=0,nn=rn.length;Gt<nn;Gt++){const cn=rn[Gt],an=Array.isArray(cn.value)?cn.value:[cn.value];for(let mn=0,En=an.length;mn<En;mn++){const Cn=an[mn],Mn=Rt(Cn),un=Nt%Ot,Tn=un%Mn.boundary,Pn=un+Tn;Nt+=Tn,Pn!==0&&Ot-Pn<Mn.storage&&(Nt+=Ot-Pn),cn.__data=new Float32Array(Mn.storage/Float32Array.BYTES_PER_ELEMENT),cn.__offset=Nt,Nt+=Mn.storage}}}const Bt=Nt%Ot;return Bt>0&&(Nt+=Ot-Bt),Pt.__size=Nt,Pt.__cache={},this}function Rt(Pt){const Ft={boundary:0,storage:0};return typeof Pt=="number"||typeof Pt=="boolean"?(Ft.boundary=4,Ft.storage=4):Pt.isVector2?(Ft.boundary=8,Ft.storage=8):Pt.isVector3||Pt.isColor?(Ft.boundary=16,Ft.storage=12):Pt.isVector4?(Ft.boundary=16,Ft.storage=16):Pt.isMatrix3?(Ft.boundary=48,Ft.storage=48):Pt.isMatrix4?(Ft.boundary=64,Ft.storage=64):Pt.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Pt),Ft}function Et(Pt){const Ft=Pt.target;Ft.removeEventListener("dispose",Et);const Nt=dt.indexOf(Ft.__bindingPointIndex);dt.splice(Nt,1),nt.deleteBuffer(at[Ft.id]),delete at[Ft.id],delete lt[Ft.id]}function wt(){for(const Pt in at)nt.deleteBuffer(at[Pt]);dt=[],at={},lt={}}return{bind:vt,update:_t,dispose:wt}}class WebGLRenderer{constructor(tt={}){const{canvas:rt=createCanvasElement(),context:st=null,depth:at=!0,stencil:lt=!1,alpha:dt=!1,antialias:yt=!1,premultipliedAlpha:vt=!0,preserveDrawingBuffer:_t=!1,powerPreference:bt="default",failIfMajorPerformanceCaveat:Mt=!1}=tt;this.isWebGLRenderer=!0;let Ct;if(st!==null){if(typeof WebGLRenderingContext<"u"&&st instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");Ct=st.getContextAttributes().alpha}else Ct=dt;const Tt=new Uint32Array(4),$t=new Int32Array(4);let Rt=null,Et=null;const wt=[],Pt=[];this.domElement=rt,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const Ft=this;let Nt=!1,Ot=0,Bt=0,Xt=null,Zt=-1,rn=null;const Gt=new Vector4,nn=new Vector4;let cn=null;const an=new Color$1(0);let mn=0,En=rt.width,Cn=rt.height,Mn=1,un=null,Tn=null;const Pn=new Vector4(0,0,En,Cn),dn=new Vector4(0,0,En,Cn);let Un=!1;const qn=new Frustum;let In=!1,Wn=!1;const ar=new Matrix4,fr=new Matrix4,mr=new Vector3,vr=new Vector4,Ar={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let $r=!1;function Mr(){return Xt===null?Mn:1}let Jn=st;function hr(br,ls){return rt.getContext(br,ls)}try{const br={alpha:!0,depth:at,stencil:lt,antialias:yt,premultipliedAlpha:vt,preserveDrawingBuffer:_t,powerPreference:bt,failIfMajorPerformanceCaveat:Mt};if("setAttribute"in rt&&rt.setAttribute("data-engine",`three.js r${REVISION}`),rt.addEventListener("webglcontextlost",kr,!1),rt.addEventListener("webglcontextrestored",Cs,!1),rt.addEventListener("webglcontextcreationerror",Fn,!1),Jn===null){const ls="webgl2";if(Jn=hr(ls,br),Jn===null)throw hr(ls)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(br){throw console.error("THREE.WebGLRenderer: "+br.message),br}let wr,Nr,Fr,Yr,cs,cr,Qn,_r,Ir,pr,Tr,Wr,Kn,rr,ur,Sr,gr,Gr,jr,er,yr,Er,Hr,lr;function Br(){wr=new WebGLExtensions(Jn),wr.init(),Er=new WebGLUtils(Jn,wr),Nr=new WebGLCapabilities(Jn,wr,tt,Er),Fr=new WebGLState(Jn),Nr.reverseDepthBuffer&&Fr.buffers.depth.setReversed(!0),Yr=new WebGLInfo(Jn),cs=new WebGLProperties,cr=new WebGLTextures(Jn,wr,Fr,cs,Nr,Er,Yr),Qn=new WebGLCubeMaps(Ft),_r=new WebGLCubeUVMaps(Ft),Ir=new WebGLAttributes(Jn),Hr=new WebGLBindingStates(Jn,Ir),pr=new WebGLGeometries(Jn,Ir,Yr,Hr),Tr=new WebGLObjects(Jn,pr,Ir,Yr),jr=new WebGLMorphtargets(Jn,Nr,cr),Sr=new WebGLClipping(cs),Wr=new WebGLPrograms(Ft,Qn,_r,wr,Nr,Hr,Sr),Kn=new WebGLMaterials(Ft,cs),rr=new WebGLRenderLists,ur=new WebGLRenderStates(wr),Gr=new WebGLBackground(Ft,Qn,_r,Fr,Tr,Ct,vt),gr=new WebGLShadowMap(Ft,Tr,Nr),lr=new WebGLUniformsGroups(Jn,Yr,Nr,Fr),er=new WebGLBufferRenderer(Jn,wr,Yr),yr=new WebGLIndexedBufferRenderer(Jn,wr,Yr),Yr.programs=Wr.programs,Ft.capabilities=Nr,Ft.extensions=wr,Ft.properties=cs,Ft.renderLists=rr,Ft.shadowMap=gr,Ft.state=Fr,Ft.info=Yr}Br();const Hn=new WebXRManager(Ft,Jn);this.xr=Hn,this.getContext=function(){return Jn},this.getContextAttributes=function(){return Jn.getContextAttributes()},this.forceContextLoss=function(){const br=wr.get("WEBGL_lose_context");br&&br.loseContext()},this.forceContextRestore=function(){const br=wr.get("WEBGL_lose_context");br&&br.restoreContext()},this.getPixelRatio=function(){return Mn},this.setPixelRatio=function(br){br!==void 0&&(Mn=br,this.setSize(En,Cn,!1))},this.getSize=function(br){return br.set(En,Cn)},this.setSize=function(br,ls,Ns=!0){if(Hn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}En=br,Cn=ls,rt.width=Math.floor(br*Mn),rt.height=Math.floor(ls*Mn),Ns===!0&&(rt.style.width=br+"px",rt.style.height=ls+"px"),this.setViewport(0,0,br,ls)},this.getDrawingBufferSize=function(br){return br.set(En*Mn,Cn*Mn).floor()},this.setDrawingBufferSize=function(br,ls,Ns){En=br,Cn=ls,Mn=Ns,rt.width=Math.floor(br*Ns),rt.height=Math.floor(ls*Ns),this.setViewport(0,0,br,ls)},this.getCurrentViewport=function(br){return br.copy(Gt)},this.getViewport=function(br){return br.copy(Pn)},this.setViewport=function(br,ls,Ns,$a){br.isVector4?Pn.set(br.x,br.y,br.z,br.w):Pn.set(br,ls,Ns,$a),Fr.viewport(Gt.copy(Pn).multiplyScalar(Mn).round())},this.getScissor=function(br){return br.copy(dn)},this.setScissor=function(br,ls,Ns,$a){br.isVector4?dn.set(br.x,br.y,br.z,br.w):dn.set(br,ls,Ns,$a),Fr.scissor(nn.copy(dn).multiplyScalar(Mn).round())},this.getScissorTest=function(){return Un},this.setScissorTest=function(br){Fr.setScissorTest(Un=br)},this.setOpaqueSort=function(br){un=br},this.setTransparentSort=function(br){Tn=br},this.getClearColor=function(br){return br.copy(Gr.getClearColor())},this.setClearColor=function(){Gr.setClearColor.apply(Gr,arguments)},this.getClearAlpha=function(){return Gr.getClearAlpha()},this.setClearAlpha=function(){Gr.setClearAlpha.apply(Gr,arguments)},this.clear=function(br=!0,ls=!0,Ns=!0){let $a=0;if(br){let Ms=!1;if(Xt!==null){const io=Xt.texture.format;Ms=io===RGBAIntegerFormat||io===RGIntegerFormat||io===RedIntegerFormat}if(Ms){const io=Xt.texture.type,lo=io===UnsignedByteType||io===UnsignedIntType||io===UnsignedShortType||io===UnsignedInt248Type||io===UnsignedShort4444Type||io===UnsignedShort5551Type,mo=Gr.getClearColor(),go=Gr.getClearAlpha(),Io=mo.r,ko=mo.g,xo=mo.b;lo?(Tt[0]=Io,Tt[1]=ko,Tt[2]=xo,Tt[3]=go,Jn.clearBufferuiv(Jn.COLOR,0,Tt)):($t[0]=Io,$t[1]=ko,$t[2]=xo,$t[3]=go,Jn.clearBufferiv(Jn.COLOR,0,$t))}else $a|=Jn.COLOR_BUFFER_BIT}ls&&($a|=Jn.DEPTH_BUFFER_BIT,Jn.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),Ns&&($a|=Jn.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Jn.clear($a)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){rt.removeEventListener("webglcontextlost",kr,!1),rt.removeEventListener("webglcontextrestored",Cs,!1),rt.removeEventListener("webglcontextcreationerror",Fn,!1),rr.dispose(),ur.dispose(),cs.dispose(),Qn.dispose(),_r.dispose(),Tr.dispose(),Hr.dispose(),lr.dispose(),Wr.dispose(),Hn.dispose(),Hn.removeEventListener("sessionstart",oo),Hn.removeEventListener("sessionend",ao),Uo.stop()};function kr(br){br.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Nt=!0}function Cs(){console.log("THREE.WebGLRenderer: Context Restored."),Nt=!1;const br=Yr.autoReset,ls=gr.enabled,Ns=gr.autoUpdate,$a=gr.needsUpdate,Ms=gr.type;Br(),Yr.autoReset=br,gr.enabled=ls,gr.autoUpdate=Ns,gr.needsUpdate=$a,gr.type=Ms}function Fn(br){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",br.statusMessage)}function Ur(br){const ls=br.target;ls.removeEventListener("dispose",Ur),Vr(ls)}function Vr(br){dr(br),cs.remove(br)}function dr(br){const ls=cs.get(br).programs;ls!==void 0&&(ls.forEach(function(Ns){Wr.releaseProgram(Ns)}),br.isShaderMaterial&&Wr.releaseShaderCache(br))}this.renderBufferDirect=function(br,ls,Ns,$a,Ms,io){ls===null&&(ls=Ar);const lo=Ms.isMesh&&Ms.matrixWorld.determinant()<0,mo=au(br,ls,Ns,$a,Ms);Fr.setMaterial($a,lo);let go=Ns.index,Io=1;if($a.wireframe===!0){if(go=pr.getWireframeAttribute(Ns),go===void 0)return;Io=2}const ko=Ns.drawRange,xo=Ns.attributes.position;let Kl=ko.start*Io,Zl=(ko.start+ko.count)*Io;io!==null&&(Kl=Math.max(Kl,io.start*Io),Zl=Math.min(Zl,(io.start+io.count)*Io)),go!==null?(Kl=Math.max(Kl,0),Zl=Math.min(Zl,go.count)):xo!=null&&(Kl=Math.max(Kl,0),Zl=Math.min(Zl,xo.count));const Jl=Zl-Kl;if(Jl<0||Jl===1/0)return;Hr.setup(Ms,$a,mo,Ns,go);let uo,vo=er;if(go!==null&&(uo=Ir.get(go),vo=yr,vo.setIndex(uo)),Ms.isMesh)$a.wireframe===!0?(Fr.setLineWidth($a.wireframeLinewidth*Mr()),vo.setMode(Jn.LINES)):vo.setMode(Jn.TRIANGLES);else if(Ms.isLine){let fo=$a.linewidth;fo===void 0&&(fo=1),Fr.setLineWidth(fo*Mr()),Ms.isLineSegments?vo.setMode(Jn.LINES):Ms.isLineLoop?vo.setMode(Jn.LINE_LOOP):vo.setMode(Jn.LINE_STRIP)}else Ms.isPoints?vo.setMode(Jn.POINTS):Ms.isSprite&&vo.setMode(Jn.TRIANGLES);if(Ms.isBatchedMesh)if(Ms._multiDrawInstances!==null)vo.renderMultiDrawInstances(Ms._multiDrawStarts,Ms._multiDrawCounts,Ms._multiDrawCount,Ms._multiDrawInstances);else if(wr.get("WEBGL_multi_draw"))vo.renderMultiDraw(Ms._multiDrawStarts,Ms._multiDrawCounts,Ms._multiDrawCount);else{const fo=Ms._multiDrawStarts,Wl=Ms._multiDrawCounts,Ko=Ms._multiDrawCount,vu=go?Ir.get(go).bytesPerElement:1,Lu=cs.get($a).currentProgram.getUniforms();for(let eu=0;eu<Ko;eu++)Lu.setValue(Jn,"_gl_DrawID",eu),vo.render(fo[eu]/vu,Wl[eu])}else if(Ms.isInstancedMesh)vo.renderInstances(Kl,Jl,Ms.count);else if(Ns.isInstancedBufferGeometry){const fo=Ns._maxInstanceCount!==void 0?Ns._maxInstanceCount:1/0,Wl=Math.min(Ns.instanceCount,fo);vo.renderInstances(Kl,Jl,Wl)}else vo.render(Kl,Jl)};function Cr(br,ls,Ns){br.transparent===!0&&br.side===DoubleSide&&br.forceSinglePass===!1?(br.side=BackSide,br.needsUpdate=!0,Hl(br,ls,Ns),br.side=FrontSide,br.needsUpdate=!0,Hl(br,ls,Ns),br.side=DoubleSide):Hl(br,ls,Ns)}this.compile=function(br,ls,Ns=null){Ns===null&&(Ns=br),Et=ur.get(Ns),Et.init(ls),Pt.push(Et),Ns.traverseVisible(function(Ms){Ms.isLight&&Ms.layers.test(ls.layers)&&(Et.pushLight(Ms),Ms.castShadow&&Et.pushShadow(Ms))}),br!==Ns&&br.traverseVisible(function(Ms){Ms.isLight&&Ms.layers.test(ls.layers)&&(Et.pushLight(Ms),Ms.castShadow&&Et.pushShadow(Ms))}),Et.setupLights();const $a=new Set;return br.traverse(function(Ms){if(!(Ms.isMesh||Ms.isPoints||Ms.isLine||Ms.isSprite))return;const io=Ms.material;if(io)if(Array.isArray(io))for(let lo=0;lo<io.length;lo++){const mo=io[lo];Cr(mo,Ns,Ms),$a.add(mo)}else Cr(io,Ns,Ms),$a.add(io)}),Pt.pop(),Et=null,$a},this.compileAsync=function(br,ls,Ns=null){const $a=this.compile(br,ls,Ns);return new Promise(Ms=>{function io(){if($a.forEach(function(lo){cs.get(lo).currentProgram.isReady()&&$a.delete(lo)}),$a.size===0){Ms(br);return}setTimeout(io,10)}wr.get("KHR_parallel_shader_compile")!==null?io():setTimeout(io,10)})};let hs=null;function ro(br){hs&&hs(br)}function oo(){Uo.stop()}function ao(){Uo.start()}const Uo=new WebGLAnimation;Uo.setAnimationLoop(ro),typeof self<"u"&&Uo.setContext(self),this.setAnimationLoop=function(br){hs=br,Hn.setAnimationLoop(br),br===null?Uo.stop():Uo.start()},Hn.addEventListener("sessionstart",oo),Hn.addEventListener("sessionend",ao),this.render=function(br,ls){if(ls!==void 0&&ls.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Nt===!0)return;if(br.matrixWorldAutoUpdate===!0&&br.updateMatrixWorld(),ls.parent===null&&ls.matrixWorldAutoUpdate===!0&&ls.updateMatrixWorld(),Hn.enabled===!0&&Hn.isPresenting===!0&&(Hn.cameraAutoUpdate===!0&&Hn.updateCamera(ls),ls=Hn.getCamera()),br.isScene===!0&&br.onBeforeRender(Ft,br,ls,Xt),Et=ur.get(br,Pt.length),Et.init(ls),Pt.push(Et),fr.multiplyMatrices(ls.projectionMatrix,ls.matrixWorldInverse),qn.setFromProjectionMatrix(fr),Wn=this.localClippingEnabled,In=Sr.init(this.clippingPlanes,Wn),Rt=rr.get(br,wt.length),Rt.init(),wt.push(Rt),Hn.enabled===!0&&Hn.isPresenting===!0){const io=Ft.xr.getDepthSensingMesh();io!==null&&gu(io,ls,-1/0,Ft.sortObjects)}gu(br,ls,0,Ft.sortObjects),Rt.finish(),Ft.sortObjects===!0&&Rt.sort(un,Tn),$r=Hn.enabled===!1||Hn.isPresenting===!1||Hn.hasDepthSensing()===!1,$r&&Gr.addToRenderList(Rt,br),this.info.render.frame++,In===!0&&Sr.beginShadows();const Ns=Et.state.shadowsArray;gr.render(Ns,br,ls),In===!0&&Sr.endShadows(),this.info.autoReset===!0&&this.info.reset();const $a=Rt.opaque,Ms=Rt.transmissive;if(Et.setupLights(),ls.isArrayCamera){const io=ls.cameras;if(Ms.length>0)for(let lo=0,mo=io.length;lo<mo;lo++){const go=io[lo];_l($a,Ms,br,go)}$r&&Gr.render(br);for(let lo=0,mo=io.length;lo<mo;lo++){const go=io[lo];yl(Rt,br,go,go.viewport)}}else Ms.length>0&&_l($a,Ms,br,ls),$r&&Gr.render(br),yl(Rt,br,ls);Xt!==null&&(cr.updateMultisampleRenderTarget(Xt),cr.updateRenderTargetMipmap(Xt)),br.isScene===!0&&br.onAfterRender(Ft,br,ls),Hr.resetDefaultState(),Zt=-1,rn=null,Pt.pop(),Pt.length>0?(Et=Pt[Pt.length-1],In===!0&&Sr.setGlobalState(Ft.clippingPlanes,Et.state.camera)):Et=null,wt.pop(),wt.length>0?Rt=wt[wt.length-1]:Rt=null};function gu(br,ls,Ns,$a){if(br.visible===!1)return;if(br.layers.test(ls.layers)){if(br.isGroup)Ns=br.renderOrder;else if(br.isLOD)br.autoUpdate===!0&&br.update(ls);else if(br.isLight)Et.pushLight(br),br.castShadow&&Et.pushShadow(br);else if(br.isSprite){if(!br.frustumCulled||qn.intersectsSprite(br)){$a&&vr.setFromMatrixPosition(br.matrixWorld).applyMatrix4(fr);const lo=Tr.update(br),mo=br.material;mo.visible&&Rt.push(br,lo,mo,Ns,vr.z,null)}}else if((br.isMesh||br.isLine||br.isPoints)&&(!br.frustumCulled||qn.intersectsObject(br))){const lo=Tr.update(br),mo=br.material;if($a&&(br.boundingSphere!==void 0?(br.boundingSphere===null&&br.computeBoundingSphere(),vr.copy(br.boundingSphere.center)):(lo.boundingSphere===null&&lo.computeBoundingSphere(),vr.copy(lo.boundingSphere.center)),vr.applyMatrix4(br.matrixWorld).applyMatrix4(fr)),Array.isArray(mo)){const go=lo.groups;for(let Io=0,ko=go.length;Io<ko;Io++){const xo=go[Io],Kl=mo[xo.materialIndex];Kl&&Kl.visible&&Rt.push(br,lo,Kl,Ns,vr.z,xo)}}else mo.visible&&Rt.push(br,lo,mo,Ns,vr.z,null)}}const io=br.children;for(let lo=0,mo=io.length;lo<mo;lo++)gu(io[lo],ls,Ns,$a)}function yl(br,ls,Ns,$a){const Ms=br.opaque,io=br.transmissive,lo=br.transparent;Et.setupLightsView(Ns),In===!0&&Sr.setGlobalState(Ft.clippingPlanes,Ns),$a&&Fr.viewport(Gt.copy($a)),Ms.length>0&&Vo(Ms,ls,Ns),io.length>0&&Vo(io,ls,Ns),lo.length>0&&Vo(lo,ls,Ns),Fr.buffers.depth.setTest(!0),Fr.buffers.depth.setMask(!0),Fr.buffers.color.setMask(!0),Fr.setPolygonOffset(!1)}function _l(br,ls,Ns,$a){if((Ns.isScene===!0?Ns.overrideMaterial:null)!==null)return;Et.state.transmissionRenderTarget[$a.id]===void 0&&(Et.state.transmissionRenderTarget[$a.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:wr.has("EXT_color_buffer_half_float")||wr.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:lt,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const io=Et.state.transmissionRenderTarget[$a.id],lo=$a.viewport||Gt;io.setSize(lo.z,lo.w);const mo=Ft.getRenderTarget();Ft.setRenderTarget(io),Ft.getClearColor(an),mn=Ft.getClearAlpha(),mn<1&&Ft.setClearColor(16777215,.5),Ft.clear(),$r&&Gr.render(Ns);const go=Ft.toneMapping;Ft.toneMapping=NoToneMapping;const Io=$a.viewport;if($a.viewport!==void 0&&($a.viewport=void 0),Et.setupLightsView($a),In===!0&&Sr.setGlobalState(Ft.clippingPlanes,$a),Vo(br,Ns,$a),cr.updateMultisampleRenderTarget(io),cr.updateRenderTargetMipmap(io),wr.has("WEBGL_multisampled_render_to_texture")===!1){let ko=!1;for(let xo=0,Kl=ls.length;xo<Kl;xo++){const Zl=ls[xo],Jl=Zl.object,uo=Zl.geometry,vo=Zl.material,fo=Zl.group;if(vo.side===DoubleSide&&Jl.layers.test($a.layers)){const Wl=vo.side;vo.side=BackSide,vo.needsUpdate=!0,uu(Jl,Ns,$a,uo,vo,fo),vo.side=Wl,vo.needsUpdate=!0,ko=!0}}ko===!0&&(cr.updateMultisampleRenderTarget(io),cr.updateRenderTargetMipmap(io))}Ft.setRenderTarget(mo),Ft.setClearColor(an,mn),Io!==void 0&&($a.viewport=Io),Ft.toneMapping=go}function Vo(br,ls,Ns){const $a=ls.isScene===!0?ls.overrideMaterial:null;for(let Ms=0,io=br.length;Ms<io;Ms++){const lo=br[Ms],mo=lo.object,go=lo.geometry,Io=$a===null?lo.material:$a,ko=lo.group;mo.layers.test(Ns.layers)&&uu(mo,ls,Ns,go,Io,ko)}}function uu(br,ls,Ns,$a,Ms,io){br.onBeforeRender(Ft,ls,Ns,$a,Ms,io),br.modelViewMatrix.multiplyMatrices(Ns.matrixWorldInverse,br.matrixWorld),br.normalMatrix.getNormalMatrix(br.modelViewMatrix),Ms.onBeforeRender(Ft,ls,Ns,$a,br,io),Ms.transparent===!0&&Ms.side===DoubleSide&&Ms.forceSinglePass===!1?(Ms.side=BackSide,Ms.needsUpdate=!0,Ft.renderBufferDirect(Ns,ls,$a,Ms,br,io),Ms.side=FrontSide,Ms.needsUpdate=!0,Ft.renderBufferDirect(Ns,ls,$a,Ms,br,io),Ms.side=DoubleSide):Ft.renderBufferDirect(Ns,ls,$a,Ms,br,io),br.onAfterRender(Ft,ls,Ns,$a,Ms,io)}function Hl(br,ls,Ns){ls.isScene!==!0&&(ls=Ar);const $a=cs.get(br),Ms=Et.state.lights,io=Et.state.shadowsArray,lo=Ms.state.version,mo=Wr.getParameters(br,Ms.state,io,ls,Ns),go=Wr.getProgramCacheKey(mo);let Io=$a.programs;$a.environment=br.isMeshStandardMaterial?ls.environment:null,$a.fog=ls.fog,$a.envMap=(br.isMeshStandardMaterial?_r:Qn).get(br.envMap||$a.environment),$a.envMapRotation=$a.environment!==null&&br.envMap===null?ls.environmentRotation:br.envMapRotation,Io===void 0&&(br.addEventListener("dispose",Ur),Io=new Map,$a.programs=Io);let ko=Io.get(go);if(ko!==void 0){if($a.currentProgram===ko&&$a.lightsStateVersion===lo)return ju(br,mo),ko}else mo.uniforms=Wr.getUniforms(br),br.onBeforeCompile(mo,Ft),ko=Wr.acquireProgram(mo,go),Io.set(go,ko),$a.uniforms=mo.uniforms;const xo=$a.uniforms;return(!br.isShaderMaterial&&!br.isRawShaderMaterial||br.clipping===!0)&&(xo.clippingPlanes=Sr.uniform),ju(br,mo),$a.needsLights=ru(br),$a.lightsStateVersion=lo,$a.needsLights&&(xo.ambientLightColor.value=Ms.state.ambient,xo.lightProbe.value=Ms.state.probe,xo.directionalLights.value=Ms.state.directional,xo.directionalLightShadows.value=Ms.state.directionalShadow,xo.spotLights.value=Ms.state.spot,xo.spotLightShadows.value=Ms.state.spotShadow,xo.rectAreaLights.value=Ms.state.rectArea,xo.ltc_1.value=Ms.state.rectAreaLTC1,xo.ltc_2.value=Ms.state.rectAreaLTC2,xo.pointLights.value=Ms.state.point,xo.pointLightShadows.value=Ms.state.pointShadow,xo.hemisphereLights.value=Ms.state.hemi,xo.directionalShadowMap.value=Ms.state.directionalShadowMap,xo.directionalShadowMatrix.value=Ms.state.directionalShadowMatrix,xo.spotShadowMap.value=Ms.state.spotShadowMap,xo.spotLightMatrix.value=Ms.state.spotLightMatrix,xo.spotLightMap.value=Ms.state.spotLightMap,xo.pointShadowMap.value=Ms.state.pointShadowMap,xo.pointShadowMatrix.value=Ms.state.pointShadowMatrix),$a.currentProgram=ko,$a.uniformsList=null,ko}function Ku(br){if(br.uniformsList===null){const ls=br.currentProgram.getUniforms();br.uniformsList=WebGLUniforms.seqWithValue(ls.seq,br.uniforms)}return br.uniformsList}function ju(br,ls){const Ns=cs.get(br);Ns.outputColorSpace=ls.outputColorSpace,Ns.batching=ls.batching,Ns.batchingColor=ls.batchingColor,Ns.instancing=ls.instancing,Ns.instancingColor=ls.instancingColor,Ns.instancingMorph=ls.instancingMorph,Ns.skinning=ls.skinning,Ns.morphTargets=ls.morphTargets,Ns.morphNormals=ls.morphNormals,Ns.morphColors=ls.morphColors,Ns.morphTargetsCount=ls.morphTargetsCount,Ns.numClippingPlanes=ls.numClippingPlanes,Ns.numIntersection=ls.numClipIntersection,Ns.vertexAlphas=ls.vertexAlphas,Ns.vertexTangents=ls.vertexTangents,Ns.toneMapping=ls.toneMapping}function au(br,ls,Ns,$a,Ms){ls.isScene!==!0&&(ls=Ar),cr.resetTextureUnits();const io=ls.fog,lo=$a.isMeshStandardMaterial?ls.environment:null,mo=Xt===null?Ft.outputColorSpace:Xt.isXRRenderTarget===!0?Xt.texture.colorSpace:LinearSRGBColorSpace,go=($a.isMeshStandardMaterial?_r:Qn).get($a.envMap||lo),Io=$a.vertexColors===!0&&!!Ns.attributes.color&&Ns.attributes.color.itemSize===4,ko=!!Ns.attributes.tangent&&(!!$a.normalMap||$a.anisotropy>0),xo=!!Ns.morphAttributes.position,Kl=!!Ns.morphAttributes.normal,Zl=!!Ns.morphAttributes.color;let Jl=NoToneMapping;$a.toneMapped&&(Xt===null||Xt.isXRRenderTarget===!0)&&(Jl=Ft.toneMapping);const uo=Ns.morphAttributes.position||Ns.morphAttributes.normal||Ns.morphAttributes.color,vo=uo!==void 0?uo.length:0,fo=cs.get($a),Wl=Et.state.lights;if(In===!0&&(Wn===!0||br!==rn)){const iu=br===rn&&$a.id===Zt;Sr.setState($a,br,iu)}let Ko=!1;$a.version===fo.__version?(fo.needsLights&&fo.lightsStateVersion!==Wl.state.version||fo.outputColorSpace!==mo||Ms.isBatchedMesh&&fo.batching===!1||!Ms.isBatchedMesh&&fo.batching===!0||Ms.isBatchedMesh&&fo.batchingColor===!0&&Ms.colorTexture===null||Ms.isBatchedMesh&&fo.batchingColor===!1&&Ms.colorTexture!==null||Ms.isInstancedMesh&&fo.instancing===!1||!Ms.isInstancedMesh&&fo.instancing===!0||Ms.isSkinnedMesh&&fo.skinning===!1||!Ms.isSkinnedMesh&&fo.skinning===!0||Ms.isInstancedMesh&&fo.instancingColor===!0&&Ms.instanceColor===null||Ms.isInstancedMesh&&fo.instancingColor===!1&&Ms.instanceColor!==null||Ms.isInstancedMesh&&fo.instancingMorph===!0&&Ms.morphTexture===null||Ms.isInstancedMesh&&fo.instancingMorph===!1&&Ms.morphTexture!==null||fo.envMap!==go||$a.fog===!0&&fo.fog!==io||fo.numClippingPlanes!==void 0&&(fo.numClippingPlanes!==Sr.numPlanes||fo.numIntersection!==Sr.numIntersection)||fo.vertexAlphas!==Io||fo.vertexTangents!==ko||fo.morphTargets!==xo||fo.morphNormals!==Kl||fo.morphColors!==Zl||fo.toneMapping!==Jl||fo.morphTargetsCount!==vo)&&(Ko=!0):(Ko=!0,fo.__version=$a.version);let vu=fo.currentProgram;Ko===!0&&(vu=Hl($a,ls,Ms));let Lu=!1,eu=!1,op=!1;const lu=vu.getUniforms(),Tu=fo.uniforms;if(Fr.useProgram(vu.program)&&(Lu=!0,eu=!0,op=!0),$a.id!==Zt&&(Zt=$a.id,eu=!0),Lu||rn!==br){Nr.reverseDepthBuffer?(ar.copy(br.projectionMatrix),toNormalizedProjectionMatrix(ar),toReversedProjectionMatrix(ar),lu.setValue(Jn,"projectionMatrix",ar)):lu.setValue(Jn,"projectionMatrix",br.projectionMatrix),lu.setValue(Jn,"viewMatrix",br.matrixWorldInverse);const iu=lu.map.cameraPosition;iu!==void 0&&iu.setValue(Jn,mr.setFromMatrixPosition(br.matrixWorld)),Nr.logarithmicDepthBuffer&&lu.setValue(Jn,"logDepthBufFC",2/(Math.log(br.far+1)/Math.LN2)),($a.isMeshPhongMaterial||$a.isMeshToonMaterial||$a.isMeshLambertMaterial||$a.isMeshBasicMaterial||$a.isMeshStandardMaterial||$a.isShaderMaterial)&&lu.setValue(Jn,"isOrthographic",br.isOrthographicCamera===!0),rn!==br&&(rn=br,eu=!0,op=!0)}if(Ms.isSkinnedMesh){lu.setOptional(Jn,Ms,"bindMatrix"),lu.setOptional(Jn,Ms,"bindMatrixInverse");const iu=Ms.skeleton;iu&&(iu.boneTexture===null&&iu.computeBoneTexture(),lu.setValue(Jn,"boneTexture",iu.boneTexture,cr))}Ms.isBatchedMesh&&(lu.setOptional(Jn,Ms,"batchingTexture"),lu.setValue(Jn,"batchingTexture",Ms._matricesTexture,cr),lu.setOptional(Jn,Ms,"batchingIdTexture"),lu.setValue(Jn,"batchingIdTexture",Ms._indirectTexture,cr),lu.setOptional(Jn,Ms,"batchingColorTexture"),Ms._colorsTexture!==null&&lu.setValue(Jn,"batchingColorTexture",Ms._colorsTexture,cr));const Xu=Ns.morphAttributes;if((Xu.position!==void 0||Xu.normal!==void 0||Xu.color!==void 0)&&jr.update(Ms,Ns,vu),(eu||fo.receiveShadow!==Ms.receiveShadow)&&(fo.receiveShadow=Ms.receiveShadow,lu.setValue(Jn,"receiveShadow",Ms.receiveShadow)),$a.isMeshGouraudMaterial&&$a.envMap!==null&&(Tu.envMap.value=go,Tu.flipEnvMap.value=go.isCubeTexture&&go.isRenderTargetTexture===!1?-1:1),$a.isMeshStandardMaterial&&$a.envMap===null&&ls.environment!==null&&(Tu.envMapIntensity.value=ls.environmentIntensity),eu&&(lu.setValue(Jn,"toneMappingExposure",Ft.toneMappingExposure),fo.needsLights&&ou(Tu,op),io&&$a.fog===!0&&Kn.refreshFogUniforms(Tu,io),Kn.refreshMaterialUniforms(Tu,$a,Mn,Cn,Et.state.transmissionRenderTarget[br.id]),WebGLUniforms.upload(Jn,Ku(fo),Tu,cr)),$a.isShaderMaterial&&$a.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Jn,Ku(fo),Tu,cr),$a.uniformsNeedUpdate=!1),$a.isSpriteMaterial&&lu.setValue(Jn,"center",Ms.center),lu.setValue(Jn,"modelViewMatrix",Ms.modelViewMatrix),lu.setValue(Jn,"normalMatrix",Ms.normalMatrix),lu.setValue(Jn,"modelMatrix",Ms.matrixWorld),$a.isShaderMaterial||$a.isRawShaderMaterial){const iu=$a.uniformsGroups;for(let _u=0,xp=iu.length;_u<xp;_u++){const bp=iu[_u];lr.update(bp,vu),lr.bind(bp,vu)}}return vu}function ou(br,ls){br.ambientLightColor.needsUpdate=ls,br.lightProbe.needsUpdate=ls,br.directionalLights.needsUpdate=ls,br.directionalLightShadows.needsUpdate=ls,br.pointLights.needsUpdate=ls,br.pointLightShadows.needsUpdate=ls,br.spotLights.needsUpdate=ls,br.spotLightShadows.needsUpdate=ls,br.rectAreaLights.needsUpdate=ls,br.hemisphereLights.needsUpdate=ls}function ru(br){return br.isMeshLambertMaterial||br.isMeshToonMaterial||br.isMeshPhongMaterial||br.isMeshStandardMaterial||br.isShadowMaterial||br.isShaderMaterial&&br.lights===!0}this.getActiveCubeFace=function(){return Ot},this.getActiveMipmapLevel=function(){return Bt},this.getRenderTarget=function(){return Xt},this.setRenderTargetTextures=function(br,ls,Ns){cs.get(br.texture).__webglTexture=ls,cs.get(br.depthTexture).__webglTexture=Ns;const $a=cs.get(br);$a.__hasExternalTextures=!0,$a.__autoAllocateDepthBuffer=Ns===void 0,$a.__autoAllocateDepthBuffer||wr.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$a.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(br,ls){const Ns=cs.get(br);Ns.__webglFramebuffer=ls,Ns.__useDefaultFramebuffer=ls===void 0},this.setRenderTarget=function(br,ls=0,Ns=0){Xt=br,Ot=ls,Bt=Ns;let $a=!0,Ms=null,io=!1,lo=!1;if(br){const go=cs.get(br);if(go.__useDefaultFramebuffer!==void 0)Fr.bindFramebuffer(Jn.FRAMEBUFFER,null),$a=!1;else if(go.__webglFramebuffer===void 0)cr.setupRenderTarget(br);else if(go.__hasExternalTextures)cr.rebindTextures(br,cs.get(br.texture).__webglTexture,cs.get(br.depthTexture).__webglTexture);else if(br.depthBuffer){const xo=br.depthTexture;if(go.__boundDepthTexture!==xo){if(xo!==null&&cs.has(xo)&&(br.width!==xo.image.width||br.height!==xo.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");cr.setupDepthRenderbuffer(br)}}const Io=br.texture;(Io.isData3DTexture||Io.isDataArrayTexture||Io.isCompressedArrayTexture)&&(lo=!0);const ko=cs.get(br).__webglFramebuffer;br.isWebGLCubeRenderTarget?(Array.isArray(ko[ls])?Ms=ko[ls][Ns]:Ms=ko[ls],io=!0):br.samples>0&&cr.useMultisampledRTT(br)===!1?Ms=cs.get(br).__webglMultisampledFramebuffer:Array.isArray(ko)?Ms=ko[Ns]:Ms=ko,Gt.copy(br.viewport),nn.copy(br.scissor),cn=br.scissorTest}else Gt.copy(Pn).multiplyScalar(Mn).floor(),nn.copy(dn).multiplyScalar(Mn).floor(),cn=Un;if(Fr.bindFramebuffer(Jn.FRAMEBUFFER,Ms)&&$a&&Fr.drawBuffers(br,Ms),Fr.viewport(Gt),Fr.scissor(nn),Fr.setScissorTest(cn),io){const go=cs.get(br.texture);Jn.framebufferTexture2D(Jn.FRAMEBUFFER,Jn.COLOR_ATTACHMENT0,Jn.TEXTURE_CUBE_MAP_POSITIVE_X+ls,go.__webglTexture,Ns)}else if(lo){const go=cs.get(br.texture),Io=ls||0;Jn.framebufferTextureLayer(Jn.FRAMEBUFFER,Jn.COLOR_ATTACHMENT0,go.__webglTexture,Ns||0,Io)}Zt=-1},this.readRenderTargetPixels=function(br,ls,Ns,$a,Ms,io,lo){if(!(br&&br.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mo=cs.get(br).__webglFramebuffer;if(br.isWebGLCubeRenderTarget&&lo!==void 0&&(mo=mo[lo]),mo){Fr.bindFramebuffer(Jn.FRAMEBUFFER,mo);try{const go=br.texture,Io=go.format,ko=go.type;if(!Nr.textureFormatReadable(Io)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Nr.textureTypeReadable(ko)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ls>=0&&ls<=br.width-$a&&Ns>=0&&Ns<=br.height-Ms&&Jn.readPixels(ls,Ns,$a,Ms,Er.convert(Io),Er.convert(ko),io)}finally{const go=Xt!==null?cs.get(Xt).__webglFramebuffer:null;Fr.bindFramebuffer(Jn.FRAMEBUFFER,go)}}},this.readRenderTargetPixelsAsync=async function(br,ls,Ns,$a,Ms,io,lo){if(!(br&&br.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let mo=cs.get(br).__webglFramebuffer;if(br.isWebGLCubeRenderTarget&&lo!==void 0&&(mo=mo[lo]),mo){const go=br.texture,Io=go.format,ko=go.type;if(!Nr.textureFormatReadable(Io))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Nr.textureTypeReadable(ko))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ls>=0&&ls<=br.width-$a&&Ns>=0&&Ns<=br.height-Ms){Fr.bindFramebuffer(Jn.FRAMEBUFFER,mo);const xo=Jn.createBuffer();Jn.bindBuffer(Jn.PIXEL_PACK_BUFFER,xo),Jn.bufferData(Jn.PIXEL_PACK_BUFFER,io.byteLength,Jn.STREAM_READ),Jn.readPixels(ls,Ns,$a,Ms,Er.convert(Io),Er.convert(ko),0);const Kl=Xt!==null?cs.get(Xt).__webglFramebuffer:null;Fr.bindFramebuffer(Jn.FRAMEBUFFER,Kl);const Zl=Jn.fenceSync(Jn.SYNC_GPU_COMMANDS_COMPLETE,0);return Jn.flush(),await probeAsync(Jn,Zl,4),Jn.bindBuffer(Jn.PIXEL_PACK_BUFFER,xo),Jn.getBufferSubData(Jn.PIXEL_PACK_BUFFER,0,io),Jn.deleteBuffer(xo),Jn.deleteSync(Zl),io}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(br,ls=null,Ns=0){br.isTexture!==!0&&(warnOnce("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ls=arguments[0]||null,br=arguments[1]);const $a=Math.pow(2,-Ns),Ms=Math.floor(br.image.width*$a),io=Math.floor(br.image.height*$a),lo=ls!==null?ls.x:0,mo=ls!==null?ls.y:0;cr.setTexture2D(br,0),Jn.copyTexSubImage2D(Jn.TEXTURE_2D,Ns,0,0,lo,mo,Ms,io),Fr.unbindTexture()},this.copyTextureToTexture=function(br,ls,Ns=null,$a=null,Ms=0){br.isTexture!==!0&&(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed."),$a=arguments[0]||null,br=arguments[1],ls=arguments[2],Ms=arguments[3]||0,Ns=null);let io,lo,mo,go,Io,ko;Ns!==null?(io=Ns.max.x-Ns.min.x,lo=Ns.max.y-Ns.min.y,mo=Ns.min.x,go=Ns.min.y):(io=br.image.width,lo=br.image.height,mo=0,go=0),$a!==null?(Io=$a.x,ko=$a.y):(Io=0,ko=0);const xo=Er.convert(ls.format),Kl=Er.convert(ls.type);cr.setTexture2D(ls,0),Jn.pixelStorei(Jn.UNPACK_FLIP_Y_WEBGL,ls.flipY),Jn.pixelStorei(Jn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ls.premultiplyAlpha),Jn.pixelStorei(Jn.UNPACK_ALIGNMENT,ls.unpackAlignment);const Zl=Jn.getParameter(Jn.UNPACK_ROW_LENGTH),Jl=Jn.getParameter(Jn.UNPACK_IMAGE_HEIGHT),uo=Jn.getParameter(Jn.UNPACK_SKIP_PIXELS),vo=Jn.getParameter(Jn.UNPACK_SKIP_ROWS),fo=Jn.getParameter(Jn.UNPACK_SKIP_IMAGES),Wl=br.isCompressedTexture?br.mipmaps[Ms]:br.image;Jn.pixelStorei(Jn.UNPACK_ROW_LENGTH,Wl.width),Jn.pixelStorei(Jn.UNPACK_IMAGE_HEIGHT,Wl.height),Jn.pixelStorei(Jn.UNPACK_SKIP_PIXELS,mo),Jn.pixelStorei(Jn.UNPACK_SKIP_ROWS,go),br.isDataTexture?Jn.texSubImage2D(Jn.TEXTURE_2D,Ms,Io,ko,io,lo,xo,Kl,Wl.data):br.isCompressedTexture?Jn.compressedTexSubImage2D(Jn.TEXTURE_2D,Ms,Io,ko,Wl.width,Wl.height,xo,Wl.data):Jn.texSubImage2D(Jn.TEXTURE_2D,Ms,Io,ko,io,lo,xo,Kl,Wl),Jn.pixelStorei(Jn.UNPACK_ROW_LENGTH,Zl),Jn.pixelStorei(Jn.UNPACK_IMAGE_HEIGHT,Jl),Jn.pixelStorei(Jn.UNPACK_SKIP_PIXELS,uo),Jn.pixelStorei(Jn.UNPACK_SKIP_ROWS,vo),Jn.pixelStorei(Jn.UNPACK_SKIP_IMAGES,fo),Ms===0&&ls.generateMipmaps&&Jn.generateMipmap(Jn.TEXTURE_2D),Fr.unbindTexture()},this.copyTextureToTexture3D=function(br,ls,Ns=null,$a=null,Ms=0){br.isTexture!==!0&&(warnOnce("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ns=arguments[0]||null,$a=arguments[1]||null,br=arguments[2],ls=arguments[3],Ms=arguments[4]||0);let io,lo,mo,go,Io,ko,xo,Kl,Zl;const Jl=br.isCompressedTexture?br.mipmaps[Ms]:br.image;Ns!==null?(io=Ns.max.x-Ns.min.x,lo=Ns.max.y-Ns.min.y,mo=Ns.max.z-Ns.min.z,go=Ns.min.x,Io=Ns.min.y,ko=Ns.min.z):(io=Jl.width,lo=Jl.height,mo=Jl.depth,go=0,Io=0,ko=0),$a!==null?(xo=$a.x,Kl=$a.y,Zl=$a.z):(xo=0,Kl=0,Zl=0);const uo=Er.convert(ls.format),vo=Er.convert(ls.type);let fo;if(ls.isData3DTexture)cr.setTexture3D(ls,0),fo=Jn.TEXTURE_3D;else if(ls.isDataArrayTexture||ls.isCompressedArrayTexture)cr.setTexture2DArray(ls,0),fo=Jn.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Jn.pixelStorei(Jn.UNPACK_FLIP_Y_WEBGL,ls.flipY),Jn.pixelStorei(Jn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ls.premultiplyAlpha),Jn.pixelStorei(Jn.UNPACK_ALIGNMENT,ls.unpackAlignment);const Wl=Jn.getParameter(Jn.UNPACK_ROW_LENGTH),Ko=Jn.getParameter(Jn.UNPACK_IMAGE_HEIGHT),vu=Jn.getParameter(Jn.UNPACK_SKIP_PIXELS),Lu=Jn.getParameter(Jn.UNPACK_SKIP_ROWS),eu=Jn.getParameter(Jn.UNPACK_SKIP_IMAGES);Jn.pixelStorei(Jn.UNPACK_ROW_LENGTH,Jl.width),Jn.pixelStorei(Jn.UNPACK_IMAGE_HEIGHT,Jl.height),Jn.pixelStorei(Jn.UNPACK_SKIP_PIXELS,go),Jn.pixelStorei(Jn.UNPACK_SKIP_ROWS,Io),Jn.pixelStorei(Jn.UNPACK_SKIP_IMAGES,ko),br.isDataTexture||br.isData3DTexture?Jn.texSubImage3D(fo,Ms,xo,Kl,Zl,io,lo,mo,uo,vo,Jl.data):ls.isCompressedArrayTexture?Jn.compressedTexSubImage3D(fo,Ms,xo,Kl,Zl,io,lo,mo,uo,Jl.data):Jn.texSubImage3D(fo,Ms,xo,Kl,Zl,io,lo,mo,uo,vo,Jl),Jn.pixelStorei(Jn.UNPACK_ROW_LENGTH,Wl),Jn.pixelStorei(Jn.UNPACK_IMAGE_HEIGHT,Ko),Jn.pixelStorei(Jn.UNPACK_SKIP_PIXELS,vu),Jn.pixelStorei(Jn.UNPACK_SKIP_ROWS,Lu),Jn.pixelStorei(Jn.UNPACK_SKIP_IMAGES,eu),Ms===0&&ls.generateMipmaps&&Jn.generateMipmap(fo),Fr.unbindTexture()},this.initRenderTarget=function(br){cs.get(br).__webglFramebuffer===void 0&&cr.setupRenderTarget(br)},this.initTexture=function(br){br.isCubeTexture?cr.setTextureCube(br,0):br.isData3DTexture?cr.setTexture3D(br,0):br.isDataArrayTexture||br.isCompressedArrayTexture?cr.setTexture2DArray(br,0):cr.setTexture2D(br,0),Fr.unbindTexture()},this.resetState=function(){Ot=0,Bt=0,Xt=null,Fr.reset(),Hr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(tt){this._outputColorSpace=tt;const rt=this.getContext();rt.drawingBufferColorSpace=tt===DisplayP3ColorSpace?"display-p3":"srgb",rt.unpackColorSpace=ColorManagement.workingColorSpace===LinearDisplayP3ColorSpace?"display-p3":"srgb"}}class FogExp2{constructor(tt,rt=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color$1(tt),this.density=rt}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(tt,rt=1,st=1e3){this.isFog=!0,this.name="",this.color=new Color$1(tt),this.near=rt,this.far=st}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(tt,rt){return super.copy(tt,rt),tt.background!==null&&(this.background=tt.background.clone()),tt.environment!==null&&(this.environment=tt.environment.clone()),tt.fog!==null&&(this.fog=tt.fog.clone()),this.backgroundBlurriness=tt.backgroundBlurriness,this.backgroundIntensity=tt.backgroundIntensity,this.backgroundRotation.copy(tt.backgroundRotation),this.environmentIntensity=tt.environmentIntensity,this.environmentRotation.copy(tt.environmentRotation),tt.overrideMaterial!==null&&(this.overrideMaterial=tt.overrideMaterial.clone()),this.matrixAutoUpdate=tt.matrixAutoUpdate,this}toJSON(tt){const rt=super.toJSON(tt);return this.fog!==null&&(rt.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(rt.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(rt.object.backgroundIntensity=this.backgroundIntensity),rt.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(rt.object.environmentIntensity=this.environmentIntensity),rt.object.environmentRotation=this.environmentRotation.toArray(),rt}}class InterleavedBuffer{constructor(tt,rt){this.isInterleavedBuffer=!0,this.array=tt,this.stride=rt,this.count=tt!==void 0?tt.length/rt:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(tt){tt===!0&&this.version++}setUsage(tt){return this.usage=tt,this}addUpdateRange(tt,rt){this.updateRanges.push({start:tt,count:rt})}clearUpdateRanges(){this.updateRanges.length=0}copy(tt){return this.array=new tt.array.constructor(tt.array),this.count=tt.count,this.stride=tt.stride,this.usage=tt.usage,this}copyAt(tt,rt,st){tt*=this.stride,st*=rt.stride;for(let at=0,lt=this.stride;at<lt;at++)this.array[tt+at]=rt.array[st+at];return this}set(tt,rt=0){return this.array.set(tt,rt),this}clone(tt){tt.arrayBuffers===void 0&&(tt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),tt.arrayBuffers[this.array.buffer._uuid]===void 0&&(tt.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const rt=new this.array.constructor(tt.arrayBuffers[this.array.buffer._uuid]),st=new this.constructor(rt,this.stride);return st.setUsage(this.usage),st}onUpload(tt){return this.onUploadCallback=tt,this}toJSON(tt){return tt.arrayBuffers===void 0&&(tt.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),tt.arrayBuffers[this.array.buffer._uuid]===void 0&&(tt.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(tt,rt,st,at=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=tt,this.itemSize=rt,this.offset=st,this.normalized=at}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(tt){this.data.needsUpdate=tt}applyMatrix4(tt){for(let rt=0,st=this.data.count;rt<st;rt++)_vector$6.fromBufferAttribute(this,rt),_vector$6.applyMatrix4(tt),this.setXYZ(rt,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(tt){for(let rt=0,st=this.count;rt<st;rt++)_vector$6.fromBufferAttribute(this,rt),_vector$6.applyNormalMatrix(tt),this.setXYZ(rt,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(tt){for(let rt=0,st=this.count;rt<st;rt++)_vector$6.fromBufferAttribute(this,rt),_vector$6.transformDirection(tt),this.setXYZ(rt,_vector$6.x,_vector$6.y,_vector$6.z);return this}getComponent(tt,rt){let st=this.array[tt*this.data.stride+this.offset+rt];return this.normalized&&(st=denormalize(st,this.array)),st}setComponent(tt,rt,st){return this.normalized&&(st=normalize$1(st,this.array)),this.data.array[tt*this.data.stride+this.offset+rt]=st,this}setX(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.data.array[tt*this.data.stride+this.offset]=rt,this}setY(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.data.array[tt*this.data.stride+this.offset+1]=rt,this}setZ(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.data.array[tt*this.data.stride+this.offset+2]=rt,this}setW(tt,rt){return this.normalized&&(rt=normalize$1(rt,this.array)),this.data.array[tt*this.data.stride+this.offset+3]=rt,this}getX(tt){let rt=this.data.array[tt*this.data.stride+this.offset];return this.normalized&&(rt=denormalize(rt,this.array)),rt}getY(tt){let rt=this.data.array[tt*this.data.stride+this.offset+1];return this.normalized&&(rt=denormalize(rt,this.array)),rt}getZ(tt){let rt=this.data.array[tt*this.data.stride+this.offset+2];return this.normalized&&(rt=denormalize(rt,this.array)),rt}getW(tt){let rt=this.data.array[tt*this.data.stride+this.offset+3];return this.normalized&&(rt=denormalize(rt,this.array)),rt}setXY(tt,rt,st){return tt=tt*this.data.stride+this.offset,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array)),this.data.array[tt+0]=rt,this.data.array[tt+1]=st,this}setXYZ(tt,rt,st,at){return tt=tt*this.data.stride+this.offset,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array),at=normalize$1(at,this.array)),this.data.array[tt+0]=rt,this.data.array[tt+1]=st,this.data.array[tt+2]=at,this}setXYZW(tt,rt,st,at,lt){return tt=tt*this.data.stride+this.offset,this.normalized&&(rt=normalize$1(rt,this.array),st=normalize$1(st,this.array),at=normalize$1(at,this.array),lt=normalize$1(lt,this.array)),this.data.array[tt+0]=rt,this.data.array[tt+1]=st,this.data.array[tt+2]=at,this.data.array[tt+3]=lt,this}clone(tt){if(tt===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const rt=[];for(let st=0;st<this.count;st++){const at=st*this.data.stride+this.offset;for(let lt=0;lt<this.itemSize;lt++)rt.push(this.data.array[at+lt])}return new BufferAttribute(new this.array.constructor(rt),this.itemSize,this.normalized)}else return tt.interleavedBuffers===void 0&&(tt.interleavedBuffers={}),tt.interleavedBuffers[this.data.uuid]===void 0&&(tt.interleavedBuffers[this.data.uuid]=this.data.clone(tt)),new InterleavedBufferAttribute(tt.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(tt){if(tt===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const rt=[];for(let st=0;st<this.count;st++){const at=st*this.data.stride+this.offset;for(let lt=0;lt<this.itemSize;lt++)rt.push(this.data.array[at+lt])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:rt,normalized:this.normalized}}else return tt.interleavedBuffers===void 0&&(tt.interleavedBuffers={}),tt.interleavedBuffers[this.data.uuid]===void 0&&(tt.interleavedBuffers[this.data.uuid]=this.data.toJSON(tt)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(tt){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.map=tt.map,this.alphaMap=tt.alphaMap,this.rotation=tt.rotation,this.sizeAttenuation=tt.sizeAttenuation,this.fog=tt.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(tt=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const rt=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),st=new InterleavedBuffer(rt,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(st,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(st,2,3,!1))}this.geometry=_geometry,this.material=tt,this.center=new Vector2(.5,.5)}raycast(tt,rt){tt.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(tt.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(tt.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),tt.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const st=this.material.rotation;let at,lt;st!==0&&(lt=Math.cos(st),at=Math.sin(st));const dt=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,dt,_worldScale,at,lt),transformVertex(_vB.set(.5,-.5,0),_mvPosition,dt,_worldScale,at,lt),transformVertex(_vC.set(.5,.5,0),_mvPosition,dt,_worldScale,at,lt),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let yt=tt.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(yt===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,dt,_worldScale,at,lt),_uvB.set(0,1),yt=tt.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),yt===null))return;const vt=tt.ray.origin.distanceTo(_intersectPoint);vt<tt.near||vt>tt.far||rt.push({distance:vt,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(tt,rt){return super.copy(tt,rt),tt.center!==void 0&&this.center.copy(tt.center),this.material=tt.material,this}}function transformVertex(nt,tt,rt,st,at,lt){_alignedPosition.subVectors(nt,rt).addScalar(.5).multiply(st),at!==void 0?(_rotatedPosition.x=lt*_alignedPosition.x-at*_alignedPosition.y,_rotatedPosition.y=at*_alignedPosition.x+lt*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),nt.copy(tt),nt.x+=_rotatedPosition.x,nt.y+=_rotatedPosition.y,nt.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(tt){super.copy(tt,!1);const rt=tt.levels;for(let st=0,at=rt.length;st<at;st++){const lt=rt[st];this.addLevel(lt.object.clone(),lt.distance,lt.hysteresis)}return this.autoUpdate=tt.autoUpdate,this}addLevel(tt,rt=0,st=0){rt=Math.abs(rt);const at=this.levels;let lt;for(lt=0;lt<at.length&&!(rt<at[lt].distance);lt++);return at.splice(lt,0,{distance:rt,hysteresis:st,object:tt}),this.add(tt),this}removeLevel(tt){const rt=this.levels;for(let st=0;st<rt.length;st++)if(rt[st].distance===tt){const at=rt.splice(st,1);return this.remove(at[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(tt){const rt=this.levels;if(rt.length>0){let st,at;for(st=1,at=rt.length;st<at;st++){let lt=rt[st].distance;if(rt[st].object.visible&&(lt-=lt*rt[st].hysteresis),tt<lt)break}return rt[st-1].object}return null}raycast(tt,rt){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const at=tt.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(at).raycast(tt,rt)}}update(tt){const rt=this.levels;if(rt.length>1){_v1$2.setFromMatrixPosition(tt.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const st=_v1$2.distanceTo(_v2$1)/tt.zoom;rt[0].object.visible=!0;let at,lt;for(at=1,lt=rt.length;at<lt;at++){let dt=rt[at].distance;if(rt[at].object.visible&&(dt-=dt*rt[at].hysteresis),st>=dt)rt[at-1].object.visible=!1,rt[at].object.visible=!0;else break}for(this._currentLevel=at-1;at<lt;at++)rt[at].object.visible=!1}}toJSON(tt){const rt=super.toJSON(tt);this.autoUpdate===!1&&(rt.object.autoUpdate=!1),rt.object.levels=[];const st=this.levels;for(let at=0,lt=st.length;at<lt;at++){const dt=st[at];rt.object.levels.push({object:dt.object.uuid,distance:dt.distance,hysteresis:dt.hysteresis})}return rt}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$4=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(tt,rt){super(tt,rt),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const tt=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const rt=tt.getAttribute("position");for(let st=0;st<rt.count;st++)this.getVertexPosition(st,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const tt=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const rt=tt.getAttribute("position");for(let st=0;st<rt.count;st++)this.getVertexPosition(st,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(tt,rt){return super.copy(tt,rt),this.bindMode=tt.bindMode,this.bindMatrix.copy(tt.bindMatrix),this.bindMatrixInverse.copy(tt.bindMatrixInverse),this.skeleton=tt.skeleton,tt.boundingBox!==null&&(this.boundingBox=tt.boundingBox.clone()),tt.boundingSphere!==null&&(this.boundingSphere=tt.boundingSphere.clone()),this}raycast(tt,rt){const st=this.material,at=this.matrixWorld;st!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(at),tt.ray.intersectsSphere(_sphere$4)!==!1&&(_inverseMatrix$2.copy(at).invert(),_ray$2.copy(tt.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(tt,rt,_ray$2)))}getVertexPosition(tt,rt){return super.getVertexPosition(tt,rt),this.applyBoneTransform(tt,rt),rt}bind(tt,rt){this.skeleton=tt,rt===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),rt=this.matrixWorld),this.bindMatrix.copy(rt),this.bindMatrixInverse.copy(rt).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const tt=new Vector4,rt=this.geometry.attributes.skinWeight;for(let st=0,at=rt.count;st<at;st++){tt.fromBufferAttribute(rt,st);const lt=1/tt.manhattanLength();lt!==1/0?tt.multiplyScalar(lt):tt.set(1,0,0,0),rt.setXYZW(st,tt.x,tt.y,tt.z,tt.w)}}updateMatrixWorld(tt){super.updateMatrixWorld(tt),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(tt,rt){const st=this.skeleton,at=this.geometry;_skinIndex.fromBufferAttribute(at.attributes.skinIndex,tt),_skinWeight.fromBufferAttribute(at.attributes.skinWeight,tt),_basePosition.copy(rt).applyMatrix4(this.bindMatrix),rt.set(0,0,0);for(let lt=0;lt<4;lt++){const dt=_skinWeight.getComponent(lt);if(dt!==0){const yt=_skinIndex.getComponent(lt);_matrix4.multiplyMatrices(st.bones[yt].matrixWorld,st.boneInverses[yt]),rt.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),dt)}}return rt.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(tt=null,rt=1,st=1,at,lt,dt,yt,vt,_t=NearestFilter,bt=NearestFilter,Mt,Ct){super(null,dt,yt,vt,_t,bt,at,lt,Mt,Ct),this.isDataTexture=!0,this.image={data:tt,width:rt,height:st},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(tt=[],rt=[]){this.uuid=generateUUID(),this.bones=tt.slice(0),this.boneInverses=rt,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const tt=this.bones,rt=this.boneInverses;if(this.boneMatrices=new Float32Array(tt.length*16),rt.length===0)this.calculateInverses();else if(tt.length!==rt.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let st=0,at=this.bones.length;st<at;st++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let tt=0,rt=this.bones.length;tt<rt;tt++){const st=new Matrix4;this.bones[tt]&&st.copy(this.bones[tt].matrixWorld).invert(),this.boneInverses.push(st)}}pose(){for(let tt=0,rt=this.bones.length;tt<rt;tt++){const st=this.bones[tt];st&&st.matrixWorld.copy(this.boneInverses[tt]).invert()}for(let tt=0,rt=this.bones.length;tt<rt;tt++){const st=this.bones[tt];st&&(st.parent&&st.parent.isBone?(st.matrix.copy(st.parent.matrixWorld).invert(),st.matrix.multiply(st.matrixWorld)):st.matrix.copy(st.matrixWorld),st.matrix.decompose(st.position,st.quaternion,st.scale))}}update(){const tt=this.bones,rt=this.boneInverses,st=this.boneMatrices,at=this.boneTexture;for(let lt=0,dt=tt.length;lt<dt;lt++){const yt=tt[lt]?tt[lt].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(yt,rt[lt]),_offsetMatrix.toArray(st,lt*16)}at!==null&&(at.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let tt=Math.sqrt(this.bones.length*4);tt=Math.ceil(tt/4)*4,tt=Math.max(tt,4);const rt=new Float32Array(tt*tt*4);rt.set(this.boneMatrices);const st=new DataTexture(rt,tt,tt,RGBAFormat,FloatType);return st.needsUpdate=!0,this.boneMatrices=rt,this.boneTexture=st,this}getBoneByName(tt){for(let rt=0,st=this.bones.length;rt<st;rt++){const at=this.bones[rt];if(at.name===tt)return at}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(tt,rt){this.uuid=tt.uuid;for(let st=0,at=tt.bones.length;st<at;st++){const lt=tt.bones[st];let dt=rt[lt];dt===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",lt),dt=new Bone),this.bones.push(dt),this.boneInverses.push(new Matrix4().fromArray(tt.boneInverses[st]))}return this.init(),this}toJSON(){const tt={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};tt.uuid=this.uuid;const rt=this.bones,st=this.boneInverses;for(let at=0,lt=rt.length;at<lt;at++){const dt=rt[at];tt.bones.push(dt.uuid);const yt=st[at];tt.boneInverses.push(yt.toArray())}return tt}}class InstancedBufferAttribute extends BufferAttribute{constructor(tt,rt,st,at=1){super(tt,rt,st),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=at}copy(tt){return super.copy(tt),this.meshPerAttribute=tt.meshPerAttribute,this}toJSON(){const tt=super.toJSON();return tt.meshPerAttribute=this.meshPerAttribute,tt.isInstancedBufferAttribute=!0,tt}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$3=new Sphere;class InstancedMesh extends Mesh{constructor(tt,rt,st){super(tt,rt),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(st*16),16),this.instanceColor=null,this.morphTexture=null,this.count=st,this.boundingBox=null,this.boundingSphere=null;for(let at=0;at<st;at++)this.setMatrixAt(at,_identity)}computeBoundingBox(){const tt=this.geometry,rt=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),tt.boundingBox===null&&tt.computeBoundingBox(),this.boundingBox.makeEmpty();for(let st=0;st<rt;st++)this.getMatrixAt(st,_instanceLocalMatrix),_box3.copy(tt.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const tt=this.geometry,rt=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),tt.boundingSphere===null&&tt.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let st=0;st<rt;st++)this.getMatrixAt(st,_instanceLocalMatrix),_sphere$3.copy(tt.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$3)}copy(tt,rt){return super.copy(tt,rt),this.instanceMatrix.copy(tt.instanceMatrix),tt.morphTexture!==null&&(this.morphTexture=tt.morphTexture.clone()),tt.instanceColor!==null&&(this.instanceColor=tt.instanceColor.clone()),this.count=tt.count,tt.boundingBox!==null&&(this.boundingBox=tt.boundingBox.clone()),tt.boundingSphere!==null&&(this.boundingSphere=tt.boundingSphere.clone()),this}getColorAt(tt,rt){rt.fromArray(this.instanceColor.array,tt*3)}getMatrixAt(tt,rt){rt.fromArray(this.instanceMatrix.array,tt*16)}getMorphAt(tt,rt){const st=rt.morphTargetInfluences,at=this.morphTexture.source.data.data,lt=st.length+1,dt=tt*lt+1;for(let yt=0;yt<st.length;yt++)st[yt]=at[dt+yt]}raycast(tt,rt){const st=this.matrixWorld,at=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(st),tt.ray.intersectsSphere(_sphere$3)!==!1))for(let lt=0;lt<at;lt++){this.getMatrixAt(lt,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(st,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(tt,_instanceIntersects);for(let dt=0,yt=_instanceIntersects.length;dt<yt;dt++){const vt=_instanceIntersects[dt];vt.instanceId=lt,vt.object=this,rt.push(vt)}_instanceIntersects.length=0}}setColorAt(tt,rt){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),rt.toArray(this.instanceColor.array,tt*3)}setMatrixAt(tt,rt){rt.toArray(this.instanceMatrix.array,tt*16)}setMorphAt(tt,rt){const st=rt.morphTargetInfluences,at=st.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(at*this.count),at,this.count,RedFormat,FloatType));const lt=this.morphTexture.source.data.data;let dt=0;for(let _t=0;_t<st.length;_t++)dt+=st[_t];const yt=this.geometry.morphTargetsRelative?1:1-dt,vt=at*tt;lt[vt]=yt,lt.set(st,vt+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function sortOpaque(nt,tt){return nt.z-tt.z}function sortTransparent(nt,tt){return tt.z-nt.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(tt,rt,st){const at=this.pool,lt=this.list;this.index>=at.length&&at.push({start:-1,count:-1,z:-1,index:-1});const dt=at[this.index];lt.push(dt),this.index++,dt.start=tt.start,dt.count=tt.count,dt.z=rt,dt.index=st}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_invMatrixWorld=new Matrix4,_identityMatrix=new Matrix4,_whiteColor=new Color$1(1,1,1),_projScreenMatrix$2=new Matrix4,_frustum=new Frustum,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_forward=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(nt,tt,rt=0){const st=tt.itemSize;if(nt.isInterleavedBufferAttribute||nt.array.constructor!==tt.array.constructor){const at=nt.count;for(let lt=0;lt<at;lt++)for(let dt=0;dt<st;dt++)tt.setComponent(lt+rt,dt,nt.getComponent(lt,dt))}else tt.array.set(nt.array,rt*st);tt.needsUpdate=!0}class BatchedMesh extends Mesh{get maxInstanceCount(){return this._maxInstanceCount}constructor(tt,rt,st=rt*2,at){super(new BufferGeometry,at),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=tt,this._maxVertexCount=rt,this._maxIndexCount=st,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(tt),this._multiDrawStarts=new Int32Array(tt),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let tt=Math.sqrt(this._maxInstanceCount*4);tt=Math.ceil(tt/4)*4,tt=Math.max(tt,4);const rt=new Float32Array(tt*tt*4),st=new DataTexture(rt,tt,tt,RGBAFormat,FloatType);this._matricesTexture=st}_initIndirectTexture(){let tt=Math.sqrt(this._maxInstanceCount);tt=Math.ceil(tt);const rt=new Uint32Array(tt*tt),st=new DataTexture(rt,tt,tt,RedIntegerFormat,UnsignedIntType);this._indirectTexture=st}_initColorsTexture(){let tt=Math.sqrt(this._maxInstanceCount);tt=Math.ceil(tt);const rt=new Float32Array(tt*tt*4).fill(1),st=new DataTexture(rt,tt,tt,RGBAFormat,FloatType);st.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=st}_initializeGeometry(tt){const rt=this.geometry,st=this._maxVertexCount,at=this._maxIndexCount;if(this._geometryInitialized===!1){for(const lt in tt.attributes){const dt=tt.getAttribute(lt),{array:yt,itemSize:vt,normalized:_t}=dt,bt=new yt.constructor(st*vt),Mt=new BufferAttribute(bt,vt,_t);rt.setAttribute(lt,Mt)}if(tt.getIndex()!==null){const lt=st>65535?new Uint32Array(at):new Uint16Array(at);rt.setIndex(new BufferAttribute(lt,1))}this._geometryInitialized=!0}}_validateGeometry(tt){const rt=this.geometry;if(!!tt.getIndex()!=!!rt.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const st in rt.attributes){if(!tt.hasAttribute(st))throw new Error(`BatchedMesh: Added geometry missing "${st}". All geometries must have consistent attributes.`);const at=tt.getAttribute(st),lt=rt.getAttribute(st);if(at.itemSize!==lt.itemSize||at.normalized!==lt.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(tt){return this.customSort=tt,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const tt=this.boundingBox,rt=this._drawInfo;tt.makeEmpty();for(let st=0,at=rt.length;st<at;st++){if(rt[st].active===!1)continue;const lt=rt[st].geometryIndex;this.getMatrixAt(st,_matrix$1),this.getBoundingBoxAt(lt,_box$1).applyMatrix4(_matrix$1),tt.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const tt=this.boundingSphere,rt=this._drawInfo;tt.makeEmpty();for(let st=0,at=rt.length;st<at;st++){if(rt[st].active===!1)continue;const lt=rt[st].geometryIndex;this.getMatrixAt(st,_matrix$1),this.getBoundingSphereAt(lt,_sphere$2).applyMatrix4(_matrix$1),tt.union(_sphere$2)}}addInstance(tt){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const st={visible:!0,active:!0,geometryIndex:tt};let at=null;this._availableInstanceIds.length>0?(at=this._availableInstanceIds.pop(),this._drawInfo[at]=st):(at=this._drawInfo.length,this._drawInfo.push(st));const lt=this._matricesTexture,dt=lt.image.data;_identityMatrix.toArray(dt,at*16),lt.needsUpdate=!0;const yt=this._colorsTexture;return yt&&(_whiteColor.toArray(yt.image.data,at*4),yt.needsUpdate=!0),at}addGeometry(tt,rt=-1,st=-1){if(this._initializeGeometry(tt),this._validateGeometry(tt),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const at={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let lt=null;const dt=this._reservedRanges,yt=this._drawRanges,vt=this._bounds;this._geometryCount!==0&&(lt=dt[dt.length-1]),rt===-1?at.vertexCount=tt.getAttribute("position").count:at.vertexCount=rt,lt===null?at.vertexStart=0:at.vertexStart=lt.vertexStart+lt.vertexCount;const _t=tt.getIndex(),bt=_t!==null;if(bt&&(st===-1?at.indexCount=_t.count:at.indexCount=st,lt===null?at.indexStart=0:at.indexStart=lt.indexStart+lt.indexCount),at.indexStart!==-1&&at.indexStart+at.indexCount>this._maxIndexCount||at.vertexStart+at.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const Mt=this._geometryCount;return this._geometryCount++,dt.push(at),yt.push({start:bt?at.indexStart:at.vertexStart,count:-1}),vt.push({boxInitialized:!1,box:new Box3,sphereInitialized:!1,sphere:new Sphere}),this.setGeometryAt(Mt,tt),Mt}setGeometryAt(tt,rt){if(tt>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(rt);const st=this.geometry,at=st.getIndex()!==null,lt=st.getIndex(),dt=rt.getIndex(),yt=this._reservedRanges[tt];if(at&&dt.count>yt.indexCount||rt.attributes.position.count>yt.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const vt=yt.vertexStart,_t=yt.vertexCount;for(const Tt in st.attributes){const $t=rt.getAttribute(Tt),Rt=st.getAttribute(Tt);copyAttributeData($t,Rt,vt);const Et=$t.itemSize;for(let wt=$t.count,Pt=_t;wt<Pt;wt++){const Ft=vt+wt;for(let Nt=0;Nt<Et;Nt++)Rt.setComponent(Ft,Nt,0)}Rt.needsUpdate=!0,Rt.addUpdateRange(vt*Et,_t*Et)}if(at){const Tt=yt.indexStart;for(let $t=0;$t<dt.count;$t++)lt.setX(Tt+$t,vt+dt.getX($t));for(let $t=dt.count,Rt=yt.indexCount;$t<Rt;$t++)lt.setX(Tt+$t,vt);lt.needsUpdate=!0,lt.addUpdateRange(Tt,yt.indexCount)}const bt=this._bounds[tt];rt.boundingBox!==null?(bt.box.copy(rt.boundingBox),bt.boxInitialized=!0):bt.boxInitialized=!1,rt.boundingSphere!==null?(bt.sphere.copy(rt.boundingSphere),bt.sphereInitialized=!0):bt.sphereInitialized=!1;const Mt=this._drawRanges[tt],Ct=rt.getAttribute("position");return Mt.count=at?dt.count:Ct.count,this._visibilityChanged=!0,tt}deleteInstance(tt){const rt=this._drawInfo;return tt>=rt.length||rt[tt].active===!1?this:(rt[tt].active=!1,this._availableInstanceIds.push(tt),this._visibilityChanged=!0,this)}getBoundingBoxAt(tt,rt){if(tt>=this._geometryCount)return null;const st=this._bounds[tt],at=st.box,lt=this.geometry;if(st.boxInitialized===!1){at.makeEmpty();const dt=lt.index,yt=lt.attributes.position,vt=this._drawRanges[tt];for(let _t=vt.start,bt=vt.start+vt.count;_t<bt;_t++){let Mt=_t;dt&&(Mt=dt.getX(Mt)),at.expandByPoint(_vector$5.fromBufferAttribute(yt,Mt))}st.boxInitialized=!0}return rt.copy(at),rt}getBoundingSphereAt(tt,rt){if(tt>=this._geometryCount)return null;const st=this._bounds[tt],at=st.sphere,lt=this.geometry;if(st.sphereInitialized===!1){at.makeEmpty(),this.getBoundingBoxAt(tt,_box$1),_box$1.getCenter(at.center);const dt=lt.index,yt=lt.attributes.position,vt=this._drawRanges[tt];let _t=0;for(let bt=vt.start,Mt=vt.start+vt.count;bt<Mt;bt++){let Ct=bt;dt&&(Ct=dt.getX(Ct)),_vector$5.fromBufferAttribute(yt,Ct),_t=Math.max(_t,at.center.distanceToSquared(_vector$5))}at.radius=Math.sqrt(_t),st.sphereInitialized=!0}return rt.copy(at),rt}setMatrixAt(tt,rt){const st=this._drawInfo,at=this._matricesTexture,lt=this._matricesTexture.image.data;return tt>=st.length||st[tt].active===!1?this:(rt.toArray(lt,tt*16),at.needsUpdate=!0,this)}getMatrixAt(tt,rt){const st=this._drawInfo,at=this._matricesTexture.image.data;return tt>=st.length||st[tt].active===!1?null:rt.fromArray(at,tt*16)}setColorAt(tt,rt){this._colorsTexture===null&&this._initColorsTexture();const st=this._colorsTexture,at=this._colorsTexture.image.data,lt=this._drawInfo;return tt>=lt.length||lt[tt].active===!1?this:(rt.toArray(at,tt*4),st.needsUpdate=!0,this)}getColorAt(tt,rt){const st=this._colorsTexture.image.data,at=this._drawInfo;return tt>=at.length||at[tt].active===!1?null:rt.fromArray(st,tt*4)}setVisibleAt(tt,rt){const st=this._drawInfo;return tt>=st.length||st[tt].active===!1||st[tt].visible===rt?this:(st[tt].visible=rt,this._visibilityChanged=!0,this)}getVisibleAt(tt){const rt=this._drawInfo;return tt>=rt.length||rt[tt].active===!1?!1:rt[tt].visible}setGeometryIdAt(tt,rt){const st=this._drawInfo;return tt>=st.length||st[tt].active===!1||rt<0||rt>=this._geometryCount?null:(st[tt].geometryIndex=rt,this)}getGeometryIdAt(tt){const rt=this._drawInfo;return tt>=rt.length||rt[tt].active===!1?-1:rt[tt].geometryIndex}getGeometryRangeAt(tt,rt={}){if(tt<0||tt>=this._geometryCount)return null;const st=this._drawRanges[tt];return rt.start=st.start,rt.count=st.count,rt}raycast(tt,rt){const st=this._drawInfo,at=this._drawRanges,lt=this.matrixWorld,dt=this.geometry;_mesh.material=this.material,_mesh.geometry.index=dt.index,_mesh.geometry.attributes=dt.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let yt=0,vt=st.length;yt<vt;yt++){if(!st[yt].visible||!st[yt].active)continue;const _t=st[yt].geometryIndex,bt=at[_t];_mesh.geometry.setDrawRange(bt.start,bt.count),this.getMatrixAt(yt,_mesh.matrixWorld).premultiply(lt),this.getBoundingBoxAt(_t,_mesh.geometry.boundingBox),this.getBoundingSphereAt(_t,_mesh.geometry.boundingSphere),_mesh.raycast(tt,_batchIntersects);for(let Mt=0,Ct=_batchIntersects.length;Mt<Ct;Mt++){const Tt=_batchIntersects[Mt];Tt.object=this,Tt.batchId=yt,rt.push(Tt)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(tt){return super.copy(tt),this.geometry=tt.geometry.clone(),this.perObjectFrustumCulled=tt.perObjectFrustumCulled,this.sortObjects=tt.sortObjects,this.boundingBox=tt.boundingBox!==null?tt.boundingBox.clone():null,this.boundingSphere=tt.boundingSphere!==null?tt.boundingSphere.clone():null,this._drawRanges=tt._drawRanges.map(rt=>({...rt})),this._reservedRanges=tt._reservedRanges.map(rt=>({...rt})),this._drawInfo=tt._drawInfo.map(rt=>({...rt})),this._bounds=tt._bounds.map(rt=>({boxInitialized:rt.boxInitialized,box:rt.box.clone(),sphereInitialized:rt.sphereInitialized,sphere:rt.sphere.clone()})),this._maxInstanceCount=tt._maxInstanceCount,this._maxVertexCount=tt._maxVertexCount,this._maxIndexCount=tt._maxIndexCount,this._geometryInitialized=tt._geometryInitialized,this._geometryCount=tt._geometryCount,this._multiDrawCounts=tt._multiDrawCounts.slice(),this._multiDrawStarts=tt._multiDrawStarts.slice(),this._matricesTexture=tt._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=tt._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(tt,rt,st,at,lt){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const dt=at.getIndex(),yt=dt===null?1:dt.array.BYTES_PER_ELEMENT,vt=this._drawInfo,_t=this._multiDrawStarts,bt=this._multiDrawCounts,Mt=this._drawRanges,Ct=this.perObjectFrustumCulled,Tt=this._indirectTexture,$t=Tt.image.data;Ct&&(_projScreenMatrix$2.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_projScreenMatrix$2,tt.coordinateSystem));let Rt=0;if(this.sortObjects){_invMatrixWorld.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(st.matrixWorld).applyMatrix4(_invMatrixWorld),_forward.set(0,0,-1).transformDirection(st.matrixWorld).transformDirection(_invMatrixWorld);for(let Pt=0,Ft=vt.length;Pt<Ft;Pt++)if(vt[Pt].visible&&vt[Pt].active){const Nt=vt[Pt].geometryIndex;this.getMatrixAt(Pt,_matrix$1),this.getBoundingSphereAt(Nt,_sphere$2).applyMatrix4(_matrix$1);let Ot=!1;if(Ct&&(Ot=!_frustum.intersectsSphere(_sphere$2)),!Ot){const Bt=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward);_renderList.push(Mt[Nt],Bt,Pt)}}const Et=_renderList.list,wt=this.customSort;wt===null?Et.sort(lt.transparent?sortTransparent:sortOpaque):wt.call(this,Et,st);for(let Pt=0,Ft=Et.length;Pt<Ft;Pt++){const Nt=Et[Pt];_t[Rt]=Nt.start*yt,bt[Rt]=Nt.count,$t[Rt]=Nt.index,Rt++}_renderList.reset()}else for(let Et=0,wt=vt.length;Et<wt;Et++)if(vt[Et].visible&&vt[Et].active){const Pt=vt[Et].geometryIndex;let Ft=!1;if(Ct&&(this.getMatrixAt(Et,_matrix$1),this.getBoundingSphereAt(Pt,_sphere$2).applyMatrix4(_matrix$1),Ft=!_frustum.intersectsSphere(_sphere$2)),!Ft){const Nt=Mt[Pt];_t[Rt]=Nt.start*yt,bt[Rt]=Nt.count,$t[Rt]=Et,Rt++}}Tt.needsUpdate=!0,this._multiDrawCount=Rt,this._visibilityChanged=!1}onBeforeShadow(tt,rt,st,at,lt,dt){this.onBeforeRender(tt,null,at,lt,dt)}}class LineBasicMaterial extends Material{constructor(tt){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.map=tt.map,this.linewidth=tt.linewidth,this.linecap=tt.linecap,this.linejoin=tt.linejoin,this.fog=tt.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;let Line$2=class extends Object3D{constructor(tt=new BufferGeometry,rt=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=tt,this.material=rt,this.updateMorphTargets()}copy(tt,rt){return super.copy(tt,rt),this.material=Array.isArray(tt.material)?tt.material.slice():tt.material,this.geometry=tt.geometry,this}computeLineDistances(){const tt=this.geometry;if(tt.index===null){const rt=tt.attributes.position,st=[0];for(let at=1,lt=rt.count;at<lt;at++)_vStart.fromBufferAttribute(rt,at-1),_vEnd.fromBufferAttribute(rt,at),st[at]=st[at-1],st[at]+=_vStart.distanceTo(_vEnd);tt.setAttribute("lineDistance",new Float32BufferAttribute(st,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(tt,rt){const st=this.geometry,at=this.matrixWorld,lt=tt.params.Line.threshold,dt=st.drawRange;if(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere$1.copy(st.boundingSphere),_sphere$1.applyMatrix4(at),_sphere$1.radius+=lt,tt.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(at).invert(),_ray$1.copy(tt.ray).applyMatrix4(_inverseMatrix$1);const yt=lt/((this.scale.x+this.scale.y+this.scale.z)/3),vt=yt*yt,_t=this.isLineSegments?2:1,bt=st.index,Ct=st.attributes.position;if(bt!==null){const Tt=Math.max(0,dt.start),$t=Math.min(bt.count,dt.start+dt.count);for(let Rt=Tt,Et=$t-1;Rt<Et;Rt+=_t){const wt=bt.getX(Rt),Pt=bt.getX(Rt+1),Ft=checkIntersection(this,tt,_ray$1,vt,wt,Pt);Ft&&rt.push(Ft)}if(this.isLineLoop){const Rt=bt.getX($t-1),Et=bt.getX(Tt),wt=checkIntersection(this,tt,_ray$1,vt,Rt,Et);wt&&rt.push(wt)}}else{const Tt=Math.max(0,dt.start),$t=Math.min(Ct.count,dt.start+dt.count);for(let Rt=Tt,Et=$t-1;Rt<Et;Rt+=_t){const wt=checkIntersection(this,tt,_ray$1,vt,Rt,Rt+1);wt&&rt.push(wt)}if(this.isLineLoop){const Rt=checkIntersection(this,tt,_ray$1,vt,$t-1,Tt);Rt&&rt.push(Rt)}}}updateMorphTargets(){const rt=this.geometry.morphAttributes,st=Object.keys(rt);if(st.length>0){const at=rt[st[0]];if(at!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let lt=0,dt=at.length;lt<dt;lt++){const yt=at[lt].name||String(lt);this.morphTargetInfluences.push(0),this.morphTargetDictionary[yt]=lt}}}}};function checkIntersection(nt,tt,rt,st,at,lt){const dt=nt.geometry.attributes.position;if(_vStart.fromBufferAttribute(dt,at),_vEnd.fromBufferAttribute(dt,lt),rt.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>st)return;_intersectPointOnRay.applyMatrix4(nt.matrixWorld);const vt=tt.ray.origin.distanceTo(_intersectPointOnRay);if(!(vt<tt.near||vt>tt.far))return{distance:vt,point:_intersectPointOnSegment.clone().applyMatrix4(nt.matrixWorld),index:at,face:null,faceIndex:null,barycoord:null,object:nt}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line$2{constructor(tt,rt){super(tt,rt),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const tt=this.geometry;if(tt.index===null){const rt=tt.attributes.position,st=[];for(let at=0,lt=rt.count;at<lt;at+=2)_start.fromBufferAttribute(rt,at),_end.fromBufferAttribute(rt,at+1),st[at]=at===0?0:st[at-1],st[at+1]=st[at]+_start.distanceTo(_end);tt.setAttribute("lineDistance",new Float32BufferAttribute(st,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line$2{constructor(tt,rt){super(tt,rt),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(tt){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.map=tt.map,this.alphaMap=tt.alphaMap,this.size=tt.size,this.sizeAttenuation=tt.sizeAttenuation,this.fog=tt.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(tt=new BufferGeometry,rt=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=tt,this.material=rt,this.updateMorphTargets()}copy(tt,rt){return super.copy(tt,rt),this.material=Array.isArray(tt.material)?tt.material.slice():tt.material,this.geometry=tt.geometry,this}raycast(tt,rt){const st=this.geometry,at=this.matrixWorld,lt=tt.params.Points.threshold,dt=st.drawRange;if(st.boundingSphere===null&&st.computeBoundingSphere(),_sphere.copy(st.boundingSphere),_sphere.applyMatrix4(at),_sphere.radius+=lt,tt.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(at).invert(),_ray.copy(tt.ray).applyMatrix4(_inverseMatrix);const yt=lt/((this.scale.x+this.scale.y+this.scale.z)/3),vt=yt*yt,_t=st.index,Mt=st.attributes.position;if(_t!==null){const Ct=Math.max(0,dt.start),Tt=Math.min(_t.count,dt.start+dt.count);for(let $t=Ct,Rt=Tt;$t<Rt;$t++){const Et=_t.getX($t);_position$2.fromBufferAttribute(Mt,Et),testPoint(_position$2,Et,vt,at,tt,rt,this)}}else{const Ct=Math.max(0,dt.start),Tt=Math.min(Mt.count,dt.start+dt.count);for(let $t=Ct,Rt=Tt;$t<Rt;$t++)_position$2.fromBufferAttribute(Mt,$t),testPoint(_position$2,$t,vt,at,tt,rt,this)}}updateMorphTargets(){const rt=this.geometry.morphAttributes,st=Object.keys(rt);if(st.length>0){const at=rt[st[0]];if(at!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let lt=0,dt=at.length;lt<dt;lt++){const yt=at[lt].name||String(lt);this.morphTargetInfluences.push(0),this.morphTargetDictionary[yt]=lt}}}}}function testPoint(nt,tt,rt,st,at,lt,dt){const yt=_ray.distanceSqToPoint(nt);if(yt<rt){const vt=new Vector3;_ray.closestPointToPoint(nt,vt),vt.applyMatrix4(st);const _t=at.ray.origin.distanceTo(vt);if(_t<at.near||_t>at.far)return;lt.push({distance:_t,distanceToRay:Math.sqrt(yt),point:vt,index:tt,face:null,faceIndex:null,barycoord:null,object:dt})}}class VideoTexture extends Texture{constructor(tt,rt,st,at,lt,dt,yt,vt,_t){super(tt,rt,st,at,lt,dt,yt,vt,_t),this.isVideoTexture=!0,this.minFilter=dt!==void 0?dt:LinearFilter,this.magFilter=lt!==void 0?lt:LinearFilter,this.generateMipmaps=!1;const bt=this;function Mt(){bt.needsUpdate=!0,tt.requestVideoFrameCallback(Mt)}"requestVideoFrameCallback"in tt&&tt.requestVideoFrameCallback(Mt)}clone(){return new this.constructor(this.image).copy(this)}update(){const tt=this.image;"requestVideoFrameCallback"in tt===!1&&tt.readyState>=tt.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(tt,rt){super({width:tt,height:rt}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(tt,rt,st,at,lt,dt,yt,vt,_t,bt,Mt,Ct){super(null,dt,yt,vt,_t,bt,at,lt,Mt,Ct),this.isCompressedTexture=!0,this.image={width:rt,height:st},this.mipmaps=tt,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(tt,rt,st,at,lt,dt){super(tt,rt,st,lt,dt),this.isCompressedArrayTexture=!0,this.image.depth=at,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(tt){this.layerUpdates.add(tt)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(tt,rt,st){super(void 0,tt[0].width,tt[0].height,rt,st,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=tt}}class CanvasTexture extends Texture{constructor(tt,rt,st,at,lt,dt,yt,vt,_t){super(tt,rt,st,at,lt,dt,yt,vt,_t),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(tt,rt){const st=this.getUtoTmapping(tt);return this.getPoint(st,rt)}getPoints(tt=5){const rt=[];for(let st=0;st<=tt;st++)rt.push(this.getPoint(st/tt));return rt}getSpacedPoints(tt=5){const rt=[];for(let st=0;st<=tt;st++)rt.push(this.getPointAt(st/tt));return rt}getLength(){const tt=this.getLengths();return tt[tt.length-1]}getLengths(tt=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===tt+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const rt=[];let st,at=this.getPoint(0),lt=0;rt.push(0);for(let dt=1;dt<=tt;dt++)st=this.getPoint(dt/tt),lt+=st.distanceTo(at),rt.push(lt),at=st;return this.cacheArcLengths=rt,rt}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(tt,rt){const st=this.getLengths();let at=0;const lt=st.length;let dt;rt?dt=rt:dt=tt*st[lt-1];let yt=0,vt=lt-1,_t;for(;yt<=vt;)if(at=Math.floor(yt+(vt-yt)/2),_t=st[at]-dt,_t<0)yt=at+1;else if(_t>0)vt=at-1;else{vt=at;break}if(at=vt,st[at]===dt)return at/(lt-1);const bt=st[at],Ct=st[at+1]-bt,Tt=(dt-bt)/Ct;return(at+Tt)/(lt-1)}getTangent(tt,rt){let at=tt-1e-4,lt=tt+1e-4;at<0&&(at=0),lt>1&&(lt=1);const dt=this.getPoint(at),yt=this.getPoint(lt),vt=rt||(dt.isVector2?new Vector2:new Vector3);return vt.copy(yt).sub(dt).normalize(),vt}getTangentAt(tt,rt){const st=this.getUtoTmapping(tt);return this.getTangent(st,rt)}computeFrenetFrames(tt,rt){const st=new Vector3,at=[],lt=[],dt=[],yt=new Vector3,vt=new Matrix4;for(let Tt=0;Tt<=tt;Tt++){const $t=Tt/tt;at[Tt]=this.getTangentAt($t,new Vector3)}lt[0]=new Vector3,dt[0]=new Vector3;let _t=Number.MAX_VALUE;const bt=Math.abs(at[0].x),Mt=Math.abs(at[0].y),Ct=Math.abs(at[0].z);bt<=_t&&(_t=bt,st.set(1,0,0)),Mt<=_t&&(_t=Mt,st.set(0,1,0)),Ct<=_t&&st.set(0,0,1),yt.crossVectors(at[0],st).normalize(),lt[0].crossVectors(at[0],yt),dt[0].crossVectors(at[0],lt[0]);for(let Tt=1;Tt<=tt;Tt++){if(lt[Tt]=lt[Tt-1].clone(),dt[Tt]=dt[Tt-1].clone(),yt.crossVectors(at[Tt-1],at[Tt]),yt.length()>Number.EPSILON){yt.normalize();const $t=Math.acos(clamp(at[Tt-1].dot(at[Tt]),-1,1));lt[Tt].applyMatrix4(vt.makeRotationAxis(yt,$t))}dt[Tt].crossVectors(at[Tt],lt[Tt])}if(rt===!0){let Tt=Math.acos(clamp(lt[0].dot(lt[tt]),-1,1));Tt/=tt,at[0].dot(yt.crossVectors(lt[0],lt[tt]))>0&&(Tt=-Tt);for(let $t=1;$t<=tt;$t++)lt[$t].applyMatrix4(vt.makeRotationAxis(at[$t],Tt*$t)),dt[$t].crossVectors(at[$t],lt[$t])}return{tangents:at,normals:lt,binormals:dt}}clone(){return new this.constructor().copy(this)}copy(tt){return this.arcLengthDivisions=tt.arcLengthDivisions,this}toJSON(){const tt={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return tt.arcLengthDivisions=this.arcLengthDivisions,tt.type=this.type,tt}fromJSON(tt){return this.arcLengthDivisions=tt.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(tt=0,rt=0,st=1,at=1,lt=0,dt=Math.PI*2,yt=!1,vt=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=tt,this.aY=rt,this.xRadius=st,this.yRadius=at,this.aStartAngle=lt,this.aEndAngle=dt,this.aClockwise=yt,this.aRotation=vt}getPoint(tt,rt=new Vector2){const st=rt,at=Math.PI*2;let lt=this.aEndAngle-this.aStartAngle;const dt=Math.abs(lt)<Number.EPSILON;for(;lt<0;)lt+=at;for(;lt>at;)lt-=at;lt<Number.EPSILON&&(dt?lt=0:lt=at),this.aClockwise===!0&&!dt&&(lt===at?lt=-at:lt=lt-at);const yt=this.aStartAngle+tt*lt;let vt=this.aX+this.xRadius*Math.cos(yt),_t=this.aY+this.yRadius*Math.sin(yt);if(this.aRotation!==0){const bt=Math.cos(this.aRotation),Mt=Math.sin(this.aRotation),Ct=vt-this.aX,Tt=_t-this.aY;vt=Ct*bt-Tt*Mt+this.aX,_t=Ct*Mt+Tt*bt+this.aY}return st.set(vt,_t)}copy(tt){return super.copy(tt),this.aX=tt.aX,this.aY=tt.aY,this.xRadius=tt.xRadius,this.yRadius=tt.yRadius,this.aStartAngle=tt.aStartAngle,this.aEndAngle=tt.aEndAngle,this.aClockwise=tt.aClockwise,this.aRotation=tt.aRotation,this}toJSON(){const tt=super.toJSON();return tt.aX=this.aX,tt.aY=this.aY,tt.xRadius=this.xRadius,tt.yRadius=this.yRadius,tt.aStartAngle=this.aStartAngle,tt.aEndAngle=this.aEndAngle,tt.aClockwise=this.aClockwise,tt.aRotation=this.aRotation,tt}fromJSON(tt){return super.fromJSON(tt),this.aX=tt.aX,this.aY=tt.aY,this.xRadius=tt.xRadius,this.yRadius=tt.yRadius,this.aStartAngle=tt.aStartAngle,this.aEndAngle=tt.aEndAngle,this.aClockwise=tt.aClockwise,this.aRotation=tt.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(tt,rt,st,at,lt,dt){super(tt,rt,st,st,at,lt,dt),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let nt=0,tt=0,rt=0,st=0;function at(lt,dt,yt,vt){nt=lt,tt=yt,rt=-3*lt+3*dt-2*yt-vt,st=2*lt-2*dt+yt+vt}return{initCatmullRom:function(lt,dt,yt,vt,_t){at(dt,yt,_t*(yt-lt),_t*(vt-dt))},initNonuniformCatmullRom:function(lt,dt,yt,vt,_t,bt,Mt){let Ct=(dt-lt)/_t-(yt-lt)/(_t+bt)+(yt-dt)/bt,Tt=(yt-dt)/bt-(vt-dt)/(bt+Mt)+(vt-yt)/Mt;Ct*=bt,Tt*=bt,at(dt,yt,Ct,Tt)},calc:function(lt){const dt=lt*lt,yt=dt*lt;return nt+tt*lt+rt*dt+st*yt}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(tt=[],rt=!1,st="centripetal",at=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=tt,this.closed=rt,this.curveType=st,this.tension=at}getPoint(tt,rt=new Vector3){const st=rt,at=this.points,lt=at.length,dt=(lt-(this.closed?0:1))*tt;let yt=Math.floor(dt),vt=dt-yt;this.closed?yt+=yt>0?0:(Math.floor(Math.abs(yt)/lt)+1)*lt:vt===0&&yt===lt-1&&(yt=lt-2,vt=1);let _t,bt;this.closed||yt>0?_t=at[(yt-1)%lt]:(tmp.subVectors(at[0],at[1]).add(at[0]),_t=tmp);const Mt=at[yt%lt],Ct=at[(yt+1)%lt];if(this.closed||yt+2<lt?bt=at[(yt+2)%lt]:(tmp.subVectors(at[lt-1],at[lt-2]).add(at[lt-1]),bt=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const Tt=this.curveType==="chordal"?.5:.25;let $t=Math.pow(_t.distanceToSquared(Mt),Tt),Rt=Math.pow(Mt.distanceToSquared(Ct),Tt),Et=Math.pow(Ct.distanceToSquared(bt),Tt);Rt<1e-4&&(Rt=1),$t<1e-4&&($t=Rt),Et<1e-4&&(Et=Rt),px.initNonuniformCatmullRom(_t.x,Mt.x,Ct.x,bt.x,$t,Rt,Et),py.initNonuniformCatmullRom(_t.y,Mt.y,Ct.y,bt.y,$t,Rt,Et),pz.initNonuniformCatmullRom(_t.z,Mt.z,Ct.z,bt.z,$t,Rt,Et)}else this.curveType==="catmullrom"&&(px.initCatmullRom(_t.x,Mt.x,Ct.x,bt.x,this.tension),py.initCatmullRom(_t.y,Mt.y,Ct.y,bt.y,this.tension),pz.initCatmullRom(_t.z,Mt.z,Ct.z,bt.z,this.tension));return st.set(px.calc(vt),py.calc(vt),pz.calc(vt)),st}copy(tt){super.copy(tt),this.points=[];for(let rt=0,st=tt.points.length;rt<st;rt++){const at=tt.points[rt];this.points.push(at.clone())}return this.closed=tt.closed,this.curveType=tt.curveType,this.tension=tt.tension,this}toJSON(){const tt=super.toJSON();tt.points=[];for(let rt=0,st=this.points.length;rt<st;rt++){const at=this.points[rt];tt.points.push(at.toArray())}return tt.closed=this.closed,tt.curveType=this.curveType,tt.tension=this.tension,tt}fromJSON(tt){super.fromJSON(tt),this.points=[];for(let rt=0,st=tt.points.length;rt<st;rt++){const at=tt.points[rt];this.points.push(new Vector3().fromArray(at))}return this.closed=tt.closed,this.curveType=tt.curveType,this.tension=tt.tension,this}}function CatmullRom(nt,tt,rt,st,at){const lt=(st-tt)*.5,dt=(at-rt)*.5,yt=nt*nt,vt=nt*yt;return(2*rt-2*st+lt+dt)*vt+(-3*rt+3*st-2*lt-dt)*yt+lt*nt+rt}function QuadraticBezierP0(nt,tt){const rt=1-nt;return rt*rt*tt}function QuadraticBezierP1(nt,tt){return 2*(1-nt)*nt*tt}function QuadraticBezierP2(nt,tt){return nt*nt*tt}function QuadraticBezier(nt,tt,rt,st){return QuadraticBezierP0(nt,tt)+QuadraticBezierP1(nt,rt)+QuadraticBezierP2(nt,st)}function CubicBezierP0(nt,tt){const rt=1-nt;return rt*rt*rt*tt}function CubicBezierP1(nt,tt){const rt=1-nt;return 3*rt*rt*nt*tt}function CubicBezierP2(nt,tt){return 3*(1-nt)*nt*nt*tt}function CubicBezierP3(nt,tt){return nt*nt*nt*tt}function CubicBezier(nt,tt,rt,st,at){return CubicBezierP0(nt,tt)+CubicBezierP1(nt,rt)+CubicBezierP2(nt,st)+CubicBezierP3(nt,at)}class CubicBezierCurve extends Curve{constructor(tt=new Vector2,rt=new Vector2,st=new Vector2,at=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=tt,this.v1=rt,this.v2=st,this.v3=at}getPoint(tt,rt=new Vector2){const st=rt,at=this.v0,lt=this.v1,dt=this.v2,yt=this.v3;return st.set(CubicBezier(tt,at.x,lt.x,dt.x,yt.x),CubicBezier(tt,at.y,lt.y,dt.y,yt.y)),st}copy(tt){return super.copy(tt),this.v0.copy(tt.v0),this.v1.copy(tt.v1),this.v2.copy(tt.v2),this.v3.copy(tt.v3),this}toJSON(){const tt=super.toJSON();return tt.v0=this.v0.toArray(),tt.v1=this.v1.toArray(),tt.v2=this.v2.toArray(),tt.v3=this.v3.toArray(),tt}fromJSON(tt){return super.fromJSON(tt),this.v0.fromArray(tt.v0),this.v1.fromArray(tt.v1),this.v2.fromArray(tt.v2),this.v3.fromArray(tt.v3),this}}class CubicBezierCurve3 extends Curve{constructor(tt=new Vector3,rt=new Vector3,st=new Vector3,at=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=tt,this.v1=rt,this.v2=st,this.v3=at}getPoint(tt,rt=new Vector3){const st=rt,at=this.v0,lt=this.v1,dt=this.v2,yt=this.v3;return st.set(CubicBezier(tt,at.x,lt.x,dt.x,yt.x),CubicBezier(tt,at.y,lt.y,dt.y,yt.y),CubicBezier(tt,at.z,lt.z,dt.z,yt.z)),st}copy(tt){return super.copy(tt),this.v0.copy(tt.v0),this.v1.copy(tt.v1),this.v2.copy(tt.v2),this.v3.copy(tt.v3),this}toJSON(){const tt=super.toJSON();return tt.v0=this.v0.toArray(),tt.v1=this.v1.toArray(),tt.v2=this.v2.toArray(),tt.v3=this.v3.toArray(),tt}fromJSON(tt){return super.fromJSON(tt),this.v0.fromArray(tt.v0),this.v1.fromArray(tt.v1),this.v2.fromArray(tt.v2),this.v3.fromArray(tt.v3),this}}class LineCurve extends Curve{constructor(tt=new Vector2,rt=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=tt,this.v2=rt}getPoint(tt,rt=new Vector2){const st=rt;return tt===1?st.copy(this.v2):(st.copy(this.v2).sub(this.v1),st.multiplyScalar(tt).add(this.v1)),st}getPointAt(tt,rt){return this.getPoint(tt,rt)}getTangent(tt,rt=new Vector2){return rt.subVectors(this.v2,this.v1).normalize()}getTangentAt(tt,rt){return this.getTangent(tt,rt)}copy(tt){return super.copy(tt),this.v1.copy(tt.v1),this.v2.copy(tt.v2),this}toJSON(){const tt=super.toJSON();return tt.v1=this.v1.toArray(),tt.v2=this.v2.toArray(),tt}fromJSON(tt){return super.fromJSON(tt),this.v1.fromArray(tt.v1),this.v2.fromArray(tt.v2),this}}class LineCurve3 extends Curve{constructor(tt=new Vector3,rt=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=tt,this.v2=rt}getPoint(tt,rt=new Vector3){const st=rt;return tt===1?st.copy(this.v2):(st.copy(this.v2).sub(this.v1),st.multiplyScalar(tt).add(this.v1)),st}getPointAt(tt,rt){return this.getPoint(tt,rt)}getTangent(tt,rt=new Vector3){return rt.subVectors(this.v2,this.v1).normalize()}getTangentAt(tt,rt){return this.getTangent(tt,rt)}copy(tt){return super.copy(tt),this.v1.copy(tt.v1),this.v2.copy(tt.v2),this}toJSON(){const tt=super.toJSON();return tt.v1=this.v1.toArray(),tt.v2=this.v2.toArray(),tt}fromJSON(tt){return super.fromJSON(tt),this.v1.fromArray(tt.v1),this.v2.fromArray(tt.v2),this}}class QuadraticBezierCurve extends Curve{constructor(tt=new Vector2,rt=new Vector2,st=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=tt,this.v1=rt,this.v2=st}getPoint(tt,rt=new Vector2){const st=rt,at=this.v0,lt=this.v1,dt=this.v2;return st.set(QuadraticBezier(tt,at.x,lt.x,dt.x),QuadraticBezier(tt,at.y,lt.y,dt.y)),st}copy(tt){return super.copy(tt),this.v0.copy(tt.v0),this.v1.copy(tt.v1),this.v2.copy(tt.v2),this}toJSON(){const tt=super.toJSON();return tt.v0=this.v0.toArray(),tt.v1=this.v1.toArray(),tt.v2=this.v2.toArray(),tt}fromJSON(tt){return super.fromJSON(tt),this.v0.fromArray(tt.v0),this.v1.fromArray(tt.v1),this.v2.fromArray(tt.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(tt=new Vector3,rt=new Vector3,st=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=tt,this.v1=rt,this.v2=st}getPoint(tt,rt=new Vector3){const st=rt,at=this.v0,lt=this.v1,dt=this.v2;return st.set(QuadraticBezier(tt,at.x,lt.x,dt.x),QuadraticBezier(tt,at.y,lt.y,dt.y),QuadraticBezier(tt,at.z,lt.z,dt.z)),st}copy(tt){return super.copy(tt),this.v0.copy(tt.v0),this.v1.copy(tt.v1),this.v2.copy(tt.v2),this}toJSON(){const tt=super.toJSON();return tt.v0=this.v0.toArray(),tt.v1=this.v1.toArray(),tt.v2=this.v2.toArray(),tt}fromJSON(tt){return super.fromJSON(tt),this.v0.fromArray(tt.v0),this.v1.fromArray(tt.v1),this.v2.fromArray(tt.v2),this}}class SplineCurve extends Curve{constructor(tt=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=tt}getPoint(tt,rt=new Vector2){const st=rt,at=this.points,lt=(at.length-1)*tt,dt=Math.floor(lt),yt=lt-dt,vt=at[dt===0?dt:dt-1],_t=at[dt],bt=at[dt>at.length-2?at.length-1:dt+1],Mt=at[dt>at.length-3?at.length-1:dt+2];return st.set(CatmullRom(yt,vt.x,_t.x,bt.x,Mt.x),CatmullRom(yt,vt.y,_t.y,bt.y,Mt.y)),st}copy(tt){super.copy(tt),this.points=[];for(let rt=0,st=tt.points.length;rt<st;rt++){const at=tt.points[rt];this.points.push(at.clone())}return this}toJSON(){const tt=super.toJSON();tt.points=[];for(let rt=0,st=this.points.length;rt<st;rt++){const at=this.points[rt];tt.points.push(at.toArray())}return tt}fromJSON(tt){super.fromJSON(tt),this.points=[];for(let rt=0,st=tt.points.length;rt<st;rt++){const at=tt.points[rt];this.points.push(new Vector2().fromArray(at))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(tt){this.curves.push(tt)}closePath(){const tt=this.curves[0].getPoint(0),rt=this.curves[this.curves.length-1].getPoint(1);if(!tt.equals(rt)){const st=tt.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[st](rt,tt))}return this}getPoint(tt,rt){const st=tt*this.getLength(),at=this.getCurveLengths();let lt=0;for(;lt<at.length;){if(at[lt]>=st){const dt=at[lt]-st,yt=this.curves[lt],vt=yt.getLength(),_t=vt===0?0:1-dt/vt;return yt.getPointAt(_t,rt)}lt++}return null}getLength(){const tt=this.getCurveLengths();return tt[tt.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const tt=[];let rt=0;for(let st=0,at=this.curves.length;st<at;st++)rt+=this.curves[st].getLength(),tt.push(rt);return this.cacheLengths=tt,tt}getSpacedPoints(tt=40){const rt=[];for(let st=0;st<=tt;st++)rt.push(this.getPoint(st/tt));return this.autoClose&&rt.push(rt[0]),rt}getPoints(tt=12){const rt=[];let st;for(let at=0,lt=this.curves;at<lt.length;at++){const dt=lt[at],yt=dt.isEllipseCurve?tt*2:dt.isLineCurve||dt.isLineCurve3?1:dt.isSplineCurve?tt*dt.points.length:tt,vt=dt.getPoints(yt);for(let _t=0;_t<vt.length;_t++){const bt=vt[_t];st&&st.equals(bt)||(rt.push(bt),st=bt)}}return this.autoClose&&rt.length>1&&!rt[rt.length-1].equals(rt[0])&&rt.push(rt[0]),rt}copy(tt){super.copy(tt),this.curves=[];for(let rt=0,st=tt.curves.length;rt<st;rt++){const at=tt.curves[rt];this.curves.push(at.clone())}return this.autoClose=tt.autoClose,this}toJSON(){const tt=super.toJSON();tt.autoClose=this.autoClose,tt.curves=[];for(let rt=0,st=this.curves.length;rt<st;rt++){const at=this.curves[rt];tt.curves.push(at.toJSON())}return tt}fromJSON(tt){super.fromJSON(tt),this.autoClose=tt.autoClose,this.curves=[];for(let rt=0,st=tt.curves.length;rt<st;rt++){const at=tt.curves[rt];this.curves.push(new Curves[at.type]().fromJSON(at))}return this}}class Path extends CurvePath{constructor(tt){super(),this.type="Path",this.currentPoint=new Vector2,tt&&this.setFromPoints(tt)}setFromPoints(tt){this.moveTo(tt[0].x,tt[0].y);for(let rt=1,st=tt.length;rt<st;rt++)this.lineTo(tt[rt].x,tt[rt].y);return this}moveTo(tt,rt){return this.currentPoint.set(tt,rt),this}lineTo(tt,rt){const st=new LineCurve(this.currentPoint.clone(),new Vector2(tt,rt));return this.curves.push(st),this.currentPoint.set(tt,rt),this}quadraticCurveTo(tt,rt,st,at){const lt=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(tt,rt),new Vector2(st,at));return this.curves.push(lt),this.currentPoint.set(st,at),this}bezierCurveTo(tt,rt,st,at,lt,dt){const yt=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(tt,rt),new Vector2(st,at),new Vector2(lt,dt));return this.curves.push(yt),this.currentPoint.set(lt,dt),this}splineThru(tt){const rt=[this.currentPoint.clone()].concat(tt),st=new SplineCurve(rt);return this.curves.push(st),this.currentPoint.copy(tt[tt.length-1]),this}arc(tt,rt,st,at,lt,dt){const yt=this.currentPoint.x,vt=this.currentPoint.y;return this.absarc(tt+yt,rt+vt,st,at,lt,dt),this}absarc(tt,rt,st,at,lt,dt){return this.absellipse(tt,rt,st,st,at,lt,dt),this}ellipse(tt,rt,st,at,lt,dt,yt,vt){const _t=this.currentPoint.x,bt=this.currentPoint.y;return this.absellipse(tt+_t,rt+bt,st,at,lt,dt,yt,vt),this}absellipse(tt,rt,st,at,lt,dt,yt,vt){const _t=new EllipseCurve(tt,rt,st,at,lt,dt,yt,vt);if(this.curves.length>0){const Mt=_t.getPoint(0);Mt.equals(this.currentPoint)||this.lineTo(Mt.x,Mt.y)}this.curves.push(_t);const bt=_t.getPoint(1);return this.currentPoint.copy(bt),this}copy(tt){return super.copy(tt),this.currentPoint.copy(tt.currentPoint),this}toJSON(){const tt=super.toJSON();return tt.currentPoint=this.currentPoint.toArray(),tt}fromJSON(tt){return super.fromJSON(tt),this.currentPoint.fromArray(tt.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(tt=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],rt=12,st=0,at=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:tt,segments:rt,phiStart:st,phiLength:at},rt=Math.floor(rt),at=clamp(at,0,Math.PI*2);const lt=[],dt=[],yt=[],vt=[],_t=[],bt=1/rt,Mt=new Vector3,Ct=new Vector2,Tt=new Vector3,$t=new Vector3,Rt=new Vector3;let Et=0,wt=0;for(let Pt=0;Pt<=tt.length-1;Pt++)switch(Pt){case 0:Et=tt[Pt+1].x-tt[Pt].x,wt=tt[Pt+1].y-tt[Pt].y,Tt.x=wt*1,Tt.y=-Et,Tt.z=wt*0,Rt.copy(Tt),Tt.normalize(),vt.push(Tt.x,Tt.y,Tt.z);break;case tt.length-1:vt.push(Rt.x,Rt.y,Rt.z);break;default:Et=tt[Pt+1].x-tt[Pt].x,wt=tt[Pt+1].y-tt[Pt].y,Tt.x=wt*1,Tt.y=-Et,Tt.z=wt*0,$t.copy(Tt),Tt.x+=Rt.x,Tt.y+=Rt.y,Tt.z+=Rt.z,Tt.normalize(),vt.push(Tt.x,Tt.y,Tt.z),Rt.copy($t)}for(let Pt=0;Pt<=rt;Pt++){const Ft=st+Pt*bt*at,Nt=Math.sin(Ft),Ot=Math.cos(Ft);for(let Bt=0;Bt<=tt.length-1;Bt++){Mt.x=tt[Bt].x*Nt,Mt.y=tt[Bt].y,Mt.z=tt[Bt].x*Ot,dt.push(Mt.x,Mt.y,Mt.z),Ct.x=Pt/rt,Ct.y=Bt/(tt.length-1),yt.push(Ct.x,Ct.y);const Xt=vt[3*Bt+0]*Nt,Zt=vt[3*Bt+1],rn=vt[3*Bt+0]*Ot;_t.push(Xt,Zt,rn)}}for(let Pt=0;Pt<rt;Pt++)for(let Ft=0;Ft<tt.length-1;Ft++){const Nt=Ft+Pt*tt.length,Ot=Nt,Bt=Nt+tt.length,Xt=Nt+tt.length+1,Zt=Nt+1;lt.push(Ot,Bt,Zt),lt.push(Xt,Zt,Bt)}this.setIndex(lt),this.setAttribute("position",new Float32BufferAttribute(dt,3)),this.setAttribute("uv",new Float32BufferAttribute(yt,2)),this.setAttribute("normal",new Float32BufferAttribute(_t,3))}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new LatheGeometry(tt.points,tt.segments,tt.phiStart,tt.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(tt=1,rt=1,st=4,at=8){const lt=new Path;lt.absarc(0,-rt/2,tt,Math.PI*1.5,0),lt.absarc(0,rt/2,tt,0,Math.PI*.5),super(lt.getPoints(st),at),this.type="CapsuleGeometry",this.parameters={radius:tt,length:rt,capSegments:st,radialSegments:at}}static fromJSON(tt){return new CapsuleGeometry(tt.radius,tt.length,tt.capSegments,tt.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(tt=1,rt=32,st=0,at=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:tt,segments:rt,thetaStart:st,thetaLength:at},rt=Math.max(3,rt);const lt=[],dt=[],yt=[],vt=[],_t=new Vector3,bt=new Vector2;dt.push(0,0,0),yt.push(0,0,1),vt.push(.5,.5);for(let Mt=0,Ct=3;Mt<=rt;Mt++,Ct+=3){const Tt=st+Mt/rt*at;_t.x=tt*Math.cos(Tt),_t.y=tt*Math.sin(Tt),dt.push(_t.x,_t.y,_t.z),yt.push(0,0,1),bt.x=(dt[Ct]/tt+1)/2,bt.y=(dt[Ct+1]/tt+1)/2,vt.push(bt.x,bt.y)}for(let Mt=1;Mt<=rt;Mt++)lt.push(Mt,Mt+1,0);this.setIndex(lt),this.setAttribute("position",new Float32BufferAttribute(dt,3)),this.setAttribute("normal",new Float32BufferAttribute(yt,3)),this.setAttribute("uv",new Float32BufferAttribute(vt,2))}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new CircleGeometry(tt.radius,tt.segments,tt.thetaStart,tt.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(tt=1,rt=1,st=1,at=32,lt=1,dt=!1,yt=0,vt=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:tt,radiusBottom:rt,height:st,radialSegments:at,heightSegments:lt,openEnded:dt,thetaStart:yt,thetaLength:vt};const _t=this;at=Math.floor(at),lt=Math.floor(lt);const bt=[],Mt=[],Ct=[],Tt=[];let $t=0;const Rt=[],Et=st/2;let wt=0;Pt(),dt===!1&&(tt>0&&Ft(!0),rt>0&&Ft(!1)),this.setIndex(bt),this.setAttribute("position",new Float32BufferAttribute(Mt,3)),this.setAttribute("normal",new Float32BufferAttribute(Ct,3)),this.setAttribute("uv",new Float32BufferAttribute(Tt,2));function Pt(){const Nt=new Vector3,Ot=new Vector3;let Bt=0;const Xt=(rt-tt)/st;for(let Zt=0;Zt<=lt;Zt++){const rn=[],Gt=Zt/lt,nn=Gt*(rt-tt)+tt;for(let cn=0;cn<=at;cn++){const an=cn/at,mn=an*vt+yt,En=Math.sin(mn),Cn=Math.cos(mn);Ot.x=nn*En,Ot.y=-Gt*st+Et,Ot.z=nn*Cn,Mt.push(Ot.x,Ot.y,Ot.z),Nt.set(En,Xt,Cn).normalize(),Ct.push(Nt.x,Nt.y,Nt.z),Tt.push(an,1-Gt),rn.push($t++)}Rt.push(rn)}for(let Zt=0;Zt<at;Zt++)for(let rn=0;rn<lt;rn++){const Gt=Rt[rn][Zt],nn=Rt[rn+1][Zt],cn=Rt[rn+1][Zt+1],an=Rt[rn][Zt+1];tt>0&&(bt.push(Gt,nn,an),Bt+=3),rt>0&&(bt.push(nn,cn,an),Bt+=3)}_t.addGroup(wt,Bt,0),wt+=Bt}function Ft(Nt){const Ot=$t,Bt=new Vector2,Xt=new Vector3;let Zt=0;const rn=Nt===!0?tt:rt,Gt=Nt===!0?1:-1;for(let cn=1;cn<=at;cn++)Mt.push(0,Et*Gt,0),Ct.push(0,Gt,0),Tt.push(.5,.5),$t++;const nn=$t;for(let cn=0;cn<=at;cn++){const mn=cn/at*vt+yt,En=Math.cos(mn),Cn=Math.sin(mn);Xt.x=rn*Cn,Xt.y=Et*Gt,Xt.z=rn*En,Mt.push(Xt.x,Xt.y,Xt.z),Ct.push(0,Gt,0),Bt.x=En*.5+.5,Bt.y=Cn*.5*Gt+.5,Tt.push(Bt.x,Bt.y),$t++}for(let cn=0;cn<at;cn++){const an=Ot+cn,mn=nn+cn;Nt===!0?bt.push(mn,mn+1,an):bt.push(mn+1,mn,an),Zt+=3}_t.addGroup(wt,Zt,Nt===!0?1:2),wt+=Zt}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new CylinderGeometry(tt.radiusTop,tt.radiusBottom,tt.height,tt.radialSegments,tt.heightSegments,tt.openEnded,tt.thetaStart,tt.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(tt=1,rt=1,st=32,at=1,lt=!1,dt=0,yt=Math.PI*2){super(0,tt,rt,st,at,lt,dt,yt),this.type="ConeGeometry",this.parameters={radius:tt,height:rt,radialSegments:st,heightSegments:at,openEnded:lt,thetaStart:dt,thetaLength:yt}}static fromJSON(tt){return new ConeGeometry(tt.radius,tt.height,tt.radialSegments,tt.heightSegments,tt.openEnded,tt.thetaStart,tt.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(tt=[],rt=[],st=1,at=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:tt,indices:rt,radius:st,detail:at};const lt=[],dt=[];yt(at),_t(st),bt(),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("normal",new Float32BufferAttribute(lt.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(dt,2)),at===0?this.computeVertexNormals():this.normalizeNormals();function yt(Pt){const Ft=new Vector3,Nt=new Vector3,Ot=new Vector3;for(let Bt=0;Bt<rt.length;Bt+=3)Tt(rt[Bt+0],Ft),Tt(rt[Bt+1],Nt),Tt(rt[Bt+2],Ot),vt(Ft,Nt,Ot,Pt)}function vt(Pt,Ft,Nt,Ot){const Bt=Ot+1,Xt=[];for(let Zt=0;Zt<=Bt;Zt++){Xt[Zt]=[];const rn=Pt.clone().lerp(Nt,Zt/Bt),Gt=Ft.clone().lerp(Nt,Zt/Bt),nn=Bt-Zt;for(let cn=0;cn<=nn;cn++)cn===0&&Zt===Bt?Xt[Zt][cn]=rn:Xt[Zt][cn]=rn.clone().lerp(Gt,cn/nn)}for(let Zt=0;Zt<Bt;Zt++)for(let rn=0;rn<2*(Bt-Zt)-1;rn++){const Gt=Math.floor(rn/2);rn%2===0?(Ct(Xt[Zt][Gt+1]),Ct(Xt[Zt+1][Gt]),Ct(Xt[Zt][Gt])):(Ct(Xt[Zt][Gt+1]),Ct(Xt[Zt+1][Gt+1]),Ct(Xt[Zt+1][Gt]))}}function _t(Pt){const Ft=new Vector3;for(let Nt=0;Nt<lt.length;Nt+=3)Ft.x=lt[Nt+0],Ft.y=lt[Nt+1],Ft.z=lt[Nt+2],Ft.normalize().multiplyScalar(Pt),lt[Nt+0]=Ft.x,lt[Nt+1]=Ft.y,lt[Nt+2]=Ft.z}function bt(){const Pt=new Vector3;for(let Ft=0;Ft<lt.length;Ft+=3){Pt.x=lt[Ft+0],Pt.y=lt[Ft+1],Pt.z=lt[Ft+2];const Nt=Et(Pt)/2/Math.PI+.5,Ot=wt(Pt)/Math.PI+.5;dt.push(Nt,1-Ot)}$t(),Mt()}function Mt(){for(let Pt=0;Pt<dt.length;Pt+=6){const Ft=dt[Pt+0],Nt=dt[Pt+2],Ot=dt[Pt+4],Bt=Math.max(Ft,Nt,Ot),Xt=Math.min(Ft,Nt,Ot);Bt>.9&&Xt<.1&&(Ft<.2&&(dt[Pt+0]+=1),Nt<.2&&(dt[Pt+2]+=1),Ot<.2&&(dt[Pt+4]+=1))}}function Ct(Pt){lt.push(Pt.x,Pt.y,Pt.z)}function Tt(Pt,Ft){const Nt=Pt*3;Ft.x=tt[Nt+0],Ft.y=tt[Nt+1],Ft.z=tt[Nt+2]}function $t(){const Pt=new Vector3,Ft=new Vector3,Nt=new Vector3,Ot=new Vector3,Bt=new Vector2,Xt=new Vector2,Zt=new Vector2;for(let rn=0,Gt=0;rn<lt.length;rn+=9,Gt+=6){Pt.set(lt[rn+0],lt[rn+1],lt[rn+2]),Ft.set(lt[rn+3],lt[rn+4],lt[rn+5]),Nt.set(lt[rn+6],lt[rn+7],lt[rn+8]),Bt.set(dt[Gt+0],dt[Gt+1]),Xt.set(dt[Gt+2],dt[Gt+3]),Zt.set(dt[Gt+4],dt[Gt+5]),Ot.copy(Pt).add(Ft).add(Nt).divideScalar(3);const nn=Et(Ot);Rt(Bt,Gt+0,Pt,nn),Rt(Xt,Gt+2,Ft,nn),Rt(Zt,Gt+4,Nt,nn)}}function Rt(Pt,Ft,Nt,Ot){Ot<0&&Pt.x===1&&(dt[Ft]=Pt.x-1),Nt.x===0&&Nt.z===0&&(dt[Ft]=Ot/2/Math.PI+.5)}function Et(Pt){return Math.atan2(Pt.z,-Pt.x)}function wt(Pt){return Math.atan2(-Pt.y,Math.sqrt(Pt.x*Pt.x+Pt.z*Pt.z))}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new PolyhedronGeometry(tt.vertices,tt.indices,tt.radius,tt.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(tt=1,rt=0){const st=(1+Math.sqrt(5))/2,at=1/st,lt=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-at,-st,0,-at,st,0,at,-st,0,at,st,-at,-st,0,-at,st,0,at,-st,0,at,st,0,-st,0,-at,st,0,-at,-st,0,at,st,0,at],dt=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(lt,dt,tt,rt),this.type="DodecahedronGeometry",this.parameters={radius:tt,detail:rt}}static fromJSON(tt){return new DodecahedronGeometry(tt.radius,tt.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(tt=null,rt=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:tt,thresholdAngle:rt},tt!==null){const at=Math.pow(10,4),lt=Math.cos(DEG2RAD*rt),dt=tt.getIndex(),yt=tt.getAttribute("position"),vt=dt?dt.count:yt.count,_t=[0,0,0],bt=["a","b","c"],Mt=new Array(3),Ct={},Tt=[];for(let $t=0;$t<vt;$t+=3){dt?(_t[0]=dt.getX($t),_t[1]=dt.getX($t+1),_t[2]=dt.getX($t+2)):(_t[0]=$t,_t[1]=$t+1,_t[2]=$t+2);const{a:Rt,b:Et,c:wt}=_triangle;if(Rt.fromBufferAttribute(yt,_t[0]),Et.fromBufferAttribute(yt,_t[1]),wt.fromBufferAttribute(yt,_t[2]),_triangle.getNormal(_normal),Mt[0]=`${Math.round(Rt.x*at)},${Math.round(Rt.y*at)},${Math.round(Rt.z*at)}`,Mt[1]=`${Math.round(Et.x*at)},${Math.round(Et.y*at)},${Math.round(Et.z*at)}`,Mt[2]=`${Math.round(wt.x*at)},${Math.round(wt.y*at)},${Math.round(wt.z*at)}`,!(Mt[0]===Mt[1]||Mt[1]===Mt[2]||Mt[2]===Mt[0]))for(let Pt=0;Pt<3;Pt++){const Ft=(Pt+1)%3,Nt=Mt[Pt],Ot=Mt[Ft],Bt=_triangle[bt[Pt]],Xt=_triangle[bt[Ft]],Zt=`${Nt}_${Ot}`,rn=`${Ot}_${Nt}`;rn in Ct&&Ct[rn]?(_normal.dot(Ct[rn].normal)<=lt&&(Tt.push(Bt.x,Bt.y,Bt.z),Tt.push(Xt.x,Xt.y,Xt.z)),Ct[rn]=null):Zt in Ct||(Ct[Zt]={index0:_t[Pt],index1:_t[Ft],normal:_normal.clone()})}}for(const $t in Ct)if(Ct[$t]){const{index0:Rt,index1:Et}=Ct[$t];_v0.fromBufferAttribute(yt,Rt),_v1$1.fromBufferAttribute(yt,Et),Tt.push(_v0.x,_v0.y,_v0.z),Tt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(Tt,3))}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}}class Shape extends Path{constructor(tt){super(tt),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(tt){const rt=[];for(let st=0,at=this.holes.length;st<at;st++)rt[st]=this.holes[st].getPoints(tt);return rt}extractPoints(tt){return{shape:this.getPoints(tt),holes:this.getPointsHoles(tt)}}copy(tt){super.copy(tt),this.holes=[];for(let rt=0,st=tt.holes.length;rt<st;rt++){const at=tt.holes[rt];this.holes.push(at.clone())}return this}toJSON(){const tt=super.toJSON();tt.uuid=this.uuid,tt.holes=[];for(let rt=0,st=this.holes.length;rt<st;rt++){const at=this.holes[rt];tt.holes.push(at.toJSON())}return tt}fromJSON(tt){super.fromJSON(tt),this.uuid=tt.uuid,this.holes=[];for(let rt=0,st=tt.holes.length;rt<st;rt++){const at=tt.holes[rt];this.holes.push(new Path().fromJSON(at))}return this}}const Earcut={triangulate:function(nt,tt,rt=2){const st=tt&&tt.length,at=st?tt[0]*rt:nt.length;let lt=linkedList(nt,0,at,rt,!0);const dt=[];if(!lt||lt.next===lt.prev)return dt;let yt,vt,_t,bt,Mt,Ct,Tt;if(st&&(lt=eliminateHoles(nt,tt,lt,rt)),nt.length>80*rt){yt=_t=nt[0],vt=bt=nt[1];for(let $t=rt;$t<at;$t+=rt)Mt=nt[$t],Ct=nt[$t+1],Mt<yt&&(yt=Mt),Ct<vt&&(vt=Ct),Mt>_t&&(_t=Mt),Ct>bt&&(bt=Ct);Tt=Math.max(_t-yt,bt-vt),Tt=Tt!==0?32767/Tt:0}return earcutLinked(lt,dt,rt,yt,vt,Tt,0),dt}};function linkedList(nt,tt,rt,st,at){let lt,dt;if(at===signedArea(nt,tt,rt,st)>0)for(lt=tt;lt<rt;lt+=st)dt=insertNode(lt,nt[lt],nt[lt+1],dt);else for(lt=rt-st;lt>=tt;lt-=st)dt=insertNode(lt,nt[lt],nt[lt+1],dt);return dt&&equals(dt,dt.next)&&(removeNode(dt),dt=dt.next),dt}function filterPoints(nt,tt){if(!nt)return nt;tt||(tt=nt);let rt=nt,st;do if(st=!1,!rt.steiner&&(equals(rt,rt.next)||area(rt.prev,rt,rt.next)===0)){if(removeNode(rt),rt=tt=rt.prev,rt===rt.next)break;st=!0}else rt=rt.next;while(st||rt!==tt);return tt}function earcutLinked(nt,tt,rt,st,at,lt,dt){if(!nt)return;!dt&&lt&&indexCurve(nt,st,at,lt);let yt=nt,vt,_t;for(;nt.prev!==nt.next;){if(vt=nt.prev,_t=nt.next,lt?isEarHashed(nt,st,at,lt):isEar(nt)){tt.push(vt.i/rt|0),tt.push(nt.i/rt|0),tt.push(_t.i/rt|0),removeNode(nt),nt=_t.next,yt=_t.next;continue}if(nt=_t,nt===yt){dt?dt===1?(nt=cureLocalIntersections(filterPoints(nt),tt,rt),earcutLinked(nt,tt,rt,st,at,lt,2)):dt===2&&splitEarcut(nt,tt,rt,st,at,lt):earcutLinked(filterPoints(nt),tt,rt,st,at,lt,1);break}}}function isEar(nt){const tt=nt.prev,rt=nt,st=nt.next;if(area(tt,rt,st)>=0)return!1;const at=tt.x,lt=rt.x,dt=st.x,yt=tt.y,vt=rt.y,_t=st.y,bt=at<lt?at<dt?at:dt:lt<dt?lt:dt,Mt=yt<vt?yt<_t?yt:_t:vt<_t?vt:_t,Ct=at>lt?at>dt?at:dt:lt>dt?lt:dt,Tt=yt>vt?yt>_t?yt:_t:vt>_t?vt:_t;let $t=st.next;for(;$t!==tt;){if($t.x>=bt&&$t.x<=Ct&&$t.y>=Mt&&$t.y<=Tt&&pointInTriangle(at,yt,lt,vt,dt,_t,$t.x,$t.y)&&area($t.prev,$t,$t.next)>=0)return!1;$t=$t.next}return!0}function isEarHashed(nt,tt,rt,st){const at=nt.prev,lt=nt,dt=nt.next;if(area(at,lt,dt)>=0)return!1;const yt=at.x,vt=lt.x,_t=dt.x,bt=at.y,Mt=lt.y,Ct=dt.y,Tt=yt<vt?yt<_t?yt:_t:vt<_t?vt:_t,$t=bt<Mt?bt<Ct?bt:Ct:Mt<Ct?Mt:Ct,Rt=yt>vt?yt>_t?yt:_t:vt>_t?vt:_t,Et=bt>Mt?bt>Ct?bt:Ct:Mt>Ct?Mt:Ct,wt=zOrder(Tt,$t,tt,rt,st),Pt=zOrder(Rt,Et,tt,rt,st);let Ft=nt.prevZ,Nt=nt.nextZ;for(;Ft&&Ft.z>=wt&&Nt&&Nt.z<=Pt;){if(Ft.x>=Tt&&Ft.x<=Rt&&Ft.y>=$t&&Ft.y<=Et&&Ft!==at&&Ft!==dt&&pointInTriangle(yt,bt,vt,Mt,_t,Ct,Ft.x,Ft.y)&&area(Ft.prev,Ft,Ft.next)>=0||(Ft=Ft.prevZ,Nt.x>=Tt&&Nt.x<=Rt&&Nt.y>=$t&&Nt.y<=Et&&Nt!==at&&Nt!==dt&&pointInTriangle(yt,bt,vt,Mt,_t,Ct,Nt.x,Nt.y)&&area(Nt.prev,Nt,Nt.next)>=0))return!1;Nt=Nt.nextZ}for(;Ft&&Ft.z>=wt;){if(Ft.x>=Tt&&Ft.x<=Rt&&Ft.y>=$t&&Ft.y<=Et&&Ft!==at&&Ft!==dt&&pointInTriangle(yt,bt,vt,Mt,_t,Ct,Ft.x,Ft.y)&&area(Ft.prev,Ft,Ft.next)>=0)return!1;Ft=Ft.prevZ}for(;Nt&&Nt.z<=Pt;){if(Nt.x>=Tt&&Nt.x<=Rt&&Nt.y>=$t&&Nt.y<=Et&&Nt!==at&&Nt!==dt&&pointInTriangle(yt,bt,vt,Mt,_t,Ct,Nt.x,Nt.y)&&area(Nt.prev,Nt,Nt.next)>=0)return!1;Nt=Nt.nextZ}return!0}function cureLocalIntersections(nt,tt,rt){let st=nt;do{const at=st.prev,lt=st.next.next;!equals(at,lt)&&intersects(at,st,st.next,lt)&&locallyInside(at,lt)&&locallyInside(lt,at)&&(tt.push(at.i/rt|0),tt.push(st.i/rt|0),tt.push(lt.i/rt|0),removeNode(st),removeNode(st.next),st=nt=lt),st=st.next}while(st!==nt);return filterPoints(st)}function splitEarcut(nt,tt,rt,st,at,lt){let dt=nt;do{let yt=dt.next.next;for(;yt!==dt.prev;){if(dt.i!==yt.i&&isValidDiagonal(dt,yt)){let vt=splitPolygon(dt,yt);dt=filterPoints(dt,dt.next),vt=filterPoints(vt,vt.next),earcutLinked(dt,tt,rt,st,at,lt,0),earcutLinked(vt,tt,rt,st,at,lt,0);return}yt=yt.next}dt=dt.next}while(dt!==nt)}function eliminateHoles(nt,tt,rt,st){const at=[];let lt,dt,yt,vt,_t;for(lt=0,dt=tt.length;lt<dt;lt++)yt=tt[lt]*st,vt=lt<dt-1?tt[lt+1]*st:nt.length,_t=linkedList(nt,yt,vt,st,!1),_t===_t.next&&(_t.steiner=!0),at.push(getLeftmost(_t));for(at.sort(compareX),lt=0;lt<at.length;lt++)rt=eliminateHole(at[lt],rt);return rt}function compareX(nt,tt){return nt.x-tt.x}function eliminateHole(nt,tt){const rt=findHoleBridge(nt,tt);if(!rt)return tt;const st=splitPolygon(rt,nt);return filterPoints(st,st.next),filterPoints(rt,rt.next)}function findHoleBridge(nt,tt){let rt=tt,st=-1/0,at;const lt=nt.x,dt=nt.y;do{if(dt<=rt.y&&dt>=rt.next.y&&rt.next.y!==rt.y){const Ct=rt.x+(dt-rt.y)*(rt.next.x-rt.x)/(rt.next.y-rt.y);if(Ct<=lt&&Ct>st&&(st=Ct,at=rt.x<rt.next.x?rt:rt.next,Ct===lt))return at}rt=rt.next}while(rt!==tt);if(!at)return null;const yt=at,vt=at.x,_t=at.y;let bt=1/0,Mt;rt=at;do lt>=rt.x&&rt.x>=vt&&lt!==rt.x&&pointInTriangle(dt<_t?lt:st,dt,vt,_t,dt<_t?st:lt,dt,rt.x,rt.y)&&(Mt=Math.abs(dt-rt.y)/(lt-rt.x),locallyInside(rt,nt)&&(Mt<bt||Mt===bt&&(rt.x>at.x||rt.x===at.x&&sectorContainsSector(at,rt)))&&(at=rt,bt=Mt)),rt=rt.next;while(rt!==yt);return at}function sectorContainsSector(nt,tt){return area(nt.prev,nt,tt.prev)<0&&area(tt.next,nt,nt.next)<0}function indexCurve(nt,tt,rt,st){let at=nt;do at.z===0&&(at.z=zOrder(at.x,at.y,tt,rt,st)),at.prevZ=at.prev,at.nextZ=at.next,at=at.next;while(at!==nt);at.prevZ.nextZ=null,at.prevZ=null,sortLinked(at)}function sortLinked(nt){let tt,rt,st,at,lt,dt,yt,vt,_t=1;do{for(rt=nt,nt=null,lt=null,dt=0;rt;){for(dt++,st=rt,yt=0,tt=0;tt<_t&&(yt++,st=st.nextZ,!!st);tt++);for(vt=_t;yt>0||vt>0&&st;)yt!==0&&(vt===0||!st||rt.z<=st.z)?(at=rt,rt=rt.nextZ,yt--):(at=st,st=st.nextZ,vt--),lt?lt.nextZ=at:nt=at,at.prevZ=lt,lt=at;rt=st}lt.nextZ=null,_t*=2}while(dt>1);return nt}function zOrder(nt,tt,rt,st,at){return nt=(nt-rt)*at|0,tt=(tt-st)*at|0,nt=(nt|nt<<8)&16711935,nt=(nt|nt<<4)&252645135,nt=(nt|nt<<2)&858993459,nt=(nt|nt<<1)&1431655765,tt=(tt|tt<<8)&16711935,tt=(tt|tt<<4)&252645135,tt=(tt|tt<<2)&858993459,tt=(tt|tt<<1)&1431655765,nt|tt<<1}function getLeftmost(nt){let tt=nt,rt=nt;do(tt.x<rt.x||tt.x===rt.x&&tt.y<rt.y)&&(rt=tt),tt=tt.next;while(tt!==nt);return rt}function pointInTriangle(nt,tt,rt,st,at,lt,dt,yt){return(at-dt)*(tt-yt)>=(nt-dt)*(lt-yt)&&(nt-dt)*(st-yt)>=(rt-dt)*(tt-yt)&&(rt-dt)*(lt-yt)>=(at-dt)*(st-yt)}function isValidDiagonal(nt,tt){return nt.next.i!==tt.i&&nt.prev.i!==tt.i&&!intersectsPolygon(nt,tt)&&(locallyInside(nt,tt)&&locallyInside(tt,nt)&&middleInside(nt,tt)&&(area(nt.prev,nt,tt.prev)||area(nt,tt.prev,tt))||equals(nt,tt)&&area(nt.prev,nt,nt.next)>0&&area(tt.prev,tt,tt.next)>0)}function area(nt,tt,rt){return(tt.y-nt.y)*(rt.x-tt.x)-(tt.x-nt.x)*(rt.y-tt.y)}function equals(nt,tt){return nt.x===tt.x&&nt.y===tt.y}function intersects(nt,tt,rt,st){const at=sign(area(nt,tt,rt)),lt=sign(area(nt,tt,st)),dt=sign(area(rt,st,nt)),yt=sign(area(rt,st,tt));return!!(at!==lt&&dt!==yt||at===0&&onSegment(nt,rt,tt)||lt===0&&onSegment(nt,st,tt)||dt===0&&onSegment(rt,nt,st)||yt===0&&onSegment(rt,tt,st))}function onSegment(nt,tt,rt){return tt.x<=Math.max(nt.x,rt.x)&&tt.x>=Math.min(nt.x,rt.x)&&tt.y<=Math.max(nt.y,rt.y)&&tt.y>=Math.min(nt.y,rt.y)}function sign(nt){return nt>0?1:nt<0?-1:0}function intersectsPolygon(nt,tt){let rt=nt;do{if(rt.i!==nt.i&&rt.next.i!==nt.i&&rt.i!==tt.i&&rt.next.i!==tt.i&&intersects(rt,rt.next,nt,tt))return!0;rt=rt.next}while(rt!==nt);return!1}function locallyInside(nt,tt){return area(nt.prev,nt,nt.next)<0?area(nt,tt,nt.next)>=0&&area(nt,nt.prev,tt)>=0:area(nt,tt,nt.prev)<0||area(nt,nt.next,tt)<0}function middleInside(nt,tt){let rt=nt,st=!1;const at=(nt.x+tt.x)/2,lt=(nt.y+tt.y)/2;do rt.y>lt!=rt.next.y>lt&&rt.next.y!==rt.y&&at<(rt.next.x-rt.x)*(lt-rt.y)/(rt.next.y-rt.y)+rt.x&&(st=!st),rt=rt.next;while(rt!==nt);return st}function splitPolygon(nt,tt){const rt=new Node(nt.i,nt.x,nt.y),st=new Node(tt.i,tt.x,tt.y),at=nt.next,lt=tt.prev;return nt.next=tt,tt.prev=nt,rt.next=at,at.prev=rt,st.next=rt,rt.prev=st,lt.next=st,st.prev=lt,st}function insertNode(nt,tt,rt,st){const at=new Node(nt,tt,rt);return st?(at.next=st.next,at.prev=st,st.next.prev=at,st.next=at):(at.prev=at,at.next=at),at}function removeNode(nt){nt.next.prev=nt.prev,nt.prev.next=nt.next,nt.prevZ&&(nt.prevZ.nextZ=nt.nextZ),nt.nextZ&&(nt.nextZ.prevZ=nt.prevZ)}function Node(nt,tt,rt){this.i=nt,this.x=tt,this.y=rt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(nt,tt,rt,st){let at=0;for(let lt=tt,dt=rt-st;lt<rt;lt+=st)at+=(nt[dt]-nt[lt])*(nt[lt+1]+nt[dt+1]),dt=lt;return at}class ShapeUtils{static area(tt){const rt=tt.length;let st=0;for(let at=rt-1,lt=0;lt<rt;at=lt++)st+=tt[at].x*tt[lt].y-tt[lt].x*tt[at].y;return st*.5}static isClockWise(tt){return ShapeUtils.area(tt)<0}static triangulateShape(tt,rt){const st=[],at=[],lt=[];removeDupEndPts(tt),addContour(st,tt);let dt=tt.length;rt.forEach(removeDupEndPts);for(let vt=0;vt<rt.length;vt++)at.push(dt),dt+=rt[vt].length,addContour(st,rt[vt]);const yt=Earcut.triangulate(st,at);for(let vt=0;vt<yt.length;vt+=3)lt.push(yt.slice(vt,vt+3));return lt}}function removeDupEndPts(nt){const tt=nt.length;tt>2&&nt[tt-1].equals(nt[0])&&nt.pop()}function addContour(nt,tt){for(let rt=0;rt<tt.length;rt++)nt.push(tt[rt].x),nt.push(tt[rt].y)}class ExtrudeGeometry extends BufferGeometry{constructor(tt=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),rt={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:tt,options:rt},tt=Array.isArray(tt)?tt:[tt];const st=this,at=[],lt=[];for(let yt=0,vt=tt.length;yt<vt;yt++){const _t=tt[yt];dt(_t)}this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("uv",new Float32BufferAttribute(lt,2)),this.computeVertexNormals();function dt(yt){const vt=[],_t=rt.curveSegments!==void 0?rt.curveSegments:12,bt=rt.steps!==void 0?rt.steps:1,Mt=rt.depth!==void 0?rt.depth:1;let Ct=rt.bevelEnabled!==void 0?rt.bevelEnabled:!0,Tt=rt.bevelThickness!==void 0?rt.bevelThickness:.2,$t=rt.bevelSize!==void 0?rt.bevelSize:Tt-.1,Rt=rt.bevelOffset!==void 0?rt.bevelOffset:0,Et=rt.bevelSegments!==void 0?rt.bevelSegments:3;const wt=rt.extrudePath,Pt=rt.UVGenerator!==void 0?rt.UVGenerator:WorldUVGenerator;let Ft,Nt=!1,Ot,Bt,Xt,Zt;wt&&(Ft=wt.getSpacedPoints(bt),Nt=!0,Ct=!1,Ot=wt.computeFrenetFrames(bt,!1),Bt=new Vector3,Xt=new Vector3,Zt=new Vector3),Ct||(Et=0,Tt=0,$t=0,Rt=0);const rn=yt.extractPoints(_t);let Gt=rn.shape;const nn=rn.holes;if(!ShapeUtils.isClockWise(Gt)){Gt=Gt.reverse();for(let Mr=0,Jn=nn.length;Mr<Jn;Mr++){const hr=nn[Mr];ShapeUtils.isClockWise(hr)&&(nn[Mr]=hr.reverse())}}const an=ShapeUtils.triangulateShape(Gt,nn),mn=Gt;for(let Mr=0,Jn=nn.length;Mr<Jn;Mr++){const hr=nn[Mr];Gt=Gt.concat(hr)}function En(Mr,Jn,hr){return Jn||console.error("THREE.ExtrudeGeometry: vec does not exist"),Mr.clone().addScaledVector(Jn,hr)}const Cn=Gt.length,Mn=an.length;function un(Mr,Jn,hr){let wr,Nr,Fr;const Yr=Mr.x-Jn.x,cs=Mr.y-Jn.y,cr=hr.x-Mr.x,Qn=hr.y-Mr.y,_r=Yr*Yr+cs*cs,Ir=Yr*Qn-cs*cr;if(Math.abs(Ir)>Number.EPSILON){const pr=Math.sqrt(_r),Tr=Math.sqrt(cr*cr+Qn*Qn),Wr=Jn.x-cs/pr,Kn=Jn.y+Yr/pr,rr=hr.x-Qn/Tr,ur=hr.y+cr/Tr,Sr=((rr-Wr)*Qn-(ur-Kn)*cr)/(Yr*Qn-cs*cr);wr=Wr+Yr*Sr-Mr.x,Nr=Kn+cs*Sr-Mr.y;const gr=wr*wr+Nr*Nr;if(gr<=2)return new Vector2(wr,Nr);Fr=Math.sqrt(gr/2)}else{let pr=!1;Yr>Number.EPSILON?cr>Number.EPSILON&&(pr=!0):Yr<-Number.EPSILON?cr<-Number.EPSILON&&(pr=!0):Math.sign(cs)===Math.sign(Qn)&&(pr=!0),pr?(wr=-cs,Nr=Yr,Fr=Math.sqrt(_r)):(wr=Yr,Nr=cs,Fr=Math.sqrt(_r/2))}return new Vector2(wr/Fr,Nr/Fr)}const Tn=[];for(let Mr=0,Jn=mn.length,hr=Jn-1,wr=Mr+1;Mr<Jn;Mr++,hr++,wr++)hr===Jn&&(hr=0),wr===Jn&&(wr=0),Tn[Mr]=un(mn[Mr],mn[hr],mn[wr]);const Pn=[];let dn,Un=Tn.concat();for(let Mr=0,Jn=nn.length;Mr<Jn;Mr++){const hr=nn[Mr];dn=[];for(let wr=0,Nr=hr.length,Fr=Nr-1,Yr=wr+1;wr<Nr;wr++,Fr++,Yr++)Fr===Nr&&(Fr=0),Yr===Nr&&(Yr=0),dn[wr]=un(hr[wr],hr[Fr],hr[Yr]);Pn.push(dn),Un=Un.concat(dn)}for(let Mr=0;Mr<Et;Mr++){const Jn=Mr/Et,hr=Tt*Math.cos(Jn*Math.PI/2),wr=$t*Math.sin(Jn*Math.PI/2)+Rt;for(let Nr=0,Fr=mn.length;Nr<Fr;Nr++){const Yr=En(mn[Nr],Tn[Nr],wr);fr(Yr.x,Yr.y,-hr)}for(let Nr=0,Fr=nn.length;Nr<Fr;Nr++){const Yr=nn[Nr];dn=Pn[Nr];for(let cs=0,cr=Yr.length;cs<cr;cs++){const Qn=En(Yr[cs],dn[cs],wr);fr(Qn.x,Qn.y,-hr)}}}const qn=$t+Rt;for(let Mr=0;Mr<Cn;Mr++){const Jn=Ct?En(Gt[Mr],Un[Mr],qn):Gt[Mr];Nt?(Xt.copy(Ot.normals[0]).multiplyScalar(Jn.x),Bt.copy(Ot.binormals[0]).multiplyScalar(Jn.y),Zt.copy(Ft[0]).add(Xt).add(Bt),fr(Zt.x,Zt.y,Zt.z)):fr(Jn.x,Jn.y,0)}for(let Mr=1;Mr<=bt;Mr++)for(let Jn=0;Jn<Cn;Jn++){const hr=Ct?En(Gt[Jn],Un[Jn],qn):Gt[Jn];Nt?(Xt.copy(Ot.normals[Mr]).multiplyScalar(hr.x),Bt.copy(Ot.binormals[Mr]).multiplyScalar(hr.y),Zt.copy(Ft[Mr]).add(Xt).add(Bt),fr(Zt.x,Zt.y,Zt.z)):fr(hr.x,hr.y,Mt/bt*Mr)}for(let Mr=Et-1;Mr>=0;Mr--){const Jn=Mr/Et,hr=Tt*Math.cos(Jn*Math.PI/2),wr=$t*Math.sin(Jn*Math.PI/2)+Rt;for(let Nr=0,Fr=mn.length;Nr<Fr;Nr++){const Yr=En(mn[Nr],Tn[Nr],wr);fr(Yr.x,Yr.y,Mt+hr)}for(let Nr=0,Fr=nn.length;Nr<Fr;Nr++){const Yr=nn[Nr];dn=Pn[Nr];for(let cs=0,cr=Yr.length;cs<cr;cs++){const Qn=En(Yr[cs],dn[cs],wr);Nt?fr(Qn.x,Qn.y+Ft[bt-1].y,Ft[bt-1].x+hr):fr(Qn.x,Qn.y,Mt+hr)}}}In(),Wn();function In(){const Mr=at.length/3;if(Ct){let Jn=0,hr=Cn*Jn;for(let wr=0;wr<Mn;wr++){const Nr=an[wr];mr(Nr[2]+hr,Nr[1]+hr,Nr[0]+hr)}Jn=bt+Et*2,hr=Cn*Jn;for(let wr=0;wr<Mn;wr++){const Nr=an[wr];mr(Nr[0]+hr,Nr[1]+hr,Nr[2]+hr)}}else{for(let Jn=0;Jn<Mn;Jn++){const hr=an[Jn];mr(hr[2],hr[1],hr[0])}for(let Jn=0;Jn<Mn;Jn++){const hr=an[Jn];mr(hr[0]+Cn*bt,hr[1]+Cn*bt,hr[2]+Cn*bt)}}st.addGroup(Mr,at.length/3-Mr,0)}function Wn(){const Mr=at.length/3;let Jn=0;ar(mn,Jn),Jn+=mn.length;for(let hr=0,wr=nn.length;hr<wr;hr++){const Nr=nn[hr];ar(Nr,Jn),Jn+=Nr.length}st.addGroup(Mr,at.length/3-Mr,1)}function ar(Mr,Jn){let hr=Mr.length;for(;--hr>=0;){const wr=hr;let Nr=hr-1;Nr<0&&(Nr=Mr.length-1);for(let Fr=0,Yr=bt+Et*2;Fr<Yr;Fr++){const cs=Cn*Fr,cr=Cn*(Fr+1),Qn=Jn+wr+cs,_r=Jn+Nr+cs,Ir=Jn+Nr+cr,pr=Jn+wr+cr;vr(Qn,_r,Ir,pr)}}}function fr(Mr,Jn,hr){vt.push(Mr),vt.push(Jn),vt.push(hr)}function mr(Mr,Jn,hr){Ar(Mr),Ar(Jn),Ar(hr);const wr=at.length/3,Nr=Pt.generateTopUV(st,at,wr-3,wr-2,wr-1);$r(Nr[0]),$r(Nr[1]),$r(Nr[2])}function vr(Mr,Jn,hr,wr){Ar(Mr),Ar(Jn),Ar(wr),Ar(Jn),Ar(hr),Ar(wr);const Nr=at.length/3,Fr=Pt.generateSideWallUV(st,at,Nr-6,Nr-3,Nr-2,Nr-1);$r(Fr[0]),$r(Fr[1]),$r(Fr[3]),$r(Fr[1]),$r(Fr[2]),$r(Fr[3])}function Ar(Mr){at.push(vt[Mr*3+0]),at.push(vt[Mr*3+1]),at.push(vt[Mr*3+2])}function $r(Mr){lt.push(Mr.x),lt.push(Mr.y)}}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}toJSON(){const tt=super.toJSON(),rt=this.parameters.shapes,st=this.parameters.options;return toJSON$1(rt,st,tt)}static fromJSON(tt,rt){const st=[];for(let lt=0,dt=tt.shapes.length;lt<dt;lt++){const yt=rt[tt.shapes[lt]];st.push(yt)}const at=tt.options.extrudePath;return at!==void 0&&(tt.options.extrudePath=new Curves[at.type]().fromJSON(at)),new ExtrudeGeometry(st,tt.options)}}const WorldUVGenerator={generateTopUV:function(nt,tt,rt,st,at){const lt=tt[rt*3],dt=tt[rt*3+1],yt=tt[st*3],vt=tt[st*3+1],_t=tt[at*3],bt=tt[at*3+1];return[new Vector2(lt,dt),new Vector2(yt,vt),new Vector2(_t,bt)]},generateSideWallUV:function(nt,tt,rt,st,at,lt){const dt=tt[rt*3],yt=tt[rt*3+1],vt=tt[rt*3+2],_t=tt[st*3],bt=tt[st*3+1],Mt=tt[st*3+2],Ct=tt[at*3],Tt=tt[at*3+1],$t=tt[at*3+2],Rt=tt[lt*3],Et=tt[lt*3+1],wt=tt[lt*3+2];return Math.abs(yt-bt)<Math.abs(dt-_t)?[new Vector2(dt,1-vt),new Vector2(_t,1-Mt),new Vector2(Ct,1-$t),new Vector2(Rt,1-wt)]:[new Vector2(yt,1-vt),new Vector2(bt,1-Mt),new Vector2(Tt,1-$t),new Vector2(Et,1-wt)]}};function toJSON$1(nt,tt,rt){if(rt.shapes=[],Array.isArray(nt))for(let st=0,at=nt.length;st<at;st++){const lt=nt[st];rt.shapes.push(lt.uuid)}else rt.shapes.push(nt.uuid);return rt.options=Object.assign({},tt),tt.extrudePath!==void 0&&(rt.options.extrudePath=tt.extrudePath.toJSON()),rt}class IcosahedronGeometry extends PolyhedronGeometry{constructor(tt=1,rt=0){const st=(1+Math.sqrt(5))/2,at=[-1,st,0,1,st,0,-1,-st,0,1,-st,0,0,-1,st,0,1,st,0,-1,-st,0,1,-st,st,0,-1,st,0,1,-st,0,-1,-st,0,1],lt=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(at,lt,tt,rt),this.type="IcosahedronGeometry",this.parameters={radius:tt,detail:rt}}static fromJSON(tt){return new IcosahedronGeometry(tt.radius,tt.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(tt=1,rt=0){const st=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],at=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(st,at,tt,rt),this.type="OctahedronGeometry",this.parameters={radius:tt,detail:rt}}static fromJSON(tt){return new OctahedronGeometry(tt.radius,tt.detail)}}class RingGeometry extends BufferGeometry{constructor(tt=.5,rt=1,st=32,at=1,lt=0,dt=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:tt,outerRadius:rt,thetaSegments:st,phiSegments:at,thetaStart:lt,thetaLength:dt},st=Math.max(3,st),at=Math.max(1,at);const yt=[],vt=[],_t=[],bt=[];let Mt=tt;const Ct=(rt-tt)/at,Tt=new Vector3,$t=new Vector2;for(let Rt=0;Rt<=at;Rt++){for(let Et=0;Et<=st;Et++){const wt=lt+Et/st*dt;Tt.x=Mt*Math.cos(wt),Tt.y=Mt*Math.sin(wt),vt.push(Tt.x,Tt.y,Tt.z),_t.push(0,0,1),$t.x=(Tt.x/rt+1)/2,$t.y=(Tt.y/rt+1)/2,bt.push($t.x,$t.y)}Mt+=Ct}for(let Rt=0;Rt<at;Rt++){const Et=Rt*(st+1);for(let wt=0;wt<st;wt++){const Pt=wt+Et,Ft=Pt,Nt=Pt+st+1,Ot=Pt+st+2,Bt=Pt+1;yt.push(Ft,Nt,Bt),yt.push(Nt,Ot,Bt)}}this.setIndex(yt),this.setAttribute("position",new Float32BufferAttribute(vt,3)),this.setAttribute("normal",new Float32BufferAttribute(_t,3)),this.setAttribute("uv",new Float32BufferAttribute(bt,2))}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new RingGeometry(tt.innerRadius,tt.outerRadius,tt.thetaSegments,tt.phiSegments,tt.thetaStart,tt.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(tt=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),rt=12){super(),this.type="ShapeGeometry",this.parameters={shapes:tt,curveSegments:rt};const st=[],at=[],lt=[],dt=[];let yt=0,vt=0;if(Array.isArray(tt)===!1)_t(tt);else for(let bt=0;bt<tt.length;bt++)_t(tt[bt]),this.addGroup(yt,vt,bt),yt+=vt,vt=0;this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(dt,2));function _t(bt){const Mt=at.length/3,Ct=bt.extractPoints(rt);let Tt=Ct.shape;const $t=Ct.holes;ShapeUtils.isClockWise(Tt)===!1&&(Tt=Tt.reverse());for(let Et=0,wt=$t.length;Et<wt;Et++){const Pt=$t[Et];ShapeUtils.isClockWise(Pt)===!0&&($t[Et]=Pt.reverse())}const Rt=ShapeUtils.triangulateShape(Tt,$t);for(let Et=0,wt=$t.length;Et<wt;Et++){const Pt=$t[Et];Tt=Tt.concat(Pt)}for(let Et=0,wt=Tt.length;Et<wt;Et++){const Pt=Tt[Et];at.push(Pt.x,Pt.y,0),lt.push(0,0,1),dt.push(Pt.x,Pt.y)}for(let Et=0,wt=Rt.length;Et<wt;Et++){const Pt=Rt[Et],Ft=Pt[0]+Mt,Nt=Pt[1]+Mt,Ot=Pt[2]+Mt;st.push(Ft,Nt,Ot),vt+=3}}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}toJSON(){const tt=super.toJSON(),rt=this.parameters.shapes;return toJSON(rt,tt)}static fromJSON(tt,rt){const st=[];for(let at=0,lt=tt.shapes.length;at<lt;at++){const dt=rt[tt.shapes[at]];st.push(dt)}return new ShapeGeometry(st,tt.curveSegments)}}function toJSON(nt,tt){if(tt.shapes=[],Array.isArray(nt))for(let rt=0,st=nt.length;rt<st;rt++){const at=nt[rt];tt.shapes.push(at.uuid)}else tt.shapes.push(nt.uuid);return tt}class SphereGeometry extends BufferGeometry{constructor(tt=1,rt=32,st=16,at=0,lt=Math.PI*2,dt=0,yt=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:tt,widthSegments:rt,heightSegments:st,phiStart:at,phiLength:lt,thetaStart:dt,thetaLength:yt},rt=Math.max(3,Math.floor(rt)),st=Math.max(2,Math.floor(st));const vt=Math.min(dt+yt,Math.PI);let _t=0;const bt=[],Mt=new Vector3,Ct=new Vector3,Tt=[],$t=[],Rt=[],Et=[];for(let wt=0;wt<=st;wt++){const Pt=[],Ft=wt/st;let Nt=0;wt===0&&dt===0?Nt=.5/rt:wt===st&&vt===Math.PI&&(Nt=-.5/rt);for(let Ot=0;Ot<=rt;Ot++){const Bt=Ot/rt;Mt.x=-tt*Math.cos(at+Bt*lt)*Math.sin(dt+Ft*yt),Mt.y=tt*Math.cos(dt+Ft*yt),Mt.z=tt*Math.sin(at+Bt*lt)*Math.sin(dt+Ft*yt),$t.push(Mt.x,Mt.y,Mt.z),Ct.copy(Mt).normalize(),Rt.push(Ct.x,Ct.y,Ct.z),Et.push(Bt+Nt,1-Ft),Pt.push(_t++)}bt.push(Pt)}for(let wt=0;wt<st;wt++)for(let Pt=0;Pt<rt;Pt++){const Ft=bt[wt][Pt+1],Nt=bt[wt][Pt],Ot=bt[wt+1][Pt],Bt=bt[wt+1][Pt+1];(wt!==0||dt>0)&&Tt.push(Ft,Nt,Bt),(wt!==st-1||vt<Math.PI)&&Tt.push(Nt,Ot,Bt)}this.setIndex(Tt),this.setAttribute("position",new Float32BufferAttribute($t,3)),this.setAttribute("normal",new Float32BufferAttribute(Rt,3)),this.setAttribute("uv",new Float32BufferAttribute(Et,2))}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new SphereGeometry(tt.radius,tt.widthSegments,tt.heightSegments,tt.phiStart,tt.phiLength,tt.thetaStart,tt.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(tt=1,rt=0){const st=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],at=[2,1,0,0,3,2,1,3,0,2,3,1];super(st,at,tt,rt),this.type="TetrahedronGeometry",this.parameters={radius:tt,detail:rt}}static fromJSON(tt){return new TetrahedronGeometry(tt.radius,tt.detail)}}class TorusGeometry extends BufferGeometry{constructor(tt=1,rt=.4,st=12,at=48,lt=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:tt,tube:rt,radialSegments:st,tubularSegments:at,arc:lt},st=Math.floor(st),at=Math.floor(at);const dt=[],yt=[],vt=[],_t=[],bt=new Vector3,Mt=new Vector3,Ct=new Vector3;for(let Tt=0;Tt<=st;Tt++)for(let $t=0;$t<=at;$t++){const Rt=$t/at*lt,Et=Tt/st*Math.PI*2;Mt.x=(tt+rt*Math.cos(Et))*Math.cos(Rt),Mt.y=(tt+rt*Math.cos(Et))*Math.sin(Rt),Mt.z=rt*Math.sin(Et),yt.push(Mt.x,Mt.y,Mt.z),bt.x=tt*Math.cos(Rt),bt.y=tt*Math.sin(Rt),Ct.subVectors(Mt,bt).normalize(),vt.push(Ct.x,Ct.y,Ct.z),_t.push($t/at),_t.push(Tt/st)}for(let Tt=1;Tt<=st;Tt++)for(let $t=1;$t<=at;$t++){const Rt=(at+1)*Tt+$t-1,Et=(at+1)*(Tt-1)+$t-1,wt=(at+1)*(Tt-1)+$t,Pt=(at+1)*Tt+$t;dt.push(Rt,Et,Pt),dt.push(Et,wt,Pt)}this.setIndex(dt),this.setAttribute("position",new Float32BufferAttribute(yt,3)),this.setAttribute("normal",new Float32BufferAttribute(vt,3)),this.setAttribute("uv",new Float32BufferAttribute(_t,2))}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new TorusGeometry(tt.radius,tt.tube,tt.radialSegments,tt.tubularSegments,tt.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(tt=1,rt=.4,st=64,at=8,lt=2,dt=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:tt,tube:rt,tubularSegments:st,radialSegments:at,p:lt,q:dt},st=Math.floor(st),at=Math.floor(at);const yt=[],vt=[],_t=[],bt=[],Mt=new Vector3,Ct=new Vector3,Tt=new Vector3,$t=new Vector3,Rt=new Vector3,Et=new Vector3,wt=new Vector3;for(let Ft=0;Ft<=st;++Ft){const Nt=Ft/st*lt*Math.PI*2;Pt(Nt,lt,dt,tt,Tt),Pt(Nt+.01,lt,dt,tt,$t),Et.subVectors($t,Tt),wt.addVectors($t,Tt),Rt.crossVectors(Et,wt),wt.crossVectors(Rt,Et),Rt.normalize(),wt.normalize();for(let Ot=0;Ot<=at;++Ot){const Bt=Ot/at*Math.PI*2,Xt=-rt*Math.cos(Bt),Zt=rt*Math.sin(Bt);Mt.x=Tt.x+(Xt*wt.x+Zt*Rt.x),Mt.y=Tt.y+(Xt*wt.y+Zt*Rt.y),Mt.z=Tt.z+(Xt*wt.z+Zt*Rt.z),vt.push(Mt.x,Mt.y,Mt.z),Ct.subVectors(Mt,Tt).normalize(),_t.push(Ct.x,Ct.y,Ct.z),bt.push(Ft/st),bt.push(Ot/at)}}for(let Ft=1;Ft<=st;Ft++)for(let Nt=1;Nt<=at;Nt++){const Ot=(at+1)*(Ft-1)+(Nt-1),Bt=(at+1)*Ft+(Nt-1),Xt=(at+1)*Ft+Nt,Zt=(at+1)*(Ft-1)+Nt;yt.push(Ot,Bt,Zt),yt.push(Bt,Xt,Zt)}this.setIndex(yt),this.setAttribute("position",new Float32BufferAttribute(vt,3)),this.setAttribute("normal",new Float32BufferAttribute(_t,3)),this.setAttribute("uv",new Float32BufferAttribute(bt,2));function Pt(Ft,Nt,Ot,Bt,Xt){const Zt=Math.cos(Ft),rn=Math.sin(Ft),Gt=Ot/Nt*Ft,nn=Math.cos(Gt);Xt.x=Bt*(2+nn)*.5*Zt,Xt.y=Bt*(2+nn)*rn*.5,Xt.z=Bt*Math.sin(Gt)*.5}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}static fromJSON(tt){return new TorusKnotGeometry(tt.radius,tt.tube,tt.tubularSegments,tt.radialSegments,tt.p,tt.q)}}class TubeGeometry extends BufferGeometry{constructor(tt=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),rt=64,st=1,at=8,lt=!1){super(),this.type="TubeGeometry",this.parameters={path:tt,tubularSegments:rt,radius:st,radialSegments:at,closed:lt};const dt=tt.computeFrenetFrames(rt,lt);this.tangents=dt.tangents,this.normals=dt.normals,this.binormals=dt.binormals;const yt=new Vector3,vt=new Vector3,_t=new Vector2;let bt=new Vector3;const Mt=[],Ct=[],Tt=[],$t=[];Rt(),this.setIndex($t),this.setAttribute("position",new Float32BufferAttribute(Mt,3)),this.setAttribute("normal",new Float32BufferAttribute(Ct,3)),this.setAttribute("uv",new Float32BufferAttribute(Tt,2));function Rt(){for(let Ft=0;Ft<rt;Ft++)Et(Ft);Et(lt===!1?rt:0),Pt(),wt()}function Et(Ft){bt=tt.getPointAt(Ft/rt,bt);const Nt=dt.normals[Ft],Ot=dt.binormals[Ft];for(let Bt=0;Bt<=at;Bt++){const Xt=Bt/at*Math.PI*2,Zt=Math.sin(Xt),rn=-Math.cos(Xt);vt.x=rn*Nt.x+Zt*Ot.x,vt.y=rn*Nt.y+Zt*Ot.y,vt.z=rn*Nt.z+Zt*Ot.z,vt.normalize(),Ct.push(vt.x,vt.y,vt.z),yt.x=bt.x+st*vt.x,yt.y=bt.y+st*vt.y,yt.z=bt.z+st*vt.z,Mt.push(yt.x,yt.y,yt.z)}}function wt(){for(let Ft=1;Ft<=rt;Ft++)for(let Nt=1;Nt<=at;Nt++){const Ot=(at+1)*(Ft-1)+(Nt-1),Bt=(at+1)*Ft+(Nt-1),Xt=(at+1)*Ft+Nt,Zt=(at+1)*(Ft-1)+Nt;$t.push(Ot,Bt,Zt),$t.push(Bt,Xt,Zt)}}function Pt(){for(let Ft=0;Ft<=rt;Ft++)for(let Nt=0;Nt<=at;Nt++)_t.x=Ft/rt,_t.y=Nt/at,Tt.push(_t.x,_t.y)}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}toJSON(){const tt=super.toJSON();return tt.path=this.parameters.path.toJSON(),tt}static fromJSON(tt){return new TubeGeometry(new Curves[tt.path.type]().fromJSON(tt.path),tt.tubularSegments,tt.radius,tt.radialSegments,tt.closed)}}class WireframeGeometry extends BufferGeometry{constructor(tt=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:tt},tt!==null){const rt=[],st=new Set,at=new Vector3,lt=new Vector3;if(tt.index!==null){const dt=tt.attributes.position,yt=tt.index;let vt=tt.groups;vt.length===0&&(vt=[{start:0,count:yt.count,materialIndex:0}]);for(let _t=0,bt=vt.length;_t<bt;++_t){const Mt=vt[_t],Ct=Mt.start,Tt=Mt.count;for(let $t=Ct,Rt=Ct+Tt;$t<Rt;$t+=3)for(let Et=0;Et<3;Et++){const wt=yt.getX($t+Et),Pt=yt.getX($t+(Et+1)%3);at.fromBufferAttribute(dt,wt),lt.fromBufferAttribute(dt,Pt),isUniqueEdge(at,lt,st)===!0&&(rt.push(at.x,at.y,at.z),rt.push(lt.x,lt.y,lt.z))}}}else{const dt=tt.attributes.position;for(let yt=0,vt=dt.count/3;yt<vt;yt++)for(let _t=0;_t<3;_t++){const bt=3*yt+_t,Mt=3*yt+(_t+1)%3;at.fromBufferAttribute(dt,bt),lt.fromBufferAttribute(dt,Mt),isUniqueEdge(at,lt,st)===!0&&(rt.push(at.x,at.y,at.z),rt.push(lt.x,lt.y,lt.z))}}this.setAttribute("position",new Float32BufferAttribute(rt,3))}}copy(tt){return super.copy(tt),this.parameters=Object.assign({},tt.parameters),this}}function isUniqueEdge(nt,tt,rt){const st=`${nt.x},${nt.y},${nt.z}-${tt.x},${tt.y},${tt.z}`,at=`${tt.x},${tt.y},${tt.z}-${nt.x},${nt.y},${nt.z}`;return rt.has(st)===!0||rt.has(at)===!0?!1:(rt.add(st),rt.add(at),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(tt){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color$1(0),this.transparent=!0,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.fog=tt.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(tt){super(tt),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(tt){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color$1(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.defines={STANDARD:""},this.color.copy(tt.color),this.roughness=tt.roughness,this.metalness=tt.metalness,this.map=tt.map,this.lightMap=tt.lightMap,this.lightMapIntensity=tt.lightMapIntensity,this.aoMap=tt.aoMap,this.aoMapIntensity=tt.aoMapIntensity,this.emissive.copy(tt.emissive),this.emissiveMap=tt.emissiveMap,this.emissiveIntensity=tt.emissiveIntensity,this.bumpMap=tt.bumpMap,this.bumpScale=tt.bumpScale,this.normalMap=tt.normalMap,this.normalMapType=tt.normalMapType,this.normalScale.copy(tt.normalScale),this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.roughnessMap=tt.roughnessMap,this.metalnessMap=tt.metalnessMap,this.alphaMap=tt.alphaMap,this.envMap=tt.envMap,this.envMapRotation.copy(tt.envMapRotation),this.envMapIntensity=tt.envMapIntensity,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.wireframeLinecap=tt.wireframeLinecap,this.wireframeLinejoin=tt.wireframeLinejoin,this.flatShading=tt.flatShading,this.fog=tt.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(tt){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(rt){this.ior=(1+.4*rt)/(1-.4*rt)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color$1(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color$1(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color$1(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(tt)}get anisotropy(){return this._anisotropy}set anisotropy(tt){this._anisotropy>0!=tt>0&&this.version++,this._anisotropy=tt}get clearcoat(){return this._clearcoat}set clearcoat(tt){this._clearcoat>0!=tt>0&&this.version++,this._clearcoat=tt}get iridescence(){return this._iridescence}set iridescence(tt){this._iridescence>0!=tt>0&&this.version++,this._iridescence=tt}get dispersion(){return this._dispersion}set dispersion(tt){this._dispersion>0!=tt>0&&this.version++,this._dispersion=tt}get sheen(){return this._sheen}set sheen(tt){this._sheen>0!=tt>0&&this.version++,this._sheen=tt}get transmission(){return this._transmission}set transmission(tt){this._transmission>0!=tt>0&&this.version++,this._transmission=tt}copy(tt){return super.copy(tt),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=tt.anisotropy,this.anisotropyRotation=tt.anisotropyRotation,this.anisotropyMap=tt.anisotropyMap,this.clearcoat=tt.clearcoat,this.clearcoatMap=tt.clearcoatMap,this.clearcoatRoughness=tt.clearcoatRoughness,this.clearcoatRoughnessMap=tt.clearcoatRoughnessMap,this.clearcoatNormalMap=tt.clearcoatNormalMap,this.clearcoatNormalScale.copy(tt.clearcoatNormalScale),this.dispersion=tt.dispersion,this.ior=tt.ior,this.iridescence=tt.iridescence,this.iridescenceMap=tt.iridescenceMap,this.iridescenceIOR=tt.iridescenceIOR,this.iridescenceThicknessRange=[...tt.iridescenceThicknessRange],this.iridescenceThicknessMap=tt.iridescenceThicknessMap,this.sheen=tt.sheen,this.sheenColor.copy(tt.sheenColor),this.sheenColorMap=tt.sheenColorMap,this.sheenRoughness=tt.sheenRoughness,this.sheenRoughnessMap=tt.sheenRoughnessMap,this.transmission=tt.transmission,this.transmissionMap=tt.transmissionMap,this.thickness=tt.thickness,this.thicknessMap=tt.thicknessMap,this.attenuationDistance=tt.attenuationDistance,this.attenuationColor.copy(tt.attenuationColor),this.specularIntensity=tt.specularIntensity,this.specularIntensityMap=tt.specularIntensityMap,this.specularColor.copy(tt.specularColor),this.specularColorMap=tt.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(tt){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color$1(16777215),this.specular=new Color$1(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.specular.copy(tt.specular),this.shininess=tt.shininess,this.map=tt.map,this.lightMap=tt.lightMap,this.lightMapIntensity=tt.lightMapIntensity,this.aoMap=tt.aoMap,this.aoMapIntensity=tt.aoMapIntensity,this.emissive.copy(tt.emissive),this.emissiveMap=tt.emissiveMap,this.emissiveIntensity=tt.emissiveIntensity,this.bumpMap=tt.bumpMap,this.bumpScale=tt.bumpScale,this.normalMap=tt.normalMap,this.normalMapType=tt.normalMapType,this.normalScale.copy(tt.normalScale),this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.specularMap=tt.specularMap,this.alphaMap=tt.alphaMap,this.envMap=tt.envMap,this.envMapRotation.copy(tt.envMapRotation),this.combine=tt.combine,this.reflectivity=tt.reflectivity,this.refractionRatio=tt.refractionRatio,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.wireframeLinecap=tt.wireframeLinecap,this.wireframeLinejoin=tt.wireframeLinejoin,this.flatShading=tt.flatShading,this.fog=tt.fog,this}}class MeshToonMaterial extends Material{constructor(tt){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color$1(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.map=tt.map,this.gradientMap=tt.gradientMap,this.lightMap=tt.lightMap,this.lightMapIntensity=tt.lightMapIntensity,this.aoMap=tt.aoMap,this.aoMapIntensity=tt.aoMapIntensity,this.emissive.copy(tt.emissive),this.emissiveMap=tt.emissiveMap,this.emissiveIntensity=tt.emissiveIntensity,this.bumpMap=tt.bumpMap,this.bumpScale=tt.bumpScale,this.normalMap=tt.normalMap,this.normalMapType=tt.normalMapType,this.normalScale.copy(tt.normalScale),this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.alphaMap=tt.alphaMap,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.wireframeLinecap=tt.wireframeLinecap,this.wireframeLinejoin=tt.wireframeLinejoin,this.fog=tt.fog,this}}class MeshNormalMaterial extends Material{constructor(tt){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(tt)}copy(tt){return super.copy(tt),this.bumpMap=tt.bumpMap,this.bumpScale=tt.bumpScale,this.normalMap=tt.normalMap,this.normalMapType=tt.normalMapType,this.normalScale.copy(tt.normalScale),this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.flatShading=tt.flatShading,this}}class MeshLambertMaterial extends Material{constructor(tt){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.color.copy(tt.color),this.map=tt.map,this.lightMap=tt.lightMap,this.lightMapIntensity=tt.lightMapIntensity,this.aoMap=tt.aoMap,this.aoMapIntensity=tt.aoMapIntensity,this.emissive.copy(tt.emissive),this.emissiveMap=tt.emissiveMap,this.emissiveIntensity=tt.emissiveIntensity,this.bumpMap=tt.bumpMap,this.bumpScale=tt.bumpScale,this.normalMap=tt.normalMap,this.normalMapType=tt.normalMapType,this.normalScale.copy(tt.normalScale),this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.specularMap=tt.specularMap,this.alphaMap=tt.alphaMap,this.envMap=tt.envMap,this.envMapRotation.copy(tt.envMapRotation),this.combine=tt.combine,this.reflectivity=tt.reflectivity,this.refractionRatio=tt.refractionRatio,this.wireframe=tt.wireframe,this.wireframeLinewidth=tt.wireframeLinewidth,this.wireframeLinecap=tt.wireframeLinecap,this.wireframeLinejoin=tt.wireframeLinejoin,this.flatShading=tt.flatShading,this.fog=tt.fog,this}}class MeshMatcapMaterial extends Material{constructor(tt){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color$1(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(tt)}copy(tt){return super.copy(tt),this.defines={MATCAP:""},this.color.copy(tt.color),this.matcap=tt.matcap,this.map=tt.map,this.bumpMap=tt.bumpMap,this.bumpScale=tt.bumpScale,this.normalMap=tt.normalMap,this.normalMapType=tt.normalMapType,this.normalScale.copy(tt.normalScale),this.displacementMap=tt.displacementMap,this.displacementScale=tt.displacementScale,this.displacementBias=tt.displacementBias,this.alphaMap=tt.alphaMap,this.flatShading=tt.flatShading,this.fog=tt.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(tt){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(tt)}copy(tt){return super.copy(tt),this.scale=tt.scale,this.dashSize=tt.dashSize,this.gapSize=tt.gapSize,this}}function convertArray(nt,tt,rt){return!nt||!rt&&nt.constructor===tt?nt:typeof tt.BYTES_PER_ELEMENT=="number"?new tt(nt):Array.prototype.slice.call(nt)}function isTypedArray$1(nt){return ArrayBuffer.isView(nt)&&!(nt instanceof DataView)}function getKeyframeOrder(nt){function tt(at,lt){return nt[at]-nt[lt]}const rt=nt.length,st=new Array(rt);for(let at=0;at!==rt;++at)st[at]=at;return st.sort(tt),st}function sortedArray(nt,tt,rt){const st=nt.length,at=new nt.constructor(st);for(let lt=0,dt=0;dt!==st;++lt){const yt=rt[lt]*tt;for(let vt=0;vt!==tt;++vt)at[dt++]=nt[yt+vt]}return at}function flattenJSON(nt,tt,rt,st){let at=1,lt=nt[0];for(;lt!==void 0&&lt[st]===void 0;)lt=nt[at++];if(lt===void 0)return;let dt=lt[st];if(dt!==void 0)if(Array.isArray(dt))do dt=lt[st],dt!==void 0&&(tt.push(lt.time),rt.push.apply(rt,dt)),lt=nt[at++];while(lt!==void 0);else if(dt.toArray!==void 0)do dt=lt[st],dt!==void 0&&(tt.push(lt.time),dt.toArray(rt,rt.length)),lt=nt[at++];while(lt!==void 0);else do dt=lt[st],dt!==void 0&&(tt.push(lt.time),rt.push(dt)),lt=nt[at++];while(lt!==void 0)}function subclip(nt,tt,rt,st,at=30){const lt=nt.clone();lt.name=tt;const dt=[];for(let vt=0;vt<lt.tracks.length;++vt){const _t=lt.tracks[vt],bt=_t.getValueSize(),Mt=[],Ct=[];for(let Tt=0;Tt<_t.times.length;++Tt){const $t=_t.times[Tt]*at;if(!($t<rt||$t>=st)){Mt.push(_t.times[Tt]);for(let Rt=0;Rt<bt;++Rt)Ct.push(_t.values[Tt*bt+Rt])}}Mt.length!==0&&(_t.times=convertArray(Mt,_t.times.constructor),_t.values=convertArray(Ct,_t.values.constructor),dt.push(_t))}lt.tracks=dt;let yt=1/0;for(let vt=0;vt<lt.tracks.length;++vt)yt>lt.tracks[vt].times[0]&&(yt=lt.tracks[vt].times[0]);for(let vt=0;vt<lt.tracks.length;++vt)lt.tracks[vt].shift(-1*yt);return lt.resetDuration(),lt}function makeClipAdditive(nt,tt=0,rt=nt,st=30){st<=0&&(st=30);const at=rt.tracks.length,lt=tt/st;for(let dt=0;dt<at;++dt){const yt=rt.tracks[dt],vt=yt.ValueTypeName;if(vt==="bool"||vt==="string")continue;const _t=nt.tracks.find(function(wt){return wt.name===yt.name&&wt.ValueTypeName===vt});if(_t===void 0)continue;let bt=0;const Mt=yt.getValueSize();yt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(bt=Mt/3);let Ct=0;const Tt=_t.getValueSize();_t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Ct=Tt/3);const $t=yt.times.length-1;let Rt;if(lt<=yt.times[0]){const wt=bt,Pt=Mt-bt;Rt=yt.values.slice(wt,Pt)}else if(lt>=yt.times[$t]){const wt=$t*Mt+bt,Pt=wt+Mt-bt;Rt=yt.values.slice(wt,Pt)}else{const wt=yt.createInterpolant(),Pt=bt,Ft=Mt-bt;wt.evaluate(lt),Rt=wt.resultBuffer.slice(Pt,Ft)}vt==="quaternion"&&new Quaternion().fromArray(Rt).normalize().conjugate().toArray(Rt);const Et=_t.times.length;for(let wt=0;wt<Et;++wt){const Pt=wt*Tt+Ct;if(vt==="quaternion")Quaternion.multiplyQuaternionsFlat(_t.values,Pt,Rt,0,_t.values,Pt);else{const Ft=Tt-Ct*2;for(let Nt=0;Nt<Ft;++Nt)_t.values[Pt+Nt]-=Rt[Nt]}}}return nt.blendMode=AdditiveAnimationBlendMode,nt}const AnimationUtils={convertArray,isTypedArray:isTypedArray$1,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(tt,rt,st,at){this.parameterPositions=tt,this._cachedIndex=0,this.resultBuffer=at!==void 0?at:new rt.constructor(st),this.sampleValues=rt,this.valueSize=st,this.settings=null,this.DefaultSettings_={}}evaluate(tt){const rt=this.parameterPositions;let st=this._cachedIndex,at=rt[st],lt=rt[st-1];e:{t:{let dt;n:{r:if(!(tt<at)){for(let yt=st+2;;){if(at===void 0){if(tt<lt)break r;return st=rt.length,this._cachedIndex=st,this.copySampleValue_(st-1)}if(st===yt)break;if(lt=at,at=rt[++st],tt<at)break t}dt=rt.length;break n}if(!(tt>=lt)){const yt=rt[1];tt<yt&&(st=2,lt=yt);for(let vt=st-2;;){if(lt===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(st===vt)break;if(at=lt,lt=rt[--st-1],tt>=lt)break t}dt=st,st=0;break n}break e}for(;st<dt;){const yt=st+dt>>>1;tt<rt[yt]?dt=yt:st=yt+1}if(at=rt[st],lt=rt[st-1],lt===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(at===void 0)return st=rt.length,this._cachedIndex=st,this.copySampleValue_(st-1)}this._cachedIndex=st,this.intervalChanged_(st,lt,at)}return this.interpolate_(st,lt,tt,at)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(tt){const rt=this.resultBuffer,st=this.sampleValues,at=this.valueSize,lt=tt*at;for(let dt=0;dt!==at;++dt)rt[dt]=st[lt+dt];return rt}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(tt,rt,st,at){super(tt,rt,st,at),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(tt,rt,st){const at=this.parameterPositions;let lt=tt-2,dt=tt+1,yt=at[lt],vt=at[dt];if(yt===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:lt=tt,yt=2*rt-st;break;case WrapAroundEnding:lt=at.length-2,yt=rt+at[lt]-at[lt+1];break;default:lt=tt,yt=st}if(vt===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:dt=tt,vt=2*st-rt;break;case WrapAroundEnding:dt=1,vt=st+at[1]-at[0];break;default:dt=tt-1,vt=rt}const _t=(st-rt)*.5,bt=this.valueSize;this._weightPrev=_t/(rt-yt),this._weightNext=_t/(vt-st),this._offsetPrev=lt*bt,this._offsetNext=dt*bt}interpolate_(tt,rt,st,at){const lt=this.resultBuffer,dt=this.sampleValues,yt=this.valueSize,vt=tt*yt,_t=vt-yt,bt=this._offsetPrev,Mt=this._offsetNext,Ct=this._weightPrev,Tt=this._weightNext,$t=(st-rt)/(at-rt),Rt=$t*$t,Et=Rt*$t,wt=-Ct*Et+2*Ct*Rt-Ct*$t,Pt=(1+Ct)*Et+(-1.5-2*Ct)*Rt+(-.5+Ct)*$t+1,Ft=(-1-Tt)*Et+(1.5+Tt)*Rt+.5*$t,Nt=Tt*Et-Tt*Rt;for(let Ot=0;Ot!==yt;++Ot)lt[Ot]=wt*dt[bt+Ot]+Pt*dt[_t+Ot]+Ft*dt[vt+Ot]+Nt*dt[Mt+Ot];return lt}}class LinearInterpolant extends Interpolant{constructor(tt,rt,st,at){super(tt,rt,st,at)}interpolate_(tt,rt,st,at){const lt=this.resultBuffer,dt=this.sampleValues,yt=this.valueSize,vt=tt*yt,_t=vt-yt,bt=(st-rt)/(at-rt),Mt=1-bt;for(let Ct=0;Ct!==yt;++Ct)lt[Ct]=dt[_t+Ct]*Mt+dt[vt+Ct]*bt;return lt}}class DiscreteInterpolant extends Interpolant{constructor(tt,rt,st,at){super(tt,rt,st,at)}interpolate_(tt){return this.copySampleValue_(tt-1)}}class KeyframeTrack{constructor(tt,rt,st,at){if(tt===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(rt===void 0||rt.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+tt);this.name=tt,this.times=convertArray(rt,this.TimeBufferType),this.values=convertArray(st,this.ValueBufferType),this.setInterpolation(at||this.DefaultInterpolation)}static toJSON(tt){const rt=tt.constructor;let st;if(rt.toJSON!==this.toJSON)st=rt.toJSON(tt);else{st={name:tt.name,times:convertArray(tt.times,Array),values:convertArray(tt.values,Array)};const at=tt.getInterpolation();at!==tt.DefaultInterpolation&&(st.interpolation=at)}return st.type=tt.ValueTypeName,st}InterpolantFactoryMethodDiscrete(tt){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),tt)}InterpolantFactoryMethodLinear(tt){return new LinearInterpolant(this.times,this.values,this.getValueSize(),tt)}InterpolantFactoryMethodSmooth(tt){return new CubicInterpolant(this.times,this.values,this.getValueSize(),tt)}setInterpolation(tt){let rt;switch(tt){case InterpolateDiscrete:rt=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:rt=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:rt=this.InterpolantFactoryMethodSmooth;break}if(rt===void 0){const st="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(tt!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(st);return console.warn("THREE.KeyframeTrack:",st),this}return this.createInterpolant=rt,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(tt){if(tt!==0){const rt=this.times;for(let st=0,at=rt.length;st!==at;++st)rt[st]+=tt}return this}scale(tt){if(tt!==1){const rt=this.times;for(let st=0,at=rt.length;st!==at;++st)rt[st]*=tt}return this}trim(tt,rt){const st=this.times,at=st.length;let lt=0,dt=at-1;for(;lt!==at&&st[lt]<tt;)++lt;for(;dt!==-1&&st[dt]>rt;)--dt;if(++dt,lt!==0||dt!==at){lt>=dt&&(dt=Math.max(dt,1),lt=dt-1);const yt=this.getValueSize();this.times=st.slice(lt,dt),this.values=this.values.slice(lt*yt,dt*yt)}return this}validate(){let tt=!0;const rt=this.getValueSize();rt-Math.floor(rt)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),tt=!1);const st=this.times,at=this.values,lt=st.length;lt===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),tt=!1);let dt=null;for(let yt=0;yt!==lt;yt++){const vt=st[yt];if(typeof vt=="number"&&isNaN(vt)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,yt,vt),tt=!1;break}if(dt!==null&&dt>vt){console.error("THREE.KeyframeTrack: Out of order keys.",this,yt,vt,dt),tt=!1;break}dt=vt}if(at!==void 0&&isTypedArray$1(at))for(let yt=0,vt=at.length;yt!==vt;++yt){const _t=at[yt];if(isNaN(_t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,yt,_t),tt=!1;break}}return tt}optimize(){const tt=this.times.slice(),rt=this.values.slice(),st=this.getValueSize(),at=this.getInterpolation()===InterpolateSmooth,lt=tt.length-1;let dt=1;for(let yt=1;yt<lt;++yt){let vt=!1;const _t=tt[yt],bt=tt[yt+1];if(_t!==bt&&(yt!==1||_t!==tt[0]))if(at)vt=!0;else{const Mt=yt*st,Ct=Mt-st,Tt=Mt+st;for(let $t=0;$t!==st;++$t){const Rt=rt[Mt+$t];if(Rt!==rt[Ct+$t]||Rt!==rt[Tt+$t]){vt=!0;break}}}if(vt){if(yt!==dt){tt[dt]=tt[yt];const Mt=yt*st,Ct=dt*st;for(let Tt=0;Tt!==st;++Tt)rt[Ct+Tt]=rt[Mt+Tt]}++dt}}if(lt>0){tt[dt]=tt[lt];for(let yt=lt*st,vt=dt*st,_t=0;_t!==st;++_t)rt[vt+_t]=rt[yt+_t];++dt}return dt!==tt.length?(this.times=tt.slice(0,dt),this.values=rt.slice(0,dt*st)):(this.times=tt,this.values=rt),this}clone(){const tt=this.times.slice(),rt=this.values.slice(),st=this.constructor,at=new st(this.name,tt,rt);return at.createInterpolant=this.createInterpolant,at}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(tt,rt,st){super(tt,rt,st)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(tt,rt,st,at){super(tt,rt,st,at)}interpolate_(tt,rt,st,at){const lt=this.resultBuffer,dt=this.sampleValues,yt=this.valueSize,vt=(st-rt)/(at-rt);let _t=tt*yt;for(let bt=_t+yt;_t!==bt;_t+=4)Quaternion.slerpFlat(lt,0,dt,_t-yt,dt,_t,vt);return lt}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(tt){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),tt)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(tt,rt,st){super(tt,rt,st)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(tt="",rt=-1,st=[],at=NormalAnimationBlendMode){this.name=tt,this.tracks=st,this.duration=rt,this.blendMode=at,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(tt){const rt=[],st=tt.tracks,at=1/(tt.fps||1);for(let dt=0,yt=st.length;dt!==yt;++dt)rt.push(parseKeyframeTrack(st[dt]).scale(at));const lt=new this(tt.name,tt.duration,rt,tt.blendMode);return lt.uuid=tt.uuid,lt}static toJSON(tt){const rt=[],st=tt.tracks,at={name:tt.name,duration:tt.duration,tracks:rt,uuid:tt.uuid,blendMode:tt.blendMode};for(let lt=0,dt=st.length;lt!==dt;++lt)rt.push(KeyframeTrack.toJSON(st[lt]));return at}static CreateFromMorphTargetSequence(tt,rt,st,at){const lt=rt.length,dt=[];for(let yt=0;yt<lt;yt++){let vt=[],_t=[];vt.push((yt+lt-1)%lt,yt,(yt+1)%lt),_t.push(0,1,0);const bt=getKeyframeOrder(vt);vt=sortedArray(vt,1,bt),_t=sortedArray(_t,1,bt),!at&&vt[0]===0&&(vt.push(lt),_t.push(_t[0])),dt.push(new NumberKeyframeTrack(".morphTargetInfluences["+rt[yt].name+"]",vt,_t).scale(1/st))}return new this(tt,-1,dt)}static findByName(tt,rt){let st=tt;if(!Array.isArray(tt)){const at=tt;st=at.geometry&&at.geometry.animations||at.animations}for(let at=0;at<st.length;at++)if(st[at].name===rt)return st[at];return null}static CreateClipsFromMorphTargetSequences(tt,rt,st){const at={},lt=/^([\w-]*?)([\d]+)$/;for(let yt=0,vt=tt.length;yt<vt;yt++){const _t=tt[yt],bt=_t.name.match(lt);if(bt&&bt.length>1){const Mt=bt[1];let Ct=at[Mt];Ct||(at[Mt]=Ct=[]),Ct.push(_t)}}const dt=[];for(const yt in at)dt.push(this.CreateFromMorphTargetSequence(yt,at[yt],rt,st));return dt}static parseAnimation(tt,rt){if(!tt)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const st=function(Mt,Ct,Tt,$t,Rt){if(Tt.length!==0){const Et=[],wt=[];flattenJSON(Tt,Et,wt,$t),Et.length!==0&&Rt.push(new Mt(Ct,Et,wt))}},at=[],lt=tt.name||"default",dt=tt.fps||30,yt=tt.blendMode;let vt=tt.length||-1;const _t=tt.hierarchy||[];for(let Mt=0;Mt<_t.length;Mt++){const Ct=_t[Mt].keys;if(!(!Ct||Ct.length===0))if(Ct[0].morphTargets){const Tt={};let $t;for($t=0;$t<Ct.length;$t++)if(Ct[$t].morphTargets)for(let Rt=0;Rt<Ct[$t].morphTargets.length;Rt++)Tt[Ct[$t].morphTargets[Rt]]=-1;for(const Rt in Tt){const Et=[],wt=[];for(let Pt=0;Pt!==Ct[$t].morphTargets.length;++Pt){const Ft=Ct[$t];Et.push(Ft.time),wt.push(Ft.morphTarget===Rt?1:0)}at.push(new NumberKeyframeTrack(".morphTargetInfluence["+Rt+"]",Et,wt))}vt=Tt.length*dt}else{const Tt=".bones["+rt[Mt].name+"]";st(VectorKeyframeTrack,Tt+".position",Ct,"pos",at),st(QuaternionKeyframeTrack,Tt+".quaternion",Ct,"rot",at),st(VectorKeyframeTrack,Tt+".scale",Ct,"scl",at)}}return at.length===0?null:new this(lt,vt,at,yt)}resetDuration(){const tt=this.tracks;let rt=0;for(let st=0,at=tt.length;st!==at;++st){const lt=this.tracks[st];rt=Math.max(rt,lt.times[lt.times.length-1])}return this.duration=rt,this}trim(){for(let tt=0;tt<this.tracks.length;tt++)this.tracks[tt].trim(0,this.duration);return this}validate(){let tt=!0;for(let rt=0;rt<this.tracks.length;rt++)tt=tt&&this.tracks[rt].validate();return tt}optimize(){for(let tt=0;tt<this.tracks.length;tt++)this.tracks[tt].optimize();return this}clone(){const tt=[];for(let rt=0;rt<this.tracks.length;rt++)tt.push(this.tracks[rt].clone());return new this.constructor(this.name,this.duration,tt,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(nt){switch(nt.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+nt)}function parseKeyframeTrack(nt){if(nt.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const tt=getTrackTypeForValueTypeName(nt.type);if(nt.times===void 0){const rt=[],st=[];flattenJSON(nt.keys,rt,st,"value"),nt.times=rt,nt.values=st}return tt.parse!==void 0?tt.parse(nt):new tt(nt.name,nt.times,nt.values,nt.interpolation)}const Cache={enabled:!1,files:{},add:function(nt,tt){this.enabled!==!1&&(this.files[nt]=tt)},get:function(nt){if(this.enabled!==!1)return this.files[nt]},remove:function(nt){delete this.files[nt]},clear:function(){this.files={}}};class LoadingManager{constructor(tt,rt,st){const at=this;let lt=!1,dt=0,yt=0,vt;const _t=[];this.onStart=void 0,this.onLoad=tt,this.onProgress=rt,this.onError=st,this.itemStart=function(bt){yt++,lt===!1&&at.onStart!==void 0&&at.onStart(bt,dt,yt),lt=!0},this.itemEnd=function(bt){dt++,at.onProgress!==void 0&&at.onProgress(bt,dt,yt),dt===yt&&(lt=!1,at.onLoad!==void 0&&at.onLoad())},this.itemError=function(bt){at.onError!==void 0&&at.onError(bt)},this.resolveURL=function(bt){return vt?vt(bt):bt},this.setURLModifier=function(bt){return vt=bt,this},this.addHandler=function(bt,Mt){return _t.push(bt,Mt),this},this.removeHandler=function(bt){const Mt=_t.indexOf(bt);return Mt!==-1&&_t.splice(Mt,2),this},this.getHandler=function(bt){for(let Mt=0,Ct=_t.length;Mt<Ct;Mt+=2){const Tt=_t[Mt],$t=_t[Mt+1];if(Tt.global&&(Tt.lastIndex=0),Tt.test(bt))return $t}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(tt){this.manager=tt!==void 0?tt:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(tt,rt){const st=this;return new Promise(function(at,lt){st.load(tt,at,rt,lt)})}parse(){}setCrossOrigin(tt){return this.crossOrigin=tt,this}setWithCredentials(tt){return this.withCredentials=tt,this}setPath(tt){return this.path=tt,this}setResourcePath(tt){return this.resourcePath=tt,this}setRequestHeader(tt){return this.requestHeader=tt,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(tt,rt){super(tt),this.response=rt}}class FileLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){tt===void 0&&(tt=""),this.path!==void 0&&(tt=this.path+tt),tt=this.manager.resolveURL(tt);const lt=Cache.get(tt);if(lt!==void 0)return this.manager.itemStart(tt),setTimeout(()=>{rt&&rt(lt),this.manager.itemEnd(tt)},0),lt;if(loading[tt]!==void 0){loading[tt].push({onLoad:rt,onProgress:st,onError:at});return}loading[tt]=[],loading[tt].push({onLoad:rt,onProgress:st,onError:at});const dt=new Request(tt,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),yt=this.mimeType,vt=this.responseType;fetch(dt).then(_t=>{if(_t.status===200||_t.status===0){if(_t.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||_t.body===void 0||_t.body.getReader===void 0)return _t;const bt=loading[tt],Mt=_t.body.getReader(),Ct=_t.headers.get("X-File-Size")||_t.headers.get("Content-Length"),Tt=Ct?parseInt(Ct):0,$t=Tt!==0;let Rt=0;const Et=new ReadableStream({start(wt){Pt();function Pt(){Mt.read().then(({done:Ft,value:Nt})=>{if(Ft)wt.close();else{Rt+=Nt.byteLength;const Ot=new ProgressEvent("progress",{lengthComputable:$t,loaded:Rt,total:Tt});for(let Bt=0,Xt=bt.length;Bt<Xt;Bt++){const Zt=bt[Bt];Zt.onProgress&&Zt.onProgress(Ot)}wt.enqueue(Nt),Pt()}},Ft=>{wt.error(Ft)})}}});return new Response(Et)}else throw new HttpError(`fetch for "${_t.url}" responded with ${_t.status}: ${_t.statusText}`,_t)}).then(_t=>{switch(vt){case"arraybuffer":return _t.arrayBuffer();case"blob":return _t.blob();case"document":return _t.text().then(bt=>new DOMParser().parseFromString(bt,yt));case"json":return _t.json();default:if(yt===void 0)return _t.text();{const Mt=/charset="?([^;"\s]*)"?/i.exec(yt),Ct=Mt&&Mt[1]?Mt[1].toLowerCase():void 0,Tt=new TextDecoder(Ct);return _t.arrayBuffer().then($t=>Tt.decode($t))}}}).then(_t=>{Cache.add(tt,_t);const bt=loading[tt];delete loading[tt];for(let Mt=0,Ct=bt.length;Mt<Ct;Mt++){const Tt=bt[Mt];Tt.onLoad&&Tt.onLoad(_t)}}).catch(_t=>{const bt=loading[tt];if(bt===void 0)throw this.manager.itemError(tt),_t;delete loading[tt];for(let Mt=0,Ct=bt.length;Mt<Ct;Mt++){const Tt=bt[Mt];Tt.onError&&Tt.onError(_t)}this.manager.itemError(tt)}).finally(()=>{this.manager.itemEnd(tt)}),this.manager.itemStart(tt)}setResponseType(tt){return this.responseType=tt,this}setMimeType(tt){return this.mimeType=tt,this}}class AnimationLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){const lt=this,dt=new FileLoader(this.manager);dt.setPath(this.path),dt.setRequestHeader(this.requestHeader),dt.setWithCredentials(this.withCredentials),dt.load(tt,function(yt){try{rt(lt.parse(JSON.parse(yt)))}catch(vt){at?at(vt):console.error(vt),lt.manager.itemError(tt)}},st,at)}parse(tt){const rt=[];for(let st=0;st<tt.length;st++){const at=AnimationClip.parse(tt[st]);rt.push(at)}return rt}}class CompressedTextureLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){const lt=this,dt=[],yt=new CompressedTexture,vt=new FileLoader(this.manager);vt.setPath(this.path),vt.setResponseType("arraybuffer"),vt.setRequestHeader(this.requestHeader),vt.setWithCredentials(lt.withCredentials);let _t=0;function bt(Mt){vt.load(tt[Mt],function(Ct){const Tt=lt.parse(Ct,!0);dt[Mt]={width:Tt.width,height:Tt.height,format:Tt.format,mipmaps:Tt.mipmaps},_t+=1,_t===6&&(Tt.mipmapCount===1&&(yt.minFilter=LinearFilter),yt.image=dt,yt.format=Tt.format,yt.needsUpdate=!0,rt&&rt(yt))},st,at)}if(Array.isArray(tt))for(let Mt=0,Ct=tt.length;Mt<Ct;++Mt)bt(Mt);else vt.load(tt,function(Mt){const Ct=lt.parse(Mt,!0);if(Ct.isCubemap){const Tt=Ct.mipmaps.length/Ct.mipmapCount;for(let $t=0;$t<Tt;$t++){dt[$t]={mipmaps:[]};for(let Rt=0;Rt<Ct.mipmapCount;Rt++)dt[$t].mipmaps.push(Ct.mipmaps[$t*Ct.mipmapCount+Rt]),dt[$t].format=Ct.format,dt[$t].width=Ct.width,dt[$t].height=Ct.height}yt.image=dt}else yt.image.width=Ct.width,yt.image.height=Ct.height,yt.mipmaps=Ct.mipmaps;Ct.mipmapCount===1&&(yt.minFilter=LinearFilter),yt.format=Ct.format,yt.needsUpdate=!0,rt&&rt(yt)},st,at);return yt}}class ImageLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){this.path!==void 0&&(tt=this.path+tt),tt=this.manager.resolveURL(tt);const lt=this,dt=Cache.get(tt);if(dt!==void 0)return lt.manager.itemStart(tt),setTimeout(function(){rt&&rt(dt),lt.manager.itemEnd(tt)},0),dt;const yt=createElementNS("img");function vt(){bt(),Cache.add(tt,this),rt&&rt(this),lt.manager.itemEnd(tt)}function _t(Mt){bt(),at&&at(Mt),lt.manager.itemError(tt),lt.manager.itemEnd(tt)}function bt(){yt.removeEventListener("load",vt,!1),yt.removeEventListener("error",_t,!1)}return yt.addEventListener("load",vt,!1),yt.addEventListener("error",_t,!1),tt.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(yt.crossOrigin=this.crossOrigin),lt.manager.itemStart(tt),yt.src=tt,yt}}class CubeTextureLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){const lt=new CubeTexture;lt.colorSpace=SRGBColorSpace;const dt=new ImageLoader(this.manager);dt.setCrossOrigin(this.crossOrigin),dt.setPath(this.path);let yt=0;function vt(_t){dt.load(tt[_t],function(bt){lt.images[_t]=bt,yt++,yt===6&&(lt.needsUpdate=!0,rt&&rt(lt))},void 0,at)}for(let _t=0;_t<tt.length;++_t)vt(_t);return lt}}class DataTextureLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){const lt=this,dt=new DataTexture,yt=new FileLoader(this.manager);return yt.setResponseType("arraybuffer"),yt.setRequestHeader(this.requestHeader),yt.setPath(this.path),yt.setWithCredentials(lt.withCredentials),yt.load(tt,function(vt){let _t;try{_t=lt.parse(vt)}catch(bt){if(at!==void 0)at(bt);else{console.error(bt);return}}_t.image!==void 0?dt.image=_t.image:_t.data!==void 0&&(dt.image.width=_t.width,dt.image.height=_t.height,dt.image.data=_t.data),dt.wrapS=_t.wrapS!==void 0?_t.wrapS:ClampToEdgeWrapping,dt.wrapT=_t.wrapT!==void 0?_t.wrapT:ClampToEdgeWrapping,dt.magFilter=_t.magFilter!==void 0?_t.magFilter:LinearFilter,dt.minFilter=_t.minFilter!==void 0?_t.minFilter:LinearFilter,dt.anisotropy=_t.anisotropy!==void 0?_t.anisotropy:1,_t.colorSpace!==void 0&&(dt.colorSpace=_t.colorSpace),_t.flipY!==void 0&&(dt.flipY=_t.flipY),_t.format!==void 0&&(dt.format=_t.format),_t.type!==void 0&&(dt.type=_t.type),_t.mipmaps!==void 0&&(dt.mipmaps=_t.mipmaps,dt.minFilter=LinearMipmapLinearFilter),_t.mipmapCount===1&&(dt.minFilter=LinearFilter),_t.generateMipmaps!==void 0&&(dt.generateMipmaps=_t.generateMipmaps),dt.needsUpdate=!0,rt&&rt(dt,_t)},st,at),dt}}class TextureLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){const lt=new Texture,dt=new ImageLoader(this.manager);return dt.setCrossOrigin(this.crossOrigin),dt.setPath(this.path),dt.load(tt,function(yt){lt.image=yt,lt.needsUpdate=!0,rt!==void 0&&rt(lt)},st,at),lt}}class Light extends Object3D{constructor(tt,rt=1){super(),this.isLight=!0,this.type="Light",this.color=new Color$1(tt),this.intensity=rt}dispose(){}copy(tt,rt){return super.copy(tt,rt),this.color.copy(tt.color),this.intensity=tt.intensity,this}toJSON(tt){const rt=super.toJSON(tt);return rt.object.color=this.color.getHex(),rt.object.intensity=this.intensity,this.groundColor!==void 0&&(rt.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(rt.object.distance=this.distance),this.angle!==void 0&&(rt.object.angle=this.angle),this.decay!==void 0&&(rt.object.decay=this.decay),this.penumbra!==void 0&&(rt.object.penumbra=this.penumbra),this.shadow!==void 0&&(rt.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(rt.object.target=this.target.uuid),rt}}class HemisphereLight extends Light{constructor(tt,rt,st){super(tt,st),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color$1(rt)}copy(tt,rt){return super.copy(tt,rt),this.groundColor.copy(tt.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(tt){this.camera=tt,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(tt){const rt=this.camera,st=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(tt.matrixWorld),rt.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(tt.target.matrixWorld),rt.lookAt(_lookTarget$1),rt.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(rt.projectionMatrix,rt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),st.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),st.multiply(_projScreenMatrix$1)}getViewport(tt){return this._viewports[tt]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(tt){return this.camera=tt.camera.clone(),this.intensity=tt.intensity,this.bias=tt.bias,this.radius=tt.radius,this.mapSize.copy(tt.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const tt={};return this.intensity!==1&&(tt.intensity=this.intensity),this.bias!==0&&(tt.bias=this.bias),this.normalBias!==0&&(tt.normalBias=this.normalBias),this.radius!==1&&(tt.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(tt.mapSize=this.mapSize.toArray()),tt.camera=this.camera.toJSON(!1).object,delete tt.camera.matrix,tt}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(tt){const rt=this.camera,st=RAD2DEG*2*tt.angle*this.focus,at=this.mapSize.width/this.mapSize.height,lt=tt.distance||rt.far;(st!==rt.fov||at!==rt.aspect||lt!==rt.far)&&(rt.fov=st,rt.aspect=at,rt.far=lt,rt.updateProjectionMatrix()),super.updateMatrices(tt)}copy(tt){return super.copy(tt),this.focus=tt.focus,this}}class SpotLight extends Light{constructor(tt,rt,st=0,at=Math.PI/3,lt=0,dt=2){super(tt,rt),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=st,this.angle=at,this.penumbra=lt,this.decay=dt,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(tt){this.intensity=tt/Math.PI}dispose(){this.shadow.dispose()}copy(tt,rt){return super.copy(tt,rt),this.distance=tt.distance,this.angle=tt.angle,this.penumbra=tt.penumbra,this.decay=tt.decay,this.target=tt.target.clone(),this.shadow=tt.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(tt,rt=0){const st=this.camera,at=this.matrix,lt=tt.distance||st.far;lt!==st.far&&(st.far=lt,st.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(tt.matrixWorld),st.position.copy(_lightPositionWorld),_lookTarget.copy(st.position),_lookTarget.add(this._cubeDirections[rt]),st.up.copy(this._cubeUps[rt]),st.lookAt(_lookTarget),st.updateMatrixWorld(),at.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(tt,rt,st=0,at=2){super(tt,rt),this.isPointLight=!0,this.type="PointLight",this.distance=st,this.decay=at,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(tt){this.intensity=tt/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(tt,rt){return super.copy(tt,rt),this.distance=tt.distance,this.decay=tt.decay,this.shadow=tt.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(tt,rt){super(tt,rt),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(tt){return super.copy(tt),this.target=tt.target.clone(),this.shadow=tt.shadow.clone(),this}}class AmbientLight extends Light{constructor(tt,rt){super(tt,rt),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(tt,rt,st=10,at=10){super(tt,rt),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=st,this.height=at}get power(){return this.intensity*this.width*this.height*Math.PI}set power(tt){this.intensity=tt/(this.width*this.height*Math.PI)}copy(tt){return super.copy(tt),this.width=tt.width,this.height=tt.height,this}toJSON(tt){const rt=super.toJSON(tt);return rt.object.width=this.width,rt.object.height=this.height,rt}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let tt=0;tt<9;tt++)this.coefficients.push(new Vector3)}set(tt){for(let rt=0;rt<9;rt++)this.coefficients[rt].copy(tt[rt]);return this}zero(){for(let tt=0;tt<9;tt++)this.coefficients[tt].set(0,0,0);return this}getAt(tt,rt){const st=tt.x,at=tt.y,lt=tt.z,dt=this.coefficients;return rt.copy(dt[0]).multiplyScalar(.282095),rt.addScaledVector(dt[1],.488603*at),rt.addScaledVector(dt[2],.488603*lt),rt.addScaledVector(dt[3],.488603*st),rt.addScaledVector(dt[4],1.092548*(st*at)),rt.addScaledVector(dt[5],1.092548*(at*lt)),rt.addScaledVector(dt[6],.315392*(3*lt*lt-1)),rt.addScaledVector(dt[7],1.092548*(st*lt)),rt.addScaledVector(dt[8],.546274*(st*st-at*at)),rt}getIrradianceAt(tt,rt){const st=tt.x,at=tt.y,lt=tt.z,dt=this.coefficients;return rt.copy(dt[0]).multiplyScalar(.886227),rt.addScaledVector(dt[1],2*.511664*at),rt.addScaledVector(dt[2],2*.511664*lt),rt.addScaledVector(dt[3],2*.511664*st),rt.addScaledVector(dt[4],2*.429043*st*at),rt.addScaledVector(dt[5],2*.429043*at*lt),rt.addScaledVector(dt[6],.743125*lt*lt-.247708),rt.addScaledVector(dt[7],2*.429043*st*lt),rt.addScaledVector(dt[8],.429043*(st*st-at*at)),rt}add(tt){for(let rt=0;rt<9;rt++)this.coefficients[rt].add(tt.coefficients[rt]);return this}addScaledSH(tt,rt){for(let st=0;st<9;st++)this.coefficients[st].addScaledVector(tt.coefficients[st],rt);return this}scale(tt){for(let rt=0;rt<9;rt++)this.coefficients[rt].multiplyScalar(tt);return this}lerp(tt,rt){for(let st=0;st<9;st++)this.coefficients[st].lerp(tt.coefficients[st],rt);return this}equals(tt){for(let rt=0;rt<9;rt++)if(!this.coefficients[rt].equals(tt.coefficients[rt]))return!1;return!0}copy(tt){return this.set(tt.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(tt,rt=0){const st=this.coefficients;for(let at=0;at<9;at++)st[at].fromArray(tt,rt+at*3);return this}toArray(tt=[],rt=0){const st=this.coefficients;for(let at=0;at<9;at++)st[at].toArray(tt,rt+at*3);return tt}static getBasisAt(tt,rt){const st=tt.x,at=tt.y,lt=tt.z;rt[0]=.282095,rt[1]=.488603*at,rt[2]=.488603*lt,rt[3]=.488603*st,rt[4]=1.092548*st*at,rt[5]=1.092548*at*lt,rt[6]=.315392*(3*lt*lt-1),rt[7]=1.092548*st*lt,rt[8]=.546274*(st*st-at*at)}}class LightProbe extends Light{constructor(tt=new SphericalHarmonics3,rt=1){super(void 0,rt),this.isLightProbe=!0,this.sh=tt}copy(tt){return super.copy(tt),this.sh.copy(tt.sh),this}fromJSON(tt){return this.intensity=tt.intensity,this.sh.fromArray(tt.sh),this}toJSON(tt){const rt=super.toJSON(tt);return rt.object.sh=this.sh.toArray(),rt}}class MaterialLoader extends Loader{constructor(tt){super(tt),this.textures={}}load(tt,rt,st,at){const lt=this,dt=new FileLoader(lt.manager);dt.setPath(lt.path),dt.setRequestHeader(lt.requestHeader),dt.setWithCredentials(lt.withCredentials),dt.load(tt,function(yt){try{rt(lt.parse(JSON.parse(yt)))}catch(vt){at?at(vt):console.error(vt),lt.manager.itemError(tt)}},st,at)}parse(tt){const rt=this.textures;function st(lt){return rt[lt]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",lt),rt[lt]}const at=this.createMaterialFromType(tt.type);if(tt.uuid!==void 0&&(at.uuid=tt.uuid),tt.name!==void 0&&(at.name=tt.name),tt.color!==void 0&&at.color!==void 0&&at.color.setHex(tt.color),tt.roughness!==void 0&&(at.roughness=tt.roughness),tt.metalness!==void 0&&(at.metalness=tt.metalness),tt.sheen!==void 0&&(at.sheen=tt.sheen),tt.sheenColor!==void 0&&(at.sheenColor=new Color$1().setHex(tt.sheenColor)),tt.sheenRoughness!==void 0&&(at.sheenRoughness=tt.sheenRoughness),tt.emissive!==void 0&&at.emissive!==void 0&&at.emissive.setHex(tt.emissive),tt.specular!==void 0&&at.specular!==void 0&&at.specular.setHex(tt.specular),tt.specularIntensity!==void 0&&(at.specularIntensity=tt.specularIntensity),tt.specularColor!==void 0&&at.specularColor!==void 0&&at.specularColor.setHex(tt.specularColor),tt.shininess!==void 0&&(at.shininess=tt.shininess),tt.clearcoat!==void 0&&(at.clearcoat=tt.clearcoat),tt.clearcoatRoughness!==void 0&&(at.clearcoatRoughness=tt.clearcoatRoughness),tt.dispersion!==void 0&&(at.dispersion=tt.dispersion),tt.iridescence!==void 0&&(at.iridescence=tt.iridescence),tt.iridescenceIOR!==void 0&&(at.iridescenceIOR=tt.iridescenceIOR),tt.iridescenceThicknessRange!==void 0&&(at.iridescenceThicknessRange=tt.iridescenceThicknessRange),tt.transmission!==void 0&&(at.transmission=tt.transmission),tt.thickness!==void 0&&(at.thickness=tt.thickness),tt.attenuationDistance!==void 0&&(at.attenuationDistance=tt.attenuationDistance),tt.attenuationColor!==void 0&&at.attenuationColor!==void 0&&at.attenuationColor.setHex(tt.attenuationColor),tt.anisotropy!==void 0&&(at.anisotropy=tt.anisotropy),tt.anisotropyRotation!==void 0&&(at.anisotropyRotation=tt.anisotropyRotation),tt.fog!==void 0&&(at.fog=tt.fog),tt.flatShading!==void 0&&(at.flatShading=tt.flatShading),tt.blending!==void 0&&(at.blending=tt.blending),tt.combine!==void 0&&(at.combine=tt.combine),tt.side!==void 0&&(at.side=tt.side),tt.shadowSide!==void 0&&(at.shadowSide=tt.shadowSide),tt.opacity!==void 0&&(at.opacity=tt.opacity),tt.transparent!==void 0&&(at.transparent=tt.transparent),tt.alphaTest!==void 0&&(at.alphaTest=tt.alphaTest),tt.alphaHash!==void 0&&(at.alphaHash=tt.alphaHash),tt.depthFunc!==void 0&&(at.depthFunc=tt.depthFunc),tt.depthTest!==void 0&&(at.depthTest=tt.depthTest),tt.depthWrite!==void 0&&(at.depthWrite=tt.depthWrite),tt.colorWrite!==void 0&&(at.colorWrite=tt.colorWrite),tt.blendSrc!==void 0&&(at.blendSrc=tt.blendSrc),tt.blendDst!==void 0&&(at.blendDst=tt.blendDst),tt.blendEquation!==void 0&&(at.blendEquation=tt.blendEquation),tt.blendSrcAlpha!==void 0&&(at.blendSrcAlpha=tt.blendSrcAlpha),tt.blendDstAlpha!==void 0&&(at.blendDstAlpha=tt.blendDstAlpha),tt.blendEquationAlpha!==void 0&&(at.blendEquationAlpha=tt.blendEquationAlpha),tt.blendColor!==void 0&&at.blendColor!==void 0&&at.blendColor.setHex(tt.blendColor),tt.blendAlpha!==void 0&&(at.blendAlpha=tt.blendAlpha),tt.stencilWriteMask!==void 0&&(at.stencilWriteMask=tt.stencilWriteMask),tt.stencilFunc!==void 0&&(at.stencilFunc=tt.stencilFunc),tt.stencilRef!==void 0&&(at.stencilRef=tt.stencilRef),tt.stencilFuncMask!==void 0&&(at.stencilFuncMask=tt.stencilFuncMask),tt.stencilFail!==void 0&&(at.stencilFail=tt.stencilFail),tt.stencilZFail!==void 0&&(at.stencilZFail=tt.stencilZFail),tt.stencilZPass!==void 0&&(at.stencilZPass=tt.stencilZPass),tt.stencilWrite!==void 0&&(at.stencilWrite=tt.stencilWrite),tt.wireframe!==void 0&&(at.wireframe=tt.wireframe),tt.wireframeLinewidth!==void 0&&(at.wireframeLinewidth=tt.wireframeLinewidth),tt.wireframeLinecap!==void 0&&(at.wireframeLinecap=tt.wireframeLinecap),tt.wireframeLinejoin!==void 0&&(at.wireframeLinejoin=tt.wireframeLinejoin),tt.rotation!==void 0&&(at.rotation=tt.rotation),tt.linewidth!==void 0&&(at.linewidth=tt.linewidth),tt.dashSize!==void 0&&(at.dashSize=tt.dashSize),tt.gapSize!==void 0&&(at.gapSize=tt.gapSize),tt.scale!==void 0&&(at.scale=tt.scale),tt.polygonOffset!==void 0&&(at.polygonOffset=tt.polygonOffset),tt.polygonOffsetFactor!==void 0&&(at.polygonOffsetFactor=tt.polygonOffsetFactor),tt.polygonOffsetUnits!==void 0&&(at.polygonOffsetUnits=tt.polygonOffsetUnits),tt.dithering!==void 0&&(at.dithering=tt.dithering),tt.alphaToCoverage!==void 0&&(at.alphaToCoverage=tt.alphaToCoverage),tt.premultipliedAlpha!==void 0&&(at.premultipliedAlpha=tt.premultipliedAlpha),tt.forceSinglePass!==void 0&&(at.forceSinglePass=tt.forceSinglePass),tt.visible!==void 0&&(at.visible=tt.visible),tt.toneMapped!==void 0&&(at.toneMapped=tt.toneMapped),tt.userData!==void 0&&(at.userData=tt.userData),tt.vertexColors!==void 0&&(typeof tt.vertexColors=="number"?at.vertexColors=tt.vertexColors>0:at.vertexColors=tt.vertexColors),tt.uniforms!==void 0)for(const lt in tt.uniforms){const dt=tt.uniforms[lt];switch(at.uniforms[lt]={},dt.type){case"t":at.uniforms[lt].value=st(dt.value);break;case"c":at.uniforms[lt].value=new Color$1().setHex(dt.value);break;case"v2":at.uniforms[lt].value=new Vector2().fromArray(dt.value);break;case"v3":at.uniforms[lt].value=new Vector3().fromArray(dt.value);break;case"v4":at.uniforms[lt].value=new Vector4().fromArray(dt.value);break;case"m3":at.uniforms[lt].value=new Matrix3().fromArray(dt.value);break;case"m4":at.uniforms[lt].value=new Matrix4().fromArray(dt.value);break;default:at.uniforms[lt].value=dt.value}}if(tt.defines!==void 0&&(at.defines=tt.defines),tt.vertexShader!==void 0&&(at.vertexShader=tt.vertexShader),tt.fragmentShader!==void 0&&(at.fragmentShader=tt.fragmentShader),tt.glslVersion!==void 0&&(at.glslVersion=tt.glslVersion),tt.extensions!==void 0)for(const lt in tt.extensions)at.extensions[lt]=tt.extensions[lt];if(tt.lights!==void 0&&(at.lights=tt.lights),tt.clipping!==void 0&&(at.clipping=tt.clipping),tt.size!==void 0&&(at.size=tt.size),tt.sizeAttenuation!==void 0&&(at.sizeAttenuation=tt.sizeAttenuation),tt.map!==void 0&&(at.map=st(tt.map)),tt.matcap!==void 0&&(at.matcap=st(tt.matcap)),tt.alphaMap!==void 0&&(at.alphaMap=st(tt.alphaMap)),tt.bumpMap!==void 0&&(at.bumpMap=st(tt.bumpMap)),tt.bumpScale!==void 0&&(at.bumpScale=tt.bumpScale),tt.normalMap!==void 0&&(at.normalMap=st(tt.normalMap)),tt.normalMapType!==void 0&&(at.normalMapType=tt.normalMapType),tt.normalScale!==void 0){let lt=tt.normalScale;Array.isArray(lt)===!1&&(lt=[lt,lt]),at.normalScale=new Vector2().fromArray(lt)}return tt.displacementMap!==void 0&&(at.displacementMap=st(tt.displacementMap)),tt.displacementScale!==void 0&&(at.displacementScale=tt.displacementScale),tt.displacementBias!==void 0&&(at.displacementBias=tt.displacementBias),tt.roughnessMap!==void 0&&(at.roughnessMap=st(tt.roughnessMap)),tt.metalnessMap!==void 0&&(at.metalnessMap=st(tt.metalnessMap)),tt.emissiveMap!==void 0&&(at.emissiveMap=st(tt.emissiveMap)),tt.emissiveIntensity!==void 0&&(at.emissiveIntensity=tt.emissiveIntensity),tt.specularMap!==void 0&&(at.specularMap=st(tt.specularMap)),tt.specularIntensityMap!==void 0&&(at.specularIntensityMap=st(tt.specularIntensityMap)),tt.specularColorMap!==void 0&&(at.specularColorMap=st(tt.specularColorMap)),tt.envMap!==void 0&&(at.envMap=st(tt.envMap)),tt.envMapRotation!==void 0&&at.envMapRotation.fromArray(tt.envMapRotation),tt.envMapIntensity!==void 0&&(at.envMapIntensity=tt.envMapIntensity),tt.reflectivity!==void 0&&(at.reflectivity=tt.reflectivity),tt.refractionRatio!==void 0&&(at.refractionRatio=tt.refractionRatio),tt.lightMap!==void 0&&(at.lightMap=st(tt.lightMap)),tt.lightMapIntensity!==void 0&&(at.lightMapIntensity=tt.lightMapIntensity),tt.aoMap!==void 0&&(at.aoMap=st(tt.aoMap)),tt.aoMapIntensity!==void 0&&(at.aoMapIntensity=tt.aoMapIntensity),tt.gradientMap!==void 0&&(at.gradientMap=st(tt.gradientMap)),tt.clearcoatMap!==void 0&&(at.clearcoatMap=st(tt.clearcoatMap)),tt.clearcoatRoughnessMap!==void 0&&(at.clearcoatRoughnessMap=st(tt.clearcoatRoughnessMap)),tt.clearcoatNormalMap!==void 0&&(at.clearcoatNormalMap=st(tt.clearcoatNormalMap)),tt.clearcoatNormalScale!==void 0&&(at.clearcoatNormalScale=new Vector2().fromArray(tt.clearcoatNormalScale)),tt.iridescenceMap!==void 0&&(at.iridescenceMap=st(tt.iridescenceMap)),tt.iridescenceThicknessMap!==void 0&&(at.iridescenceThicknessMap=st(tt.iridescenceThicknessMap)),tt.transmissionMap!==void 0&&(at.transmissionMap=st(tt.transmissionMap)),tt.thicknessMap!==void 0&&(at.thicknessMap=st(tt.thicknessMap)),tt.anisotropyMap!==void 0&&(at.anisotropyMap=st(tt.anisotropyMap)),tt.sheenColorMap!==void 0&&(at.sheenColorMap=st(tt.sheenColorMap)),tt.sheenRoughnessMap!==void 0&&(at.sheenRoughnessMap=st(tt.sheenRoughnessMap)),at}setTextures(tt){return this.textures=tt,this}createMaterialFromType(tt){return MaterialLoader.createMaterialFromType(tt)}static createMaterialFromType(tt){const rt={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new rt[tt]}}class LoaderUtils{static decodeText(tt){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(tt);let rt="";for(let st=0,at=tt.length;st<at;st++)rt+=String.fromCharCode(tt[st]);try{return decodeURIComponent(escape(rt))}catch{return rt}}static extractUrlBase(tt){const rt=tt.lastIndexOf("/");return rt===-1?"./":tt.slice(0,rt+1)}static resolveURL(tt,rt){return typeof tt!="string"||tt===""?"":(/^https?:\/\//i.test(rt)&&/^\//.test(tt)&&(rt=rt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(tt)||/^data:.*,.*$/i.test(tt)||/^blob:.*$/i.test(tt)?tt:rt+tt)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(tt){return super.copy(tt),this.instanceCount=tt.instanceCount,this}toJSON(){const tt=super.toJSON();return tt.instanceCount=this.instanceCount,tt.isInstancedBufferGeometry=!0,tt}}class BufferGeometryLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){const lt=this,dt=new FileLoader(lt.manager);dt.setPath(lt.path),dt.setRequestHeader(lt.requestHeader),dt.setWithCredentials(lt.withCredentials),dt.load(tt,function(yt){try{rt(lt.parse(JSON.parse(yt)))}catch(vt){at?at(vt):console.error(vt),lt.manager.itemError(tt)}},st,at)}parse(tt){const rt={},st={};function at(Tt,$t){if(rt[$t]!==void 0)return rt[$t];const Et=Tt.interleavedBuffers[$t],wt=lt(Tt,Et.buffer),Pt=getTypedArray(Et.type,wt),Ft=new InterleavedBuffer(Pt,Et.stride);return Ft.uuid=Et.uuid,rt[$t]=Ft,Ft}function lt(Tt,$t){if(st[$t]!==void 0)return st[$t];const Et=Tt.arrayBuffers[$t],wt=new Uint32Array(Et).buffer;return st[$t]=wt,wt}const dt=tt.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,yt=tt.data.index;if(yt!==void 0){const Tt=getTypedArray(yt.type,yt.array);dt.setIndex(new BufferAttribute(Tt,1))}const vt=tt.data.attributes;for(const Tt in vt){const $t=vt[Tt];let Rt;if($t.isInterleavedBufferAttribute){const Et=at(tt.data,$t.data);Rt=new InterleavedBufferAttribute(Et,$t.itemSize,$t.offset,$t.normalized)}else{const Et=getTypedArray($t.type,$t.array),wt=$t.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;Rt=new wt(Et,$t.itemSize,$t.normalized)}$t.name!==void 0&&(Rt.name=$t.name),$t.usage!==void 0&&Rt.setUsage($t.usage),dt.setAttribute(Tt,Rt)}const _t=tt.data.morphAttributes;if(_t)for(const Tt in _t){const $t=_t[Tt],Rt=[];for(let Et=0,wt=$t.length;Et<wt;Et++){const Pt=$t[Et];let Ft;if(Pt.isInterleavedBufferAttribute){const Nt=at(tt.data,Pt.data);Ft=new InterleavedBufferAttribute(Nt,Pt.itemSize,Pt.offset,Pt.normalized)}else{const Nt=getTypedArray(Pt.type,Pt.array);Ft=new BufferAttribute(Nt,Pt.itemSize,Pt.normalized)}Pt.name!==void 0&&(Ft.name=Pt.name),Rt.push(Ft)}dt.morphAttributes[Tt]=Rt}tt.data.morphTargetsRelative&&(dt.morphTargetsRelative=!0);const Mt=tt.data.groups||tt.data.drawcalls||tt.data.offsets;if(Mt!==void 0)for(let Tt=0,$t=Mt.length;Tt!==$t;++Tt){const Rt=Mt[Tt];dt.addGroup(Rt.start,Rt.count,Rt.materialIndex)}const Ct=tt.data.boundingSphere;if(Ct!==void 0){const Tt=new Vector3;Ct.center!==void 0&&Tt.fromArray(Ct.center),dt.boundingSphere=new Sphere(Tt,Ct.radius)}return tt.name&&(dt.name=tt.name),tt.userData&&(dt.userData=tt.userData),dt}}class ObjectLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){const lt=this,dt=this.path===""?LoaderUtils.extractUrlBase(tt):this.path;this.resourcePath=this.resourcePath||dt;const yt=new FileLoader(this.manager);yt.setPath(this.path),yt.setRequestHeader(this.requestHeader),yt.setWithCredentials(this.withCredentials),yt.load(tt,function(vt){let _t=null;try{_t=JSON.parse(vt)}catch(Mt){at!==void 0&&at(Mt),console.error("THREE:ObjectLoader: Can't parse "+tt+".",Mt.message);return}const bt=_t.metadata;if(bt===void 0||bt.type===void 0||bt.type.toLowerCase()==="geometry"){at!==void 0&&at(new Error("THREE.ObjectLoader: Can't load "+tt)),console.error("THREE.ObjectLoader: Can't load "+tt);return}lt.parse(_t,rt)},st,at)}async loadAsync(tt,rt){const st=this,at=this.path===""?LoaderUtils.extractUrlBase(tt):this.path;this.resourcePath=this.resourcePath||at;const lt=new FileLoader(this.manager);lt.setPath(this.path),lt.setRequestHeader(this.requestHeader),lt.setWithCredentials(this.withCredentials);const dt=await lt.loadAsync(tt,rt),yt=JSON.parse(dt),vt=yt.metadata;if(vt===void 0||vt.type===void 0||vt.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+tt);return await st.parseAsync(yt)}parse(tt,rt){const st=this.parseAnimations(tt.animations),at=this.parseShapes(tt.shapes),lt=this.parseGeometries(tt.geometries,at),dt=this.parseImages(tt.images,function(){rt!==void 0&&rt(_t)}),yt=this.parseTextures(tt.textures,dt),vt=this.parseMaterials(tt.materials,yt),_t=this.parseObject(tt.object,lt,vt,yt,st),bt=this.parseSkeletons(tt.skeletons,_t);if(this.bindSkeletons(_t,bt),this.bindLightTargets(_t),rt!==void 0){let Mt=!1;for(const Ct in dt)if(dt[Ct].data instanceof HTMLImageElement){Mt=!0;break}Mt===!1&&rt(_t)}return _t}async parseAsync(tt){const rt=this.parseAnimations(tt.animations),st=this.parseShapes(tt.shapes),at=this.parseGeometries(tt.geometries,st),lt=await this.parseImagesAsync(tt.images),dt=this.parseTextures(tt.textures,lt),yt=this.parseMaterials(tt.materials,dt),vt=this.parseObject(tt.object,at,yt,dt,rt),_t=this.parseSkeletons(tt.skeletons,vt);return this.bindSkeletons(vt,_t),this.bindLightTargets(vt),vt}parseShapes(tt){const rt={};if(tt!==void 0)for(let st=0,at=tt.length;st<at;st++){const lt=new Shape().fromJSON(tt[st]);rt[lt.uuid]=lt}return rt}parseSkeletons(tt,rt){const st={},at={};if(rt.traverse(function(lt){lt.isBone&&(at[lt.uuid]=lt)}),tt!==void 0)for(let lt=0,dt=tt.length;lt<dt;lt++){const yt=new Skeleton().fromJSON(tt[lt],at);st[yt.uuid]=yt}return st}parseGeometries(tt,rt){const st={};if(tt!==void 0){const at=new BufferGeometryLoader;for(let lt=0,dt=tt.length;lt<dt;lt++){let yt;const vt=tt[lt];switch(vt.type){case"BufferGeometry":case"InstancedBufferGeometry":yt=at.parse(vt);break;default:vt.type in Geometries?yt=Geometries[vt.type].fromJSON(vt,rt):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${vt.type}"`)}yt.uuid=vt.uuid,vt.name!==void 0&&(yt.name=vt.name),vt.userData!==void 0&&(yt.userData=vt.userData),st[vt.uuid]=yt}}return st}parseMaterials(tt,rt){const st={},at={};if(tt!==void 0){const lt=new MaterialLoader;lt.setTextures(rt);for(let dt=0,yt=tt.length;dt<yt;dt++){const vt=tt[dt];st[vt.uuid]===void 0&&(st[vt.uuid]=lt.parse(vt)),at[vt.uuid]=st[vt.uuid]}}return at}parseAnimations(tt){const rt={};if(tt!==void 0)for(let st=0;st<tt.length;st++){const at=tt[st],lt=AnimationClip.parse(at);rt[lt.uuid]=lt}return rt}parseImages(tt,rt){const st=this,at={};let lt;function dt(vt){return st.manager.itemStart(vt),lt.load(vt,function(){st.manager.itemEnd(vt)},void 0,function(){st.manager.itemError(vt),st.manager.itemEnd(vt)})}function yt(vt){if(typeof vt=="string"){const _t=vt,bt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(_t)?_t:st.resourcePath+_t;return dt(bt)}else return vt.data?{data:getTypedArray(vt.type,vt.data),width:vt.width,height:vt.height}:null}if(tt!==void 0&&tt.length>0){const vt=new LoadingManager(rt);lt=new ImageLoader(vt),lt.setCrossOrigin(this.crossOrigin);for(let _t=0,bt=tt.length;_t<bt;_t++){const Mt=tt[_t],Ct=Mt.url;if(Array.isArray(Ct)){const Tt=[];for(let $t=0,Rt=Ct.length;$t<Rt;$t++){const Et=Ct[$t],wt=yt(Et);wt!==null&&(wt instanceof HTMLImageElement?Tt.push(wt):Tt.push(new DataTexture(wt.data,wt.width,wt.height)))}at[Mt.uuid]=new Source(Tt)}else{const Tt=yt(Mt.url);at[Mt.uuid]=new Source(Tt)}}}return at}async parseImagesAsync(tt){const rt=this,st={};let at;async function lt(dt){if(typeof dt=="string"){const yt=dt,vt=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(yt)?yt:rt.resourcePath+yt;return await at.loadAsync(vt)}else return dt.data?{data:getTypedArray(dt.type,dt.data),width:dt.width,height:dt.height}:null}if(tt!==void 0&&tt.length>0){at=new ImageLoader(this.manager),at.setCrossOrigin(this.crossOrigin);for(let dt=0,yt=tt.length;dt<yt;dt++){const vt=tt[dt],_t=vt.url;if(Array.isArray(_t)){const bt=[];for(let Mt=0,Ct=_t.length;Mt<Ct;Mt++){const Tt=_t[Mt],$t=await lt(Tt);$t!==null&&($t instanceof HTMLImageElement?bt.push($t):bt.push(new DataTexture($t.data,$t.width,$t.height)))}st[vt.uuid]=new Source(bt)}else{const bt=await lt(vt.url);st[vt.uuid]=new Source(bt)}}}return st}parseTextures(tt,rt){function st(lt,dt){return typeof lt=="number"?lt:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",lt),dt[lt])}const at={};if(tt!==void 0)for(let lt=0,dt=tt.length;lt<dt;lt++){const yt=tt[lt];yt.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',yt.uuid),rt[yt.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",yt.image);const vt=rt[yt.image],_t=vt.data;let bt;Array.isArray(_t)?(bt=new CubeTexture,_t.length===6&&(bt.needsUpdate=!0)):(_t&&_t.data?bt=new DataTexture:bt=new Texture,_t&&(bt.needsUpdate=!0)),bt.source=vt,bt.uuid=yt.uuid,yt.name!==void 0&&(bt.name=yt.name),yt.mapping!==void 0&&(bt.mapping=st(yt.mapping,TEXTURE_MAPPING)),yt.channel!==void 0&&(bt.channel=yt.channel),yt.offset!==void 0&&bt.offset.fromArray(yt.offset),yt.repeat!==void 0&&bt.repeat.fromArray(yt.repeat),yt.center!==void 0&&bt.center.fromArray(yt.center),yt.rotation!==void 0&&(bt.rotation=yt.rotation),yt.wrap!==void 0&&(bt.wrapS=st(yt.wrap[0],TEXTURE_WRAPPING),bt.wrapT=st(yt.wrap[1],TEXTURE_WRAPPING)),yt.format!==void 0&&(bt.format=yt.format),yt.internalFormat!==void 0&&(bt.internalFormat=yt.internalFormat),yt.type!==void 0&&(bt.type=yt.type),yt.colorSpace!==void 0&&(bt.colorSpace=yt.colorSpace),yt.minFilter!==void 0&&(bt.minFilter=st(yt.minFilter,TEXTURE_FILTER)),yt.magFilter!==void 0&&(bt.magFilter=st(yt.magFilter,TEXTURE_FILTER)),yt.anisotropy!==void 0&&(bt.anisotropy=yt.anisotropy),yt.flipY!==void 0&&(bt.flipY=yt.flipY),yt.generateMipmaps!==void 0&&(bt.generateMipmaps=yt.generateMipmaps),yt.premultiplyAlpha!==void 0&&(bt.premultiplyAlpha=yt.premultiplyAlpha),yt.unpackAlignment!==void 0&&(bt.unpackAlignment=yt.unpackAlignment),yt.compareFunction!==void 0&&(bt.compareFunction=yt.compareFunction),yt.userData!==void 0&&(bt.userData=yt.userData),at[yt.uuid]=bt}return at}parseObject(tt,rt,st,at,lt){let dt;function yt(Ct){return rt[Ct]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ct),rt[Ct]}function vt(Ct){if(Ct!==void 0){if(Array.isArray(Ct)){const Tt=[];for(let $t=0,Rt=Ct.length;$t<Rt;$t++){const Et=Ct[$t];st[Et]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Et),Tt.push(st[Et])}return Tt}return st[Ct]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ct),st[Ct]}}function _t(Ct){return at[Ct]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",Ct),at[Ct]}let bt,Mt;switch(tt.type){case"Scene":dt=new Scene,tt.background!==void 0&&(Number.isInteger(tt.background)?dt.background=new Color$1(tt.background):dt.background=_t(tt.background)),tt.environment!==void 0&&(dt.environment=_t(tt.environment)),tt.fog!==void 0&&(tt.fog.type==="Fog"?dt.fog=new Fog(tt.fog.color,tt.fog.near,tt.fog.far):tt.fog.type==="FogExp2"&&(dt.fog=new FogExp2(tt.fog.color,tt.fog.density)),tt.fog.name!==""&&(dt.fog.name=tt.fog.name)),tt.backgroundBlurriness!==void 0&&(dt.backgroundBlurriness=tt.backgroundBlurriness),tt.backgroundIntensity!==void 0&&(dt.backgroundIntensity=tt.backgroundIntensity),tt.backgroundRotation!==void 0&&dt.backgroundRotation.fromArray(tt.backgroundRotation),tt.environmentIntensity!==void 0&&(dt.environmentIntensity=tt.environmentIntensity),tt.environmentRotation!==void 0&&dt.environmentRotation.fromArray(tt.environmentRotation);break;case"PerspectiveCamera":dt=new PerspectiveCamera(tt.fov,tt.aspect,tt.near,tt.far),tt.focus!==void 0&&(dt.focus=tt.focus),tt.zoom!==void 0&&(dt.zoom=tt.zoom),tt.filmGauge!==void 0&&(dt.filmGauge=tt.filmGauge),tt.filmOffset!==void 0&&(dt.filmOffset=tt.filmOffset),tt.view!==void 0&&(dt.view=Object.assign({},tt.view));break;case"OrthographicCamera":dt=new OrthographicCamera(tt.left,tt.right,tt.top,tt.bottom,tt.near,tt.far),tt.zoom!==void 0&&(dt.zoom=tt.zoom),tt.view!==void 0&&(dt.view=Object.assign({},tt.view));break;case"AmbientLight":dt=new AmbientLight(tt.color,tt.intensity);break;case"DirectionalLight":dt=new DirectionalLight(tt.color,tt.intensity),dt.target=tt.target||"";break;case"PointLight":dt=new PointLight(tt.color,tt.intensity,tt.distance,tt.decay);break;case"RectAreaLight":dt=new RectAreaLight(tt.color,tt.intensity,tt.width,tt.height);break;case"SpotLight":dt=new SpotLight(tt.color,tt.intensity,tt.distance,tt.angle,tt.penumbra,tt.decay),dt.target=tt.target||"";break;case"HemisphereLight":dt=new HemisphereLight(tt.color,tt.groundColor,tt.intensity);break;case"LightProbe":dt=new LightProbe().fromJSON(tt);break;case"SkinnedMesh":bt=yt(tt.geometry),Mt=vt(tt.material),dt=new SkinnedMesh(bt,Mt),tt.bindMode!==void 0&&(dt.bindMode=tt.bindMode),tt.bindMatrix!==void 0&&dt.bindMatrix.fromArray(tt.bindMatrix),tt.skeleton!==void 0&&(dt.skeleton=tt.skeleton);break;case"Mesh":bt=yt(tt.geometry),Mt=vt(tt.material),dt=new Mesh(bt,Mt);break;case"InstancedMesh":bt=yt(tt.geometry),Mt=vt(tt.material);const Ct=tt.count,Tt=tt.instanceMatrix,$t=tt.instanceColor;dt=new InstancedMesh(bt,Mt,Ct),dt.instanceMatrix=new InstancedBufferAttribute(new Float32Array(Tt.array),16),$t!==void 0&&(dt.instanceColor=new InstancedBufferAttribute(new Float32Array($t.array),$t.itemSize));break;case"BatchedMesh":bt=yt(tt.geometry),Mt=vt(tt.material),dt=new BatchedMesh(tt.maxInstanceCount,tt.maxVertexCount,tt.maxIndexCount,Mt),dt.geometry=bt,dt.perObjectFrustumCulled=tt.perObjectFrustumCulled,dt.sortObjects=tt.sortObjects,dt._drawRanges=tt.drawRanges,dt._reservedRanges=tt.reservedRanges,dt._visibility=tt.visibility,dt._active=tt.active,dt._bounds=tt.bounds.map(Rt=>{const Et=new Box3;Et.min.fromArray(Rt.boxMin),Et.max.fromArray(Rt.boxMax);const wt=new Sphere;return wt.radius=Rt.sphereRadius,wt.center.fromArray(Rt.sphereCenter),{boxInitialized:Rt.boxInitialized,box:Et,sphereInitialized:Rt.sphereInitialized,sphere:wt}}),dt._maxInstanceCount=tt.maxInstanceCount,dt._maxVertexCount=tt.maxVertexCount,dt._maxIndexCount=tt.maxIndexCount,dt._geometryInitialized=tt.geometryInitialized,dt._geometryCount=tt.geometryCount,dt._matricesTexture=_t(tt.matricesTexture.uuid),tt.colorsTexture!==void 0&&(dt._colorsTexture=_t(tt.colorsTexture.uuid));break;case"LOD":dt=new LOD;break;case"Line":dt=new Line$2(yt(tt.geometry),vt(tt.material));break;case"LineLoop":dt=new LineLoop(yt(tt.geometry),vt(tt.material));break;case"LineSegments":dt=new LineSegments(yt(tt.geometry),vt(tt.material));break;case"PointCloud":case"Points":dt=new Points(yt(tt.geometry),vt(tt.material));break;case"Sprite":dt=new Sprite(vt(tt.material));break;case"Group":dt=new Group$1;break;case"Bone":dt=new Bone;break;default:dt=new Object3D}if(dt.uuid=tt.uuid,tt.name!==void 0&&(dt.name=tt.name),tt.matrix!==void 0?(dt.matrix.fromArray(tt.matrix),tt.matrixAutoUpdate!==void 0&&(dt.matrixAutoUpdate=tt.matrixAutoUpdate),dt.matrixAutoUpdate&&dt.matrix.decompose(dt.position,dt.quaternion,dt.scale)):(tt.position!==void 0&&dt.position.fromArray(tt.position),tt.rotation!==void 0&&dt.rotation.fromArray(tt.rotation),tt.quaternion!==void 0&&dt.quaternion.fromArray(tt.quaternion),tt.scale!==void 0&&dt.scale.fromArray(tt.scale)),tt.up!==void 0&&dt.up.fromArray(tt.up),tt.castShadow!==void 0&&(dt.castShadow=tt.castShadow),tt.receiveShadow!==void 0&&(dt.receiveShadow=tt.receiveShadow),tt.shadow&&(tt.shadow.intensity!==void 0&&(dt.shadow.intensity=tt.shadow.intensity),tt.shadow.bias!==void 0&&(dt.shadow.bias=tt.shadow.bias),tt.shadow.normalBias!==void 0&&(dt.shadow.normalBias=tt.shadow.normalBias),tt.shadow.radius!==void 0&&(dt.shadow.radius=tt.shadow.radius),tt.shadow.mapSize!==void 0&&dt.shadow.mapSize.fromArray(tt.shadow.mapSize),tt.shadow.camera!==void 0&&(dt.shadow.camera=this.parseObject(tt.shadow.camera))),tt.visible!==void 0&&(dt.visible=tt.visible),tt.frustumCulled!==void 0&&(dt.frustumCulled=tt.frustumCulled),tt.renderOrder!==void 0&&(dt.renderOrder=tt.renderOrder),tt.userData!==void 0&&(dt.userData=tt.userData),tt.layers!==void 0&&(dt.layers.mask=tt.layers),tt.children!==void 0){const Ct=tt.children;for(let Tt=0;Tt<Ct.length;Tt++)dt.add(this.parseObject(Ct[Tt],rt,st,at,lt))}if(tt.animations!==void 0){const Ct=tt.animations;for(let Tt=0;Tt<Ct.length;Tt++){const $t=Ct[Tt];dt.animations.push(lt[$t])}}if(tt.type==="LOD"){tt.autoUpdate!==void 0&&(dt.autoUpdate=tt.autoUpdate);const Ct=tt.levels;for(let Tt=0;Tt<Ct.length;Tt++){const $t=Ct[Tt],Rt=dt.getObjectByProperty("uuid",$t.object);Rt!==void 0&&dt.addLevel(Rt,$t.distance,$t.hysteresis)}}return dt}bindSkeletons(tt,rt){Object.keys(rt).length!==0&&tt.traverse(function(st){if(st.isSkinnedMesh===!0&&st.skeleton!==void 0){const at=rt[st.skeleton];at===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",st.skeleton):st.bind(at,st.bindMatrix)}})}bindLightTargets(tt){tt.traverse(function(rt){if(rt.isDirectionalLight||rt.isSpotLight){const st=rt.target,at=tt.getObjectByProperty("uuid",st);at!==void 0?rt.target=at:rt.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(tt){super(tt),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(tt){return this.options=tt,this}load(tt,rt,st,at){tt===void 0&&(tt=""),this.path!==void 0&&(tt=this.path+tt),tt=this.manager.resolveURL(tt);const lt=this,dt=Cache.get(tt);if(dt!==void 0){if(lt.manager.itemStart(tt),dt.then){dt.then(_t=>{rt&&rt(_t),lt.manager.itemEnd(tt)}).catch(_t=>{at&&at(_t)});return}return setTimeout(function(){rt&&rt(dt),lt.manager.itemEnd(tt)},0),dt}const yt={};yt.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",yt.headers=this.requestHeader;const vt=fetch(tt,yt).then(function(_t){return _t.blob()}).then(function(_t){return createImageBitmap(_t,Object.assign(lt.options,{colorSpaceConversion:"none"}))}).then(function(_t){return Cache.add(tt,_t),rt&&rt(_t),lt.manager.itemEnd(tt),_t}).catch(function(_t){at&&at(_t),Cache.remove(tt),lt.manager.itemError(tt),lt.manager.itemEnd(tt)});Cache.add(tt,vt),lt.manager.itemStart(tt)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(tt){_context=tt}}class AudioLoader extends Loader{constructor(tt){super(tt)}load(tt,rt,st,at){const lt=this,dt=new FileLoader(this.manager);dt.setResponseType("arraybuffer"),dt.setPath(this.path),dt.setRequestHeader(this.requestHeader),dt.setWithCredentials(this.withCredentials),dt.load(tt,function(vt){try{const _t=vt.slice(0);AudioContext.getContext().decodeAudioData(_t,function(Mt){rt(Mt)}).catch(yt)}catch(_t){yt(_t)}},st,at);function yt(vt){at?at(vt):console.error(vt),lt.manager.itemError(tt)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(tt){const rt=this._cache;if(rt.focus!==tt.focus||rt.fov!==tt.fov||rt.aspect!==tt.aspect*this.aspect||rt.near!==tt.near||rt.far!==tt.far||rt.zoom!==tt.zoom||rt.eyeSep!==this.eyeSep){rt.focus=tt.focus,rt.fov=tt.fov,rt.aspect=tt.aspect*this.aspect,rt.near=tt.near,rt.far=tt.far,rt.zoom=tt.zoom,rt.eyeSep=this.eyeSep,_projectionMatrix.copy(tt.projectionMatrix);const at=rt.eyeSep/2,lt=at*rt.near/rt.focus,dt=rt.near*Math.tan(DEG2RAD*rt.fov*.5)/rt.zoom;let yt,vt;_eyeLeft.elements[12]=-at,_eyeRight.elements[12]=at,yt=-dt*rt.aspect+lt,vt=dt*rt.aspect+lt,_projectionMatrix.elements[0]=2*rt.near/(vt-yt),_projectionMatrix.elements[8]=(vt+yt)/(vt-yt),this.cameraL.projectionMatrix.copy(_projectionMatrix),yt=-dt*rt.aspect-lt,vt=dt*rt.aspect-lt,_projectionMatrix.elements[0]=2*rt.near/(vt-yt),_projectionMatrix.elements[8]=(vt+yt)/(vt-yt),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(tt.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(tt.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(tt=!0){this.autoStart=tt,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let tt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const rt=now();tt=(rt-this.oldTime)/1e3,this.oldTime=rt,this.elapsedTime+=tt}return tt}}function now(){return performance.now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(tt){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=tt,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(tt){return this.gain.gain.setTargetAtTime(tt,this.context.currentTime,.01),this}updateMatrixWorld(tt){super.updateMatrixWorld(tt);const rt=this.context.listener,st=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),rt.positionX){const at=this.context.currentTime+this.timeDelta;rt.positionX.linearRampToValueAtTime(_position$1.x,at),rt.positionY.linearRampToValueAtTime(_position$1.y,at),rt.positionZ.linearRampToValueAtTime(_position$1.z,at),rt.forwardX.linearRampToValueAtTime(_orientation$1.x,at),rt.forwardY.linearRampToValueAtTime(_orientation$1.y,at),rt.forwardZ.linearRampToValueAtTime(_orientation$1.z,at),rt.upX.linearRampToValueAtTime(st.x,at),rt.upY.linearRampToValueAtTime(st.y,at),rt.upZ.linearRampToValueAtTime(st.z,at)}else rt.setPosition(_position$1.x,_position$1.y,_position$1.z),rt.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,st.x,st.y,st.z)}}class Audio extends Object3D{constructor(tt){super(),this.type="Audio",this.listener=tt,this.context=tt.context,this.gain=this.context.createGain(),this.gain.connect(tt.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(tt){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=tt,this.connect(),this}setMediaElementSource(tt){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(tt),this.connect(),this}setMediaStreamSource(tt){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(tt),this.connect(),this}setBuffer(tt){return this.buffer=tt,this.sourceType="buffer",this.autoplay&&this.play(),this}play(tt=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+tt;const rt=this.context.createBufferSource();return rt.buffer=this.buffer,rt.loop=this.loop,rt.loopStart=this.loopStart,rt.loopEnd=this.loopEnd,rt.onended=this.onEnded.bind(this),rt.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=rt,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(tt=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+tt),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let tt=1,rt=this.filters.length;tt<rt;tt++)this.filters[tt-1].connect(this.filters[tt]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let tt=1,rt=this.filters.length;tt<rt;tt++)this.filters[tt-1].disconnect(this.filters[tt]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(tt){return tt||(tt=[]),this._connected===!0?(this.disconnect(),this.filters=tt.slice(),this.connect()):this.filters=tt.slice(),this}setDetune(tt){return this.detune=tt,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(tt){return this.setFilters(tt?[tt]:[])}setPlaybackRate(tt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=tt,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(tt){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=tt,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(tt){return this.loopStart=tt,this}setLoopEnd(tt){return this.loopEnd=tt,this}getVolume(){return this.gain.gain.value}setVolume(tt){return this.gain.gain.setTargetAtTime(tt,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(tt){super(tt),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(tt){return this.panner.refDistance=tt,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(tt){return this.panner.rolloffFactor=tt,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(tt){return this.panner.distanceModel=tt,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(tt){return this.panner.maxDistance=tt,this}setDirectionalCone(tt,rt,st){return this.panner.coneInnerAngle=tt,this.panner.coneOuterAngle=rt,this.panner.coneOuterGain=st,this}updateMatrixWorld(tt){if(super.updateMatrixWorld(tt),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const rt=this.panner;if(rt.positionX){const st=this.context.currentTime+this.listener.timeDelta;rt.positionX.linearRampToValueAtTime(_position.x,st),rt.positionY.linearRampToValueAtTime(_position.y,st),rt.positionZ.linearRampToValueAtTime(_position.z,st),rt.orientationX.linearRampToValueAtTime(_orientation.x,st),rt.orientationY.linearRampToValueAtTime(_orientation.y,st),rt.orientationZ.linearRampToValueAtTime(_orientation.z,st)}else rt.setPosition(_position.x,_position.y,_position.z),rt.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(tt,rt=2048){this.analyser=tt.context.createAnalyser(),this.analyser.fftSize=rt,this.data=new Uint8Array(this.analyser.frequencyBinCount),tt.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let tt=0;const rt=this.getFrequencyData();for(let st=0;st<rt.length;st++)tt+=rt[st];return tt/rt.length}}class PropertyMixer{constructor(tt,rt,st){this.binding=tt,this.valueSize=st;let at,lt,dt;switch(rt){case"quaternion":at=this._slerp,lt=this._slerpAdditive,dt=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(st*6),this._workIndex=5;break;case"string":case"bool":at=this._select,lt=this._select,dt=this._setAdditiveIdentityOther,this.buffer=new Array(st*5);break;default:at=this._lerp,lt=this._lerpAdditive,dt=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(st*5)}this._mixBufferRegion=at,this._mixBufferRegionAdditive=lt,this._setIdentity=dt,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(tt,rt){const st=this.buffer,at=this.valueSize,lt=tt*at+at;let dt=this.cumulativeWeight;if(dt===0){for(let yt=0;yt!==at;++yt)st[lt+yt]=st[yt];dt=rt}else{dt+=rt;const yt=rt/dt;this._mixBufferRegion(st,lt,0,yt,at)}this.cumulativeWeight=dt}accumulateAdditive(tt){const rt=this.buffer,st=this.valueSize,at=st*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(rt,at,0,tt,st),this.cumulativeWeightAdditive+=tt}apply(tt){const rt=this.valueSize,st=this.buffer,at=tt*rt+rt,lt=this.cumulativeWeight,dt=this.cumulativeWeightAdditive,yt=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,lt<1){const vt=rt*this._origIndex;this._mixBufferRegion(st,at,vt,1-lt,rt)}dt>0&&this._mixBufferRegionAdditive(st,at,this._addIndex*rt,1,rt);for(let vt=rt,_t=rt+rt;vt!==_t;++vt)if(st[vt]!==st[vt+rt]){yt.setValue(st,at);break}}saveOriginalState(){const tt=this.binding,rt=this.buffer,st=this.valueSize,at=st*this._origIndex;tt.getValue(rt,at);for(let lt=st,dt=at;lt!==dt;++lt)rt[lt]=rt[at+lt%st];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const tt=this.valueSize*3;this.binding.setValue(this.buffer,tt)}_setAdditiveIdentityNumeric(){const tt=this._addIndex*this.valueSize,rt=tt+this.valueSize;for(let st=tt;st<rt;st++)this.buffer[st]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const tt=this._origIndex*this.valueSize,rt=this._addIndex*this.valueSize;for(let st=0;st<this.valueSize;st++)this.buffer[rt+st]=this.buffer[tt+st]}_select(tt,rt,st,at,lt){if(at>=.5)for(let dt=0;dt!==lt;++dt)tt[rt+dt]=tt[st+dt]}_slerp(tt,rt,st,at){Quaternion.slerpFlat(tt,rt,tt,rt,tt,st,at)}_slerpAdditive(tt,rt,st,at,lt){const dt=this._workIndex*lt;Quaternion.multiplyQuaternionsFlat(tt,dt,tt,rt,tt,st),Quaternion.slerpFlat(tt,rt,tt,rt,tt,dt,at)}_lerp(tt,rt,st,at,lt){const dt=1-at;for(let yt=0;yt!==lt;++yt){const vt=rt+yt;tt[vt]=tt[vt]*dt+tt[st+yt]*at}}_lerpAdditive(tt,rt,st,at,lt){for(let dt=0;dt!==lt;++dt){const yt=rt+dt;tt[yt]=tt[yt]+tt[st+dt]*at}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(tt,rt,st){const at=st||PropertyBinding.parseTrackName(rt);this._targetGroup=tt,this._bindings=tt.subscribe_(rt,at)}getValue(tt,rt){this.bind();const st=this._targetGroup.nCachedObjects_,at=this._bindings[st];at!==void 0&&at.getValue(tt,rt)}setValue(tt,rt){const st=this._bindings;for(let at=this._targetGroup.nCachedObjects_,lt=st.length;at!==lt;++at)st[at].setValue(tt,rt)}bind(){const tt=this._bindings;for(let rt=this._targetGroup.nCachedObjects_,st=tt.length;rt!==st;++rt)tt[rt].bind()}unbind(){const tt=this._bindings;for(let rt=this._targetGroup.nCachedObjects_,st=tt.length;rt!==st;++rt)tt[rt].unbind()}}class PropertyBinding{constructor(tt,rt,st){this.path=rt,this.parsedPath=st||PropertyBinding.parseTrackName(rt),this.node=PropertyBinding.findNode(tt,this.parsedPath.nodeName),this.rootNode=tt,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(tt,rt,st){return tt&&tt.isAnimationObjectGroup?new PropertyBinding.Composite(tt,rt,st):new PropertyBinding(tt,rt,st)}static sanitizeNodeName(tt){return tt.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(tt){const rt=_trackRe.exec(tt);if(rt===null)throw new Error("PropertyBinding: Cannot parse trackName: "+tt);const st={nodeName:rt[2],objectName:rt[3],objectIndex:rt[4],propertyName:rt[5],propertyIndex:rt[6]},at=st.nodeName&&st.nodeName.lastIndexOf(".");if(at!==void 0&&at!==-1){const lt=st.nodeName.substring(at+1);_supportedObjectNames.indexOf(lt)!==-1&&(st.nodeName=st.nodeName.substring(0,at),st.objectName=lt)}if(st.propertyName===null||st.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+tt);return st}static findNode(tt,rt){if(rt===void 0||rt===""||rt==="."||rt===-1||rt===tt.name||rt===tt.uuid)return tt;if(tt.skeleton){const st=tt.skeleton.getBoneByName(rt);if(st!==void 0)return st}if(tt.children){const st=function(lt){for(let dt=0;dt<lt.length;dt++){const yt=lt[dt];if(yt.name===rt||yt.uuid===rt)return yt;const vt=st(yt.children);if(vt)return vt}return null},at=st(tt.children);if(at)return at}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(tt,rt){tt[rt]=this.targetObject[this.propertyName]}_getValue_array(tt,rt){const st=this.resolvedProperty;for(let at=0,lt=st.length;at!==lt;++at)tt[rt++]=st[at]}_getValue_arrayElement(tt,rt){tt[rt]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(tt,rt){this.resolvedProperty.toArray(tt,rt)}_setValue_direct(tt,rt){this.targetObject[this.propertyName]=tt[rt]}_setValue_direct_setNeedsUpdate(tt,rt){this.targetObject[this.propertyName]=tt[rt],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(tt,rt){this.targetObject[this.propertyName]=tt[rt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(tt,rt){const st=this.resolvedProperty;for(let at=0,lt=st.length;at!==lt;++at)st[at]=tt[rt++]}_setValue_array_setNeedsUpdate(tt,rt){const st=this.resolvedProperty;for(let at=0,lt=st.length;at!==lt;++at)st[at]=tt[rt++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(tt,rt){const st=this.resolvedProperty;for(let at=0,lt=st.length;at!==lt;++at)st[at]=tt[rt++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(tt,rt){this.resolvedProperty[this.propertyIndex]=tt[rt]}_setValue_arrayElement_setNeedsUpdate(tt,rt){this.resolvedProperty[this.propertyIndex]=tt[rt],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(tt,rt){this.resolvedProperty[this.propertyIndex]=tt[rt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(tt,rt){this.resolvedProperty.fromArray(tt,rt)}_setValue_fromArray_setNeedsUpdate(tt,rt){this.resolvedProperty.fromArray(tt,rt),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(tt,rt){this.resolvedProperty.fromArray(tt,rt),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(tt,rt){this.bind(),this.getValue(tt,rt)}_setValue_unbound(tt,rt){this.bind(),this.setValue(tt,rt)}bind(){let tt=this.node;const rt=this.parsedPath,st=rt.objectName,at=rt.propertyName;let lt=rt.propertyIndex;if(tt||(tt=PropertyBinding.findNode(this.rootNode,rt.nodeName),this.node=tt),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!tt){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(st){let _t=rt.objectIndex;switch(st){case"materials":if(!tt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!tt.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}tt=tt.material.materials;break;case"bones":if(!tt.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}tt=tt.skeleton.bones;for(let bt=0;bt<tt.length;bt++)if(tt[bt].name===_t){_t=bt;break}break;case"map":if("map"in tt){tt=tt.map;break}if(!tt.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!tt.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}tt=tt.material.map;break;default:if(tt[st]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}tt=tt[st]}if(_t!==void 0){if(tt[_t]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,tt);return}tt=tt[_t]}}const dt=tt[at];if(dt===void 0){const _t=rt.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+_t+"."+at+" but it wasn't found.",tt);return}let yt=this.Versioning.None;this.targetObject=tt,tt.needsUpdate!==void 0?yt=this.Versioning.NeedsUpdate:tt.matrixWorldNeedsUpdate!==void 0&&(yt=this.Versioning.MatrixWorldNeedsUpdate);let vt=this.BindingType.Direct;if(lt!==void 0){if(at==="morphTargetInfluences"){if(!tt.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!tt.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}tt.morphTargetDictionary[lt]!==void 0&&(lt=tt.morphTargetDictionary[lt])}vt=this.BindingType.ArrayElement,this.resolvedProperty=dt,this.propertyIndex=lt}else dt.fromArray!==void 0&&dt.toArray!==void 0?(vt=this.BindingType.HasFromToArray,this.resolvedProperty=dt):Array.isArray(dt)?(vt=this.BindingType.EntireArray,this.resolvedProperty=dt):this.propertyName=at;this.getValue=this.GetterByBindingType[vt],this.setValue=this.SetterByBindingTypeAndVersioning[vt][yt]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const tt={};this._indicesByUUID=tt;for(let st=0,at=arguments.length;st!==at;++st)tt[arguments[st].uuid]=st;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const rt=this;this.stats={objects:{get total(){return rt._objects.length},get inUse(){return this.total-rt.nCachedObjects_}},get bindingsPerObject(){return rt._bindings.length}}}add(){const tt=this._objects,rt=this._indicesByUUID,st=this._paths,at=this._parsedPaths,lt=this._bindings,dt=lt.length;let yt,vt=tt.length,_t=this.nCachedObjects_;for(let bt=0,Mt=arguments.length;bt!==Mt;++bt){const Ct=arguments[bt],Tt=Ct.uuid;let $t=rt[Tt];if($t===void 0){$t=vt++,rt[Tt]=$t,tt.push(Ct);for(let Rt=0,Et=dt;Rt!==Et;++Rt)lt[Rt].push(new PropertyBinding(Ct,st[Rt],at[Rt]))}else if($t<_t){yt=tt[$t];const Rt=--_t,Et=tt[Rt];rt[Et.uuid]=$t,tt[$t]=Et,rt[Tt]=Rt,tt[Rt]=Ct;for(let wt=0,Pt=dt;wt!==Pt;++wt){const Ft=lt[wt],Nt=Ft[Rt];let Ot=Ft[$t];Ft[$t]=Nt,Ot===void 0&&(Ot=new PropertyBinding(Ct,st[wt],at[wt])),Ft[Rt]=Ot}}else tt[$t]!==yt&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=_t}remove(){const tt=this._objects,rt=this._indicesByUUID,st=this._bindings,at=st.length;let lt=this.nCachedObjects_;for(let dt=0,yt=arguments.length;dt!==yt;++dt){const vt=arguments[dt],_t=vt.uuid,bt=rt[_t];if(bt!==void 0&&bt>=lt){const Mt=lt++,Ct=tt[Mt];rt[Ct.uuid]=bt,tt[bt]=Ct,rt[_t]=Mt,tt[Mt]=vt;for(let Tt=0,$t=at;Tt!==$t;++Tt){const Rt=st[Tt],Et=Rt[Mt],wt=Rt[bt];Rt[bt]=Et,Rt[Mt]=wt}}}this.nCachedObjects_=lt}uncache(){const tt=this._objects,rt=this._indicesByUUID,st=this._bindings,at=st.length;let lt=this.nCachedObjects_,dt=tt.length;for(let yt=0,vt=arguments.length;yt!==vt;++yt){const _t=arguments[yt],bt=_t.uuid,Mt=rt[bt];if(Mt!==void 0)if(delete rt[bt],Mt<lt){const Ct=--lt,Tt=tt[Ct],$t=--dt,Rt=tt[$t];rt[Tt.uuid]=Mt,tt[Mt]=Tt,rt[Rt.uuid]=Ct,tt[Ct]=Rt,tt.pop();for(let Et=0,wt=at;Et!==wt;++Et){const Pt=st[Et],Ft=Pt[Ct],Nt=Pt[$t];Pt[Mt]=Ft,Pt[Ct]=Nt,Pt.pop()}}else{const Ct=--dt,Tt=tt[Ct];Ct>0&&(rt[Tt.uuid]=Mt),tt[Mt]=Tt,tt.pop();for(let $t=0,Rt=at;$t!==Rt;++$t){const Et=st[$t];Et[Mt]=Et[Ct],Et.pop()}}}this.nCachedObjects_=lt}subscribe_(tt,rt){const st=this._bindingsIndicesByPath;let at=st[tt];const lt=this._bindings;if(at!==void 0)return lt[at];const dt=this._paths,yt=this._parsedPaths,vt=this._objects,_t=vt.length,bt=this.nCachedObjects_,Mt=new Array(_t);at=lt.length,st[tt]=at,dt.push(tt),yt.push(rt),lt.push(Mt);for(let Ct=bt,Tt=vt.length;Ct!==Tt;++Ct){const $t=vt[Ct];Mt[Ct]=new PropertyBinding($t,tt,rt)}return Mt}unsubscribe_(tt){const rt=this._bindingsIndicesByPath,st=rt[tt];if(st!==void 0){const at=this._paths,lt=this._parsedPaths,dt=this._bindings,yt=dt.length-1,vt=dt[yt],_t=tt[yt];rt[_t]=st,dt[st]=vt,dt.pop(),lt[st]=lt[yt],lt.pop(),at[st]=at[yt],at.pop()}}}class AnimationAction{constructor(tt,rt,st=null,at=rt.blendMode){this._mixer=tt,this._clip=rt,this._localRoot=st,this.blendMode=at;const lt=rt.tracks,dt=lt.length,yt=new Array(dt),vt={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let _t=0;_t!==dt;++_t){const bt=lt[_t].createInterpolant(null);yt[_t]=bt,bt.settings=vt}this._interpolantSettings=vt,this._interpolants=yt,this._propertyBindings=new Array(dt),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(tt){return this._startTime=tt,this}setLoop(tt,rt){return this.loop=tt,this.repetitions=rt,this}setEffectiveWeight(tt){return this.weight=tt,this._effectiveWeight=this.enabled?tt:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(tt){return this._scheduleFading(tt,0,1)}fadeOut(tt){return this._scheduleFading(tt,1,0)}crossFadeFrom(tt,rt,st){if(tt.fadeOut(rt),this.fadeIn(rt),st){const at=this._clip.duration,lt=tt._clip.duration,dt=lt/at,yt=at/lt;tt.warp(1,dt,rt),this.warp(yt,1,rt)}return this}crossFadeTo(tt,rt,st){return tt.crossFadeFrom(this,rt,st)}stopFading(){const tt=this._weightInterpolant;return tt!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(tt)),this}setEffectiveTimeScale(tt){return this.timeScale=tt,this._effectiveTimeScale=this.paused?0:tt,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(tt){return this.timeScale=this._clip.duration/tt,this.stopWarping()}syncWith(tt){return this.time=tt.time,this.timeScale=tt.timeScale,this.stopWarping()}halt(tt){return this.warp(this._effectiveTimeScale,0,tt)}warp(tt,rt,st){const at=this._mixer,lt=at.time,dt=this.timeScale;let yt=this._timeScaleInterpolant;yt===null&&(yt=at._lendControlInterpolant(),this._timeScaleInterpolant=yt);const vt=yt.parameterPositions,_t=yt.sampleValues;return vt[0]=lt,vt[1]=lt+st,_t[0]=tt/dt,_t[1]=rt/dt,this}stopWarping(){const tt=this._timeScaleInterpolant;return tt!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(tt)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(tt,rt,st,at){if(!this.enabled){this._updateWeight(tt);return}const lt=this._startTime;if(lt!==null){const vt=(tt-lt)*st;vt<0||st===0?rt=0:(this._startTime=null,rt=st*vt)}rt*=this._updateTimeScale(tt);const dt=this._updateTime(rt),yt=this._updateWeight(tt);if(yt>0){const vt=this._interpolants,_t=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let bt=0,Mt=vt.length;bt!==Mt;++bt)vt[bt].evaluate(dt),_t[bt].accumulateAdditive(yt);break;case NormalAnimationBlendMode:default:for(let bt=0,Mt=vt.length;bt!==Mt;++bt)vt[bt].evaluate(dt),_t[bt].accumulate(at,yt)}}}_updateWeight(tt){let rt=0;if(this.enabled){rt=this.weight;const st=this._weightInterpolant;if(st!==null){const at=st.evaluate(tt)[0];rt*=at,tt>st.parameterPositions[1]&&(this.stopFading(),at===0&&(this.enabled=!1))}}return this._effectiveWeight=rt,rt}_updateTimeScale(tt){let rt=0;if(!this.paused){rt=this.timeScale;const st=this._timeScaleInterpolant;if(st!==null){const at=st.evaluate(tt)[0];rt*=at,tt>st.parameterPositions[1]&&(this.stopWarping(),rt===0?this.paused=!0:this.timeScale=rt)}}return this._effectiveTimeScale=rt,rt}_updateTime(tt){const rt=this._clip.duration,st=this.loop;let at=this.time+tt,lt=this._loopCount;const dt=st===LoopPingPong;if(tt===0)return lt===-1?at:dt&&(lt&1)===1?rt-at:at;if(st===LoopOnce){lt===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(at>=rt)at=rt;else if(at<0)at=0;else{this.time=at;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=at,this._mixer.dispatchEvent({type:"finished",action:this,direction:tt<0?-1:1})}}else{if(lt===-1&&(tt>=0?(lt=0,this._setEndings(!0,this.repetitions===0,dt)):this._setEndings(this.repetitions===0,!0,dt)),at>=rt||at<0){const yt=Math.floor(at/rt);at-=rt*yt,lt+=Math.abs(yt);const vt=this.repetitions-lt;if(vt<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,at=tt>0?rt:0,this.time=at,this._mixer.dispatchEvent({type:"finished",action:this,direction:tt>0?1:-1});else{if(vt===1){const _t=tt<0;this._setEndings(_t,!_t,dt)}else this._setEndings(!1,!1,dt);this._loopCount=lt,this.time=at,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:yt})}}else this.time=at;if(dt&&(lt&1)===1)return rt-at}return at}_setEndings(tt,rt,st){const at=this._interpolantSettings;st?(at.endingStart=ZeroSlopeEnding,at.endingEnd=ZeroSlopeEnding):(tt?at.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:at.endingStart=WrapAroundEnding,rt?at.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:at.endingEnd=WrapAroundEnding)}_scheduleFading(tt,rt,st){const at=this._mixer,lt=at.time;let dt=this._weightInterpolant;dt===null&&(dt=at._lendControlInterpolant(),this._weightInterpolant=dt);const yt=dt.parameterPositions,vt=dt.sampleValues;return yt[0]=lt,vt[0]=rt,yt[1]=lt+tt,vt[1]=st,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(tt){super(),this._root=tt,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(tt,rt){const st=tt._localRoot||this._root,at=tt._clip.tracks,lt=at.length,dt=tt._propertyBindings,yt=tt._interpolants,vt=st.uuid,_t=this._bindingsByRootAndName;let bt=_t[vt];bt===void 0&&(bt={},_t[vt]=bt);for(let Mt=0;Mt!==lt;++Mt){const Ct=at[Mt],Tt=Ct.name;let $t=bt[Tt];if($t!==void 0)++$t.referenceCount,dt[Mt]=$t;else{if($t=dt[Mt],$t!==void 0){$t._cacheIndex===null&&(++$t.referenceCount,this._addInactiveBinding($t,vt,Tt));continue}const Rt=rt&&rt._propertyBindings[Mt].binding.parsedPath;$t=new PropertyMixer(PropertyBinding.create(st,Tt,Rt),Ct.ValueTypeName,Ct.getValueSize()),++$t.referenceCount,this._addInactiveBinding($t,vt,Tt),dt[Mt]=$t}yt[Mt].resultBuffer=$t.buffer}}_activateAction(tt){if(!this._isActiveAction(tt)){if(tt._cacheIndex===null){const st=(tt._localRoot||this._root).uuid,at=tt._clip.uuid,lt=this._actionsByClip[at];this._bindAction(tt,lt&&lt.knownActions[0]),this._addInactiveAction(tt,at,st)}const rt=tt._propertyBindings;for(let st=0,at=rt.length;st!==at;++st){const lt=rt[st];lt.useCount++===0&&(this._lendBinding(lt),lt.saveOriginalState())}this._lendAction(tt)}}_deactivateAction(tt){if(this._isActiveAction(tt)){const rt=tt._propertyBindings;for(let st=0,at=rt.length;st!==at;++st){const lt=rt[st];--lt.useCount===0&&(lt.restoreOriginalState(),this._takeBackBinding(lt))}this._takeBackAction(tt)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const tt=this;this.stats={actions:{get total(){return tt._actions.length},get inUse(){return tt._nActiveActions}},bindings:{get total(){return tt._bindings.length},get inUse(){return tt._nActiveBindings}},controlInterpolants:{get total(){return tt._controlInterpolants.length},get inUse(){return tt._nActiveControlInterpolants}}}}_isActiveAction(tt){const rt=tt._cacheIndex;return rt!==null&&rt<this._nActiveActions}_addInactiveAction(tt,rt,st){const at=this._actions,lt=this._actionsByClip;let dt=lt[rt];if(dt===void 0)dt={knownActions:[tt],actionByRoot:{}},tt._byClipCacheIndex=0,lt[rt]=dt;else{const yt=dt.knownActions;tt._byClipCacheIndex=yt.length,yt.push(tt)}tt._cacheIndex=at.length,at.push(tt),dt.actionByRoot[st]=tt}_removeInactiveAction(tt){const rt=this._actions,st=rt[rt.length-1],at=tt._cacheIndex;st._cacheIndex=at,rt[at]=st,rt.pop(),tt._cacheIndex=null;const lt=tt._clip.uuid,dt=this._actionsByClip,yt=dt[lt],vt=yt.knownActions,_t=vt[vt.length-1],bt=tt._byClipCacheIndex;_t._byClipCacheIndex=bt,vt[bt]=_t,vt.pop(),tt._byClipCacheIndex=null;const Mt=yt.actionByRoot,Ct=(tt._localRoot||this._root).uuid;delete Mt[Ct],vt.length===0&&delete dt[lt],this._removeInactiveBindingsForAction(tt)}_removeInactiveBindingsForAction(tt){const rt=tt._propertyBindings;for(let st=0,at=rt.length;st!==at;++st){const lt=rt[st];--lt.referenceCount===0&&this._removeInactiveBinding(lt)}}_lendAction(tt){const rt=this._actions,st=tt._cacheIndex,at=this._nActiveActions++,lt=rt[at];tt._cacheIndex=at,rt[at]=tt,lt._cacheIndex=st,rt[st]=lt}_takeBackAction(tt){const rt=this._actions,st=tt._cacheIndex,at=--this._nActiveActions,lt=rt[at];tt._cacheIndex=at,rt[at]=tt,lt._cacheIndex=st,rt[st]=lt}_addInactiveBinding(tt,rt,st){const at=this._bindingsByRootAndName,lt=this._bindings;let dt=at[rt];dt===void 0&&(dt={},at[rt]=dt),dt[st]=tt,tt._cacheIndex=lt.length,lt.push(tt)}_removeInactiveBinding(tt){const rt=this._bindings,st=tt.binding,at=st.rootNode.uuid,lt=st.path,dt=this._bindingsByRootAndName,yt=dt[at],vt=rt[rt.length-1],_t=tt._cacheIndex;vt._cacheIndex=_t,rt[_t]=vt,rt.pop(),delete yt[lt],Object.keys(yt).length===0&&delete dt[at]}_lendBinding(tt){const rt=this._bindings,st=tt._cacheIndex,at=this._nActiveBindings++,lt=rt[at];tt._cacheIndex=at,rt[at]=tt,lt._cacheIndex=st,rt[st]=lt}_takeBackBinding(tt){const rt=this._bindings,st=tt._cacheIndex,at=--this._nActiveBindings,lt=rt[at];tt._cacheIndex=at,rt[at]=tt,lt._cacheIndex=st,rt[st]=lt}_lendControlInterpolant(){const tt=this._controlInterpolants,rt=this._nActiveControlInterpolants++;let st=tt[rt];return st===void 0&&(st=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),st.__cacheIndex=rt,tt[rt]=st),st}_takeBackControlInterpolant(tt){const rt=this._controlInterpolants,st=tt.__cacheIndex,at=--this._nActiveControlInterpolants,lt=rt[at];tt.__cacheIndex=at,rt[at]=tt,lt.__cacheIndex=st,rt[st]=lt}clipAction(tt,rt,st){const at=rt||this._root,lt=at.uuid;let dt=typeof tt=="string"?AnimationClip.findByName(at,tt):tt;const yt=dt!==null?dt.uuid:tt,vt=this._actionsByClip[yt];let _t=null;if(st===void 0&&(dt!==null?st=dt.blendMode:st=NormalAnimationBlendMode),vt!==void 0){const Mt=vt.actionByRoot[lt];if(Mt!==void 0&&Mt.blendMode===st)return Mt;_t=vt.knownActions[0],dt===null&&(dt=_t._clip)}if(dt===null)return null;const bt=new AnimationAction(this,dt,rt,st);return this._bindAction(bt,_t),this._addInactiveAction(bt,yt,lt),bt}existingAction(tt,rt){const st=rt||this._root,at=st.uuid,lt=typeof tt=="string"?AnimationClip.findByName(st,tt):tt,dt=lt?lt.uuid:tt,yt=this._actionsByClip[dt];return yt!==void 0&&yt.actionByRoot[at]||null}stopAllAction(){const tt=this._actions,rt=this._nActiveActions;for(let st=rt-1;st>=0;--st)tt[st].stop();return this}update(tt){tt*=this.timeScale;const rt=this._actions,st=this._nActiveActions,at=this.time+=tt,lt=Math.sign(tt),dt=this._accuIndex^=1;for(let _t=0;_t!==st;++_t)rt[_t]._update(at,tt,lt,dt);const yt=this._bindings,vt=this._nActiveBindings;for(let _t=0;_t!==vt;++_t)yt[_t].apply(dt);return this}setTime(tt){this.time=0;for(let rt=0;rt<this._actions.length;rt++)this._actions[rt].time=0;return this.update(tt)}getRoot(){return this._root}uncacheClip(tt){const rt=this._actions,st=tt.uuid,at=this._actionsByClip,lt=at[st];if(lt!==void 0){const dt=lt.knownActions;for(let yt=0,vt=dt.length;yt!==vt;++yt){const _t=dt[yt];this._deactivateAction(_t);const bt=_t._cacheIndex,Mt=rt[rt.length-1];_t._cacheIndex=null,_t._byClipCacheIndex=null,Mt._cacheIndex=bt,rt[bt]=Mt,rt.pop(),this._removeInactiveBindingsForAction(_t)}delete at[st]}}uncacheRoot(tt){const rt=tt.uuid,st=this._actionsByClip;for(const dt in st){const yt=st[dt].actionByRoot,vt=yt[rt];vt!==void 0&&(this._deactivateAction(vt),this._removeInactiveAction(vt))}const at=this._bindingsByRootAndName,lt=at[rt];if(lt!==void 0)for(const dt in lt){const yt=lt[dt];yt.restoreOriginalState(),this._removeInactiveBinding(yt)}}uncacheAction(tt,rt){const st=this.existingAction(tt,rt);st!==null&&(this._deactivateAction(st),this._removeInactiveAction(st))}}class Uniform{constructor(tt){this.value=tt}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(tt){return this.uniforms.push(tt),this}remove(tt){const rt=this.uniforms.indexOf(tt);return rt!==-1&&this.uniforms.splice(rt,1),this}setName(tt){return this.name=tt,this}setUsage(tt){return this.usage=tt,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(tt){this.name=tt.name,this.usage=tt.usage;const rt=tt.uniforms;this.uniforms.length=0;for(let st=0,at=rt.length;st<at;st++){const lt=Array.isArray(rt[st])?rt[st]:[rt[st]];for(let dt=0;dt<lt.length;dt++)this.uniforms.push(lt[dt].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(tt,rt,st=1){super(tt,rt),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=st}copy(tt){return super.copy(tt),this.meshPerAttribute=tt.meshPerAttribute,this}clone(tt){const rt=super.clone(tt);return rt.meshPerAttribute=this.meshPerAttribute,rt}toJSON(tt){const rt=super.toJSON(tt);return rt.isInstancedInterleavedBuffer=!0,rt.meshPerAttribute=this.meshPerAttribute,rt}}class GLBufferAttribute{constructor(tt,rt,st,at,lt){this.isGLBufferAttribute=!0,this.name="",this.buffer=tt,this.type=rt,this.itemSize=st,this.elementSize=at,this.count=lt,this.version=0}set needsUpdate(tt){tt===!0&&this.version++}setBuffer(tt){return this.buffer=tt,this}setType(tt,rt){return this.type=tt,this.elementSize=rt,this}setItemSize(tt){return this.itemSize=tt,this}setCount(tt){return this.count=tt,this}}const _matrix=new Matrix4;class Raycaster{constructor(tt,rt,st=0,at=1/0){this.ray=new Ray(tt,rt),this.near=st,this.far=at,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(tt,rt){this.ray.set(tt,rt)}setFromCamera(tt,rt){rt.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(rt.matrixWorld),this.ray.direction.set(tt.x,tt.y,.5).unproject(rt).sub(this.ray.origin).normalize(),this.camera=rt):rt.isOrthographicCamera?(this.ray.origin.set(tt.x,tt.y,(rt.near+rt.far)/(rt.near-rt.far)).unproject(rt),this.ray.direction.set(0,0,-1).transformDirection(rt.matrixWorld),this.camera=rt):console.error("THREE.Raycaster: Unsupported camera type: "+rt.type)}setFromXRController(tt){return _matrix.identity().extractRotation(tt.matrixWorld),this.ray.origin.setFromMatrixPosition(tt.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(tt,rt=!0,st=[]){return intersect(tt,this,st,rt),st.sort(ascSort),st}intersectObjects(tt,rt=!0,st=[]){for(let at=0,lt=tt.length;at<lt;at++)intersect(tt[at],this,st,rt);return st.sort(ascSort),st}}function ascSort(nt,tt){return nt.distance-tt.distance}function intersect(nt,tt,rt,st){let at=!0;if(nt.layers.test(tt.layers)&&nt.raycast(tt,rt)===!1&&(at=!1),at===!0&&st===!0){const lt=nt.children;for(let dt=0,yt=lt.length;dt<yt;dt++)intersect(lt[dt],tt,rt,!0)}}class Spherical{constructor(tt=1,rt=0,st=0){return this.radius=tt,this.phi=rt,this.theta=st,this}set(tt,rt,st){return this.radius=tt,this.phi=rt,this.theta=st,this}copy(tt){return this.radius=tt.radius,this.phi=tt.phi,this.theta=tt.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(tt){return this.setFromCartesianCoords(tt.x,tt.y,tt.z)}setFromCartesianCoords(tt,rt,st){return this.radius=Math.sqrt(tt*tt+rt*rt+st*st),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(tt,st),this.phi=Math.acos(clamp(rt/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(tt=1,rt=0,st=0){return this.radius=tt,this.theta=rt,this.y=st,this}set(tt,rt,st){return this.radius=tt,this.theta=rt,this.y=st,this}copy(tt){return this.radius=tt.radius,this.theta=tt.theta,this.y=tt.y,this}setFromVector3(tt){return this.setFromCartesianCoords(tt.x,tt.y,tt.z)}setFromCartesianCoords(tt,rt,st){return this.radius=Math.sqrt(tt*tt+st*st),this.theta=Math.atan2(tt,st),this.y=rt,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(tt,rt,st,at){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],tt!==void 0&&this.set(tt,rt,st,at)}identity(){return this.set(1,0,0,1),this}fromArray(tt,rt=0){for(let st=0;st<4;st++)this.elements[st]=tt[st+rt];return this}set(tt,rt,st,at){const lt=this.elements;return lt[0]=tt,lt[2]=rt,lt[1]=st,lt[3]=at,this}}const _vector$4=new Vector2;class Box2{constructor(tt=new Vector2(1/0,1/0),rt=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=tt,this.max=rt}set(tt,rt){return this.min.copy(tt),this.max.copy(rt),this}setFromPoints(tt){this.makeEmpty();for(let rt=0,st=tt.length;rt<st;rt++)this.expandByPoint(tt[rt]);return this}setFromCenterAndSize(tt,rt){const st=_vector$4.copy(rt).multiplyScalar(.5);return this.min.copy(tt).sub(st),this.max.copy(tt).add(st),this}clone(){return new this.constructor().copy(this)}copy(tt){return this.min.copy(tt.min),this.max.copy(tt.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(tt){return this.isEmpty()?tt.set(0,0):tt.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(tt){return this.isEmpty()?tt.set(0,0):tt.subVectors(this.max,this.min)}expandByPoint(tt){return this.min.min(tt),this.max.max(tt),this}expandByVector(tt){return this.min.sub(tt),this.max.add(tt),this}expandByScalar(tt){return this.min.addScalar(-tt),this.max.addScalar(tt),this}containsPoint(tt){return tt.x>=this.min.x&&tt.x<=this.max.x&&tt.y>=this.min.y&&tt.y<=this.max.y}containsBox(tt){return this.min.x<=tt.min.x&&tt.max.x<=this.max.x&&this.min.y<=tt.min.y&&tt.max.y<=this.max.y}getParameter(tt,rt){return rt.set((tt.x-this.min.x)/(this.max.x-this.min.x),(tt.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(tt){return tt.max.x>=this.min.x&&tt.min.x<=this.max.x&&tt.max.y>=this.min.y&&tt.min.y<=this.max.y}clampPoint(tt,rt){return rt.copy(tt).clamp(this.min,this.max)}distanceToPoint(tt){return this.clampPoint(tt,_vector$4).distanceTo(tt)}intersect(tt){return this.min.max(tt.min),this.max.min(tt.max),this.isEmpty()&&this.makeEmpty(),this}union(tt){return this.min.min(tt.min),this.max.max(tt.max),this}translate(tt){return this.min.add(tt),this.max.add(tt),this}equals(tt){return tt.min.equals(this.min)&&tt.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(tt=new Vector3,rt=new Vector3){this.start=tt,this.end=rt}set(tt,rt){return this.start.copy(tt),this.end.copy(rt),this}copy(tt){return this.start.copy(tt.start),this.end.copy(tt.end),this}getCenter(tt){return tt.addVectors(this.start,this.end).multiplyScalar(.5)}delta(tt){return tt.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(tt,rt){return this.delta(rt).multiplyScalar(tt).add(this.start)}closestPointToPointParameter(tt,rt){_startP.subVectors(tt,this.start),_startEnd.subVectors(this.end,this.start);const st=_startEnd.dot(_startEnd);let lt=_startEnd.dot(_startP)/st;return rt&&(lt=clamp(lt,0,1)),lt}closestPointToPoint(tt,rt,st){const at=this.closestPointToPointParameter(tt,rt);return this.delta(st).multiplyScalar(at).add(this.start)}applyMatrix4(tt){return this.start.applyMatrix4(tt),this.end.applyMatrix4(tt),this}equals(tt){return tt.start.equals(this.start)&&tt.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(tt,rt){super(),this.light=tt,this.matrixAutoUpdate=!1,this.color=rt,this.type="SpotLightHelper";const st=new BufferGeometry,at=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let dt=0,yt=1,vt=32;dt<vt;dt++,yt++){const _t=dt/vt*Math.PI*2,bt=yt/vt*Math.PI*2;at.push(Math.cos(_t),Math.sin(_t),1,Math.cos(bt),Math.sin(bt),1)}st.setAttribute("position",new Float32BufferAttribute(at,3));const lt=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(st,lt),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const tt=this.light.distance?this.light.distance:1e3,rt=tt*Math.tan(this.light.angle);this.cone.scale.set(rt,rt,tt),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(tt){const rt=getBoneList(tt),st=new BufferGeometry,at=[],lt=[],dt=new Color$1(0,0,1),yt=new Color$1(0,1,0);for(let _t=0;_t<rt.length;_t++){const bt=rt[_t];bt.parent&&bt.parent.isBone&&(at.push(0,0,0),at.push(0,0,0),lt.push(dt.r,dt.g,dt.b),lt.push(yt.r,yt.g,yt.b))}st.setAttribute("position",new Float32BufferAttribute(at,3)),st.setAttribute("color",new Float32BufferAttribute(lt,3));const vt=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(st,vt),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=tt,this.bones=rt,this.matrix=tt.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(tt){const rt=this.bones,st=this.geometry,at=st.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let lt=0,dt=0;lt<rt.length;lt++){const yt=rt[lt];yt.parent&&yt.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,yt.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),at.setXYZ(dt,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,yt.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),at.setXYZ(dt+1,_vector$2.x,_vector$2.y,_vector$2.z),dt+=2)}st.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(tt)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(nt){const tt=[];nt.isBone===!0&&tt.push(nt);for(let rt=0;rt<nt.children.length;rt++)tt.push.apply(tt,getBoneList(nt.children[rt]));return tt}class PointLightHelper extends Mesh{constructor(tt,rt,st){const at=new SphereGeometry(rt,4,2),lt=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(at,lt),this.light=tt,this.color=st,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color$1,_color2=new Color$1;class HemisphereLightHelper extends Object3D{constructor(tt,rt,st){super(),this.light=tt,this.matrix=tt.matrixWorld,this.matrixAutoUpdate=!1,this.color=st,this.type="HemisphereLightHelper";const at=new OctahedronGeometry(rt);at.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const lt=at.getAttribute("position"),dt=new Float32Array(lt.count*3);at.setAttribute("color",new BufferAttribute(dt,3)),this.add(new Mesh(at,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const tt=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const rt=tt.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let st=0,at=rt.count;st<at;st++){const lt=st<at/2?_color1:_color2;rt.setXYZ(st,lt.r,lt.g,lt.b)}rt.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),tt.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(tt=10,rt=10,st=4473924,at=8947848){st=new Color$1(st),at=new Color$1(at);const lt=rt/2,dt=tt/rt,yt=tt/2,vt=[],_t=[];for(let Ct=0,Tt=0,$t=-yt;Ct<=rt;Ct++,$t+=dt){vt.push(-yt,0,$t,yt,0,$t),vt.push($t,0,-yt,$t,0,yt);const Rt=Ct===lt?st:at;Rt.toArray(_t,Tt),Tt+=3,Rt.toArray(_t,Tt),Tt+=3,Rt.toArray(_t,Tt),Tt+=3,Rt.toArray(_t,Tt),Tt+=3}const bt=new BufferGeometry;bt.setAttribute("position",new Float32BufferAttribute(vt,3)),bt.setAttribute("color",new Float32BufferAttribute(_t,3));const Mt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(bt,Mt),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(tt=10,rt=16,st=8,at=64,lt=4473924,dt=8947848){lt=new Color$1(lt),dt=new Color$1(dt);const yt=[],vt=[];if(rt>1)for(let Mt=0;Mt<rt;Mt++){const Ct=Mt/rt*(Math.PI*2),Tt=Math.sin(Ct)*tt,$t=Math.cos(Ct)*tt;yt.push(0,0,0),yt.push(Tt,0,$t);const Rt=Mt&1?lt:dt;vt.push(Rt.r,Rt.g,Rt.b),vt.push(Rt.r,Rt.g,Rt.b)}for(let Mt=0;Mt<st;Mt++){const Ct=Mt&1?lt:dt,Tt=tt-tt/st*Mt;for(let $t=0;$t<at;$t++){let Rt=$t/at*(Math.PI*2),Et=Math.sin(Rt)*Tt,wt=Math.cos(Rt)*Tt;yt.push(Et,0,wt),vt.push(Ct.r,Ct.g,Ct.b),Rt=($t+1)/at*(Math.PI*2),Et=Math.sin(Rt)*Tt,wt=Math.cos(Rt)*Tt,yt.push(Et,0,wt),vt.push(Ct.r,Ct.g,Ct.b)}}const _t=new BufferGeometry;_t.setAttribute("position",new Float32BufferAttribute(yt,3)),_t.setAttribute("color",new Float32BufferAttribute(vt,3));const bt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(_t,bt),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(tt,rt,st){super(),this.light=tt,this.matrix=tt.matrixWorld,this.matrixAutoUpdate=!1,this.color=st,this.type="DirectionalLightHelper",rt===void 0&&(rt=1);let at=new BufferGeometry;at.setAttribute("position",new Float32BufferAttribute([-rt,rt,0,rt,rt,0,rt,-rt,0,-rt,-rt,0,-rt,rt,0],3));const lt=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$2(at,lt),this.add(this.lightPlane),at=new BufferGeometry,at.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$2(at,lt),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(tt){const rt=new BufferGeometry,st=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),at=[],lt=[],dt={};yt("n1","n2"),yt("n2","n4"),yt("n4","n3"),yt("n3","n1"),yt("f1","f2"),yt("f2","f4"),yt("f4","f3"),yt("f3","f1"),yt("n1","f1"),yt("n2","f2"),yt("n3","f3"),yt("n4","f4"),yt("p","n1"),yt("p","n2"),yt("p","n3"),yt("p","n4"),yt("u1","u2"),yt("u2","u3"),yt("u3","u1"),yt("c","t"),yt("p","c"),yt("cn1","cn2"),yt("cn3","cn4"),yt("cf1","cf2"),yt("cf3","cf4");function yt($t,Rt){vt($t),vt(Rt)}function vt($t){at.push(0,0,0),lt.push(0,0,0),dt[$t]===void 0&&(dt[$t]=[]),dt[$t].push(at.length/3-1)}rt.setAttribute("position",new Float32BufferAttribute(at,3)),rt.setAttribute("color",new Float32BufferAttribute(lt,3)),super(rt,st),this.type="CameraHelper",this.camera=tt,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=tt.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=dt,this.update();const _t=new Color$1(16755200),bt=new Color$1(16711680),Mt=new Color$1(43775),Ct=new Color$1(16777215),Tt=new Color$1(3355443);this.setColors(_t,bt,Mt,Ct,Tt)}setColors(tt,rt,st,at,lt){const yt=this.geometry.getAttribute("color");yt.setXYZ(0,tt.r,tt.g,tt.b),yt.setXYZ(1,tt.r,tt.g,tt.b),yt.setXYZ(2,tt.r,tt.g,tt.b),yt.setXYZ(3,tt.r,tt.g,tt.b),yt.setXYZ(4,tt.r,tt.g,tt.b),yt.setXYZ(5,tt.r,tt.g,tt.b),yt.setXYZ(6,tt.r,tt.g,tt.b),yt.setXYZ(7,tt.r,tt.g,tt.b),yt.setXYZ(8,tt.r,tt.g,tt.b),yt.setXYZ(9,tt.r,tt.g,tt.b),yt.setXYZ(10,tt.r,tt.g,tt.b),yt.setXYZ(11,tt.r,tt.g,tt.b),yt.setXYZ(12,tt.r,tt.g,tt.b),yt.setXYZ(13,tt.r,tt.g,tt.b),yt.setXYZ(14,tt.r,tt.g,tt.b),yt.setXYZ(15,tt.r,tt.g,tt.b),yt.setXYZ(16,tt.r,tt.g,tt.b),yt.setXYZ(17,tt.r,tt.g,tt.b),yt.setXYZ(18,tt.r,tt.g,tt.b),yt.setXYZ(19,tt.r,tt.g,tt.b),yt.setXYZ(20,tt.r,tt.g,tt.b),yt.setXYZ(21,tt.r,tt.g,tt.b),yt.setXYZ(22,tt.r,tt.g,tt.b),yt.setXYZ(23,tt.r,tt.g,tt.b),yt.setXYZ(24,rt.r,rt.g,rt.b),yt.setXYZ(25,rt.r,rt.g,rt.b),yt.setXYZ(26,rt.r,rt.g,rt.b),yt.setXYZ(27,rt.r,rt.g,rt.b),yt.setXYZ(28,rt.r,rt.g,rt.b),yt.setXYZ(29,rt.r,rt.g,rt.b),yt.setXYZ(30,rt.r,rt.g,rt.b),yt.setXYZ(31,rt.r,rt.g,rt.b),yt.setXYZ(32,st.r,st.g,st.b),yt.setXYZ(33,st.r,st.g,st.b),yt.setXYZ(34,st.r,st.g,st.b),yt.setXYZ(35,st.r,st.g,st.b),yt.setXYZ(36,st.r,st.g,st.b),yt.setXYZ(37,st.r,st.g,st.b),yt.setXYZ(38,at.r,at.g,at.b),yt.setXYZ(39,at.r,at.g,at.b),yt.setXYZ(40,lt.r,lt.g,lt.b),yt.setXYZ(41,lt.r,lt.g,lt.b),yt.setXYZ(42,lt.r,lt.g,lt.b),yt.setXYZ(43,lt.r,lt.g,lt.b),yt.setXYZ(44,lt.r,lt.g,lt.b),yt.setXYZ(45,lt.r,lt.g,lt.b),yt.setXYZ(46,lt.r,lt.g,lt.b),yt.setXYZ(47,lt.r,lt.g,lt.b),yt.setXYZ(48,lt.r,lt.g,lt.b),yt.setXYZ(49,lt.r,lt.g,lt.b),yt.needsUpdate=!0}update(){const tt=this.geometry,rt=this.pointMap,st=1,at=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",rt,tt,_camera,0,0,-1),setPoint("t",rt,tt,_camera,0,0,1),setPoint("n1",rt,tt,_camera,-1,-1,-1),setPoint("n2",rt,tt,_camera,st,-1,-1),setPoint("n3",rt,tt,_camera,-1,at,-1),setPoint("n4",rt,tt,_camera,st,at,-1),setPoint("f1",rt,tt,_camera,-1,-1,1),setPoint("f2",rt,tt,_camera,st,-1,1),setPoint("f3",rt,tt,_camera,-1,at,1),setPoint("f4",rt,tt,_camera,st,at,1),setPoint("u1",rt,tt,_camera,st*.7,at*1.1,-1),setPoint("u2",rt,tt,_camera,-1*.7,at*1.1,-1),setPoint("u3",rt,tt,_camera,0,at*2,-1),setPoint("cf1",rt,tt,_camera,-1,0,1),setPoint("cf2",rt,tt,_camera,st,0,1),setPoint("cf3",rt,tt,_camera,0,-1,1),setPoint("cf4",rt,tt,_camera,0,at,1),setPoint("cn1",rt,tt,_camera,-1,0,-1),setPoint("cn2",rt,tt,_camera,st,0,-1),setPoint("cn3",rt,tt,_camera,0,-1,-1),setPoint("cn4",rt,tt,_camera,0,at,-1),tt.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(nt,tt,rt,st,at,lt,dt){_vector.set(at,lt,dt).unproject(st);const yt=tt[nt];if(yt!==void 0){const vt=rt.getAttribute("position");for(let _t=0,bt=yt.length;_t<bt;_t++)vt.setXYZ(yt[_t],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(tt,rt=16776960){const st=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),at=new Float32Array(8*3),lt=new BufferGeometry;lt.setIndex(new BufferAttribute(st,1)),lt.setAttribute("position",new BufferAttribute(at,3)),super(lt,new LineBasicMaterial({color:rt,toneMapped:!1})),this.object=tt,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(tt){if(tt!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const rt=_box.min,st=_box.max,at=this.geometry.attributes.position,lt=at.array;lt[0]=st.x,lt[1]=st.y,lt[2]=st.z,lt[3]=rt.x,lt[4]=st.y,lt[5]=st.z,lt[6]=rt.x,lt[7]=rt.y,lt[8]=st.z,lt[9]=st.x,lt[10]=rt.y,lt[11]=st.z,lt[12]=st.x,lt[13]=st.y,lt[14]=rt.z,lt[15]=rt.x,lt[16]=st.y,lt[17]=rt.z,lt[18]=rt.x,lt[19]=rt.y,lt[20]=rt.z,lt[21]=st.x,lt[22]=rt.y,lt[23]=rt.z,at.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(tt){return this.object=tt,this.update(),this}copy(tt,rt){return super.copy(tt,rt),this.object=tt.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(tt,rt=16776960){const st=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),at=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],lt=new BufferGeometry;lt.setIndex(new BufferAttribute(st,1)),lt.setAttribute("position",new Float32BufferAttribute(at,3)),super(lt,new LineBasicMaterial({color:rt,toneMapped:!1})),this.box=tt,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(tt){const rt=this.box;rt.isEmpty()||(rt.getCenter(this.position),rt.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(tt))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line$2{constructor(tt,rt=1,st=16776960){const at=st,lt=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],dt=new BufferGeometry;dt.setAttribute("position",new Float32BufferAttribute(lt,3)),dt.computeBoundingSphere(),super(dt,new LineBasicMaterial({color:at,toneMapped:!1})),this.type="PlaneHelper",this.plane=tt,this.size=rt;const yt=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],vt=new BufferGeometry;vt.setAttribute("position",new Float32BufferAttribute(yt,3)),vt.computeBoundingSphere(),this.add(new Mesh(vt,new MeshBasicMaterial({color:at,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(tt){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(tt)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(tt=new Vector3(0,0,1),rt=new Vector3(0,0,0),st=1,at=16776960,lt=st*.2,dt=lt*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(rt),this.line=new Line$2(_lineGeometry,new LineBasicMaterial({color:at,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:at,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(tt),this.setLength(st,lt,dt)}setDirection(tt){if(tt.y>.99999)this.quaternion.set(0,0,0,1);else if(tt.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(tt.z,0,-tt.x).normalize();const rt=Math.acos(tt.y);this.quaternion.setFromAxisAngle(_axis,rt)}}setLength(tt,rt=tt*.2,st=rt*.2){this.line.scale.set(1,Math.max(1e-4,tt-rt),1),this.line.updateMatrix(),this.cone.scale.set(st,rt,st),this.cone.position.y=tt,this.cone.updateMatrix()}setColor(tt){this.line.material.color.set(tt),this.cone.material.color.set(tt)}copy(tt){return super.copy(tt,!1),this.line.copy(tt.line),this.cone.copy(tt.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(tt=1){const rt=[0,0,0,tt,0,0,0,0,0,0,tt,0,0,0,0,0,0,tt],st=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],at=new BufferGeometry;at.setAttribute("position",new Float32BufferAttribute(rt,3)),at.setAttribute("color",new Float32BufferAttribute(st,3));const lt=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(at,lt),this.type="AxesHelper"}setColors(tt,rt,st){const at=new Color$1,lt=this.geometry.attributes.color.array;return at.set(tt),at.toArray(lt,0),at.toArray(lt,3),at.set(rt),at.toArray(lt,6),at.toArray(lt,9),at.set(st),at.toArray(lt,12),at.toArray(lt,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color$1,this.subPaths=[],this.currentPath=null}moveTo(tt,rt){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(tt,rt),this}lineTo(tt,rt){return this.currentPath.lineTo(tt,rt),this}quadraticCurveTo(tt,rt,st,at){return this.currentPath.quadraticCurveTo(tt,rt,st,at),this}bezierCurveTo(tt,rt,st,at,lt,dt){return this.currentPath.bezierCurveTo(tt,rt,st,at,lt,dt),this}splineThru(tt){return this.currentPath.splineThru(tt),this}toShapes(tt){function rt(wt){const Pt=[];for(let Ft=0,Nt=wt.length;Ft<Nt;Ft++){const Ot=wt[Ft],Bt=new Shape;Bt.curves=Ot.curves,Pt.push(Bt)}return Pt}function st(wt,Pt){const Ft=Pt.length;let Nt=!1;for(let Ot=Ft-1,Bt=0;Bt<Ft;Ot=Bt++){let Xt=Pt[Ot],Zt=Pt[Bt],rn=Zt.x-Xt.x,Gt=Zt.y-Xt.y;if(Math.abs(Gt)>Number.EPSILON){if(Gt<0&&(Xt=Pt[Bt],rn=-rn,Zt=Pt[Ot],Gt=-Gt),wt.y<Xt.y||wt.y>Zt.y)continue;if(wt.y===Xt.y){if(wt.x===Xt.x)return!0}else{const nn=Gt*(wt.x-Xt.x)-rn*(wt.y-Xt.y);if(nn===0)return!0;if(nn<0)continue;Nt=!Nt}}else{if(wt.y!==Xt.y)continue;if(Zt.x<=wt.x&&wt.x<=Xt.x||Xt.x<=wt.x&&wt.x<=Zt.x)return!0}}return Nt}const at=ShapeUtils.isClockWise,lt=this.subPaths;if(lt.length===0)return[];let dt,yt,vt;const _t=[];if(lt.length===1)return yt=lt[0],vt=new Shape,vt.curves=yt.curves,_t.push(vt),_t;let bt=!at(lt[0].getPoints());bt=tt?!bt:bt;const Mt=[],Ct=[];let Tt=[],$t=0,Rt;Ct[$t]=void 0,Tt[$t]=[];for(let wt=0,Pt=lt.length;wt<Pt;wt++)yt=lt[wt],Rt=yt.getPoints(),dt=at(Rt),dt=tt?!dt:dt,dt?(!bt&&Ct[$t]&&$t++,Ct[$t]={s:new Shape,p:Rt},Ct[$t].s.curves=yt.curves,bt&&$t++,Tt[$t]=[]):Tt[$t].push({h:yt,p:Rt[0]});if(!Ct[0])return rt(lt);if(Ct.length>1){let wt=!1,Pt=0;for(let Ft=0,Nt=Ct.length;Ft<Nt;Ft++)Mt[Ft]=[];for(let Ft=0,Nt=Ct.length;Ft<Nt;Ft++){const Ot=Tt[Ft];for(let Bt=0;Bt<Ot.length;Bt++){const Xt=Ot[Bt];let Zt=!0;for(let rn=0;rn<Ct.length;rn++)st(Xt.p,Ct[rn].p)&&(Ft!==rn&&Pt++,Zt?(Zt=!1,Mt[rn].push(Xt)):wt=!0);Zt&&Mt[Ft].push(Xt)}}Pt>0&&wt===!1&&(Tt=Mt)}let Et;for(let wt=0,Pt=Ct.length;wt<Pt;wt++){vt=Ct[wt].s,_t.push(vt),Et=Tt[wt];for(let Ft=0,Nt=Et.length;Ft<Nt;Ft++)vt.holes.push(Et[Ft].h)}return _t}}class Controls extends EventDispatcher{constructor(tt,rt=null){super(),this.object=tt,this.domElement=rt,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(tt=1,rt=1,st=1,at={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(tt,rt,{...at,count:st}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color:Color$1,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group:Group$1,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line:Line$2,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearDisplayP3ColorSpace,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,P3Primaries,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,Rec709Primaries,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement},Symbol.toStringTag,{value:"Module"}));var constants$1={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants$1.exports=reactReconcilerConstants_production_min;var constantsExports=constants$1.exports;function createStore$2(nt){let tt;const rt=new Set,st=(_t,bt)=>{const Mt=typeof _t=="function"?_t(tt):_t;if(Mt!==tt){const Ct=tt;tt=bt?Mt:Object.assign({},tt,Mt),rt.forEach(Tt=>Tt(tt,Ct))}},at=()=>tt,lt=(_t,bt=at,Mt=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let Ct=bt(tt);function Tt(){const $t=bt(tt);if(!Mt(Ct,$t)){const Rt=Ct;_t(Ct=$t,Rt)}}return rt.add(Tt),()=>rt.delete(Tt)},vt={setState:st,getState:at,subscribe:(_t,bt,Mt)=>bt||Mt?lt(_t,bt,Mt):(rt.add(_t),()=>rt.delete(_t)),destroy:()=>rt.clear()};return tt=nt(st,at,vt),vt}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$1=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create$1(nt){const tt=typeof nt=="function"?createStore$2(nt):nt,rt=(st=tt.getState,at=Object.is)=>{const[,lt]=reactExports.useReducer(Et=>Et+1,0),dt=tt.getState(),yt=reactExports.useRef(dt),vt=reactExports.useRef(st),_t=reactExports.useRef(at),bt=reactExports.useRef(!1),Mt=reactExports.useRef();Mt.current===void 0&&(Mt.current=st(dt));let Ct,Tt=!1;(yt.current!==dt||vt.current!==st||_t.current!==at||bt.current)&&(Ct=st(dt),Tt=!at(Mt.current,Ct)),useIsomorphicLayoutEffect$1(()=>{Tt&&(Mt.current=Ct),yt.current=dt,vt.current=st,_t.current=at,bt.current=!1});const $t=reactExports.useRef(dt);useIsomorphicLayoutEffect$1(()=>{const Et=()=>{try{const Pt=tt.getState(),Ft=vt.current(Pt);_t.current(Mt.current,Ft)||(yt.current=Pt,Mt.current=Ft,lt())}catch{bt.current=!0,lt()}},wt=tt.subscribe(Et);return tt.getState()!==$t.current&&Et(),wt},[]);const Rt=Tt?Ct:Mt.current;return reactExports.useDebugValue(Rt),Rt};return Object.assign(rt,tt),rt[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const st=[rt,tt];return{next(){const at=st.length<=0;return{value:st.shift(),done:at}}}},rt}var reactReconciler={exports:{}},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(nt){function tt(un,Tn){var Pn=un.length;un.push(Tn);e:for(;0<Pn;){var dn=Pn-1>>>1,Un=un[dn];if(0<at(Un,Tn))un[dn]=Tn,un[Pn]=Un,Pn=dn;else break e}}function rt(un){return un.length===0?null:un[0]}function st(un){if(un.length===0)return null;var Tn=un[0],Pn=un.pop();if(Pn!==Tn){un[0]=Pn;e:for(var dn=0,Un=un.length,qn=Un>>>1;dn<qn;){var In=2*(dn+1)-1,Wn=un[In],ar=In+1,fr=un[ar];if(0>at(Wn,Pn))ar<Un&&0>at(fr,Wn)?(un[dn]=fr,un[ar]=Pn,dn=ar):(un[dn]=Wn,un[In]=Pn,dn=In);else if(ar<Un&&0>at(fr,Pn))un[dn]=fr,un[ar]=Pn,dn=ar;else break e}}return Tn}function at(un,Tn){var Pn=un.sortIndex-Tn.sortIndex;return Pn!==0?Pn:un.id-Tn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var lt=performance;nt.unstable_now=function(){return lt.now()}}else{var dt=Date,yt=dt.now();nt.unstable_now=function(){return dt.now()-yt}}var vt=[],_t=[],bt=1,Mt=null,Ct=3,Tt=!1,$t=!1,Rt=!1,Et=typeof setTimeout=="function"?setTimeout:null,wt=typeof clearTimeout=="function"?clearTimeout:null,Pt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ft(un){for(var Tn=rt(_t);Tn!==null;){if(Tn.callback===null)st(_t);else if(Tn.startTime<=un)st(_t),Tn.sortIndex=Tn.expirationTime,tt(vt,Tn);else break;Tn=rt(_t)}}function Nt(un){if(Rt=!1,Ft(un),!$t)if(rt(vt)!==null)$t=!0,Cn(Ot);else{var Tn=rt(_t);Tn!==null&&Mn(Nt,Tn.startTime-un)}}function Ot(un,Tn){$t=!1,Rt&&(Rt=!1,wt(Zt),Zt=-1),Tt=!0;var Pn=Ct;try{for(Ft(Tn),Mt=rt(vt);Mt!==null&&(!(Mt.expirationTime>Tn)||un&&!nn());){var dn=Mt.callback;if(typeof dn=="function"){Mt.callback=null,Ct=Mt.priorityLevel;var Un=dn(Mt.expirationTime<=Tn);Tn=nt.unstable_now(),typeof Un=="function"?Mt.callback=Un:Mt===rt(vt)&&st(vt),Ft(Tn)}else st(vt);Mt=rt(vt)}if(Mt!==null)var qn=!0;else{var In=rt(_t);In!==null&&Mn(Nt,In.startTime-Tn),qn=!1}return qn}finally{Mt=null,Ct=Pn,Tt=!1}}var Bt=!1,Xt=null,Zt=-1,rn=5,Gt=-1;function nn(){return!(nt.unstable_now()-Gt<rn)}function cn(){if(Xt!==null){var un=nt.unstable_now();Gt=un;var Tn=!0;try{Tn=Xt(!0,un)}finally{Tn?an():(Bt=!1,Xt=null)}}else Bt=!1}var an;if(typeof Pt=="function")an=function(){Pt(cn)};else if(typeof MessageChannel<"u"){var mn=new MessageChannel,En=mn.port2;mn.port1.onmessage=cn,an=function(){En.postMessage(null)}}else an=function(){Et(cn,0)};function Cn(un){Xt=un,Bt||(Bt=!0,an())}function Mn(un,Tn){Zt=Et(function(){un(nt.unstable_now())},Tn)}nt.unstable_IdlePriority=5,nt.unstable_ImmediatePriority=1,nt.unstable_LowPriority=4,nt.unstable_NormalPriority=3,nt.unstable_Profiling=null,nt.unstable_UserBlockingPriority=2,nt.unstable_cancelCallback=function(un){un.callback=null},nt.unstable_continueExecution=function(){$t||Tt||($t=!0,Cn(Ot))},nt.unstable_forceFrameRate=function(un){0>un||125<un?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rn=0<un?Math.floor(1e3/un):5},nt.unstable_getCurrentPriorityLevel=function(){return Ct},nt.unstable_getFirstCallbackNode=function(){return rt(vt)},nt.unstable_next=function(un){switch(Ct){case 1:case 2:case 3:var Tn=3;break;default:Tn=Ct}var Pn=Ct;Ct=Tn;try{return un()}finally{Ct=Pn}},nt.unstable_pauseExecution=function(){},nt.unstable_requestPaint=function(){},nt.unstable_runWithPriority=function(un,Tn){switch(un){case 1:case 2:case 3:case 4:case 5:break;default:un=3}var Pn=Ct;Ct=un;try{return Tn()}finally{Ct=Pn}},nt.unstable_scheduleCallback=function(un,Tn,Pn){var dn=nt.unstable_now();switch(typeof Pn=="object"&&Pn!==null?(Pn=Pn.delay,Pn=typeof Pn=="number"&&0<Pn?dn+Pn:dn):Pn=dn,un){case 1:var Un=-1;break;case 2:Un=250;break;case 5:Un=1073741823;break;case 4:Un=1e4;break;default:Un=5e3}return Un=Pn+Un,un={id:bt++,callback:Tn,priorityLevel:un,startTime:Pn,expirationTime:Un,sortIndex:-1},Pn>dn?(un.sortIndex=Pn,tt(_t,un),rt(vt)===null&&un===rt(_t)&&(Rt?(wt(Zt),Zt=-1):Rt=!0,Mn(Nt,Pn-dn))):(un.sortIndex=Un,tt(vt,un),$t||Tt||($t=!0,Cn(Ot))),un},nt.unstable_shouldYield=nn,nt.unstable_wrapCallback=function(un){var Tn=Ct;return function(){var Pn=Ct;Ct=Tn;try{return un.apply(this,arguments)}finally{Ct=Pn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function nt(tt){var rt={},st=reactExports,at=schedulerExports,lt=Object.assign;function dt(Ht){for(var en="https://reactjs.org/docs/error-decoder.html?invariant="+Ht,ln=1;ln<arguments.length;ln++)en+="&args[]="+encodeURIComponent(arguments[ln]);return"Minified React error #"+Ht+"; visit "+en+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yt=st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vt=Symbol.for("react.element"),_t=Symbol.for("react.portal"),bt=Symbol.for("react.fragment"),Mt=Symbol.for("react.strict_mode"),Ct=Symbol.for("react.profiler"),Tt=Symbol.for("react.provider"),$t=Symbol.for("react.context"),Rt=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),wt=Symbol.for("react.suspense_list"),Pt=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Nt=Symbol.for("react.offscreen"),Ot=Symbol.iterator;function Bt(Ht){return Ht===null||typeof Ht!="object"?null:(Ht=Ot&&Ht[Ot]||Ht["@@iterator"],typeof Ht=="function"?Ht:null)}function Xt(Ht){if(Ht==null)return null;if(typeof Ht=="function")return Ht.displayName||Ht.name||null;if(typeof Ht=="string")return Ht;switch(Ht){case bt:return"Fragment";case _t:return"Portal";case Ct:return"Profiler";case Mt:return"StrictMode";case Et:return"Suspense";case wt:return"SuspenseList"}if(typeof Ht=="object")switch(Ht.$$typeof){case $t:return(Ht.displayName||"Context")+".Consumer";case Tt:return(Ht._context.displayName||"Context")+".Provider";case Rt:var en=Ht.render;return Ht=Ht.displayName,Ht||(Ht=en.displayName||en.name||"",Ht=Ht!==""?"ForwardRef("+Ht+")":"ForwardRef"),Ht;case Pt:return en=Ht.displayName||null,en!==null?en:Xt(Ht.type)||"Memo";case Ft:en=Ht._payload,Ht=Ht._init;try{return Xt(Ht(en))}catch{}}return null}function Zt(Ht){var en=Ht.type;switch(Ht.tag){case 24:return"Cache";case 9:return(en.displayName||"Context")+".Consumer";case 10:return(en._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Ht=en.render,Ht=Ht.displayName||Ht.name||"",en.displayName||(Ht!==""?"ForwardRef("+Ht+")":"ForwardRef");case 7:return"Fragment";case 5:return en;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xt(en);case 8:return en===Mt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof en=="function")return en.displayName||en.name||null;if(typeof en=="string")return en}return null}function rn(Ht){var en=Ht,ln=Ht;if(Ht.alternate)for(;en.return;)en=en.return;else{Ht=en;do en=Ht,en.flags&4098&&(ln=en.return),Ht=en.return;while(Ht)}return en.tag===3?ln:null}function Gt(Ht){if(rn(Ht)!==Ht)throw Error(dt(188))}function nn(Ht){var en=Ht.alternate;if(!en){if(en=rn(Ht),en===null)throw Error(dt(188));return en!==Ht?null:Ht}for(var ln=Ht,An=en;;){var jn=ln.return;if(jn===null)break;var nr=jn.alternate;if(nr===null){if(An=jn.return,An!==null){ln=An;continue}break}if(jn.child===nr.child){for(nr=jn.child;nr;){if(nr===ln)return Gt(jn),Ht;if(nr===An)return Gt(jn),en;nr=nr.sibling}throw Error(dt(188))}if(ln.return!==An.return)ln=jn,An=nr;else{for(var Lr=!1,Es=jn.child;Es;){if(Es===ln){Lr=!0,ln=jn,An=nr;break}if(Es===An){Lr=!0,An=jn,ln=nr;break}Es=Es.sibling}if(!Lr){for(Es=nr.child;Es;){if(Es===ln){Lr=!0,ln=nr,An=jn;break}if(Es===An){Lr=!0,An=nr,ln=jn;break}Es=Es.sibling}if(!Lr)throw Error(dt(189))}}if(ln.alternate!==An)throw Error(dt(190))}if(ln.tag!==3)throw Error(dt(188));return ln.stateNode.current===ln?Ht:en}function cn(Ht){return Ht=nn(Ht),Ht!==null?an(Ht):null}function an(Ht){if(Ht.tag===5||Ht.tag===6)return Ht;for(Ht=Ht.child;Ht!==null;){var en=an(Ht);if(en!==null)return en;Ht=Ht.sibling}return null}function mn(Ht){if(Ht.tag===5||Ht.tag===6)return Ht;for(Ht=Ht.child;Ht!==null;){if(Ht.tag!==4){var en=mn(Ht);if(en!==null)return en}Ht=Ht.sibling}return null}var En=Array.isArray,Cn=tt.getPublicInstance,Mn=tt.getRootHostContext,un=tt.getChildHostContext,Tn=tt.prepareForCommit,Pn=tt.resetAfterCommit,dn=tt.createInstance,Un=tt.appendInitialChild,qn=tt.finalizeInitialChildren,In=tt.prepareUpdate,Wn=tt.shouldSetTextContent,ar=tt.createTextInstance,fr=tt.scheduleTimeout,mr=tt.cancelTimeout,vr=tt.noTimeout,Ar=tt.isPrimaryRenderer,$r=tt.supportsMutation,Mr=tt.supportsPersistence,Jn=tt.supportsHydration,hr=tt.getInstanceFromNode,wr=tt.preparePortalMount,Nr=tt.getCurrentEventPriority,Fr=tt.detachDeletedInstance,Yr=tt.supportsMicrotasks,cs=tt.scheduleMicrotask,cr=tt.supportsTestSelectors,Qn=tt.findFiberRoot,_r=tt.getBoundingRect,Ir=tt.getTextContent,pr=tt.isHiddenSubtree,Tr=tt.matchAccessibilityRole,Wr=tt.setFocusIfFocusable,Kn=tt.setupIntersectionObserver,rr=tt.appendChild,ur=tt.appendChildToContainer,Sr=tt.commitTextUpdate,gr=tt.commitMount,Gr=tt.commitUpdate,jr=tt.insertBefore,er=tt.insertInContainerBefore,yr=tt.removeChild,Er=tt.removeChildFromContainer,Hr=tt.resetTextContent,lr=tt.hideInstance,Br=tt.hideTextInstance,Hn=tt.unhideInstance,kr=tt.unhideTextInstance,Cs=tt.clearContainer,Fn=tt.cloneInstance,Ur=tt.createContainerChildSet,Vr=tt.appendChildToContainerChildSet,dr=tt.finalizeContainerChildren,Cr=tt.replaceContainerChildren,hs=tt.cloneHiddenInstance,ro=tt.cloneHiddenTextInstance,oo=tt.canHydrateInstance,ao=tt.canHydrateTextInstance,Uo=tt.canHydrateSuspenseInstance,gu=tt.isSuspenseInstancePending,yl=tt.isSuspenseInstanceFallback,_l=tt.registerSuspenseInstanceRetry,Vo=tt.getNextHydratableSibling,uu=tt.getFirstHydratableChild,Hl=tt.getFirstHydratableChildWithinContainer,Ku=tt.getFirstHydratableChildWithinSuspenseInstance,ju=tt.hydrateInstance,au=tt.hydrateTextInstance,ou=tt.hydrateSuspenseInstance,ru=tt.getNextHydratableInstanceAfterSuspenseInstance,br=tt.commitHydratedContainer,ls=tt.commitHydratedSuspenseInstance,Ns=tt.clearSuspenseBoundary,$a=tt.clearSuspenseBoundaryFromContainer,Ms=tt.shouldDeleteUnhydratedTailInstances,io=tt.didNotMatchHydratedContainerTextInstance,lo=tt.didNotMatchHydratedTextInstance,mo;function go(Ht){if(mo===void 0)try{throw Error()}catch(ln){var en=ln.stack.trim().match(/\n( *(at )?)/);mo=en&&en[1]||""}return`
`+mo+Ht}var Io=!1;function ko(Ht,en){if(!Ht||Io)return"";Io=!0;var ln=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(en)if(en=function(){throw Error()},Object.defineProperty(en.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(en,[])}catch(so){var An=so}Reflect.construct(Ht,[],en)}else{try{en.call()}catch(so){An=so}Ht.call(en.prototype)}else{try{throw Error()}catch(so){An=so}Ht()}}catch(so){if(so&&An&&typeof so.stack=="string"){for(var jn=so.stack.split(`
`),nr=An.stack.split(`
`),Lr=jn.length-1,Es=nr.length-1;1<=Lr&&0<=Es&&jn[Lr]!==nr[Es];)Es--;for(;1<=Lr&&0<=Es;Lr--,Es--)if(jn[Lr]!==nr[Es]){if(Lr!==1||Es!==1)do if(Lr--,Es--,0>Es||jn[Lr]!==nr[Es]){var to=`
`+jn[Lr].replace(" at new "," at ");return Ht.displayName&&to.includes("<anonymous>")&&(to=to.replace("<anonymous>",Ht.displayName)),to}while(1<=Lr&&0<=Es);break}}}finally{Io=!1,Error.prepareStackTrace=ln}return(Ht=Ht?Ht.displayName||Ht.name:"")?go(Ht):""}var xo=Object.prototype.hasOwnProperty,Kl=[],Zl=-1;function Jl(Ht){return{current:Ht}}function uo(Ht){0>Zl||(Ht.current=Kl[Zl],Kl[Zl]=null,Zl--)}function vo(Ht,en){Zl++,Kl[Zl]=Ht.current,Ht.current=en}var fo={},Wl=Jl(fo),Ko=Jl(!1),vu=fo;function Lu(Ht,en){var ln=Ht.type.contextTypes;if(!ln)return fo;var An=Ht.stateNode;if(An&&An.__reactInternalMemoizedUnmaskedChildContext===en)return An.__reactInternalMemoizedMaskedChildContext;var jn={},nr;for(nr in ln)jn[nr]=en[nr];return An&&(Ht=Ht.stateNode,Ht.__reactInternalMemoizedUnmaskedChildContext=en,Ht.__reactInternalMemoizedMaskedChildContext=jn),jn}function eu(Ht){return Ht=Ht.childContextTypes,Ht!=null}function op(){uo(Ko),uo(Wl)}function lu(Ht,en,ln){if(Wl.current!==fo)throw Error(dt(168));vo(Wl,en),vo(Ko,ln)}function Tu(Ht,en,ln){var An=Ht.stateNode;if(en=en.childContextTypes,typeof An.getChildContext!="function")return ln;An=An.getChildContext();for(var jn in An)if(!(jn in en))throw Error(dt(108,Zt(Ht)||"Unknown",jn));return lt({},ln,An)}function Xu(Ht){return Ht=(Ht=Ht.stateNode)&&Ht.__reactInternalMemoizedMergedChildContext||fo,vu=Wl.current,vo(Wl,Ht),vo(Ko,Ko.current),!0}function iu(Ht,en,ln){var An=Ht.stateNode;if(!An)throw Error(dt(169));ln?(Ht=Tu(Ht,en,vu),An.__reactInternalMemoizedMergedChildContext=Ht,uo(Ko),uo(Wl),vo(Wl,Ht)):uo(Ko),vo(Ko,ln)}var _u=Math.clz32?Math.clz32:Wy,xp=Math.log,bp=Math.LN2;function Wy(Ht){return Ht>>>=0,Ht===0?32:31-(xp(Ht)/bp|0)|0}var lp=64,lm=4194304;function Yu(Ht){switch(Ht&-Ht){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Ht&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Ht&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Ht}}function Om(Ht,en){var ln=Ht.pendingLanes;if(ln===0)return 0;var An=0,jn=Ht.suspendedLanes,nr=Ht.pingedLanes,Lr=ln&268435455;if(Lr!==0){var Es=Lr&~jn;Es!==0?An=Yu(Es):(nr&=Lr,nr!==0&&(An=Yu(nr)))}else Lr=ln&~jn,Lr!==0?An=Yu(Lr):nr!==0&&(An=Yu(nr));if(An===0)return 0;if(en!==0&&en!==An&&!(en&jn)&&(jn=An&-An,nr=en&-en,jn>=nr||jn===16&&(nr&4194240)!==0))return en;if(An&4&&(An|=ln&16),en=Ht.entangledLanes,en!==0)for(Ht=Ht.entanglements,en&=An;0<en;)ln=31-_u(en),jn=1<<ln,An|=Ht[ln],en&=~jn;return An}function Sv(Ht,en){switch(Ht){case 1:case 2:case 4:return en+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return en+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mp(Ht,en){for(var ln=Ht.suspendedLanes,An=Ht.pingedLanes,jn=Ht.expirationTimes,nr=Ht.pendingLanes;0<nr;){var Lr=31-_u(nr),Es=1<<Lr,to=jn[Lr];to===-1?(!(Es&ln)||Es&An)&&(jn[Lr]=Sv(Es,en)):to<=en&&(Ht.expiredLanes|=Es),nr&=~Es}}function Du(Ht){return Ht=Ht.pendingLanes&-1073741825,Ht!==0?Ht:Ht&1073741824?1073741824:0}function Fu(Ht){for(var en=[],ln=0;31>ln;ln++)en.push(Ht);return en}function Vl(Ht,en,ln){Ht.pendingLanes|=en,en!==536870912&&(Ht.suspendedLanes=0,Ht.pingedLanes=0),Ht=Ht.eventTimes,en=31-_u(en),Ht[en]=ln}function cm(Ht,en){var ln=Ht.pendingLanes&~en;Ht.pendingLanes=en,Ht.suspendedLanes=0,Ht.pingedLanes=0,Ht.expiredLanes&=en,Ht.mutableReadLanes&=en,Ht.entangledLanes&=en,en=Ht.entanglements;var An=Ht.eventTimes;for(Ht=Ht.expirationTimes;0<ln;){var jn=31-_u(ln),nr=1<<jn;en[jn]=0,An[jn]=-1,Ht[jn]=-1,ln&=~nr}}function um(Ht,en){var ln=Ht.entangledLanes|=en;for(Ht=Ht.entanglements;ln;){var An=31-_u(ln),jn=1<<An;jn&en|Ht[An]&en&&(Ht[An]|=en),ln&=~jn}}var Xl=0;function Dp(Ht){return Ht&=-Ht,1<Ht?4<Ht?Ht&268435455?16:536870912:4:1}var Lm=at.unstable_scheduleCallback,Dm=at.unstable_cancelCallback,Kp=at.unstable_shouldYield,Hy=at.unstable_requestPaint,Su=at.unstable_now,qu=at.unstable_ImmediatePriority,dm=at.unstable_UserBlockingPriority,u0=at.unstable_NormalPriority,Ky=at.unstable_IdlePriority,Tp=null,tp=null;function Z0(Ht){if(tp&&typeof tp.onCommitFiberRoot=="function")try{tp.onCommitFiberRoot(Tp,Ht,void 0,(Ht.current.flags&128)===128)}catch{}}function Xy(Ht,en){return Ht===en&&(Ht!==0||1/Ht===1/en)||Ht!==Ht&&en!==en}var np=typeof Object.is=="function"?Object.is:Xy,Sp=null,Fm=!1,d0=!1;function J0(Ht){Sp===null?Sp=[Ht]:Sp.push(Ht)}function Yy(Ht){Fm=!0,J0(Ht)}function cp(){if(!d0&&Sp!==null){d0=!0;var Ht=0,en=Xl;try{var ln=Sp;for(Xl=1;Ht<ln.length;Ht++){var An=ln[Ht];do An=An(!0);while(An!==null)}Sp=null,Fm=!1}catch(jn){throw Sp!==null&&(Sp=Sp.slice(Ht+1)),Lm(qu,cp),jn}finally{Xl=en,d0=!1}}return null}var qy=yt.ReactCurrentBatchConfig;function km(Ht,en){if(np(Ht,en))return!0;if(typeof Ht!="object"||Ht===null||typeof en!="object"||en===null)return!1;var ln=Object.keys(Ht),An=Object.keys(en);if(ln.length!==An.length)return!1;for(An=0;An<ln.length;An++){var jn=ln[An];if(!xo.call(en,jn)||!np(Ht[jn],en[jn]))return!1}return!0}function Zy(Ht){switch(Ht.tag){case 5:return go(Ht.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return Ht=ko(Ht.type,!1),Ht;case 11:return Ht=ko(Ht.type.render,!1),Ht;case 1:return Ht=ko(Ht.type,!0),Ht;default:return""}}function rp(Ht,en){if(Ht&&Ht.defaultProps){en=lt({},en),Ht=Ht.defaultProps;for(var ln in Ht)en[ln]===void 0&&(en[ln]=Ht[ln]);return en}return en}var Nm=Jl(null),Bm=null,Xp=null,Fp=null;function f0(){Fp=Xp=Bm=null}function Q0(Ht,en,ln){Ar?(vo(Nm,en._currentValue),en._currentValue=ln):(vo(Nm,en._currentValue2),en._currentValue2=ln)}function h0(Ht){var en=Nm.current;uo(Nm),Ar?Ht._currentValue=en:Ht._currentValue2=en}function Yp(Ht,en,ln){for(;Ht!==null;){var An=Ht.alternate;if((Ht.childLanes&en)!==en?(Ht.childLanes|=en,An!==null&&(An.childLanes|=en)):An!==null&&(An.childLanes&en)!==en&&(An.childLanes|=en),Ht===ln)break;Ht=Ht.return}}function kp(Ht,en){Bm=Ht,Fp=Xp=null,Ht=Ht.dependencies,Ht!==null&&Ht.firstContext!==null&&(Ht.lanes&en&&(ku=!0),Ht.firstContext=null)}function Pu(Ht){var en=Ar?Ht._currentValue:Ht._currentValue2;if(Fp!==Ht)if(Ht={context:Ht,memoizedValue:en,next:null},Xp===null){if(Bm===null)throw Error(dt(308));Xp=Ht,Bm.dependencies={lanes:0,firstContext:Ht}}else Xp=Xp.next=Ht;return en}var up=null,Ap=!1;function p0(Ht){Ht.updateQueue={baseState:Ht.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ey(Ht,en){Ht=Ht.updateQueue,en.updateQueue===Ht&&(en.updateQueue={baseState:Ht.baseState,firstBaseUpdate:Ht.firstBaseUpdate,lastBaseUpdate:Ht.lastBaseUpdate,shared:Ht.shared,effects:Ht.effects})}function Vu(Ht,en){return{eventTime:Ht,lane:en,tag:0,payload:null,callback:null,next:null}}function Rp(Ht,en){var ln=Ht.updateQueue;ln!==null&&(ln=ln.shared,Cu!==null&&Ht.mode&1&&!(zl&2)?(Ht=ln.interleaved,Ht===null?(en.next=en,up===null?up=[ln]:up.push(ln)):(en.next=Ht.next,Ht.next=en),ln.interleaved=en):(Ht=ln.pending,Ht===null?en.next=en:(en.next=Ht.next,Ht.next=en),ln.pending=en))}function fm(Ht,en,ln){if(en=en.updateQueue,en!==null&&(en=en.shared,(ln&4194240)!==0)){var An=en.lanes;An&=Ht.pendingLanes,ln|=An,en.lanes=ln,um(Ht,ln)}}function m0(Ht,en){var ln=Ht.updateQueue,An=Ht.alternate;if(An!==null&&(An=An.updateQueue,ln===An)){var jn=null,nr=null;if(ln=ln.firstBaseUpdate,ln!==null){do{var Lr={eventTime:ln.eventTime,lane:ln.lane,tag:ln.tag,payload:ln.payload,callback:ln.callback,next:null};nr===null?jn=nr=Lr:nr=nr.next=Lr,ln=ln.next}while(ln!==null);nr===null?jn=nr=en:nr=nr.next=en}else jn=nr=en;ln={baseState:An.baseState,firstBaseUpdate:jn,lastBaseUpdate:nr,shared:An.shared,effects:An.effects},Ht.updateQueue=ln;return}Ht=ln.lastBaseUpdate,Ht===null?ln.firstBaseUpdate=en:Ht.next=en,ln.lastBaseUpdate=en}function Um(Ht,en,ln,An){var jn=Ht.updateQueue;Ap=!1;var nr=jn.firstBaseUpdate,Lr=jn.lastBaseUpdate,Es=jn.shared.pending;if(Es!==null){jn.shared.pending=null;var to=Es,so=to.next;to.next=null,Lr===null?nr=so:Lr.next=so,Lr=to;var _o=Ht.alternate;_o!==null&&(_o=_o.updateQueue,Es=_o.lastBaseUpdate,Es!==Lr&&(Es===null?_o.firstBaseUpdate=so:Es.next=so,_o.lastBaseUpdate=to))}if(nr!==null){var wl=jn.baseState;Lr=0,_o=so=to=null,Es=nr;do{var Xo=Es.lane,hu=Es.eventTime;if((An&Xo)===Xo){_o!==null&&(_o=_o.next={eventTime:hu,lane:0,tag:Es.tag,payload:Es.payload,callback:Es.callback,next:null});e:{var wo=Ht,zu=Es;switch(Xo=en,hu=ln,zu.tag){case 1:if(wo=zu.payload,typeof wo=="function"){wl=wo.call(hu,wl,Xo);break e}wl=wo;break e;case 3:wo.flags=wo.flags&-65537|128;case 0:if(wo=zu.payload,Xo=typeof wo=="function"?wo.call(hu,wl,Xo):wo,Xo==null)break e;wl=lt({},wl,Xo);break e;case 2:Ap=!0}}Es.callback!==null&&Es.lane!==0&&(Ht.flags|=64,Xo=jn.effects,Xo===null?jn.effects=[Es]:Xo.push(Es))}else hu={eventTime:hu,lane:Xo,tag:Es.tag,payload:Es.payload,callback:Es.callback,next:null},_o===null?(so=_o=hu,to=wl):_o=_o.next=hu,Lr|=Xo;if(Es=Es.next,Es===null){if(Es=jn.shared.pending,Es===null)break;Xo=Es,Es=Xo.next,Xo.next=null,jn.lastBaseUpdate=Xo,jn.shared.pending=null}}while(!0);if(_o===null&&(to=wl),jn.baseState=to,jn.firstBaseUpdate=so,jn.lastBaseUpdate=_o,en=jn.shared.interleaved,en!==null){jn=en;do Lr|=jn.lane,jn=jn.next;while(jn!==en)}else nr===null&&(jn.shared.lanes=0);l0|=Lr,Ht.lanes=Lr,Ht.memoizedState=wl}}function ty(Ht,en,ln){if(Ht=en.effects,en.effects=null,Ht!==null)for(en=0;en<Ht.length;en++){var An=Ht[en],jn=An.callback;if(jn!==null){if(An.callback=null,An=ln,typeof jn!="function")throw Error(dt(191,jn));jn.call(An)}}}var ny=new st.Component().refs;function g0(Ht,en,ln,An){en=Ht.memoizedState,ln=ln(An,en),ln=ln==null?en:lt({},en,ln),Ht.memoizedState=ln,Ht.lanes===0&&(Ht.updateQueue.baseState=ln)}var Np={isMounted:function(Ht){return(Ht=Ht._reactInternals)?rn(Ht)===Ht:!1},enqueueSetState:function(Ht,en,ln){Ht=Ht._reactInternals;var An=Hu(),jn=im(Ht),nr=Vu(An,jn);nr.payload=en,ln!=null&&(nr.callback=ln),Rp(Ht,nr),en=yp(Ht,jn,An),en!==null&&fm(en,Ht,jn)},enqueueReplaceState:function(Ht,en,ln){Ht=Ht._reactInternals;var An=Hu(),jn=im(Ht),nr=Vu(An,jn);nr.tag=1,nr.payload=en,ln!=null&&(nr.callback=ln),Rp(Ht,nr),en=yp(Ht,jn,An),en!==null&&fm(en,Ht,jn)},enqueueForceUpdate:function(Ht,en){Ht=Ht._reactInternals;var ln=Hu(),An=im(Ht),jn=Vu(ln,An);jn.tag=2,en!=null&&(jn.callback=en),Rp(Ht,jn),en=yp(Ht,An,ln),en!==null&&fm(en,Ht,An)}};function ry(Ht,en,ln,An,jn,nr,Lr){return Ht=Ht.stateNode,typeof Ht.shouldComponentUpdate=="function"?Ht.shouldComponentUpdate(An,nr,Lr):en.prototype&&en.prototype.isPureReactComponent?!km(ln,An)||!km(jn,nr):!0}function iy(Ht,en,ln){var An=!1,jn=fo,nr=en.contextType;return typeof nr=="object"&&nr!==null?nr=Pu(nr):(jn=eu(en)?vu:Wl.current,An=en.contextTypes,nr=(An=An!=null)?Lu(Ht,jn):fo),en=new en(ln,nr),Ht.memoizedState=en.state!==null&&en.state!==void 0?en.state:null,en.updater=Np,Ht.stateNode=en,en._reactInternals=Ht,An&&(Ht=Ht.stateNode,Ht.__reactInternalMemoizedUnmaskedChildContext=jn,Ht.__reactInternalMemoizedMaskedChildContext=nr),en}function sy(Ht,en,ln,An){Ht=en.state,typeof en.componentWillReceiveProps=="function"&&en.componentWillReceiveProps(ln,An),typeof en.UNSAFE_componentWillReceiveProps=="function"&&en.UNSAFE_componentWillReceiveProps(ln,An),en.state!==Ht&&Np.enqueueReplaceState(en,en.state,null)}function y0(Ht,en,ln,An){var jn=Ht.stateNode;jn.props=ln,jn.state=Ht.memoizedState,jn.refs=ny,p0(Ht);var nr=en.contextType;typeof nr=="object"&&nr!==null?jn.context=Pu(nr):(nr=eu(en)?vu:Wl.current,jn.context=Lu(Ht,nr)),jn.state=Ht.memoizedState,nr=en.getDerivedStateFromProps,typeof nr=="function"&&(g0(Ht,en,nr,ln),jn.state=Ht.memoizedState),typeof en.getDerivedStateFromProps=="function"||typeof jn.getSnapshotBeforeUpdate=="function"||typeof jn.UNSAFE_componentWillMount!="function"&&typeof jn.componentWillMount!="function"||(en=jn.state,typeof jn.componentWillMount=="function"&&jn.componentWillMount(),typeof jn.UNSAFE_componentWillMount=="function"&&jn.UNSAFE_componentWillMount(),en!==jn.state&&Np.enqueueReplaceState(jn,jn.state,null),Um(Ht,ln,jn,An),jn.state=Ht.memoizedState),typeof jn.componentDidMount=="function"&&(Ht.flags|=4194308)}var dp=[],$p=0,zm=null,jm=0,Zu=[],Ju=0,Bp=null,Ep=1,wp="";function Up(Ht,en){dp[$p++]=jm,dp[$p++]=zm,zm=Ht,jm=en}function hm(Ht,en,ln){Zu[Ju++]=Ep,Zu[Ju++]=wp,Zu[Ju++]=Bp,Bp=Ht;var An=Ep;Ht=wp;var jn=32-_u(An)-1;An&=~(1<<jn),ln+=1;var nr=32-_u(en)+jn;if(30<nr){var Lr=jn-jn%5;nr=(An&(1<<Lr)-1).toString(32),An>>=Lr,jn-=Lr,Ep=1<<32-_u(en)+jn|ln<<jn|An,wp=nr+Ht}else Ep=1<<nr|ln<<jn|An,wp=Ht}function v0(Ht){Ht.return!==null&&(Up(Ht,1),hm(Ht,1,0))}function _0(Ht){for(;Ht===zm;)zm=dp[--$p],dp[$p]=null,jm=dp[--$p],dp[$p]=null;for(;Ht===Bp;)Bp=Zu[--Ju],Zu[Ju]=null,wp=Zu[--Ju],Zu[Ju]=null,Ep=Zu[--Ju],Zu[Ju]=null}var Eu=null,Uu=null,du=!1,qp=!1,Gu=null;function x0(Ht,en){var ln=vp(5,null,null,0);ln.elementType="DELETED",ln.stateNode=en,ln.return=Ht,en=Ht.deletions,en===null?(Ht.deletions=[ln],Ht.flags|=16):en.push(ln)}function ay(Ht,en){switch(Ht.tag){case 5:return en=oo(en,Ht.type,Ht.pendingProps),en!==null?(Ht.stateNode=en,Eu=Ht,Uu=uu(en),!0):!1;case 6:return en=ao(en,Ht.pendingProps),en!==null?(Ht.stateNode=en,Eu=Ht,Uu=null,!0):!1;case 13:if(en=Uo(en),en!==null){var ln=Bp!==null?{id:Ep,overflow:wp}:null;return Ht.memoizedState={dehydrated:en,treeContext:ln,retryLane:1073741824},ln=vp(18,null,null,0),ln.stateNode=en,ln.return=Ht,Ht.child=ln,Eu=Ht,Uu=null,!0}return!1;default:return!1}}function b0(Ht){return(Ht.mode&1)!==0&&(Ht.flags&128)===0}function S0(Ht){if(du){var en=Uu;if(en){var ln=en;if(!ay(Ht,en)){if(b0(Ht))throw Error(dt(418));en=Vo(ln);var An=Eu;en&&ay(Ht,en)?x0(An,ln):(Ht.flags=Ht.flags&-4097|2,du=!1,Eu=Ht)}}else{if(b0(Ht))throw Error(dt(418));Ht.flags=Ht.flags&-4097|2,du=!1,Eu=Ht}}}function oy(Ht){for(Ht=Ht.return;Ht!==null&&Ht.tag!==5&&Ht.tag!==3&&Ht.tag!==13;)Ht=Ht.return;Eu=Ht}function Vm(Ht){if(!Jn||Ht!==Eu)return!1;if(!du)return oy(Ht),du=!0,!1;if(Ht.tag!==3&&(Ht.tag!==5||Ms(Ht.type)&&!Wn(Ht.type,Ht.memoizedProps))){var en=Uu;if(en){if(b0(Ht)){for(Ht=Uu;Ht;)Ht=Vo(Ht);throw Error(dt(418))}for(;en;)x0(Ht,en),en=Vo(en)}}if(oy(Ht),Ht.tag===13){if(!Jn)throw Error(dt(316));if(Ht=Ht.memoizedState,Ht=Ht!==null?Ht.dehydrated:null,!Ht)throw Error(dt(317));Uu=ru(Ht)}else Uu=Eu?Vo(Ht.stateNode):null;return!0}function fp(){Jn&&(Uu=Eu=null,qp=du=!1)}function E0(Ht){Gu===null?Gu=[Ht]:Gu.push(Ht)}function Zp(Ht,en,ln){if(Ht=ln.ref,Ht!==null&&typeof Ht!="function"&&typeof Ht!="object"){if(ln._owner){if(ln=ln._owner,ln){if(ln.tag!==1)throw Error(dt(309));var An=ln.stateNode}if(!An)throw Error(dt(147,Ht));var jn=An,nr=""+Ht;return en!==null&&en.ref!==null&&typeof en.ref=="function"&&en.ref._stringRef===nr?en.ref:(en=function(Lr){var Es=jn.refs;Es===ny&&(Es=jn.refs={}),Lr===null?delete Es[nr]:Es[nr]=Lr},en._stringRef=nr,en)}if(typeof Ht!="string")throw Error(dt(284));if(!ln._owner)throw Error(dt(290,Ht))}return Ht}function pm(Ht,en){throw Ht=Object.prototype.toString.call(en),Error(dt(31,Ht==="[object Object]"?"object with keys {"+Object.keys(en).join(", ")+"}":Ht))}function w0(Ht){var en=Ht._init;return en(Ht._payload)}function ly(Ht){function en(Xs,Is){if(Ht){var eo=Xs.deletions;eo===null?(Xs.deletions=[Is],Xs.flags|=16):eo.push(Is)}}function ln(Xs,Is){if(!Ht)return null;for(;Is!==null;)en(Xs,Is),Is=Is.sibling;return null}function An(Xs,Is){for(Xs=new Map;Is!==null;)Is.key!==null?Xs.set(Is.key,Is):Xs.set(Is.index,Is),Is=Is.sibling;return Xs}function jn(Xs,Is){return Xs=am(Xs,Is),Xs.index=0,Xs.sibling=null,Xs}function nr(Xs,Is,eo){return Xs.index=eo,Ht?(eo=Xs.alternate,eo!==null?(eo=eo.index,eo<Is?(Xs.flags|=2,Is):eo):(Xs.flags|=2,Is)):(Xs.flags|=1048576,Is)}function Lr(Xs){return Ht&&Xs.alternate===null&&(Xs.flags|=2),Xs}function Es(Xs,Is,eo,po){return Is===null||Is.tag!==6?(Is=_v(eo,Xs.mode,po),Is.return=Xs,Is):(Is=jn(Is,eo),Is.return=Xs,Is)}function to(Xs,Is,eo,po){var bo=eo.type;return bo===bt?_o(Xs,Is,eo.props.children,po,eo.key):Is!==null&&(Is.elementType===bo||typeof bo=="object"&&bo!==null&&bo.$$typeof===Ft&&w0(bo)===Is.type)?(po=jn(Is,eo.props),po.ref=Zp(Xs,Is,eo),po.return=Xs,po):(po=Vy(eo.type,eo.key,eo.props,null,Xs.mode,po),po.ref=Zp(Xs,Is,eo),po.return=Xs,po)}function so(Xs,Is,eo,po){return Is===null||Is.tag!==4||Is.stateNode.containerInfo!==eo.containerInfo||Is.stateNode.implementation!==eo.implementation?(Is=xv(eo,Xs.mode,po),Is.return=Xs,Is):(Is=jn(Is,eo.children||[]),Is.return=Xs,Is)}function _o(Xs,Is,eo,po,bo){return Is===null||Is.tag!==7?(Is=Im(eo,Xs.mode,po,bo),Is.return=Xs,Is):(Is=jn(Is,eo),Is.return=Xs,Is)}function wl(Xs,Is,eo){if(typeof Is=="string"&&Is!==""||typeof Is=="number")return Is=_v(""+Is,Xs.mode,eo),Is.return=Xs,Is;if(typeof Is=="object"&&Is!==null){switch(Is.$$typeof){case vt:return eo=Vy(Is.type,Is.key,Is.props,null,Xs.mode,eo),eo.ref=Zp(Xs,null,Is),eo.return=Xs,eo;case _t:return Is=xv(Is,Xs.mode,eo),Is.return=Xs,Is;case Ft:var po=Is._init;return wl(Xs,po(Is._payload),eo)}if(En(Is)||Bt(Is))return Is=Im(Is,Xs.mode,eo,null),Is.return=Xs,Is;pm(Xs,Is)}return null}function Xo(Xs,Is,eo,po){var bo=Is!==null?Is.key:null;if(typeof eo=="string"&&eo!==""||typeof eo=="number")return bo!==null?null:Es(Xs,Is,""+eo,po);if(typeof eo=="object"&&eo!==null){switch(eo.$$typeof){case vt:return eo.key===bo?to(Xs,Is,eo,po):null;case _t:return eo.key===bo?so(Xs,Is,eo,po):null;case Ft:return bo=eo._init,Xo(Xs,Is,bo(eo._payload),po)}if(En(eo)||Bt(eo))return bo!==null?null:_o(Xs,Is,eo,po,null);pm(Xs,eo)}return null}function hu(Xs,Is,eo,po,bo){if(typeof po=="string"&&po!==""||typeof po=="number")return Xs=Xs.get(eo)||null,Es(Is,Xs,""+po,bo);if(typeof po=="object"&&po!==null){switch(po.$$typeof){case vt:return Xs=Xs.get(po.key===null?eo:po.key)||null,to(Is,Xs,po,bo);case _t:return Xs=Xs.get(po.key===null?eo:po.key)||null,so(Is,Xs,po,bo);case Ft:var Ul=po._init;return hu(Xs,Is,eo,Ul(po._payload),bo)}if(En(po)||Bt(po))return Xs=Xs.get(eo)||null,_o(Is,Xs,po,bo,null);pm(Is,po)}return null}function wo(Xs,Is,eo,po){for(var bo=null,Ul=null,Rl=Is,tu=Is=0,Ou=null;Rl!==null&&tu<eo.length;tu++){Rl.index>tu?(Ou=Rl,Rl=null):Ou=Rl.sibling;var nu=Xo(Xs,Rl,eo[tu],po);if(nu===null){Rl===null&&(Rl=Ou);break}Ht&&Rl&&nu.alternate===null&&en(Xs,Rl),Is=nr(nu,Is,tu),Ul===null?bo=nu:Ul.sibling=nu,Ul=nu,Rl=Ou}if(tu===eo.length)return ln(Xs,Rl),du&&Up(Xs,tu),bo;if(Rl===null){for(;tu<eo.length;tu++)Rl=wl(Xs,eo[tu],po),Rl!==null&&(Is=nr(Rl,Is,tu),Ul===null?bo=Rl:Ul.sibling=Rl,Ul=Rl);return du&&Up(Xs,tu),bo}for(Rl=An(Xs,Rl);tu<eo.length;tu++)Ou=hu(Rl,Xs,tu,eo[tu],po),Ou!==null&&(Ht&&Ou.alternate!==null&&Rl.delete(Ou.key===null?tu:Ou.key),Is=nr(Ou,Is,tu),Ul===null?bo=Ou:Ul.sibling=Ou,Ul=Ou);return Ht&&Rl.forEach(function(om){return en(Xs,om)}),du&&Up(Xs,tu),bo}function zu(Xs,Is,eo,po){var bo=Bt(eo);if(typeof bo!="function")throw Error(dt(150));if(eo=bo.call(eo),eo==null)throw Error(dt(151));for(var Ul=bo=null,Rl=Is,tu=Is=0,Ou=null,nu=eo.next();Rl!==null&&!nu.done;tu++,nu=eo.next()){Rl.index>tu?(Ou=Rl,Rl=null):Ou=Rl.sibling;var om=Xo(Xs,Rl,nu.value,po);if(om===null){Rl===null&&(Rl=Ou);break}Ht&&Rl&&om.alternate===null&&en(Xs,Rl),Is=nr(om,Is,tu),Ul===null?bo=om:Ul.sibling=om,Ul=om,Rl=Ou}if(nu.done)return ln(Xs,Rl),du&&Up(Xs,tu),bo;if(Rl===null){for(;!nu.done;tu++,nu=eo.next())nu=wl(Xs,nu.value,po),nu!==null&&(Is=nr(nu,Is,tu),Ul===null?bo=nu:Ul.sibling=nu,Ul=nu);return du&&Up(Xs,tu),bo}for(Rl=An(Xs,Rl);!nu.done;tu++,nu=eo.next())nu=hu(Rl,Xs,tu,nu.value,po),nu!==null&&(Ht&&nu.alternate!==null&&Rl.delete(nu.key===null?tu:nu.key),Is=nr(nu,Is,tu),Ul===null?bo=nu:Ul.sibling=nu,Ul=nu);return Ht&&Rl.forEach(function(Jv){return en(Xs,Jv)}),du&&Up(Xs,tu),bo}function _p(Xs,Is,eo,po){if(typeof eo=="object"&&eo!==null&&eo.type===bt&&eo.key===null&&(eo=eo.props.children),typeof eo=="object"&&eo!==null){switch(eo.$$typeof){case vt:e:{for(var bo=eo.key,Ul=Is;Ul!==null;){if(Ul.key===bo){if(bo=eo.type,bo===bt){if(Ul.tag===7){ln(Xs,Ul.sibling),Is=jn(Ul,eo.props.children),Is.return=Xs,Xs=Is;break e}}else if(Ul.elementType===bo||typeof bo=="object"&&bo!==null&&bo.$$typeof===Ft&&w0(bo)===Ul.type){ln(Xs,Ul.sibling),Is=jn(Ul,eo.props),Is.ref=Zp(Xs,Ul,eo),Is.return=Xs,Xs=Is;break e}ln(Xs,Ul);break}else en(Xs,Ul);Ul=Ul.sibling}eo.type===bt?(Is=Im(eo.props.children,Xs.mode,po,eo.key),Is.return=Xs,Xs=Is):(po=Vy(eo.type,eo.key,eo.props,null,Xs.mode,po),po.ref=Zp(Xs,Is,eo),po.return=Xs,Xs=po)}return Lr(Xs);case _t:e:{for(Ul=eo.key;Is!==null;){if(Is.key===Ul)if(Is.tag===4&&Is.stateNode.containerInfo===eo.containerInfo&&Is.stateNode.implementation===eo.implementation){ln(Xs,Is.sibling),Is=jn(Is,eo.children||[]),Is.return=Xs,Xs=Is;break e}else{ln(Xs,Is);break}else en(Xs,Is);Is=Is.sibling}Is=xv(eo,Xs.mode,po),Is.return=Xs,Xs=Is}return Lr(Xs);case Ft:return Ul=eo._init,_p(Xs,Is,Ul(eo._payload),po)}if(En(eo))return wo(Xs,Is,eo,po);if(Bt(eo))return zu(Xs,Is,eo,po);pm(Xs,eo)}return typeof eo=="string"&&eo!==""||typeof eo=="number"?(eo=""+eo,Is!==null&&Is.tag===6?(ln(Xs,Is.sibling),Is=jn(Is,eo),Is.return=Xs,Xs=Is):(ln(Xs,Is),Is=_v(eo,Xs.mode,po),Is.return=Xs,Xs=Is),Lr(Xs)):ln(Xs,Is)}return _p}var Cp=ly(!0),Pp=ly(!1),mm={},Qu=Jl(mm),Iu=Jl(mm),zp=Jl(mm);function ip(Ht){if(Ht===mm)throw Error(dt(174));return Ht}function C0(Ht,en){vo(zp,en),vo(Iu,Ht),vo(Qu,mm),Ht=Mn(en),uo(Qu),vo(Qu,Ht)}function jp(){uo(Qu),uo(Iu),uo(zp)}function gm(Ht){var en=ip(zp.current),ln=ip(Qu.current);en=un(ln,Ht.type,en),ln!==en&&(vo(Iu,Ht),vo(Qu,en))}function Gm(Ht){Iu.current===Ht&&(uo(Qu),uo(Iu))}var pu=Jl(0);function ym(Ht){for(var en=Ht;en!==null;){if(en.tag===13){var ln=en.memoizedState;if(ln!==null&&(ln=ln.dehydrated,ln===null||gu(ln)||yl(ln)))return en}else if(en.tag===19&&en.memoizedProps.revealOrder!==void 0){if(en.flags&128)return en}else if(en.child!==null){en.child.return=en,en=en.child;continue}if(en===Ht)break;for(;en.sibling===null;){if(en.return===null||en.return===Ht)return null;en=en.return}en.sibling.return=en.return,en=en.sibling}return null}var Wm=[];function Hm(){for(var Ht=0;Ht<Wm.length;Ht++){var en=Wm[Ht];Ar?en._workInProgressVersionPrimary=null:en._workInProgressVersionSecondary=null}Wm.length=0}var vm=yt.ReactCurrentDispatcher,Wu=yt.ReactCurrentBatchConfig,Vp=0,yu=null,xu=null,cu=null,Jp=!1,Qp=!1,Gp=0,cy=0;function Au(){throw Error(dt(321))}function Km(Ht,en){if(en===null)return!1;for(var ln=0;ln<en.length&&ln<Ht.length;ln++)if(!np(Ht[ln],en[ln]))return!1;return!0}function Xm(Ht,en,ln,An,jn,nr){if(Vp=nr,yu=en,en.memoizedState=null,en.updateQueue=null,en.lanes=0,vm.current=Ht===null||Ht.memoizedState===null?Qy:ev,Ht=ln(An,jn),Qp){nr=0;do{if(Qp=!1,Gp=0,25<=nr)throw Error(dt(301));nr+=1,cu=xu=null,en.updateQueue=null,vm.current=tv,Ht=ln(An,jn)}while(Qp)}if(vm.current=e0,en=xu!==null&&xu.next!==null,Vp=0,cu=xu=yu=null,Jp=!1,en)throw Error(dt(300));return Ht}function em(){var Ht=Gp!==0;return Gp=0,Ht}function _d(){var Ht={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cu===null?yu.memoizedState=cu=Ht:cu=cu.next=Ht,cu}function sp(){if(xu===null){var Ht=yu.alternate;Ht=Ht!==null?Ht.memoizedState:null}else Ht=xu.next;var en=cu===null?yu.memoizedState:cu.next;if(en!==null)cu=en,xu=Ht;else{if(Ht===null)throw Error(dt(310));xu=Ht,Ht={memoizedState:xu.memoizedState,baseState:xu.baseState,baseQueue:xu.baseQueue,queue:xu.queue,next:null},cu===null?yu.memoizedState=cu=Ht:cu=cu.next=Ht}return cu}function Ip(Ht,en){return typeof en=="function"?en(Ht):en}function _m(Ht){var en=sp(),ln=en.queue;if(ln===null)throw Error(dt(311));ln.lastRenderedReducer=Ht;var An=xu,jn=An.baseQueue,nr=ln.pending;if(nr!==null){if(jn!==null){var Lr=jn.next;jn.next=nr.next,nr.next=Lr}An.baseQueue=jn=nr,ln.pending=null}if(jn!==null){nr=jn.next,An=An.baseState;var Es=Lr=null,to=null,so=nr;do{var _o=so.lane;if((Vp&_o)===_o)to!==null&&(to=to.next={lane:0,action:so.action,hasEagerState:so.hasEagerState,eagerState:so.eagerState,next:null}),An=so.hasEagerState?so.eagerState:Ht(An,so.action);else{var wl={lane:_o,action:so.action,hasEagerState:so.hasEagerState,eagerState:so.eagerState,next:null};to===null?(Es=to=wl,Lr=An):to=to.next=wl,yu.lanes|=_o,l0|=_o}so=so.next}while(so!==null&&so!==nr);to===null?Lr=An:to.next=Es,np(An,en.memoizedState)||(ku=!0),en.memoizedState=An,en.baseState=Lr,en.baseQueue=to,ln.lastRenderedState=An}if(Ht=ln.interleaved,Ht!==null){jn=Ht;do nr=jn.lane,yu.lanes|=nr,l0|=nr,jn=jn.next;while(jn!==Ht)}else jn===null&&(ln.lanes=0);return[en.memoizedState,ln.dispatch]}function xm(Ht){var en=sp(),ln=en.queue;if(ln===null)throw Error(dt(311));ln.lastRenderedReducer=Ht;var An=ln.dispatch,jn=ln.pending,nr=en.memoizedState;if(jn!==null){ln.pending=null;var Lr=jn=jn.next;do nr=Ht(nr,Lr.action),Lr=Lr.next;while(Lr!==jn);np(nr,en.memoizedState)||(ku=!0),en.memoizedState=nr,en.baseQueue===null&&(en.baseState=nr),ln.lastRenderedState=nr}return[nr,An]}function M0(){}function Ym(Ht,en){var ln=yu,An=sp(),jn=en(),nr=!np(An.memoizedState,jn);if(nr&&(An.memoizedState=jn,ku=!0),An=An.queue,Sm(fu.bind(null,ln,An,Ht),[Ht]),An.getSnapshot!==en||nr||cu!==null&&cu.memoizedState.tag&1){if(ln.flags|=2048,bm(9,A0.bind(null,ln,An,jn,en),void 0,null),Cu===null)throw Error(dt(349));Vp&30||T0(ln,en,jn)}return jn}function T0(Ht,en,ln){Ht.flags|=16384,Ht={getSnapshot:en,value:ln},en=yu.updateQueue,en===null?(en={lastEffect:null,stores:null},yu.updateQueue=en,en.stores=[Ht]):(ln=en.stores,ln===null?en.stores=[Ht]:ln.push(Ht))}function A0(Ht,en,ln,An){en.value=ln,en.getSnapshot=An,R0(en)&&yp(Ht,1,-1)}function fu(Ht,en,ln){return ln(function(){R0(en)&&yp(Ht,1,-1)})}function R0(Ht){var en=Ht.getSnapshot;Ht=Ht.value;try{var ln=en();return!np(Ht,ln)}catch{return!0}}function qm(Ht){var en=_d();return typeof Ht=="function"&&(Ht=Ht()),en.memoizedState=en.baseState=Ht,Ht={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ip,lastRenderedState:Ht},en.queue=Ht,Ht=Ht.dispatch=fy.bind(null,yu,Ht),[en.memoizedState,Ht]}function bm(Ht,en,ln,An){return Ht={tag:Ht,create:en,destroy:ln,deps:An,next:null},en=yu.updateQueue,en===null?(en={lastEffect:null,stores:null},yu.updateQueue=en,en.lastEffect=Ht.next=Ht):(ln=en.lastEffect,ln===null?en.lastEffect=Ht.next=Ht:(An=ln.next,ln.next=Ht,Ht.next=An,en.lastEffect=Ht)),Ht}function uy(){return sp().memoizedState}function $0(Ht,en,ln,An){var jn=_d();yu.flags|=Ht,jn.memoizedState=bm(1|en,ln,void 0,An===void 0?null:An)}function Zm(Ht,en,ln,An){var jn=sp();An=An===void 0?null:An;var nr=void 0;if(xu!==null){var Lr=xu.memoizedState;if(nr=Lr.destroy,An!==null&&Km(An,Lr.deps)){jn.memoizedState=bm(en,ln,nr,An);return}}yu.flags|=Ht,jn.memoizedState=bm(1|en,ln,nr,An)}function Jm(Ht,en){return $0(8390656,8,Ht,en)}function Sm(Ht,en){return Zm(2048,8,Ht,en)}function Op(Ht,en){return Zm(4,2,Ht,en)}function P0(Ht,en){return Zm(4,4,Ht,en)}function I0(Ht,en){if(typeof en=="function")return Ht=Ht(),en(Ht),function(){en(null)};if(en!=null)return Ht=Ht(),en.current=Ht,function(){en.current=null}}function O0(Ht,en,ln){return ln=ln!=null?ln.concat([Ht]):null,Zm(4,4,I0.bind(null,en,Ht),ln)}function Qm(){}function dy(Ht,en){var ln=sp();en=en===void 0?null:en;var An=ln.memoizedState;return An!==null&&en!==null&&Km(en,An[1])?An[0]:(ln.memoizedState=[Ht,en],Ht)}function L0(Ht,en){var ln=sp();en=en===void 0?null:en;var An=ln.memoizedState;return An!==null&&en!==null&&Km(en,An[1])?An[0]:(Ht=Ht(),ln.memoizedState=[Ht,en],Ht)}function D0(Ht,en){var ln=Xl;Xl=ln!==0&&4>ln?ln:4,Ht(!0);var An=Wu.transition;Wu.transition={};try{Ht(!1),en()}finally{Xl=ln,Wu.transition=An}}function _g(){return sp().memoizedState}function Jy(Ht,en,ln){var An=im(Ht);ln={lane:An,action:ln,hasEagerState:!1,eagerState:null,next:null},hy(Ht)?my(en,ln):(gy(Ht,en,ln),ln=Hu(),Ht=yp(Ht,An,ln),Ht!==null&&yy(Ht,en,An))}function fy(Ht,en,ln){var An=im(Ht),jn={lane:An,action:ln,hasEagerState:!1,eagerState:null,next:null};if(hy(Ht))my(en,jn);else{gy(Ht,en,jn);var nr=Ht.alternate;if(Ht.lanes===0&&(nr===null||nr.lanes===0)&&(nr=en.lastRenderedReducer,nr!==null))try{var Lr=en.lastRenderedState,Es=nr(Lr,ln);if(jn.hasEagerState=!0,jn.eagerState=Es,np(Es,Lr))return}catch{}finally{}ln=Hu(),Ht=yp(Ht,An,ln),Ht!==null&&yy(Ht,en,An)}}function hy(Ht){var en=Ht.alternate;return Ht===yu||en!==null&&en===yu}function my(Ht,en){Qp=Jp=!0;var ln=Ht.pending;ln===null?en.next=en:(en.next=ln.next,ln.next=en),Ht.pending=en}function gy(Ht,en,ln){Cu!==null&&Ht.mode&1&&!(zl&2)?(Ht=en.interleaved,Ht===null?(ln.next=ln,up===null?up=[en]:up.push(en)):(ln.next=Ht.next,Ht.next=ln),en.interleaved=ln):(Ht=en.pending,Ht===null?ln.next=ln:(ln.next=Ht.next,Ht.next=ln),en.pending=ln)}function yy(Ht,en,ln){if(ln&4194240){var An=en.lanes;An&=Ht.pendingLanes,ln|=An,en.lanes=ln,um(Ht,ln)}}var e0={readContext:Pu,useCallback:Au,useContext:Au,useEffect:Au,useImperativeHandle:Au,useInsertionEffect:Au,useLayoutEffect:Au,useMemo:Au,useReducer:Au,useRef:Au,useState:Au,useDebugValue:Au,useDeferredValue:Au,useTransition:Au,useMutableSource:Au,useSyncExternalStore:Au,useId:Au,unstable_isNewReconciler:!1},Qy={readContext:Pu,useCallback:function(Ht,en){return _d().memoizedState=[Ht,en===void 0?null:en],Ht},useContext:Pu,useEffect:Jm,useImperativeHandle:function(Ht,en,ln){return ln=ln!=null?ln.concat([Ht]):null,$0(4194308,4,I0.bind(null,en,Ht),ln)},useLayoutEffect:function(Ht,en){return $0(4194308,4,Ht,en)},useInsertionEffect:function(Ht,en){return $0(4,2,Ht,en)},useMemo:function(Ht,en){var ln=_d();return en=en===void 0?null:en,Ht=Ht(),ln.memoizedState=[Ht,en],Ht},useReducer:function(Ht,en,ln){var An=_d();return en=ln!==void 0?ln(en):en,An.memoizedState=An.baseState=en,Ht={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:en},An.queue=Ht,Ht=Ht.dispatch=Jy.bind(null,yu,Ht),[An.memoizedState,Ht]},useRef:function(Ht){var en=_d();return Ht={current:Ht},en.memoizedState=Ht},useState:qm,useDebugValue:Qm,useDeferredValue:function(Ht){var en=qm(Ht),ln=en[0],An=en[1];return Jm(function(){var jn=Wu.transition;Wu.transition={};try{An(Ht)}finally{Wu.transition=jn}},[Ht]),ln},useTransition:function(){var Ht=qm(!1),en=Ht[0];return Ht=D0.bind(null,Ht[1]),_d().memoizedState=Ht,[en,Ht]},useMutableSource:function(){},useSyncExternalStore:function(Ht,en,ln){var An=yu,jn=_d();if(du){if(ln===void 0)throw Error(dt(407));ln=ln()}else{if(ln=en(),Cu===null)throw Error(dt(349));Vp&30||T0(An,en,ln)}jn.memoizedState=ln;var nr={value:ln,getSnapshot:en};return jn.queue=nr,Jm(fu.bind(null,An,nr,Ht),[Ht]),An.flags|=2048,bm(9,A0.bind(null,An,nr,ln,en),void 0,null),ln},useId:function(){var Ht=_d(),en=Cu.identifierPrefix;if(du){var ln=wp,An=Ep;ln=(An&~(1<<32-_u(An)-1)).toString(32)+ln,en=":"+en+"R"+ln,ln=Gp++,0<ln&&(en+="H"+ln.toString(32)),en+=":"}else ln=cy++,en=":"+en+"r"+ln.toString(32)+":";return Ht.memoizedState=en},unstable_isNewReconciler:!1},ev={readContext:Pu,useCallback:dy,useContext:Pu,useEffect:Sm,useImperativeHandle:O0,useInsertionEffect:Op,useLayoutEffect:P0,useMemo:L0,useReducer:_m,useRef:uy,useState:function(){return _m(Ip)},useDebugValue:Qm,useDeferredValue:function(Ht){var en=_m(Ip),ln=en[0],An=en[1];return Sm(function(){var jn=Wu.transition;Wu.transition={};try{An(Ht)}finally{Wu.transition=jn}},[Ht]),ln},useTransition:function(){var Ht=_m(Ip)[0],en=sp().memoizedState;return[Ht,en]},useMutableSource:M0,useSyncExternalStore:Ym,useId:_g,unstable_isNewReconciler:!1},tv={readContext:Pu,useCallback:dy,useContext:Pu,useEffect:Sm,useImperativeHandle:O0,useInsertionEffect:Op,useLayoutEffect:P0,useMemo:L0,useReducer:xm,useRef:uy,useState:function(){return xm(Ip)},useDebugValue:Qm,useDeferredValue:function(Ht){var en=xm(Ip),ln=en[0],An=en[1];return Sm(function(){var jn=Wu.transition;Wu.transition={};try{An(Ht)}finally{Wu.transition=jn}},[Ht]),ln},useTransition:function(){var Ht=xm(Ip)[0],en=sp().memoizedState;return[Ht,en]},useMutableSource:M0,useSyncExternalStore:Ym,useId:_g,unstable_isNewReconciler:!1};function F0(Ht,en){try{var ln="",An=en;do ln+=Zy(An),An=An.return;while(An);var jn=ln}catch(nr){jn=`
Error generating stack: `+nr.message+`
`+nr.stack}return{value:Ht,source:en,stack:jn}}function k0(Ht,en){try{console.error(en.value)}catch(ln){setTimeout(function(){throw ln})}}var nv=typeof WeakMap=="function"?WeakMap:Map;function vy(Ht,en,ln){ln=Vu(-1,ln),ln.tag=3,ln.payload={element:null};var An=en.value;return ln.callback=function(){Fy||(Fy=!0,fv=An),k0(Ht,en)},ln}function xy(Ht,en,ln){ln=Vu(-1,ln),ln.tag=3;var An=Ht.type.getDerivedStateFromError;if(typeof An=="function"){var jn=en.value;ln.payload=function(){return An(jn)},ln.callback=function(){k0(Ht,en)}}var nr=Ht.stateNode;return nr!==null&&typeof nr.componentDidCatch=="function"&&(ln.callback=function(){k0(Ht,en),typeof An!="function"&&(nm===null?nm=new Set([this]):nm.add(this));var Lr=en.stack;this.componentDidCatch(en.value,{componentStack:Lr!==null?Lr:""})}),ln}function by(Ht,en,ln){var An=Ht.pingCache;if(An===null){An=Ht.pingCache=new nv;var jn=new Set;An.set(en,jn)}else jn=An.get(en),jn===void 0&&(jn=new Set,An.set(en,jn));jn.has(ln)||(jn.add(ln),Ht=Gv.bind(null,Ht,en,ln),en.then(Ht,Ht))}function hp(Ht){do{var en;if((en=Ht.tag===13)&&(en=Ht.memoizedState,en=en!==null?en.dehydrated!==null:!0),en)return Ht;Ht=Ht.return}while(Ht!==null);return null}function Sy(Ht,en,ln,An,jn){return Ht.mode&1?(Ht.flags|=65536,Ht.lanes=jn,Ht):(Ht===en?Ht.flags|=65536:(Ht.flags|=128,ln.flags|=131072,ln.flags&=-52805,ln.tag===1&&(ln.alternate===null?ln.tag=17:(en=Vu(-1,1),en.tag=2,Rp(ln,en))),ln.lanes|=1),Ht)}function pp(Ht){Ht.flags|=4}function N0(Ht,en){if(Ht!==null&&Ht.child===en.child)return!0;if(en.flags&16)return!1;for(Ht=en.child;Ht!==null;){if(Ht.flags&12854||Ht.subtreeFlags&12854)return!1;Ht=Ht.sibling}return!0}var Em,wm,Lp,tm;if($r)Em=function(Ht,en){for(var ln=en.child;ln!==null;){if(ln.tag===5||ln.tag===6)Un(Ht,ln.stateNode);else if(ln.tag!==4&&ln.child!==null){ln.child.return=ln,ln=ln.child;continue}if(ln===en)break;for(;ln.sibling===null;){if(ln.return===null||ln.return===en)return;ln=ln.return}ln.sibling.return=ln.return,ln=ln.sibling}},wm=function(){},Lp=function(Ht,en,ln,An,jn){if(Ht=Ht.memoizedProps,Ht!==An){var nr=en.stateNode,Lr=ip(Qu.current);ln=In(nr,ln,Ht,An,jn,Lr),(en.updateQueue=ln)&&pp(en)}},tm=function(Ht,en,ln,An){ln!==An&&pp(en)};else if(Mr){Em=function(Ht,en,ln,An){for(var jn=en.child;jn!==null;){if(jn.tag===5){var nr=jn.stateNode;ln&&An&&(nr=hs(nr,jn.type,jn.memoizedProps,jn)),Un(Ht,nr)}else if(jn.tag===6)nr=jn.stateNode,ln&&An&&(nr=ro(nr,jn.memoizedProps,jn)),Un(Ht,nr);else if(jn.tag!==4){if(jn.tag===22&&jn.memoizedState!==null)nr=jn.child,nr!==null&&(nr.return=jn),Em(Ht,jn,!0,!0);else if(jn.child!==null){jn.child.return=jn,jn=jn.child;continue}}if(jn===en)break;for(;jn.sibling===null;){if(jn.return===null||jn.return===en)return;jn=jn.return}jn.sibling.return=jn.return,jn=jn.sibling}};var n0=function(Ht,en,ln,An){for(var jn=en.child;jn!==null;){if(jn.tag===5){var nr=jn.stateNode;ln&&An&&(nr=hs(nr,jn.type,jn.memoizedProps,jn)),Vr(Ht,nr)}else if(jn.tag===6)nr=jn.stateNode,ln&&An&&(nr=ro(nr,jn.memoizedProps,jn)),Vr(Ht,nr);else if(jn.tag!==4){if(jn.tag===22&&jn.memoizedState!==null)nr=jn.child,nr!==null&&(nr.return=jn),n0(Ht,jn,!0,!0);else if(jn.child!==null){jn.child.return=jn,jn=jn.child;continue}}if(jn===en)break;for(;jn.sibling===null;){if(jn.return===null||jn.return===en)return;jn=jn.return}jn.sibling.return=jn.return,jn=jn.sibling}};wm=function(Ht,en){var ln=en.stateNode;if(!N0(Ht,en)){Ht=ln.containerInfo;var An=Ur(Ht);n0(An,en,!1,!1),ln.pendingChildren=An,pp(en),dr(Ht,An)}},Lp=function(Ht,en,ln,An,jn){var nr=Ht.stateNode,Lr=Ht.memoizedProps;if((Ht=N0(Ht,en))&&Lr===An)en.stateNode=nr;else{var Es=en.stateNode,to=ip(Qu.current),so=null;Lr!==An&&(so=In(Es,ln,Lr,An,jn,to)),Ht&&so===null?en.stateNode=nr:(nr=Fn(nr,so,ln,Lr,An,en,Ht,Es),qn(nr,ln,An,jn,to)&&pp(en),en.stateNode=nr,Ht?pp(en):Em(nr,en,!1,!1))}},tm=function(Ht,en,ln,An){ln!==An?(Ht=ip(zp.current),ln=ip(Qu.current),en.stateNode=ar(An,Ht,ln,en),pp(en)):en.stateNode=Ht.stateNode}}else wm=function(){},Lp=function(){},tm=function(){};function Cm(Ht,en){if(!du)switch(Ht.tailMode){case"hidden":en=Ht.tail;for(var ln=null;en!==null;)en.alternate!==null&&(ln=en),en=en.sibling;ln===null?Ht.tail=null:ln.sibling=null;break;case"collapsed":ln=Ht.tail;for(var An=null;ln!==null;)ln.alternate!==null&&(An=ln),ln=ln.sibling;An===null?en||Ht.tail===null?Ht.tail=null:Ht.tail.sibling=null:An.sibling=null}}function Ru(Ht){var en=Ht.alternate!==null&&Ht.alternate.child===Ht.child,ln=0,An=0;if(en)for(var jn=Ht.child;jn!==null;)ln|=jn.lanes|jn.childLanes,An|=jn.subtreeFlags&14680064,An|=jn.flags&14680064,jn.return=Ht,jn=jn.sibling;else for(jn=Ht.child;jn!==null;)ln|=jn.lanes|jn.childLanes,An|=jn.subtreeFlags,An|=jn.flags,jn.return=Ht,jn=jn.sibling;return Ht.subtreeFlags|=An,Ht.childLanes=ln,en}function rv(Ht,en,ln){var An=en.pendingProps;switch(_0(en),en.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ru(en),null;case 1:return eu(en.type)&&op(),Ru(en),null;case 3:return An=en.stateNode,jp(),uo(Ko),uo(Wl),Hm(),An.pendingContext&&(An.context=An.pendingContext,An.pendingContext=null),(Ht===null||Ht.child===null)&&(Vm(en)?pp(en):Ht===null||Ht.memoizedState.isDehydrated&&!(en.flags&256)||(en.flags|=1024,Gu!==null&&(mv(Gu),Gu=null))),wm(Ht,en),Ru(en),null;case 5:Gm(en),ln=ip(zp.current);var jn=en.type;if(Ht!==null&&en.stateNode!=null)Lp(Ht,en,jn,An,ln),Ht.ref!==en.ref&&(en.flags|=512,en.flags|=2097152);else{if(!An){if(en.stateNode===null)throw Error(dt(166));return Ru(en),null}if(Ht=ip(Qu.current),Vm(en)){if(!Jn)throw Error(dt(175));Ht=ju(en.stateNode,en.type,en.memoizedProps,ln,Ht,en,!qp),en.updateQueue=Ht,Ht!==null&&pp(en)}else{var nr=dn(jn,An,ln,Ht,en);Em(nr,en,!1,!1),en.stateNode=nr,qn(nr,jn,An,ln,Ht)&&pp(en)}en.ref!==null&&(en.flags|=512,en.flags|=2097152)}return Ru(en),null;case 6:if(Ht&&en.stateNode!=null)tm(Ht,en,Ht.memoizedProps,An);else{if(typeof An!="string"&&en.stateNode===null)throw Error(dt(166));if(Ht=ip(zp.current),ln=ip(Qu.current),Vm(en)){if(!Jn)throw Error(dt(176));if(Ht=en.stateNode,An=en.memoizedProps,(ln=au(Ht,An,en,!qp))&&(jn=Eu,jn!==null))switch(nr=(jn.mode&1)!==0,jn.tag){case 3:io(jn.stateNode.containerInfo,Ht,An,nr);break;case 5:lo(jn.type,jn.memoizedProps,jn.stateNode,Ht,An,nr)}ln&&pp(en)}else en.stateNode=ar(An,Ht,ln,en)}return Ru(en),null;case 13:if(uo(pu),An=en.memoizedState,du&&Uu!==null&&en.mode&1&&!(en.flags&128)){for(Ht=Uu;Ht;)Ht=Vo(Ht);return fp(),en.flags|=98560,en}if(An!==null&&An.dehydrated!==null){if(An=Vm(en),Ht===null){if(!An)throw Error(dt(318));if(!Jn)throw Error(dt(344));if(Ht=en.memoizedState,Ht=Ht!==null?Ht.dehydrated:null,!Ht)throw Error(dt(317));ou(Ht,en)}else fp(),!(en.flags&128)&&(en.memoizedState=null),en.flags|=4;return Ru(en),null}return Gu!==null&&(mv(Gu),Gu=null),en.flags&128?(en.lanes=ln,en):(An=An!==null,ln=!1,Ht===null?Vm(en):ln=Ht.memoizedState!==null,An&&!ln&&(en.child.flags|=8192,en.mode&1&&(Ht===null||pu.current&1?$u===0&&($u=3):yv())),en.updateQueue!==null&&(en.flags|=4),Ru(en),null);case 4:return jp(),wm(Ht,en),Ht===null&&wr(en.stateNode.containerInfo),Ru(en),null;case 10:return h0(en.type._context),Ru(en),null;case 17:return eu(en.type)&&op(),Ru(en),null;case 19:if(uo(pu),jn=en.memoizedState,jn===null)return Ru(en),null;if(An=(en.flags&128)!==0,nr=jn.rendering,nr===null)if(An)Cm(jn,!1);else{if($u!==0||Ht!==null&&Ht.flags&128)for(Ht=en.child;Ht!==null;){if(nr=ym(Ht),nr!==null){for(en.flags|=128,Cm(jn,!1),Ht=nr.updateQueue,Ht!==null&&(en.updateQueue=Ht,en.flags|=4),en.subtreeFlags=0,Ht=ln,An=en.child;An!==null;)ln=An,jn=Ht,ln.flags&=14680066,nr=ln.alternate,nr===null?(ln.childLanes=0,ln.lanes=jn,ln.child=null,ln.subtreeFlags=0,ln.memoizedProps=null,ln.memoizedState=null,ln.updateQueue=null,ln.dependencies=null,ln.stateNode=null):(ln.childLanes=nr.childLanes,ln.lanes=nr.lanes,ln.child=nr.child,ln.subtreeFlags=0,ln.deletions=null,ln.memoizedProps=nr.memoizedProps,ln.memoizedState=nr.memoizedState,ln.updateQueue=nr.updateQueue,ln.type=nr.type,jn=nr.dependencies,ln.dependencies=jn===null?null:{lanes:jn.lanes,firstContext:jn.firstContext}),An=An.sibling;return vo(pu,pu.current&1|2),en.child}Ht=Ht.sibling}jn.tail!==null&&Su()>dv&&(en.flags|=128,An=!0,Cm(jn,!1),en.lanes=4194304)}else{if(!An)if(Ht=ym(nr),Ht!==null){if(en.flags|=128,An=!0,Ht=Ht.updateQueue,Ht!==null&&(en.updateQueue=Ht,en.flags|=4),Cm(jn,!0),jn.tail===null&&jn.tailMode==="hidden"&&!nr.alternate&&!du)return Ru(en),null}else 2*Su()-jn.renderingStartTime>dv&&ln!==1073741824&&(en.flags|=128,An=!0,Cm(jn,!1),en.lanes=4194304);jn.isBackwards?(nr.sibling=en.child,en.child=nr):(Ht=jn.last,Ht!==null?Ht.sibling=nr:en.child=nr,jn.last=nr)}return jn.tail!==null?(en=jn.tail,jn.rendering=en,jn.tail=en.sibling,jn.renderingStartTime=Su(),en.sibling=null,Ht=pu.current,vo(pu,An?Ht&1|2:Ht&1),en):(Ru(en),null);case 22:case 23:return gv(),An=en.memoizedState!==null,Ht!==null&&Ht.memoizedState!==null!==An&&(en.flags|=8192),An&&en.mode&1?ap&1073741824&&(Ru(en),$r&&en.subtreeFlags&6&&(en.flags|=8192)):Ru(en),null;case 24:return null;case 25:return null}throw Error(dt(156,en.tag))}var Mm=yt.ReactCurrentOwner,ku=!1;function Nu(Ht,en,ln,An){en.child=Ht===null?Pp(en,null,ln,An):Cp(en,Ht.child,ln,An)}function Ey(Ht,en,ln,An,jn){ln=ln.render;var nr=en.ref;return kp(en,jn),An=Xm(Ht,en,ln,An,nr,jn),ln=em(),Ht!==null&&!ku?(en.updateQueue=Ht.updateQueue,en.flags&=-2053,Ht.lanes&=~jn,mp(Ht,en,jn)):(du&&ln&&v0(en),en.flags|=1,Nu(Ht,en,An,jn),en.child)}function wy(Ht,en,ln,An,jn){if(Ht===null){var nr=ln.type;return typeof nr=="function"&&!vv(nr)&&nr.defaultProps===void 0&&ln.compare===null&&ln.defaultProps===void 0?(en.tag=15,en.type=nr,Cy(Ht,en,nr,An,jn)):(Ht=Vy(ln.type,null,An,en,en.mode,jn),Ht.ref=en.ref,Ht.return=en,en.child=Ht)}if(nr=Ht.child,!(Ht.lanes&jn)){var Lr=nr.memoizedProps;if(ln=ln.compare,ln=ln!==null?ln:km,ln(Lr,An)&&Ht.ref===en.ref)return mp(Ht,en,jn)}return en.flags|=1,Ht=am(nr,An),Ht.ref=en.ref,Ht.return=en,en.child=Ht}function Cy(Ht,en,ln,An,jn){if(Ht!==null&&km(Ht.memoizedProps,An)&&Ht.ref===en.ref)if(ku=!1,(Ht.lanes&jn)!==0)Ht.flags&131072&&(ku=!0);else return en.lanes=Ht.lanes,mp(Ht,en,jn);return B0(Ht,en,ln,An,jn)}function My(Ht,en,ln){var An=en.pendingProps,jn=An.children,nr=Ht!==null?Ht.memoizedState:null;if(An.mode==="hidden")if(!(en.mode&1))en.memoizedState={baseLanes:0,cachePool:null},vo(o0,ap),ap|=ln;else if(ln&1073741824)en.memoizedState={baseLanes:0,cachePool:null},An=nr!==null?nr.baseLanes:ln,vo(o0,ap),ap|=An;else return Ht=nr!==null?nr.baseLanes|ln:ln,en.lanes=en.childLanes=1073741824,en.memoizedState={baseLanes:Ht,cachePool:null},en.updateQueue=null,vo(o0,ap),ap|=Ht,null;else nr!==null?(An=nr.baseLanes|ln,en.memoizedState=null):An=ln,vo(o0,ap),ap|=An;return Nu(Ht,en,jn,ln),en.child}function Ty(Ht,en){var ln=en.ref;(Ht===null&&ln!==null||Ht!==null&&Ht.ref!==ln)&&(en.flags|=512,en.flags|=2097152)}function B0(Ht,en,ln,An,jn){var nr=eu(ln)?vu:Wl.current;return nr=Lu(en,nr),kp(en,jn),ln=Xm(Ht,en,ln,An,nr,jn),An=em(),Ht!==null&&!ku?(en.updateQueue=Ht.updateQueue,en.flags&=-2053,Ht.lanes&=~jn,mp(Ht,en,jn)):(du&&An&&v0(en),en.flags|=1,Nu(Ht,en,ln,jn),en.child)}function Ay(Ht,en,ln,An,jn){if(eu(ln)){var nr=!0;Xu(en)}else nr=!1;if(kp(en,jn),en.stateNode===null)Ht!==null&&(Ht.alternate=null,en.alternate=null,en.flags|=2),iy(en,ln,An),y0(en,ln,An,jn),An=!0;else if(Ht===null){var Lr=en.stateNode,Es=en.memoizedProps;Lr.props=Es;var to=Lr.context,so=ln.contextType;typeof so=="object"&&so!==null?so=Pu(so):(so=eu(ln)?vu:Wl.current,so=Lu(en,so));var _o=ln.getDerivedStateFromProps,wl=typeof _o=="function"||typeof Lr.getSnapshotBeforeUpdate=="function";wl||typeof Lr.UNSAFE_componentWillReceiveProps!="function"&&typeof Lr.componentWillReceiveProps!="function"||(Es!==An||to!==so)&&sy(en,Lr,An,so),Ap=!1;var Xo=en.memoizedState;Lr.state=Xo,Um(en,An,Lr,jn),to=en.memoizedState,Es!==An||Xo!==to||Ko.current||Ap?(typeof _o=="function"&&(g0(en,ln,_o,An),to=en.memoizedState),(Es=Ap||ry(en,ln,Es,An,Xo,to,so))?(wl||typeof Lr.UNSAFE_componentWillMount!="function"&&typeof Lr.componentWillMount!="function"||(typeof Lr.componentWillMount=="function"&&Lr.componentWillMount(),typeof Lr.UNSAFE_componentWillMount=="function"&&Lr.UNSAFE_componentWillMount()),typeof Lr.componentDidMount=="function"&&(en.flags|=4194308)):(typeof Lr.componentDidMount=="function"&&(en.flags|=4194308),en.memoizedProps=An,en.memoizedState=to),Lr.props=An,Lr.state=to,Lr.context=so,An=Es):(typeof Lr.componentDidMount=="function"&&(en.flags|=4194308),An=!1)}else{Lr=en.stateNode,ey(Ht,en),Es=en.memoizedProps,so=en.type===en.elementType?Es:rp(en.type,Es),Lr.props=so,wl=en.pendingProps,Xo=Lr.context,to=ln.contextType,typeof to=="object"&&to!==null?to=Pu(to):(to=eu(ln)?vu:Wl.current,to=Lu(en,to));var hu=ln.getDerivedStateFromProps;(_o=typeof hu=="function"||typeof Lr.getSnapshotBeforeUpdate=="function")||typeof Lr.UNSAFE_componentWillReceiveProps!="function"&&typeof Lr.componentWillReceiveProps!="function"||(Es!==wl||Xo!==to)&&sy(en,Lr,An,to),Ap=!1,Xo=en.memoizedState,Lr.state=Xo,Um(en,An,Lr,jn);var wo=en.memoizedState;Es!==wl||Xo!==wo||Ko.current||Ap?(typeof hu=="function"&&(g0(en,ln,hu,An),wo=en.memoizedState),(so=Ap||ry(en,ln,so,An,Xo,wo,to)||!1)?(_o||typeof Lr.UNSAFE_componentWillUpdate!="function"&&typeof Lr.componentWillUpdate!="function"||(typeof Lr.componentWillUpdate=="function"&&Lr.componentWillUpdate(An,wo,to),typeof Lr.UNSAFE_componentWillUpdate=="function"&&Lr.UNSAFE_componentWillUpdate(An,wo,to)),typeof Lr.componentDidUpdate=="function"&&(en.flags|=4),typeof Lr.getSnapshotBeforeUpdate=="function"&&(en.flags|=1024)):(typeof Lr.componentDidUpdate!="function"||Es===Ht.memoizedProps&&Xo===Ht.memoizedState||(en.flags|=4),typeof Lr.getSnapshotBeforeUpdate!="function"||Es===Ht.memoizedProps&&Xo===Ht.memoizedState||(en.flags|=1024),en.memoizedProps=An,en.memoizedState=wo),Lr.props=An,Lr.state=wo,Lr.context=to,An=so):(typeof Lr.componentDidUpdate!="function"||Es===Ht.memoizedProps&&Xo===Ht.memoizedState||(en.flags|=4),typeof Lr.getSnapshotBeforeUpdate!="function"||Es===Ht.memoizedProps&&Xo===Ht.memoizedState||(en.flags|=1024),An=!1)}return U0(Ht,en,ln,An,nr,jn)}function U0(Ht,en,ln,An,jn,nr){Ty(Ht,en);var Lr=(en.flags&128)!==0;if(!An&&!Lr)return jn&&iu(en,ln,!1),mp(Ht,en,nr);An=en.stateNode,Mm.current=en;var Es=Lr&&typeof ln.getDerivedStateFromError!="function"?null:An.render();return en.flags|=1,Ht!==null&&Lr?(en.child=Cp(en,Ht.child,null,nr),en.child=Cp(en,null,Es,nr)):Nu(Ht,en,Es,nr),en.memoizedState=An.state,jn&&iu(en,ln,!0),en.child}function Ry(Ht){var en=Ht.stateNode;en.pendingContext?lu(Ht,en.pendingContext,en.pendingContext!==en.context):en.context&&lu(Ht,en.context,!1),C0(Ht,en.containerInfo)}function $y(Ht,en,ln,An,jn){return fp(),E0(jn),en.flags|=256,Nu(Ht,en,ln,An),en.child}var r0={dehydrated:null,treeContext:null,retryLane:0};function i0(Ht){return{baseLanes:Ht,cachePool:null}}function Py(Ht,en,ln){var An=en.pendingProps,jn=pu.current,nr=!1,Lr=(en.flags&128)!==0,Es;if((Es=Lr)||(Es=Ht!==null&&Ht.memoizedState===null?!1:(jn&2)!==0),Es?(nr=!0,en.flags&=-129):(Ht===null||Ht.memoizedState!==null)&&(jn|=1),vo(pu,jn&1),Ht===null)return S0(en),Ht=en.memoizedState,Ht!==null&&(Ht=Ht.dehydrated,Ht!==null)?(en.mode&1?yl(Ht)?en.lanes=8:en.lanes=1073741824:en.lanes=1,null):(jn=An.children,Ht=An.fallback,nr?(An=en.mode,nr=en.child,jn={mode:"hidden",children:jn},!(An&1)&&nr!==null?(nr.childLanes=0,nr.pendingProps=jn):nr=Gy(jn,An,0,null),Ht=Im(Ht,An,ln,null),nr.return=en,Ht.return=en,nr.sibling=Ht,en.child=nr,en.child.memoizedState=i0(ln),en.memoizedState=r0,Ht):z0(en,jn));if(jn=Ht.memoizedState,jn!==null){if(Es=jn.dehydrated,Es!==null){if(Lr)return en.flags&256?(en.flags&=-257,Tm(Ht,en,ln,Error(dt(422)))):en.memoizedState!==null?(en.child=Ht.child,en.flags|=128,null):(nr=An.fallback,jn=en.mode,An=Gy({mode:"visible",children:An.children},jn,0,null),nr=Im(nr,jn,ln,null),nr.flags|=2,An.return=en,nr.return=en,An.sibling=nr,en.child=An,en.mode&1&&Cp(en,Ht.child,null,ln),en.child.memoizedState=i0(ln),en.memoizedState=r0,nr);if(!(en.mode&1))en=Tm(Ht,en,ln,null);else if(yl(Es))en=Tm(Ht,en,ln,Error(dt(419)));else if(An=(ln&Ht.childLanes)!==0,ku||An){if(An=Cu,An!==null){switch(ln&-ln){case 4:nr=2;break;case 16:nr=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:nr=32;break;case 536870912:nr=268435456;break;default:nr=0}An=nr&(An.suspendedLanes|ln)?0:nr,An!==0&&An!==jn.retryLane&&(jn.retryLane=An,yp(Ht,An,-1))}yv(),en=Tm(Ht,en,ln,Error(dt(421)))}else gu(Es)?(en.flags|=128,en.child=Ht.child,en=Wv.bind(null,Ht),_l(Es,en),en=null):(ln=jn.treeContext,Jn&&(Uu=Ku(Es),Eu=en,du=!0,Gu=null,qp=!1,ln!==null&&(Zu[Ju++]=Ep,Zu[Ju++]=wp,Zu[Ju++]=Bp,Ep=ln.id,wp=ln.overflow,Bp=en)),en=z0(en,en.pendingProps.children),en.flags|=4096);return en}return nr?(An=V0(Ht,en,An.children,An.fallback,ln),nr=en.child,jn=Ht.child.memoizedState,nr.memoizedState=jn===null?i0(ln):{baseLanes:jn.baseLanes|ln,cachePool:null},nr.childLanes=Ht.childLanes&~ln,en.memoizedState=r0,An):(ln=j0(Ht,en,An.children,ln),en.memoizedState=null,ln)}return nr?(An=V0(Ht,en,An.children,An.fallback,ln),nr=en.child,jn=Ht.child.memoizedState,nr.memoizedState=jn===null?i0(ln):{baseLanes:jn.baseLanes|ln,cachePool:null},nr.childLanes=Ht.childLanes&~ln,en.memoizedState=r0,An):(ln=j0(Ht,en,An.children,ln),en.memoizedState=null,ln)}function z0(Ht,en){return en=Gy({mode:"visible",children:en},Ht.mode,0,null),en.return=Ht,Ht.child=en}function j0(Ht,en,ln,An){var jn=Ht.child;return Ht=jn.sibling,ln=am(jn,{mode:"visible",children:ln}),!(en.mode&1)&&(ln.lanes=An),ln.return=en,ln.sibling=null,Ht!==null&&(An=en.deletions,An===null?(en.deletions=[Ht],en.flags|=16):An.push(Ht)),en.child=ln}function V0(Ht,en,ln,An,jn){var nr=en.mode;Ht=Ht.child;var Lr=Ht.sibling,Es={mode:"hidden",children:ln};return!(nr&1)&&en.child!==Ht?(ln=en.child,ln.childLanes=0,ln.pendingProps=Es,en.deletions=null):(ln=am(Ht,Es),ln.subtreeFlags=Ht.subtreeFlags&14680064),Lr!==null?An=am(Lr,An):(An=Im(An,nr,jn,null),An.flags|=2),An.return=en,ln.return=en,ln.sibling=An,en.child=ln,An}function Tm(Ht,en,ln,An){return An!==null&&E0(An),Cp(en,Ht.child,null,ln),Ht=z0(en,en.pendingProps.children),Ht.flags|=2,en.memoizedState=null,Ht}function G0(Ht,en,ln){Ht.lanes|=en;var An=Ht.alternate;An!==null&&(An.lanes|=en),Yp(Ht.return,en,ln)}function s0(Ht,en,ln,An,jn){var nr=Ht.memoizedState;nr===null?Ht.memoizedState={isBackwards:en,rendering:null,renderingStartTime:0,last:An,tail:ln,tailMode:jn}:(nr.isBackwards=en,nr.rendering=null,nr.renderingStartTime=0,nr.last=An,nr.tail=ln,nr.tailMode=jn)}function W0(Ht,en,ln){var An=en.pendingProps,jn=An.revealOrder,nr=An.tail;if(Nu(Ht,en,An.children,ln),An=pu.current,An&2)An=An&1|2,en.flags|=128;else{if(Ht!==null&&Ht.flags&128)e:for(Ht=en.child;Ht!==null;){if(Ht.tag===13)Ht.memoizedState!==null&&G0(Ht,ln,en);else if(Ht.tag===19)G0(Ht,ln,en);else if(Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===en)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===en)break e;Ht=Ht.return}Ht.sibling.return=Ht.return,Ht=Ht.sibling}An&=1}if(vo(pu,An),!(en.mode&1))en.memoizedState=null;else switch(jn){case"forwards":for(ln=en.child,jn=null;ln!==null;)Ht=ln.alternate,Ht!==null&&ym(Ht)===null&&(jn=ln),ln=ln.sibling;ln=jn,ln===null?(jn=en.child,en.child=null):(jn=ln.sibling,ln.sibling=null),s0(en,!1,jn,ln,nr);break;case"backwards":for(ln=null,jn=en.child,en.child=null;jn!==null;){if(Ht=jn.alternate,Ht!==null&&ym(Ht)===null){en.child=jn;break}Ht=jn.sibling,jn.sibling=ln,ln=jn,jn=Ht}s0(en,!0,ln,null,nr);break;case"together":s0(en,!1,null,null,void 0);break;default:en.memoizedState=null}return en.child}function mp(Ht,en,ln){if(Ht!==null&&(en.dependencies=Ht.dependencies),l0|=en.lanes,!(ln&en.childLanes))return null;if(Ht!==null&&en.child!==Ht.child)throw Error(dt(153));if(en.child!==null){for(Ht=en.child,ln=am(Ht,Ht.pendingProps),en.child=ln,ln.return=en;Ht.sibling!==null;)Ht=Ht.sibling,ln=ln.sibling=am(Ht,Ht.pendingProps),ln.return=en;ln.sibling=null}return en.child}function Iy(Ht,en,ln){switch(en.tag){case 3:Ry(en),fp();break;case 5:gm(en);break;case 1:eu(en.type)&&Xu(en);break;case 4:C0(en,en.stateNode.containerInfo);break;case 10:Q0(en,en.type._context,en.memoizedProps.value);break;case 13:var An=en.memoizedState;if(An!==null)return An.dehydrated!==null?(vo(pu,pu.current&1),en.flags|=128,null):ln&en.child.childLanes?Py(Ht,en,ln):(vo(pu,pu.current&1),Ht=mp(Ht,en,ln),Ht!==null?Ht.sibling:null);vo(pu,pu.current&1);break;case 19:if(An=(ln&en.childLanes)!==0,Ht.flags&128){if(An)return W0(Ht,en,ln);en.flags|=128}var jn=en.memoizedState;if(jn!==null&&(jn.rendering=null,jn.tail=null,jn.lastEffect=null),vo(pu,pu.current),An)break;return null;case 22:case 23:return en.lanes=0,My(Ht,en,ln)}return mp(Ht,en,ln)}function Oy(Ht,en){switch(_0(en),en.tag){case 1:return eu(en.type)&&op(),Ht=en.flags,Ht&65536?(en.flags=Ht&-65537|128,en):null;case 3:return jp(),uo(Ko),uo(Wl),Hm(),Ht=en.flags,Ht&65536&&!(Ht&128)?(en.flags=Ht&-65537|128,en):null;case 5:return Gm(en),null;case 13:if(uo(pu),Ht=en.memoizedState,Ht!==null&&Ht.dehydrated!==null){if(en.alternate===null)throw Error(dt(340));fp()}return Ht=en.flags,Ht&65536?(en.flags=Ht&-65537|128,en):null;case 19:return uo(pu),null;case 4:return jp(),null;case 10:return h0(en.type._context),null;case 22:case 23:return gv(),null;case 24:return null;default:return null}}var a0=!1,sn=!1,or=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function xr(Ht,en){var ln=Ht.ref;if(ln!==null)if(typeof ln=="function")try{ln(null)}catch(An){ep(Ht,en,An)}else ln.current=null}function Pr(Ht,en,ln){try{ln()}catch(An){ep(Ht,en,An)}}var Rr=!1;function js(Ht,en){for(Tn(Ht.containerInfo),Sn=en;Sn!==null;)if(Ht=Sn,en=Ht.child,(Ht.subtreeFlags&1028)!==0&&en!==null)en.return=Ht,Sn=en;else for(;Sn!==null;){Ht=Sn;try{var ln=Ht.alternate;if(Ht.flags&1024)switch(Ht.tag){case 0:case 11:case 15:break;case 1:if(ln!==null){var An=ln.memoizedProps,jn=ln.memoizedState,nr=Ht.stateNode,Lr=nr.getSnapshotBeforeUpdate(Ht.elementType===Ht.type?An:rp(Ht.type,An),jn);nr.__reactInternalSnapshotBeforeUpdate=Lr}break;case 3:$r&&Cs(Ht.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(dt(163))}}catch(Es){ep(Ht,Ht.return,Es)}if(en=Ht.sibling,en!==null){en.return=Ht.return,Sn=en;break}Sn=Ht.return}return ln=Rr,Rr=!1,ln}function Ss(Ht,en,ln){var An=en.updateQueue;if(An=An!==null?An.lastEffect:null,An!==null){var jn=An=An.next;do{if((jn.tag&Ht)===Ht){var nr=jn.destroy;jn.destroy=void 0,nr!==void 0&&Pr(en,ln,nr)}jn=jn.next}while(jn!==An)}}function yo(Ht,en){if(en=en.updateQueue,en=en!==null?en.lastEffect:null,en!==null){var ln=en=en.next;do{if((ln.tag&Ht)===Ht){var An=ln.create;ln.destroy=An()}ln=ln.next}while(ln!==en)}}function ss(Ht){var en=Ht.ref;if(en!==null){var ln=Ht.stateNode;switch(Ht.tag){case 5:Ht=Cn(ln);break;default:Ht=ln}typeof en=="function"?en(Ht):en.current=Ht}}function Us(Ht,en,ln){if(tp&&typeof tp.onCommitFiberUnmount=="function")try{tp.onCommitFiberUnmount(Tp,en)}catch{}switch(en.tag){case 0:case 11:case 14:case 15:if(Ht=en.updateQueue,Ht!==null&&(Ht=Ht.lastEffect,Ht!==null)){var An=Ht=Ht.next;do{var jn=An,nr=jn.destroy;jn=jn.tag,nr!==void 0&&(jn&2||jn&4)&&Pr(en,ln,nr),An=An.next}while(An!==Ht)}break;case 1:if(xr(en,ln),Ht=en.stateNode,typeof Ht.componentWillUnmount=="function")try{Ht.props=en.memoizedProps,Ht.state=en.memoizedState,Ht.componentWillUnmount()}catch(Lr){ep(en,ln,Lr)}break;case 5:xr(en,ln);break;case 4:$r?Ql(Ht,en,ln):Mr&&Mr&&(en=en.stateNode.containerInfo,ln=Ur(en),Cr(en,ln))}}function Yl(Ht,en,ln){for(var An=en;;)if(Us(Ht,An,ln),An.child===null||$r&&An.tag===4){if(An===en)break;for(;An.sibling===null;){if(An.return===null||An.return===en)return;An=An.return}An.sibling.return=An.return,An=An.sibling}else An.child.return=An,An=An.child}function ho(Ht){var en=Ht.alternate;en!==null&&(Ht.alternate=null,ho(en)),Ht.child=null,Ht.deletions=null,Ht.sibling=null,Ht.tag===5&&(en=Ht.stateNode,en!==null&&Fr(en)),Ht.stateNode=null,Ht.return=null,Ht.dependencies=null,Ht.memoizedProps=null,Ht.memoizedState=null,Ht.pendingProps=null,Ht.stateNode=null,Ht.updateQueue=null}function no(Ht){return Ht.tag===5||Ht.tag===3||Ht.tag===4}function Wo(Ht){e:for(;;){for(;Ht.sibling===null;){if(Ht.return===null||no(Ht.return))return null;Ht=Ht.return}for(Ht.sibling.return=Ht.return,Ht=Ht.sibling;Ht.tag!==5&&Ht.tag!==6&&Ht.tag!==18;){if(Ht.flags&2||Ht.child===null||Ht.tag===4)continue e;Ht.child.return=Ht,Ht=Ht.child}if(!(Ht.flags&2))return Ht.stateNode}}function mu(Ht){if($r){e:{for(var en=Ht.return;en!==null;){if(no(en))break e;en=en.return}throw Error(dt(160))}var ln=en;switch(ln.tag){case 5:en=ln.stateNode,ln.flags&32&&(Hr(en),ln.flags&=-33),ln=Wo(Ht),xl(Ht,ln,en);break;case 3:case 4:en=ln.stateNode.containerInfo,ln=Wo(Ht),jl(Ht,ln,en);break;default:throw Error(dt(161))}}}function jl(Ht,en,ln){var An=Ht.tag;if(An===5||An===6)Ht=Ht.stateNode,en?er(ln,Ht,en):ur(ln,Ht);else if(An!==4&&(Ht=Ht.child,Ht!==null))for(jl(Ht,en,ln),Ht=Ht.sibling;Ht!==null;)jl(Ht,en,ln),Ht=Ht.sibling}function xl(Ht,en,ln){var An=Ht.tag;if(An===5||An===6)Ht=Ht.stateNode,en?jr(ln,Ht,en):rr(ln,Ht);else if(An!==4&&(Ht=Ht.child,Ht!==null))for(xl(Ht,en,ln),Ht=Ht.sibling;Ht!==null;)xl(Ht,en,ln),Ht=Ht.sibling}function Ql(Ht,en,ln){for(var An=en,jn=!1,nr,Lr;;){if(!jn){jn=An.return;e:for(;;){if(jn===null)throw Error(dt(160));switch(nr=jn.stateNode,jn.tag){case 5:Lr=!1;break e;case 3:nr=nr.containerInfo,Lr=!0;break e;case 4:nr=nr.containerInfo,Lr=!0;break e}jn=jn.return}jn=!0}if(An.tag===5||An.tag===6)Yl(Ht,An,ln),Lr?Er(nr,An.stateNode):yr(nr,An.stateNode);else if(An.tag===18)Lr?$a(nr,An.stateNode):Ns(nr,An.stateNode);else if(An.tag===4){if(An.child!==null){nr=An.stateNode.containerInfo,Lr=!0,An.child.return=An,An=An.child;continue}}else if(Us(Ht,An,ln),An.child!==null){An.child.return=An,An=An.child;continue}if(An===en)break;for(;An.sibling===null;){if(An.return===null||An.return===en)return;An=An.return,An.tag===4&&(jn=!1)}An.sibling.return=An.return,An=An.sibling}}function Ll(Ht,en){if($r){switch(en.tag){case 0:case 11:case 14:case 15:Ss(3,en,en.return),yo(3,en),Ss(5,en,en.return);return;case 1:return;case 5:var ln=en.stateNode;if(ln!=null){var An=en.memoizedProps;Ht=Ht!==null?Ht.memoizedProps:An;var jn=en.type,nr=en.updateQueue;en.updateQueue=null,nr!==null&&Gr(ln,nr,jn,Ht,An,en)}return;case 6:if(en.stateNode===null)throw Error(dt(162));ln=en.memoizedProps,Sr(en.stateNode,Ht!==null?Ht.memoizedProps:ln,ln);return;case 3:Jn&&Ht!==null&&Ht.memoizedState.isDehydrated&&br(en.stateNode.containerInfo);return;case 12:return;case 13:co(en);return;case 19:co(en);return;case 17:return}throw Error(dt(163))}switch(en.tag){case 0:case 11:case 14:case 15:Ss(3,en,en.return),yo(3,en),Ss(5,en,en.return);return;case 12:return;case 13:co(en);return;case 19:co(en);return;case 3:Jn&&Ht!==null&&Ht.memoizedState.isDehydrated&&br(en.stateNode.containerInfo);break;case 22:case 23:return}e:if(Mr){switch(en.tag){case 1:case 5:case 6:break e;case 3:case 4:en=en.stateNode,Cr(en.containerInfo,en.pendingChildren);break e}throw Error(dt(163))}}function co(Ht){var en=Ht.updateQueue;if(en!==null){Ht.updateQueue=null;var ln=Ht.stateNode;ln===null&&(ln=Ht.stateNode=new or),en.forEach(function(An){var jn=Hv.bind(null,Ht,An);ln.has(An)||(ln.add(An),An.then(jn,jn))})}}function _c(Ht,en){for(Sn=en;Sn!==null;){en=Sn;var ln=en.deletions;if(ln!==null)for(var An=0;An<ln.length;An++){var jn=ln[An];try{var nr=Ht;$r?Ql(nr,jn,en):Yl(nr,jn,en);var Lr=jn.alternate;Lr!==null&&(Lr.return=null),jn.return=null}catch(bo){ep(jn,en,bo)}}if(ln=en.child,en.subtreeFlags&12854&&ln!==null)ln.return=en,Sn=ln;else for(;Sn!==null;){en=Sn;try{var Es=en.flags;if(Es&32&&$r&&Hr(en.stateNode),Es&512){var to=en.alternate;if(to!==null){var so=to.ref;so!==null&&(typeof so=="function"?so(null):so.current=null)}}if(Es&8192)switch(en.tag){case 13:if(en.memoizedState!==null){var _o=en.alternate;(_o===null||_o.memoizedState===null)&&(uv=Su())}break;case 22:var wl=en.memoizedState!==null,Xo=en.alternate,hu=Xo!==null&&Xo.memoizedState!==null;if(ln=en,$r){e:if(An=ln,jn=wl,nr=null,$r)for(var wo=An;;){if(wo.tag===5){if(nr===null){nr=wo;var zu=wo.stateNode;jn?lr(zu):Hn(wo.stateNode,wo.memoizedProps)}}else if(wo.tag===6){if(nr===null){var _p=wo.stateNode;jn?Br(_p):kr(_p,wo.memoizedProps)}}else if((wo.tag!==22&&wo.tag!==23||wo.memoizedState===null||wo===An)&&wo.child!==null){wo.child.return=wo,wo=wo.child;continue}if(wo===An)break;for(;wo.sibling===null;){if(wo.return===null||wo.return===An)break e;nr===wo&&(nr=null),wo=wo.return}nr===wo&&(nr=null),wo.sibling.return=wo.return,wo=wo.sibling}}if(wl&&!hu&&ln.mode&1){Sn=ln;for(var Xs=ln.child;Xs!==null;){for(ln=Sn=Xs;Sn!==null;){An=Sn;var Is=An.child;switch(An.tag){case 0:case 11:case 14:case 15:Ss(4,An,An.return);break;case 1:xr(An,An.return);var eo=An.stateNode;if(typeof eo.componentWillUnmount=="function"){var po=An.return;try{eo.props=An.memoizedProps,eo.state=An.memoizedState,eo.componentWillUnmount()}catch(bo){ep(An,po,bo)}}break;case 5:xr(An,An.return);break;case 22:if(An.memoizedState!==null){Gl(ln);continue}}Is!==null?(Is.return=An,Sn=Is):Gl(ln)}Xs=Xs.sibling}}}switch(Es&4102){case 2:mu(en),en.flags&=-3;break;case 6:mu(en),en.flags&=-3,Ll(en.alternate,en);break;case 4096:en.flags&=-4097;break;case 4100:en.flags&=-4097,Ll(en.alternate,en);break;case 4:Ll(en.alternate,en)}}catch(bo){ep(en,en.return,bo)}if(ln=en.sibling,ln!==null){ln.return=en.return,Sn=ln;break}Sn=en.return}}}function wu(Ht,en,ln){Sn=Ht,Ho(Ht)}function Ho(Ht,en,ln){for(var An=(Ht.mode&1)!==0;Sn!==null;){var jn=Sn,nr=jn.child;if(jn.tag===22&&An){var Lr=jn.memoizedState!==null||a0;if(!Lr){var Es=jn.alternate,to=Es!==null&&Es.memoizedState!==null||sn;Es=a0;var so=sn;if(a0=Lr,(sn=to)&&!so)for(Sn=jn;Sn!==null;)Lr=Sn,to=Lr.child,Lr.tag===22&&Lr.memoizedState!==null?Jo(jn):to!==null?(to.return=Lr,Sn=to):Jo(jn);for(;nr!==null;)Sn=nr,Ho(nr),nr=nr.sibling;Sn=jn,a0=Es,sn=so}su(Ht)}else jn.subtreeFlags&8772&&nr!==null?(nr.return=jn,Sn=nr):su(Ht)}}function su(Ht){for(;Sn!==null;){var en=Sn;if(en.flags&8772){var ln=en.alternate;try{if(en.flags&8772)switch(en.tag){case 0:case 11:case 15:sn||yo(5,en);break;case 1:var An=en.stateNode;if(en.flags&4&&!sn)if(ln===null)An.componentDidMount();else{var jn=en.elementType===en.type?ln.memoizedProps:rp(en.type,ln.memoizedProps);An.componentDidUpdate(jn,ln.memoizedState,An.__reactInternalSnapshotBeforeUpdate)}var nr=en.updateQueue;nr!==null&&ty(en,nr,An);break;case 3:var Lr=en.updateQueue;if(Lr!==null){if(ln=null,en.child!==null)switch(en.child.tag){case 5:ln=Cn(en.child.stateNode);break;case 1:ln=en.child.stateNode}ty(en,Lr,ln)}break;case 5:var Es=en.stateNode;ln===null&&en.flags&4&&gr(Es,en.type,en.memoizedProps,en);break;case 6:break;case 4:break;case 12:break;case 13:if(Jn&&en.memoizedState===null){var to=en.alternate;if(to!==null){var so=to.memoizedState;if(so!==null){var _o=so.dehydrated;_o!==null&&ls(_o)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(dt(163))}sn||en.flags&512&&ss(en)}catch(wl){ep(en,en.return,wl)}}if(en===Ht){Sn=null;break}if(ln=en.sibling,ln!==null){ln.return=en.return,Sn=ln;break}Sn=en.return}}function Gl(Ht){for(;Sn!==null;){var en=Sn;if(en===Ht){Sn=null;break}var ln=en.sibling;if(ln!==null){ln.return=en.return,Sn=ln;break}Sn=en.return}}function Jo(Ht){for(;Sn!==null;){var en=Sn;try{switch(en.tag){case 0:case 11:case 15:var ln=en.return;try{yo(4,en)}catch(to){ep(en,ln,to)}break;case 1:var An=en.stateNode;if(typeof An.componentDidMount=="function"){var jn=en.return;try{An.componentDidMount()}catch(to){ep(en,jn,to)}}var nr=en.return;try{ss(en)}catch(to){ep(en,nr,to)}break;case 5:var Lr=en.return;try{ss(en)}catch(to){ep(en,Lr,to)}}}catch(to){ep(en,en.return,to)}if(en===Ht){Sn=null;break}var Es=en.sibling;if(Es!==null){Es.return=en.return,Sn=Es;break}Sn=en.return}}var Dl=0,gp=1,Am=2,Wp=3,Hp=4;if(typeof Symbol=="function"&&Symbol.for){var H0=Symbol.for;Dl=H0("selector.component"),gp=H0("selector.has_pseudo_class"),Am=H0("selector.role"),Wp=H0("selector.test_id"),Hp=H0("selector.text")}function iv(Ht){var en=hr(Ht);if(en!=null){if(typeof en.memoizedProps["data-testname"]!="string")throw Error(dt(364));return en}if(Ht=Qn(Ht),Ht===null)throw Error(dt(362));return Ht.stateNode.current}function sv(Ht,en){switch(en.$$typeof){case Dl:if(Ht.type===en.value)return!0;break;case gp:e:{en=en.value,Ht=[Ht,0];for(var ln=0;ln<Ht.length;){var An=Ht[ln++],jn=Ht[ln++],nr=en[jn];if(An.tag!==5||!pr(An)){for(;nr!=null&&sv(An,nr);)jn++,nr=en[jn];if(jn===en.length){en=!0;break e}else for(An=An.child;An!==null;)Ht.push(An,jn),An=An.sibling}}en=!1}return en;case Am:if(Ht.tag===5&&Tr(Ht.stateNode,en.value))return!0;break;case Hp:if((Ht.tag===5||Ht.tag===6)&&(Ht=Ir(Ht),Ht!==null&&0<=Ht.indexOf(en.value)))return!0;break;case Wp:if(Ht.tag===5&&(Ht=Ht.memoizedProps["data-testname"],typeof Ht=="string"&&Ht.toLowerCase()===en.value.toLowerCase()))return!0;break;default:throw Error(dt(365))}return!1}function av(Ht){switch(Ht.$$typeof){case Dl:return"<"+(Xt(Ht.value)||"Unknown")+">";case gp:return":has("+(av(Ht)||"")+")";case Am:return'[role="'+Ht.value+'"]';case Hp:return'"'+Ht.value+'"';case Wp:return'[data-testname="'+Ht.value+'"]';default:throw Error(dt(365))}}function Ev(Ht,en){var ln=[];Ht=[Ht,0];for(var An=0;An<Ht.length;){var jn=Ht[An++],nr=Ht[An++],Lr=en[nr];if(jn.tag!==5||!pr(jn)){for(;Lr!=null&&sv(jn,Lr);)nr++,Lr=en[nr];if(nr===en.length)ln.push(jn);else for(jn=jn.child;jn!==null;)Ht.push(jn,nr),jn=jn.sibling}}return ln}function ov(Ht,en){if(!cr)throw Error(dt(363));Ht=iv(Ht),Ht=Ev(Ht,en),en=[],Ht=Array.from(Ht);for(var ln=0;ln<Ht.length;){var An=Ht[ln++];if(An.tag===5)pr(An)||en.push(An.stateNode);else for(An=An.child;An!==null;)Ht.push(An),An=An.sibling}return en}var Bv=Math.ceil,Ly=yt.ReactCurrentDispatcher,lv=yt.ReactCurrentOwner,bu=yt.ReactCurrentBatchConfig,zl=0,Cu=null,Mu=null,Bu=0,ap=0,o0=Jl(0),$u=0,K0=null,l0=0,Dy=0,cv=0,X0=null,_f=null,uv=0,dv=1/0;function c0(){dv=Su()+500}var Fy=!1,fv=null,nm=null,ky=!1,rm=null,Ny=0,Y0=0,hv=null,By=-1,Uy=0;function Hu(){return zl&6?Su():By!==-1?By:By=Su()}function im(Ht){return Ht.mode&1?zl&2&&Bu!==0?Bu&-Bu:qy.transition!==null?(Uy===0&&(Ht=lp,lp<<=1,!(lp&4194240)&&(lp=64),Uy=Ht),Uy):(Ht=Xl,Ht!==0?Ht:Nr()):1}function yp(Ht,en,ln){if(50<Y0)throw Y0=0,hv=null,Error(dt(185));var An=zy(Ht,en);return An===null?null:(Vl(An,en,ln),(!(zl&2)||An!==Cu)&&(An===Cu&&(!(zl&2)&&(Dy|=en),$u===4&&sm(An,Bu)),_h(An,ln),en===1&&zl===0&&!(Ht.mode&1)&&(c0(),Fm&&cp())),An)}function zy(Ht,en){Ht.lanes|=en;var ln=Ht.alternate;for(ln!==null&&(ln.lanes|=en),ln=Ht,Ht=Ht.return;Ht!==null;)Ht.childLanes|=en,ln=Ht.alternate,ln!==null&&(ln.childLanes|=en),ln=Ht,Ht=Ht.return;return ln.tag===3?ln.stateNode:null}function _h(Ht,en){var ln=Ht.callbackNode;Mp(Ht,en);var An=Om(Ht,Ht===Cu?Bu:0);if(An===0)ln!==null&&Dm(ln),Ht.callbackNode=null,Ht.callbackPriority=0;else if(en=An&-An,Ht.callbackPriority!==en){if(ln!=null&&Dm(ln),en===1)Ht.tag===0?Yy(Cv.bind(null,Ht)):J0(Cv.bind(null,Ht)),Yr?cs(function(){zl===0&&cp()}):Lm(qu,cp),ln=null;else{switch(Dp(An)){case 1:ln=qu;break;case 4:ln=dm;break;case 16:ln=u0;break;case 536870912:ln=Ky;break;default:ln=u0}ln=Lv(ln,wv.bind(null,Ht))}Ht.callbackPriority=en,Ht.callbackNode=ln}}function wv(Ht,en){if(By=-1,Uy=0,zl&6)throw Error(dt(327));var ln=Ht.callbackNode;if(Pm()&&Ht.callbackNode!==ln)return null;var An=Om(Ht,Ht===Cu?Bu:0);if(An===0)return null;if(An&30||An&Ht.expiredLanes||en)en=jy(Ht,An);else{en=An;var jn=zl;zl|=2;var nr=Av();(Cu!==Ht||Bu!==en)&&(c0(),Rm(Ht,en));do try{jv();break}catch(Es){Tv(Ht,Es)}while(!0);f0(),Ly.current=nr,zl=jn,Mu!==null?en=0:(Cu=null,Bu=0,en=$u)}if(en!==0){if(en===2&&(jn=Du(Ht),jn!==0&&(An=jn,en=pv(Ht,jn))),en===1)throw ln=K0,Rm(Ht,0),sm(Ht,An),_h(Ht,Su()),ln;if(en===6)sm(Ht,An);else{if(jn=Ht.current.alternate,!(An&30)&&!Uv(jn)&&(en=jy(Ht,An),en===2&&(nr=Du(Ht),nr!==0&&(An=nr,en=pv(Ht,nr))),en===1))throw ln=K0,Rm(Ht,0),sm(Ht,An),_h(Ht,Su()),ln;switch(Ht.finishedWork=jn,Ht.finishedLanes=An,en){case 0:case 1:throw Error(dt(345));case 2:$m(Ht,_f);break;case 3:if(sm(Ht,An),(An&130023424)===An&&(en=uv+500-Su(),10<en)){if(Om(Ht,0)!==0)break;if(jn=Ht.suspendedLanes,(jn&An)!==An){Hu(),Ht.pingedLanes|=Ht.suspendedLanes&jn;break}Ht.timeoutHandle=fr($m.bind(null,Ht,_f),en);break}$m(Ht,_f);break;case 4:if(sm(Ht,An),(An&4194240)===An)break;for(en=Ht.eventTimes,jn=-1;0<An;){var Lr=31-_u(An);nr=1<<Lr,Lr=en[Lr],Lr>jn&&(jn=Lr),An&=~nr}if(An=jn,An=Su()-An,An=(120>An?120:480>An?480:1080>An?1080:1920>An?1920:3e3>An?3e3:4320>An?4320:1960*Bv(An/1960))-An,10<An){Ht.timeoutHandle=fr($m.bind(null,Ht,_f),An);break}$m(Ht,_f);break;case 5:$m(Ht,_f);break;default:throw Error(dt(329))}}}return _h(Ht,Su()),Ht.callbackNode===ln?wv.bind(null,Ht):null}function pv(Ht,en){var ln=X0;return Ht.current.memoizedState.isDehydrated&&(Rm(Ht,en).flags|=256),Ht=jy(Ht,en),Ht!==2&&(en=_f,_f=ln,en!==null&&mv(en)),Ht}function mv(Ht){_f===null?_f=Ht:_f.push.apply(_f,Ht)}function Uv(Ht){for(var en=Ht;;){if(en.flags&16384){var ln=en.updateQueue;if(ln!==null&&(ln=ln.stores,ln!==null))for(var An=0;An<ln.length;An++){var jn=ln[An],nr=jn.getSnapshot;jn=jn.value;try{if(!np(nr(),jn))return!1}catch{return!1}}}if(ln=en.child,en.subtreeFlags&16384&&ln!==null)ln.return=en,en=ln;else{if(en===Ht)break;for(;en.sibling===null;){if(en.return===null||en.return===Ht)return!0;en=en.return}en.sibling.return=en.return,en=en.sibling}}return!0}function sm(Ht,en){for(en&=~cv,en&=~Dy,Ht.suspendedLanes|=en,Ht.pingedLanes&=~en,Ht=Ht.expirationTimes;0<en;){var ln=31-_u(en),An=1<<ln;Ht[ln]=-1,en&=~An}}function Cv(Ht){if(zl&6)throw Error(dt(327));Pm();var en=Om(Ht,0);if(!(en&1))return _h(Ht,Su()),null;var ln=jy(Ht,en);if(Ht.tag!==0&&ln===2){var An=Du(Ht);An!==0&&(en=An,ln=pv(Ht,An))}if(ln===1)throw ln=K0,Rm(Ht,0),sm(Ht,en),_h(Ht,Su()),ln;if(ln===6)throw Error(dt(345));return Ht.finishedWork=Ht.current.alternate,Ht.finishedLanes=en,$m(Ht,_f),_h(Ht,Su()),null}function Mv(Ht){rm!==null&&rm.tag===0&&!(zl&6)&&Pm();var en=zl;zl|=1;var ln=bu.transition,An=Xl;try{if(bu.transition=null,Xl=1,Ht)return Ht()}finally{Xl=An,bu.transition=ln,zl=en,!(zl&6)&&cp()}}function gv(){ap=o0.current,uo(o0)}function Rm(Ht,en){Ht.finishedWork=null,Ht.finishedLanes=0;var ln=Ht.timeoutHandle;if(ln!==vr&&(Ht.timeoutHandle=vr,mr(ln)),Mu!==null)for(ln=Mu.return;ln!==null;){var An=ln;switch(_0(An),An.tag){case 1:An=An.type.childContextTypes,An!=null&&op();break;case 3:jp(),uo(Ko),uo(Wl),Hm();break;case 5:Gm(An);break;case 4:jp();break;case 13:uo(pu);break;case 19:uo(pu);break;case 10:h0(An.type._context);break;case 22:case 23:gv()}ln=ln.return}if(Cu=Ht,Mu=Ht=am(Ht.current,null),Bu=ap=en,$u=0,K0=null,cv=Dy=l0=0,_f=X0=null,up!==null){for(en=0;en<up.length;en++)if(ln=up[en],An=ln.interleaved,An!==null){ln.interleaved=null;var jn=An.next,nr=ln.pending;if(nr!==null){var Lr=nr.next;nr.next=jn,An.next=Lr}ln.pending=An}up=null}return Ht}function Tv(Ht,en){do{var ln=Mu;try{if(f0(),vm.current=e0,Jp){for(var An=yu.memoizedState;An!==null;){var jn=An.queue;jn!==null&&(jn.pending=null),An=An.next}Jp=!1}if(Vp=0,cu=xu=yu=null,Qp=!1,Gp=0,lv.current=null,ln===null||ln.return===null){$u=1,K0=en,Mu=null;break}e:{var nr=Ht,Lr=ln.return,Es=ln,to=en;if(en=Bu,Es.flags|=32768,to!==null&&typeof to=="object"&&typeof to.then=="function"){var so=to,_o=Es,wl=_o.tag;if(!(_o.mode&1)&&(wl===0||wl===11||wl===15)){var Xo=_o.alternate;Xo?(_o.updateQueue=Xo.updateQueue,_o.memoizedState=Xo.memoizedState,_o.lanes=Xo.lanes):(_o.updateQueue=null,_o.memoizedState=null)}var hu=hp(Lr);if(hu!==null){hu.flags&=-257,Sy(hu,Lr,Es,nr,en),hu.mode&1&&by(nr,so,en),en=hu,to=so;var wo=en.updateQueue;if(wo===null){var zu=new Set;zu.add(to),en.updateQueue=zu}else wo.add(to);break e}else{if(!(en&1)){by(nr,so,en),yv();break e}to=Error(dt(426))}}else if(du&&Es.mode&1){var _p=hp(Lr);if(_p!==null){!(_p.flags&65536)&&(_p.flags|=256),Sy(_p,Lr,Es,nr,en),E0(to);break e}}nr=to,$u!==4&&($u=2),X0===null?X0=[nr]:X0.push(nr),to=F0(to,Es),Es=Lr;do{switch(Es.tag){case 3:Es.flags|=65536,en&=-en,Es.lanes|=en;var Xs=vy(Es,to,en);m0(Es,Xs);break e;case 1:nr=to;var Is=Es.type,eo=Es.stateNode;if(!(Es.flags&128)&&(typeof Is.getDerivedStateFromError=="function"||eo!==null&&typeof eo.componentDidCatch=="function"&&(nm===null||!nm.has(eo)))){Es.flags|=65536,en&=-en,Es.lanes|=en;var po=xy(Es,nr,en);m0(Es,po);break e}}Es=Es.return}while(Es!==null)}$v(ln)}catch(bo){en=bo,Mu===ln&&ln!==null&&(Mu=ln=ln.return);continue}break}while(!0)}function Av(){var Ht=Ly.current;return Ly.current=e0,Ht===null?e0:Ht}function yv(){($u===0||$u===3||$u===2)&&($u=4),Cu===null||!(l0&268435455)&&!(Dy&268435455)||sm(Cu,Bu)}function jy(Ht,en){var ln=zl;zl|=2;var An=Av();Cu===Ht&&Bu===en||Rm(Ht,en);do try{zv();break}catch(jn){Tv(Ht,jn)}while(!0);if(f0(),zl=ln,Ly.current=An,Mu!==null)throw Error(dt(261));return Cu=null,Bu=0,$u}function zv(){for(;Mu!==null;)Rv(Mu)}function jv(){for(;Mu!==null&&!Kp();)Rv(Mu)}function Rv(Ht){var en=Ov(Ht.alternate,Ht,ap);Ht.memoizedProps=Ht.pendingProps,en===null?$v(Ht):Mu=en,lv.current=null}function $v(Ht){var en=Ht;do{var ln=en.alternate;if(Ht=en.return,en.flags&32768){if(ln=Oy(ln,en),ln!==null){ln.flags&=32767,Mu=ln;return}if(Ht!==null)Ht.flags|=32768,Ht.subtreeFlags=0,Ht.deletions=null;else{$u=6,Mu=null;return}}else if(ln=rv(ln,en,ap),ln!==null){Mu=ln;return}if(en=en.sibling,en!==null){Mu=en;return}Mu=en=Ht}while(en!==null);$u===0&&($u=5)}function $m(Ht,en){var ln=Xl,An=bu.transition;try{bu.transition=null,Xl=1,Vv(Ht,en,ln)}finally{bu.transition=An,Xl=ln}return null}function Vv(Ht,en,ln){do Pm();while(rm!==null);if(zl&6)throw Error(dt(327));var An=Ht.finishedWork,jn=Ht.finishedLanes;if(An===null)return null;if(Ht.finishedWork=null,Ht.finishedLanes=0,An===Ht.current)throw Error(dt(177));Ht.callbackNode=null,Ht.callbackPriority=0;var nr=An.lanes|An.childLanes;if(cm(Ht,nr),Ht===Cu&&(Mu=Cu=null,Bu=0),!(An.subtreeFlags&2064)&&!(An.flags&2064)||ky||(ky=!0,Lv(u0,function(){return Pm(),null})),nr=(An.flags&15990)!==0,An.subtreeFlags&15990||nr){nr=bu.transition,bu.transition=null;var Lr=Xl;Xl=1;var Es=zl;zl|=4,lv.current=null,js(Ht,An),_c(Ht,An),Pn(Ht.containerInfo),Ht.current=An,wu(An),Hy(),zl=Es,Xl=Lr,bu.transition=nr}else Ht.current=An;if(ky&&(ky=!1,rm=Ht,Ny=jn),nr=Ht.pendingLanes,nr===0&&(nm=null),Z0(An.stateNode),_h(Ht,Su()),en!==null)for(ln=Ht.onRecoverableError,An=0;An<en.length;An++)ln(en[An]);if(Fy)throw Fy=!1,Ht=fv,fv=null,Ht;return Ny&1&&Ht.tag!==0&&Pm(),nr=Ht.pendingLanes,nr&1?Ht===hv?Y0++:(Y0=0,hv=Ht):Y0=0,cp(),null}function Pm(){if(rm!==null){var Ht=Dp(Ny),en=bu.transition,ln=Xl;try{if(bu.transition=null,Xl=16>Ht?16:Ht,rm===null)var An=!1;else{if(Ht=rm,rm=null,Ny=0,zl&6)throw Error(dt(331));var jn=zl;for(zl|=4,Sn=Ht.current;Sn!==null;){var nr=Sn,Lr=nr.child;if(Sn.flags&16){var Es=nr.deletions;if(Es!==null){for(var to=0;to<Es.length;to++){var so=Es[to];for(Sn=so;Sn!==null;){var _o=Sn;switch(_o.tag){case 0:case 11:case 15:Ss(8,_o,nr)}var wl=_o.child;if(wl!==null)wl.return=_o,Sn=wl;else for(;Sn!==null;){_o=Sn;var Xo=_o.sibling,hu=_o.return;if(ho(_o),_o===so){Sn=null;break}if(Xo!==null){Xo.return=hu,Sn=Xo;break}Sn=hu}}}var wo=nr.alternate;if(wo!==null){var zu=wo.child;if(zu!==null){wo.child=null;do{var _p=zu.sibling;zu.sibling=null,zu=_p}while(zu!==null)}}Sn=nr}}if(nr.subtreeFlags&2064&&Lr!==null)Lr.return=nr,Sn=Lr;else e:for(;Sn!==null;){if(nr=Sn,nr.flags&2048)switch(nr.tag){case 0:case 11:case 15:Ss(9,nr,nr.return)}var Xs=nr.sibling;if(Xs!==null){Xs.return=nr.return,Sn=Xs;break e}Sn=nr.return}}var Is=Ht.current;for(Sn=Is;Sn!==null;){Lr=Sn;var eo=Lr.child;if(Lr.subtreeFlags&2064&&eo!==null)eo.return=Lr,Sn=eo;else e:for(Lr=Is;Sn!==null;){if(Es=Sn,Es.flags&2048)try{switch(Es.tag){case 0:case 11:case 15:yo(9,Es)}}catch(bo){ep(Es,Es.return,bo)}if(Es===Lr){Sn=null;break e}var po=Es.sibling;if(po!==null){po.return=Es.return,Sn=po;break e}Sn=Es.return}}if(zl=jn,cp(),tp&&typeof tp.onPostCommitFiberRoot=="function")try{tp.onPostCommitFiberRoot(Tp,Ht)}catch{}An=!0}return An}finally{Xl=ln,bu.transition=en}}return!1}function Pv(Ht,en,ln){en=F0(ln,en),en=vy(Ht,en,1),Rp(Ht,en),en=Hu(),Ht=zy(Ht,1),Ht!==null&&(Vl(Ht,1,en),_h(Ht,en))}function ep(Ht,en,ln){if(Ht.tag===3)Pv(Ht,Ht,ln);else for(;en!==null;){if(en.tag===3){Pv(en,Ht,ln);break}else if(en.tag===1){var An=en.stateNode;if(typeof en.type.getDerivedStateFromError=="function"||typeof An.componentDidCatch=="function"&&(nm===null||!nm.has(An))){Ht=F0(ln,Ht),Ht=xy(en,Ht,1),Rp(en,Ht),Ht=Hu(),en=zy(en,1),en!==null&&(Vl(en,1,Ht),_h(en,Ht));break}}en=en.return}}function Gv(Ht,en,ln){var An=Ht.pingCache;An!==null&&An.delete(en),en=Hu(),Ht.pingedLanes|=Ht.suspendedLanes&ln,Cu===Ht&&(Bu&ln)===ln&&($u===4||$u===3&&(Bu&130023424)===Bu&&500>Su()-uv?Rm(Ht,0):cv|=ln),_h(Ht,en)}function Iv(Ht,en){en===0&&(Ht.mode&1?(en=lm,lm<<=1,!(lm&130023424)&&(lm=4194304)):en=1);var ln=Hu();Ht=zy(Ht,en),Ht!==null&&(Vl(Ht,en,ln),_h(Ht,ln))}function Wv(Ht){var en=Ht.memoizedState,ln=0;en!==null&&(ln=en.retryLane),Iv(Ht,ln)}function Hv(Ht,en){var ln=0;switch(Ht.tag){case 13:var An=Ht.stateNode,jn=Ht.memoizedState;jn!==null&&(ln=jn.retryLane);break;case 19:An=Ht.stateNode;break;default:throw Error(dt(314))}An!==null&&An.delete(en),Iv(Ht,ln)}var Ov;Ov=function(Ht,en,ln){if(Ht!==null)if(Ht.memoizedProps!==en.pendingProps||Ko.current)ku=!0;else{if(!(Ht.lanes&ln)&&!(en.flags&128))return ku=!1,Iy(Ht,en,ln);ku=!!(Ht.flags&131072)}else ku=!1,du&&en.flags&1048576&&hm(en,jm,en.index);switch(en.lanes=0,en.tag){case 2:var An=en.type;Ht!==null&&(Ht.alternate=null,en.alternate=null,en.flags|=2),Ht=en.pendingProps;var jn=Lu(en,Wl.current);kp(en,ln),jn=Xm(null,en,An,Ht,jn,ln);var nr=em();return en.flags|=1,typeof jn=="object"&&jn!==null&&typeof jn.render=="function"&&jn.$$typeof===void 0?(en.tag=1,en.memoizedState=null,en.updateQueue=null,eu(An)?(nr=!0,Xu(en)):nr=!1,en.memoizedState=jn.state!==null&&jn.state!==void 0?jn.state:null,p0(en),jn.updater=Np,en.stateNode=jn,jn._reactInternals=en,y0(en,An,Ht,ln),en=U0(null,en,An,!0,nr,ln)):(en.tag=0,du&&nr&&v0(en),Nu(null,en,jn,ln),en=en.child),en;case 16:An=en.elementType;e:{switch(Ht!==null&&(Ht.alternate=null,en.alternate=null,en.flags|=2),Ht=en.pendingProps,jn=An._init,An=jn(An._payload),en.type=An,jn=en.tag=Xv(An),Ht=rp(An,Ht),jn){case 0:en=B0(null,en,An,Ht,ln);break e;case 1:en=Ay(null,en,An,Ht,ln);break e;case 11:en=Ey(null,en,An,Ht,ln);break e;case 14:en=wy(null,en,An,rp(An.type,Ht),ln);break e}throw Error(dt(306,An,""))}return en;case 0:return An=en.type,jn=en.pendingProps,jn=en.elementType===An?jn:rp(An,jn),B0(Ht,en,An,jn,ln);case 1:return An=en.type,jn=en.pendingProps,jn=en.elementType===An?jn:rp(An,jn),Ay(Ht,en,An,jn,ln);case 3:e:{if(Ry(en),Ht===null)throw Error(dt(387));An=en.pendingProps,nr=en.memoizedState,jn=nr.element,ey(Ht,en),Um(en,An,null,ln);var Lr=en.memoizedState;if(An=Lr.element,Jn&&nr.isDehydrated)if(nr={element:An,isDehydrated:!1,cache:Lr.cache,transitions:Lr.transitions},en.updateQueue.baseState=nr,en.memoizedState=nr,en.flags&256){jn=Error(dt(423)),en=$y(Ht,en,An,ln,jn);break e}else if(An!==jn){jn=Error(dt(424)),en=$y(Ht,en,An,ln,jn);break e}else for(Jn&&(Uu=Hl(en.stateNode.containerInfo),Eu=en,du=!0,Gu=null,qp=!1),ln=Pp(en,null,An,ln),en.child=ln;ln;)ln.flags=ln.flags&-3|4096,ln=ln.sibling;else{if(fp(),An===jn){en=mp(Ht,en,ln);break e}Nu(Ht,en,An,ln)}en=en.child}return en;case 5:return gm(en),Ht===null&&S0(en),An=en.type,jn=en.pendingProps,nr=Ht!==null?Ht.memoizedProps:null,Lr=jn.children,Wn(An,jn)?Lr=null:nr!==null&&Wn(An,nr)&&(en.flags|=32),Ty(Ht,en),Nu(Ht,en,Lr,ln),en.child;case 6:return Ht===null&&S0(en),null;case 13:return Py(Ht,en,ln);case 4:return C0(en,en.stateNode.containerInfo),An=en.pendingProps,Ht===null?en.child=Cp(en,null,An,ln):Nu(Ht,en,An,ln),en.child;case 11:return An=en.type,jn=en.pendingProps,jn=en.elementType===An?jn:rp(An,jn),Ey(Ht,en,An,jn,ln);case 7:return Nu(Ht,en,en.pendingProps,ln),en.child;case 8:return Nu(Ht,en,en.pendingProps.children,ln),en.child;case 12:return Nu(Ht,en,en.pendingProps.children,ln),en.child;case 10:e:{if(An=en.type._context,jn=en.pendingProps,nr=en.memoizedProps,Lr=jn.value,Q0(en,An,Lr),nr!==null)if(np(nr.value,Lr)){if(nr.children===jn.children&&!Ko.current){en=mp(Ht,en,ln);break e}}else for(nr=en.child,nr!==null&&(nr.return=en);nr!==null;){var Es=nr.dependencies;if(Es!==null){Lr=nr.child;for(var to=Es.firstContext;to!==null;){if(to.context===An){if(nr.tag===1){to=Vu(-1,ln&-ln),to.tag=2;var so=nr.updateQueue;if(so!==null){so=so.shared;var _o=so.pending;_o===null?to.next=to:(to.next=_o.next,_o.next=to),so.pending=to}}nr.lanes|=ln,to=nr.alternate,to!==null&&(to.lanes|=ln),Yp(nr.return,ln,en),Es.lanes|=ln;break}to=to.next}}else if(nr.tag===10)Lr=nr.type===en.type?null:nr.child;else if(nr.tag===18){if(Lr=nr.return,Lr===null)throw Error(dt(341));Lr.lanes|=ln,Es=Lr.alternate,Es!==null&&(Es.lanes|=ln),Yp(Lr,ln,en),Lr=nr.sibling}else Lr=nr.child;if(Lr!==null)Lr.return=nr;else for(Lr=nr;Lr!==null;){if(Lr===en){Lr=null;break}if(nr=Lr.sibling,nr!==null){nr.return=Lr.return,Lr=nr;break}Lr=Lr.return}nr=Lr}Nu(Ht,en,jn.children,ln),en=en.child}return en;case 9:return jn=en.type,An=en.pendingProps.children,kp(en,ln),jn=Pu(jn),An=An(jn),en.flags|=1,Nu(Ht,en,An,ln),en.child;case 14:return An=en.type,jn=rp(An,en.pendingProps),jn=rp(An.type,jn),wy(Ht,en,An,jn,ln);case 15:return Cy(Ht,en,en.type,en.pendingProps,ln);case 17:return An=en.type,jn=en.pendingProps,jn=en.elementType===An?jn:rp(An,jn),Ht!==null&&(Ht.alternate=null,en.alternate=null,en.flags|=2),en.tag=1,eu(An)?(Ht=!0,Xu(en)):Ht=!1,kp(en,ln),iy(en,An,jn),y0(en,An,jn,ln),U0(null,en,An,!0,Ht,ln);case 19:return W0(Ht,en,ln);case 22:return My(Ht,en,ln)}throw Error(dt(156,en.tag))};function Lv(Ht,en){return Lm(Ht,en)}function Kv(Ht,en,ln,An){this.tag=Ht,this.key=ln,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=en,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=An,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vp(Ht,en,ln,An){return new Kv(Ht,en,ln,An)}function vv(Ht){return Ht=Ht.prototype,!(!Ht||!Ht.isReactComponent)}function Xv(Ht){if(typeof Ht=="function")return vv(Ht)?1:0;if(Ht!=null){if(Ht=Ht.$$typeof,Ht===Rt)return 11;if(Ht===Pt)return 14}return 2}function am(Ht,en){var ln=Ht.alternate;return ln===null?(ln=vp(Ht.tag,en,Ht.key,Ht.mode),ln.elementType=Ht.elementType,ln.type=Ht.type,ln.stateNode=Ht.stateNode,ln.alternate=Ht,Ht.alternate=ln):(ln.pendingProps=en,ln.type=Ht.type,ln.flags=0,ln.subtreeFlags=0,ln.deletions=null),ln.flags=Ht.flags&14680064,ln.childLanes=Ht.childLanes,ln.lanes=Ht.lanes,ln.child=Ht.child,ln.memoizedProps=Ht.memoizedProps,ln.memoizedState=Ht.memoizedState,ln.updateQueue=Ht.updateQueue,en=Ht.dependencies,ln.dependencies=en===null?null:{lanes:en.lanes,firstContext:en.firstContext},ln.sibling=Ht.sibling,ln.index=Ht.index,ln.ref=Ht.ref,ln}function Vy(Ht,en,ln,An,jn,nr){var Lr=2;if(An=Ht,typeof Ht=="function")vv(Ht)&&(Lr=1);else if(typeof Ht=="string")Lr=5;else e:switch(Ht){case bt:return Im(ln.children,jn,nr,en);case Mt:Lr=8,jn|=8;break;case Ct:return Ht=vp(12,ln,en,jn|2),Ht.elementType=Ct,Ht.lanes=nr,Ht;case Et:return Ht=vp(13,ln,en,jn),Ht.elementType=Et,Ht.lanes=nr,Ht;case wt:return Ht=vp(19,ln,en,jn),Ht.elementType=wt,Ht.lanes=nr,Ht;case Nt:return Gy(ln,jn,nr,en);default:if(typeof Ht=="object"&&Ht!==null)switch(Ht.$$typeof){case Tt:Lr=10;break e;case $t:Lr=9;break e;case Rt:Lr=11;break e;case Pt:Lr=14;break e;case Ft:Lr=16,An=null;break e}throw Error(dt(130,Ht==null?Ht:typeof Ht,""))}return en=vp(Lr,ln,en,jn),en.elementType=Ht,en.type=An,en.lanes=nr,en}function Im(Ht,en,ln,An){return Ht=vp(7,Ht,An,en),Ht.lanes=ln,Ht}function Gy(Ht,en,ln,An){return Ht=vp(22,Ht,An,en),Ht.elementType=Nt,Ht.lanes=ln,Ht.stateNode={},Ht}function _v(Ht,en,ln){return Ht=vp(6,Ht,null,en),Ht.lanes=ln,Ht}function xv(Ht,en,ln){return en=vp(4,Ht.children!==null?Ht.children:[],Ht.key,en),en.lanes=ln,en.stateNode={containerInfo:Ht.containerInfo,pendingChildren:null,implementation:Ht.implementation},en}function Yv(Ht,en,ln,An,jn){this.tag=en,this.containerInfo=Ht,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=vr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=An,this.onRecoverableError=jn,Jn&&(this.mutableSourceEagerHydrationData=null)}function Dv(Ht,en,ln,An,jn,nr,Lr,Es,to){return Ht=new Yv(Ht,en,ln,Es,to),en===1?(en=1,nr===!0&&(en|=8)):en=0,nr=vp(3,null,null,en),Ht.current=nr,nr.stateNode=Ht,nr.memoizedState={element:An,isDehydrated:ln,cache:null,transitions:null},p0(nr),Ht}function Fv(Ht){if(!Ht)return fo;Ht=Ht._reactInternals;e:{if(rn(Ht)!==Ht||Ht.tag!==1)throw Error(dt(170));var en=Ht;do{switch(en.tag){case 3:en=en.stateNode.context;break e;case 1:if(eu(en.type)){en=en.stateNode.__reactInternalMemoizedMergedChildContext;break e}}en=en.return}while(en!==null);throw Error(dt(171))}if(Ht.tag===1){var ln=Ht.type;if(eu(ln))return Tu(Ht,ln,en)}return en}function kv(Ht){var en=Ht._reactInternals;if(en===void 0)throw typeof Ht.render=="function"?Error(dt(188)):(Ht=Object.keys(Ht).join(","),Error(dt(268,Ht)));return Ht=cn(en),Ht===null?null:Ht.stateNode}function Nv(Ht,en){if(Ht=Ht.memoizedState,Ht!==null&&Ht.dehydrated!==null){var ln=Ht.retryLane;Ht.retryLane=ln!==0&&ln<en?ln:en}}function bv(Ht,en){Nv(Ht,en),(Ht=Ht.alternate)&&Nv(Ht,en)}function qv(Ht){return Ht=cn(Ht),Ht===null?null:Ht.stateNode}function Zv(){return null}return rt.attemptContinuousHydration=function(Ht){if(Ht.tag===13){var en=Hu();yp(Ht,134217728,en),bv(Ht,134217728)}},rt.attemptHydrationAtCurrentPriority=function(Ht){if(Ht.tag===13){var en=Hu(),ln=im(Ht);yp(Ht,ln,en),bv(Ht,ln)}},rt.attemptSynchronousHydration=function(Ht){switch(Ht.tag){case 3:var en=Ht.stateNode;if(en.current.memoizedState.isDehydrated){var ln=Yu(en.pendingLanes);ln!==0&&(um(en,ln|1),_h(en,Su()),!(zl&6)&&(c0(),cp()))}break;case 13:var An=Hu();Mv(function(){return yp(Ht,1,An)}),bv(Ht,1)}},rt.batchedUpdates=function(Ht,en){var ln=zl;zl|=1;try{return Ht(en)}finally{zl=ln,zl===0&&(c0(),Fm&&cp())}},rt.createComponentSelector=function(Ht){return{$$typeof:Dl,value:Ht}},rt.createContainer=function(Ht,en,ln,An,jn,nr,Lr){return Dv(Ht,en,!1,null,ln,An,jn,nr,Lr)},rt.createHasPseudoClassSelector=function(Ht){return{$$typeof:gp,value:Ht}},rt.createHydrationContainer=function(Ht,en,ln,An,jn,nr,Lr,Es,to){return Ht=Dv(ln,An,!0,Ht,jn,nr,Lr,Es,to),Ht.context=Fv(null),ln=Ht.current,An=Hu(),jn=im(ln),nr=Vu(An,jn),nr.callback=en??null,Rp(ln,nr),Ht.current.lanes=jn,Vl(Ht,jn,An),_h(Ht,An),Ht},rt.createPortal=function(Ht,en,ln){var An=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_t,key:An==null?null:""+An,children:Ht,containerInfo:en,implementation:ln}},rt.createRoleSelector=function(Ht){return{$$typeof:Am,value:Ht}},rt.createTestNameSelector=function(Ht){return{$$typeof:Wp,value:Ht}},rt.createTextSelector=function(Ht){return{$$typeof:Hp,value:Ht}},rt.deferredUpdates=function(Ht){var en=Xl,ln=bu.transition;try{return bu.transition=null,Xl=16,Ht()}finally{Xl=en,bu.transition=ln}},rt.discreteUpdates=function(Ht,en,ln,An,jn){var nr=Xl,Lr=bu.transition;try{return bu.transition=null,Xl=1,Ht(en,ln,An,jn)}finally{Xl=nr,bu.transition=Lr,zl===0&&c0()}},rt.findAllNodes=ov,rt.findBoundingRects=function(Ht,en){if(!cr)throw Error(dt(363));en=ov(Ht,en),Ht=[];for(var ln=0;ln<en.length;ln++)Ht.push(_r(en[ln]));for(en=Ht.length-1;0<en;en--){ln=Ht[en];for(var An=ln.x,jn=An+ln.width,nr=ln.y,Lr=nr+ln.height,Es=en-1;0<=Es;Es--)if(en!==Es){var to=Ht[Es],so=to.x,_o=so+to.width,wl=to.y,Xo=wl+to.height;if(An>=so&&nr>=wl&&jn<=_o&&Lr<=Xo){Ht.splice(en,1);break}else if(An!==so||ln.width!==to.width||Xo<nr||wl>Lr){if(!(nr!==wl||ln.height!==to.height||_o<An||so>jn)){so>An&&(to.width+=so-An,to.x=An),_o<jn&&(to.width=jn-so),Ht.splice(en,1);break}}else{wl>nr&&(to.height+=wl-nr,to.y=nr),Xo<Lr&&(to.height=Lr-wl),Ht.splice(en,1);break}}}return Ht},rt.findHostInstance=kv,rt.findHostInstanceWithNoPortals=function(Ht){return Ht=nn(Ht),Ht=Ht!==null?mn(Ht):null,Ht===null?null:Ht.stateNode},rt.findHostInstanceWithWarning=function(Ht){return kv(Ht)},rt.flushControlled=function(Ht){var en=zl;zl|=1;var ln=bu.transition,An=Xl;try{bu.transition=null,Xl=1,Ht()}finally{Xl=An,bu.transition=ln,zl=en,zl===0&&(c0(),cp())}},rt.flushPassiveEffects=Pm,rt.flushSync=Mv,rt.focusWithin=function(Ht,en){if(!cr)throw Error(dt(363));for(Ht=iv(Ht),en=Ev(Ht,en),en=Array.from(en),Ht=0;Ht<en.length;){var ln=en[Ht++];if(!pr(ln)){if(ln.tag===5&&Wr(ln.stateNode))return!0;for(ln=ln.child;ln!==null;)en.push(ln),ln=ln.sibling}}return!1},rt.getCurrentUpdatePriority=function(){return Xl},rt.getFindAllNodesFailureDescription=function(Ht,en){if(!cr)throw Error(dt(363));var ln=0,An=[];Ht=[iv(Ht),0];for(var jn=0;jn<Ht.length;){var nr=Ht[jn++],Lr=Ht[jn++],Es=en[Lr];if((nr.tag!==5||!pr(nr))&&(sv(nr,Es)&&(An.push(av(Es)),Lr++,Lr>ln&&(ln=Lr)),Lr<en.length))for(nr=nr.child;nr!==null;)Ht.push(nr,Lr),nr=nr.sibling}if(ln<en.length){for(Ht=[];ln<en.length;ln++)Ht.push(av(en[ln]));return`findAllNodes was able to match part of the selector:
  `+(An.join(" > ")+`

No matching component was found for:
  `)+Ht.join(" > ")}return null},rt.getPublicRootInstance=function(Ht){if(Ht=Ht.current,!Ht.child)return null;switch(Ht.child.tag){case 5:return Cn(Ht.child.stateNode);default:return Ht.child.stateNode}},rt.injectIntoDevTools=function(Ht){if(Ht={bundleType:Ht.bundleType,version:Ht.version,rendererPackageName:Ht.rendererPackageName,rendererConfig:Ht.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yt.ReactCurrentDispatcher,findHostInstanceByFiber:qv,findFiberByHostInstance:Ht.findFiberByHostInstance||Zv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Ht=!1;else{var en=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(en.isDisabled||!en.supportsFiber)Ht=!0;else{try{Tp=en.inject(Ht),tp=en}catch{}Ht=!!en.checkDCE}}return Ht},rt.isAlreadyRendering=function(){return!1},rt.observeVisibleRects=function(Ht,en,ln,An){if(!cr)throw Error(dt(363));Ht=ov(Ht,en);var jn=Kn(Ht,ln,An).disconnect;return{disconnect:function(){jn()}}},rt.registerMutableSourceForHydration=function(Ht,en){var ln=en._getVersion;ln=ln(en._source),Ht.mutableSourceEagerHydrationData==null?Ht.mutableSourceEagerHydrationData=[en,ln]:Ht.mutableSourceEagerHydrationData.push(en,ln)},rt.runWithPriority=function(Ht,en){var ln=Xl;try{return Xl=Ht,en()}finally{Xl=ln}},rt.shouldError=function(){return null},rt.shouldSuspend=function(){return!1},rt.updateContainer=function(Ht,en,ln,An){var jn=en.current,nr=Hu(),Lr=im(jn);return ln=Fv(ln),en.context===null?en.context=ln:en.pendingContext=ln,en=Vu(nr,Lr),en.payload={element:Ht},An=An===void 0?null:An,An!==null&&(en.callback=An),Rp(jn,en),Ht=yp(jn,Lr,nr),Ht!==null&&fm(Ht,jn,Lr),Lr},rt};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports),catalogue={},extend$2=nt=>void Object.assign(catalogue,nt);function createRenderer(nt,tt){function rt(bt,{args:Mt=[],attach:Ct,...Tt},$t){let Rt=`${bt[0].toUpperCase()}${bt.slice(1)}`,Et;if(bt==="primitive"){if(Tt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const wt=Tt.object;Et=prepare(wt,{type:bt,root:$t,attach:Ct,primitive:!0})}else{const wt=catalogue[Rt];if(!wt)throw new Error(`R3F: ${Rt} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(Mt))throw new Error("R3F: The args prop must be an array!");Et=prepare(new wt(...Mt),{type:bt,root:$t,attach:Ct,memoizedProps:{args:Mt}})}return Et.__r3f.attach===void 0&&(Et instanceof BufferGeometry?Et.__r3f.attach="geometry":Et instanceof Material&&(Et.__r3f.attach="material")),Rt!=="inject"&&applyProps$1(Et,Tt),Et}function st(bt,Mt){let Ct=!1;if(Mt){var Tt,$t;(Tt=Mt.__r3f)!=null&&Tt.attach?attach(bt,Mt,Mt.__r3f.attach):Mt.isObject3D&&bt.isObject3D&&(bt.add(Mt),Ct=!0),Ct||($t=bt.__r3f)==null||$t.objects.push(Mt),Mt.__r3f||prepare(Mt,{}),Mt.__r3f.parent=bt,updateInstance(Mt),invalidateInstance(Mt)}}function at(bt,Mt,Ct){let Tt=!1;if(Mt){var $t,Rt;if(($t=Mt.__r3f)!=null&&$t.attach)attach(bt,Mt,Mt.__r3f.attach);else if(Mt.isObject3D&&bt.isObject3D){Mt.parent=bt,Mt.dispatchEvent({type:"added"}),bt.dispatchEvent({type:"childadded",child:Mt});const Et=bt.children.filter(Pt=>Pt!==Mt),wt=Et.indexOf(Ct);bt.children=[...Et.slice(0,wt),Mt,...Et.slice(wt)],Tt=!0}Tt||(Rt=bt.__r3f)==null||Rt.objects.push(Mt),Mt.__r3f||prepare(Mt,{}),Mt.__r3f.parent=bt,updateInstance(Mt),invalidateInstance(Mt)}}function lt(bt,Mt,Ct=!1){bt&&[...bt].forEach(Tt=>dt(Mt,Tt,Ct))}function dt(bt,Mt,Ct){if(Mt){var Tt,$t,Rt;if(Mt.__r3f&&(Mt.__r3f.parent=null),(Tt=bt.__r3f)!=null&&Tt.objects&&(bt.__r3f.objects=bt.__r3f.objects.filter(Nt=>Nt!==Mt)),($t=Mt.__r3f)!=null&&$t.attach)detach(bt,Mt,Mt.__r3f.attach);else if(Mt.isObject3D&&bt.isObject3D){var Et;bt.remove(Mt),(Et=Mt.__r3f)!=null&&Et.root&&removeInteractivity(findInitialRoot(Mt),Mt)}const Pt=(Rt=Mt.__r3f)==null?void 0:Rt.primitive,Ft=!Pt&&(Ct===void 0?Mt.dispose!==null:Ct);if(!Pt){var wt;lt((wt=Mt.__r3f)==null?void 0:wt.objects,Mt,Ft),lt(Mt.children,Mt,Ft)}if(delete Mt.__r3f,Ft&&Mt.dispose&&Mt.type!=="Scene"){const Nt=()=>{try{Mt.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,Nt):Nt()}invalidateInstance(bt)}}function yt(bt,Mt,Ct,Tt){var $t;const Rt=($t=bt.__r3f)==null?void 0:$t.parent;if(!Rt)return;const Et=rt(Mt,Ct,bt.__r3f.root);if(bt.children){for(const wt of bt.children)wt.__r3f&&st(Et,wt);bt.children=bt.children.filter(wt=>!wt.__r3f)}bt.__r3f.objects.forEach(wt=>st(Et,wt)),bt.__r3f.objects=[],bt.__r3f.autoRemovedBeforeAppend||dt(Rt,bt),Et.parent&&(Et.__r3f.autoRemovedBeforeAppend=!0),st(Rt,Et),Et.raycast&&Et.__r3f.eventCount&&findInitialRoot(Et).getState().internal.interaction.push(Et),[Tt,Tt.alternate].forEach(wt=>{wt!==null&&(wt.stateNode=Et,wt.ref&&(typeof wt.ref=="function"?wt.ref(Et):wt.ref.current=Et))})}const vt=()=>{};return{reconciler:Reconciler({createInstance:rt,removeChild:dt,appendChild:st,appendInitialChild:st,insertBefore:at,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(bt,Mt)=>{if(!Mt)return;const Ct=bt.getState().scene;Ct.__r3f&&(Ct.__r3f.root=bt,st(Ct,Mt))},removeChildFromContainer:(bt,Mt)=>{Mt&&dt(bt.getState().scene,Mt)},insertInContainerBefore:(bt,Mt,Ct)=>{if(!Mt||!Ct)return;const Tt=bt.getState().scene;Tt.__r3f&&at(Tt,Mt,Ct)},getRootHostContext:()=>null,getChildHostContext:bt=>bt,finalizeInitialChildren(bt){var Mt;return!!((Mt=bt==null?void 0:bt.__r3f)!=null?Mt:{}).handlers},prepareUpdate(bt,Mt,Ct,Tt){var $t;if((($t=bt==null?void 0:bt.__r3f)!=null?$t:{}).primitive&&Tt.object&&Tt.object!==bt)return[!0];{const{args:Et=[],children:wt,...Pt}=Tt,{args:Ft=[],children:Nt,...Ot}=Ct;if(!Array.isArray(Et))throw new Error("R3F: the args prop must be an array!");if(Et.some((Xt,Zt)=>Xt!==Ft[Zt]))return[!0];const Bt=diffProps(bt,Pt,Ot,!0);return Bt.changes.length?[!1,Bt]:null}},commitUpdate(bt,[Mt,Ct],Tt,$t,Rt,Et){Mt?yt(bt,Tt,Rt,Et):applyProps$1(bt,Ct)},commitMount(bt,Mt,Ct,Tt){var $t;const Rt=($t=bt.__r3f)!=null?$t:{};bt.raycast&&Rt.handlers&&Rt.eventCount&&findInitialRoot(bt).getState().internal.interaction.push(bt)},getPublicInstance:bt=>bt,prepareForCommit:()=>null,preparePortalMount:bt=>prepare(bt.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(bt){var Mt;const{attach:Ct,parent:Tt}=(Mt=bt.__r3f)!=null?Mt:{};Ct&&Tt&&detach(Tt,bt,Ct),bt.isObject3D&&(bt.visible=!1),invalidateInstance(bt)},unhideInstance(bt,Mt){var Ct;const{attach:Tt,parent:$t}=(Ct=bt.__r3f)!=null?Ct:{};Tt&&$t&&attach($t,bt,Tt),(bt.isObject3D&&Mt.visible==null||Mt.visible)&&(bt.visible=!0),invalidateInstance(bt)},createTextInstance:vt,hideTextInstance:vt,unhideTextInstance:vt,getCurrentEventPriority:()=>tt(),beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace=nt=>"colorSpace"in nt||"outputColorSpace"in nt,getColorManagement=()=>{var nt;return(nt=catalogue.ColorManagement)!=null?nt:null},isOrthographicCamera=nt=>nt&&nt.isOrthographicCamera,isRef=nt=>nt&&nt.hasOwnProperty("current"),useIsomorphicLayoutEffect=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(nt){const tt=reactExports.useRef(nt);return useIsomorphicLayoutEffect(()=>void(tt.current=nt),[nt]),tt}function Block({set:nt}){return useIsomorphicLayoutEffect(()=>(nt(new Promise(()=>null)),()=>nt(!1)),[nt]),null}class ErrorBoundary extends reactExports.Component{constructor(...tt){super(...tt),this.state={error:!1}}componentDidCatch(tt){this.props.set(tt)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=nt=>nt&&!!nt.memoized&&!!nt.changes;function calculateDpr(nt){var tt;const rt=typeof window<"u"?(tt=window.devicePixelRatio)!=null?tt:2:1;return Array.isArray(nt)?Math.min(Math.max(nt[0],rt),nt[1]):nt}const getRootState=nt=>{var tt;return(tt=nt.__r3f)==null?void 0:tt.root.getState()};function findInitialRoot(nt){let tt=nt.__r3f.root;for(;tt.getState().previousRoot;)tt=tt.getState().previousRoot;return tt}const is={obj:nt=>nt===Object(nt)&&!is.arr(nt)&&typeof nt!="function",fun:nt=>typeof nt=="function",str:nt=>typeof nt=="string",num:nt=>typeof nt=="number",boo:nt=>typeof nt=="boolean",und:nt=>nt===void 0,arr:nt=>Array.isArray(nt),equ(nt,tt,{arrays:rt="shallow",objects:st="reference",strict:at=!0}={}){if(typeof nt!=typeof tt||!!nt!=!!tt)return!1;if(is.str(nt)||is.num(nt)||is.boo(nt))return nt===tt;const lt=is.obj(nt);if(lt&&st==="reference")return nt===tt;const dt=is.arr(nt);if(dt&&rt==="reference")return nt===tt;if((dt||lt)&&nt===tt)return!0;let yt;for(yt in nt)if(!(yt in tt))return!1;if(lt&&rt==="shallow"&&st==="shallow"){for(yt in at?tt:nt)if(!is.equ(nt[yt],tt[yt],{strict:at,objects:"reference"}))return!1}else for(yt in at?tt:nt)if(nt[yt]!==tt[yt])return!1;if(is.und(yt)){if(dt&&nt.length===0&&tt.length===0||lt&&Object.keys(nt).length===0&&Object.keys(tt).length===0)return!0;if(nt!==tt)return!1}return!0}};function dispose(nt){nt.dispose&&nt.type!=="Scene"&&nt.dispose();for(const tt in nt)tt.dispose==null||tt.dispose(),delete nt[tt]}function prepare(nt,tt){const rt=nt;return rt.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...tt},nt}function resolve(nt,tt){let rt=nt;if(tt.includes("-")){const st=tt.split("-"),at=st.pop();return rt=st.reduce((lt,dt)=>lt[dt],nt),{target:rt,key:at}}else return{target:rt,key:tt}}const INDEX_REGEX=/-\d+$/;function attach(nt,tt,rt){if(is.str(rt)){if(INDEX_REGEX.test(rt)){const lt=rt.replace(INDEX_REGEX,""),{target:dt,key:yt}=resolve(nt,lt);Array.isArray(dt[yt])||(dt[yt]=[])}const{target:st,key:at}=resolve(nt,rt);tt.__r3f.previousAttach=st[at],st[at]=tt}else tt.__r3f.previousAttach=rt(nt,tt)}function detach(nt,tt,rt){var st,at;if(is.str(rt)){const{target:lt,key:dt}=resolve(nt,rt),yt=tt.__r3f.previousAttach;yt===void 0?delete lt[dt]:lt[dt]=yt}else(st=tt.__r3f)==null||st.previousAttach==null||st.previousAttach(nt,tt);(at=tt.__r3f)==null||delete at.previousAttach}function diffProps(nt,{children:tt,key:rt,ref:st,...at},{children:lt,key:dt,ref:yt,...vt}={},_t=!1){const bt=nt.__r3f,Mt=Object.entries(at),Ct=[];if(_t){const $t=Object.keys(vt);for(let Rt=0;Rt<$t.length;Rt++)at.hasOwnProperty($t[Rt])||Mt.unshift([$t[Rt],DEFAULT+"remove"])}Mt.forEach(([$t,Rt])=>{var Et;if((Et=nt.__r3f)!=null&&Et.primitive&&$t==="object"||is.equ(Rt,vt[$t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test($t))return Ct.push([$t,Rt,!0,[]]);let wt=[];$t.includes("-")&&(wt=$t.split("-")),Ct.push([$t,Rt,!1,wt]);for(const Pt in at){const Ft=at[Pt];Pt.startsWith(`${$t}-`)&&Ct.push([Pt,Ft,!1,Pt.split("-")])}});const Tt={...at};return bt!=null&&bt.memoizedProps&&bt!=null&&bt.memoizedProps.args&&(Tt.args=bt.memoizedProps.args),bt!=null&&bt.memoizedProps&&bt!=null&&bt.memoizedProps.attach&&(Tt.attach=bt.memoizedProps.attach),{memoized:Tt,changes:Ct}}function applyProps$1(nt,tt){var rt;const st=nt.__r3f,at=st==null?void 0:st.root,lt=at==null||at.getState==null?void 0:at.getState(),{memoized:dt,changes:yt}=isDiffSet(tt)?tt:diffProps(nt,tt),vt=st==null?void 0:st.eventCount;nt.__r3f&&(nt.__r3f.memoizedProps=dt);for(let bt=0;bt<yt.length;bt++){let[Mt,Ct,Tt,$t]=yt[bt];if(hasColorSpace(nt)){const Pt="srgb",Ft="srgb-linear";Mt==="encoding"?(Mt="colorSpace",Ct=Ct===3001?Pt:Ft):Mt==="outputEncoding"&&(Mt="outputColorSpace",Ct=Ct===3001?Pt:Ft)}let Rt=nt,Et=Rt[Mt];if($t.length&&(Et=$t.reduce((wt,Pt)=>wt[Pt],nt),!(Et&&Et.set))){const[wt,...Pt]=$t.reverse();Rt=Pt.reverse().reduce((Ft,Nt)=>Ft[Nt],nt),Mt=wt}if(Ct===DEFAULT+"remove")if(Rt.constructor){let wt=DEFAULTS.get(Rt.constructor);wt||(wt=new Rt.constructor,DEFAULTS.set(Rt.constructor,wt)),Ct=wt[Mt]}else Ct=0;if(Tt&&st)Ct?st.handlers[Mt]=Ct:delete st.handlers[Mt],st.eventCount=Object.keys(st.handlers).length;else if(Et&&Et.set&&(Et.copy||Et instanceof Layers)){if(Array.isArray(Ct))Et.fromArray?Et.fromArray(Ct):Et.set(...Ct);else if(Et.copy&&Ct&&Ct.constructor&&Et.constructor===Ct.constructor)Et.copy(Ct);else if(Ct!==void 0){const wt=Et instanceof Color$1;!wt&&Et.setScalar?Et.setScalar(Ct):Et instanceof Layers&&Ct instanceof Layers?Et.mask=Ct.mask:Et.set(Ct),!getColorManagement()&&lt&&!lt.linear&&wt&&Et.convertSRGBToLinear()}}else if(Rt[Mt]=Ct,Rt[Mt]instanceof Texture&&Rt[Mt].format===RGBAFormat&&Rt[Mt].type===UnsignedByteType&&lt){const wt=Rt[Mt];hasColorSpace(wt)&&hasColorSpace(lt.gl)?wt.colorSpace=lt.gl.outputColorSpace:wt.encoding=lt.gl.outputEncoding}invalidateInstance(nt)}if(st&&st.parent&&nt.raycast&&vt!==st.eventCount){const bt=findInitialRoot(nt).getState().internal,Mt=bt.interaction.indexOf(nt);Mt>-1&&bt.interaction.splice(Mt,1),st.eventCount&&bt.interaction.push(nt)}return!(yt.length===1&&yt[0][0]==="onUpdate")&&yt.length&&(rt=nt.__r3f)!=null&&rt.parent&&updateInstance(nt),nt}function invalidateInstance(nt){var tt,rt;const st=(tt=nt.__r3f)==null||(rt=tt.root)==null||rt.getState==null?void 0:rt.getState();st&&st.internal.frames===0&&st.invalidate()}function updateInstance(nt){nt.onUpdate==null||nt.onUpdate(nt)}function updateCamera(nt,tt){nt.manual||(isOrthographicCamera(nt)?(nt.left=tt.width/-2,nt.right=tt.width/2,nt.top=tt.height/2,nt.bottom=tt.height/-2):nt.aspect=tt.width/tt.height,nt.updateProjectionMatrix(),nt.updateMatrixWorld())}function makeId(nt){return(nt.eventObject||nt.object).uuid+"/"+nt.index+nt.instanceId}function getEventPriority(){var nt;const tt=typeof self<"u"&&self||typeof window<"u"&&window;if(!tt)return constantsExports.DefaultEventPriority;switch((nt=tt.event)==null?void 0:nt.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(nt,tt,rt,st){const at=rt.get(tt);at&&(rt.delete(tt),rt.size===0&&(nt.delete(st),at.target.releasePointerCapture(st)))}function removeInteractivity(nt,tt){const{internal:rt}=nt.getState();rt.interaction=rt.interaction.filter(st=>st!==tt),rt.initialHits=rt.initialHits.filter(st=>st!==tt),rt.hovered.forEach((st,at)=>{(st.eventObject===tt||st.object===tt)&&rt.hovered.delete(at)}),rt.capturedMap.forEach((st,at)=>{releaseInternalPointerCapture(rt.capturedMap,tt,st,at)})}function createEvents(nt){function tt(vt){const{internal:_t}=nt.getState(),bt=vt.offsetX-_t.initialClick[0],Mt=vt.offsetY-_t.initialClick[1];return Math.round(Math.sqrt(bt*bt+Mt*Mt))}function rt(vt){return vt.filter(_t=>["Move","Over","Enter","Out","Leave"].some(bt=>{var Mt;return(Mt=_t.__r3f)==null?void 0:Mt.handlers["onPointer"+bt]}))}function st(vt,_t){const bt=nt.getState(),Mt=new Set,Ct=[],Tt=_t?_t(bt.internal.interaction):bt.internal.interaction;for(let wt=0;wt<Tt.length;wt++){const Pt=getRootState(Tt[wt]);Pt&&(Pt.raycaster.camera=void 0)}bt.previousRoot||bt.events.compute==null||bt.events.compute(vt,bt);function $t(wt){const Pt=getRootState(wt);if(!Pt||!Pt.events.enabled||Pt.raycaster.camera===null)return[];if(Pt.raycaster.camera===void 0){var Ft;Pt.events.compute==null||Pt.events.compute(vt,Pt,(Ft=Pt.previousRoot)==null?void 0:Ft.getState()),Pt.raycaster.camera===void 0&&(Pt.raycaster.camera=null)}return Pt.raycaster.camera?Pt.raycaster.intersectObject(wt,!0):[]}let Rt=Tt.flatMap($t).sort((wt,Pt)=>{const Ft=getRootState(wt.object),Nt=getRootState(Pt.object);return!Ft||!Nt?wt.distance-Pt.distance:Nt.events.priority-Ft.events.priority||wt.distance-Pt.distance}).filter(wt=>{const Pt=makeId(wt);return Mt.has(Pt)?!1:(Mt.add(Pt),!0)});bt.events.filter&&(Rt=bt.events.filter(Rt,bt));for(const wt of Rt){let Pt=wt.object;for(;Pt;){var Et;(Et=Pt.__r3f)!=null&&Et.eventCount&&Ct.push({...wt,eventObject:Pt}),Pt=Pt.parent}}if("pointerId"in vt&&bt.internal.capturedMap.has(vt.pointerId))for(let wt of bt.internal.capturedMap.get(vt.pointerId).values())Mt.has(makeId(wt.intersection))||Ct.push(wt.intersection);return Ct}function at(vt,_t,bt,Mt){const Ct=nt.getState();if(vt.length){const Tt={stopped:!1};for(const $t of vt){const Rt=getRootState($t.object)||Ct,{raycaster:Et,pointer:wt,camera:Pt,internal:Ft}=Rt,Nt=new Vector3(wt.x,wt.y,0).unproject(Pt),Ot=Gt=>{var nn,cn;return(nn=(cn=Ft.capturedMap.get(Gt))==null?void 0:cn.has($t.eventObject))!=null?nn:!1},Bt=Gt=>{const nn={intersection:$t,target:_t.target};Ft.capturedMap.has(Gt)?Ft.capturedMap.get(Gt).set($t.eventObject,nn):Ft.capturedMap.set(Gt,new Map([[$t.eventObject,nn]])),_t.target.setPointerCapture(Gt)},Xt=Gt=>{const nn=Ft.capturedMap.get(Gt);nn&&releaseInternalPointerCapture(Ft.capturedMap,$t.eventObject,nn,Gt)};let Zt={};for(let Gt in _t){let nn=_t[Gt];typeof nn!="function"&&(Zt[Gt]=nn)}let rn={...$t,...Zt,pointer:wt,intersections:vt,stopped:Tt.stopped,delta:bt,unprojectedPoint:Nt,ray:Et.ray,camera:Pt,stopPropagation(){const Gt="pointerId"in _t&&Ft.capturedMap.get(_t.pointerId);if((!Gt||Gt.has($t.eventObject))&&(rn.stopped=Tt.stopped=!0,Ft.hovered.size&&Array.from(Ft.hovered.values()).find(nn=>nn.eventObject===$t.eventObject))){const nn=vt.slice(0,vt.indexOf($t));lt([...nn,$t])}},target:{hasPointerCapture:Ot,setPointerCapture:Bt,releasePointerCapture:Xt},currentTarget:{hasPointerCapture:Ot,setPointerCapture:Bt,releasePointerCapture:Xt},nativeEvent:_t};if(Mt(rn),Tt.stopped===!0)break}}return vt}function lt(vt){const{internal:_t}=nt.getState();for(const bt of _t.hovered.values())if(!vt.length||!vt.find(Mt=>Mt.object===bt.object&&Mt.index===bt.index&&Mt.instanceId===bt.instanceId)){const Ct=bt.eventObject.__r3f,Tt=Ct==null?void 0:Ct.handlers;if(_t.hovered.delete(makeId(bt)),Ct!=null&&Ct.eventCount){const $t={...bt,intersections:vt};Tt.onPointerOut==null||Tt.onPointerOut($t),Tt.onPointerLeave==null||Tt.onPointerLeave($t)}}}function dt(vt,_t){for(let bt=0;bt<_t.length;bt++){const Mt=_t[bt].__r3f;Mt==null||Mt.handlers.onPointerMissed==null||Mt.handlers.onPointerMissed(vt)}}function yt(vt){switch(vt){case"onPointerLeave":case"onPointerCancel":return()=>lt([]);case"onLostPointerCapture":return _t=>{const{internal:bt}=nt.getState();"pointerId"in _t&&bt.capturedMap.has(_t.pointerId)&&requestAnimationFrame(()=>{bt.capturedMap.has(_t.pointerId)&&(bt.capturedMap.delete(_t.pointerId),lt([]))})}}return function(bt){const{onPointerMissed:Mt,internal:Ct}=nt.getState();Ct.lastEvent.current=bt;const Tt=vt==="onPointerMove",$t=vt==="onClick"||vt==="onContextMenu"||vt==="onDoubleClick",Et=st(bt,Tt?rt:void 0),wt=$t?tt(bt):0;vt==="onPointerDown"&&(Ct.initialClick=[bt.offsetX,bt.offsetY],Ct.initialHits=Et.map(Ft=>Ft.eventObject)),$t&&!Et.length&&wt<=2&&(dt(bt,Ct.interaction),Mt&&Mt(bt)),Tt&&lt(Et);function Pt(Ft){const Nt=Ft.eventObject,Ot=Nt.__r3f,Bt=Ot==null?void 0:Ot.handlers;if(Ot!=null&&Ot.eventCount)if(Tt){if(Bt.onPointerOver||Bt.onPointerEnter||Bt.onPointerOut||Bt.onPointerLeave){const Xt=makeId(Ft),Zt=Ct.hovered.get(Xt);Zt?Zt.stopped&&Ft.stopPropagation():(Ct.hovered.set(Xt,Ft),Bt.onPointerOver==null||Bt.onPointerOver(Ft),Bt.onPointerEnter==null||Bt.onPointerEnter(Ft))}Bt.onPointerMove==null||Bt.onPointerMove(Ft)}else{const Xt=Bt[vt];Xt?(!$t||Ct.initialHits.includes(Nt))&&(dt(bt,Ct.interaction.filter(Zt=>!Ct.initialHits.includes(Zt))),Xt(Ft)):$t&&Ct.initialHits.includes(Nt)&&dt(bt,Ct.interaction.filter(Zt=>!Ct.initialHits.includes(Zt)))}}at(Et,bt,wt,Pt)}}return{handlePointer:yt}}const isRenderer=nt=>!!(nt!=null&&nt.render),context=reactExports.createContext(null),createStore$1=(nt,tt)=>{const rt=create$1((yt,vt)=>{const _t=new Vector3,bt=new Vector3,Mt=new Vector3;function Ct(wt=vt().camera,Pt=bt,Ft=vt().size){const{width:Nt,height:Ot,top:Bt,left:Xt}=Ft,Zt=Nt/Ot;Pt instanceof Vector3?Mt.copy(Pt):Mt.set(...Pt);const rn=wt.getWorldPosition(_t).distanceTo(Mt);if(isOrthographicCamera(wt))return{width:Nt/wt.zoom,height:Ot/wt.zoom,top:Bt,left:Xt,factor:1,distance:rn,aspect:Zt};{const Gt=wt.fov*Math.PI/180,nn=2*Math.tan(Gt/2)*rn,cn=nn*(Nt/Ot);return{width:cn,height:nn,top:Bt,left:Xt,factor:Nt/cn,distance:rn,aspect:Zt}}}let Tt;const $t=wt=>yt(Pt=>({performance:{...Pt.performance,current:wt}})),Rt=new Vector2;return{set:yt,get:vt,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(wt=1)=>nt(vt(),wt),advance:(wt,Pt)=>tt(wt,Pt,vt()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:Rt,mouse:Rt,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const wt=vt();Tt&&clearTimeout(Tt),wt.performance.current!==wt.performance.min&&$t(wt.performance.min),Tt=setTimeout(()=>$t(vt().performance.max),wt.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:Ct},setEvents:wt=>yt(Pt=>({...Pt,events:{...Pt.events,...wt}})),setSize:(wt,Pt,Ft,Nt,Ot)=>{const Bt=vt().camera,Xt={width:wt,height:Pt,top:Nt||0,left:Ot||0,updateStyle:Ft};yt(Zt=>({size:Xt,viewport:{...Zt.viewport,...Ct(Bt,bt,Xt)}}))},setDpr:wt=>yt(Pt=>{const Ft=calculateDpr(wt);return{viewport:{...Pt.viewport,dpr:Ft,initialDpr:Pt.viewport.initialDpr||Ft}}}),setFrameloop:(wt="always")=>{const Pt=vt().clock;Pt.stop(),Pt.elapsedTime=0,wt!=="never"&&(Pt.start(),Pt.elapsedTime=0),yt(()=>({frameloop:wt}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(wt,Pt,Ft)=>{const Nt=vt().internal;return Nt.priority=Nt.priority+(Pt>0?1:0),Nt.subscribers.push({ref:wt,priority:Pt,store:Ft}),Nt.subscribers=Nt.subscribers.sort((Ot,Bt)=>Ot.priority-Bt.priority),()=>{const Ot=vt().internal;Ot!=null&&Ot.subscribers&&(Ot.priority=Ot.priority-(Pt>0?1:0),Ot.subscribers=Ot.subscribers.filter(Bt=>Bt.ref!==wt))}}}}}),st=rt.getState();let at=st.size,lt=st.viewport.dpr,dt=st.camera;return rt.subscribe(()=>{const{camera:yt,size:vt,viewport:_t,gl:bt,set:Mt}=rt.getState();if(vt.width!==at.width||vt.height!==at.height||_t.dpr!==lt){var Ct;at=vt,lt=_t.dpr,updateCamera(yt,vt),bt.setPixelRatio(_t.dpr);const Tt=(Ct=vt.updateStyle)!=null?Ct:typeof HTMLCanvasElement<"u"&&bt.domElement instanceof HTMLCanvasElement;bt.setSize(vt.width,vt.height,Tt)}yt!==dt&&(dt=yt,Mt(Tt=>({viewport:{...Tt.viewport,...Tt.viewport.getCurrentViewport(yt)}})))}),rt.subscribe(yt=>nt(yt)),rt};let i$1,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(nt,tt){if(nt.size)for(const{callback:rt}of nt.values())rt(tt)}function flushGlobalEffects(nt,tt){switch(nt){case"before":return run(globalEffects,tt);case"after":return run(globalAfterEffects,tt);case"tail":return run(globalTailEffects,tt)}}let subscribers,subscription;function render$1(nt,tt,rt){let st=tt.clock.getDelta();for(tt.frameloop==="never"&&typeof nt=="number"&&(st=nt-tt.clock.elapsedTime,tt.clock.oldTime=tt.clock.elapsedTime,tt.clock.elapsedTime=nt),subscribers=tt.internal.subscribers,i$1=0;i$1<subscribers.length;i$1++)subscription=subscribers[i$1],subscription.ref.current(subscription.store.getState(),st,rt);return!tt.internal.priority&&tt.gl.render&&tt.gl.render(tt.scene,tt.camera),tt.internal.frames=Math.max(0,tt.internal.frames-1),tt.frameloop==="always"?1:tt.internal.frames}function createLoop(nt){let tt=!1,rt=!1,st,at,lt;function dt(_t){at=requestAnimationFrame(dt),tt=!0,st=0,flushGlobalEffects("before",_t),rt=!0;for(const Mt of nt.values()){var bt;lt=Mt.store.getState(),lt.internal.active&&(lt.frameloop==="always"||lt.internal.frames>0)&&!((bt=lt.gl.xr)!=null&&bt.isPresenting)&&(st+=render$1(_t,lt))}if(rt=!1,flushGlobalEffects("after",_t),st===0)return flushGlobalEffects("tail",_t),tt=!1,cancelAnimationFrame(at)}function yt(_t,bt=1){var Mt;if(!_t)return nt.forEach(Ct=>yt(Ct.store.getState(),bt));(Mt=_t.gl.xr)!=null&&Mt.isPresenting||!_t.internal.active||_t.frameloop==="never"||(bt>1?_t.internal.frames=Math.min(60,_t.internal.frames+bt):rt?_t.internal.frames=2:_t.internal.frames=1,tt||(tt=!0,requestAnimationFrame(dt)))}function vt(_t,bt=!0,Mt,Ct){if(bt&&flushGlobalEffects("before",_t),Mt)render$1(_t,Mt,Ct);else for(const Tt of nt.values())render$1(_t,Tt.store.getState());bt&&flushGlobalEffects("after",_t)}return{loop:dt,invalidate:yt,advance:vt}}function useStore$1(){const nt=reactExports.useContext(context);if(!nt)throw new Error("R3F: Hooks can only be used within the Canvas component!");return nt}function useThree(nt=rt=>rt,tt){return useStore$1()(nt,tt)}function useFrame(nt,tt=0){const rt=useStore$1(),st=rt.getState().internal.subscribe,at=useMutableCallback(nt);return useIsomorphicLayoutEffect(()=>st(at,tt,rt),[tt,st,rt]),null}const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(nt,tt)=>{const rt=typeof nt=="function"?nt(tt):nt;return isRenderer(rt)?rt:new WebGLRenderer({powerPreference:"high-performance",canvas:tt,antialias:!0,alpha:!0,...nt})};function computeInitialSize(nt,tt){const rt=typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement;if(tt){const{width:st,height:at,top:lt,left:dt,updateStyle:yt=rt}=tt;return{width:st,height:at,top:lt,left:dt,updateStyle:yt}}else if(typeof HTMLCanvasElement<"u"&&nt instanceof HTMLCanvasElement&&nt.parentElement){const{width:st,height:at,top:lt,left:dt}=nt.parentElement.getBoundingClientRect();return{width:st,height:at,top:lt,left:dt,updateStyle:rt}}else if(typeof OffscreenCanvas<"u"&&nt instanceof OffscreenCanvas)return{width:nt.width,height:nt.height,top:0,left:0,updateStyle:rt};return{width:0,height:0,top:0,left:0}}function createRoot(nt){const tt=roots.get(nt),rt=tt==null?void 0:tt.fiber,st=tt==null?void 0:tt.store;tt&&console.warn("R3F.createRoot should only be called once!");const at=typeof reportError=="function"?reportError:console.error,lt=st||createStore$1(invalidate,advance),dt=rt||reconciler.createContainer(lt,constantsExports.ConcurrentRoot,null,!1,null,"",at,null);tt||roots.set(nt,{fiber:dt,store:lt});let yt,vt=!1,_t;return{configure(bt={}){let{gl:Mt,size:Ct,scene:Tt,events:$t,onCreated:Rt,shadows:Et=!1,linear:wt=!1,flat:Pt=!1,legacy:Ft=!1,orthographic:Nt=!1,frameloop:Ot="always",dpr:Bt=[1,2],performance:Xt,raycaster:Zt,camera:rn,onPointerMissed:Gt}=bt,nn=lt.getState(),cn=nn.gl;nn.gl||nn.set({gl:cn=createRendererInstance(Mt,nt)});let an=nn.raycaster;an||nn.set({raycaster:an=new Raycaster});const{params:mn,...En}=Zt||{};if(is.equ(En,an,shallowLoose)||applyProps(an,{...En}),is.equ(mn,an.params,shallowLoose)||applyProps(an,{params:{...an.params,...mn}}),!nn.camera||nn.camera===_t&&!is.equ(_t,rn,shallowLoose)){_t=rn;const Pn=rn instanceof Camera,dn=Pn?rn:Nt?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Pn||(dn.position.z=5,rn&&(applyProps(dn,rn),("aspect"in rn||"left"in rn||"right"in rn||"bottom"in rn||"top"in rn)&&(dn.manual=!0,dn.updateProjectionMatrix())),!nn.camera&&!(rn!=null&&rn.rotation)&&dn.lookAt(0,0,0)),nn.set({camera:dn}),an.camera=dn}if(!nn.scene){let Pn;Tt instanceof Scene?Pn=Tt:(Pn=new Scene,Tt&&applyProps(Pn,Tt)),nn.set({scene:prepare(Pn)})}if(!nn.xr){var Cn;const Pn=(qn,In)=>{const Wn=lt.getState();Wn.frameloop!=="never"&&advance(qn,!0,Wn,In)},dn=()=>{const qn=lt.getState();qn.gl.xr.enabled=qn.gl.xr.isPresenting,qn.gl.xr.setAnimationLoop(qn.gl.xr.isPresenting?Pn:null),qn.gl.xr.isPresenting||invalidate(qn)},Un={connect(){const qn=lt.getState().gl;qn.xr.addEventListener("sessionstart",dn),qn.xr.addEventListener("sessionend",dn)},disconnect(){const qn=lt.getState().gl;qn.xr.removeEventListener("sessionstart",dn),qn.xr.removeEventListener("sessionend",dn)}};typeof((Cn=cn.xr)==null?void 0:Cn.addEventListener)=="function"&&Un.connect(),nn.set({xr:Un})}if(cn.shadowMap){const Pn=cn.shadowMap.enabled,dn=cn.shadowMap.type;if(cn.shadowMap.enabled=!!Et,is.boo(Et))cn.shadowMap.type=PCFSoftShadowMap;else if(is.str(Et)){var Mn;const Un={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};cn.shadowMap.type=(Mn=Un[Et])!=null?Mn:PCFSoftShadowMap}else is.obj(Et)&&Object.assign(cn.shadowMap,Et);(Pn!==cn.shadowMap.enabled||dn!==cn.shadowMap.type)&&(cn.shadowMap.needsUpdate=!0)}const un=getColorManagement();un&&("enabled"in un?un.enabled=!Ft:"legacyMode"in un&&(un.legacyMode=Ft)),vt||applyProps(cn,{outputEncoding:wt?3e3:3001,toneMapping:Pt?NoToneMapping:ACESFilmicToneMapping}),nn.legacy!==Ft&&nn.set(()=>({legacy:Ft})),nn.linear!==wt&&nn.set(()=>({linear:wt})),nn.flat!==Pt&&nn.set(()=>({flat:Pt})),Mt&&!is.fun(Mt)&&!isRenderer(Mt)&&!is.equ(Mt,cn,shallowLoose)&&applyProps(cn,Mt),$t&&!nn.events.handlers&&nn.set({events:$t(lt)});const Tn=computeInitialSize(nt,Ct);return is.equ(Tn,nn.size,shallowLoose)||nn.setSize(Tn.width,Tn.height,Tn.updateStyle,Tn.top,Tn.left),Bt&&nn.viewport.dpr!==calculateDpr(Bt)&&nn.setDpr(Bt),nn.frameloop!==Ot&&nn.setFrameloop(Ot),nn.onPointerMissed||nn.set({onPointerMissed:Gt}),Xt&&!is.equ(Xt,nn.performance,shallowLoose)&&nn.set(Pn=>({performance:{...Pn.performance,...Xt}})),yt=Rt,vt=!0,this},render(bt){return vt||this.configure(),reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:lt,children:bt,onCreated:yt,rootElement:nt}),dt,null,()=>{}),lt},unmount(){unmountComponentAtNode(nt)}}}function Provider({store:nt,children:tt,onCreated:rt,rootElement:st}){return useIsomorphicLayoutEffect(()=>{const at=nt.getState();at.set(lt=>({internal:{...lt.internal,active:!0}})),rt&&rt(at),nt.getState().events.connected||at.events.connect==null||at.events.connect(st)},[]),jsxRuntimeExports.jsx(context.Provider,{value:nt,children:tt})}function unmountComponentAtNode(nt,tt){const rt=roots.get(nt),st=rt==null?void 0:rt.fiber;if(st){const at=rt==null?void 0:rt.store.getState();at&&(at.internal.active=!1),reconciler.updateContainer(null,st,null,()=>{at&&setTimeout(()=>{try{var lt,dt,yt,vt;at.events.disconnect==null||at.events.disconnect(),(lt=at.gl)==null||(dt=lt.renderLists)==null||dt.dispose==null||dt.dispose(),(yt=at.gl)==null||yt.forceContextLoss==null||yt.forceContextLoss(),(vt=at.gl)!=null&&vt.xr&&at.xr.disconnect(),dispose(at),roots.delete(nt)}catch{}},500)})}}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(nt){const{handlePointer:tt}=createEvents(nt);return{priority:1,enabled:!0,compute(rt,st,at){st.pointer.set(rt.offsetX/st.size.width*2-1,-(rt.offsetY/st.size.height)*2+1),st.raycaster.setFromCamera(st.pointer,st.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((rt,st)=>({...rt,[st]:tt(st)}),{}),update:()=>{var rt;const{events:st,internal:at}=nt.getState();(rt=at.lastEvent)!=null&&rt.current&&st.handlers&&st.handlers.onPointerMove(at.lastEvent.current)},connect:rt=>{var st;const{set:at,events:lt}=nt.getState();lt.disconnect==null||lt.disconnect(),at(dt=>({events:{...dt.events,connected:rt}})),Object.entries((st=lt.handlers)!=null?st:[]).forEach(([dt,yt])=>{const[vt,_t]=DOM_EVENTS[dt];rt.addEventListener(vt,yt,{passive:_t})})},disconnect:()=>{const{set:rt,events:st}=nt.getState();if(st.connected){var at;Object.entries((at=st.handlers)!=null?at:[]).forEach(([lt,dt])=>{if(st&&st.connected instanceof HTMLElement){const[yt]=DOM_EVENTS[lt];st.connected.removeEventListener(yt,dt)}}),rt(lt=>({events:{...lt.events,connected:void 0}}))}}}}function debounce(nt,tt,rt){var st,at,lt,dt,yt;tt==null&&(tt=100);function vt(){var bt=Date.now()-dt;bt<tt&&bt>=0?st=setTimeout(vt,tt-bt):(st=null,rt||(yt=nt.apply(lt,at),lt=at=null))}var _t=function(){lt=this,at=arguments,dt=Date.now();var bt=rt&&!st;return st||(st=setTimeout(vt,tt)),bt&&(yt=nt.apply(lt,at),lt=at=null),yt};return _t.clear=function(){st&&(clearTimeout(st),st=null)},_t.flush=function(){st&&(yt=nt.apply(lt,at),lt=at=null,clearTimeout(st),st=null)},_t}debounce.debounce=debounce;var debounce_1=debounce;const createDebounce=getDefaultExportFromCjs(debounce_1);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(nt,tt,rt)=>tt in nt?__defProp(nt,tt,{enumerable:!0,configurable:!0,writable:!0,value:rt}):nt[tt]=rt,__spreadValues=(nt,tt)=>{for(var rt in tt||(tt={}))__hasOwnProp.call(tt,rt)&&__defNormalProp(nt,rt,tt[rt]);if(__getOwnPropSymbols)for(var rt of __getOwnPropSymbols(tt))__propIsEnum.call(tt,rt)&&__defNormalProp(nt,rt,tt[rt]);return nt},__spreadProps=(nt,tt)=>__defProps(nt,__getOwnPropDescs(tt)),_a$1,_b;typeof window<"u"&&((_a$1=window.document)!=null&&_a$1.createElement||((_b=window.navigator)==null?void 0:_b.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function traverseFiber(nt,tt,rt){if(!nt)return;if(rt(nt)===!0)return nt;let st=nt.child;for(;st;){const at=traverseFiber(st,tt,rt);if(at)return at;st=st.sibling}}function wrapContext(nt){try{return Object.defineProperties(nt,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return nt}}const error=console.error;console.error=function(){const nt=[...arguments].join("");if(nt!=null&&nt.startsWith("Warning:")&&nt.includes("useContext")){console.error=error;return}return error.apply(this,arguments)};const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}function useFiber(){const nt=reactExports.useContext(FiberContext);if(nt===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const tt=reactExports.useId();return reactExports.useMemo(()=>{for(const st of[nt,nt==null?void 0:nt.alternate]){if(!st)continue;const at=traverseFiber(st,!1,lt=>{let dt=lt.memoizedState;for(;dt;){if(dt.memoizedState===tt)return!0;dt=dt.next}});if(at)return at}},[nt,tt])}function useContextMap(){const nt=useFiber(),[tt]=reactExports.useState(()=>new Map);tt.clear();let rt=nt;for(;rt;){if(rt.type&&typeof rt.type=="object"){const at=rt.type._context===void 0&&rt.type.Provider===rt.type?rt.type:rt.type._context;at&&at!==FiberContext&&!tt.has(at)&&tt.set(at,reactExports.useContext(wrapContext(at)))}rt=rt.return}return tt}function useContextBridge(){const nt=useContextMap();return reactExports.useMemo(()=>Array.from(nt.keys()).reduce((tt,rt)=>st=>reactExports.createElement(tt,null,reactExports.createElement(rt.Provider,__spreadProps(__spreadValues({},st),{value:nt.get(rt)}))),tt=>reactExports.createElement(FiberProvider,__spreadValues({},tt))),[nt])}function useMeasure({debounce:nt,scroll:tt,polyfill:rt,offsetSize:st}={debounce:0,scroll:!1,offsetSize:!1}){const at=rt||typeof window<"u"&&window.ResizeObserver,[lt,dt]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!at)return lt.width=1280,lt.height=800,[()=>{},lt,()=>{}];const yt=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:lt,orientationHandler:null}),vt=nt?typeof nt=="number"?nt:nt.scroll:null,_t=nt?typeof nt=="number"?nt:nt.resize:null,bt=reactExports.useRef(!1);reactExports.useEffect(()=>(bt.current=!0,()=>void(bt.current=!1)));const[Mt,Ct,Tt]=reactExports.useMemo(()=>{const wt=()=>{if(!yt.current.element)return;const{left:Pt,top:Ft,width:Nt,height:Ot,bottom:Bt,right:Xt,x:Zt,y:rn}=yt.current.element.getBoundingClientRect(),Gt={left:Pt,top:Ft,width:Nt,height:Ot,bottom:Bt,right:Xt,x:Zt,y:rn};yt.current.element instanceof HTMLElement&&st&&(Gt.height=yt.current.element.offsetHeight,Gt.width=yt.current.element.offsetWidth),Object.freeze(Gt),bt.current&&!areBoundsEqual(yt.current.lastBounds,Gt)&&dt(yt.current.lastBounds=Gt)};return[wt,_t?createDebounce(wt,_t):wt,vt?createDebounce(wt,vt):wt]},[dt,st,vt,_t]);function $t(){yt.current.scrollContainers&&(yt.current.scrollContainers.forEach(wt=>wt.removeEventListener("scroll",Tt,!0)),yt.current.scrollContainers=null),yt.current.resizeObserver&&(yt.current.resizeObserver.disconnect(),yt.current.resizeObserver=null),yt.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",yt.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",yt.current.orientationHandler))}function Rt(){var wt;yt.current.element&&(yt.current.resizeObserver=new at(Ct),(wt=yt.current.resizeObserver)==null||wt.observe(yt.current.element),tt&&yt.current.scrollContainers&&yt.current.scrollContainers.forEach(Pt=>Pt.addEventListener("scroll",Tt,{capture:!0,passive:!0})),yt.current.orientationHandler=()=>{Tt()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",yt.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",yt.current.orientationHandler))}const Et=wt=>{!wt||wt===yt.current.element||($t(),yt.current.element=wt,yt.current.scrollContainers=findScrollContainers(wt),Rt())};return useOnWindowScroll(Tt,!!tt),useOnWindowResize(Ct),reactExports.useEffect(()=>{$t(),Rt()},[tt,Tt,Ct]),reactExports.useEffect(()=>$t,[]),[Et,lt,Mt]}function useOnWindowResize(nt){reactExports.useEffect(()=>{const tt=nt;return window.addEventListener("resize",tt),()=>void window.removeEventListener("resize",tt)},[nt])}function useOnWindowScroll(nt,tt){reactExports.useEffect(()=>{if(tt){const rt=nt;return window.addEventListener("scroll",rt,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",rt,!0)}},[nt,tt])}function findScrollContainers(nt){const tt=[];if(!nt||nt===document.body)return tt;const{overflow:rt,overflowX:st,overflowY:at}=window.getComputedStyle(nt);return[rt,st,at].some(lt=>lt==="auto"||lt==="scroll")&&tt.push(nt),[...tt,...findScrollContainers(nt.parentElement)]}const keys=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(nt,tt)=>keys.every(rt=>nt[rt]===tt[rt]),CanvasImpl=reactExports.forwardRef(function nt({children:tt,fallback:rt,resize:st,style:at,gl:lt,events:dt=createPointerEvents,eventSource:yt,eventPrefix:vt,shadows:_t,linear:bt,flat:Mt,legacy:Ct,orthographic:Tt,frameloop:$t,dpr:Rt,performance:Et,raycaster:wt,camera:Pt,scene:Ft,onPointerMissed:Nt,onCreated:Ot,...Bt},Xt){reactExports.useMemo(()=>extend$2(THREE),[]);const Zt=useContextBridge(),[rn,Gt]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...st}),nn=reactExports.useRef(null),cn=reactExports.useRef(null);reactExports.useImperativeHandle(Xt,()=>nn.current);const an=useMutableCallback(Nt),[mn,En]=reactExports.useState(!1),[Cn,Mn]=reactExports.useState(!1);if(mn)throw mn;if(Cn)throw Cn;const un=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Pn=nn.current;Gt.width>0&&Gt.height>0&&Pn&&(un.current||(un.current=createRoot(Pn)),un.current.configure({gl:lt,events:dt,shadows:_t,linear:bt,flat:Mt,legacy:Ct,orthographic:Tt,frameloop:$t,dpr:Rt,performance:Et,raycaster:wt,camera:Pt,scene:Ft,size:Gt,onPointerMissed:(...dn)=>an.current==null?void 0:an.current(...dn),onCreated:dn=>{dn.events.connect==null||dn.events.connect(yt?isRef(yt)?yt.current:yt:cn.current),vt&&dn.setEvents({compute:(Un,qn)=>{const In=Un[vt+"X"],Wn=Un[vt+"Y"];qn.pointer.set(In/qn.size.width*2-1,-(Wn/qn.size.height)*2+1),qn.raycaster.setFromCamera(qn.pointer,qn.camera)}}),Ot==null||Ot(dn)}}),un.current.render(jsxRuntimeExports.jsx(Zt,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:Mn,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:En}),children:tt})})})))}),reactExports.useEffect(()=>{const Pn=nn.current;if(Pn)return()=>unmountComponentAtNode(Pn)},[]);const Tn=yt?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:cn,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Tn,...at},...Bt,children:jsxRuntimeExports.jsx("div",{ref:rn,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:nn,style:{display:"block"},children:rt})})})}),Canvas=reactExports.forwardRef(function nt(tt,rt){return jsxRuntimeExports.jsx(FiberProvider,{children:jsxRuntimeExports.jsx(CanvasImpl,{...tt,ref:rt})})});function initRange(nt,tt){switch(arguments.length){case 0:break;case 1:this.range(nt);break;default:this.range(tt).domain(nt);break}return this}function define(nt,tt,rt){nt.prototype=tt.prototype=rt,rt.constructor=nt}function extend$1(nt,tt){var rt=Object.create(nt.prototype);for(var st in tt)rt[st]=tt[st];return rt}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(nt){return Object.assign(new this.constructor,this,nt)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(nt){var tt,rt;return nt=(nt+"").trim().toLowerCase(),(tt=reHex.exec(nt))?(rt=tt[1].length,tt=parseInt(tt[1],16),rt===6?rgbn(tt):rt===3?new Rgb(tt>>8&15|tt>>4&240,tt>>4&15|tt&240,(tt&15)<<4|tt&15,1):rt===8?rgba(tt>>24&255,tt>>16&255,tt>>8&255,(tt&255)/255):rt===4?rgba(tt>>12&15|tt>>8&240,tt>>8&15|tt>>4&240,tt>>4&15|tt&240,((tt&15)<<4|tt&15)/255):null):(tt=reRgbInteger.exec(nt))?new Rgb(tt[1],tt[2],tt[3],1):(tt=reRgbPercent.exec(nt))?new Rgb(tt[1]*255/100,tt[2]*255/100,tt[3]*255/100,1):(tt=reRgbaInteger.exec(nt))?rgba(tt[1],tt[2],tt[3],tt[4]):(tt=reRgbaPercent.exec(nt))?rgba(tt[1]*255/100,tt[2]*255/100,tt[3]*255/100,tt[4]):(tt=reHslPercent.exec(nt))?hsla(tt[1],tt[2]/100,tt[3]/100,1):(tt=reHslaPercent.exec(nt))?hsla(tt[1],tt[2]/100,tt[3]/100,tt[4]):named.hasOwnProperty(nt)?rgbn(named[nt]):nt==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(nt){return new Rgb(nt>>16&255,nt>>8&255,nt&255,1)}function rgba(nt,tt,rt,st){return st<=0&&(nt=tt=rt=NaN),new Rgb(nt,tt,rt,st)}function rgbConvert(nt){return nt instanceof Color||(nt=color(nt)),nt?(nt=nt.rgb(),new Rgb(nt.r,nt.g,nt.b,nt.opacity)):new Rgb}function rgb(nt,tt,rt,st){return arguments.length===1?rgbConvert(nt):new Rgb(nt,tt,rt,st??1)}function Rgb(nt,tt,rt,st){this.r=+nt,this.g=+tt,this.b=+rt,this.opacity=+st}define(Rgb,rgb,extend$1(Color,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Rgb(this.r*nt,this.g*nt,this.b*nt,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const nt=clampa(this.opacity);return`${nt===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${nt===1?")":`, ${nt})`}`}function clampa(nt){return isNaN(nt)?1:Math.max(0,Math.min(1,nt))}function clampi(nt){return Math.max(0,Math.min(255,Math.round(nt)||0))}function hex(nt){return nt=clampi(nt),(nt<16?"0":"")+nt.toString(16)}function hsla(nt,tt,rt,st){return st<=0?nt=tt=rt=NaN:rt<=0||rt>=1?nt=tt=NaN:tt<=0&&(nt=NaN),new Hsl(nt,tt,rt,st)}function hslConvert(nt){if(nt instanceof Hsl)return new Hsl(nt.h,nt.s,nt.l,nt.opacity);if(nt instanceof Color||(nt=color(nt)),!nt)return new Hsl;if(nt instanceof Hsl)return nt;nt=nt.rgb();var tt=nt.r/255,rt=nt.g/255,st=nt.b/255,at=Math.min(tt,rt,st),lt=Math.max(tt,rt,st),dt=NaN,yt=lt-at,vt=(lt+at)/2;return yt?(tt===lt?dt=(rt-st)/yt+(rt<st)*6:rt===lt?dt=(st-tt)/yt+2:dt=(tt-rt)/yt+4,yt/=vt<.5?lt+at:2-lt-at,dt*=60):yt=vt>0&&vt<1?0:dt,new Hsl(dt,yt,vt,nt.opacity)}function hsl$1(nt,tt,rt,st){return arguments.length===1?hslConvert(nt):new Hsl(nt,tt,rt,st??1)}function Hsl(nt,tt,rt,st){this.h=+nt,this.s=+tt,this.l=+rt,this.opacity=+st}define(Hsl,hsl$1,extend$1(Color,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Hsl(this.h,this.s,this.l*nt,this.opacity)},rgb(){var nt=this.h%360+(this.h<0)*360,tt=isNaN(nt)||isNaN(this.s)?0:this.s,rt=this.l,st=rt+(rt<.5?rt:1-rt)*tt,at=2*rt-st;return new Rgb(hsl2rgb(nt>=240?nt-240:nt+120,at,st),hsl2rgb(nt,at,st),hsl2rgb(nt<120?nt+240:nt-120,at,st),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const nt=clampa(this.opacity);return`${nt===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${nt===1?")":`, ${nt})`}`}}));function clamph(nt){return nt=(nt||0)%360,nt<0?nt+360:nt}function clampt(nt){return Math.max(0,Math.min(1,nt||0))}function hsl2rgb(nt,tt,rt){return(nt<60?tt+(rt-tt)*nt/60:nt<180?rt:nt<240?tt+(rt-tt)*(240-nt)/60:tt)*255}const radians=Math.PI/180,degrees=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn$1=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(nt){if(nt instanceof Lab)return new Lab(nt.l,nt.a,nt.b,nt.opacity);if(nt instanceof Hcl)return hcl2lab(nt);nt instanceof Rgb||(nt=rgbConvert(nt));var tt=rgb2lrgb(nt.r),rt=rgb2lrgb(nt.g),st=rgb2lrgb(nt.b),at=xyz2lab((.2225045*tt+.7168786*rt+.0606169*st)/Yn),lt,dt;return tt===rt&&rt===st?lt=dt=at:(lt=xyz2lab((.4360747*tt+.3850649*rt+.1430804*st)/Xn),dt=xyz2lab((.0139322*tt+.0971045*rt+.7141733*st)/Zn$1)),new Lab(116*at-16,500*(lt-at),200*(at-dt),nt.opacity)}function lab$1(nt,tt,rt,st){return arguments.length===1?labConvert(nt):new Lab(nt,tt,rt,st??1)}function Lab(nt,tt,rt,st){this.l=+nt,this.a=+tt,this.b=+rt,this.opacity=+st}define(Lab,lab$1,extend$1(Color,{brighter(nt){return new Lab(this.l+K*(nt??1),this.a,this.b,this.opacity)},darker(nt){return new Lab(this.l-K*(nt??1),this.a,this.b,this.opacity)},rgb(){var nt=(this.l+16)/116,tt=isNaN(this.a)?nt:nt+this.a/500,rt=isNaN(this.b)?nt:nt-this.b/200;return tt=Xn*lab2xyz(tt),nt=Yn*lab2xyz(nt),rt=Zn$1*lab2xyz(rt),new Rgb(lrgb2rgb(3.1338561*tt-1.6168667*nt-.4906146*rt),lrgb2rgb(-.9787684*tt+1.9161415*nt+.033454*rt),lrgb2rgb(.0719453*tt-.2289914*nt+1.4052427*rt),this.opacity)}}));function xyz2lab(nt){return nt>t3?Math.pow(nt,1/3):nt/t2+t0$1}function lab2xyz(nt){return nt>t1$1?nt*nt*nt:t2*(nt-t0$1)}function lrgb2rgb(nt){return 255*(nt<=.0031308?12.92*nt:1.055*Math.pow(nt,1/2.4)-.055)}function rgb2lrgb(nt){return(nt/=255)<=.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4)}function hclConvert(nt){if(nt instanceof Hcl)return new Hcl(nt.h,nt.c,nt.l,nt.opacity);if(nt instanceof Lab||(nt=labConvert(nt)),nt.a===0&&nt.b===0)return new Hcl(NaN,0<nt.l&&nt.l<100?0:NaN,nt.l,nt.opacity);var tt=Math.atan2(nt.b,nt.a)*degrees;return new Hcl(tt<0?tt+360:tt,Math.sqrt(nt.a*nt.a+nt.b*nt.b),nt.l,nt.opacity)}function hcl$1(nt,tt,rt,st){return arguments.length===1?hclConvert(nt):new Hcl(nt,tt,rt,st??1)}function Hcl(nt,tt,rt,st){this.h=+nt,this.c=+tt,this.l=+rt,this.opacity=+st}function hcl2lab(nt){if(isNaN(nt.h))return new Lab(nt.l,0,0,nt.opacity);var tt=nt.h*radians;return new Lab(nt.l,Math.cos(tt)*nt.c,Math.sin(tt)*nt.c,nt.opacity)}define(Hcl,hcl$1,extend$1(Color,{brighter(nt){return new Hcl(this.h,this.c,this.l+K*(nt??1),this.opacity)},darker(nt){return new Hcl(this.h,this.c,this.l-K*(nt??1),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(nt){if(nt instanceof Cubehelix)return new Cubehelix(nt.h,nt.s,nt.l,nt.opacity);nt instanceof Rgb||(nt=rgbConvert(nt));var tt=nt.r/255,rt=nt.g/255,st=nt.b/255,at=(BC_DA*st+ED*tt-EB*rt)/(BC_DA+ED-EB),lt=st-at,dt=(E*(rt-at)-C*lt)/D,yt=Math.sqrt(dt*dt+lt*lt)/(E*at*(1-at)),vt=yt?Math.atan2(dt,lt)*degrees-120:NaN;return new Cubehelix(vt<0?vt+360:vt,yt,at,nt.opacity)}function cubehelix$1(nt,tt,rt,st){return arguments.length===1?cubehelixConvert(nt):new Cubehelix(nt,tt,rt,st??1)}function Cubehelix(nt,tt,rt,st){this.h=+nt,this.s=+tt,this.l=+rt,this.opacity=+st}define(Cubehelix,cubehelix$1,extend$1(Color,{brighter(nt){return nt=nt==null?brighter:Math.pow(brighter,nt),new Cubehelix(this.h,this.s,this.l*nt,this.opacity)},darker(nt){return nt=nt==null?darker:Math.pow(darker,nt),new Cubehelix(this.h,this.s,this.l*nt,this.opacity)},rgb(){var nt=isNaN(this.h)?0:(this.h+120)*radians,tt=+this.l,rt=isNaN(this.s)?0:this.s*tt*(1-tt),st=Math.cos(nt),at=Math.sin(nt);return new Rgb(255*(tt+rt*(A*st+B*at)),255*(tt+rt*(C*st+D*at)),255*(tt+rt*(E*st)),this.opacity)}}));function basis(nt,tt,rt,st,at){var lt=nt*nt,dt=lt*nt;return((1-3*nt+3*lt-dt)*tt+(4-6*lt+3*dt)*rt+(1+3*nt+3*lt-3*dt)*st+dt*at)/6}function basis$1(nt){var tt=nt.length-1;return function(rt){var st=rt<=0?rt=0:rt>=1?(rt=1,tt-1):Math.floor(rt*tt),at=nt[st],lt=nt[st+1],dt=st>0?nt[st-1]:2*at-lt,yt=st<tt-1?nt[st+2]:2*lt-at;return basis((rt-st/tt)*tt,dt,at,lt,yt)}}const constant=nt=>()=>nt;function linear$1(nt,tt){return function(rt){return nt+rt*tt}}function exponential(nt,tt,rt){return nt=Math.pow(nt,rt),tt=Math.pow(tt,rt)-nt,rt=1/rt,function(st){return Math.pow(nt+st*tt,rt)}}function hue(nt,tt){var rt=tt-nt;return rt?linear$1(nt,rt>180||rt<-180?rt-360*Math.round(rt/360):rt):constant(isNaN(nt)?tt:nt)}function gamma(nt){return(nt=+nt)==1?nogamma:function(tt,rt){return rt-tt?exponential(tt,rt,nt):constant(isNaN(tt)?rt:tt)}}function nogamma(nt,tt){var rt=tt-nt;return rt?linear$1(nt,rt):constant(isNaN(nt)?tt:nt)}const interpolateRgb=function nt(tt){var rt=gamma(tt);function st(at,lt){var dt=rt((at=rgb(at)).r,(lt=rgb(lt)).r),yt=rt(at.g,lt.g),vt=rt(at.b,lt.b),_t=nogamma(at.opacity,lt.opacity);return function(bt){return at.r=dt(bt),at.g=yt(bt),at.b=vt(bt),at.opacity=_t(bt),at+""}}return st.gamma=nt,st}(1);function rgbSpline(nt){return function(tt){var rt=tt.length,st=new Array(rt),at=new Array(rt),lt=new Array(rt),dt,yt;for(dt=0;dt<rt;++dt)yt=rgb(tt[dt]),st[dt]=yt.r||0,at[dt]=yt.g||0,lt[dt]=yt.b||0;return st=nt(st),at=nt(at),lt=nt(lt),yt.opacity=1,function(vt){return yt.r=st(vt),yt.g=at(vt),yt.b=lt(vt),yt+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(nt,tt){tt||(tt=[]);var rt=nt?Math.min(tt.length,nt.length):0,st=tt.slice(),at;return function(lt){for(at=0;at<rt;++at)st[at]=nt[at]*(1-lt)+tt[at]*lt;return st}}function isNumberArray(nt){return ArrayBuffer.isView(nt)&&!(nt instanceof DataView)}function genericArray(nt,tt){var rt=tt?tt.length:0,st=nt?Math.min(rt,nt.length):0,at=new Array(st),lt=new Array(rt),dt;for(dt=0;dt<st;++dt)at[dt]=interpolate(nt[dt],tt[dt]);for(;dt<rt;++dt)lt[dt]=tt[dt];return function(yt){for(dt=0;dt<st;++dt)lt[dt]=at[dt](yt);return lt}}function date(nt,tt){var rt=new Date;return nt=+nt,tt=+tt,function(st){return rt.setTime(nt*(1-st)+tt*st),rt}}function kn(nt,tt){return nt=+nt,tt=+tt,function(rt){return nt*(1-rt)+tt*rt}}function object(nt,tt){var rt={},st={},at;(nt===null||typeof nt!="object")&&(nt={}),(tt===null||typeof tt!="object")&&(tt={});for(at in tt)at in nt?rt[at]=interpolate(nt[at],tt[at]):st[at]=tt[at];return function(lt){for(at in rt)st[at]=rt[at](lt);return st}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(nt){return function(){return nt}}function one(nt){return function(tt){return nt(tt)+""}}function string(nt,tt){var rt=reA.lastIndex=reB.lastIndex=0,st,at,lt,dt=-1,yt=[],vt=[];for(nt=nt+"",tt=tt+"";(st=reA.exec(nt))&&(at=reB.exec(tt));)(lt=at.index)>rt&&(lt=tt.slice(rt,lt),yt[dt]?yt[dt]+=lt:yt[++dt]=lt),(st=st[0])===(at=at[0])?yt[dt]?yt[dt]+=at:yt[++dt]=at:(yt[++dt]=null,vt.push({i:dt,x:kn(st,at)})),rt=reB.lastIndex;return rt<tt.length&&(lt=tt.slice(rt),yt[dt]?yt[dt]+=lt:yt[++dt]=lt),yt.length<2?vt[0]?one(vt[0].x):zero(tt):(tt=vt.length,function(_t){for(var bt=0,Mt;bt<tt;++bt)yt[(Mt=vt[bt]).i]=Mt.x(_t);return yt.join("")})}function interpolate(nt,tt){var rt=typeof tt,st;return tt==null||rt==="boolean"?constant(tt):(rt==="number"?kn:rt==="string"?(st=color(tt))?(tt=st,interpolateRgb):string:tt instanceof color?interpolateRgb:tt instanceof Date?date:isNumberArray(tt)?numberArray:Array.isArray(tt)?genericArray:typeof tt.valueOf!="function"&&typeof tt.toString!="function"||isNaN(tt)?object:kn)(nt,tt)}function Dr(nt,tt){return nt=+nt,tt=+tt,function(rt){return Math.round(nt*(1-rt)+tt*rt)}}function hsl(nt){return function(tt,rt){var st=nt((tt=hsl$1(tt)).h,(rt=hsl$1(rt)).h),at=nogamma(tt.s,rt.s),lt=nogamma(tt.l,rt.l),dt=nogamma(tt.opacity,rt.opacity);return function(yt){return tt.h=st(yt),tt.s=at(yt),tt.l=lt(yt),tt.opacity=dt(yt),tt+""}}}const interpolateHsl=hsl(hue);var hslLong=hsl(nogamma);function lab(nt,tt){var rt=nogamma((nt=lab$1(nt)).l,(tt=lab$1(tt)).l),st=nogamma(nt.a,tt.a),at=nogamma(nt.b,tt.b),lt=nogamma(nt.opacity,tt.opacity);return function(dt){return nt.l=rt(dt),nt.a=st(dt),nt.b=at(dt),nt.opacity=lt(dt),nt+""}}function hcl(nt){return function(tt,rt){var st=nt((tt=hcl$1(tt)).h,(rt=hcl$1(rt)).h),at=nogamma(tt.c,rt.c),lt=nogamma(tt.l,rt.l),dt=nogamma(tt.opacity,rt.opacity);return function(yt){return tt.h=st(yt),tt.c=at(yt),tt.l=lt(yt),tt.opacity=dt(yt),tt+""}}}const interpolateHcl=hcl(hue);var hclLong=hcl(nogamma);function cubehelix(nt){return function tt(rt){rt=+rt;function st(at,lt){var dt=nt((at=cubehelix$1(at)).h,(lt=cubehelix$1(lt)).h),yt=nogamma(at.s,lt.s),vt=nogamma(at.l,lt.l),_t=nogamma(at.opacity,lt.opacity);return function(bt){return at.h=dt(bt),at.s=yt(bt),at.l=vt(Math.pow(bt,rt)),at.opacity=_t(bt),at+""}}return st.gamma=tt,st}(1)}const interpolateCubehelix=cubehelix(hue);var cubehelixLong=cubehelix(nogamma);function constants(nt){return function(){return nt}}function number(nt){return+nt}var unit=[0,1];function identity$1(nt){return nt}function normalize(nt,tt){return(tt-=nt=+nt)?function(rt){return(rt-nt)/tt}:constants(isNaN(tt)?NaN:.5)}function clamper(nt,tt){var rt;return nt>tt&&(rt=nt,nt=tt,tt=rt),function(st){return Math.max(nt,Math.min(tt,st))}}function bimap(nt,tt,rt){var st=nt[0],at=nt[1],lt=tt[0],dt=tt[1];return at<st?(st=normalize(at,st),lt=rt(dt,lt)):(st=normalize(st,at),lt=rt(lt,dt)),function(yt){return lt(st(yt))}}function polymap(nt,tt,rt){var st=Math.min(nt.length,tt.length)-1,at=new Array(st),lt=new Array(st),dt=-1;for(nt[st]<nt[0]&&(nt=nt.slice().reverse(),tt=tt.slice().reverse());++dt<st;)at[dt]=normalize(nt[dt],nt[dt+1]),lt[dt]=rt(tt[dt],tt[dt+1]);return function(yt){var vt=bisectRight(nt,yt,1,st)-1;return lt[vt](at[vt](yt))}}function copy(nt,tt){return tt.domain(nt.domain()).range(nt.range()).interpolate(nt.interpolate()).clamp(nt.clamp()).unknown(nt.unknown())}function transformer(){var nt=unit,tt=unit,rt=interpolate,st,at,lt,dt=identity$1,yt,vt,_t;function bt(){var Ct=Math.min(nt.length,tt.length);return dt!==identity$1&&(dt=clamper(nt[0],nt[Ct-1])),yt=Ct>2?polymap:bimap,vt=_t=null,Mt}function Mt(Ct){return Ct==null||isNaN(Ct=+Ct)?lt:(vt||(vt=yt(nt.map(st),tt,rt)))(st(dt(Ct)))}return Mt.invert=function(Ct){return dt(at((_t||(_t=yt(tt,nt.map(st),kn)))(Ct)))},Mt.domain=function(Ct){return arguments.length?(nt=Array.from(Ct,number),bt()):nt.slice()},Mt.range=function(Ct){return arguments.length?(tt=Array.from(Ct),bt()):tt.slice()},Mt.rangeRound=function(Ct){return tt=Array.from(Ct),rt=Dr,bt()},Mt.clamp=function(Ct){return arguments.length?(dt=Ct?!0:identity$1,bt()):dt!==identity$1},Mt.interpolate=function(Ct){return arguments.length?(rt=Ct,bt()):rt},Mt.unknown=function(Ct){return arguments.length?(lt=Ct,Mt):lt},function(Ct,Tt){return st=Ct,at=Tt,bt()}}function continuous(){return transformer()(identity$1,identity$1)}function tickFormat(nt,tt,rt,st){var at=tickStep(nt,tt,rt),lt;switch(st=formatSpecifier(st??",f"),st.type){case"s":{var dt=Math.max(Math.abs(nt),Math.abs(tt));return st.precision==null&&!isNaN(lt=precisionPrefix(at,dt))&&(st.precision=lt),formatPrefix(st,dt)}case"":case"e":case"g":case"p":case"r":{st.precision==null&&!isNaN(lt=precisionRound(at,Math.max(Math.abs(nt),Math.abs(tt))))&&(st.precision=lt-(st.type==="e"));break}case"f":case"%":{st.precision==null&&!isNaN(lt=precisionFixed(at))&&(st.precision=lt-(st.type==="%")*2);break}}return format(st)}function linearish(nt){var tt=nt.domain;return nt.ticks=function(rt){var st=tt();return ticks(st[0],st[st.length-1],rt??10)},nt.tickFormat=function(rt,st){var at=tt();return tickFormat(at[0],at[at.length-1],rt??10,st)},nt.nice=function(rt){rt==null&&(rt=10);var st=tt(),at=0,lt=st.length-1,dt=st[at],yt=st[lt],vt,_t,bt=10;for(yt<dt&&(_t=dt,dt=yt,yt=_t,_t=at,at=lt,lt=_t);bt-- >0;){if(_t=tickIncrement(dt,yt,rt),_t===vt)return st[at]=dt,st[lt]=yt,tt(st);if(_t>0)dt=Math.floor(dt/_t)*_t,yt=Math.ceil(yt/_t)*_t;else if(_t<0)dt=Math.ceil(dt*_t)/_t,yt=Math.floor(yt*_t)/_t;else break;vt=_t}return nt},nt}function linear(){var nt=continuous();return nt.copy=function(){return copy(nt,linear())},initRange.apply(nt,arguments),linearish(nt)}function nice(nt,tt){nt=nt.slice();var rt=0,st=nt.length-1,at=nt[rt],lt=nt[st],dt;return lt<at&&(dt=rt,rt=st,st=dt,dt=at,at=lt,lt=dt),nt[rt]=tt.floor(at),nt[st]=tt.ceil(lt),nt}function transformLog(nt){return Math.log(nt)}function transformExp(nt){return Math.exp(nt)}function transformLogn(nt){return-Math.log(-nt)}function transformExpn(nt){return-Math.exp(-nt)}function pow10(nt){return isFinite(nt)?+("1e"+nt):nt<0?0:nt}function powp(nt){return nt===10?pow10:nt===Math.E?Math.exp:tt=>Math.pow(nt,tt)}function logp(nt){return nt===Math.E?Math.log:nt===10&&Math.log10||nt===2&&Math.log2||(nt=Math.log(nt),tt=>Math.log(tt)/nt)}function reflect(nt){return(tt,rt)=>-nt(-tt,rt)}function loggish(nt){const tt=nt(transformLog,transformExp),rt=tt.domain;let st=10,at,lt;function dt(){return at=logp(st),lt=powp(st),rt()[0]<0?(at=reflect(at),lt=reflect(lt),nt(transformLogn,transformExpn)):nt(transformLog,transformExp),tt}return tt.base=function(yt){return arguments.length?(st=+yt,dt()):st},tt.domain=function(yt){return arguments.length?(rt(yt),dt()):rt()},tt.ticks=yt=>{const vt=rt();let _t=vt[0],bt=vt[vt.length-1];const Mt=bt<_t;Mt&&([_t,bt]=[bt,_t]);let Ct=at(_t),Tt=at(bt),$t,Rt;const Et=yt==null?10:+yt;let wt=[];if(!(st%1)&&Tt-Ct<Et){if(Ct=Math.floor(Ct),Tt=Math.ceil(Tt),_t>0){for(;Ct<=Tt;++Ct)for($t=1;$t<st;++$t)if(Rt=Ct<0?$t/lt(-Ct):$t*lt(Ct),!(Rt<_t)){if(Rt>bt)break;wt.push(Rt)}}else for(;Ct<=Tt;++Ct)for($t=st-1;$t>=1;--$t)if(Rt=Ct>0?$t/lt(-Ct):$t*lt(Ct),!(Rt<_t)){if(Rt>bt)break;wt.push(Rt)}wt.length*2<Et&&(wt=ticks(_t,bt,Et))}else wt=ticks(Ct,Tt,Math.min(Tt-Ct,Et)).map(lt);return Mt?wt.reverse():wt},tt.tickFormat=(yt,vt)=>{if(yt==null&&(yt=10),vt==null&&(vt=st===10?"s":","),typeof vt!="function"&&(!(st%1)&&(vt=formatSpecifier(vt)).precision==null&&(vt.trim=!0),vt=format(vt)),yt===1/0)return vt;const _t=Math.max(1,st*yt/tt.ticks().length);return bt=>{let Mt=bt/lt(Math.round(at(bt)));return Mt*st<st-.5&&(Mt*=st),Mt<=_t?vt(bt):""}},tt.nice=()=>rt(nice(rt(),{floor:yt=>lt(Math.floor(at(yt))),ceil:yt=>lt(Math.ceil(at(yt)))})),tt}function log(){const nt=loggish(transformer()).domain([1,10]);return nt.copy=()=>copy(nt,log()).base(nt.base()),initRange.apply(nt,arguments),nt}function transformSymlog(nt){return function(tt){return Math.sign(tt)*Math.log1p(Math.abs(tt/nt))}}function transformSymexp(nt){return function(tt){return Math.sign(tt)*Math.expm1(Math.abs(tt))*nt}}function symlogish(nt){var tt=1,rt=nt(transformSymlog(tt),transformSymexp(tt));return rt.constant=function(st){return arguments.length?nt(transformSymlog(tt=+st),transformSymexp(tt)):tt},linearish(rt)}function symlog(){var nt=symlogish(transformer());return nt.copy=function(){return copy(nt,symlog()).constant(nt.constant())},initRange.apply(nt,arguments)}function transformPow(nt){return function(tt){return tt<0?-Math.pow(-tt,nt):Math.pow(tt,nt)}}function transformSqrt(nt){return nt<0?-Math.sqrt(-nt):Math.sqrt(nt)}function transformSquare(nt){return nt<0?-nt*nt:nt*nt}function powish(nt){var tt=nt(identity$1,identity$1),rt=1;function st(){return rt===1?nt(identity$1,identity$1):rt===.5?nt(transformSqrt,transformSquare):nt(transformPow(rt),transformPow(1/rt))}return tt.exponent=function(at){return arguments.length?(rt=+at,st()):rt},linearish(tt)}function pow(){var nt=powish(transformer());return nt.copy=function(){return copy(nt,pow()).exponent(nt.exponent())},initRange.apply(nt,arguments),nt}function sqrt(){return pow.apply(null,arguments).exponent(.5)}const t0=new Date,t1=new Date;function timeInterval(nt,tt,rt,st){function at(lt){return nt(lt=arguments.length===0?new Date:new Date(+lt)),lt}return at.floor=lt=>(nt(lt=new Date(+lt)),lt),at.ceil=lt=>(nt(lt=new Date(lt-1)),tt(lt,1),nt(lt),lt),at.round=lt=>{const dt=at(lt),yt=at.ceil(lt);return lt-dt<yt-lt?dt:yt},at.offset=(lt,dt)=>(tt(lt=new Date(+lt),dt==null?1:Math.floor(dt)),lt),at.range=(lt,dt,yt)=>{const vt=[];if(lt=at.ceil(lt),yt=yt==null?1:Math.floor(yt),!(lt<dt)||!(yt>0))return vt;let _t;do vt.push(_t=new Date(+lt)),tt(lt,yt),nt(lt);while(_t<lt&&lt<dt);return vt},at.filter=lt=>timeInterval(dt=>{if(dt>=dt)for(;nt(dt),!lt(dt);)dt.setTime(dt-1)},(dt,yt)=>{if(dt>=dt)if(yt<0)for(;++yt<=0;)for(;tt(dt,-1),!lt(dt););else for(;--yt>=0;)for(;tt(dt,1),!lt(dt););}),rt&&(at.count=(lt,dt)=>(t0.setTime(+lt),t1.setTime(+dt),nt(t0),nt(t1),Math.floor(rt(t0,t1))),at.every=lt=>(lt=Math.floor(lt),!isFinite(lt)||!(lt>0)?null:lt>1?at.filter(st?dt=>st(dt)%lt===0:dt=>at.count(0,dt)%lt===0):at)),at}const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,second=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds())},(nt,tt)=>{nt.setTime(+nt+tt*durationSecond)},(nt,tt)=>(tt-nt)/durationSecond,nt=>nt.getUTCSeconds());second.range;const timeMinute=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond)},(nt,tt)=>{nt.setTime(+nt+tt*durationMinute)},(nt,tt)=>(tt-nt)/durationMinute,nt=>nt.getMinutes());timeMinute.range;const utcMinute=timeInterval(nt=>{nt.setUTCSeconds(0,0)},(nt,tt)=>{nt.setTime(+nt+tt*durationMinute)},(nt,tt)=>(tt-nt)/durationMinute,nt=>nt.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(nt=>{nt.setTime(nt-nt.getMilliseconds()-nt.getSeconds()*durationSecond-nt.getMinutes()*durationMinute)},(nt,tt)=>{nt.setTime(+nt+tt*durationHour)},(nt,tt)=>(tt-nt)/durationHour,nt=>nt.getHours());timeHour.range;const utcHour=timeInterval(nt=>{nt.setUTCMinutes(0,0,0)},(nt,tt)=>{nt.setTime(+nt+tt*durationHour)},(nt,tt)=>(tt-nt)/durationHour,nt=>nt.getUTCHours());utcHour.range;const timeDay=timeInterval(nt=>nt.setHours(0,0,0,0),(nt,tt)=>nt.setDate(nt.getDate()+tt),(nt,tt)=>(tt-nt-(tt.getTimezoneOffset()-nt.getTimezoneOffset())*durationMinute)/durationDay,nt=>nt.getDate()-1);timeDay.range;const utcDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,tt)=>{nt.setUTCDate(nt.getUTCDate()+tt)},(nt,tt)=>(tt-nt)/durationDay,nt=>nt.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(nt=>{nt.setUTCHours(0,0,0,0)},(nt,tt)=>{nt.setUTCDate(nt.getUTCDate()+tt)},(nt,tt)=>(tt-nt)/durationDay,nt=>Math.floor(nt/durationDay));unixDay.range;function timeWeekday(nt){return timeInterval(tt=>{tt.setDate(tt.getDate()-(tt.getDay()+7-nt)%7),tt.setHours(0,0,0,0)},(tt,rt)=>{tt.setDate(tt.getDate()+rt*7)},(tt,rt)=>(rt-tt-(rt.getTimezoneOffset()-tt.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(nt){return timeInterval(tt=>{tt.setUTCDate(tt.getUTCDate()-(tt.getUTCDay()+7-nt)%7),tt.setUTCHours(0,0,0,0)},(tt,rt)=>{tt.setUTCDate(tt.getUTCDate()+rt*7)},(tt,rt)=>(rt-tt)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(nt=>{nt.setDate(1),nt.setHours(0,0,0,0)},(nt,tt)=>{nt.setMonth(nt.getMonth()+tt)},(nt,tt)=>tt.getMonth()-nt.getMonth()+(tt.getFullYear()-nt.getFullYear())*12,nt=>nt.getMonth());timeMonth.range;const utcMonth=timeInterval(nt=>{nt.setUTCDate(1),nt.setUTCHours(0,0,0,0)},(nt,tt)=>{nt.setUTCMonth(nt.getUTCMonth()+tt)},(nt,tt)=>tt.getUTCMonth()-nt.getUTCMonth()+(tt.getUTCFullYear()-nt.getUTCFullYear())*12,nt=>nt.getUTCMonth());utcMonth.range;const timeYear=timeInterval(nt=>{nt.setMonth(0,1),nt.setHours(0,0,0,0)},(nt,tt)=>{nt.setFullYear(nt.getFullYear()+tt)},(nt,tt)=>tt.getFullYear()-nt.getFullYear(),nt=>nt.getFullYear());timeYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(tt=>{tt.setFullYear(Math.floor(tt.getFullYear()/nt)*nt),tt.setMonth(0,1),tt.setHours(0,0,0,0)},(tt,rt)=>{tt.setFullYear(tt.getFullYear()+rt*nt)});timeYear.range;const utcYear=timeInterval(nt=>{nt.setUTCMonth(0,1),nt.setUTCHours(0,0,0,0)},(nt,tt)=>{nt.setUTCFullYear(nt.getUTCFullYear()+tt)},(nt,tt)=>tt.getUTCFullYear()-nt.getUTCFullYear(),nt=>nt.getUTCFullYear());utcYear.every=nt=>!isFinite(nt=Math.floor(nt))||!(nt>0)?null:timeInterval(tt=>{tt.setUTCFullYear(Math.floor(tt.getUTCFullYear()/nt)*nt),tt.setUTCMonth(0,1),tt.setUTCHours(0,0,0,0)},(tt,rt)=>{tt.setUTCFullYear(tt.getUTCFullYear()+rt*nt)});utcYear.range;function applyDomain(nt,tt){tt.domain&&("nice"in nt||"quantiles"in nt||"padding"in nt,nt.domain(tt.domain))}function applyRange(nt,tt){tt.range&&("padding"in nt,nt.range(tt.range))}function applyAlign(nt,tt){"align"in nt&&"align"in tt&&typeof tt.align<"u"&&nt.align(tt.align)}function applyBase(nt,tt){"base"in nt&&"base"in tt&&typeof tt.base<"u"&&nt.base(tt.base)}function applyClamp(nt,tt){"clamp"in nt&&"clamp"in tt&&typeof tt.clamp<"u"&&nt.clamp(tt.clamp)}function applyConstant(nt,tt){"constant"in nt&&"constant"in tt&&typeof tt.constant<"u"&&nt.constant(tt.constant)}function applyExponent(nt,tt){"exponent"in nt&&"exponent"in tt&&typeof tt.exponent<"u"&&nt.exponent(tt.exponent)}var interpolatorMap={lab,hcl:interpolateHcl,"hcl-long":hclLong,hsl:interpolateHsl,"hsl-long":hslLong,cubehelix:interpolateCubehelix,"cubehelix-long":cubehelixLong,rgb:interpolateRgb};function createColorInterpolator(nt){switch(nt){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return interpolatorMap[nt]}var tt=nt.type,rt=nt.gamma,st=interpolatorMap[tt];return typeof rt>"u"?st:st.gamma(rt)}function applyInterpolate(nt,tt){if("interpolate"in tt&&"interpolate"in nt&&typeof tt.interpolate<"u"){var rt=createColorInterpolator(tt.interpolate);nt.interpolate(rt)}}var TEST_TIME=new Date(Date.UTC(2020,1,2,3,4,5)),TEST_FORMAT="%Y-%m-%d %H:%M";function isUtcScale(nt){var tt=nt.tickFormat(1,TEST_FORMAT)(TEST_TIME);return tt==="2020-02-02 03:04"}var localTimeIntervals={day:timeDay,hour:timeHour,minute:timeMinute,month:timeMonth,second,week:timeSunday,year:timeYear},utcIntervals={day:utcDay,hour:utcHour,minute:utcMinute,month:utcMonth,second,week:utcSunday,year:utcYear};function applyNice(nt,tt){if("nice"in tt&&typeof tt.nice<"u"&&"nice"in nt){var rt=tt.nice;if(typeof rt=="boolean")rt&&nt.nice();else if(typeof rt=="number")nt.nice(rt);else{var st=nt,at=isUtcScale(st);if(typeof rt=="string")st.nice(at?utcIntervals[rt]:localTimeIntervals[rt]);else{var lt=rt.interval,dt=rt.step,yt=(at?utcIntervals[lt]:localTimeIntervals[lt]).every(dt);yt!=null&&st.nice(yt)}}}}function applyPadding(nt,tt){"padding"in nt&&"padding"in tt&&typeof tt.padding<"u"&&nt.padding(tt.padding),"paddingInner"in nt&&"paddingInner"in tt&&typeof tt.paddingInner<"u"&&nt.paddingInner(tt.paddingInner),"paddingOuter"in nt&&"paddingOuter"in tt&&typeof tt.paddingOuter<"u"&&nt.paddingOuter(tt.paddingOuter)}function applyReverse(nt,tt){if(tt.reverse){var rt=nt.range().slice().reverse();"padding"in nt,nt.range(rt)}}function applyRound(nt,tt){"round"in tt&&typeof tt.round<"u"&&(tt.round&&"interpolate"in tt&&typeof tt.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",tt):"round"in nt?nt.round(tt.round):"interpolate"in nt&&tt.round&&nt.interpolate(Dr))}function applyUnknown(nt,tt){"unknown"in nt&&"unknown"in tt&&typeof tt.unknown<"u"&&nt.unknown(tt.unknown)}function applyZero(nt,tt){if("zero"in tt&&tt.zero===!0){var rt=nt.domain(),st=rt[0],at=rt[1],lt=at<st,dt=lt?[at,st]:[st,at],yt=dt[0],vt=dt[1],_t=[Math.min(0,yt),Math.max(0,vt)];nt.domain(lt?_t.reverse():_t)}}var ALL_OPERATORS=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],operators={domain:applyDomain,nice:applyNice,zero:applyZero,interpolate:applyInterpolate,round:applyRound,align:applyAlign,base:applyBase,clamp:applyClamp,constant:applyConstant,exponent:applyExponent,padding:applyPadding,range:applyRange,reverse:applyReverse,unknown:applyUnknown};function scaleOperator(){for(var nt=arguments.length,tt=new Array(nt),rt=0;rt<nt;rt++)tt[rt]=arguments[rt];var st=new Set(tt),at=ALL_OPERATORS.filter(function(lt){return st.has(lt)});return function(dt,yt){return typeof yt<"u"&&at.forEach(function(vt){operators[vt](dt,yt)}),dt}}var updateLinearScale=scaleOperator("domain","range","reverse","clamp","interpolate","nice","round","zero");function createLinearScale(nt){return updateLinearScale(linear(),nt)}var updateLogScale=scaleOperator("domain","range","reverse","base","clamp","interpolate","nice","round");function createLogScale(nt){return updateLogScale(log(),nt)}var updatePowScale=scaleOperator("domain","range","reverse","clamp","exponent","interpolate","nice","round","zero");function createPowScale(nt){return updatePowScale(pow(),nt)}var updateSymlogScale=scaleOperator("domain","range","reverse","clamp","constant","nice","zero","round");function createSymlogScale(nt){return updateSymlogScale(symlog(),nt)}var updateSqrtScale=scaleOperator("domain","range","reverse","clamp","interpolate","nice","round","zero");function createSqrtScale(nt){return updateSqrtScale(sqrt(),nt)}function coerceNumber(nt){if((typeof nt=="function"||typeof nt=="object"&&nt)&&"valueOf"in nt){var tt=nt.valueOf();if(typeof tt=="number")return tt}return nt}function getTicks(nt,tt){var rt=nt;return"ticks"in rt?rt.ticks(tt):rt.domain().filter(function(st,at,lt){return tt==null||lt.length<=tt||at%Math.round((lt.length-1)/tt)===0})}function toString$1(nt){return nt==null?void 0:nt.toString()}var _excluded$d=["tooltipOpen"];function _objectWithoutPropertiesLoose$d(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$g.apply(this,arguments)}function useTooltip(nt){var tt=reactExports.useState(_extends$g({tooltipOpen:!1},nt)),rt=tt[0],st=tt[1],at=reactExports.useCallback(function(dt){return st(typeof dt=="function"?function(yt){yt.tooltipOpen;var vt=_objectWithoutPropertiesLoose$d(yt,_excluded$d);return _extends$g({},dt(vt),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:dt.tooltipLeft,tooltipTop:dt.tooltipTop,tooltipData:dt.tooltipData})},[st]),lt=reactExports.useCallback(function(){return st({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[st]);return{tooltipOpen:rt.tooltipOpen,tooltipLeft:rt.tooltipLeft,tooltipTop:rt.tooltipTop,tooltipData:rt.tooltipData,updateTooltip:st,showTooltip:at,hideTooltip:lt}}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(nt){(function(){var tt={}.hasOwnProperty;function rt(){for(var lt="",dt=0;dt<arguments.length;dt++){var yt=arguments[dt];yt&&(lt=at(lt,st(yt)))}return lt}function st(lt){if(typeof lt=="string"||typeof lt=="number")return lt;if(typeof lt!="object")return"";if(Array.isArray(lt))return rt.apply(null,lt);if(lt.toString!==Object.prototype.toString&&!lt.toString.toString().includes("[native code]"))return lt.toString();var dt="";for(var yt in lt)tt.call(lt,yt)&&lt[yt]&&(dt=at(dt,yt));return dt}function at(lt,dt){return dt?lt?lt+" "+dt:lt+dt:lt}nt.exports?(rt.default=rt,nt.exports=rt):window.classNames=rt})()})(classnames);var classnamesExports=classnames.exports;const cx=getDefaultExportFromCjs(classnamesExports);var _excluded$c=["className","top","left","offsetLeft","offsetTop","style","children","unstyled","applyPositionStyle"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$f.apply(this,arguments)}function _objectWithoutPropertiesLoose$c(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}var defaultStyles={position:"absolute",backgroundColor:"white",color:"#666666",padding:".3rem .5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"},Tooltip=ReactExports.forwardRef(function(nt,tt){var rt=nt.className,st=nt.top,at=nt.left,lt=nt.offsetLeft,dt=lt===void 0?10:lt,yt=nt.offsetTop,vt=yt===void 0?10:yt,_t=nt.style,bt=_t===void 0?defaultStyles:_t,Mt=nt.children,Ct=nt.unstyled,Tt=Ct===void 0?!1:Ct,$t=nt.applyPositionStyle,Rt=$t===void 0?!1:$t,Et=_objectWithoutPropertiesLoose$c(nt,_excluded$c);return ReactExports.createElement("div",_extends$f({ref:tt,className:cx("visx-tooltip",rt),style:_extends$f({top:st==null||vt==null?st:st+vt,left:at==null||dt==null?at:at+dt},Rt&&{position:"absolute"},!Tt&&bt)},Et),Mt)});Tooltip.propTypes={children:_pt.node,className:_pt.string,left:_pt.number,offsetLeft:_pt.number,offsetTop:_pt.number,top:_pt.number,applyPositionStyle:_pt.bool,unstyled:_pt.bool};Tooltip.displayName="Tooltip";function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$e.apply(this,arguments)}function _assertThisInitialized(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function _inheritsLoose(nt,tt){nt.prototype=Object.create(tt.prototype),nt.prototype.constructor=nt,_setPrototypeOf(nt,tt)}function _setPrototypeOf(nt,tt){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(st,at){return st.__proto__=at,st},_setPrototypeOf(nt,tt)}var emptyRect$1={top:0,right:0,bottom:0,left:0,width:0,height:0};function withBoundingRects(nt){var tt;return tt=function(rt){_inheritsLoose(st,rt);function st(lt){var dt;return dt=rt.call(this,lt)||this,dt.state={rect:void 0,parentRect:void 0},dt.nodeRef=ReactExports.createRef(),dt.getRects=dt.getRects.bind(_assertThisInitialized(dt)),dt}var at=st.prototype;return at.componentDidMount=function(){var dt,yt=this;this.node=(dt=this.nodeRef)!=null&&dt.current?this.nodeRef.current:ReactDOM.findDOMNode(this),this.setState(function(){return yt.getRects()})},at.getRects=function(){if(!this.node)return this.state;var dt=this.node,yt=dt.parentNode,vt=dt.getBoundingClientRect?dt.getBoundingClientRect():emptyRect$1,_t=yt!=null&&yt.getBoundingClientRect?yt.getBoundingClientRect():emptyRect$1;return{rect:vt,parentRect:_t}},at.render=function(){return ReactExports.createElement(nt,_extends$e({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},st}(ReactExports.PureComponent),tt.displayName="withBoundingRects("+(nt.displayName||"")+")",tt}var TooltipPositionContext=reactExports.createContext({isFlippedVertically:!1,isFlippedHorizontally:!1}),TooltipPositionProvider=TooltipPositionContext.Provider;TooltipPositionContext.Consumer;var _excluded$b=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$d.apply(this,arguments)}function _objectWithoutPropertiesLoose$b(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function TooltipWithBounds(nt){var tt=nt.children;nt.getRects;var rt=nt.left,st=rt===void 0?0:rt,at=nt.offsetLeft,lt=at===void 0?10:at,dt=nt.offsetTop,yt=dt===void 0?10:dt,vt=nt.parentRect,_t=nt.rect,bt=nt.style,Mt=bt===void 0?defaultStyles:bt,Ct=nt.top,Tt=Ct===void 0?0:Ct,$t=nt.unstyled,Rt=$t===void 0?!1:$t,Et=nt.nodeRef,wt=_objectWithoutPropertiesLoose$b(nt,_excluded$b),Pt,Ft=!1,Nt=!1;if(_t&&vt){var Ot=st,Bt=Tt;if(vt.width){var Xt=Ot+lt+_t.width-vt.width,Zt=_t.width-Ot-lt;Ft=Xt>0&&Xt>Zt}else{var rn=Ot+lt+_t.width-window.innerWidth,Gt=_t.width-Ot-lt;Ft=rn>0&&rn>Gt}if(vt.height){var nn=Bt+yt+_t.height-vt.height,cn=_t.height-Bt-yt;Nt=nn>0&&nn>cn}else Nt=Bt+yt+_t.height>window.innerHeight;Ot=Ft?Ot-_t.width-lt:Ot+lt,Bt=Nt?Bt-_t.height-yt:Bt+yt,Ot=Math.round(Ot),Bt=Math.round(Bt),Pt="translate("+Ot+"px, "+Bt+"px)"}return ReactExports.createElement(Tooltip,_extends$d({ref:Et,style:_extends$d({left:0,top:0,transform:Pt},!Rt&&Mt)},wt),ReactExports.createElement(TooltipPositionProvider,{value:{isFlippedVertically:!Nt,isFlippedHorizontally:!Ft}},tt))}TooltipWithBounds.propTypes={nodeRef:_pt.oneOfType([_pt.string,_pt.func,_pt.object])};const Or=withBoundingRects(TooltipWithBounds);var _excluded$a=["top","left","transform","className","children","innerRef"];function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$c.apply(this,arguments)}function _objectWithoutPropertiesLoose$a(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function Group(nt){var tt=nt.top,rt=tt===void 0?0:tt,st=nt.left,at=st===void 0?0:st,lt=nt.transform,dt=nt.className,yt=nt.children,vt=nt.innerRef,_t=_objectWithoutPropertiesLoose$a(nt,_excluded$a);return ReactExports.createElement("g",_extends$c({ref:vt,className:cx("visx-group",dt),transform:lt||"translate("+at+", "+rt+")"},_t),yt)}Group.propTypes={top:_pt.number,left:_pt.number,transform:_pt.string,className:_pt.string,children:_pt.node,innerRef:_pt.oneOfType([_pt.string,_pt.func,_pt.object])};var _excluded$9=["from","to","fill","className","innerRef"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$b.apply(this,arguments)}function _objectWithoutPropertiesLoose$9(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function Line$1(nt){var tt=nt.from,rt=tt===void 0?{x:0,y:0}:tt,st=nt.to,at=st===void 0?{x:1,y:1}:st,lt=nt.fill,dt=lt===void 0?"transparent":lt,yt=nt.className,vt=nt.innerRef,_t=_objectWithoutPropertiesLoose$9(nt,_excluded$9),bt=rt.x===at.x||rt.y===at.y;return ReactExports.createElement("line",_extends$b({ref:vt,className:cx("visx-line",yt),x1:rt.x,y1:rt.y,x2:at.x,y2:at.y,fill:dt,shapeRendering:bt?"crispEdges":"auto"},_t))}var balancedMatch$1=balanced$3;function balanced$3(nt,tt,rt){nt instanceof RegExp&&(nt=maybeMatch$1(nt,rt)),tt instanceof RegExp&&(tt=maybeMatch$1(tt,rt));var st=range$1(nt,tt,rt);return st&&{start:st[0],end:st[1],pre:rt.slice(0,st[0]),body:rt.slice(st[0]+nt.length,st[1]),post:rt.slice(st[1]+tt.length)}}function maybeMatch$1(nt,tt){var rt=tt.match(nt);return rt?rt[0]:null}balanced$3.range=range$1;function range$1(nt,tt,rt){var st,at,lt,dt,yt,vt=rt.indexOf(nt),_t=rt.indexOf(tt,vt+1),bt=vt;if(vt>=0&&_t>0){for(st=[],lt=rt.length;bt>=0&&!yt;)bt==vt?(st.push(bt),vt=rt.indexOf(nt,bt+1)):st.length==1?yt=[st.pop(),_t]:(at=st.pop(),at<lt&&(lt=at,dt=_t),_t=rt.indexOf(tt,bt+1)),bt=vt<_t&&vt>=0?vt:_t;st.length&&(yt=[lt,dt])}return yt}var balancedMatch=balanced$2;function balanced$2(nt,tt,rt){nt instanceof RegExp&&(nt=maybeMatch(nt,rt)),tt instanceof RegExp&&(tt=maybeMatch(tt,rt));var st=range(nt,tt,rt);return st&&{start:st[0],end:st[1],pre:rt.slice(0,st[0]),body:rt.slice(st[0]+nt.length,st[1]),post:rt.slice(st[1]+tt.length)}}function maybeMatch(nt,tt){var rt=tt.match(nt);return rt?rt[0]:null}balanced$2.range=range;function range(nt,tt,rt){var st,at,lt,dt,yt,vt=rt.indexOf(nt),_t=rt.indexOf(tt,vt+1),bt=vt;if(vt>=0&&_t>0){if(nt===tt)return[vt,_t];for(st=[],lt=rt.length;bt>=0&&!yt;)bt==vt?(st.push(bt),vt=rt.indexOf(nt,bt+1)):st.length==1?yt=[st.pop(),_t]:(at=st.pop(),at<lt&&(lt=at,dt=_t),_t=rt.indexOf(tt,bt+1)),bt=vt<_t&&vt>=0?vt:_t;st.length&&(yt=[lt,dt])}return yt}var balanced$1=balancedMatch,reduceFunctionCall_1=reduceFunctionCall$1;function reduceFunctionCall$1(nt,tt,rt){var st=nt;return getFunctionCalls(nt,tt).reduce(function(at,lt){return at.replace(lt.functionIdentifier+"("+lt.matches.body+")",evalFunctionCall(lt.matches.body,lt.functionIdentifier,rt,st,tt))},nt)}function getFunctionCalls(nt,tt){var rt=[],st=typeof tt=="string"?new RegExp("\\b("+tt+")\\("):tt;do{var at=st.exec(nt);if(!at)return rt;if(at[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+tt);var lt=at[1],dt=at.index,yt=balanced$1("(",")",nt.substring(dt));if(!yt||yt.start!==at[0].length-1)throw new SyntaxError(lt+"(): missing closing ')' in the value '"+nt+"'");rt.push({matches:yt,functionIdentifier:lt}),nt=yt.post}while(st.test(nt));return rt}function evalFunctionCall(nt,tt,rt,st,at){return rt(reduceFunctionCall$1(nt,at,rt),tt,st)}var Mexp$4=function(nt){this.value=nt};Mexp$4.math={isDegree:!0,acos:function(nt){return Mexp$4.math.isDegree?180/Math.PI*Math.acos(nt):Math.acos(nt)},add:function(nt,tt){return nt+tt},asin:function(nt){return Mexp$4.math.isDegree?180/Math.PI*Math.asin(nt):Math.asin(nt)},atan:function(nt){return Mexp$4.math.isDegree?180/Math.PI*Math.atan(nt):Math.atan(nt)},acosh:function(nt){return Math.log(nt+Math.sqrt(nt*nt-1))},asinh:function(nt){return Math.log(nt+Math.sqrt(nt*nt+1))},atanh:function(nt){return Math.log((1+nt)/(1-nt))},C:function(nt,tt){var rt=1,st=nt-tt,at=tt;at<st&&(at=st,st=tt);for(var lt=at+1;lt<=nt;lt++)rt*=lt;return rt/Mexp$4.math.fact(st)},changeSign:function(nt){return-nt},cos:function(nt){return Mexp$4.math.isDegree&&(nt=Mexp$4.math.toRadian(nt)),Math.cos(nt)},cosh:function(nt){return(Math.pow(Math.E,nt)+Math.pow(Math.E,-1*nt))/2},div:function(nt,tt){return nt/tt},fact:function(nt){if(nt%1!==0)return"NaN";for(var tt=1,rt=2;rt<=nt;rt++)tt*=rt;return tt},inverse:function(nt){return 1/nt},log:function(nt){return Math.log(nt)/Math.log(10)},mod:function(nt,tt){return nt%tt},mul:function(nt,tt){return nt*tt},P:function(nt,tt){for(var rt=1,st=Math.floor(nt)-Math.floor(tt)+1;st<=Math.floor(nt);st++)rt*=st;return rt},Pi:function(nt,tt,rt){for(var st=1,at=nt;at<=tt;at++)st*=Number(rt.postfixEval({n:at}));return st},pow10x:function(nt){for(var tt=1;nt--;)tt*=10;return tt},sigma:function(nt,tt,rt){for(var st=0,at=nt;at<=tt;at++)st+=Number(rt.postfixEval({n:at}));return st},sin:function(nt){return Mexp$4.math.isDegree&&(nt=Mexp$4.math.toRadian(nt)),Math.sin(nt)},sinh:function(nt){return(Math.pow(Math.E,nt)-Math.pow(Math.E,-1*nt))/2},sub:function(nt,tt){return nt-tt},tan:function(nt){return Mexp$4.math.isDegree&&(nt=Mexp$4.math.toRadian(nt)),Math.tan(nt)},tanh:function(nt){return Mexp$4.sinha(nt)/Mexp$4.cosha(nt)},toRadian:function(nt){return nt*Math.PI/180},and:function(nt,tt){return nt&tt}};Mexp$4.Exception=function(nt){this.message=nt};var math_function=Mexp$4,Mexp$3=math_function;function inc(nt,tt){for(var rt=0;rt<nt.length;rt++)nt[rt]+=tt;return nt}var tokens=[{token:"sin",show:"sin",type:0,value:Mexp$3.math.sin},{token:"cos",show:"cos",type:0,value:Mexp$3.math.cos},{token:"tan",show:"tan",type:0,value:Mexp$3.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:Mexp$3.math.P},{token:"C",show:"C",type:10,value:Mexp$3.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:Mexp$3.math.asin},{token:"acos",show:"acos",type:0,value:Mexp$3.math.acos},{token:"atan",show:"atan",type:0,value:Mexp$3.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:Mexp$3.math.cosh},{token:"acosh",show:"acosh",type:0,value:Mexp$3.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:Mexp$3.math.div},{token:"!",show:"!",type:7,value:Mexp$3.math.fact},{token:"tanh",show:"tanh",type:0,value:Mexp$3.math.tanh},{token:"atanh",show:"atanh",type:0,value:Mexp$3.math.atanh},{token:"Mod",show:" Mod ",type:2,value:Mexp$3.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:Mexp$3.math.mul},{token:"sinh",show:"sinh",type:0,value:Mexp$3.math.sinh},{token:"asinh",show:"asinh",type:0,value:Mexp$3.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:Mexp$3.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:Mexp$3.math.add},{token:"-",show:"-",type:9,value:Mexp$3.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:Mexp$3.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:Mexp$3.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:Mexp$3.math.and}],preced={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11};for(var i=0;i<tokens.length;i++)tokens[i].precedence=preced[tokens[i].type];var type0={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},type1={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},type1Asterick={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},empty={},type3Asterick={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},type6={1:!0},newAr=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function match(nt,tt,rt,st){for(var at=0;at<st;at++)if(nt[rt+at]!==tt[at])return!1;return!0}Mexp$3.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14};Mexp$3.addToken=function(nt){for(var tt=0;tt<nt.length;tt++){var rt=nt[tt].token.length,st=-1;nt[tt].type===Mexp$3.tokenTypes.FUNCTION_WITH_N_ARGS&&nt[tt].numberOfArguments===void 0&&(nt[tt].numberOfArguments=2),newAr[rt]=newAr[rt]||[];for(var at=0;at<newAr[rt].length;at++)if(nt[tt].token===newAr[rt][at]){st=indexOfToken(newAr[rt][at],tokens);break}st===-1?(tokens.push(nt[tt]),nt[tt].precedence=preced[nt[tt].type],newAr.length<=nt[tt].token.length&&(newAr[nt[tt].token.length]=[]),newAr[nt[tt].token.length].push(nt[tt].token)):(tokens[st]=nt[tt],nt[tt].precedence=preced[nt[tt].type])}};function indexOfToken(nt,tt){for(var rt=0;rt<tt.length;rt++)if(tt[rt].token===nt)return rt;return-1}function tokenize(nt){for(var tt=[],rt=nt.length,st,at,lt,dt=0;dt<rt;dt++)if(!(dt<rt-1&&nt[dt]===" "&&nt[dt+1]===" ")){for(st="",at=nt.length-dt>newAr.length-2?newAr.length-1:nt.length-dt;at>0;at--)if(newAr[at]!==void 0)for(lt=0;lt<newAr[at].length;lt++)match(nt,newAr[at][lt],dt,at)&&(st=newAr[at][lt],lt=newAr[at].length,at=0);if(dt+=st.length-1,st==="")throw new Mexp$3.Exception("Can't understand after "+nt.slice(dt));tt.push(tokens[indexOfToken(st,tokens)])}return tt}var changeSignObj={value:Mexp$3.math.changeSign,type:0,pre:21,show:"-"},closingParObj={value:")",show:")",type:5,pre:0},openingParObj={value:"(",type:4,pre:0,show:"("};Mexp$3.lex=function(nt,tt){var rt=[openingParObj],st=[],at=nt,lt=type0,dt=0,yt=empty,vt="",_t;typeof tt<"u"&&Mexp$3.addToken(tt);var bt={},Mt=tokenize(at);for(_t=0;_t<Mt.length;_t++){var Ct=Mt[_t];if(Ct.type===14){if(_t>0&&_t<Mt.length-1&&Mt[_t+1].type===1&&(Mt[_t-1].type===1||Mt[_t-1].type===6))throw new Mexp$3.Exception("Unexpected Space");continue}var Tt=Ct.token,$t=Ct.type,Rt=Ct.value,Et=Ct.precedence,wt=Ct.show,Pt=rt[rt.length-1],Ft;for(Ft=st.length;Ft--&&st[Ft]===0;)if([0,2,3,4,5,9,11,12,13].indexOf($t)!==-1){if(lt[$t]!==!0)throw new Mexp$3.Exception(Tt+" is not allowed after "+vt);rt.push(closingParObj),lt=type1,yt=type3Asterick,st.pop()}if(lt[$t]!==!0)throw new Mexp$3.Exception(Tt+" is not allowed after "+vt);if(yt[$t]===!0&&($t=2,Rt=Mexp$3.math.mul,wt="&times;",Et=3,_t=_t-1),bt={value:Rt,type:$t,pre:Et,show:wt,numberOfArguments:Ct.numberOfArguments},$t===0)lt=type0,yt=empty,inc(st,2),rt.push(bt),Mt[_t+1].type!==4&&(rt.push(openingParObj),st.push(2));else if($t===1)Pt.type===1?(Pt.value+=Rt,inc(st,1)):rt.push(bt),lt=type1,yt=type1Asterick;else if($t===2)lt=type0,yt=empty,inc(st,2),rt.push(bt);else if($t===3)rt.push(bt),lt=type1,yt=type3Asterick;else if($t===4)inc(st,1),dt++,lt=type0,yt=empty,rt.push(bt);else if($t===5){if(!dt)throw new Mexp$3.Exception("Closing parenthesis are more than opening one, wait What!!!");dt--,lt=type1,yt=type3Asterick,rt.push(bt),inc(st,1)}else if($t===6){if(Pt.hasDec)throw new Mexp$3.Exception("Two decimals are not allowed in one number");Pt.type!==1&&(Pt={value:0,type:1,pre:0},rt.push(Pt)),lt=type6,inc(st,1),yt=empty,Pt.value+=Rt,Pt.hasDec=!0}else $t===7&&(lt=type1,yt=type3Asterick,inc(st,1),rt.push(bt));$t===8?(lt=type0,yt=empty,inc(st,Ct.numberOfArguments+2),rt.push(bt),Mt[_t+1].type!==4&&(rt.push(openingParObj),st.push(Ct.numberOfArguments+2))):$t===9?(Pt.type===9?Pt.value===Mexp$3.math.add?(Pt.value=Rt,Pt.show=wt,inc(st,1)):Pt.value===Mexp$3.math.sub&&wt==="-"&&(Pt.value=Mexp$3.math.add,Pt.show="+",inc(st,1)):Pt.type!==5&&Pt.type!==7&&Pt.type!==1&&Pt.type!==3&&Pt.type!==13?Tt==="-"&&(lt=type0,yt=empty,inc(st,2).push(2),rt.push(changeSignObj),rt.push(openingParObj)):(rt.push(bt),inc(st,2)),lt=type0,yt=empty):$t===10?(lt=type0,yt=empty,inc(st,2),rt.push(bt)):$t===11?(lt=type0,yt=empty,rt.push(bt)):$t===12?(lt=type0,yt=empty,inc(st,6),rt.push(bt),Mt[_t+1].type!==4&&(rt.push(openingParObj),st.push(6))):$t===13&&(lt=type1,yt=type3Asterick,rt.push(bt)),inc(st,-1),vt=Tt}for(Ft=st.length;Ft--;)rt.push(closingParObj);if(lt[5]!==!0)throw new Mexp$3.Exception("complete the expression");for(;dt--;)rt.push(closingParObj);return rt.push(closingParObj),new Mexp$3(rt)};var lexer=Mexp$3,Mexp$2=lexer;Mexp$2.prototype.toPostfix=function(){for(var nt=[],tt,rt,st,at,lt,dt=[{value:"(",type:4,pre:0}],yt=this.value,vt=1;vt<yt.length;vt++)if(yt[vt].type===1||yt[vt].type===3||yt[vt].type===13)yt[vt].type===1&&(yt[vt].value=Number(yt[vt].value)),nt.push(yt[vt]);else if(yt[vt].type===4)dt.push(yt[vt]);else if(yt[vt].type===5)for(;(rt=dt.pop()).type!==4;)nt.push(rt);else if(yt[vt].type===11){for(;(rt=dt.pop()).type!==4;)nt.push(rt);dt.push(rt)}else{tt=yt[vt],at=tt.pre,lt=dt[dt.length-1],st=lt.pre;var _t=lt.value=="Math.pow"&&tt.value=="Math.pow";if(at>st)dt.push(tt);else{for(;st>=at&&!_t||_t&&at<st;)rt=dt.pop(),lt=dt[dt.length-1],nt.push(rt),st=lt.pre,_t=tt.value=="Math.pow"&&lt.value=="Math.pow";dt.push(tt)}}return new Mexp$2(nt)};var postfix=Mexp$2,Mexp$1=postfix;Mexp$1.prototype.postfixEval=function(nt){nt=nt||{},nt.PI=Math.PI,nt.E=Math.E;for(var tt=[],rt,st,at,lt=this.value,dt=typeof nt.n<"u",yt=0;yt<lt.length;yt++)if(lt[yt].type===1)tt.push({value:lt[yt].value,type:1});else if(lt[yt].type===3)tt.push({value:nt[lt[yt].value],type:1});else if(lt[yt].type===0)typeof tt[tt.length-1].type>"u"?tt[tt.length-1].value.push(lt[yt]):tt[tt.length-1].value=lt[yt].value(tt[tt.length-1].value);else if(lt[yt].type===7)typeof tt[tt.length-1].type>"u"?tt[tt.length-1].value.push(lt[yt]):tt[tt.length-1].value=lt[yt].value(tt[tt.length-1].value);else if(lt[yt].type===8){for(var vt=[],_t=0;_t<lt[yt].numberOfArguments;_t++)vt.push(tt.pop().value);tt.push({type:1,value:lt[yt].value.apply(lt[yt],vt.reverse())})}else lt[yt].type===10?(rt=tt.pop(),st=tt.pop(),typeof st.type>"u"?(st.value=st.concat(rt),st.value.push(lt[yt]),tt.push(st)):typeof rt.type>"u"?(rt.unshift(st),rt.push(lt[yt]),tt.push(rt)):tt.push({type:1,value:lt[yt].value(st.value,rt.value)})):lt[yt].type===2||lt[yt].type===9?(rt=tt.pop(),st=tt.pop(),typeof st.type>"u"?(st=st.concat(rt),st.push(lt[yt]),tt.push(st)):typeof rt.type>"u"?(rt.unshift(st),rt.push(lt[yt]),tt.push(rt)):tt.push({type:1,value:lt[yt].value(st.value,rt.value)})):lt[yt].type===12?(rt=tt.pop(),typeof rt.type<"u"&&(rt=[rt]),st=tt.pop(),at=tt.pop(),tt.push({type:1,value:lt[yt].value(at.value,st.value,new Mexp$1(rt))})):lt[yt].type===13&&(dt?tt.push({value:nt[lt[yt].value],type:3}):tt.push([lt[yt]]));if(tt.length>1)throw new Mexp$1.Exception("Uncaught Syntax error");return tt[0].value>1e15?"Infinity":parseFloat(tt[0].value.toFixed(15))};Mexp$1.eval=function(nt,tt,rt){return typeof tt>"u"?this.lex(nt).toPostfix().postfixEval():typeof rt>"u"?typeof tt.length<"u"?this.lex(nt,tt).toPostfix().postfixEval():this.lex(nt).toPostfix().postfixEval(tt):this.lex(nt,tt).toPostfix().postfixEval(rt)};var postfix_evaluator=Mexp$1,Mexp=postfix_evaluator;Mexp.prototype.formulaEval=function(){for(var nt,tt,rt,st=[],at=this.value,lt=0;lt<at.length;lt++)at[lt].type===1||at[lt].type===3?st.push({value:at[lt].type===3?at[lt].show:at[lt].value,type:1}):at[lt].type===13?st.push({value:at[lt].show,type:1}):at[lt].type===0?st[st.length-1]={value:at[lt].show+(at[lt].show!="-"?"(":"")+st[st.length-1].value+(at[lt].show!="-"?")":""),type:0}:at[lt].type===7?st[st.length-1]={value:(st[st.length-1].type!=1?"(":"")+st[st.length-1].value+(st[st.length-1].type!=1?")":"")+at[lt].show,type:7}:at[lt].type===10?(nt=st.pop(),tt=st.pop(),at[lt].show==="P"||at[lt].show==="C"?st.push({value:"<sup>"+tt.value+"</sup>"+at[lt].show+"<sub>"+nt.value+"</sub>",type:10}):st.push({value:(tt.type!=1?"(":"")+tt.value+(tt.type!=1?")":"")+"<sup>"+nt.value+"</sup>",type:1})):at[lt].type===2||at[lt].type===9?(nt=st.pop(),tt=st.pop(),st.push({value:(tt.type!=1?"(":"")+tt.value+(tt.type!=1?")":"")+at[lt].show+(nt.type!=1?"(":"")+nt.value+(nt.type!=1?")":""),type:at[lt].type})):at[lt].type===12&&(nt=st.pop(),tt=st.pop(),rt=st.pop(),st.push({value:at[lt].show+"("+rt.value+","+tt.value+","+nt.value+")",type:12}));return st[0].value};var formula_evaluator=Mexp,balanced=balancedMatch$1,reduceFunctionCall=reduceFunctionCall_1,mexp=formula_evaluator,MAX_STACK=100,NESTED_CALC_RE=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,stack,reduceCssCalc=reduceCSSCalc;function reduceCSSCalc(nt,tt){stack=0,tt=Math.pow(10,tt===void 0?5:tt),nt=nt.replace(/\n+/g," ");function rt(at,lt,dt){if(stack++>MAX_STACK)throw stack=0,new Error("Call stack overflow for "+dt);if(at==="")throw new Error(lt+"(): '"+dt+"' must contain a non-whitespace string");at=st(at,dt);var yt=getUnitsInExpression(at);if(yt.length>1||at.indexOf("var(")>-1)return lt+"("+at+")";var vt=yt[0]||"";vt==="%"&&(at=at.replace(/\b[0-9\.]+%/g,function(Mt){return parseFloat(Mt.slice(0,-1))*.01}));var _t=at.replace(new RegExp(vt,"gi"),""),bt;try{bt=mexp.eval(_t)}catch{return lt+"("+at+")"}return vt==="%"&&(bt*=100),(lt.length||vt==="%")&&(bt=Math.round(bt*tt)/tt),bt+=vt,bt}function st(at,lt){at=at.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var dt="",yt=at,vt;vt=NESTED_CALC_RE.exec(yt);){vt[0].index>0&&(dt+=yt.substring(0,vt[0].index));var _t=balanced("(",")",yt.substring([0].index));if(_t.body==="")throw new Error("'"+at+"' must contain a non-whitespace string");var bt=rt(_t.body,"",lt);dt+=_t.pre+bt,yt=_t.post}return dt+yt}return reduceFunctionCall(nt,/((?:\-[a-z]+\-)?calc)\(/,rt)}function getUnitsInExpression(nt){for(var tt=[],rt=[],st=/[\.0-9]([%a-z]+)/gi,at=st.exec(nt);at;)!at||!at[1]||(rt.indexOf(at[1].toLowerCase())===-1&&(tt.push(at[1]),rt.push(at[1].toLowerCase())),at=st.exec(nt));return tt}const reduceCSSCalc$1=getDefaultExportFromCjs(reduceCssCalc);var MEASUREMENT_ELEMENT_ID="__react_svg_text_measurement_id";function getStringWidth(nt,tt){try{var rt=document.getElementById(MEASUREMENT_ELEMENT_ID);if(!rt){var st=document.createElementNS("http://www.w3.org/2000/svg","svg");st.setAttribute("aria-hidden","true"),st.style.width="0",st.style.height="0",st.style.position="absolute",st.style.top="-100%",st.style.left="-100%",rt=document.createElementNS("http://www.w3.org/2000/svg","text"),rt.setAttribute("id",MEASUREMENT_ELEMENT_ID),st.appendChild(rt),document.body.appendChild(st)}return Object.assign(rt.style,tt),rt.textContent=nt,rt.getComputedTextLength()}catch{return null}}const getStringWidth$1=memoize$2(getStringWidth,function(nt,tt){return nt+"_"+JSON.stringify(tt)});var _excluded$8=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function _objectWithoutPropertiesLoose$8(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function isNumber$1(nt){return typeof nt=="number"}function isXOrYInValid(nt){return typeof nt=="number"&&Number.isFinite(nt)||typeof nt=="string"}function useText(nt){var tt=nt.verticalAnchor,rt=tt===void 0?"end":tt,st=nt.scaleToFit,at=st===void 0?!1:st,lt=nt.angle,dt=nt.width,yt=nt.lineHeight,vt=yt===void 0?"1em":yt,_t=nt.capHeight,bt=_t===void 0?"0.71em":_t,Mt=nt.children,Ct=nt.style,Tt=_objectWithoutPropertiesLoose$8(nt,_excluded$8),$t=Tt.x,Rt=$t===void 0?0:$t,Et=Tt.y,wt=Et===void 0?0:Et,Pt=!isXOrYInValid(Rt)||!isXOrYInValid(wt),Ft=reactExports.useMemo(function(){var rn=Mt==null?[]:Mt.toString().split(/(?:(?!\u00A0+)\s+)/);return{wordsWithWidth:rn.map(function(Gt){return{word:Gt,wordWidth:getStringWidth$1(Gt,Ct)||0}}),spaceWidth:getStringWidth$1("",Ct)||0}},[Mt,Ct]),Nt=Ft.wordsWithWidth,Ot=Ft.spaceWidth,Bt=reactExports.useMemo(function(){return Pt?[]:dt||at?Nt.reduce(function(rn,Gt){var nn=Gt.word,cn=Gt.wordWidth,an=rn[rn.length-1];if(an&&(dt==null||at||(an.width||0)+cn+Ot<dt))an.words.push(nn),an.width=an.width||0,an.width+=cn+Ot;else{var mn={words:[nn],width:cn};rn.push(mn)}return rn},[]):[{words:Mt==null?[]:Mt.toString().split(/(?:(?!\u00A0+)\s+)/)}]},[Pt,dt,at,Mt,Nt,Ot]),Xt=reactExports.useMemo(function(){var rn=Pt?"":reduceCSSCalc$1(rt==="start"?"calc("+bt+")":rt==="middle"?"calc("+(Bt.length-1)/2+" * -"+vt+" + ("+bt+" / 2))":"calc("+(Bt.length-1)+" * -"+vt+")");return rn},[Pt,rt,bt,Bt.length,vt]),Zt=reactExports.useMemo(function(){var rn=[];if(Pt)return"";if(isNumber$1(Rt)&&isNumber$1(wt)&&isNumber$1(dt)&&at&&Bt.length>0){var Gt=Bt[0].width||1,nn=at==="shrink-only"?Math.min(dt/Gt,1):dt/Gt,cn=nn,an=Rt-nn*Rt,mn=wt-cn*wt;rn.push("matrix("+nn+", 0, 0, "+cn+", "+an+", "+mn+")")}return lt&&rn.push("rotate("+lt+", "+Rt+", "+wt+")"),rn.length>0?rn.join(" "):""},[Pt,Rt,wt,dt,at,Bt,lt]);return{wordsByLines:Bt,startDy:Xt,transform:Zt}}var _excluded$7=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$a.apply(this,arguments)}function _objectWithoutPropertiesLoose$7(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}var SVG_STYLE={overflow:"visible"};function Text(nt){var tt=nt.dx,rt=tt===void 0?0:tt,st=nt.dy,at=st===void 0?0:st,lt=nt.textAnchor,dt=lt===void 0?"start":lt,yt=nt.innerRef,vt=nt.innerTextRef;nt.verticalAnchor,nt.angle;var _t=nt.lineHeight,bt=_t===void 0?"1em":_t;nt.scaleToFit,nt.capHeight,nt.width;var Mt=_objectWithoutPropertiesLoose$7(nt,_excluded$7),Ct=Mt.x,Tt=Ct===void 0?0:Ct,$t=Mt.fontSize,Rt=useText(nt),Et=Rt.wordsByLines,wt=Rt.startDy,Pt=Rt.transform;return ReactExports.createElement("svg",{ref:yt,x:rt,y:at,fontSize:$t,style:SVG_STYLE},Et.length>0?ReactExports.createElement("text",_extends$a({ref:vt,transform:Pt},Mt,{textAnchor:dt}),Et.map(function(Ft,Nt){return ReactExports.createElement("tspan",{key:Nt,x:Tt,dy:Nt===0?wt:bt},Ft.words.join(" "))})):null)}var Orientation={top:"top",left:"left",right:"right",bottom:"bottom"};function getLabelTransform(nt){var tt=nt.labelOffset,rt=nt.labelProps,st=nt.orientation,at=nt.range,lt=nt.tickLabelFontSize,dt=nt.tickLength,yt=st===Orientation.left||st===Orientation.top?-1:1,vt,_t,bt;if(st===Orientation.top||st===Orientation.bottom){var Mt=st===Orientation.bottom&&typeof rt.fontSize=="number"?rt.fontSize:0;vt=(Number(at[0])+Number(at[at.length-1]))/2,_t=yt*(dt+tt+lt+Mt)}else vt=yt*((Number(at[0])+Number(at[at.length-1]))/2),_t=-(dt+tt),bt="rotate("+yt*90+")";return{x:vt,y:_t,transform:bt}}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$9.apply(this,arguments)}function Ticks(nt){var tt=nt.hideTicks,rt=nt.horizontal,st=nt.orientation,at=nt.tickClassName,lt=nt.tickComponent,dt=nt.tickLabelProps,yt=nt.tickStroke,vt=yt===void 0?"#222":yt,_t=nt.tickTransform,bt=nt.ticks,Mt=nt.strokeWidth,Ct=nt.tickLineProps;return bt.map(function(Tt){var $t,Rt=Tt.value,Et=Tt.index,wt=Tt.from,Pt=Tt.to,Ft=Tt.formattedValue,Nt=($t=dt[Et])!=null?$t:{},Ot=Math.max(10,typeof Nt.fontSize=="number"&&Nt.fontSize||0),Bt=Pt.y+(rt&&st!==Orientation.top?Ot:0);return ReactExports.createElement(Group,{key:"visx-tick-"+Rt+"-"+Et,className:cx("visx-axis-tick",at),transform:_t},!tt&&ReactExports.createElement(Line$1,_extends$9({from:wt,to:Pt,stroke:vt,strokeWidth:Mt,strokeLinecap:"square"},Ct)),lt?lt(_extends$9({},Nt,{x:Pt.x,y:Bt,formattedValue:Ft})):ReactExports.createElement(Text,_extends$9({x:Pt.x,y:Bt},Nt),Ft))})}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$8.apply(this,arguments)}var defaultTextProps={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function AxisRenderer(nt){var tt=nt.axisFromPoint,rt=nt.axisLineClassName,st=nt.axisToPoint,at=nt.hideAxisLine,lt=nt.hideTicks,dt=nt.horizontal,yt=nt.label,vt=yt===void 0?"":yt,_t=nt.labelClassName,bt=nt.labelOffset,Mt=bt===void 0?14:bt,Ct=nt.labelProps,Tt=nt.orientation,$t=Tt===void 0?Orientation.bottom:Tt,Rt=nt.scale,Et=nt.stroke,wt=Et===void 0?"#222":Et,Pt=nt.strokeDasharray,Ft=nt.strokeWidth,Nt=Ft===void 0?1:Ft,Ot=nt.tickClassName,Bt=nt.tickComponent,Xt=nt.tickLineProps,Zt=nt.tickLabelProps,rn=nt.tickLength,Gt=rn===void 0?8:rn,nn=nt.tickStroke,cn=nn===void 0?"#222":nn,an=nt.tickTransform,mn=nt.ticks,En=nt.ticksComponent,Cn=En===void 0?Ticks:En,Mn=_extends$8({},defaultTextProps,Ct),un=_extends$8({},defaultTextProps,typeof Zt=="object"?Zt:null),Tn=mn.map(function(dn){var Un=dn.value,qn=dn.index;return typeof Zt=="function"?Zt(Un,qn,mn):un}),Pn=Math.max.apply(Math,[10].concat(Tn.map(function(dn){return typeof dn.fontSize=="number"?dn.fontSize:0})));return ReactExports.createElement(ReactExports.Fragment,null,Cn({hideTicks:lt,horizontal:dt,orientation:$t,scale:Rt,tickClassName:Ot,tickComponent:Bt,tickLabelProps:Tn,tickStroke:cn,tickTransform:an,ticks:mn,strokeWidth:Nt,tickLineProps:Xt}),!at&&ReactExports.createElement(Line$1,{className:cx("visx-axis-line",rt),from:tt,to:st,stroke:wt,strokeWidth:Nt,strokeDasharray:Pt}),vt&&ReactExports.createElement(Text,_extends$8({className:cx("visx-axis-label",_t)},getLabelTransform({labelOffset:Mt,labelProps:Mn,orientation:$t,range:Rt.range(),tickLabelFontSize:Pn,tickLength:Gt}),Mn),vt))}function getTickPosition(nt,tt){tt===void 0&&(tt="center");var rt=nt;if(tt!=="start"&&"bandwidth"in rt){var st=rt.bandwidth();return tt==="center"&&(st/=2),rt.round()&&(st=Math.round(st)),function(at){var lt=rt(at);return typeof lt=="number"?lt+st:lt}}return nt}function getTickFormatter(nt){var tt=nt;return"tickFormat"in tt?tt.tickFormat():toString$1}var Point=function(){function nt(rt){var st=rt.x,at=st===void 0?0:st,lt=rt.y,dt=lt===void 0?0:lt;this.x=0,this.y=0,this.x=at,this.y=dt}var tt=nt.prototype;return tt.value=function(){return{x:this.x,y:this.y}},tt.toArray=function(){return[this.x,this.y]},nt}();function createPoint(nt,tt){var rt=nt.x,st=nt.y;return new Point(tt?{x:rt,y:st}:{x:st,y:rt})}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$7.apply(this,arguments)}var defaultAxisRangePadding=0;function getAxisRangePaddingConfig(nt){return nt===void 0&&(nt=defaultAxisRangePadding),typeof nt=="number"?{start:nt,end:nt}:_extends$7({start:defaultAxisRangePadding,end:defaultAxisRangePadding},nt)}var _excluded$6=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$6.apply(this,arguments)}function _objectWithoutPropertiesLoose$6(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function Axis(nt){var tt=nt.children,rt=tt===void 0?AxisRenderer:tt,st=nt.axisClassName,at=nt.hideAxisLine,lt=at===void 0?!1:at,dt=nt.hideTicks,yt=dt===void 0?!1:dt,vt=nt.hideZero,_t=vt===void 0?!1:vt,bt=nt.innerRef,Mt=nt.left,Ct=Mt===void 0?0:Mt,Tt=nt.numTicks,$t=Tt===void 0?10:Tt,Rt=nt.orientation,Et=Rt===void 0?Orientation.bottom:Rt,wt=nt.rangePadding,Pt=wt===void 0?0:wt,Ft=nt.scale,Nt=nt.tickFormat,Ot=nt.tickLength,Bt=Ot===void 0?8:Ot,Xt=nt.tickValues,Zt=nt.top,rn=Zt===void 0?0:Zt,Gt=_objectWithoutPropertiesLoose$6(nt,_excluded$6),nn=Nt??getTickFormatter(Ft),cn=Et===Orientation.left,an=Et===Orientation.top,mn=an||Et===Orientation.bottom,En=getTickPosition(Ft),Cn=cn||an?-1:1,Mn=Ft.range(),un=getAxisRangePaddingConfig(Pt),Tn=createPoint({x:Number(Mn[0])+.5-un.start,y:0},mn),Pn=createPoint({x:Number(Mn[Mn.length-1])+.5+un.end,y:0},mn),dn=(Xt??getTicks(Ft,$t)).filter(function(qn){return!_t||qn!==0&&qn!=="0"}).map(function(qn,In){return{value:qn,index:In}}),Un=dn.map(function(qn){var In=qn.value,Wn=qn.index,ar=coerceNumber(En(In));return{value:In,index:Wn,from:createPoint({x:ar,y:0},mn),to:createPoint({x:ar,y:Bt*Cn},mn),formattedValue:nn(In,Wn,dn)}});return ReactExports.createElement(Group,{className:cx("visx-axis",st),innerRef:bt,top:rn,left:Ct},rt(_extends$6({},Gt,{axisFromPoint:Tn,axisToPoint:Pn,hideAxisLine:lt,hideTicks:yt,hideZero:_t,horizontal:mn,numTicks:$t,orientation:Et,rangePadding:Pt,scale:Ft,tickFormat:nn,tickLength:Bt,tickPosition:En,tickSign:Cn,ticks:Un})))}var _excluded$5=["axisClassName","labelOffset","tickLength","tickLabelProps"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$5.apply(this,arguments)}function _objectWithoutPropertiesLoose$5(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}var leftTickLabelProps={dx:"-0.25em",dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"end"};function AxisLeft(nt){var tt=nt.axisClassName,rt=nt.labelOffset,st=rt===void 0?36:rt,at=nt.tickLength,lt=at===void 0?8:at,dt=nt.tickLabelProps,yt=_objectWithoutPropertiesLoose$5(nt,_excluded$5),vt=typeof dt=="function"?dt:_extends$5({},leftTickLabelProps,dt);return ReactExports.createElement(Axis,_extends$5({axisClassName:cx("visx-axis-left",tt),labelOffset:st,orientation:Orientation.left,tickLabelProps:vt,tickLength:lt},yt))}var _excluded$4=["axisClassName","labelOffset","tickLength","tickLabelProps"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$4.apply(this,arguments)}function _objectWithoutPropertiesLoose$4(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}var bottomTickLabelProps={dy:"0.25em",fill:"#222",fontFamily:"Arial",fontSize:10,textAnchor:"middle"};function AxisBottom(nt){var tt=nt.axisClassName,rt=nt.labelOffset,st=rt===void 0?8:rt,at=nt.tickLength,lt=at===void 0?8:at,dt=nt.tickLabelProps,yt=_objectWithoutPropertiesLoose$4(nt,_excluded$4),vt=typeof dt=="function"?dt:_extends$4({},bottomTickLabelProps,dt);return ReactExports.createElement(Axis,_extends$4({axisClassName:cx("visx-axis-bottom",tt),labelOffset:st,orientation:Orientation.bottom,tickLabelProps:vt,tickLength:lt},yt))}var _default=Line,_react=_interopRequireDefault(reactExports),_classnames=_interopRequireDefault(classnamesExports),_excluded$3=["from","to","fill","className","innerRef"];function _interopRequireDefault(nt){return nt&&nt.__esModule?nt:{default:nt}}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$3.apply(this,arguments)}function _objectWithoutPropertiesLoose$3(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function Line(nt){var tt=nt.from,rt=tt===void 0?{x:0,y:0}:tt,st=nt.to,at=st===void 0?{x:1,y:1}:st,lt=nt.fill,dt=lt===void 0?"transparent":lt,yt=nt.className,vt=nt.innerRef,_t=_objectWithoutPropertiesLoose$3(nt,_excluded$3),bt=rt.x===at.x||rt.y===at.y;return _react.default.createElement("line",_extends$3({ref:vt,className:(0,_classnames.default)("visx-line",yt),x1:rt.x,y1:rt.y,x2:at.x,y2:at.y,fill:dt,shapeRendering:bt?"crispEdges":"auto"},_t))}function getScaleBandwidth(nt){return"bandwidth"in nt?nt.bandwidth():0}var _excluded$2=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$2.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function GridRows(nt){var tt=nt.top,rt=tt===void 0?0:tt,st=nt.left,at=st===void 0?0:st,lt=nt.scale,dt=nt.width,yt=nt.stroke,vt=yt===void 0?"#eaf0f6":yt,_t=nt.strokeWidth,bt=_t===void 0?1:_t,Mt=nt.strokeDasharray,Ct=nt.className,Tt=nt.children,$t=nt.numTicks,Rt=$t===void 0?10:$t,Et=nt.lineStyle,wt=nt.offset,Pt=nt.tickValues,Ft=_objectWithoutPropertiesLoose$2(nt,_excluded$2),Nt=Pt??getTicks(lt,Rt),Ot=(wt??0)+getScaleBandwidth(lt)/2,Bt=Nt.map(function(Xt,Zt){var rn,Gt=((rn=coerceNumber(lt(Xt)))!=null?rn:0)+Ot;return{index:Zt,from:new Point({x:0,y:Gt}),to:new Point({x:dt,y:Gt})}});return ReactExports.createElement(Group,{className:cx("visx-rows",Ct),top:rt,left:at},Tt?Tt({lines:Bt}):Bt.map(function(Xt){var Zt=Xt.from,rn=Xt.to,Gt=Xt.index;return ReactExports.createElement(_default,_extends$2({key:"row-line-"+Gt,from:Zt,to:rn,stroke:vt,strokeWidth:bt,strokeDasharray:Mt,style:Et},Ft))}))}GridRows.propTypes={tickValues:_pt.array,width:_pt.number.isRequired};var _excluded$1=["top","left","scale","height","stroke","strokeWidth","strokeDasharray","className","numTicks","lineStyle","offset","tickValues","children"];function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(nt,tt){if(nt==null)return{};var rt={},st=Object.keys(nt),at,lt;for(lt=0;lt<st.length;lt++)at=st[lt],!(tt.indexOf(at)>=0)&&(rt[at]=nt[at]);return rt}function GridColumns(nt){var tt=nt.top,rt=tt===void 0?0:tt,st=nt.left,at=st===void 0?0:st,lt=nt.scale,dt=nt.height,yt=nt.stroke,vt=yt===void 0?"#eaf0f6":yt,_t=nt.strokeWidth,bt=_t===void 0?1:_t,Mt=nt.strokeDasharray,Ct=nt.className,Tt=nt.numTicks,$t=Tt===void 0?10:Tt,Rt=nt.lineStyle,Et=nt.offset,wt=nt.tickValues,Pt=nt.children,Ft=_objectWithoutPropertiesLoose$1(nt,_excluded$1),Nt=wt??getTicks(lt,$t),Ot=(Et??0)+getScaleBandwidth(lt)/2,Bt=Nt.map(function(Xt,Zt){var rn,Gt=((rn=coerceNumber(lt(Xt)))!=null?rn:0)+Ot;return{index:Zt,from:new Point({x:Gt,y:0}),to:new Point({x:Gt,y:dt})}});return ReactExports.createElement(Group,{className:cx("visx-columns",Ct),top:rt,left:at},Pt?Pt({lines:Bt}):Bt.map(function(Xt){var Zt=Xt.from,rn=Xt.to,Gt=Xt.index;return ReactExports.createElement(_default,_extends$1({key:"column-line-"+Gt,from:Zt,to:rn,stroke:vt,strokeWidth:bt,strokeDasharray:Mt,style:Rt},Ft))}))}GridColumns.propTypes={tickValues:_pt.array,height:_pt.number.isRequired};function colors(nt){for(var tt=nt.length/6|0,rt=new Array(tt),st=0;st<tt;)rt[st]="#"+nt.slice(st*6,++st*6);return rt}const ramp$1=nt=>rgbBasis(nt[nt.length-1]);var scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors);const ua=ramp$1(scheme$q);var scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors);const ma=ramp$1(scheme$p);var scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors);const pa=ramp$1(scheme$o);var scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors);const fa=ramp$1(scheme$n);var scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors);const ha=ramp$1(scheme$m);var scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors);const ga=ramp$1(scheme$l);var scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors);const ba=ramp$1(scheme$k);var scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors);const va=ramp$1(scheme$j);var scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors);const ya=ramp$1(scheme$i);var scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors);const Kr=ramp$1(scheme$h);var scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors);const Jr=ramp$1(scheme$g);var scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors);const Qr=ramp$1(scheme$f);var scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors);const ta=ramp$1(scheme$e);var scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors);const ea=ramp$1(scheme$d);var scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors);const na=ramp$1(scheme$c);var scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors);const oa=ramp$1(scheme$b);var scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors);const ra=ramp$1(scheme$a);var scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors);const aa=ramp$1(scheme$9);var scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors);const sa=ramp$1(scheme$8);var scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors);const ia=ramp$1(scheme$7);var scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors);const ca=ramp$1(scheme$6);var scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors);const xa=ramp$1(scheme$5);var scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors);const _a=ramp$1(scheme$4);var scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors);const wa=ramp$1(scheme$3);var scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors);const Ca=ramp$1(scheme$2);var scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);const Ma=ramp$1(scheme$1);var scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors);const Sa=ramp$1(scheme);function Xr(nt){return nt=Math.max(0,Math.min(1,nt)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-nt*(35.34-nt*(2381.73-nt*(6402.7-nt*(7024.72-nt*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+nt*(170.73+nt*(52.82-nt*(131.46-nt*(176.58-nt*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+nt*(442.36-nt*(2482.43-nt*(6167.24-nt*(6614.94-nt*2475.67)))))))+")"}const qr=cubehelixLong(cubehelix$1(300,.5,0),cubehelix$1(-240,.5,1));var warm=cubehelixLong(cubehelix$1(-100,.75,.35),cubehelix$1(80,1.5,.8)),cool=cubehelixLong(cubehelix$1(260,.75,.35),cubehelix$1(80,1.5,.8)),c$1=cubehelix$1();function la(nt){(nt<0||nt>1)&&(nt-=Math.floor(nt));var tt=Math.abs(nt-.5);return c$1.h=360*nt-100,c$1.s=1.5-1.5*tt,c$1.l=.8-.9*tt,c$1+""}var c=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function da(nt){var tt;return nt=(.5-nt)*Math.PI,c.r=255*(tt=Math.sin(nt))*tt,c.g=255*(tt=Math.sin(nt+pi_1_3))*tt,c.b=255*(tt=Math.sin(nt+pi_2_3))*tt,c+""}function zr(nt){return nt=Math.max(0,Math.min(1,nt)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+nt*(1172.33-nt*(10793.56-nt*(33300.12-nt*(38394.49-nt*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+nt*(557.33+nt*(1225.33-nt*(3574.96-nt*(1073.77+nt*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+nt*(3211.1-nt*(15327.97-nt*(27814-nt*(22569.18-nt*6838.66)))))))+")"}function ramp(nt){var tt=nt.length;return function(rt){return nt[Math.max(0,Math.min(tt-1,Math.floor(rt*tt)))]}}const Zr=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=ReactExports.createContext&&ReactExports.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(nt,tt){if(nt==null)return{};var rt=_objectWithoutPropertiesLoose(nt,tt),st,at;if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(nt);for(at=0;at<lt.length;at++)st=lt[at],!(tt.indexOf(st)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,st)&&(rt[st]=nt[st])}return rt}function _objectWithoutPropertiesLoose(nt,tt){if(nt==null)return{};var rt={};for(var st in nt)if(Object.prototype.hasOwnProperty.call(nt,st)){if(tt.indexOf(st)>=0)continue;rt[st]=nt[st]}return rt}function _extends(){return _extends=Object.assign?Object.assign.bind():function(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt];for(var st in rt)Object.prototype.hasOwnProperty.call(rt,st)&&(nt[st]=rt[st])}return nt},_extends.apply(this,arguments)}function ownKeys(nt,tt){var rt=Object.keys(nt);if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(nt);tt&&(st=st.filter(function(at){return Object.getOwnPropertyDescriptor(nt,at).enumerable})),rt.push.apply(rt,st)}return rt}function _objectSpread(nt){for(var tt=1;tt<arguments.length;tt++){var rt=arguments[tt]!=null?arguments[tt]:{};tt%2?ownKeys(Object(rt),!0).forEach(function(st){_defineProperty(nt,st,rt[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(rt)):ownKeys(Object(rt)).forEach(function(st){Object.defineProperty(nt,st,Object.getOwnPropertyDescriptor(rt,st))})}return nt}function _defineProperty(nt,tt,rt){return tt=_toPropertyKey(tt),tt in nt?Object.defineProperty(nt,tt,{value:rt,enumerable:!0,configurable:!0,writable:!0}):nt[tt]=rt,nt}function _toPropertyKey(nt){var tt=_toPrimitive(nt,"string");return typeof tt=="symbol"?tt:tt+""}function _toPrimitive(nt,tt){if(typeof nt!="object"||!nt)return nt;var rt=nt[Symbol.toPrimitive];if(rt!==void 0){var st=rt.call(nt,tt||"default");if(typeof st!="object")return st;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tt==="string"?String:Number)(nt)}function Tree2Element(nt){return nt&&nt.map((tt,rt)=>ReactExports.createElement(tt.tag,_objectSpread({key:rt},tt.attr),Tree2Element(tt.child)))}function GenIcon(nt){return tt=>ReactExports.createElement(IconBase,_extends({attr:_objectSpread({},nt.attr)},tt),Tree2Element(nt.child))}function IconBase(nt){var tt=rt=>{var{attr:st,size:at,title:lt}=nt,dt=_objectWithoutProperties(nt,_excluded),yt=at||rt.size||"1em",vt;return rt.className&&(vt=rt.className),nt.className&&(vt=(vt?vt+" ":"")+nt.className),ReactExports.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},rt.attr,st,dt,{className:vt,style:_objectSpread(_objectSpread({color:nt.color||rt.color},rt.style),nt.style),height:yt,width:yt,xmlns:"http://www.w3.org/2000/svg"}),lt&&ReactExports.createElement("title",null,lt),nt.children)};return IconContext!==void 0?ReactExports.createElement(IconContext.Consumer,null,rt=>tt(rt)):tt(DefaultContext)}function FiAlertCircle(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(nt)}function FiCheck(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(nt)}function FiCornerDownRight(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 10 20 15 15 20"},child:[]},{tag:"path",attr:{d:"M4 4v7a4 4 0 0 0 4 4h12"},child:[]}]})(nt)}function FiSlash(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"19.07",y2:"19.07"},child:[]}]})(nt)}function MdSwapVert(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3 5 6.99h3V14h2V6.99h3L9 3z"},child:[]}]})(nt)}function MdFilterList(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"},child:[]}]})(nt)}function MdSort(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"},child:[]}]})(nt)}function MdFlare(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 11H1v2h6v-2zm2.17-3.24L7.05 5.64 5.64 7.05l2.12 2.12 1.41-1.41zM13 1h-2v6h2V1zm5.36 6.05-1.41-1.41-2.12 2.12 1.41 1.41 2.12-2.12zM17 11v2h6v-2h-6zm-5-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm2.83 7.24 2.12 2.12 1.41-1.41-2.12-2.12-1.41 1.41zm-9.19.71 1.41 1.41 2.12-2.12-1.41-1.41-2.12 2.12zM11 23h2v-6h-2v6z"},child:[]}]})(nt)}function MdArrowDropDown(nt){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(nt)}var MapShim=function(){if(typeof Map<"u")return Map;function nt(tt,rt){var st=-1;return tt.some(function(at,lt){return at[0]===rt?(st=lt,!0):!1}),st}return function(){function tt(){this.__entries__=[]}return Object.defineProperty(tt.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),tt.prototype.get=function(rt){var st=nt(this.__entries__,rt),at=this.__entries__[st];return at&&at[1]},tt.prototype.set=function(rt,st){var at=nt(this.__entries__,rt);~at?this.__entries__[at][1]=st:this.__entries__.push([rt,st])},tt.prototype.delete=function(rt){var st=this.__entries__,at=nt(st,rt);~at&&st.splice(at,1)},tt.prototype.has=function(rt){return!!~nt(this.__entries__,rt)},tt.prototype.clear=function(){this.__entries__.splice(0)},tt.prototype.forEach=function(rt,st){st===void 0&&(st=null);for(var at=0,lt=this.__entries__;at<lt.length;at++){var dt=lt[at];rt.call(st,dt[1],dt[0])}},tt}()}(),isBrowser=typeof window<"u"&&typeof document<"u"&&window.document===document,global$1=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),requestAnimationFrame$1=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(global$1):function(nt){return setTimeout(function(){return nt(Date.now())},1e3/60)}}(),trailingTimeout=2;function throttle$1(nt,tt){var rt=!1,st=!1,at=0;function lt(){rt&&(rt=!1,nt()),st&&yt()}function dt(){requestAnimationFrame$1(lt)}function yt(){var vt=Date.now();if(rt){if(vt-at<trailingTimeout)return;st=!0}else rt=!0,st=!1,setTimeout(dt,tt);at=vt}return yt}var REFRESH_DELAY=20,transitionKeys=["top","right","bottom","left","width","height","size","weight"],mutationObserverSupported=typeof MutationObserver<"u",ResizeObserverController=function(){function nt(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle$1(this.refresh.bind(this),REFRESH_DELAY)}return nt.prototype.addObserver=function(tt){~this.observers_.indexOf(tt)||this.observers_.push(tt),this.connected_||this.connect_()},nt.prototype.removeObserver=function(tt){var rt=this.observers_,st=rt.indexOf(tt);~st&&rt.splice(st,1),!rt.length&&this.connected_&&this.disconnect_()},nt.prototype.refresh=function(){var tt=this.updateObservers_();tt&&this.refresh()},nt.prototype.updateObservers_=function(){var tt=this.observers_.filter(function(rt){return rt.gatherActive(),rt.hasActive()});return tt.forEach(function(rt){return rt.broadcastActive()}),tt.length>0},nt.prototype.connect_=function(){!isBrowser||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mutationObserverSupported?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},nt.prototype.disconnect_=function(){!isBrowser||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},nt.prototype.onTransitionEnd_=function(tt){var rt=tt.propertyName,st=rt===void 0?"":rt,at=transitionKeys.some(function(lt){return!!~st.indexOf(lt)});at&&this.refresh()},nt.getInstance=function(){return this.instance_||(this.instance_=new nt),this.instance_},nt.instance_=null,nt}(),defineConfigurable=function(nt,tt){for(var rt=0,st=Object.keys(tt);rt<st.length;rt++){var at=st[rt];Object.defineProperty(nt,at,{value:tt[at],enumerable:!1,writable:!1,configurable:!0})}return nt},getWindowOf$1=function(nt){var tt=nt&&nt.ownerDocument&&nt.ownerDocument.defaultView;return tt||global$1},emptyRect=createRectInit(0,0,0,0);function toFloat(nt){return parseFloat(nt)||0}function getBordersSize(nt){for(var tt=[],rt=1;rt<arguments.length;rt++)tt[rt-1]=arguments[rt];return tt.reduce(function(st,at){var lt=nt["border-"+at+"-width"];return st+toFloat(lt)},0)}function getPaddings(nt){for(var tt=["top","right","bottom","left"],rt={},st=0,at=tt;st<at.length;st++){var lt=at[st],dt=nt["padding-"+lt];rt[lt]=toFloat(dt)}return rt}function getSVGContentRect(nt){var tt=nt.getBBox();return createRectInit(0,0,tt.width,tt.height)}function getHTMLElementContentRect(nt){var tt=nt.clientWidth,rt=nt.clientHeight;if(!tt&&!rt)return emptyRect;var st=getWindowOf$1(nt).getComputedStyle(nt),at=getPaddings(st),lt=at.left+at.right,dt=at.top+at.bottom,yt=toFloat(st.width),vt=toFloat(st.height);if(st.boxSizing==="border-box"&&(Math.round(yt+lt)!==tt&&(yt-=getBordersSize(st,"left","right")+lt),Math.round(vt+dt)!==rt&&(vt-=getBordersSize(st,"top","bottom")+dt)),!isDocumentElement(nt)){var _t=Math.round(yt+lt)-tt,bt=Math.round(vt+dt)-rt;Math.abs(_t)!==1&&(yt-=_t),Math.abs(bt)!==1&&(vt-=bt)}return createRectInit(at.left,at.top,yt,vt)}var isSVGGraphicsElement=function(){return typeof SVGGraphicsElement<"u"?function(nt){return nt instanceof getWindowOf$1(nt).SVGGraphicsElement}:function(nt){return nt instanceof getWindowOf$1(nt).SVGElement&&typeof nt.getBBox=="function"}}();function isDocumentElement(nt){return nt===getWindowOf$1(nt).document.documentElement}function getContentRect$1(nt){return isBrowser?isSVGGraphicsElement(nt)?getSVGContentRect(nt):getHTMLElementContentRect(nt):emptyRect}function createReadOnlyRect(nt){var tt=nt.x,rt=nt.y,st=nt.width,at=nt.height,lt=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,dt=Object.create(lt.prototype);return defineConfigurable(dt,{x:tt,y:rt,width:st,height:at,top:rt,right:tt+st,bottom:at+rt,left:tt}),dt}function createRectInit(nt,tt,rt,st){return{x:nt,y:tt,width:rt,height:st}}var ResizeObservation=function(){function nt(tt){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=tt}return nt.prototype.isActive=function(){var tt=getContentRect$1(this.target);return this.contentRect_=tt,tt.width!==this.broadcastWidth||tt.height!==this.broadcastHeight},nt.prototype.broadcastRect=function(){var tt=this.contentRect_;return this.broadcastWidth=tt.width,this.broadcastHeight=tt.height,tt},nt}(),ResizeObserverEntry=function(){function nt(tt,rt){var st=createReadOnlyRect(rt);defineConfigurable(this,{target:tt,contentRect:st})}return nt}(),ResizeObserverSPI=function(){function nt(tt,rt,st){if(this.activeObservations_=[],this.observations_=new MapShim,typeof tt!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=tt,this.controller_=rt,this.callbackCtx_=st}return nt.prototype.observe=function(tt){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(tt instanceof getWindowOf$1(tt).Element))throw new TypeError('parameter 1 is not of type "Element".');var rt=this.observations_;rt.has(tt)||(rt.set(tt,new ResizeObservation(tt)),this.controller_.addObserver(this),this.controller_.refresh())}},nt.prototype.unobserve=function(tt){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(tt instanceof getWindowOf$1(tt).Element))throw new TypeError('parameter 1 is not of type "Element".');var rt=this.observations_;rt.has(tt)&&(rt.delete(tt),rt.size||this.controller_.removeObserver(this))}},nt.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},nt.prototype.gatherActive=function(){var tt=this;this.clearActive(),this.observations_.forEach(function(rt){rt.isActive()&&tt.activeObservations_.push(rt)})},nt.prototype.broadcastActive=function(){if(this.hasActive()){var tt=this.callbackCtx_,rt=this.activeObservations_.map(function(st){return new ResizeObserverEntry(st.target,st.broadcastRect())});this.callback_.call(tt,rt,tt),this.clearActive()}},nt.prototype.clearActive=function(){this.activeObservations_.splice(0)},nt.prototype.hasActive=function(){return this.activeObservations_.length>0},nt}(),observers=typeof WeakMap<"u"?new WeakMap:new MapShim,ResizeObserver$1=function(){function nt(tt){if(!(this instanceof nt))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var rt=ResizeObserverController.getInstance(),st=new ResizeObserverSPI(tt,rt,this);observers.set(this,st)}return nt}();["observe","unobserve","disconnect"].forEach(function(nt){ResizeObserver$1.prototype[nt]=function(){var tt;return(tt=observers.get(this))[nt].apply(tt,arguments)}});var index=function(){return typeof global$1.ResizeObserver<"u"?global$1.ResizeObserver:ResizeObserver$1}(),types=["client","offset","scroll","bounds","margin"];function getTypes(nt){var tt=[];return types.forEach(function(rt){nt[rt]&&tt.push(rt)}),tt}function getContentRect(nt,tt){var rt={};if(tt.indexOf("client")>-1&&(rt.client={top:nt.clientTop,left:nt.clientLeft,width:nt.clientWidth,height:nt.clientHeight}),tt.indexOf("offset")>-1&&(rt.offset={top:nt.offsetTop,left:nt.offsetLeft,width:nt.offsetWidth,height:nt.offsetHeight}),tt.indexOf("scroll")>-1&&(rt.scroll={top:nt.scrollTop,left:nt.scrollLeft,width:nt.scrollWidth,height:nt.scrollHeight}),tt.indexOf("bounds")>-1){var st=nt.getBoundingClientRect();rt.bounds={top:st.top,right:st.right,bottom:st.bottom,left:st.left,width:st.width,height:st.height}}if(tt.indexOf("margin")>-1){var at=getComputedStyle(nt);rt.margin={top:at?parseInt(at.marginTop):0,right:at?parseInt(at.marginRight):0,bottom:at?parseInt(at.marginBottom):0,left:at?parseInt(at.marginLeft):0}}return rt}function getWindowOf(nt){var tt=nt&&nt.ownerDocument&&nt.ownerDocument.defaultView;return tt||window}function withContentRect(nt){return function(tt){var rt,st;return st=rt=function(at){_inheritsLoose$1(lt,at);function lt(){for(var yt,vt=arguments.length,_t=new Array(vt),bt=0;bt<vt;bt++)_t[bt]=arguments[bt];return yt=at.call.apply(at,[this].concat(_t))||this,yt.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},yt._animationFrameID=null,yt._resizeObserver=null,yt._node=null,yt._window=null,yt.measure=function(Mt){var Ct=getContentRect(yt._node,getTypes(yt.props));Mt&&(Ct.entry=Mt[0].contentRect),yt._animationFrameID=yt._window.requestAnimationFrame(function(){yt._resizeObserver!==null&&(yt.setState({contentRect:Ct}),typeof yt.props.onResize=="function"&&yt.props.onResize(Ct))})},yt._handleRef=function(Mt){yt._resizeObserver!==null&&yt._node!==null&&yt._resizeObserver.unobserve(yt._node),yt._node=Mt,yt._window=getWindowOf(yt._node);var Ct=yt.props.innerRef;Ct&&(typeof Ct=="function"?Ct(yt._node):Ct.current=yt._node),yt._resizeObserver!==null&&yt._node!==null&&yt._resizeObserver.observe(yt._node)},yt}var dt=lt.prototype;return dt.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new index(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(getContentRect(this._node,getTypes(this.props))))},dt.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},dt.render=function(){var vt=this.props;vt.innerRef,vt.onResize;var _t=_objectWithoutPropertiesLoose$f(vt,["innerRef","onResize"]);return reactExports.createElement(tt,_extends$i({},_t,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},lt}(reactExports.Component),rt.propTypes={client:_pt.bool,offset:_pt.bool,scroll:_pt.bool,bounds:_pt.bool,margin:_pt.bool,innerRef:_pt.oneOfType([_pt.object,_pt.func]),onResize:_pt.func},st}}var Measure=withContentRect()(function(nt){var tt=nt.measure,rt=nt.measureRef,st=nt.contentRect,at=nt.children;return at({measure:tt,measureRef:rt,contentRect:st})});Measure.displayName="Measure";Measure.propTypes.children=_pt.func;const createStoreImpl=nt=>{let tt;const rt=new Set,st=(bt,Mt)=>{const Ct=typeof bt=="function"?bt(tt):bt;if(!Object.is(Ct,tt)){const Tt=tt;tt=Mt??(typeof Ct!="object"||Ct===null)?Ct:Object.assign({},tt,Ct),rt.forEach($t=>$t(tt,Tt))}},at=()=>tt,vt={setState:st,getState:at,getInitialState:()=>_t,subscribe:bt=>(rt.add(bt),()=>rt.delete(bt)),destroy:()=>{rt.clear()}},_t=tt=nt(st,at,vt);return vt},createStore=nt=>createStoreImpl(nt);var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e=reactExports;function h$1(nt,tt){return nt===tt&&(nt!==0||1/nt===1/tt)||nt!==nt&&tt!==tt}var k=typeof Object.is=="function"?Object.is:h$1,l=e.useState,m=e.useEffect,n$1=e.useLayoutEffect,p$1=e.useDebugValue;function q$2(nt,tt){var rt=tt(),st=l({inst:{value:rt,getSnapshot:tt}}),at=st[0].inst,lt=st[1];return n$1(function(){at.value=rt,at.getSnapshot=tt,r$1(at)&&lt({inst:at})},[nt,rt,tt]),m(function(){return r$1(at)&&lt({inst:at}),nt(function(){r$1(at)&&lt({inst:at})})},[nt]),p$1(rt),rt}function r$1(nt){var tt=nt.getSnapshot;nt=nt.value;try{var rt=tt();return!k(nt,rt)}catch{return!0}}function t$1(nt,tt){return tt()}var u$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$1:q$2;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u$1;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=reactExports,n=shimExports;function p(nt,tt){return nt===tt&&(nt!==0||1/nt===1/tt)||nt!==nt&&tt!==tt}var q$1=typeof Object.is=="function"?Object.is:p,r=n.useSyncExternalStore,t=h.useRef,u=h.useEffect,v=h.useMemo,w=h.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(nt,tt,rt,st,at){var lt=t(null);if(lt.current===null){var dt={hasValue:!1,value:null};lt.current=dt}else dt=lt.current;lt=v(function(){function vt(Tt){if(!_t){if(_t=!0,bt=Tt,Tt=st(Tt),at!==void 0&&dt.hasValue){var $t=dt.value;if(at($t,Tt))return Mt=$t}return Mt=Tt}if($t=Mt,q$1(bt,Tt))return $t;var Rt=st(Tt);return at!==void 0&&at($t,Rt)?$t:(bt=Tt,Mt=Rt)}var _t=!1,bt,Mt,Ct=rt===void 0?null:rt;return[function(){return vt(tt())},Ct===null?void 0:function(){return vt(Ct())}]},[tt,rt,st,at]);var yt=r(nt,lt[0],lt[1]);return u(function(){dt.hasValue=!0,dt.value=yt},[yt]),w(yt),yt};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),{useDebugValue}=ReactExports,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity=nt=>nt;function useStore(nt,tt=identity,rt){const st=useSyncExternalStoreWithSelector(nt.subscribe,nt.getState,nt.getServerState||nt.getInitialState,tt,rt);return useDebugValue(st),st}const createImpl=nt=>{const tt=typeof nt=="function"?createStore(nt):nt,rt=(st,at)=>useStore(tt,st,at);return Object.assign(rt,tt),rt},create=nt=>createImpl(nt);var sr=Object.defineProperty,ir=(nt,tt,rt)=>tt in nt?sr(nt,tt,{enumerable:!0,configurable:!0,writable:!0,value:rt}):nt[tt]=rt,ct=(nt,tt,rt)=>ir(nt,typeof tt!="symbol"?tt+"":tt,rt);const Ut=reactExports.createContext({}),So=reactExports.createContext(void 0),qa="_wrapper_9665499",Ka="_grid_5146261",Ja="_innerContainer_27a3adb",Qa="_colHeaders_a985f35",ts="_rowHeaders_63b4056",es="_indexCell_080a16e",ns="_stickyGrid_33fa7fa",os="_cell_2658e21",rs="_topLeftCell_e826718 _indexCell_080a16e",ut={wrapper:qa,grid:Ka,innerContainer:Ja,colHeaders:Qa,rowHeaders:ts,indexCell:es,stickyGrid:ns,cell:os,topLeftCell:rs};function as(nt){const{rowIndex:tt,columnIndex:rt,style:st}=nt,{rowHeaderCellsWidth:at,cellSize:lt,cellFormatter:dt}=reactExports.useContext(Ut);return jsxRuntimeExports.jsx("div",{className:ut.cell,style:{...st,left:st.left+at,top:st.top+lt.height},role:"cell","aria-rowindex":tt,"aria-colindex":rt,"data-bg":(tt+rt)%2===1||void 0,children:dt(tt,rt)})}reactExports.memo(as);function Nn(nt){const{indexMin:tt,indexMax:rt,width:st,transform:at,headers:lt}=nt,{cellSize:dt}=reactExports.useContext(Ut);return range$2(tt,rt+1).map(yt=>jsxRuntimeExports.jsx("div",{className:ut.indexCell,style:{width:st||dt.width,height:dt.height,transform:at},"data-bg":yt%2===1?"":void 0,children:yt>=0&&lt?lt[yt]:yt},yt.toString()))}const Co=reactExports.forwardRef((nt,tt)=>{const{children:rt,style:st}=nt,{rowCount:at,columnCount:lt,cellSize:dt,sticky:yt,rowHeaderCellsWidth:vt,columnHeaders:_t}=reactExports.useContext(Ut),bt=reactExports.useContext(So),{overscanColumnStartIndex:Mt=0,overscanColumnStopIndex:Ct=0,overscanRowStartIndex:Tt=0,overscanRowStopIndex:$t=0}=bt||{};return jsxRuntimeExports.jsxs("div",{ref:tt,className:ut.stickyGrid,style:{...st,width:st.width+vt,height:st.height+dt.height},role:"table","aria-rowcount":at,"aria-colcount":lt,"data-sticky":yt||void 0,children:[jsxRuntimeExports.jsxs("div",{className:ut.colHeaders,children:[jsxRuntimeExports.jsx("div",{className:ut.topLeftCell,style:{width:vt,height:dt.height},"data-bg":!0,"aria-hidden":"true"}),jsxRuntimeExports.jsx(Nn,{indexMin:Mt,indexMax:Ct,transform:`translateX(${dt.width*Mt}px)`,headers:_t})]}),jsxRuntimeExports.jsxs("div",{className:ut.innerContainer,children:[jsxRuntimeExports.jsx("div",{className:ut.rowHeaders,"aria-hidden":"true",children:jsxRuntimeExports.jsx(Nn,{indexMin:Tt,indexMax:$t,transform:`translateY(${dt.height*Tt}px)`,width:vt})}),rt]})]})});Co.displayName="StickyGrid";var ht=(nt=>(nt.Bool="Boolean",nt.Integer="Integer",nt.Unsigned="Integer (unsigned)",nt.Float="Float",nt.Complex="Complex",nt.String="String",nt.Compound="Compound",nt.Array="Array",nt.VLen="Array (variable length)",nt.Enum="Enumeration",nt.Time="Time",nt.Bitfield="Bitfield",nt.Opaque="Opaque",nt.Reference="Reference",nt.Unknown="Unknown",nt))(ht||{}),T=(nt=>(nt.Linear="linear",nt.Log="log",nt.SymLog="symlog",nt.Sqrt="sqrt",nt.Gamma="gamma",nt))(T||{}),ie=(nt=>(nt.Phase="phase",nt.Amplitude="amplitude",nt.PhaseAmplitude="phase-amplitude",nt))(ie||{});T.Linear,T.Log,T.SymLog;T.Linear,T.Log,T.SymLog,T.Sqrt;const me=format(".3~e"),Ne=format(".5~e");format(".5~g");format(".3~g");ps(".12~g");const pn=3,ds=/0\.([0-9]+)$/u,us=format(`.${pn}~g`),ms=format(`.${pn}~e`);function Vt(nt){const tt=us(nt),rt=ds.exec(tt);return rt&&rt[1].length>pn?ms(nt):tt}function ps(nt,tt=!1){const rt=format(nt);return st=>{const[at,lt]=st;if(lt===0&&!tt)return`${rt(at)}`;if(at===0&&!tt)return`${rt(lt)} i`;const dt=Math.sign(lt)>=0?" + ":"  ";return`${rt(at)}${dt}${rt(Math.abs(lt))} i`}}function He(nt){return gs(nt)?nt.data:nt}function Ie(nt,tt){const{min:rt,max:st,positiveMin:at,strictPositiveMin:lt}=nt;return{min:Math.min(tt,rt),max:Math.max(tt,st),positiveMin:tt>=0?Math.min(tt,at):at,strictPositiveMin:tt>0?Math.min(tt,lt):lt}}function fn(nt,tt,rt){const st=He(nt),at=tt&&He(tt);Yt(tt,st.length,"error");const lt=st.reduce((dt,yt,vt)=>{if(!Number.isFinite(yt)||rt!=null&&rt(yt))return dt;const _t=Ie(dt,yt),bt=at==null?void 0:at[vt];return bt?Ie(Ie(_t,yt-bt),yt+bt):_t},{min:1/0,max:-1/0,positiveMin:1/0,strictPositiveMin:1/0});return Number.isFinite(lt.min)?lt:void 0}function hn(nt,tt){if(nt===void 0)return;const{min:rt,max:st,positiveMin:at,strictPositiveMin:lt}=nt;return tt===T.Log&&rt*st<=0?Number.isFinite(lt)?[lt,st]:void 0:tt===T.Sqrt&&rt*st<0?[at,st]:[rt,st]}function jt(nt){const[tt,rt]=nt.shape;return{rows:tt,cols:rt}}function Ue(nt){return Array.isArray(nt)?nt:[nt]}ht.Unsigned,ht.Integer,ht.Float,ht.String,ht.Bool,ht.Enum,ht.Complex;function Mo(nt){return nt!==void 0}function fs(nt){return nt!==null}function et(nt,tt="Expected some value"){if(!Mo(nt))throw new TypeError(tt)}function $e(nt,tt="Expected value to not be null"){if(!fs(nt))throw new TypeError(tt)}function Yt(nt,tt,rt){if(!nt)return;const{length:st}=He(nt);if(st!==tt)throw new Error(`Expected ${rt} array to have length ${tt} instead of ${st}`)}function gs(nt){return"data"in nt}const bs=new Vector3(0,0,0);class It extends Box3{get size(){const{x:tt,y:rt}=this.getSize(new Vector3);return{width:tt,height:rt}}get center(){return this.getCenter(new Vector3)}static empty(tt=bs){return new It(tt.clone(),tt.clone())}static fromPoints(...tt){return new It().setFromPoints(tt)}static fromSize({width:tt,height:rt}){return It.empty().expandBySize(tt,rt)}clampPoint(tt){return super.clampPoint(tt,new Vector3)}expandBySize(tt,rt){const{size:st}=this,at=tt<0?Math.max(tt,-st.width):tt,lt=rt<0?Math.max(rt,-st.height):rt;return this.expandByVector(new Vector3(at,lt).divideScalar(2))}expandToRatio(tt){if(tt===void 0||tt<=0)return this;const{width:rt,height:st}=this.size,at=rt/st;return tt>at?this.expandBySize(st*tt-rt,0):this.expandBySize(0,rt/tt-st)}hasMinSize(tt,rt=tt){const{width:st,height:at}=this.size;return st>=tt&&at>=rt}keepWithin(tt){const{center:rt,size:st}=this,{width:at,height:lt}=tt.size,dt=It.empty(tt.center).expandBySize(Math.max(at-st.width,0),Math.max(lt-st.height,0)).clampPoint(rt).sub(rt).setZ(0);return this.translate(dt)}toRect(){return[this.min,this.max]}}const xt=It;function $n(nt,tt){const rt=tt-nt;return st=>rt!==0?(st-nt)/rt:.5}function Po(nt){let tt=(nt==null?void 0:nt.domain)||[0,1],rt=(nt==null?void 0:nt.range)||[0,1],st=(nt==null?void 0:nt.exponent)??1,at=(nt==null?void 0:nt.clamp)||!1,lt=kn,dt;const yt=function(Xt){const Zt=typeof Xt=="number"?Xt:Xt.valueOf();return Number.isNaN(Zt)?dt:lt(...rt)($n(...tt)(vt(Zt))**st)};function vt(Xt){if(!at)return Xt;const[Zt,rn]=tt;return Math.max(Zt,Math.min(rn,Xt))}function _t(Xt){return Xt?(tt=Xt,Bt):[...tt]}function bt(Xt){return Xt?(rt=Xt,Bt):[...rt]}function Mt(Xt){return Xt?(rt=Xt,lt=Dr,Bt):[...rt]}function Ct(Xt){return Xt?(at=Xt,Bt):at}function Tt(){return dt}function $t(Xt){return Xt?(lt=Xt,Bt):lt}function Rt(Xt){return Xt?(st=Xt,Bt):st}function Et(Xt){return vt(kn(...tt)($n(...rt)(Xt)**(1/st)))}function wt(){return createPowScale({domain:tt,range:rt,exponent:st,clamp:at})}function Pt(Xt){return tt=wt().nice(Xt).domain(),Bt}function Ft(Xt){return wt().ticks(Xt)}function Nt(Xt,Zt){return wt().tickFormat(Xt,Zt)}function Ot(){return Po().domain(tt).range(rt).exponent(st).clamp(at).interpolate(lt)}const Bt=Object.assign(yt,{domain:_t,range:bt,rangeRound:Mt,clamp:Ct,interpolate:$t,invert:Et,unknown:Tt,exponent:Rt,nice:Pt,ticks:Ft,tickFormat:Nt,copy:Ot});return Bt}const To=0,gn=1e3,bn=gn,vs=bn-gn,q=vs-1,Wt=[.1,1],ys={left:80,right:24,top:16,bottom:34},xs=28,Rn=24;T.Linear+"",T.Log+"",Number.MIN_VALUE,T.SymLog+"",T.Sqrt+"",T.Gamma+"";const St=createLinearScale({domain:[300,900],range:[3,10],clamp:!0,round:!0}),_s=createLinearScale({domain:[300,500],range:[.8,1.4]});function pt(nt,tt){if(Array.isArray(nt)){const[,rt]=nt;return Po({...tt,exponent:rt})}switch(nt){case T.Linear:return createLinearScale(tt);case T.Log:return createLogScale(tt);case T.SymLog:return createSymlogScale(tt);case T.Sqrt:return createSqrtScale(tt)}throw new Error("Unknown scale type")}function ws(nt,tt){const{width:rt,height:st}=nt;return tt?rt/st>tt?{width:st*tt,height:st}:{width:rt,height:rt/tt}:{width:rt,height:st}}function Ao(nt,tt=T.Linear,rt,st){const at=fn(nt,rt,st);return hn(at,tt)}function Eo(nt,tt=[-Number.MAX_VALUE/2,Number.MAX_VALUE/2]){const[rt,st]=tt;return MathUtils.clamp(nt,rt,st)}function Dn(nt,tt){const{scaleType:rt,visDomain:st,flip:at,nice:lt=!1}=nt;return pt(rt??T.Linear,{domain:st,range:[-tt/2,tt/2],reverse:at,nice:lt})}function Ps(nt,tt){const rt=Math.min(...nt),st=Math.max(...nt),at=Math.ceil(rt),lt=Math.floor(st),dt=lt-at+1,yt=Math.min(dt,tt);if(yt===0)return[];const vt=Math.max(tickStep(at,lt,yt),1),_t=Math.ceil(rt/vt),bt=Math.floor(st/vt)-_t+1;return Array.from({length:bt},(Mt,Ct)=>(_t+Ct)*vt)}function Ts(nt,tt,rt){if(rt!==T.Log)return Vt;const[st,at]=nt[0]>0?nt:[-nt[1],-[nt[0]]],lt=_s(tt);return at/st<10**lt?Vt:dt=>{const yt=Math.log10(Math.abs(dt.valueOf()));return yt===Math.floor(yt)?Vt(dt):""}}function ks(nt){const tt=nt.filter(Mo);if(tt.length!==0)return tt.reduce((rt,st)=>[Math.min(rt[0],st[0]),Math.max(rt[1],st[1])])}function No(nt,tt,rt){if(nt==="auto")return;if(nt==="equal")return No(1,tt,rt);const[st,at]=tt,[lt,dt]=rt;return Math.abs(at-st)/Math.abs(dt-lt)/nt}function As(nt={}){const{left:tt,right:rt,top:st,bottom:at}=ys;return{left:tt+(nt.left?Rn:0),right:rt,top:st+(nt.top?xs:0),bottom:at+(nt.bottom?Rn:0)}}const $o=`
  varying vec2 coords;

  void main() {
    coords = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
`;function vn(nt){return Object.fromEntries(Object.entries(nt).map(([tt,rt])=>[tt,{value:rt}]))}function ft(nt,tt=3,rt=Float32Array){return new BufferAttribute(new rt(nt*tt),tt)}function Ro(nt){return Object.keys(nt).some(tt=>/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/u.test(tt))}const Do=reactExports.createContext({});function $(){return reactExports.useContext(Do)}function $s(nt){const{visRatio:tt,abscissaConfig:rt,ordinateConfig:st,svgOverlay:at,floatingToolbar:lt,children:dt}=nt,{width:yt,height:vt}=useThree(cn=>cn.size),_t={width:yt,height:vt},bt=yt/vt,Mt=ws(_t,tt),Ct=reactExports.useMemo(()=>xt.empty().expandByPoint(new Vector3(yt,vt)),[yt,vt]),Tt=Dn(rt,Mt.width),$t=Dn(st,Mt.height),Rt=reactExports.useCallback(cn=>new Vector3(Tt(cn.x),$t(cn.y)),[Tt,$t]),Et=reactExports.useCallback(cn=>new Vector3(Tt.invert(cn.x),$t.invert(cn.y)),[Tt,$t]),wt=reactExports.useMemo(()=>new Matrix4().makeScale(yt/2,-vt/2,1).setPosition(yt/2,vt/2,0),[yt,vt]),Pt=reactExports.useMemo(()=>wt.clone().invert(),[wt]),Ft=reactExports.useCallback((cn,an)=>an.clone().project(cn).applyMatrix4(wt),[wt]),Nt=reactExports.useCallback((cn,an)=>an.clone().applyMatrix4(Pt).unproject(cn),[Pt]),Ot=reactExports.useCallback((cn,an)=>Ft(cn,Rt(an)),[Rt,Ft]),Bt=reactExports.useCallback((cn,an)=>Et(Nt(cn,an)),[Nt,Et]),Xt=reactExports.useCallback((cn,an=cn.position)=>{const{scale:mn}=cn;return xt.empty(an).expandBySize(yt*mn.x,vt*mn.y)},[yt,vt]),Zt=reactExports.useCallback(cn=>{const[an,mn]=Xt(cn).toRect().map(Et);return{xVisibleDomain:[an.x,mn.x],yVisibleDomain:[an.y,mn.y]}},[Xt,Et]),rn=useThree(cn=>{var an;return(an=cn.gl.domElement.parentElement)==null?void 0:an.parentElement});et(rn),$e(rn);const Gt=rn.parentElement;$e(Gt);const nn=Gt.parentElement;return $e(nn),jsxRuntimeExports.jsx(Do.Provider,{value:{canvasSize:_t,canvasRatio:bt,canvasBox:Ct,visRatio:tt,visSize:Mt,abscissaConfig:rt,ordinateConfig:st,abscissaScale:Tt,ordinateScale:$t,dataToWorld:Rt,dataToHtml:Ot,worldToHtml:Ft,worldToData:Et,htmlToWorld:Nt,htmlToData:Bt,getFovBox:Xt,getVisibleDomains:Zt,visCanvas:nn,canvasArea:Gt,r3fRoot:rn,svgOverlay:at,floatingToolbar:lt},children:dt})}var Ce=(nt=>(nt[nt.Left=0]="Left",nt[nt.Middle=1]="Middle",nt))(Ce||{});class Rs{constructor(tt,rt){ct(this,"buttons"),ct(this,"modifierKeys"),ct(this,"isWheel"),ct(this,"isEnabled"),this.id=tt;const{button:st=Ce.Left,modifierKey:at=[],disabled:lt=!1}=rt;st==="Wheel"?(this.buttons=[],this.isWheel=!0):(this.buttons=Ue(st),this.isWheel=!1),this.modifierKeys=Ue(at),this.isEnabled=!lt}matches(tt){return this.isEnabled&&(tt instanceof WheelEvent?this.isWheel:this.buttons.includes(tt.button))&&this.modifierKeys.every(rt=>tt.getModifierState(rt))}}const Lo=reactExports.createContext({});function Ds(){return reactExports.useContext(Lo)}function Ls(nt){const{children:tt}=nt,[rt]=reactExports.useState(new Map),st=reactExports.useCallback((dt,yt)=>{rt.has(dt)?console.warn(`An interaction with ID "${dt}" is already registered.`):rt.set(dt,new Rs(dt,yt))},[rt]),at=reactExports.useCallback(dt=>{rt.delete(dt)},[rt]),lt=reactExports.useCallback((dt,yt)=>{const vt=[...rt.values()];if(!rt.has(dt))throw new Error(`Interaction ${dt} is not registered`);const _t=vt.filter(bt=>bt.matches(yt));return _t.length===0?!1:_t.length===1?_t[0].id===dt:_t.reduce((bt,Mt)=>Mt.modifierKeys.length>bt.modifierKeys.length?Mt:bt).id===dt},[rt]);return jsxRuntimeExports.jsx(Lo.Provider,{value:{registerInteraction:st,unregisterInteraction:at,shouldInteract:lt},children:tt})}const Ln=.95,On=new Vector3(1,1,1),Os=["Alt","Control","Shift"];function qt(){const{visSize:nt,getFovBox:tt}=$(),rt=useThree(at=>at.camera),st=useThree(at=>at.invalidate);return reactExports.useCallback(at=>{const{position:lt}=rt,dt=xt.fromSize(nt),yt=tt(rt,at).keepWithin(dt);lt.copy(yt.center.setZ(lt.z)),rt.updateMatrixWorld(),st()},[rt,nt,tt,st])}function Oo(){const{canvasSize:nt}=$(),tt=useThree(st=>st.camera),rt=qt();return reactExports.useCallback(({world:st})=>{const{width:at,height:lt}=nt,dt=xt.fromPoints(...st),{width:yt,height:vt}=dt.size;tt.scale.set(Math.max(yt,1)/at,Math.max(vt,1)/lt,1),rt(dt.center)},[tt,nt,rt])}function yn(){const{canvasArea:nt}=$();useEventListener(nt,"wheel",tt=>tt.preventDefault(),{passive:!1})}function xn(nt){const tt=useThree(st=>st.camera),rt=qt();return function(st){const{sourceEvent:at,worldPt:lt}=st,{x:dt,y:yt}=nt(at);if(!dt&&!yt)return;const vt=new Vector3(dt?Ln:1,yt?Ln:1,1);at.deltaY<0?tt.scale.multiply(vt).min(On):tt.scale.divide(vt).min(On);const _t=tt.position.clone().sub(lt);at.deltaY<0?_t.multiply(vt):_t.divide(vt),rt(lt.clone().add(_t))}}function ot(nt,tt,rt={}){const st=useSyncedRef(tt),at=useThree(_t=>_t.camera),{htmlToWorld:lt,worldToData:dt,canvasArea:yt}=$();function vt(_t){const{offsetX:bt,offsetY:Mt}=_t,Ct=new Vector3(bt,Mt),Tt=lt(at,Ct),$t=dt(Tt);st.current({htmlPt:Ct,worldPt:Tt,dataPt:$t,sourceEvent:_t})}useEventListener(yt,nt,vt,rt)}function Kt(nt,tt){const{shouldInteract:rt,registerInteraction:st,unregisterInteraction:at}=Ds();return reactExports.useEffect(()=>(st(nt,tt),()=>at(nt)),[nt,st,at,tt]),reactExports.useCallback(lt=>rt(nt,lt),[nt,rt])}function Bo(nt=[]){const{canvasArea:tt}=$(),rt=Ue(nt),[st]=reactExports.useState(new Map),[at,lt]=useToggle(!1);function dt(){const yt=rt.every(vt=>st.get(vt));at!==yt&&lt(yt)}return useEventListener(window,"keyup",yt=>{const{key:vt}=yt;st.set(vt,!1),dt()}),useEventListener(window,"keydown",yt=>{const{key:vt}=yt;st.set(vt,!0),dt()}),useEventListener(tt,"pointerdown",yt=>{Os.forEach(vt=>{st.set(vt,yt.getModifierState(vt))}),dt()}),at}function Bs(nt){const{id:tt="Pan",button:rt=Ce.Left,modifierKey:st,disabled:at}=nt,lt=Kt(tt,{button:rt,modifierKey:st,disabled:at}),dt=useThree(Tt=>Tt.camera),yt=qt(),vt=reactExports.useRef(),_t=Bo(st);function bt(Tt){const{worldPt:$t,sourceEvent:Rt}=Tt,{target:Et,pointerId:wt}=Rt;lt(Rt)&&(Et.setPointerCapture(wt),vt.current=$t.clone())}function Mt(Tt){if(!vt.current||!_t)return;const{worldPt:$t}=Tt,Rt=vt.current.clone().sub($t);yt(dt.position.clone().add(Rt))}function Ct(Tt){const{sourceEvent:$t}=Tt,{target:Rt,pointerId:Et}=$t;Rt.releasePointerCapture(Et),vt.current=void 0}return ot("pointerdown",bt),ot("pointermove",Mt),ot("pointerup",Ct),null}function Fo(nt){const{id:tt="Selection",modifierKey:rt,disabled:st,transform:at=dn=>dn,validate:lt=()=>!0,onSelectionStart:dt,onSelectionChange:yt,onSelectionEnd:vt,onValidSelection:_t,children:bt}=nt,Mt=useSyncedRef(at),Ct=useSyncedRef(lt),Tt=useSyncedRef(dt),$t=useSyncedRef(yt),Rt=useSyncedRef(vt),Et=useSyncedRef(_t),wt=useThree(dn=>dn.camera),Pt=$(),{canvasBox:Ft,htmlToWorld:Nt,worldToData:Ot}=Pt,[Bt,Xt]=useRafState(),Zt=reactExports.useRef(),rn=reactExports.useRef(!1),Gt=Bo(rt),nn=Kt(tt,{button:Ce.Left,modifierKey:rt,disabled:st});function cn(dn,Un=dn){const qn=[dn,Ft.clampPoint(Un)],In=qn.map(ar=>Nt(wt,ar)),Wn=In.map(Ot);return{html:qn,world:In,data:Wn}}function an(dn){const{sourceEvent:Un}=dn;if(!nn(Un))return;const{target:qn,pointerId:In}=Un;qn.setPointerCapture(In),Zt.current=dn,Xt(cn(dn.htmlPt))}function mn(dn){const{current:Un}=Zt;Un&&Xt(cn(Un.htmlPt,dn.htmlPt))}function En(dn){if(!Zt.current)return;const{sourceEvent:Un}=dn,{target:qn,pointerId:In}=Un;qn.releasePointerCapture(In),Zt.current=void 0,rn.current=nn(Un),Xt(void 0)}ot("pointerdown",an),ot("pointermove",mn),ot("pointerup",En);function Cn(){Zt.current=void 0,Xt(void 0)}useKeyboardEvent("Escape",Cn,[],{event:"keydown"}),useEventListener(window,"contextmenu",dn=>{Zt.current&&(dn.preventDefault(),Cn())});const Mn=reactExports.useMemo(()=>Bt&&Mt.current(Bt,wt,Pt),[Bt,Mt,wt,Pt]),un=reactExports.useMemo(()=>!!Mn&&Ct.current(Mn),[Mn,Ct]),Tn=usePrevious(Mn),Pn=usePrevious(un);return reactExports.useEffect(()=>{var dn,Un,qn,In;if(Mn){et(Bt),Tn||(dn=Tt.current)==null||dn.call(Tt),(Un=$t.current)==null||Un.call($t,Gt?Mn:void 0,Bt,un);return}Tn&&(et(Pn),(qn=Rt.current)==null||qn.call(Rt,rn.current?Tn:void 0,Pn),Pn&&rn.current&&((In=Et.current)==null||In.call(Et,Tn)),rn.current=!1)},[Mn,Tn,Bt,un,Pn,Gt,Tt,$t,Rt,Et]),!Mn||!Gt?null:(et(Bt),bt(Mn,Bt,un))}const Fs="_selection_0f4643e",je={selection:Fs};function Jt(nt){const{overflowCanvas:tt=!1,children:rt}=nt,{r3fRoot:st,canvasArea:at}=$(),lt=tt?at:st,[dt]=reactExports.useState(()=>{const vt=document.createElement("div");return vt.setAttribute("hidden",""),vt}),[yt]=reactExports.useState(()=>createRoot$1(dt));return reactExports.useLayoutEffect(()=>{yt.render(reactDomExports.createPortal(rt,lt))},[rt,lt,yt]),reactExports.useLayoutEffect(()=>(st.append(dt),()=>{yt.unmount(),dt.remove()}),[st,yt,dt]),null}function Go(nt){const{children:tt}=nt,{svgOverlay:rt}=$();return rt?jsxRuntimeExports.jsx(Jt,{children:reactDomExports.createPortal(tt,rt)}):null}function qe(nt){const{coords:tt,strokePosition:rt,...st}=nt,{stroke:at,strokeWidth:lt=1}=st,dt=at&&rt?lt*(rt==="outside"?1:-1):0,{min:yt,max:vt}=xt.fromPoints(...tt).expandBySize(dt,dt);return jsxRuntimeExports.jsx("path",{d:`M ${yt.x},${yt.y} H ${vt.x} V ${vt.y} H ${yt.x} z`,...st})}const Gs=20;function Vs(nt){const{minZoom:tt=Gs,...rt}=nt,{canvasSize:st,canvasRatio:at,canvasBox:lt,visRatio:dt,visSize:yt,htmlToWorld:vt,worldToData:_t}=$(),bt=Oo(),Mt=useThree($t=>$t.camera),Ct=dt!==void 0;function Tt($t){if(!Ct)return $t;const{scale:Rt}=Mt,Et=xt.empty(new Vector3(st.width/2,st.height/2)).expandBySize(yt.width/Rt.x,yt.height/Rt.y),wt=xt.fromPoints(...$t.html).expandToRatio(at).keepWithin(lt).keepWithin(Et).toRect(),Pt=wt.map(Nt=>vt(Mt,Nt)),Ft=Pt.map(_t);return{html:wt,world:Pt,data:Ft}}return jsxRuntimeExports.jsx(Fo,{id:"SelectToZoom",transform:Tt,validate:({html:$t})=>$t[0].manhattanDistanceTo($t[1])>=tt,onValidSelection:bt,...rt,children:({html:$t},{html:Rt},Et)=>jsxRuntimeExports.jsxs(Go,{children:[jsxRuntimeExports.jsx(qe,{className:je.selection,coords:Rt,fill:"white",fillOpacity:!Ct&&Et?.25:0,stroke:"black",strokePosition:"inside",strokeDasharray:Ct||!Et?4:void 0}),Ct&&jsxRuntimeExports.jsx(qe,{className:je.selection,coords:$t,fill:"white",fillOpacity:Et?.25:0,stroke:"black",strokePosition:"inside"})]})})}function zs(nt){const{modifierKey:tt,disabled:rt}=nt,{visRatio:st}=$(),at=Kt("XAxisZoom",{button:"Wheel",modifierKey:tt,disabled:st!==void 0||rt}),lt=dt=>({x:at(dt),y:!1});return yn(),ot("wheel",xn(lt)),null}function Zs(nt){const{modifierKey:tt,disabled:rt}=nt,{visRatio:st}=$(),at=Kt("YAxisZoom",{button:"Wheel",modifierKey:tt,disabled:st!==void 0||rt}),lt=dt=>({x:!1,y:at(dt)});return yn(),ot("wheel",xn(lt)),null}function Ys(nt){const{modifierKey:tt,disabled:rt}=nt,st=Kt("Zoom",{button:"Wheel",modifierKey:tt,disabled:rt}),at=lt=>{const dt=st(lt);return{x:dt,y:dt}};return yn(),ot("wheel",xn(at)),null}function Ws(nt){const{axis:tt,onSelectionStart:rt,onSelectionChange:st,onSelectionEnd:at,children:lt,...dt}=nt;function yt(vt,_t,bt){const{canvasSize:Mt,htmlToWorld:Ct,worldToData:Tt}=bt,{width:$t,height:Rt}=Mt,[Et,wt]=vt.html,Pt=tt==="x"?[new Vector3(Et.x,0),new Vector3(wt.x,Rt)]:[new Vector3(0,Et.y),new Vector3($t,wt.y)],Ft=Pt.map(Ot=>Ct(_t,Ot)),Nt=Ft.map(Tt);return{html:Pt,world:Ft,data:Nt}}return jsxRuntimeExports.jsx(Fo,{transform:yt,onSelectionStart:rt,onSelectionChange:st,onSelectionEnd:at,...dt,children:lt})}const Hs=20;function Bn(nt){const{axis:tt,modifierKey:rt,disabled:st,minZoom:at=Hs}=nt,{visRatio:lt}=$(),dt=Oo();return jsxRuntimeExports.jsx(Ws,{axis:tt,id:`${tt.toUpperCase()}SelectToZoom`,modifierKey:rt,disabled:lt!==void 0||st,validate:({html:yt})=>xt.fromPoints(...yt).hasMinSize(at),onValidSelection:dt,children:({html:yt},vt,_t)=>jsxRuntimeExports.jsx(Go,{children:jsxRuntimeExports.jsx(qe,{className:je.selection,coords:yt,fill:"white",fillOpacity:_t?.25:0,stroke:"black",strokePosition:"inside",strokeDasharray:_t?void 0:4})})})}function Me(nt){const{...tt}=nt;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[tt.pan!==!1&&jsxRuntimeExports.jsx(Bs,{...tt.pan}),tt.zoom!==!1&&jsxRuntimeExports.jsx(Ys,{...tt.zoom}),tt.xAxisZoom!==!1&&jsxRuntimeExports.jsx(zs,{modifierKey:"Alt",...tt.xAxisZoom}),tt.yAxisZoom!==!1&&jsxRuntimeExports.jsx(Zs,{modifierKey:"Shift",...tt.yAxisZoom}),tt.selectToZoom!==!1&&jsxRuntimeExports.jsx(Vs,{modifierKey:"Control",...tt.selectToZoom}),tt.xSelectToZoom!==!1&&jsxRuntimeExports.jsx(Bn,{axis:"x",modifierKey:["Control","Alt"],...tt.xSelectToZoom}),tt.ySelectToZoom!==!1&&jsxRuntimeExports.jsx(Bn,{axis:"y",modifierKey:["Control","Shift"],...tt.ySelectToZoom})]})}function Q(nt){return(...tt)=>reactExports.useMemo(()=>nt(...tt),tt)}function Qt(nt,tt,rt=(st,at)=>Object.is(st,at)){const st=useThree(yt=>yt.camera),at=useRerender(),lt=reactExports.useRef(),dt=useSyncedRef(nt);return reactExports.useMemo(()=>{lt.current=dt.current(st)},tt),useFrame(()=>{const yt=dt.current(st);rt(lt.current,yt)||(lt.current=yt,at())}),lt.current}function Dt(nt,tt,rt,st={}){const{skipUpdates:at=!1,isInteractive:lt=!1}=st,dt=reactExports.useMemo(()=>new nt(tt),[nt,tt]),yt=useThree(vt=>vt.invalidate);return reactExports.useLayoutEffect(()=>{if(!at){dt.prepare(rt);for(let vt=0;vt<tt;vt+=1)dt.update(vt);lt&&dt.computeBoundingSphere(),Object.values(dt.attributes).forEach(vt=>{vt.needsUpdate=!0}),dt.index&&(dt.index.needsUpdate=!0),yt()}},[dt,tt,...Object.values(rt),at,lt,yt]),dt}function qs(nt){const{children:tt}=nt,{floatingToolbar:rt}=$();return rt?jsxRuntimeExports.jsx(Jt,{children:reactDomExports.createPortal(tt,rt)}):null}const Ks="_btnLike_0154b53",Js="_icon_bcb8f77",Qs="_label_5a75092",ti="_popup_954b735",ei="_btn_f1cebe5 btnClean",te={btnLike:Ks,icon:Js,label:Qs,popup:ti,btn:ei},{btn:ni,btnLike:oi}=te,ri=`_btn_579cee1 ${ni}`,ai=`_btnLike_5797793 ${oi}`,Gn={btn:ri,btnLike:ai};function Pe(){const nt=useThree(at=>at.camera),tt=useThree(at=>at.invalidate),rt=Qt(({scale:at})=>at.x<1||at.y<1,[]);function st(){nt.scale.x=1,nt.scale.y=1,nt.position.x=0,nt.position.y=0,nt.updateMatrixWorld(),tt()}return jsxRuntimeExports.jsx(qs,{children:jsxRuntimeExports.jsx("button",{className:Gn.btn,type:"button",hidden:!rt,onClick:()=>st(),children:jsxRuntimeExports.jsx("span",{className:Gn.btnLike,children:"Reset zoom"})})})}function si(nt){const{children:tt,style:rt,className:st}=nt,{canvasSize:at}=$();return jsxRuntimeExports.jsx(Jt,{overflowCanvas:!0,children:jsxRuntimeExports.jsx("div",{className:st,style:{position:"absolute",top:0,left:0,...at,...rt},children:tt})})}const ii="_overlay_df4a4fe",ci="_tooltip_c303daa",li="_guides_073d0c4",Re={overlay:ii,tooltip:ci,guides:li};function zo(nt){const{tooltipOpen:tt,tooltipLeft:rt,tooltipTop:st,guides:at,children:lt}=nt,{canvasSize:dt}=$(),{width:yt,height:vt}=dt;return jsxRuntimeExports.jsx(si,{className:Re.overlay,children:tt&&lt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Or,{className:Re.tooltip,top:st,left:rt,unstyled:!0,applyPositionStyle:!0,children:lt},Math.random()),at&&jsxRuntimeExports.jsxs("svg",{className:Re.guides,children:[at!=="horizontal"&&jsxRuntimeExports.jsx(Line$1,{from:{x:rt,y:0},to:{x:rt,y:vt}}),at!=="vertical"&&jsxRuntimeExports.jsx(Line$1,{from:{x:0,y:st},to:{x:yt,y:st}})]})]})})}function _n(nt){const{children:tt,size:rt,...st}=nt,{visSize:at}=$(),{width:lt,height:dt}=rt??at;return jsxRuntimeExports.jsxs("mesh",{...st,children:[jsxRuntimeExports.jsx("planeGeometry",{args:[lt,dt]}),tt]})}function wn(nt){const{guides:tt,renderTooltip:rt,size:st}=nt,{canvasSize:at,worldToData:lt}=$(),{width:dt,height:yt}=at,{tooltipOpen:vt,tooltipTop:_t,tooltipLeft:bt,tooltipData:Mt,showTooltip:Ct,hideTooltip:Tt}=useTooltip(),$t=reactExports.useCallback(Ft=>{const{unprojectedPoint:Nt,nativeEvent:Ot}=Ft;if(Ot.buttons!==0)return;const Bt=lt(Nt);Ct({tooltipLeft:Ot.offsetX,tooltipTop:Ot.offsetY,tooltipData:[Bt.x,Bt.y]})},[lt,Ct]),Rt=reactExports.useCallback(()=>{vt&&Tt()},[Tt,vt]),Et=reactExports.useCallback(()=>Tt(),[Tt]),wt=reactExports.useCallback(Ft=>{const{nativeEvent:Nt}=Ft,{offsetX:Ot,offsetY:Bt}=Nt;Ot>=0&&Ot<=dt&&Bt>=0&&Bt<=yt&&$t(Ft)},[yt,$t,dt]),Pt=Mt&&rt(...Mt);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(_n,{onPointerMove:$t,onPointerOut:Rt,onPointerDown:Et,onPointerUp:wt,size:st,children:jsxRuntimeExports.jsx("meshBasicMaterial",{opacity:0,transparent:!0})}),jsxRuntimeExports.jsx(zo,{tooltipOpen:vt,tooltipLeft:bt,tooltipTop:_t,guides:tt,children:Pt})]})}const di="_axis_1002b06",ui="_grid_a397f58",mi="_tick_44c4d9c",pi="_label_4a1d111",pe={axis:di,grid:ui,tick:mi,label:pi};function fe(nt){const{formattedValue:tt,...rt}=nt;return jsxRuntimeExports.jsx("text",{...rt,dy:"0.3125em",children:tt})}const fi={labelClassName:pe.label,labelProps:{fontSize:"inherit"},tickClassName:pe.tick,tickComponent:fe},hi={abscissa:[AxisBottom,GridColumns],ordinate:[AxisLeft,GridRows]};function Vn(nt){const{type:tt,config:rt,domain:st,canvasSize:at,offset:lt,flipAxis:dt,showAxis:yt}=nt,{width:vt,height:_t}=at,bt=tt==="abscissa",Mt=bt?vt:_t,{scaleType:Ct=T.Linear,isIndexAxis:Tt,showGrid:$t,label:Rt,nice:Et=!1}=rt,wt=pt(Ct,{domain:st,range:dt?[Mt,0]:[0,Mt],nice:Et}),[Pt,Ft]=hi[tt],Nt=St(Mt),Ot=Tt?{tickValues:Ps(st,Nt)}:{numTicks:Nt};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[yt&&jsxRuntimeExports.jsx("svg",{className:pe.axis,"data-type":tt,style:bt?{width:vt,height:lt}:{width:lt,height:_t},children:jsxRuntimeExports.jsx(Pt,{scale:wt,tickFormat:Ts(st,Mt,Ct),label:Rt,labelOffset:lt-(bt?32:36),hideAxisLine:$t,...Ot,...fi})}),$t&&jsxRuntimeExports.jsx("svg",{className:pe.grid,...at,children:jsxRuntimeExports.jsx(Ft,{scale:wt,...at,...Ot})})]})}function gi(nt){const{axisOffsets:tt,showAxes:rt}=nt,{canvasSize:st,visCanvas:at,abscissaConfig:lt,ordinateConfig:dt,getVisibleDomains:yt}=$(),vt=Qt(yt,[yt]);return jsxRuntimeExports.jsx(Jt,{children:reactDomExports.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Vn,{type:"abscissa",config:lt,domain:vt.xVisibleDomain,canvasSize:st,offset:tt.bottom,showAxis:rt}),jsxRuntimeExports.jsx(Vn,{type:"ordinate",config:dt,domain:vt.yVisibleDomain,canvasSize:st,offset:tt.left,showAxis:rt,flipAxis:!0})]}),at)})}function Zo(nt){const{className:tt,orthographic:rt,children:st}=nt;return jsxRuntimeExports.jsxs(Canvas,{className:tt,orthographic:rt,flat:!0,frameloop:"demand",dpr:[1,3],resize:{debounce:{scroll:20,resize:200},scroll:!1},gl:{preserveDrawingBuffer:!0},camera:rt?{near:To,far:gn,position:[0,0,bn]}:void 0,children:[jsxRuntimeExports.jsx("ambientLight",{}),st]})}function bi(){const{visRatio:nt}=$(),tt=useThree(st=>st.camera),rt=qt();return reactExports.useEffect(()=>{if(!nt||tt.scale.x===tt.scale.y)return;const st=Math.max(tt.scale.x,tt.scale.y);tt.scale.x=st,tt.scale.y=st,rt(tt.position)},[tt,rt,nt]),null}function vi(nt){const{value:tt}=nt,rt=useThree(at=>at.raycaster),st=useThree(at=>at.camera);return reactExports.useEffect(()=>{const at=rt.params.Points,lt=at?at.threshold:1;return at&&(at.threshold=tt),()=>{at&&(at.threshold=lt)}},[rt,tt]),useFrame(()=>{const at=(st.scale.x+st.scale.y)/2;rt.params.Points&&(rt.params.Points.threshold=tt*at/2)}),null}function yi(){const{dataToWorld:nt,worldToData:tt}=$(),rt=reactExports.useRef(),st=useThree(lt=>lt.camera),at=qt();return useFrame(()=>{rt.current=tt(st.position)}),reactExports.useEffect(()=>{rt.current&&at(nt(rt.current))},[rt,at,nt,st]),null}const xi="_visCanvas_2387375",_i="_title_313417a",wi="_canvasArea_6300bb7",Si="_r3fRoot_f557f0c",Ci="_svgOverlay_3f84e2f",Mi="_floatingToolbar_de4854e",kt={visCanvas:xi,title:_i,canvasArea:wi,r3fRoot:Si,svgOverlay:Ci,floatingToolbar:Mi},Pi={left:0,right:0,top:0,bottom:0};function Te(nt){const{title:tt,aspect:rt="auto",abscissaConfig:st,ordinateConfig:at,raycasterThreshold:lt,showAxes:dt=!0,children:yt}=nt,vt=No(rt,st.visDomain,at.visDomain),_t=dt?As({left:!!at.label,bottom:!!st.label,top:!!tt}):Pi,[bt,Mt]=reactExports.useState(null),[Ct,Tt]=reactExports.useState(null);return jsxRuntimeExports.jsxs("div",{className:kt.visCanvas,style:{gridTemplateColumns:`${_t.left}px minmax(0, 1fr) ${_t.right}px`,gridTemplateRows:`${_t.top}px minmax(0, 1fr) ${_t.bottom}px`},children:[dt&&tt&&jsxRuntimeExports.jsx("p",{className:kt.title,children:tt}),jsxRuntimeExports.jsxs("div",{className:kt.canvasArea,children:[jsxRuntimeExports.jsx(Zo,{className:kt.r3fRoot,orthographic:!0,children:jsxRuntimeExports.jsxs($s,{visRatio:vt,abscissaConfig:st,ordinateConfig:at,svgOverlay:bt,floatingToolbar:Ct,children:[jsxRuntimeExports.jsx(gi,{axisOffsets:_t,showAxes:dt}),jsxRuntimeExports.jsx(Ls,{children:yt}),jsxRuntimeExports.jsx(yi,{}),jsxRuntimeExports.jsx(bi,{}),lt!==void 0&&jsxRuntimeExports.jsx(vi,{value:lt})]})}),jsxRuntimeExports.jsx("svg",{ref:Mt,className:kt.svgOverlay,overflow:"hidden"})]}),jsxRuntimeExports.jsx("div",{ref:Tt,className:kt.floatingToolbar})]})}class Ti extends BufferGeometry{constructor(){super(...arguments),ct(this,"params")}prepare(tt){this.params=tt}}const Lt=Ti;class ki extends Lt{constructor(tt){super(),this.setAttribute("position",ft(tt*2))}update(tt){const{abscissas:rt,ordinates:st,errors:at,abscissaScale:lt,ordinateScale:dt,ignoreValue:yt}=this.params,vt=st[tt],_t=yt?yt(vt):!1,bt=tt*2;if(_t){this.attributes.position.setXYZ(bt,0,0,q),this.attributes.position.setXYZ(bt+1,0,0,q);return}const Mt=lt(rt[tt]),Ct=dt(vt);if(!Number.isFinite(Mt)||!Number.isFinite(Ct)){this.attributes.position.setXYZ(bt,0,0,q),this.attributes.position.setXYZ(bt+1,0,0,q);return}const Tt=at[tt],$t=dt(vt-Tt),Rt=dt(vt+Tt),Et=Number.isFinite($t)?$t:Ct,wt=Number.isFinite(Rt)?Rt:Ct;this.attributes.position.setXYZ(bt,Mt,Et,0),this.attributes.position.setXYZ(bt+1,Mt,wt,0)}}const Ai=ki;class Ei extends Lt{constructor(tt){super(),this.setAttribute("position",ft(tt*2))}update(tt){const{abscissas:rt,ordinates:st,errors:at,abscissaScale:lt,ordinateScale:dt,ignoreValue:yt}=this.params,vt=st[tt],_t=yt?yt(vt):!1,bt=tt*2;if(_t){this.attributes.position.setXYZ(bt,0,0,q),this.attributes.position.setXYZ(bt+1,0,0,q);return}const Mt=lt(rt[tt]),Ct=dt(vt);if(!Number.isFinite(Mt)||!Number.isFinite(Ct)){this.attributes.position.setXYZ(bt,0,0,q),this.attributes.position.setXYZ(bt+1,0,0,q);return}const Tt=at[tt],$t=dt(vt-Tt),Rt=dt(vt+Tt);Number.isFinite($t)?this.attributes.position.setXYZ(bt,Mt,$t,0):this.attributes.position.setXYZ(bt,0,0,q),Number.isFinite(Rt)?this.attributes.position.setXYZ(bt+1,Mt,Rt,0):this.attributes.position.setXYZ(bt+1,0,0,q)}}const Ni=Ei;var zt=(nt=>(nt.LineOnly="OnlyLine",nt.GlyphsOnly="OnlyGlyphs",nt.LineAndGlyphs="LineAndGlyphs",nt))(zt||{}),it=(nt=>(nt.Circle="Circle",nt.Cross="Cross",nt.Square="Square",nt.Cap="Cap",nt))(it||{});const Ii={[it.Cross]:`
    float alphaSymbol(vec2 coord, float size) {
      vec2 pos = floor(size * coord) + 0.5;
      vec2 d_x = abs(pos.x + vec2(- pos.y, pos.y - size));
      if (min(d_x.x, d_x.y) <= 0.5) {
          return 1.0;
      } else {
          return 0.0;
      }
    }
  `,[it.Cap]:`
    float alphaSymbol(vec2 coord, float size) {
      float dy = abs(size * (coord.y - 0.5));
      if (dy < 0.5) {
          return 1.0;
      } else {
          return 0.0;
      }
    }
  `,[it.Circle]:`
    float alphaSymbol(vec2 coord, float size) {
      float r = distance(coord, vec2(0.5, 0.5));
      if( r < 0.5) {
        return 1.0;
      } else {
        return 0.0;
      }
    }
  `,[it.Square]:`
    float alphaSymbol(vec2 coord, float size) {
      return 1.0;
    }
  `};function ke(nt){const{color:tt,size:rt,glyphType:st}=nt,at=!tt,lt={uniforms:vn({size:rt,color:new Color$1(tt)}),vertexShader:`
      ${tt?"uniform vec3 color;":""}
      uniform float size;
      varying vec3 vertexColor;

      void main() {
        gl_PointSize = size;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        vertexColor = color;
      }
    `,fragmentShader:`
      uniform float size;
      varying vec3 vertexColor;

      ${Ii[st]}

      void main() {
        float alpha = alphaSymbol(gl_PointCoord, size);
        if (alpha <= 0.0) {
            discard;
        } else {
            gl_FragColor = vec4(vertexColor.rgb, alpha);
        }
      }
    `};return jsxRuntimeExports.jsx("shaderMaterial",{args:[lt],vertexColors:at})}function $i(nt){const{abscissas:tt,ordinates:rt,errors:st,color:at,visible:lt,ignoreValue:dt}=nt,{abscissaScale:yt,ordinateScale:vt}=$(),_t={abscissas:tt,ordinates:rt,errors:st,abscissaScale:yt,ordinateScale:vt,ignoreValue:dt},bt=Dt(Ai,rt.length,_t,{skipUpdates:!lt}),Mt=Dt(Ni,rt.length,_t,{skipUpdates:!lt});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("lineSegments",{geometry:bt,visible:lt,children:jsxRuntimeExports.jsx("lineBasicMaterial",{color:at})}),jsxRuntimeExports.jsx("points",{geometry:Mt,visible:lt,children:jsxRuntimeExports.jsx(ke,{glyphType:it.Cap,color:at,size:9})})]})}class Ri extends Lt{constructor(tt){super(),this.setAttribute("position",ft(tt))}update(tt){const{abscissas:rt,ordinates:st,abscissaScale:at,ordinateScale:lt,ignoreValue:dt}=this.params,yt=st[tt];if(dt&&dt(yt)){this.attributes.position.setXYZ(tt,0,0,q);return}const vt=at(rt[tt]),_t=lt(yt);if(!Number.isFinite(vt)||!Number.isFinite(_t)){this.attributes.position.setXYZ(tt,0,0,q);return}this.attributes.position.setXYZ(tt,vt,_t,0)}}const Di=Ri;function Li(nt){const{abscissas:tt,ordinates:rt,glyphType:st=it.Cross,color:at,size:lt=6,visible:dt=!0,ignoreValue:yt,...vt}=nt,{abscissaScale:_t,ordinateScale:bt}=$(),Mt=Dt(Di,rt.length,{abscissas:tt,ordinates:rt,abscissaScale:_t,ordinateScale:bt,ignoreValue:yt},{skipUpdates:!dt,isInteractive:Ro(vt)});return jsxRuntimeExports.jsx("points",{geometry:Mt,visible:dt,...vt,children:jsxRuntimeExports.jsx(ke,{glyphType:st,color:at,size:lt})})}class Oi extends Lt{constructor(tt){super(),this.setAttribute("position",ft(tt))}update(tt){const{abscissas:rt,ordinates:st,abscissaScale:at,ordinateScale:lt,ignoreValue:dt}=this.params,yt=st[tt];if(dt&&dt(yt)){this.attributes.position.setXYZ(tt,0,0,q);return}const vt=at(rt[tt]),_t=lt(yt);if(!Number.isFinite(vt)||!Number.isFinite(_t)){this.attributes.position.setXYZ(tt,0,0,q);return}this.attributes.position.setXYZ(tt,vt,_t,0)}}const Bi=Oi;class Fi extends Line$2{}extend$2({Line_:Fi});function Gi(nt){const{abscissas:tt,ordinates:rt,color:st,visible:at=!0,ignoreValue:lt,...dt}=nt,{abscissaScale:yt,ordinateScale:vt}=$(),_t=Dt(Bi,rt.length,{abscissas:tt,ordinates:rt,abscissaScale:yt,ordinateScale:vt,ignoreValue:lt},{skipUpdates:!at,isInteractive:Ro(dt)});return jsxRuntimeExports.jsx("line_",{geometry:_t,visible:at,...dt,children:jsxRuntimeExports.jsx("lineBasicMaterial",{color:st})})}function zn(nt){const{abscissas:tt,ordinates:rt,errors:st,showErrors:at,color:lt,curveType:dt=zt.LineOnly,glyphType:yt=it.Cross,glyphSize:vt=6,visible:_t=!0,onDataPointClick:bt,onDataPointEnter:Mt,onDataPointLeave:Ct,ignoreValue:Tt}=nt,$t=reactExports.useCallback(wt=>{const{index:Pt}=wt;bt&&Pt!==void 0&&bt(Pt,wt)},[bt]),Rt=reactExports.useCallback(wt=>{const{index:Pt}=wt;Mt&&Pt!==void 0&&Mt(Pt,wt)},[Mt]),Et=reactExports.useCallback(wt=>{const{index:Pt}=wt;Ct&&Pt!==void 0&&Ct(Pt,wt)},[Ct]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Gi,{abscissas:tt,ordinates:rt,color:lt,ignoreValue:Tt,visible:dt!==zt.GlyphsOnly&&_t}),jsxRuntimeExports.jsx(Li,{abscissas:tt,ordinates:rt,glyphType:yt,color:lt,size:vt,ignoreValue:Tt,visible:dt!==zt.LineOnly&&_t,onClick:bt&&$t,onPointerEnter:Mt&&Rt,onPointerLeave:Ct&&Et}),st&&jsxRuntimeExports.jsx($i,{abscissas:tt,ordinates:rt,errors:st,color:lt,ignoreValue:Tt,visible:_t&&at})]})}var mt=(nt=>(nt.MinGreater="min-greater",nt.InvalidMinWithScale="invalid-min-with-scale",nt.InvalidMaxWithScale="invalid-max-with-scale",nt.CustomMaxFallback="custom-max-fallback",nt))(mt||{});function nc(nt){return hsl$1(nt*360,1,.5).formatRgb()}function At(nt){return tt=>nt(1-tt)}const Yo={Blues:At(xa),Greens:At(_a),Greys:At(wa),Oranges:At(Sa),Purples:At(Ca),Reds:At(Ma),Turbo:zr,Viridis:Zr,Inferno:inferno,Magma:magma,Plasma:plasma,Cividis:Xr,Warm:warm,Cool:cool,Cubehelix:qr,BuGn:Kr,BuPu:Jr,GnBu:Qr,OrRd:ta,PuBuGn:ea,PuBu:na,PuRd:oa,RdPu:ra,YlGnBu:aa,YlGn:sa,YlOrBr:ia,YlOrRd:ca,Rainbow:la,Sinebow:da,HSL:nc,BrBG:ua,PRGn:ma,PiYG:pa,PuOr:fa,RdBu:ha,RdGy:ga,RdYlBu:ba,RdYlGn:va,Spectral:ya},Zn=1/20;range$2(0,1+Zn,Zn);const oc={[T.Linear]:nt=>nt,[T.Log]:Math.log10,[T.SymLog]:nt=>Math.sign(nt)*Math.log10(1+Math.abs(nt)),[T.Sqrt]:Math.sqrt,[T.Gamma]:nt=>nt},rc={float32:FloatType,uint16:HalfFloatType,uint8:UnsignedByteType,uint8_clamped:UnsignedByteType};function Ae(nt,tt){const rt=Yo[nt];return tt?st=>rt(1-st):rt}function cc(nt,tt=T.Linear){const rt=oc[tt];return[rt(nt[0]),rt(nt[1])]}function dc(nt,tt=NearestFilter){if(!nt)return;const{rows:rt,cols:st}=jt(nt),at=new DataTexture(nt.data,st,rt,RedFormat,rc[nt.dtype],UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,tt);return at.needsUpdate=!0,at}const De=Q(dc),hc=rgb(255,255,255,0),Le=256,gc={[T.Log]:"log(value) * oneOverLog10",[T.SymLog]:"sign(value) * log(1. + abs(value)) * oneOverLog10",[T.Sqrt]:"sqrt(value)"},bc={[T.Log]:"value > 0.",[T.Sqrt]:"value >= 0."};function vc(nt){const{values:tt,domain:rt,scaleType:st,colorMap:at,invertColorMap:lt=!1,magFilter:dt,alphaValues:yt,alphaDomain:vt=Wt,badColor:_t=hc,mask:bt}=nt,Mt=De(tt,dt),Ct=De(yt),Tt=De(bt),$t=reactExports.useMemo(()=>{const Nt=Ae(at,lt),Ot=Array.from({length:Le}).flatMap((Xt,Zt)=>{const{r:rn,g:Gt,b:nn}=rgb(Nt(Zt/(Le-1)));return[rn,Gt,nn,255]}),Bt=new DataTexture(Uint8Array.from(Ot),Le,1,RGBAFormat,UnsignedByteType);return Bt.needsUpdate=!0,Bt},[at,lt]),[Rt,Et]=Array.isArray(st)?st:[st,1],wt=cc(rt,Rt),Pt=typeof _t=="string"?rgb(_t):_t,Ft={uniforms:vn({data:Mt,mask:Tt,colorMap:$t,min:wt[0],oneOverRange:1/(wt[1]-wt[0]),gammaExponent:Et,normRevertFactor:tt.dtype==="uint8"?255:1,alpha:Ct,withAlpha:yt?1:0,alphaMin:vt[0],oneOverAlphaRange:1/(vt[1]-vt[0]),badColor:new Vector4(Pt.r/255,Pt.g/255,Pt.b/255,Pt.opacity)}),vertexShader:$o,fragmentShader:`
      uniform sampler2D data;
      uniform sampler2D colorMap;

      uniform float min;
      uniform float oneOverRange;
      uniform float gammaExponent;
      uniform float normRevertFactor;

      uniform sampler2D alpha;
      uniform float alphaMin;
      uniform float oneOverAlphaRange;
      uniform int withAlpha;
      uniform vec4 badColor;

      uniform sampler2D mask;

      const float oneOverLog10 = 0.43429448190325176;

      varying vec2 coords;

      bool isSupported(float value) {
        return ${bc[Rt]||"true"};
      }

      float scale(float value) {
        return ${gc[Rt]||"value"};
      }

      void main() {
        float value = texture2D(data, coords).r * normRevertFactor;
        float maskValue = texture2D(mask, coords).r;

        if (isnan(value) || !isSupported(value) || maskValue == 1.) {
            gl_FragColor = badColor;
        } else {
          float scaledValue = scale(value);
          float normalizedValue = clamp(oneOverRange * (scaledValue - min), 0., 1.);

          gl_FragColor = texture2D(colorMap, vec2(pow(normalizedValue, gammaExponent), 0.5));

          if (withAlpha == 1) {
            gl_FragColor.a = oneOverAlphaRange * (texture2D(alpha, coords).r - alphaMin);
          }
        }
      }
    `};return jsxRuntimeExports.jsx("shaderMaterial",{args:[Ft],side:DoubleSide})}const jo=reactExports.memo(vc);function qo(nt){const{values:tt,domain:rt,scaleType:st,colorMap:at,invertColorMap:lt,magFilter:dt,alphaValues:yt,alphaDomain:vt,badColor:_t,mask:bt,...Mt}=nt;return jsxRuntimeExports.jsx(_n,{...Mt,children:jsxRuntimeExports.jsx(jo,{values:tt,domain:rt,scaleType:st,colorMap:at,invertColorMap:lt,magFilter:dt,alphaValues:yt,alphaDomain:vt,badColor:_t,mask:bt})})}const{btn:Pc,btnLike:Tc,icon:kc,label:Ac,popup:Ec}=te,Nc="_toolbar_d77010c",Ic="_controls_6f2898a",$c="_controlWrapper_c53184f",Rc="_control_72c50d3",Dc="_sep_9963159",Lc="_arrowIcon_52a7a56",Oc="_menu_9a962f8",Bc="_btnOption_14b8d45 btnClean",Fc=`_btn_ea88005 ${Pc}`,Gc=`_btnLike_059b9d6 ${Tc}`,Vc=`_icon_b73dfea ${kc}`,zc=`_label_917dfbf ${Ac}`,Zc=`_popup_486e2ed ${Ec}`,F={toolbar:Nc,controls:Ic,controlWrapper:$c,control:Rc,sep:Dc,arrowIcon:Lc,menu:Oc,btnOption:Bc,btn:Fc,btnLike:Gc,icon:Vc,label:zc,popup:Zc},Yc=reactExports.forwardRef((nt,tt)=>{const{label:rt,icon:st,iconOnly:at,small:lt,raised:dt,withArrow:yt,disabled:vt,..._t}=nt;return jsxRuntimeExports.jsx("button",{ref:tt,className:F.btn,type:"button",title:at?rt:void 0,"aria-label":at?rt:void 0,disabled:vt,"data-small":lt||void 0,"data-raised":dt||void 0,..._t,children:jsxRuntimeExports.jsxs("span",{className:F.btnLike,children:[st&&jsxRuntimeExports.jsx(st,{className:F.icon}),!at&&jsxRuntimeExports.jsx("span",{className:F.label,children:rt}),yt&&jsxRuntimeExports.jsx(MdArrowDropDown,{className:F.arrowIcon})]})})}),ee=Yc;function ge(nt){const{value:tt,onToggle:rt,...st}=nt;return jsxRuntimeExports.jsx(ee,{...st,"aria-pressed":tt,onClick:()=>rt()})}reactExports.createContext(void 0);const Sl="_boundEditor_ce4a770",Cl="_label_1e85446",Ml="_value_c7f465d",Be={boundEditor:Sl,label:Cl,value:Ml},Pl="_root_86b0b1e",Tl="_dataRange_03d542e",kl="_autoscale_8ea032e",Al="_error_841a0df",El="_errorMessage_a16acf6",Nl="_actionBtn_18350cd btnClean",Il="_swapBtn_2e22485 _actionBtn_18350cd btnClean",gt={root:Pl,dataRange:Tl,autoscale:kl,error:Al,errorMessage:El,actionBtn:Nl,swapBtn:Il},tn=reactExports.forwardRef((nt,tt)=>{const{bound:rt,value:st,isEditing:at,hasError:lt,onEditToggle:dt,onChange:yt}=nt,vt=`${rt}-bound`,_t=reactExports.useRef(null),[bt,Mt]=reactExports.useState("");function Ct(){dt(!1),Mt(Ne(st))}return reactExports.useImperativeHandle(tt,()=>({cancel:Ct})),reactExports.useEffect(()=>{Mt(Ne(st))},[st,Mt]),reactExports.useEffect(()=>{var Tt,$t;at||(Tt=_t.current)==null||Tt.blur(),at&&rt==="min"&&(($t=_t.current)==null||$t.focus())},[at,rt]),jsxRuntimeExports.jsxs("form",{className:Be.boundEditor,"data-error":lt||void 0,"data-editing":at,onSubmit:Tt=>{Tt.preventDefault();const $t=Number.parseFloat(bt.replace("","-")),Rt=Number.isNaN($t)?st:Eo($t);Mt(Ne(Rt)),yt(Rt),dt(!1)},children:[jsxRuntimeExports.jsx("label",{id:`${vt}-label`,className:Be.label,htmlFor:vt,children:rt}),jsxRuntimeExports.jsx("input",{id:vt,ref:_t,className:Be.value,type:"text",name:"bound",value:bt,title:at?void 0:st.toString(),"aria-labelledby":`${vt}-label`,onChange:Tt=>Mt(Tt.target.value),onFocus:()=>{at||dt(!0)}}),jsxRuntimeExports.jsx("button",{className:gt.actionBtn,type:"submit",disabled:!at,"aria-label":`Apply ${rt}`,children:jsxRuntimeExports.jsx(FiCheck,{})}),jsxRuntimeExports.jsx("button",{className:gt.actionBtn,type:"button",disabled:!at,"aria-label":`Cancel ${rt}`,onClick:()=>Ct(),children:jsxRuntimeExports.jsx(FiSlash,{})})]})});tn.displayName="BoundEditor";const $l={[mt.MinGreater]:{message:"Min greater than max",fallback:"data range"},[mt.InvalidMinWithScale]:{message:"Custom min invalid with this scale",fallback:"data min"},[mt.InvalidMaxWithScale]:{message:"Custom max invalid with this scale",fallback:"data max"},[mt.CustomMaxFallback]:{message:"Custom min invalid with this scale",fallback:"custom max"}};function Fe(nt){const{error:tt,showSwapBtn:rt=!1,onSwap:st}=nt,{message:at,fallback:lt}=$l[tt];return jsxRuntimeExports.jsxs("p",{className:gt.error,children:[jsxRuntimeExports.jsxs("span",{className:gt.errorMessage,children:[at,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(FiCornerDownRight,{})," falling back to ",jsxRuntimeExports.jsx("strong",{children:lt})]}),rt&&st&&jsxRuntimeExports.jsx("button",{className:gt.swapBtn,type:"button","aria-label":"Swap min and max",onClick:()=>st(),children:jsxRuntimeExports.jsx(MdSwapVert,{})})]})}const Qo=reactExports.forwardRef((nt,tt)=>{const{sliderDomain:rt,dataDomain:st,errors:at}=nt,{isAutoMin:lt,isAutoMax:dt,isEditingMin:yt,isEditingMax:vt}=nt,{onAutoMinToggle:_t,onAutoMaxToggle:bt,onEditMin:Mt,onEditMax:Ct,onChangeMin:Tt,onChangeMax:$t,onSwap:Rt}=nt,{minGreater:Et,minError:wt,maxError:Pt}=at,Ft=reactExports.useRef(null),Nt=reactExports.useRef(null);return reactExports.useImperativeHandle(tt,()=>({cancelEditing:()=>{var Ot,Bt;(Ot=Ft.current)==null||Ot.cancel(),(Bt=Nt.current)==null||Bt.cancel()}})),jsxRuntimeExports.jsxs("div",{className:gt.root,children:[Et&&jsxRuntimeExports.jsx(Fe,{error:mt.MinGreater,showSwapBtn:!lt&&!dt,onSwap:Rt}),jsxRuntimeExports.jsx(tn,{ref:Ft,bound:"min",value:rt[0],isEditing:yt,hasError:Et||!!wt,onEditToggle:Mt,onChange:Tt}),wt&&jsxRuntimeExports.jsx(Fe,{error:wt}),jsxRuntimeExports.jsx(tn,{ref:Nt,bound:"max",value:rt[1],isEditing:vt,hasError:Et||!!Pt,onEditToggle:Ct,onChange:$t}),Pt&&jsxRuntimeExports.jsx(Fe,{error:Pt}),jsxRuntimeExports.jsxs("p",{className:gt.dataRange,children:["Data range"," ",jsxRuntimeExports.jsxs("span",{children:["["," ",jsxRuntimeExports.jsx("abbr",{title:st[0].toString(),children:me(st[0])})," ",","," ",jsxRuntimeExports.jsx("abbr",{title:st[1].toString(),children:me(st[1])})," ","]"]})]}),jsxRuntimeExports.jsxs("p",{className:gt.autoscale,children:["Autoscale"," ",jsxRuntimeExports.jsx(ge,{label:"Min",raised:!0,value:lt,onToggle:_t}),jsxRuntimeExports.jsx(ge,{label:"Max",raised:!0,value:dt,onToggle:bt})]})]})});Qo.displayName="DomainControls";const Ol="_thumb_be15bc7",Bl="_thumbBtnLike_3744319",Fl="_icon_4b34f14",oe={thumb:Ol,thumbBtnLike:Bl,icon:Fl},tr=reactExports.forwardRef((nt,tt)=>{const{bound:rt,isAuto:st,hasError:at,disabled:lt,AutoIcon:dt,...yt}=nt;return jsxRuntimeExports.jsx("div",{ref:tt,...yt,className:oe.thumb,"aria-label":`Change ${rt} limit`,"aria-disabled":lt||void 0,tabIndex:lt?-1:yt.tabIndex,"data-auto":st,"data-error":at||void 0,children:jsxRuntimeExports.jsxs("div",{className:oe.thumbBtnLike,children:[st&&jsxRuntimeExports.jsx(dt,{className:oe.icon}),!st&&at&&jsxRuntimeExports.jsx(FiAlertCircle,{className:oe.icon,strokeWidth:"3"})]})})});tr.displayName="Thumb";function ad(nt){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1em",width:"1em",...nt,children:jsxRuntimeExports.jsx("path",{d:"M18 17v-2H6v2zm4-4v-2H2v2zm-8 8v-2h-4v2zm4-12V7H6v2zm-8-4h4V3h-4z",stroke:"none"})})}function sd(nt){return jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",height:"1em",width:"1em",...nt,children:jsxRuntimeExports.jsx("polyline",{points:"2 12 6 12 9 21 15 3 19 3"})})}T.Linear+"",T.Log+"",T.SymLog+"",T.Sqrt+"",T.Gamma+"";ie.Phase+"",ie.Amplitude+"",ie.PhaseAmplitude+"";create(nt=>({val:void 0,setTooltipValue:(tt,rt,st)=>nt(()=>({val:{x:tt,y:rt,v:st}}))}));function Ed(nt){const{api:tt,layer:rt,x:st,y:at,magFilter:lt,onPointerMove:dt,...yt}=nt,vt=tt.get(rt,new Vector2(st,at)),[_t,bt]=vt.shape,Mt=useThrottledCallback(Ct=>{dt==null||dt(Ct,vt)},[dt],50);return jsxRuntimeExports.jsx("group",{position:[st+bt/2,at+_t/2,0],children:jsxRuntimeExports.jsx(qo,{values:vt,...yt,magFilter:lt,size:{width:bt,height:_t},onPointerMove:dt&&Mt})})}reactExports.memo(Ed);new Box3(new Vector3(-1,-1,-1),new Vector3(1,1,1));function bind(nt,tt){return function(){return nt.apply(tt,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(nt=>tt=>{const rt=toString.call(tt);return nt[rt]||(nt[rt]=rt.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=nt=>(nt=nt.toLowerCase(),tt=>kindOf(tt)===nt),typeOfTest=nt=>tt=>typeof tt===nt,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(nt){return nt!==null&&!isUndefined(nt)&&nt.constructor!==null&&!isUndefined(nt.constructor)&&isFunction(nt.constructor.isBuffer)&&nt.constructor.isBuffer(nt)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(nt){let tt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?tt=ArrayBuffer.isView(nt):tt=nt&&nt.buffer&&isArrayBuffer(nt.buffer),tt}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=nt=>nt!==null&&typeof nt=="object",isBoolean=nt=>nt===!0||nt===!1,isPlainObject=nt=>{if(kindOf(nt)!=="object")return!1;const tt=getPrototypeOf(nt);return(tt===null||tt===Object.prototype||Object.getPrototypeOf(tt)===null)&&!(Symbol.toStringTag in nt)&&!(Symbol.iterator in nt)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=nt=>isObject(nt)&&isFunction(nt.pipe),isFormData=nt=>{let tt;return nt&&(typeof FormData=="function"&&nt instanceof FormData||isFunction(nt.append)&&((tt=kindOf(nt))==="formdata"||tt==="object"&&isFunction(nt.toString)&&nt.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=nt=>nt.trim?nt.trim():nt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(nt,tt,{allOwnKeys:rt=!1}={}){if(nt===null||typeof nt>"u")return;let st,at;if(typeof nt!="object"&&(nt=[nt]),isArray(nt))for(st=0,at=nt.length;st<at;st++)tt.call(null,nt[st],st,nt);else{const lt=rt?Object.getOwnPropertyNames(nt):Object.keys(nt),dt=lt.length;let yt;for(st=0;st<dt;st++)yt=lt[st],tt.call(null,nt[yt],yt,nt)}}function findKey(nt,tt){tt=tt.toLowerCase();const rt=Object.keys(nt);let st=rt.length,at;for(;st-- >0;)if(at=rt[st],tt===at.toLowerCase())return at;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=nt=>!isUndefined(nt)&&nt!==_global;function merge(){const{caseless:nt}=isContextDefined(this)&&this||{},tt={},rt=(st,at)=>{const lt=nt&&findKey(tt,at)||at;isPlainObject(tt[lt])&&isPlainObject(st)?tt[lt]=merge(tt[lt],st):isPlainObject(st)?tt[lt]=merge({},st):isArray(st)?tt[lt]=st.slice():tt[lt]=st};for(let st=0,at=arguments.length;st<at;st++)arguments[st]&&forEach(arguments[st],rt);return tt}const extend=(nt,tt,rt,{allOwnKeys:st}={})=>(forEach(tt,(at,lt)=>{rt&&isFunction(at)?nt[lt]=bind(at,rt):nt[lt]=at},{allOwnKeys:st}),nt),stripBOM=nt=>(nt.charCodeAt(0)===65279&&(nt=nt.slice(1)),nt),inherits=(nt,tt,rt,st)=>{nt.prototype=Object.create(tt.prototype,st),nt.prototype.constructor=nt,Object.defineProperty(nt,"super",{value:tt.prototype}),rt&&Object.assign(nt.prototype,rt)},toFlatObject=(nt,tt,rt,st)=>{let at,lt,dt;const yt={};if(tt=tt||{},nt==null)return tt;do{for(at=Object.getOwnPropertyNames(nt),lt=at.length;lt-- >0;)dt=at[lt],(!st||st(dt,nt,tt))&&!yt[dt]&&(tt[dt]=nt[dt],yt[dt]=!0);nt=rt!==!1&&getPrototypeOf(nt)}while(nt&&(!rt||rt(nt,tt))&&nt!==Object.prototype);return tt},endsWith=(nt,tt,rt)=>{nt=String(nt),(rt===void 0||rt>nt.length)&&(rt=nt.length),rt-=tt.length;const st=nt.indexOf(tt,rt);return st!==-1&&st===rt},toArray=nt=>{if(!nt)return null;if(isArray(nt))return nt;let tt=nt.length;if(!isNumber(tt))return null;const rt=new Array(tt);for(;tt-- >0;)rt[tt]=nt[tt];return rt},isTypedArray=(nt=>tt=>nt&&tt instanceof nt)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(nt,tt)=>{const st=(nt&&nt[Symbol.iterator]).call(nt);let at;for(;(at=st.next())&&!at.done;){const lt=at.value;tt.call(nt,lt[0],lt[1])}},matchAll=(nt,tt)=>{let rt;const st=[];for(;(rt=nt.exec(tt))!==null;)st.push(rt);return st},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=nt=>nt.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(rt,st,at){return st.toUpperCase()+at}),hasOwnProperty=(({hasOwnProperty:nt})=>(tt,rt)=>nt.call(tt,rt))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(nt,tt)=>{const rt=Object.getOwnPropertyDescriptors(nt),st={};forEach(rt,(at,lt)=>{let dt;(dt=tt(at,lt,nt))!==!1&&(st[lt]=dt||at)}),Object.defineProperties(nt,st)},freezeMethods=nt=>{reduceDescriptors(nt,(tt,rt)=>{if(isFunction(nt)&&["arguments","caller","callee"].indexOf(rt)!==-1)return!1;const st=nt[rt];if(isFunction(st)){if(tt.enumerable=!1,"writable"in tt){tt.writable=!1;return}tt.set||(tt.set=()=>{throw Error("Can not rewrite read-only method '"+rt+"'")})}})},toObjectSet=(nt,tt)=>{const rt={},st=at=>{at.forEach(lt=>{rt[lt]=!0})};return isArray(nt)?st(nt):st(String(nt).split(tt)),rt},noop=()=>{},toFiniteNumber=(nt,tt)=>nt!=null&&Number.isFinite(nt=+nt)?nt:tt,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(nt=16,tt=ALPHABET.ALPHA_DIGIT)=>{let rt="";const{length:st}=tt;for(;nt--;)rt+=tt[Math.random()*st|0];return rt};function isSpecCompliantForm(nt){return!!(nt&&isFunction(nt.append)&&nt[Symbol.toStringTag]==="FormData"&&nt[Symbol.iterator])}const toJSONObject=nt=>{const tt=new Array(10),rt=(st,at)=>{if(isObject(st)){if(tt.indexOf(st)>=0)return;if(!("toJSON"in st)){tt[at]=st;const lt=isArray(st)?[]:{};return forEach(st,(dt,yt)=>{const vt=rt(dt,at+1);!isUndefined(vt)&&(lt[yt]=vt)}),tt[at]=void 0,lt}}return st};return rt(nt,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=nt=>nt&&(isObject(nt)||isFunction(nt))&&isFunction(nt.then)&&isFunction(nt.catch),_setImmediate=((nt,tt)=>nt?setImmediate:tt?((rt,st)=>(_global.addEventListener("message",({source:at,data:lt})=>{at===_global&&lt===rt&&st.length&&st.shift()()},!1),at=>{st.push(at),_global.postMessage(rt,"*")}))(`axios@${Math.random()}`,[]):rt=>setTimeout(rt))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(nt,tt,rt,st,at){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=nt,this.name="AxiosError",tt&&(this.code=tt),rt&&(this.config=rt),st&&(this.request=st),at&&(this.response=at,this.status=at.status?at.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function nt(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(nt=>{descriptors[nt]={value:nt}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(nt,tt,rt,st,at,lt)=>{const dt=Object.create(prototype$1);return utils$1.toFlatObject(nt,dt,function(vt){return vt!==Error.prototype},yt=>yt!=="isAxiosError"),AxiosError.call(dt,nt.message,tt,rt,st,at),dt.cause=nt,dt.name=nt.name,lt&&Object.assign(dt,lt),dt};const httpAdapter=null;function isVisitable(nt){return utils$1.isPlainObject(nt)||utils$1.isArray(nt)}function removeBrackets(nt){return utils$1.endsWith(nt,"[]")?nt.slice(0,-2):nt}function renderKey(nt,tt,rt){return nt?nt.concat(tt).map(function(at,lt){return at=removeBrackets(at),!rt&&lt?"["+at+"]":at}).join(rt?".":""):tt}function isFlatArray(nt){return utils$1.isArray(nt)&&!nt.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function nt(tt){return/^is[A-Z]/.test(tt)});function toFormData(nt,tt,rt){if(!utils$1.isObject(nt))throw new TypeError("target must be an object");tt=tt||new FormData,rt=utils$1.toFlatObject(rt,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Rt,Et){return!utils$1.isUndefined(Et[Rt])});const st=rt.metaTokens,at=rt.visitor||bt,lt=rt.dots,dt=rt.indexes,vt=(rt.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(tt);if(!utils$1.isFunction(at))throw new TypeError("visitor must be a function");function _t($t){if($t===null)return"";if(utils$1.isDate($t))return $t.toISOString();if(!vt&&utils$1.isBlob($t))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer($t)||utils$1.isTypedArray($t)?vt&&typeof Blob=="function"?new Blob([$t]):Buffer.from($t):$t}function bt($t,Rt,Et){let wt=$t;if($t&&!Et&&typeof $t=="object"){if(utils$1.endsWith(Rt,"{}"))Rt=st?Rt:Rt.slice(0,-2),$t=JSON.stringify($t);else if(utils$1.isArray($t)&&isFlatArray($t)||(utils$1.isFileList($t)||utils$1.endsWith(Rt,"[]"))&&(wt=utils$1.toArray($t)))return Rt=removeBrackets(Rt),wt.forEach(function(Ft,Nt){!(utils$1.isUndefined(Ft)||Ft===null)&&tt.append(dt===!0?renderKey([Rt],Nt,lt):dt===null?Rt:Rt+"[]",_t(Ft))}),!1}return isVisitable($t)?!0:(tt.append(renderKey(Et,Rt,lt),_t($t)),!1)}const Mt=[],Ct=Object.assign(predicates,{defaultVisitor:bt,convertValue:_t,isVisitable});function Tt($t,Rt){if(!utils$1.isUndefined($t)){if(Mt.indexOf($t)!==-1)throw Error("Circular reference detected in "+Rt.join("."));Mt.push($t),utils$1.forEach($t,function(wt,Pt){(!(utils$1.isUndefined(wt)||wt===null)&&at.call(tt,wt,utils$1.isString(Pt)?Pt.trim():Pt,Rt,Ct))===!0&&Tt(wt,Rt?Rt.concat(Pt):[Pt])}),Mt.pop()}}if(!utils$1.isObject(nt))throw new TypeError("data must be an object");return Tt(nt),tt}function encode$1(nt){const tt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(nt).replace(/[!'()~]|%20|%00/g,function(st){return tt[st]})}function AxiosURLSearchParams(nt,tt){this._pairs=[],nt&&toFormData(nt,this,tt)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function nt(tt,rt){this._pairs.push([tt,rt])};prototype.toString=function nt(tt){const rt=tt?function(st){return tt.call(this,st,encode$1)}:encode$1;return this._pairs.map(function(at){return rt(at[0])+"="+rt(at[1])},"").join("&")};function encode(nt){return encodeURIComponent(nt).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(nt,tt,rt){if(!tt)return nt;const st=rt&&rt.encode||encode;utils$1.isFunction(rt)&&(rt={serialize:rt});const at=rt&&rt.serialize;let lt;if(at?lt=at(tt,rt):lt=utils$1.isURLSearchParams(tt)?tt.toString():new AxiosURLSearchParams(tt,rt).toString(st),lt){const dt=nt.indexOf("#");dt!==-1&&(nt=nt.slice(0,dt)),nt+=(nt.indexOf("?")===-1?"?":"&")+lt}return nt}class InterceptorManager{constructor(){this.handlers=[]}use(tt,rt,st){return this.handlers.push({fulfilled:tt,rejected:rt,synchronous:st?st.synchronous:!1,runWhen:st?st.runWhen:null}),this.handlers.length-1}eject(tt){this.handlers[tt]&&(this.handlers[tt]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(tt){utils$1.forEach(this.handlers,function(st){st!==null&&tt(st)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(nt,tt){return toFormData(nt,new platform.classes.URLSearchParams,Object.assign({visitor:function(rt,st,at,lt){return platform.isNode&&utils$1.isBuffer(rt)?(this.append(st,rt.toString("base64")),!1):lt.defaultVisitor.apply(this,arguments)}},tt))}function parsePropPath(nt){return utils$1.matchAll(/\w+|\[(\w*)]/g,nt).map(tt=>tt[0]==="[]"?"":tt[1]||tt[0])}function arrayToObject(nt){const tt={},rt=Object.keys(nt);let st;const at=rt.length;let lt;for(st=0;st<at;st++)lt=rt[st],tt[lt]=nt[lt];return tt}function formDataToJSON(nt){function tt(rt,st,at,lt){let dt=rt[lt++];if(dt==="__proto__")return!0;const yt=Number.isFinite(+dt),vt=lt>=rt.length;return dt=!dt&&utils$1.isArray(at)?at.length:dt,vt?(utils$1.hasOwnProp(at,dt)?at[dt]=[at[dt],st]:at[dt]=st,!yt):((!at[dt]||!utils$1.isObject(at[dt]))&&(at[dt]=[]),tt(rt,st,at[dt],lt)&&utils$1.isArray(at[dt])&&(at[dt]=arrayToObject(at[dt])),!yt)}if(utils$1.isFormData(nt)&&utils$1.isFunction(nt.entries)){const rt={};return utils$1.forEachEntry(nt,(st,at)=>{tt(parsePropPath(st),at,rt,0)}),rt}return null}function stringifySafely(nt,tt,rt){if(utils$1.isString(nt))try{return(tt||JSON.parse)(nt),utils$1.trim(nt)}catch(st){if(st.name!=="SyntaxError")throw st}return(0,JSON.stringify)(nt)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function nt(tt,rt){const st=rt.getContentType()||"",at=st.indexOf("application/json")>-1,lt=utils$1.isObject(tt);if(lt&&utils$1.isHTMLForm(tt)&&(tt=new FormData(tt)),utils$1.isFormData(tt))return at?JSON.stringify(formDataToJSON(tt)):tt;if(utils$1.isArrayBuffer(tt)||utils$1.isBuffer(tt)||utils$1.isStream(tt)||utils$1.isFile(tt)||utils$1.isBlob(tt)||utils$1.isReadableStream(tt))return tt;if(utils$1.isArrayBufferView(tt))return tt.buffer;if(utils$1.isURLSearchParams(tt))return rt.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),tt.toString();let yt;if(lt){if(st.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(tt,this.formSerializer).toString();if((yt=utils$1.isFileList(tt))||st.indexOf("multipart/form-data")>-1){const vt=this.env&&this.env.FormData;return toFormData(yt?{"files[]":tt}:tt,vt&&new vt,this.formSerializer)}}return lt||at?(rt.setContentType("application/json",!1),stringifySafely(tt)):tt}],transformResponse:[function nt(tt){const rt=this.transitional||defaults.transitional,st=rt&&rt.forcedJSONParsing,at=this.responseType==="json";if(utils$1.isResponse(tt)||utils$1.isReadableStream(tt))return tt;if(tt&&utils$1.isString(tt)&&(st&&!this.responseType||at)){const dt=!(rt&&rt.silentJSONParsing)&&at;try{return JSON.parse(tt)}catch(yt){if(dt)throw yt.name==="SyntaxError"?AxiosError.from(yt,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):yt}}return tt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function nt(tt){return tt>=200&&tt<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],nt=>{defaults.headers[nt]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=nt=>{const tt={};let rt,st,at;return nt&&nt.split(`
`).forEach(function(dt){at=dt.indexOf(":"),rt=dt.substring(0,at).trim().toLowerCase(),st=dt.substring(at+1).trim(),!(!rt||tt[rt]&&ignoreDuplicateOf[rt])&&(rt==="set-cookie"?tt[rt]?tt[rt].push(st):tt[rt]=[st]:tt[rt]=tt[rt]?tt[rt]+", "+st:st)}),tt},$internals=Symbol("internals");function normalizeHeader(nt){return nt&&String(nt).trim().toLowerCase()}function normalizeValue(nt){return nt===!1||nt==null?nt:utils$1.isArray(nt)?nt.map(normalizeValue):String(nt)}function parseTokens(nt){const tt=Object.create(null),rt=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let st;for(;st=rt.exec(nt);)tt[st[1]]=st[2];return tt}const isValidHeaderName=nt=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(nt.trim());function matchHeaderValue(nt,tt,rt,st,at){if(utils$1.isFunction(st))return st.call(this,tt,rt);if(at&&(tt=rt),!!utils$1.isString(tt)){if(utils$1.isString(st))return tt.indexOf(st)!==-1;if(utils$1.isRegExp(st))return st.test(tt)}}function formatHeader(nt){return nt.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(tt,rt,st)=>rt.toUpperCase()+st)}function buildAccessors(nt,tt){const rt=utils$1.toCamelCase(" "+tt);["get","set","has"].forEach(st=>{Object.defineProperty(nt,st+rt,{value:function(at,lt,dt){return this[st].call(this,tt,at,lt,dt)},configurable:!0})})}class AxiosHeaders{constructor(tt){tt&&this.set(tt)}set(tt,rt,st){const at=this;function lt(yt,vt,_t){const bt=normalizeHeader(vt);if(!bt)throw new Error("header name must be a non-empty string");const Mt=utils$1.findKey(at,bt);(!Mt||at[Mt]===void 0||_t===!0||_t===void 0&&at[Mt]!==!1)&&(at[Mt||vt]=normalizeValue(yt))}const dt=(yt,vt)=>utils$1.forEach(yt,(_t,bt)=>lt(_t,bt,vt));if(utils$1.isPlainObject(tt)||tt instanceof this.constructor)dt(tt,rt);else if(utils$1.isString(tt)&&(tt=tt.trim())&&!isValidHeaderName(tt))dt(parseHeaders(tt),rt);else if(utils$1.isHeaders(tt))for(const[yt,vt]of tt.entries())lt(vt,yt,st);else tt!=null&&lt(rt,tt,st);return this}get(tt,rt){if(tt=normalizeHeader(tt),tt){const st=utils$1.findKey(this,tt);if(st){const at=this[st];if(!rt)return at;if(rt===!0)return parseTokens(at);if(utils$1.isFunction(rt))return rt.call(this,at,st);if(utils$1.isRegExp(rt))return rt.exec(at);throw new TypeError("parser must be boolean|regexp|function")}}}has(tt,rt){if(tt=normalizeHeader(tt),tt){const st=utils$1.findKey(this,tt);return!!(st&&this[st]!==void 0&&(!rt||matchHeaderValue(this,this[st],st,rt)))}return!1}delete(tt,rt){const st=this;let at=!1;function lt(dt){if(dt=normalizeHeader(dt),dt){const yt=utils$1.findKey(st,dt);yt&&(!rt||matchHeaderValue(st,st[yt],yt,rt))&&(delete st[yt],at=!0)}}return utils$1.isArray(tt)?tt.forEach(lt):lt(tt),at}clear(tt){const rt=Object.keys(this);let st=rt.length,at=!1;for(;st--;){const lt=rt[st];(!tt||matchHeaderValue(this,this[lt],lt,tt,!0))&&(delete this[lt],at=!0)}return at}normalize(tt){const rt=this,st={};return utils$1.forEach(this,(at,lt)=>{const dt=utils$1.findKey(st,lt);if(dt){rt[dt]=normalizeValue(at),delete rt[lt];return}const yt=tt?formatHeader(lt):String(lt).trim();yt!==lt&&delete rt[lt],rt[yt]=normalizeValue(at),st[yt]=!0}),this}concat(...tt){return this.constructor.concat(this,...tt)}toJSON(tt){const rt=Object.create(null);return utils$1.forEach(this,(st,at)=>{st!=null&&st!==!1&&(rt[at]=tt&&utils$1.isArray(st)?st.join(", "):st)}),rt}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([tt,rt])=>tt+": "+rt).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(tt){return tt instanceof this?tt:new this(tt)}static concat(tt,...rt){const st=new this(tt);return rt.forEach(at=>st.set(at)),st}static accessor(tt){const st=(this[$internals]=this[$internals]={accessors:{}}).accessors,at=this.prototype;function lt(dt){const yt=normalizeHeader(dt);st[yt]||(buildAccessors(at,dt),st[yt]=!0)}return utils$1.isArray(tt)?tt.forEach(lt):lt(tt),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:nt},tt)=>{let rt=tt[0].toUpperCase()+tt.slice(1);return{get:()=>nt,set(st){this[rt]=st}}});utils$1.freezeMethods(AxiosHeaders);function transformData(nt,tt){const rt=this||defaults,st=tt||rt,at=AxiosHeaders.from(st.headers);let lt=st.data;return utils$1.forEach(nt,function(yt){lt=yt.call(rt,lt,at.normalize(),tt?tt.status:void 0)}),at.normalize(),lt}function isCancel(nt){return!!(nt&&nt.__CANCEL__)}function CanceledError(nt,tt,rt){AxiosError.call(this,nt??"canceled",AxiosError.ERR_CANCELED,tt,rt),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(nt,tt,rt){const st=rt.config.validateStatus;!rt.status||!st||st(rt.status)?nt(rt):tt(new AxiosError("Request failed with status code "+rt.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(rt.status/100)-4],rt.config,rt.request,rt))}function parseProtocol(nt){const tt=/^([-+\w]{1,25})(:?\/\/|:)/.exec(nt);return tt&&tt[1]||""}function speedometer(nt,tt){nt=nt||10;const rt=new Array(nt),st=new Array(nt);let at=0,lt=0,dt;return tt=tt!==void 0?tt:1e3,function(vt){const _t=Date.now(),bt=st[lt];dt||(dt=_t),rt[at]=vt,st[at]=_t;let Mt=lt,Ct=0;for(;Mt!==at;)Ct+=rt[Mt++],Mt=Mt%nt;if(at=(at+1)%nt,at===lt&&(lt=(lt+1)%nt),_t-dt<tt)return;const Tt=bt&&_t-bt;return Tt?Math.round(Ct*1e3/Tt):void 0}}function throttle(nt,tt){let rt=0,st=1e3/tt,at,lt;const dt=(_t,bt=Date.now())=>{rt=bt,at=null,lt&&(clearTimeout(lt),lt=null),nt.apply(null,_t)};return[(..._t)=>{const bt=Date.now(),Mt=bt-rt;Mt>=st?dt(_t,bt):(at=_t,lt||(lt=setTimeout(()=>{lt=null,dt(at)},st-Mt)))},()=>at&&dt(at)]}const progressEventReducer=(nt,tt,rt=3)=>{let st=0;const at=speedometer(50,250);return throttle(lt=>{const dt=lt.loaded,yt=lt.lengthComputable?lt.total:void 0,vt=dt-st,_t=at(vt),bt=dt<=yt;st=dt;const Mt={loaded:dt,total:yt,progress:yt?dt/yt:void 0,bytes:vt,rate:_t||void 0,estimated:_t&&yt&&bt?(yt-dt)/_t:void 0,event:lt,lengthComputable:yt!=null,[tt?"download":"upload"]:!0};nt(Mt)},rt)},progressEventDecorator=(nt,tt)=>{const rt=nt!=null;return[st=>tt[0]({lengthComputable:rt,total:nt,loaded:st}),tt[1]]},asyncDecorator=nt=>(...tt)=>utils$1.asap(()=>nt(...tt)),isURLSameOrigin=platform.hasStandardBrowserEnv?((nt,tt)=>rt=>(rt=new URL(rt,platform.origin),nt.protocol===rt.protocol&&nt.host===rt.host&&(tt||nt.port===rt.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(nt,tt,rt,st,at,lt){const dt=[nt+"="+encodeURIComponent(tt)];utils$1.isNumber(rt)&&dt.push("expires="+new Date(rt).toGMTString()),utils$1.isString(st)&&dt.push("path="+st),utils$1.isString(at)&&dt.push("domain="+at),lt===!0&&dt.push("secure"),document.cookie=dt.join("; ")},read(nt){const tt=document.cookie.match(new RegExp("(^|;\\s*)("+nt+")=([^;]*)"));return tt?decodeURIComponent(tt[3]):null},remove(nt){this.write(nt,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(nt){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(nt)}function combineURLs(nt,tt){return tt?nt.replace(/\/?\/$/,"")+"/"+tt.replace(/^\/+/,""):nt}function buildFullPath(nt,tt){return nt&&!isAbsoluteURL(tt)?combineURLs(nt,tt):tt}const headersToObject=nt=>nt instanceof AxiosHeaders?{...nt}:nt;function mergeConfig(nt,tt){tt=tt||{};const rt={};function st(_t,bt,Mt,Ct){return utils$1.isPlainObject(_t)&&utils$1.isPlainObject(bt)?utils$1.merge.call({caseless:Ct},_t,bt):utils$1.isPlainObject(bt)?utils$1.merge({},bt):utils$1.isArray(bt)?bt.slice():bt}function at(_t,bt,Mt,Ct){if(utils$1.isUndefined(bt)){if(!utils$1.isUndefined(_t))return st(void 0,_t,Mt,Ct)}else return st(_t,bt,Mt,Ct)}function lt(_t,bt){if(!utils$1.isUndefined(bt))return st(void 0,bt)}function dt(_t,bt){if(utils$1.isUndefined(bt)){if(!utils$1.isUndefined(_t))return st(void 0,_t)}else return st(void 0,bt)}function yt(_t,bt,Mt){if(Mt in tt)return st(_t,bt);if(Mt in nt)return st(void 0,_t)}const vt={url:lt,method:lt,data:lt,baseURL:dt,transformRequest:dt,transformResponse:dt,paramsSerializer:dt,timeout:dt,timeoutMessage:dt,withCredentials:dt,withXSRFToken:dt,adapter:dt,responseType:dt,xsrfCookieName:dt,xsrfHeaderName:dt,onUploadProgress:dt,onDownloadProgress:dt,decompress:dt,maxContentLength:dt,maxBodyLength:dt,beforeRedirect:dt,transport:dt,httpAgent:dt,httpsAgent:dt,cancelToken:dt,socketPath:dt,responseEncoding:dt,validateStatus:yt,headers:(_t,bt,Mt)=>at(headersToObject(_t),headersToObject(bt),Mt,!0)};return utils$1.forEach(Object.keys(Object.assign({},nt,tt)),function(bt){const Mt=vt[bt]||at,Ct=Mt(nt[bt],tt[bt],bt);utils$1.isUndefined(Ct)&&Mt!==yt||(rt[bt]=Ct)}),rt}const resolveConfig=nt=>{const tt=mergeConfig({},nt);let{data:rt,withXSRFToken:st,xsrfHeaderName:at,xsrfCookieName:lt,headers:dt,auth:yt}=tt;tt.headers=dt=AxiosHeaders.from(dt),tt.url=buildURL(buildFullPath(tt.baseURL,tt.url),nt.params,nt.paramsSerializer),yt&&dt.set("Authorization","Basic "+btoa((yt.username||"")+":"+(yt.password?unescape(encodeURIComponent(yt.password)):"")));let vt;if(utils$1.isFormData(rt)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)dt.setContentType(void 0);else if((vt=dt.getContentType())!==!1){const[_t,...bt]=vt?vt.split(";").map(Mt=>Mt.trim()).filter(Boolean):[];dt.setContentType([_t||"multipart/form-data",...bt].join("; "))}}if(platform.hasStandardBrowserEnv&&(st&&utils$1.isFunction(st)&&(st=st(tt)),st||st!==!1&&isURLSameOrigin(tt.url))){const _t=at&&lt&&cookies.read(lt);_t&&dt.set(at,_t)}return tt},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(nt){return new Promise(function(rt,st){const at=resolveConfig(nt);let lt=at.data;const dt=AxiosHeaders.from(at.headers).normalize();let{responseType:yt,onUploadProgress:vt,onDownloadProgress:_t}=at,bt,Mt,Ct,Tt,$t;function Rt(){Tt&&Tt(),$t&&$t(),at.cancelToken&&at.cancelToken.unsubscribe(bt),at.signal&&at.signal.removeEventListener("abort",bt)}let Et=new XMLHttpRequest;Et.open(at.method.toUpperCase(),at.url,!0),Et.timeout=at.timeout;function wt(){if(!Et)return;const Ft=AxiosHeaders.from("getAllResponseHeaders"in Et&&Et.getAllResponseHeaders()),Ot={data:!yt||yt==="text"||yt==="json"?Et.responseText:Et.response,status:Et.status,statusText:Et.statusText,headers:Ft,config:nt,request:Et};settle(function(Xt){rt(Xt),Rt()},function(Xt){st(Xt),Rt()},Ot),Et=null}"onloadend"in Et?Et.onloadend=wt:Et.onreadystatechange=function(){!Et||Et.readyState!==4||Et.status===0&&!(Et.responseURL&&Et.responseURL.indexOf("file:")===0)||setTimeout(wt)},Et.onabort=function(){Et&&(st(new AxiosError("Request aborted",AxiosError.ECONNABORTED,nt,Et)),Et=null)},Et.onerror=function(){st(new AxiosError("Network Error",AxiosError.ERR_NETWORK,nt,Et)),Et=null},Et.ontimeout=function(){let Nt=at.timeout?"timeout of "+at.timeout+"ms exceeded":"timeout exceeded";const Ot=at.transitional||transitionalDefaults;at.timeoutErrorMessage&&(Nt=at.timeoutErrorMessage),st(new AxiosError(Nt,Ot.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,nt,Et)),Et=null},lt===void 0&&dt.setContentType(null),"setRequestHeader"in Et&&utils$1.forEach(dt.toJSON(),function(Nt,Ot){Et.setRequestHeader(Ot,Nt)}),utils$1.isUndefined(at.withCredentials)||(Et.withCredentials=!!at.withCredentials),yt&&yt!=="json"&&(Et.responseType=at.responseType),_t&&([Ct,$t]=progressEventReducer(_t,!0),Et.addEventListener("progress",Ct)),vt&&Et.upload&&([Mt,Tt]=progressEventReducer(vt),Et.upload.addEventListener("progress",Mt),Et.upload.addEventListener("loadend",Tt)),(at.cancelToken||at.signal)&&(bt=Ft=>{Et&&(st(!Ft||Ft.type?new CanceledError(null,nt,Et):Ft),Et.abort(),Et=null)},at.cancelToken&&at.cancelToken.subscribe(bt),at.signal&&(at.signal.aborted?bt():at.signal.addEventListener("abort",bt)));const Pt=parseProtocol(at.url);if(Pt&&platform.protocols.indexOf(Pt)===-1){st(new AxiosError("Unsupported protocol "+Pt+":",AxiosError.ERR_BAD_REQUEST,nt));return}Et.send(lt||null)})},composeSignals=(nt,tt)=>{const{length:rt}=nt=nt?nt.filter(Boolean):[];if(tt||rt){let st=new AbortController,at;const lt=function(_t){if(!at){at=!0,yt();const bt=_t instanceof Error?_t:this.reason;st.abort(bt instanceof AxiosError?bt:new CanceledError(bt instanceof Error?bt.message:bt))}};let dt=tt&&setTimeout(()=>{dt=null,lt(new AxiosError(`timeout ${tt} of ms exceeded`,AxiosError.ETIMEDOUT))},tt);const yt=()=>{nt&&(dt&&clearTimeout(dt),dt=null,nt.forEach(_t=>{_t.unsubscribe?_t.unsubscribe(lt):_t.removeEventListener("abort",lt)}),nt=null)};nt.forEach(_t=>_t.addEventListener("abort",lt));const{signal:vt}=st;return vt.unsubscribe=()=>utils$1.asap(yt),vt}},streamChunk=function*(nt,tt){let rt=nt.byteLength;if(rt<tt){yield nt;return}let st=0,at;for(;st<rt;)at=st+tt,yield nt.slice(st,at),st=at},readBytes=async function*(nt,tt){for await(const rt of readStream(nt))yield*streamChunk(rt,tt)},readStream=async function*(nt){if(nt[Symbol.asyncIterator]){yield*nt;return}const tt=nt.getReader();try{for(;;){const{done:rt,value:st}=await tt.read();if(rt)break;yield st}}finally{await tt.cancel()}},trackStream=(nt,tt,rt,st)=>{const at=readBytes(nt,tt);let lt=0,dt,yt=vt=>{dt||(dt=!0,st&&st(vt))};return new ReadableStream({async pull(vt){try{const{done:_t,value:bt}=await at.next();if(_t){yt(),vt.close();return}let Mt=bt.byteLength;if(rt){let Ct=lt+=Mt;rt(Ct)}vt.enqueue(new Uint8Array(bt))}catch(_t){throw yt(_t),_t}},cancel(vt){return yt(vt),at.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(nt=>tt=>nt.encode(tt))(new TextEncoder):async nt=>new Uint8Array(await new Response(nt).arrayBuffer())),test=(nt,...tt)=>{try{return!!nt(...tt)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let nt=!1;const tt=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return nt=!0,"half"}}).headers.has("Content-Type");return nt&&!tt}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(nt=>nt.body)};isFetchSupported&&(nt=>{["text","arrayBuffer","blob","formData","stream"].forEach(tt=>{!resolvers[tt]&&(resolvers[tt]=utils$1.isFunction(nt[tt])?rt=>rt[tt]():(rt,st)=>{throw new AxiosError(`Response type '${tt}' is not supported`,AxiosError.ERR_NOT_SUPPORT,st)})})})(new Response);const getBodyLength=async nt=>{if(nt==null)return 0;if(utils$1.isBlob(nt))return nt.size;if(utils$1.isSpecCompliantForm(nt))return(await new Request(platform.origin,{method:"POST",body:nt}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(nt)||utils$1.isArrayBuffer(nt))return nt.byteLength;if(utils$1.isURLSearchParams(nt)&&(nt=nt+""),utils$1.isString(nt))return(await encodeText(nt)).byteLength},resolveBodyLength=async(nt,tt)=>{const rt=utils$1.toFiniteNumber(nt.getContentLength());return rt??getBodyLength(tt)},fetchAdapter=isFetchSupported&&(async nt=>{let{url:tt,method:rt,data:st,signal:at,cancelToken:lt,timeout:dt,onDownloadProgress:yt,onUploadProgress:vt,responseType:_t,headers:bt,withCredentials:Mt="same-origin",fetchOptions:Ct}=resolveConfig(nt);_t=_t?(_t+"").toLowerCase():"text";let Tt=composeSignals([at,lt&&lt.toAbortSignal()],dt),$t;const Rt=Tt&&Tt.unsubscribe&&(()=>{Tt.unsubscribe()});let Et;try{if(vt&&supportsRequestStream&&rt!=="get"&&rt!=="head"&&(Et=await resolveBodyLength(bt,st))!==0){let Ot=new Request(tt,{method:"POST",body:st,duplex:"half"}),Bt;if(utils$1.isFormData(st)&&(Bt=Ot.headers.get("content-type"))&&bt.setContentType(Bt),Ot.body){const[Xt,Zt]=progressEventDecorator(Et,progressEventReducer(asyncDecorator(vt)));st=trackStream(Ot.body,DEFAULT_CHUNK_SIZE,Xt,Zt)}}utils$1.isString(Mt)||(Mt=Mt?"include":"omit");const wt="credentials"in Request.prototype;$t=new Request(tt,{...Ct,signal:Tt,method:rt.toUpperCase(),headers:bt.normalize().toJSON(),body:st,duplex:"half",credentials:wt?Mt:void 0});let Pt=await fetch($t);const Ft=supportsResponseStream&&(_t==="stream"||_t==="response");if(supportsResponseStream&&(yt||Ft&&Rt)){const Ot={};["status","statusText","headers"].forEach(rn=>{Ot[rn]=Pt[rn]});const Bt=utils$1.toFiniteNumber(Pt.headers.get("content-length")),[Xt,Zt]=yt&&progressEventDecorator(Bt,progressEventReducer(asyncDecorator(yt),!0))||[];Pt=new Response(trackStream(Pt.body,DEFAULT_CHUNK_SIZE,Xt,()=>{Zt&&Zt(),Rt&&Rt()}),Ot)}_t=_t||"text";let Nt=await resolvers[utils$1.findKey(resolvers,_t)||"text"](Pt,nt);return!Ft&&Rt&&Rt(),await new Promise((Ot,Bt)=>{settle(Ot,Bt,{data:Nt,headers:AxiosHeaders.from(Pt.headers),status:Pt.status,statusText:Pt.statusText,config:nt,request:$t})})}catch(wt){throw Rt&&Rt(),wt&&wt.name==="TypeError"&&/fetch/i.test(wt.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,nt,$t),{cause:wt.cause||wt}):AxiosError.from(wt,wt&&wt.code,nt,$t)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(nt,tt)=>{if(nt){try{Object.defineProperty(nt,"name",{value:tt})}catch{}Object.defineProperty(nt,"adapterName",{value:tt})}});const renderReason=nt=>`- ${nt}`,isResolvedHandle=nt=>utils$1.isFunction(nt)||nt===null||nt===!1,adapters={getAdapter:nt=>{nt=utils$1.isArray(nt)?nt:[nt];const{length:tt}=nt;let rt,st;const at={};for(let lt=0;lt<tt;lt++){rt=nt[lt];let dt;if(st=rt,!isResolvedHandle(rt)&&(st=knownAdapters[(dt=String(rt)).toLowerCase()],st===void 0))throw new AxiosError(`Unknown adapter '${dt}'`);if(st)break;at[dt||"#"+lt]=st}if(!st){const lt=Object.entries(at).map(([yt,vt])=>`adapter ${yt} `+(vt===!1?"is not supported by the environment":"is not available in the build"));let dt=tt?lt.length>1?`since :
`+lt.map(renderReason).join(`
`):" "+renderReason(lt[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+dt,"ERR_NOT_SUPPORT")}return st},adapters:knownAdapters};function throwIfCancellationRequested(nt){if(nt.cancelToken&&nt.cancelToken.throwIfRequested(),nt.signal&&nt.signal.aborted)throw new CanceledError(null,nt)}function dispatchRequest(nt){return throwIfCancellationRequested(nt),nt.headers=AxiosHeaders.from(nt.headers),nt.data=transformData.call(nt,nt.transformRequest),["post","put","patch"].indexOf(nt.method)!==-1&&nt.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(nt.adapter||defaults.adapter)(nt).then(function(st){return throwIfCancellationRequested(nt),st.data=transformData.call(nt,nt.transformResponse,st),st.headers=AxiosHeaders.from(st.headers),st},function(st){return isCancel(st)||(throwIfCancellationRequested(nt),st&&st.response&&(st.response.data=transformData.call(nt,nt.transformResponse,st.response),st.response.headers=AxiosHeaders.from(st.response.headers))),Promise.reject(st)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((nt,tt)=>{validators$1[nt]=function(st){return typeof st===nt||"a"+(tt<1?"n ":" ")+nt}});const deprecatedWarnings={};validators$1.transitional=function nt(tt,rt,st){function at(lt,dt){return"[Axios v"+VERSION+"] Transitional option '"+lt+"'"+dt+(st?". "+st:"")}return(lt,dt,yt)=>{if(tt===!1)throw new AxiosError(at(dt," has been removed"+(rt?" in "+rt:"")),AxiosError.ERR_DEPRECATED);return rt&&!deprecatedWarnings[dt]&&(deprecatedWarnings[dt]=!0,console.warn(at(dt," has been deprecated since v"+rt+" and will be removed in the near future"))),tt?tt(lt,dt,yt):!0}};validators$1.spelling=function nt(tt){return(rt,st)=>(console.warn(`${st} is likely a misspelling of ${tt}`),!0)};function assertOptions(nt,tt,rt){if(typeof nt!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const st=Object.keys(nt);let at=st.length;for(;at-- >0;){const lt=st[at],dt=tt[lt];if(dt){const yt=nt[lt],vt=yt===void 0||dt(yt,lt,nt);if(vt!==!0)throw new AxiosError("option "+lt+" must be "+vt,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(rt!==!0)throw new AxiosError("Unknown option "+lt,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(tt){this.defaults=tt,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(tt,rt){try{return await this._request(tt,rt)}catch(st){if(st instanceof Error){let at={};Error.captureStackTrace?Error.captureStackTrace(at):at=new Error;const lt=at.stack?at.stack.replace(/^.+\n/,""):"";try{st.stack?lt&&!String(st.stack).endsWith(lt.replace(/^.+\n.+\n/,""))&&(st.stack+=`
`+lt):st.stack=lt}catch{}}throw st}}_request(tt,rt){typeof tt=="string"?(rt=rt||{},rt.url=tt):rt=tt||{},rt=mergeConfig(this.defaults,rt);const{transitional:st,paramsSerializer:at,headers:lt}=rt;st!==void 0&&validator.assertOptions(st,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),at!=null&&(utils$1.isFunction(at)?rt.paramsSerializer={serialize:at}:validator.assertOptions(at,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(rt,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),rt.method=(rt.method||this.defaults.method||"get").toLowerCase();let dt=lt&&utils$1.merge(lt.common,lt[rt.method]);lt&&utils$1.forEach(["delete","get","head","post","put","patch","common"],$t=>{delete lt[$t]}),rt.headers=AxiosHeaders.concat(dt,lt);const yt=[];let vt=!0;this.interceptors.request.forEach(function(Rt){typeof Rt.runWhen=="function"&&Rt.runWhen(rt)===!1||(vt=vt&&Rt.synchronous,yt.unshift(Rt.fulfilled,Rt.rejected))});const _t=[];this.interceptors.response.forEach(function(Rt){_t.push(Rt.fulfilled,Rt.rejected)});let bt,Mt=0,Ct;if(!vt){const $t=[dispatchRequest.bind(this),void 0];for($t.unshift.apply($t,yt),$t.push.apply($t,_t),Ct=$t.length,bt=Promise.resolve(rt);Mt<Ct;)bt=bt.then($t[Mt++],$t[Mt++]);return bt}Ct=yt.length;let Tt=rt;for(Mt=0;Mt<Ct;){const $t=yt[Mt++],Rt=yt[Mt++];try{Tt=$t(Tt)}catch(Et){Rt.call(this,Et);break}}try{bt=dispatchRequest.call(this,Tt)}catch($t){return Promise.reject($t)}for(Mt=0,Ct=_t.length;Mt<Ct;)bt=bt.then(_t[Mt++],_t[Mt++]);return bt}getUri(tt){tt=mergeConfig(this.defaults,tt);const rt=buildFullPath(tt.baseURL,tt.url);return buildURL(rt,tt.params,tt.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function nt(tt){Axios.prototype[tt]=function(rt,st){return this.request(mergeConfig(st||{},{method:tt,url:rt,data:(st||{}).data}))}});utils$1.forEach(["post","put","patch"],function nt(tt){function rt(st){return function(lt,dt,yt){return this.request(mergeConfig(yt||{},{method:tt,headers:st?{"Content-Type":"multipart/form-data"}:{},url:lt,data:dt}))}}Axios.prototype[tt]=rt(),Axios.prototype[tt+"Form"]=rt(!0)});class CancelToken{constructor(tt){if(typeof tt!="function")throw new TypeError("executor must be a function.");let rt;this.promise=new Promise(function(lt){rt=lt});const st=this;this.promise.then(at=>{if(!st._listeners)return;let lt=st._listeners.length;for(;lt-- >0;)st._listeners[lt](at);st._listeners=null}),this.promise.then=at=>{let lt;const dt=new Promise(yt=>{st.subscribe(yt),lt=yt}).then(at);return dt.cancel=function(){st.unsubscribe(lt)},dt},tt(function(lt,dt,yt){st.reason||(st.reason=new CanceledError(lt,dt,yt),rt(st.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(tt){if(this.reason){tt(this.reason);return}this._listeners?this._listeners.push(tt):this._listeners=[tt]}unsubscribe(tt){if(!this._listeners)return;const rt=this._listeners.indexOf(tt);rt!==-1&&this._listeners.splice(rt,1)}toAbortSignal(){const tt=new AbortController,rt=st=>{tt.abort(st)};return this.subscribe(rt),tt.signal.unsubscribe=()=>this.unsubscribe(rt),tt.signal}static source(){let tt;return{token:new CancelToken(function(at){tt=at}),cancel:tt}}}function spread(nt){return function(rt){return nt.apply(null,rt)}}function isAxiosError(nt){return utils$1.isObject(nt)&&nt.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([nt,tt])=>{HttpStatusCode[tt]=nt});function createInstance(nt){const tt=new Axios(nt),rt=bind(Axios.prototype.request,tt);return utils$1.extend(rt,Axios.prototype,tt,{allOwnKeys:!0}),utils$1.extend(rt,tt,null,{allOwnKeys:!0}),rt.create=function(at){return createInstance(mergeConfig(nt,at))},rt}const axios=createInstance(defaults);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function nt(tt){return Promise.all(tt)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=nt=>formDataToJSON(utils$1.isHTMLForm(nt)?new FormData(nt):nt);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;const basename$1="/conexs/";function GraphPage(){const[nt,tt]=reactExports.useState([0,1]),[rt,st]=reactExports.useState([0,1]),[at,lt]=reactExports.useState(null),[dt,yt]=reactExports.useState(null),[vt,_t]=reactExports.useState(null),[bt,Mt]=reactExports.useState(null),[Ct,Tt]=reactExports.useState(!0);function $t(Ft){const Nt=Ft.split(`
`),Ot=[],Bt=[];return Nt.forEach(Xt=>{const[Zt,rn]=Xt.trim().split(/\s+/);Zt&&rn&&(Ot.push(parseFloat(Zt)),Bt.push(parseFloat(rn)))}),{x:Ot,y:Bt}}function Rt(Ft){const Nt=Ft.split(`
`);let Ot="";for(let Bt=0;Bt<Nt.length;Bt++){const Zt=Nt[Bt].split(" ").filter(rn=>rn!="");Ot=Ot+[Zt[0],"0.00000000",`
`,Zt[0],Zt[1],`
`,Zt[0],"0.00000000",`
`].join(" ")}return Ot}const Et=Ft=>{if(!Ft.target.files)return;const Nt=Ft.target.files[0];if(Nt){const Ot=new FileReader;Ot.onload=function(){let Bt=Ot.result,Xt=lt,Zt=yt,rn=vt,Gt=bt;Nt.type=="application/hyperstudio"&&(Bt=Rt(Bt),Xt=_t,Zt=Mt,rn=at,Gt=dt);const nn=Bt.split(`
`),cn=[],an=[];nn.forEach(Cn=>{const[Mn,un]=Cn.trim().split(/\s+/);Mn&&un&&(cn.push(parseFloat(Mn)),an.push(parseFloat(un)))}),Xt(cn),Zt(an);let mn=Ao(cn),En=Ao(an);rn!=null&&Gt!=null&&mn&&En&&(mn=ks([mn,Ao(rn)]),En=ks([En,Ao(Gt)])),tt(mn||nt),st(En||rt)},Ot.readAsText(Nt)}},wt=(Ft,Nt)=>jsxRuntimeExports.jsxs("p",{children:[Ft.toPrecision(8),", ",Nt.toPrecision(8)]}),Pt=()=>{axios.all([axios.get(basename$1+"data/orca_result.txt.xes.dat",{headers:{"Content-Type":"application/plain"}}),axios.get(basename$1+"data/orca_result.txt.xes.stk",{headers:{"Content-Type":"application/plain"}})]).then(axios.spread((Ft,Nt)=>{const Ot=Rt(Nt.data),Bt=Ft.data,Xt=Ot.toString(),Zt=Bt.toString(),rn=$t(Xt),Gt=$t(Zt),nn=Ao(Gt.x),cn=Ao(Gt.y);tt(nn||nt),st(cn||rt),lt(rn.x),yt(rn.y),_t(Gt.x),Mt(Gt.y),Tt(!1)}))};return jsxRuntimeExports.jsxs(Stack$5,{direction:"row",height:"100%",children:[jsxRuntimeExports.jsxs(Stack$5,{height:"100%",children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{textAlign:"center"},children:"Upload `.stk` or `.dat` file to visualize"}),jsxRuntimeExports.jsxs(Button,{variant:"contained",role:void 0,tabIndex:-1,component:"label",children:["Upload .dat/.stk File",jsxRuntimeExports.jsx(VisuallyHiddenInput,{type:"file",name:"file",onChange:Et})]}),Ct&&jsxRuntimeExports.jsx(Button,{variant:"outlined",sx:{m:5},onClick:Pt,children:"Example of Graph"})]}),jsxRuntimeExports.jsxs(Te,{abscissaConfig:{showGrid:!0,visDomain:[nt[0],nt[1]]},ordinateConfig:{showGrid:!0,visDomain:[rt[0],rt[1]]},children:[jsxRuntimeExports.jsx(Me,{}),jsxRuntimeExports.jsx(wn,{renderTooltip:wt}),jsxRuntimeExports.jsx(Pe,{}),at!=null&&dt!=null&&jsxRuntimeExports.jsx(zn,{abscissas:at,color:"green",ordinates:dt,visible:!0}),vt!=null&&bt!=null&&jsxRuntimeExports.jsx(zn,{abscissas:vt,color:"orange",ordinates:bt,visible:!0})]})]})}function MoleculeDataTextArea(nt){const tt=nt.moleculedata.split(`
`),[rt,st]=reactExports.useState(Number(tt[0])),[at,lt]=reactExports.useState(tt[1]),[dt,yt]=reactExports.useState(tt.slice(2).join(`
`)),[vt,_t]=reactExports.useState([""]),[bt,Mt]=reactExports.useState(!1);function Ct($t){const Rt=$t.split(`
`);let Et="";for(let wt=0;wt<Rt.length;wt++){const Pt=Rt[wt].split(/\b\s+/).filter(Ft=>Ft);Pt.length!=0&&(Pt.length!=4&&(Et=Et+"Wrong number of items on line "+(wt+1)+`
`,Mt(!0)),/^[a-zA-Z]+$/.test(Pt[0])||(Et=Et+"Invalid chemical on line "+(wt+1)+`
`,Mt(!0)),(!/^[+-]?[0-9]{1,}(?:\.[0-9]{1,})?$/.test(Pt[1])||!/^[+-]?[0-9]{1,}(?:\.[0-9]{1,})?$/.test(Pt[2])||!/^[+-]?[0-9]{1,}(?:\.[0-9]{1,})?$/.test(Pt[3]))&&(Et=Et+"Invalid number on line "+(wt+1)+`
`,Mt(!0)))}return Et}reactExports.useEffect(()=>{const $t=nt.moleculedata.split(`
`);st(Number($t[0])),lt($t[1]),yt($t.slice(2).join(`
`))},[nt.moleculedata]);function Tt(){const $t=Ct(dt);if($t=="")Mt(!1),nt.setmoleculeData(rt+`
`+at+`
`+dt.split(`
`).filter(Rt=>Rt).join(`
`));else{const Rt=$t.split(`
`);Rt.length=Rt.length-1,_t(Rt)}}return jsxRuntimeExports.jsxs(Grid2,{container:!0,spacing:2,height:"100%",children:[jsxRuntimeExports.jsx(Grid2,{size:4,children:jsxRuntimeExports.jsx(TextField,{id:"atomBox",label:"Atoms",value:rt,disabled:!0})}),jsxRuntimeExports.jsx(Grid2,{size:8,children:jsxRuntimeExports.jsx(TextField,{id:"Comment/Lattice",label:"Comment/Lattice",value:at,onChange:$t=>lt($t.target.value)})}),jsxRuntimeExports.jsx(Grid2,{size:12,children:jsxRuntimeExports.jsx(TextField,{sx:{width:"100%"},id:"datafilebox",label:"Molecule Data",multiline:!0,rows:12,value:dt,onChange:$t=>{st($t.target.value.split(`
`).filter(Rt=>Rt).length),yt($t.target.value)}})}),jsxRuntimeExports.jsx(Grid2,{size:12,children:jsxRuntimeExports.jsx(Button,{variant:"contained",onClick:Tt,children:"Render"})}),bt?jsxRuntimeExports.jsx(Alert,{variant:"filled",sx:{m:2,width:"100%"},severity:"error",children:jsxRuntimeExports.jsx("ul",{style:{padding:0},children:vt.map(($t,Rt)=>jsxRuntimeExports.jsx("li",{style:{listStyle:"none"},children:$t},Rt))})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})]})}function FormPage(nt){const tt=reactExports.useRef(null),[rt,st]=reactExports.useState(),at={title:"Simulation Parameters",type:"object",properties:{Technique:{title:"Technique",enum:["XAS","XES"],default:"XES"},Functional:{title:"Functional",type:"string",enum:["BP86","BLYP","B3LYP RIJCOSX"],default:"BP86"},Basis:{title:"Basis",type:"string",enum:["def2-SVP","def2-SV(P)","def2-TZVP"],default:"def2-SVP"},"Charge Value":{title:"Charge Value",type:"number",default:0},"Multiplicity Value":{title:"Multiplicity Value",type:"number",default:1},Solvent:{title:"Solvent",type:"string",enum:["None","Water","Acetone","Acetonitrile","Ammonia","Benzene","CCl4","CH2C12","Chloroform","Cyclohexane","DMF","DMSO","Ethanol","Hexane","Methanol","Octanol","Pyridine","THF","Toluene"],default:"None"},CPUs:{title:"CPUs",type:"number",default:4}},dependencies:{Technique:{oneOf:[{properties:{Technique:{enum:["XAS"]},"OrbWin[0] Start":{type:"number",default:0},"OrbWin[0] Stop":{type:"number",default:0},"OrbWin[1] Start":{type:"number",default:0},"OrbWin[1] Stop":{type:"number",default:0}}}]}}},lt={textArea:{"ui:widget":"textarea"}},dt={cpus:4,orca_solvents:[{name:"None",value:[0,0]},{name:"Water",value:[80.4,1.33]},{name:"Acetone",value:[20.7,1.359]},{name:"Acetonitrile",value:[36.6,1.344]},{name:"Ammonia",value:[22.4,1.33]},{name:"Benzene",value:[2.28,1.501]},{name:"CCl4",value:[2.24,1.466]},{name:"CH2Cl2",value:[9.08,1.424]},{name:"Chloroform",value:[4.9,1.45]},{name:"Cyclohexane",value:[2.02,1.425]},{name:"DMF",value:[38.3,1.43]},{name:"DMSO",value:[47.2,1.479]},{name:"Ethanol",value:[24.3,1.361]},{name:"Hexane",value:[1.89,1.375]},{name:"Methanol",value:[32.63,1.329]},{name:"Octanol",value:[10.3,1.421]},{name:"Pyridine",value:[12.5,1.51]},{name:"THF",value:[7.25,1.407]},{name:"Toluene",value:[2.4,1.497]}]};function yt(_t){let bt="";if(_t.Technique=="XAS"?(bt+="! "+_t.Functional+" DKH2 "+_t.Basis+" SARC/J ",_t.Solvent!="None"&&(bt+="CPCM("+_t.Solvent+") "),bt+=`
`,bt+=`%maxcore 5024

`,bt+="%pal nprocs "+_t.CPUs+`
`,bt+=`end

`,bt+=`%tddft
`,bt+="orbWin[0] = "+_t["OrbWin[0] Start"]+","+_t["OrbWin[0] Stop"]+`,-1,-1
`,bt+="orbWin[1] = "+_t["OrbWin[1] Start"]+","+_t["OrbWin[1] Stop"]+`,-1,-1
`,bt+=`doquad true
`,bt+=`nroots 20
`,bt+=`maxdim 10
`,bt+=`end

`):_t.Technique=="XES"&&(bt="! UKS "+_t.Functional+" DKH2 "+_t.Basis+" SARC/J ",_t.Solvent!="None"&&(bt+="CPCM("+_t.Solvent+") "),bt+=`%maxcore 5024

`,bt+="%pal nprocs "+_t.CPUs+`
`,bt+=`end

`,bt+=`%xes
`,bt+=`CoreOrb 0,1
`,bt+=`OrbOp 0,1
`,bt+=`DoSOC true
`,bt+=`Normalize true
`,bt+=`MDOriginAdjustMethod 1
`,bt+=`end

`),_t.Solvent!="None"){bt+=`%cpcm
`;let Ct=[];for(let Tt=0;Tt<dt.orca_solvents.length;Tt++)if(dt.orca_solvents[Tt].name==_t.Solvent){Ct=dt.orca_solvents[Tt].value;break}bt+="epsilon "+Ct[0]+` # Dielectric constant
`,bt+="refrac "+Ct[1]+` # Refractive index
`,bt+=`end

`}bt+="*xyz "+_t["Charge Value"]+" "+_t["Multiplicity Value"]+`
`,bt+=nt.moleculedata.split(`
`).slice(2).join(`
`),bt+="end";const Mt=new Blob([bt],{type:"text/plain"});if(tt.current){const Ct=tt.current;Ct.href=URL.createObjectURL(Mt),Ct.download="SimulationOutput.txt",Ct.click()}}function vt(_t){const{title:bt}=_t;return jsxRuntimeExports.jsx(Typography,{children:bt})}return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Form,{schema:at,uiSchema:lt,validator:validator$1,templates:{TitleFieldTemplate:vt},onChange:({formData:_t})=>st(_t),formData:rt,onSubmit:({formData:_t})=>yt(_t),children:jsxRuntimeExports.jsx(Box,{textAlign:"center",children:jsxRuntimeExports.jsx(Button,{variant:"contained",sx:{m:5,p:2},type:"submit",children:"Download Input File"})})}),jsxRuntimeExports.jsx("a",{ref:tt,style:{display:"none"}})]})})}const basename="/conexs/";function MoleculeViewer(){const[nt,tt]=reactExports.useState("#3465A4"),[rt,st]=reactExports.useState("Stick"),[at,lt]=reactExports.useState(`12
Benzene molecule
C   0.000000  1.402720  0.000000
H   0.000000  2.490290  0.000000
C  -1.214790  0.701360  0.000000
H  -2.156660  1.245150  0.000000
C  -1.214790 -0.701360  0.000000
H  -2.156660 -1.245150  0.000000
C   0.000000 -1.402720  0.000000
H   0.000000 -2.490290  0.000000
C   1.214790 -0.701360  0.000000
H   2.156660 -1.245150  0.000000
C   1.214790  0.701360  0.000000
H   2.156660  1.245150  0.000000`),dt=[{name:"Glucose",path:"xyz/glucose.xyz"},{name:"Carbon Dioxide",path:"xyz/co2.xyz"},{name:"Water",path:"xyz/water.xyz"},{name:"Benzene",path:"xyz/benzene.xyz"},{name:"Chloroethane",path:"xyz/chloroethane.xyz"},{name:"Pyridine",path:"xyz/pyridine.xyz"},{name:"Lattice Example",path:"xyz/lattice.xyz"},{name:"Iron Complex",path:"xyz/fecomplex.xyz"}],yt=vt=>{axios.get(basename+vt,{headers:{"Content-Type":"application/plain"}}).then(_t=>{lt(_t.data)})};return jsxRuntimeExports.jsxs(Grid2,{container:!0,spacing:5,height:"100%",children:[jsxRuntimeExports.jsxs(Grid2,{size:4,children:[jsxRuntimeExports.jsx(Molecule3D,{color:nt,moleculedata:at,style:rt,orbital:null},nt),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center"},children:[jsxRuntimeExports.jsx(Tooltip$1,{title:"Change Background Colour",arrow:!0,children:jsxRuntimeExports.jsx("input",{style:{margin:"50px"},type:"color",value:nt,onChange:vt=>{tt(vt.target.value)}})}),jsxRuntimeExports.jsx(StyleToggle,{style:rt,setStyle:st})]})]}),jsxRuntimeExports.jsx(Grid2,{size:4,children:jsxRuntimeExports.jsxs(Stack$5,{children:[jsxRuntimeExports.jsx(MoleculeDataTextArea,{moleculedata:at,setmoleculeData:lt}),jsxRuntimeExports.jsx(Divider,{variant:"middle"}),jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",sx:{my:1},children:"Examples"}),dt.map((vt,_t)=>jsxRuntimeExports.jsx(Button,{variant:"outlined",sx:{m:1},value:vt.name,onClick:()=>yt(vt.path),children:vt.name},_t))]})]})}),jsxRuntimeExports.jsx(Grid2,{size:4,children:jsxRuntimeExports.jsx(FormPage,{moleculedata:at})})]})}function CustomTabPanel(nt){const{children:tt,value:rt,index:st,...at}=nt;return jsxRuntimeExports.jsx("div",{role:"tabpanel",hidden:rt!==st,id:`simple-tabpanel-${st}`,"aria-labelledby":`simple-tab-${st}`,style:{height:"90%",width:"100%"},...at,children:rt===st&&jsxRuntimeExports.jsx(Box,{sx:{p:1,height:"100%",width:"100%"},children:tt})})}function a11yProps(nt){return{id:`simple-tab-${nt}`,"aria-controls":`simple-tabpanel-${nt}`}}function OrcaPage(){const[nt,tt]=reactExports.useState(0),rt=(st,at)=>{tt(at)};return jsxRuntimeExports.jsxs(Box,{sx:{width:"100%",height:"100%"},children:[jsxRuntimeExports.jsxs(Tabs,{value:nt,onChange:rt,"aria-label":"basic tabs example",children:[jsxRuntimeExports.jsx(Tab,{label:"Input File",...a11yProps(0)}),jsxRuntimeExports.jsx(Tab,{label:"Data Viewer",...a11yProps(1)}),jsxRuntimeExports.jsx(Tab,{label:"Oribital Viewer",...a11yProps(2)})]}),jsxRuntimeExports.jsx(CustomTabPanel,{value:nt,index:0,children:jsxRuntimeExports.jsx(MoleculeViewer,{})}),jsxRuntimeExports.jsx(CustomTabPanel,{value:nt,index:1,children:jsxRuntimeExports.jsx(GraphPage,{})}),jsxRuntimeExports.jsx(CustomTabPanel,{value:nt,index:2,children:jsxRuntimeExports.jsx(OrbitalPage,{})})]})}function App(){const nt=useMediaQuery("(prefers-color-scheme: dark)"),[tt,rt]=reactExports.useState(nt?"dark":"light"),st=reactExports.useMemo(()=>({toggleColorMode:()=>{rt(lt=>lt==="light"?"dark":"light")}}),[]),at=reactExports.useMemo(()=>createTheme({palette:{mode:tt}}),[tt]);return jsxRuntimeExports.jsxs(ThemeProvider,{theme:at,children:[jsxRuntimeExports.jsx(CssBaseline,{}),jsxRuntimeExports.jsxs(Stack$5,{height:"100vh",width:"100vw",spacing:1,children:[jsxRuntimeExports.jsx(Header,{colorMode:tt,toggleColorMode:st.toggleColorMode}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(WelcomePage,{})}),jsxRuntimeExports.jsx(Route,{path:"/orca",element:jsxRuntimeExports.jsx(OrcaPage,{})})]})]})]})}createRoot$1(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/conexs/",children:jsxRuntimeExports.jsx(App,{})})}));
